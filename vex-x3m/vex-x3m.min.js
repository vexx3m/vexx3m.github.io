!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Phaser",[],e):"object"==typeof exports?exports.Phaser=e():t.Phaser=e()}(this,()=>{return o={50792:t=>{"use strict";var o=Object.prototype.hasOwnProperty,p="~";function i(){}function n(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function s(t,e,i,o,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");i=new n(i,o||t,s),o=p?p+e:e;return t._events[o]?t._events[o].fn?t._events[o]=[t._events[o],i]:t._events[o].push(i):(t._events[o]=i,t._eventsCount++),t}function h(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function e(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(p=!1)),e.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)o.call(t,e)&&i.push(p?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},e.prototype.listeners=function(t){var t=p?p+t:t,e=this._events[t];if(!e)return[];if(e.fn)return[e.fn];for(var i=0,o=e.length,s=new Array(o);i<o;i++)s[i]=e[i].fn;return s},e.prototype.listenerCount=function(t){t=p?p+t:t,t=this._events[t];return t?t.fn?1:t.length:0},e.prototype.emit=function(t,e,i,o,s,n){var r=p?p+t:t;if(!this._events[r])return!1;var a,h=this._events[r],l=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,i),!0;case 4:return h.fn.call(h.context,e,i,o),!0;case 5:return h.fn.call(h.context,e,i,o,s),!0;case 6:return h.fn.call(h.context,e,i,o,s,n),!0}for(d=1,a=new Array(l-1);d<l;d++)a[d-1]=arguments[d];h.fn.apply(h.context,a)}else for(var c,u=h.length,d=0;d<u;d++)switch(h[d].once&&this.removeListener(t,h[d].fn,void 0,!0),l){case 1:h[d].fn.call(h[d].context);break;case 2:h[d].fn.call(h[d].context,e);break;case 3:h[d].fn.call(h[d].context,e,i);break;case 4:h[d].fn.call(h[d].context,e,i,o);break;default:if(!a)for(c=1,a=new Array(l-1);c<l;c++)a[c-1]=arguments[c];h[d].fn.apply(h[d].context,a)}return!0},e.prototype.on=function(t,e,i){return s(this,t,e,i,!1)},e.prototype.once=function(t,e,i){return s(this,t,e,i,!0)},e.prototype.removeListener=function(t,e,i,o){t=p?p+t:t;if(this._events[t])if(e){var s=this._events[t];if(s.fn)s.fn!==e||o&&!s.once||i&&s.context!==i||h(this,t);else{for(var n=0,r=[],a=s.length;n<a;n++)(s[n].fn!==e||o&&!s[n].once||i&&s[n].context!==i)&&r.push(s[n]);r.length?this._events[t]=1===r.length?r[0]:r:h(this,t)}}else h(this,t);return this},e.prototype.removeAllListeners=function(t){return t?(t=p?p+t:t,this._events[t]&&h(this,t)):(this._events=new i,this._eventsCount=0),this},e.prototype.off=e.prototype.removeListener,e.prototype.addListener=e.prototype.on,e.prefixed=p,t.exports=e.EventEmitter=e},11517:(t,e,i)=>{var a=i(38829);t.exports=function(t,e,i,o){for(var s=t[0],n=1;n<t.length;n++){var r=t[n];a(r,s,e,i,o),s=r}return t}},80318:(t,e,i)=>{var n=i(66979);t.exports=function(t,e,i,o,s){return n(t,"angle",e,i,o,s)}},60757:t=>{t.exports=function(t,e,i){for(var o=0;o<t.length;o++){var s=t[o];e.call(i,s)}return t}},69927:t=>{t.exports=function(t,e,i){for(var o=i=void 0===i?0:i;o<t.length;o++){var s,n=t[o],r=!0;for(s in e)n[s]!==e[s]&&(r=!1);if(r)return n}return null}},32265:t=>{t.exports=function(t,e,i){void 0===i&&(i=0);for(var o=t.length-1;i<=o;o--){var s,n=t[o],r=!0;for(s in e)n[s]!==e[s]&&(r=!1);if(r)return n}return null}},94420:(t,e,i)=>{var y=i(11879),m=i(60461),x=i(95540),o=i(29747),g=new(i(41481))({sys:{queueDepthSort:o,events:{once:o}}},0,0,1,1).setOrigin(0,0);t.exports=function(t,e){var i=(e=void 0===e?{}:e).hasOwnProperty("width"),o=e.hasOwnProperty("height"),s=x(e,"width",-1),n=x(e,"height",-1),r=x(e,"cellWidth",1),a=x(e,"cellHeight",r),h=x(e,"position",m.TOP_LEFT),l=x(e,"x",0),c=x(e,"y",0),u=0,d=0,p=s*r,f=n*a;g.setPosition(l,c),g.setSize(r,a);for(var b=0;b<t.length;b++)if(y(t[b],g,h),i&&-1===s)g.x+=r;else if(o&&-1===n)g.y+=a;else if(o&&!i){if(d+=a,g.y+=a,d===f&&(d=0,u+=r,g.y=c,g.x+=r,u===p))break}else if(u+=r,g.x+=r,u===p&&(u=0,d+=a,g.x=l,g.y+=a,d===f))break;return t}},41721:(t,e,i)=>{var n=i(66979);t.exports=function(t,e,i,o,s){return n(t,"alpha",e,i,o,s)}},67285:(t,e,i)=>{var n=i(66979);t.exports=function(t,e,i,o,s){return n(t,"x",e,i,o,s)}},9074:(t,e,i)=>{var a=i(66979);t.exports=function(t,e,i,o,s,n,r){return null==i&&(i=e),a(t,"x",e,o,n,r),a(t,"y",i,s,n,r)}},75222:(t,e,i)=>{var n=i(66979);t.exports=function(t,e,i,o,s){return n(t,"y",e,i,o,s)}},22983:t=>{t.exports=function(t,e,i,o){for(var s=i=void 0===i?0:i,n=((o=void 0===o?6.28:o)-i)/t.length,r=e.x,a=e.y,h=e.radius,l=0;l<t.length;l++)t[l].x=r+h*Math.cos(s),t[l].y=a+h*Math.sin(s),s+=n;return t}},95253:t=>{t.exports=function(t,e,i,o){for(var s=i=void 0===i?0:i,n=((o=void 0===o?6.28:o)-i)/t.length,r=e.width/2,a=e.height/2,h=0;h<t.length;h++)t[h].x=e.x+r*Math.cos(s),t[h].y=e.y+a*Math.sin(s),s+=n;return t}},88505:(t,e,i)=>{var a=i(15258),h=i(26708);t.exports=function(t,e,i){for(var o=i?h(e,i,t.length):a(e,t.length),s=0;s<t.length;s++){var n=t[s],r=o[s];n.x=r.x,n.y=r.y}return t}},41346:(t,e,i)=>{var n=i(14649),r=i(86003),a=i(49498);t.exports=function(t,e,i){void 0===i&&(i=0);var o=n(e,!1,t.length);0<i?r(o,i):i<0&&a(o,Math.abs(i));for(var s=0;s<t.length;s++)t[s].x=o[s].x,t[s].y=o[s].y;return t}},11575:(t,e,i)=>{var c=i(84993);t.exports=function(t,e,i){var o=c({x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2},i),s=c({x1:e.x2,y1:e.y2,x2:e.x3,y2:e.y3},i),e=c({x1:e.x3,y1:e.y3,x2:e.x1,y2:e.y1},i);o.pop(),s.pop(),e.pop();for(var n=(o=o.concat(s,e)).length/t.length,r=0,a=0;a<t.length;a++){var h=t[a],l=o[Math.floor(r)];h.x=l.x,h.y=l.y,r+=n}return t}},29953:t=>{t.exports=function(t,e,i){for(var o=0;o<t.length;o++){var s=t[o];s.anims&&s.anims.play(e,i)}return t}},66979:t=>{t.exports=function(t,e,i,o,s,n){void 0===o&&(o=0),void 0===s&&(s=0);var r,a=0,h=t.length;if(1===(n=void 0===n?1:n))for(r=s;r<h;r++)t[r][e]+=i+a*o,a++;else for(r=s;0<=r;r--)t[r][e]+=i+a*o,a++;return t}},43967:t=>{t.exports=function(t,e,i,o,s,n){void 0===o&&(o=0),void 0===s&&(s=0);var r,a=0,h=t.length;if(1===(n=void 0===n?1:n))for(r=s;r<h;r++)t[r][e]=i+a*o,a++;else for(r=s;0<=r;r--)t[r][e]=i+a*o,a++;return t}},88926:(t,e,i)=>{var o=i(28176);t.exports=function(t,e){for(var i=0;i<t.length;i++)o(e,t[i]);return t}},33286:(t,e,i)=>{var o=i(24820);t.exports=function(t,e){for(var i=0;i<t.length;i++)o(e,t[i]);return t}},96e3:(t,e,i)=>{var o=i(65822);t.exports=function(t,e){for(var i=0;i<t.length;i++)o(e,t[i]);return t}},28789:(t,e,i)=>{var o=i(26597);t.exports=function(t,e){for(var i=0;i<t.length;i++)o(e,t[i]);return t}},97154:(t,e,i)=>{var o=i(90260);t.exports=function(t,e){for(var i=0;i<t.length;i++)o(e,t[i]);return t}},20510:(t,e,i)=>{var n=i(66979);t.exports=function(t,e,i,o,s){return n(t,"rotation",e,i,o,s)}},91051:(t,e,i)=>{var a=i(1163),h=i(20339);t.exports=function(t,e,i){for(var o=e.x,s=e.y,n=0;n<t.length;n++){var r=t[n];a(r,o,s,i,Math.max(1,h(r.x,r.y,o,s)))}return t}},76332:(t,e,i)=>{var a=i(1163);t.exports=function(t,e,i,o){var s=e.x,n=e.y;if(0!==o)for(var r=0;r<t.length;r++)a(t[r],s,n,i,o);return t}},61619:(t,e,i)=>{var n=i(66979);t.exports=function(t,e,i,o,s){return n(t,"scaleX",e,i,o,s)}},94868:(t,e,i)=>{var a=i(66979);t.exports=function(t,e,i,o,s,n,r){return null==i&&(i=e),a(t,"scaleX",e,o,n,r),a(t,"scaleY",i,s,n,r)}},95532:(t,e,i)=>{var n=i(66979);t.exports=function(t,e,i,o,s){return n(t,"scaleY",e,i,o,s)}},8689:(t,e,i)=>{var n=i(43967);t.exports=function(t,e,i,o,s){return n(t,"alpha",e,i,o,s)}},2645:(t,e,i)=>{var s=i(43967);t.exports=function(t,e,i,o){return s(t,"blendMode",e,0,i,o)}},32372:(t,e,i)=>{var n=i(43967);t.exports=function(t,e,i,o,s){return n(t,"depth",e,i,o,s)}},85373:t=>{t.exports=function(t,e,i){for(var o=0;o<t.length;o++)t[o].setInteractive(e,i);return t}},81583:(t,e,i)=>{var a=i(43967);t.exports=function(t,e,i,o,s,n,r){return null==i&&(i=e),a(t,"originX",e,o,n,r),a(t,"originY",i,s,n,r),t.forEach(function(t){t.updateDisplayOrigin()}),t}},79939:(t,e,i)=>{var n=i(43967);t.exports=function(t,e,i,o,s){return n(t,"rotation",e,i,o,s)}},2699:(t,e,i)=>{var a=i(43967);t.exports=function(t,e,i,o,s,n,r){return null==i&&(i=e),a(t,"scaleX",e,o,n,r),a(t,"scaleY",i,s,n,r)}},98739:(t,e,i)=>{var n=i(43967);t.exports=function(t,e,i,o,s){return n(t,"scaleX",e,i,o,s)}},98476:(t,e,i)=>{var n=i(43967);t.exports=function(t,e,i,o,s){return n(t,"scaleY",e,i,o,s)}},6207:(t,e,i)=>{var a=i(43967);t.exports=function(t,e,i,o,s,n,r){return null==i&&(i=e),a(t,"scrollFactorX",e,o,n,r),a(t,"scrollFactorY",i,s,n,r)}},6607:(t,e,i)=>{var n=i(43967);t.exports=function(t,e,i,o,s){return n(t,"scrollFactorX",e,i,o,s)}},72248:(t,e,i)=>{var n=i(43967);t.exports=function(t,e,i,o,s){return n(t,"scrollFactorY",e,i,o,s)}},14036:t=>{t.exports=function(t,e,i,o,s){for(var n=0;n<t.length;n++)t[n].setTint(e,i,o,s);return t}},50159:(t,e,i)=>{var s=i(43967);t.exports=function(t,e,i,o){return s(t,"visible",e,0,i,o)}},77597:(t,e,i)=>{var n=i(43967);t.exports=function(t,e,i,o,s){return n(t,"x",e,i,o,s)}},83194:(t,e,i)=>{var a=i(43967);t.exports=function(t,e,i,o,s,n,r){return null==i&&(i=e),a(t,"x",e,o,n,r),a(t,"y",i,s,n,r)}},67678:(t,e,i)=>{var n=i(43967);t.exports=function(t,e,i,o,s){return n(t,"y",e,i,o,s)}},35850:(t,e,i)=>{var f=i(26099);t.exports=function(t,e,i,o,s){void 0===o&&(o=0),void 0===s&&(s=new f);var n,r,a=t.length;if(1===a)n=t[0].x,r=t[0].y,t[0].x=e,t[0].y=i;else{var h=1,l=0;0===o&&(l=a-1,h=a-2),n=t[l].x,r=t[l].y,t[l].x=e,t[l].y=i;for(var c,u,d,p=0;p<a;p++)a<=h||-1===h||(u=(c=t[h]).x,d=c.y,c.x=n,c.y=r,n=u,r=d,0===o?h--:h++)}return s.x=n,s.y=r,s}},8628:(t,e,i)=>{var o=i(33680);t.exports=function(t){return o(t)}},21837:(t,e,i)=>{var a=i(7602);t.exports=function(t,e,i,o,s){void 0===s&&(s=!1);var n,r=Math.abs(o-i)/t.length;if(s)for(n=0;n<t.length;n++)t[n][e]+=a(n*r,i,o);else for(n=0;n<t.length;n++)t[n][e]=a(n*r,i,o);return t}},21910:(t,e,i)=>{var a=i(54261);t.exports=function(t,e,i,o,s){void 0===s&&(s=!1);var n,r=Math.abs(o-i)/t.length;if(s)for(n=0;n<t.length;n++)t[n][e]+=a(n*r,i,o);else for(n=0;n<t.length;n++)t[n][e]=a(n*r,i,o);return t}},62054:t=>{t.exports=function(t,e,i,o,s){if(void 0===s&&(s=!1),0!==t.length)if(1===t.length)s?t[0][e]+=(o+i)/2:t[0][e]=(o+i)/2;else{var n,r=Math.abs(o-i)/(t.length-1);if(s)for(n=0;n<t.length;n++)t[n][e]+=n*r+i;else for(n=0;n<t.length;n++)t[n][e]=n*r+i}return t}},79815:t=>{t.exports=function(t){for(var e=0;e<t.length;e++)t[e].visible=!t[e].visible;return t}},39665:(t,e,i)=>{var n=i(15994);t.exports=function(t,e,i){void 0===i&&(i=0);for(var o=0;o<t.length;o++){var s=t[o];s.x=n(s.x,e.left-i,e.right+i),s.y=n(s.y,e.top-i,e.bottom+i)}return t}},61061:(t,e,i)=>{t.exports={AlignTo:i(11517),Angle:i(80318),Call:i(60757),GetFirst:i(69927),GetLast:i(32265),GridAlign:i(94420),IncAlpha:i(41721),IncX:i(67285),IncXY:i(9074),IncY:i(75222),PlaceOnCircle:i(22983),PlaceOnEllipse:i(95253),PlaceOnLine:i(88505),PlaceOnRectangle:i(41346),PlaceOnTriangle:i(11575),PlayAnimation:i(29953),PropertyValueInc:i(66979),PropertyValueSet:i(43967),RandomCircle:i(88926),RandomEllipse:i(33286),RandomLine:i(96e3),RandomRectangle:i(28789),RandomTriangle:i(97154),Rotate:i(20510),RotateAround:i(91051),RotateAroundDistance:i(76332),ScaleX:i(61619),ScaleXY:i(94868),ScaleY:i(95532),SetAlpha:i(8689),SetBlendMode:i(2645),SetDepth:i(32372),SetHitArea:i(85373),SetOrigin:i(81583),SetRotation:i(79939),SetScale:i(2699),SetScaleX:i(98739),SetScaleY:i(98476),SetScrollFactor:i(6207),SetScrollFactorX:i(6607),SetScrollFactorY:i(72248),SetTint:i(14036),SetVisible:i(50159),SetX:i(77597),SetXY:i(83194),SetY:i(67678),ShiftPosition:i(35850),Shuffle:i(8628),SmootherStep:i(21910),SmoothStep:i(21837),Spread:i(62054),ToggleVisible:i(79815),WrapInRectangle:i(39665)}},42099:(t,e,i)=>{var o=i(45319),s=i(83419),n=i(74943),r=i(81957),y=i(41138),m=i(35154),x=i(90126),i=new s({initialize:function(t,e,i){this.manager=t,this.key=e,this.type="frame",this.frames=this.getFrames(t.textureManager,m(i,"frames",[]),m(i,"defaultTextureKey",null),m(i,"sortFrames",!0)),this.frameRate=m(i,"frameRate",null),this.duration=m(i,"duration",null),this.msPerFrame,this.skipMissedFrames=m(i,"skipMissedFrames",!0),this.delay=m(i,"delay",0),this.repeat=m(i,"repeat",0),this.repeatDelay=m(i,"repeatDelay",0),this.yoyo=m(i,"yoyo",!1),this.showBeforeDelay=m(i,"showBeforeDelay",!1),this.showOnStart=m(i,"showOnStart",!1),this.hideOnComplete=m(i,"hideOnComplete",!1),this.randomFrame=m(i,"randomFrame",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(n.PAUSE_ALL,this.pause,this),this.manager.on(n.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(t,e,i,o){null===i&&null===o?(t.frameRate=24,t.duration=24/e*1e3):i&&null===o?(t.duration=i,t.frameRate=e/(i/1e3)):(t.frameRate=o,t.duration=e/o*1e3),t.msPerFrame=1e3/t.frameRate},addFrame:function(t){return this.addFrameAt(this.frames.length,t)},addFrameAt:function(t,e){var i,e=this.getFrames(this.manager.textureManager,e);return 0<e.length&&(0===t?this.frames=e.concat(this.frames):t===this.frames.length?this.frames=this.frames.concat(e):(i=this.frames.slice(0,t),t=this.frames.slice(t),this.frames=i.concat(e,t)),this.updateFrameSequence()),this},checkFrame:function(t){return 0<=t&&t<this.frames.length},getFirstTick:function(t){t.accumulator=0,t.nextTick=t.currentFrame.duration||t.msPerFrame},getFrameAt:function(t){return this.frames[t]},getFrames:function(t,e,i,o){void 0===o&&(o=!0);var s,n,r,a=[],h=1;if("string"==typeof e){if(r=e,!t.exists(r))return a;var l=t.get(r).getFrameNames();o&&x(l),e=[],l.forEach(function(t){e.push({key:r,frame:t})})}if(Array.isArray(e)&&0!==e.length){for(b=0;b<e.length;b++){var c,u,d=e[b],p=m(d,"key",i);p&&(c=m(d,"frame",0),u=t.getFrame(p,c))&&((n=new y(p,c,h,u)).duration=m(d,"duration",0),n.isFirst=!s,s&&((s.nextFrame=n).prevFrame=s),a.push(n),s=n,h++)}if(0<a.length){n.isLast=!0,n.nextFrame=a[0],a[0].prevFrame=n;for(var f=1/(a.length-1),b=0;b<a.length;b++)a[b].progress=b*f}}return a},getNextTick:function(t){t.accumulator-=t.nextTick,t.nextTick=t.currentFrame.duration||t.msPerFrame},getFrameByProgress:function(t){return t=o(t,0,1),r(t,this.frames,"progress")},nextFrame:function(t){var e=t.currentFrame;e.isLast?t.yoyo?this.handleYoyoFrame(t,!1):0<t.repeatCounter?t.inReverse&&t.forward?t.forward=!1:this.repeatAnimation(t):t.complete():this.updateAndGetNextTick(t,e.nextFrame)},handleYoyoFrame:function(t,e){t.inReverse===!(e=e||!1)&&0<t.repeatCounter?(0!==t.repeatDelay&&!t.pendingRepeat||(t.forward=e),this.repeatAnimation(t)):t.inReverse===e||0!==t.repeatCounter?(e=(t.forward=e)?t.currentFrame.nextFrame:t.currentFrame.prevFrame,this.updateAndGetNextTick(t,e)):t.complete()},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(t){var e=t.currentFrame;e.isFirst?t.yoyo?this.handleYoyoFrame(t,!0):0<t.repeatCounter?(t.inReverse&&!t.forward||(t.forward=!0),this.repeatAnimation(t)):t.complete():this.updateAndGetNextTick(t,e.prevFrame)},updateAndGetNextTick:function(t,e){t.setCurrentFrame(e),this.getNextTick(t)},removeFrame:function(t){t=this.frames.indexOf(t);return-1!==t&&this.removeFrameAt(t),this},removeFrameAt:function(t){return this.frames.splice(t,1),this.updateFrameSequence(),this},repeatAnimation:function(t){if(2===t._pendingStop){if(0===t._pendingStopValue)return t.stop();t._pendingStopValue--}0<t.repeatDelay&&!t.pendingRepeat?(t.pendingRepeat=!0,t.accumulator-=t.nextTick,t.nextTick+=t.repeatDelay):(t.repeatCounter--,t.forward?t.setCurrentFrame(t.currentFrame.nextFrame):t.setCurrentFrame(t.currentFrame.prevFrame),t.isPlaying&&(this.getNextTick(t),t.handleRepeat()))},toJSON:function(){var e={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,randomFrame:this.randomFrame,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(t){e.frames.push(t.toJSON())}),e},updateFrameSequence:function(){for(var t,e=this.frames.length,i=1/(e-1),o=0;o<e;o++)(t=this.frames[o]).index=o+1,t.isFirst=!1,t.isLast=!1,t.progress=o*i,0===o?(t.isFirst=!0,1===e?(t.isLast=!0,(t.nextFrame=t).prevFrame=t):(t.isLast=!1,t.prevFrame=this.frames[e-1],t.nextFrame=this.frames[o+1])):o===e-1&&1<e?(t.isLast=!0,t.prevFrame=this.frames[e-2],t.nextFrame=this.frames[0]):1<e&&(t.prevFrame=this.frames[o-1],t.nextFrame=this.frames[o+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(n.PAUSE_ALL,this.pause,this),this.manager.off(n.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var t=0;t<this.frames.length;t++)this.frames[t].destroy();this.frames=[],this.manager=null}});t.exports=i},41138:(t,e,i)=>{i=new(i(83419))({initialize:function(t,e,i,o,s){void 0===s&&(s=!1),this.textureKey=t,this.textureFrame=e,this.index=i,this.frame=o,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=s},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});t.exports=i},60848:(t,e,i)=>{var o=i(42099),s=i(83419),n=i(90330),r=i(50792),a=i(74943),h=i(8443),y=i(95540),m=i(35154),x=i(36383),d=i(20283),p=i(41836),i=new s({Extends:r,initialize:function(t){r.call(this),this.game=t,this.textureManager=null,this.globalTimeScale=1,this.anims=new n,this.mixes=new n,this.paused=!1,this.name="AnimationManager",t.events.once(h.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(h.DESTROY,this.destroy,this)},addMix:function(t,e,i){var o=this.anims,s=this.mixes,t="string"==typeof t?t:t.key,e="string"==typeof e?e:e.key;return o.has(t)&&o.has(e)&&((o=(o=s.get(t))||{})[e]=i,s.set(t,o)),this},removeMix:function(t,e){var i=this.mixes,t="string"==typeof t?t:t.key,o=i.get(t);return o&&(e?(e="string"==typeof e?e:e.key,o.hasOwnProperty(e)&&delete o[e]):i.delete(t)),this},getMix:function(t,e){var i=this.mixes,t="string"==typeof t?t:t.key,e="string"==typeof e?e:e.key,i=i.get(t);return i&&i.hasOwnProperty(e)?i[e]:0},add:function(t,e){return this.anims.has(t)||(e.key=t,this.anims.set(t,e),this.emit(a.ADD_ANIMATION,t,e)),this},exists:function(t){return this.anims.has(t)},createFromAseprite:function(c,u,d){var p,t,f,b=[],e=this.game.cache.json.get(c);return e&&(p=this,t=m(e,"meta",null),f=m(e,"frames",null),t)&&f&&m(t,"frameTags",[]).forEach(function(t){var e=[],i=y(t,"name",null),o=y(t,"from",0),s=y(t,"to",0),t=y(t,"direction","forward");if(i&&(!u||-1<u.indexOf(i))){for(var n=0,r=o;r<=s;r++){var a=r.toString(),h=f[a];h&&(h=y(h,"duration",x.MAX_SAFE_INTEGER),e.push({key:c,frame:a,duration:h}),n+=h)}var l,o={key:i,frames:e="reverse"===t?e.reverse():e,duration:n,yoyo:"pingpong"===t};d?d.anims&&(l=d.anims.create(o)):l=p.create(o),l&&b.push(l)}}),b},create:function(t){var e=t.key,i=!1;return e&&!(i=this.get(e))&&(i=new o(this,e,t),this.anims.set(e,i),this.emit(a.ADD_ANIMATION,e,i)),i},fromJSON:function(t,e){(e=void 0===e?!1:e)&&this.anims.clear();var i=[];if((t="string"==typeof t?JSON.parse(t):t).hasOwnProperty("anims")&&Array.isArray(t.anims)){for(var o=0;o<t.anims.length;o++)i.push(this.create(t.anims[o]));t.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=t.globalTimeScale)}else t.hasOwnProperty("key")&&"frame"===t.type&&i.push(this.create(t));return i},generateFrameNames:function(t,e){var i=m(e,"prefix",""),o=m(e,"start",0),s=m(e,"end",0),n=m(e,"suffix",""),r=m(e,"zeroPad",0),a=m(e,"outputArray",[]),h=m(e,"frames",!1);if(this.textureManager.exists(t)){var l,c=this.textureManager.get(t);if(c)if(e)for(h=h||d(o,s),l=0;l<h.length;l++){var u=i+p(h[l],r,"0",1)+n;c.has(u)&&a.push({key:t,frame:u})}else for(h=c.getFrameNames(),l=0;l<h.length;l++)a.push({key:t,frame:h[l]})}return a},generateFrameNumbers:function(t,e){var i=m(e,"start",0),o=m(e,"end",-1),s=m(e,"first",!1),n=m(e,"outputArray",[]),r=m(e,"frames",!1);if(this.textureManager.exists(t)){var a=this.textureManager.get(t);if(a){s&&a.has(s)&&n.push({key:t,frame:s}),r||(-1===o&&(o=a.frameTotal-2),r=d(i,o));for(var h=0;h<r.length;h++){var l=r[h];a.has(l)&&n.push({key:t,frame:l})}}}return n},get:function(t){return this.anims.get(t)},getAnimsFromTexture:function(t){for(var e=this.textureManager.get(t).key,i=this.anims.getArray(),o=[],s=0;s<i.length;s++)for(var n=i[s],r=n.frames,a=0;a<r.length;a++)if(r[a].textureKey===e){o.push(n.key);break}return o},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(a.PAUSE_ALL)),this},play:function(t,e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++)e[i].anims.play(t);return this},staggerPlay:function(t,e,i,o){void 0===i&&(i=0),void 0===o&&(o=!0);var s=(e=Array.isArray(e)?e:[e]).length;o||s--;for(var n=0;n<e.length;n++){var r=i<0?Math.abs(i)*(s-n):i*n;e[n].anims.playAfterDelay(t,r)}return this},remove:function(t){var e=this.get(t);return e&&(this.emit(a.REMOVE_ANIMATION,t,e),this.anims.delete(t),this.removeMix(t)),e},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(a.RESUME_ALL)),this},toJSON:function(t){var i={anims:[],globalTimeScale:this.globalTimeScale};return void 0!==t&&""!==t?i.anims.push(this.anims.get(t).toJSON()):this.anims.each(function(t,e){i.anims.push(e.toJSON())}),i},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});t.exports=i},9674:(t,e,i)=>{var o=i(42099),n=i(30976),s=i(83419),r=i(90330),a=i(74943),h=i(95540),i=new s({initialize:function(t){this.parent=t,this.animationManager=t.scene.sys.anims,this.animationManager.on(a.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.randomFrame=!1,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(t){var e=this.parent;if(void 0===t)return this.nextAnimsQueue.length=0,this.nextAnim=null,e;Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var o=t[i];this.nextAnim?this.nextAnimsQueue.push(o):this.nextAnim=o}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(t){this.isPlaying&&this.stop();var e,i,o=this.animationManager,s="string"==typeof t?t:h(t,"key",null),o=(this.exists(s)?this:o).get(s);return o&&(s=(this.currentAnim=o).getTotalFrames(),i=h(t,"frameRate",o.frameRate),e=h(t,"duration",o.duration),o.calculateDuration(this,s,e,i),this.delay=h(t,"delay",o.delay),this.repeat=h(t,"repeat",o.repeat),this.repeatDelay=h(t,"repeatDelay",o.repeatDelay),this.yoyo=h(t,"yoyo",o.yoyo),this.showBeforeDelay=h(t,"showBeforeDelay",o.showBeforeDelay),this.showOnStart=h(t,"showOnStart",o.showOnStart),this.hideOnComplete=h(t,"hideOnComplete",o.hideOnComplete),this.skipMissedFrames=h(t,"skipMissedFrames",o.skipMissedFrames),this.randomFrame=h(t,"randomFrame",o.randomFrame),this.timeScale=h(t,"timeScale",this.timeScale),s<(e=h(t,"startFrame",0))&&(e=0),this.randomFrame&&(e=n(0,s-1)),i=o.frames[e],0!==e||this.forward||(i=o.getLastFrame()),this.currentFrame=i),this.parent},pause:function(t){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),void 0!==t&&this.setCurrentFrame(t),this.parent},resume:function(t){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),void 0!==t&&this.setCurrentFrame(t),this.parent},playAfterDelay:function(t,e){var i,o;return this.isPlaying?(i=this.nextAnim,o=this.nextAnimsQueue,i&&o.unshift(i),this.nextAnim=t,this._pendingStop=1,this._pendingStopValue=e):(this.delayCounter=e,this.play(t,!0)),this.parent},playAfterRepeat:function(t,e){var i,o;return void 0===e&&(e=1),this.isPlaying?(i=this.nextAnim,o=this.nextAnimsQueue,i&&o.unshift(i),-1!==this.repeatCounter&&e>this.repeatCounter&&(e=this.repeatCounter),this.nextAnim=t,this._pendingStop=2,this._pendingStopValue=e):this.play(t),this.parent},play:function(t,e){var i=this.currentAnim,o=this.parent,s="string"==typeof t?t:t.key;if((e=void 0===e?!1:e)&&this.isPlaying&&i.key===s)return o;if(i&&this.isPlaying){e=this.animationManager.getMix(i.key,t);if(0<e)return this.playAfterDelay(t,e)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(t)},playReverse:function(t,e){var i="string"==typeof t?t:t.key;return(e=void 0===e?!1:e)&&this.isPlaying&&this.currentAnim.key===i?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(t))},startAnimation:function(t){this.load(t);var t=this.currentAnim,e=this.parent;return t&&(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat,t.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,0===this.delayCounter?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),e},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(a.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(a.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(a.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(a.ANIMATION_COMPLETE,a.ANIMATION_COMPLETE_KEY)},emitEvents:function(t,e){var i,o,s,n=this.currentAnim;n&&(i=this.currentFrame,o=this.parent,s=i.textureFrame,o.emit(t,n,i,o,s),e)&&o.emit(e+n.key,n,i,o,s)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var t=this.currentFrame;return t?(t=t.progress,this.inReverse&&(t*=-1),t):0},setProgress:function(t){return this.forward||(t=1-t),this.setCurrentFrame(this.currentAnim.getFrameByProgress(t)),this.parent},setRepeat:function(t){return this.repeatCounter=-1===t?Number.MAX_VALUE:t,this.parent},globalRemove:function(t,e){void 0===e&&(e=this.currentAnim),this.isPlaying&&e.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var i=this.currentAnim,o=this.parent;return i?(e&&(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat),i.getFirstTick(this),this.emitEvents(a.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!t,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(i.frames[0]),this.parent):o},complete:function(){var t;return this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim&&(t=this.nextAnim,this.nextAnim=0<this.nextAnimsQueue.length?this.nextAnimsQueue.shift():null,this.play(t)),this.parent},stop:function(){var t;return this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim&&(t=this.nextAnim,this.nextAnim=this.nextAnimsQueue.shift(),this.play(t)),this.parent},stopAfterDelay:function(t){return this._pendingStop=1,this._pendingStopValue=t,this.parent},stopAfterRepeat:function(t){return void 0===t&&(t=1),-1!==this.repeatCounter&&t>this.repeatCounter&&(t=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=t,this.parent},stopOnFrame:function(t){return this._pendingStop=3,this._pendingStopValue=t,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(t,e){var i=this.currentAnim;if(this.isPlaying&&i&&!i.paused){if(this.accumulator+=e*this.timeScale*this.animationManager.globalTimeScale,1===this._pendingStop&&(this._pendingStopValue-=e,this._pendingStopValue<=0))return this.stop();if(this.hasStarted){if(this.accumulator>=this.nextTick&&(this.forward?i.nextFrame(this):i.previousFrame(this),this.isPlaying)&&0===this._pendingStop&&this.skipMissedFrames&&this.accumulator>this.nextTick)for(var o=0;this.forward?i.nextFrame(this):i.previousFrame(this),o++,this.isPlaying&&this.accumulator>this.nextTick&&o<60;);}else this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart())}},setCurrentFrame:function(t){var e=this.parent;return this.currentFrame=t,e.texture=t.frame.texture,e.frame=t.frame,e.isCropped&&e.frame.updateCropUVs(e._crop,e.flipX,e.flipY),t.setAlpha&&(e.alpha=t.alpha),e.setSizeToFrame(),e._originComponent&&(t.frame.customPivot?e.setOrigin(t.frame.pivotX,t.frame.pivotY):e.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(a.ANIMATION_UPDATE),3===this._pendingStop)&&this._pendingStopValue===t&&this.stop(),e},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(t){return this.anims?this.anims.get(t):null},exists:function(t){return!!this.anims&&this.anims.has(t)},create:function(t){var e=t.key,i=!1;return e&&!(i=this.get(e))&&(i=new o(this,e,t),this.anims||(this.anims=new r),this.anims.set(e,i)),i},createFromAseprite:function(t,e){return this.animationManager.createFromAseprite(t,e,this.parent)},generateFrameNames:function(t,e){return this.animationManager.generateFrameNames(t,e)},generateFrameNumbers:function(t,e){return this.animationManager.generateFrameNumbers(t,e)},remove:function(t){var e=this.get(t);return e&&(this.currentAnim===e&&this.stop(),this.anims.delete(t)),e},destroy:function(){this.animationManager.off(a.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});t.exports=i},57090:t=>{t.exports="add"},25312:t=>{t.exports="animationcomplete"},89580:t=>{t.exports="animationcomplete-"},52860:t=>{t.exports="animationrepeat"},63850:t=>{t.exports="animationrestart"},99085:t=>{t.exports="animationstart"},28087:t=>{t.exports="animationstop"},1794:t=>{t.exports="animationupdate"},52562:t=>{t.exports="pauseall"},57953:t=>{t.exports="remove"},68339:t=>{t.exports="resumeall"},74943:(t,e,i)=>{t.exports={ADD_ANIMATION:i(57090),ANIMATION_COMPLETE:i(25312),ANIMATION_COMPLETE_KEY:i(89580),ANIMATION_REPEAT:i(52860),ANIMATION_RESTART:i(63850),ANIMATION_START:i(99085),ANIMATION_STOP:i(28087),ANIMATION_UPDATE:i(1794),PAUSE_ALL:i(52562),REMOVE_ANIMATION:i(57953),RESUME_ALL:i(68339)}},60421:(t,e,i)=>{t.exports={Animation:i(42099),AnimationFrame:i(41138),AnimationManager:i(60848),AnimationState:i(9674),Events:i(74943)}},2161:(t,e,i)=>{var o=i(83419),s=i(90330),n=i(50792),r=i(24736),i=new o({initialize:function(){this.entries=new s,this.events=new n},add:function(t,e){return this.entries.set(t,e),this.events.emit(r.ADD,this,t,e),this},has:function(t){return this.entries.has(t)},exists:function(t){return this.entries.has(t)},get:function(t){return this.entries.get(t)},remove:function(t){var e=this.get(t);return e&&(this.entries.delete(t),this.events.emit(r.REMOVE,this,t,e.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});t.exports=i},24047:(t,e,i)=>{var o=i(2161),s=i(83419),n=i(8443),i=new s({initialize:function(t){this.game=t,this.binary=new o,this.bitmapFont=new o,this.json=new o,this.physics=new o,this.shader=new o,this.audio=new o,this.video=new o,this.text=new o,this.html=new o,this.obj=new o,this.tilemap=new o,this.xml=new o,this.custom={},this.game.events.once(n.DESTROY,this.destroy,this)},addCustom:function(t){return this.custom.hasOwnProperty(t)||(this.custom[t]=new o),this.custom[t]},destroy:function(){for(var t,e=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],i=0;i<e.length;i++)this[e[i]].destroy(),this[e[i]]=null;for(t in this.custom)this.custom[t].destroy();this.custom=null,this.game=null}});t.exports=i},51464:t=>{t.exports="add"},59261:t=>{t.exports="remove"},24736:(t,e,i)=>{t.exports={ADD:i(51464),REMOVE:i(59261)}},83388:(t,e,i)=>{t.exports={BaseCache:i(2161),CacheManager:i(24047),Events:i(24736)}},71911:(t,e,i)=>{var o=i(83419),s=i(31401),n=i(39506),r=i(50792),a=i(19715),h=i(87841),l=i(61340),c=i(80333),b=i(26099),i=new o({Extends:r,Mixins:[s.AlphaSingle,s.Visible],initialize:function(t,e,i,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=0),r.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new h,this.dirty=!0,this._x=t,this._y=e,this._width=i,this._height=o,this._bounds=new h,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new l,this.transparent=!0,this.backgroundColor=c("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new b(i/2,o/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0},addToRenderList:function(t){this.renderList.push(t)},setOrigin:function(t,e){return void 0===t&&(t=.5),void 0===e&&(e=t),this.originX=t,this.originY=e,this},getScroll:function(t,e,i){void 0===i&&(i=new b);var o=.5*this.width,s=.5*this.height;return i.x=t-o,i.y=e-s,this.useBounds&&(i.x=this.clampX(i.x),i.y=this.clampY(i.y)),i},centerOnX:function(t){var e=.5*this.width;return this.midPoint.x=t,this.scrollX=t-e,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(t){var e=.5*this.height;return this.midPoint.y=t,this.scrollY=t-e,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(t,e){return this.centerOnX(t),this.centerOnY(e),this},centerToBounds:function(){var t,e,i;return this.useBounds&&(t=this._bounds,e=.5*this.width,i=.5*this.height,this.midPoint.set(t.centerX,t.centerY),this.scrollX=t.centerX-e,this.scrollY=t.centerY-i),this},centerToSize:function(){return this.scrollX=.5*this.width,this.scrollY=.5*this.height,this},cull:function(t){if(this.disableCull)return t;var e=this.matrix.matrix,i=e[0],o=e[1],s=e[2],n=e[3];if(!(i*n-o*s))return t;for(var r=e[4],a=e[5],h=this.scrollX,l=this.scrollY,e=this.width,c=this.height,u=this.y,d=u+c,p=this.x,f=p+e,b=this.culledObjects,y=t.length,m=b.length=0;m<y;++m){var x,g,v,_,w=t[m];(!w.hasOwnProperty("width")||w.parentContainer||(x=w.width,g=w.height,p<((v=w.x-h*w.scrollFactorX-x*w.originX)+x)*i+((_=w.y-l*w.scrollFactorY-g*w.originY)+g)*s+r&&v*i+_*s+r<f&&u<(v+x)*o+(_+g)*n+a&&v*o+_*n+a<d))&&b.push(w)}return b},getWorldPoint:function(t,e,i){void 0===i&&(i=new b);var o,s,n,r,a,h=this.matrix.matrix,l=h[0],c=h[1],u=h[2],d=h[3],p=h[4],h=h[5],f=l*d-c*u;return f?(a=d*(f=1/f),o=-c*f,s=-u*f,n=l*f,u=(u*h-d*p)*f,d=(c*p-l*h)*f,c=Math.cos(this.rotation),p=Math.sin(this.rotation),l=this.zoomX,h=this.zoomY,f=this.scrollX,r=this.scrollY,i.x=(l=t+(f*c-r*p)*l)*a+(a=e+(f*p+r*c)*h)*s+u,i.y=l*o+a*n+d):(i.x=t,i.y=e),i},ignore:function(t){var e=this.id;Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var o=t[i];Array.isArray(o)?this.ignore(o):o.isParent?this.ignore(o.getChildren()):o.cameraFilter|=e}return this},preRender:function(){this.renderList.length=0;var t=this.width,e=this.height,i=.5*t,o=.5*e,s=this.zoomX,n=this.zoomY,r=this.matrix,a=t*this.originX,h=e*this.originY,l=this.scrollX,c=this.scrollY,l=(this.useBounds&&(l=this.clampX(l),c=this.clampY(c)),(this.scrollX=l)+i),i=(this.scrollY=c)+o,c=(this.midPoint.set(l,i),t/s),o=e/n;this.worldView.setTo(l-c/2,i-o/2,c,o),r.applyITRS(this.x+a,this.y+h,this.rotation,s,n),r.translate(-a,-h)},clampX:function(t){var e=this._bounds,i=this.displayWidth,o=e.x+(i-this.width)/2,e=Math.max(o,o+e.width-i);return t<o?t=o:e<t&&(t=e),t},clampY:function(t){var e=this._bounds,i=this.displayHeight,o=e.y+(i-this.height)/2,e=Math.max(o,o+e.height-i);return t<o?t=o:e<t&&(t=e),t},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(t){return this.rotation=n(t=void 0===t?0:t),this},setBackgroundColor:function(t){return this.backgroundColor=c(t=void 0===t?"rgba(0,0,0,0)":t),this.transparent=0===this.backgroundColor.alpha,this},setBounds:function(t,e,i,o,s){return void 0===s&&(s=!1),this._bounds.setTo(t,e,i,o),this.dirty=!0,this.useBounds=!0,s?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(t){void 0===t&&(t=new h);var e=this._bounds;return t.setTo(e.x,e.y,e.width,e.height),t},setName:function(t){return this.name=t=void 0===t?"":t,this},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setRotation:function(t){return this.rotation=t=void 0===t?0:t,this},setRoundPixels:function(t){return this.roundPixels=t,this},setScene:function(t,e){void 0===e&&(e=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=t,this.isSceneCamera=e;e=t.sys;return this.sceneManager=e.game.scene,this.scaleManager=e.scale,this.cameraManager=e.cameras,this.updateSystem(),this},setScroll:function(t,e){return void 0===e&&(e=t),this.scrollX=t,this.scrollY=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},setViewport:function(t,e,i,o){return this.x=t,this.y=e,this.width=i,this.height=o,this},setZoom:function(t,e){return void 0===t&&(t=1),0===(e=void 0===e?t:e)&&(e=.001),this.zoomX=t=0===t?.001:t,this.zoomY=e,this},setMask:function(t,e){return void 0===e&&(e=!0),this.mask=t,this._maskCamera=e?this.cameraManager.default:this,this},clearMask:function(t){return(t=void 0===t?!1:t)&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var t={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(t.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),t},update:function(){},setIsSceneCamera:function(t){return this.isSceneCamera=t,this},updateSystem:function(){var t,e;this.scaleManager&&this.isSceneCamera&&(t=0!==this._x||0!==this._y||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,e=this.sceneManager,t&&!this._customViewport?e.customViewports++:!t&&this._customViewport&&e.customViewports--,this.dirty=!0,this._customViewport=t)},destroy:function(){this.emit(a.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(t){this._x=t,this.updateSystem()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.updateSystem()}},width:{get:function(){return this._width},set:function(t){this._width=t,this.updateSystem()}},height:{get:function(){return this._height},set:function(t){this._height=t,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(t){t!==this._scrollX&&(this._scrollX=t,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(t){t!==this._scrollY&&(this._scrollY=t,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(t){this._zoomX=t,this._zoomY=t,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(t){this._zoomX=t,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(t){this._zoomY=t,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=t,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});t.exports=i},38058:(t,e,i)=>{var s=i(71911),y=i(67502),r=i(45319),o=i(83419),n=i(31401),a=i(20052),m=i(19715),x=i(28915),h=i(87841),l=i(26099),i=new o({Extends:s,Mixins:[n.PostPipeline],initialize:function(t,e,i,o){s.call(this,t,e,i,o),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new a.Fade(this),this.flashEffect=new a.Flash(this),this.shakeEffect=new a.Shake(this),this.panEffect=new a.Pan(this),this.rotateToEffect=new a.RotateTo(this),this.zoomEffect=new a.Zoom(this),this.lerp=new l(1,1),this.followOffset=new l,this.deadzone=null,this._follow=null},setDeadzone:function(t,e){var i,o;return void 0===t?this.deadzone=null:(this.deadzone?(this.deadzone.width=t,this.deadzone.height=e):this.deadzone=new h(0,0,t,e),this._follow&&(t=this.width/2,e=this.height/2,i=this._follow.x-this.followOffset.x,o=this._follow.y-this.followOffset.y,this.midPoint.set(i,o),this.scrollX=i-t,this.scrollY=o-e),y(this.deadzone,this.midPoint.x,this.midPoint.y)),this},fadeIn:function(t,e,i,o,s,n){return this.fadeEffect.start(!1,t,e,i,o,!0,s,n)},fadeOut:function(t,e,i,o,s,n){return this.fadeEffect.start(!0,t,e,i,o,!0,s,n)},fadeFrom:function(t,e,i,o,s,n,r){return this.fadeEffect.start(!1,t,e,i,o,s,n,r)},fade:function(t,e,i,o,s,n,r){return this.fadeEffect.start(!0,t,e,i,o,s,n,r)},flash:function(t,e,i,o,s,n,r){return this.flashEffect.start(t,e,i,o,s,n,r)},shake:function(t,e,i,o,s){return this.shakeEffect.start(t,e,i,o,s)},pan:function(t,e,i,o,s,n,r){return this.panEffect.start(t,e,i,o,s,n,r)},rotateTo:function(t,e,i,o,s,n,r){return this.rotateToEffect.start(t,e,i,o,s,n,r)},zoomTo:function(t,e,i,o,s,n){return this.zoomEffect.start(t,e,i,o,s,n)},preRender:function(){this.renderList.length=0;var t=this.width,e=this.height,i=.5*t,o=.5*e,s=this.zoom,n=this.matrix,r=t*this.originX,a=e*this.originY,h=this._follow,l=this.deadzone,c=this.scrollX,u=this.scrollY,d=(l&&y(l,this.midPoint.x,this.midPoint.y),!1),l=(h&&!this.panEffect.isRunning&&(b=this.lerp,p=h.x-this.followOffset.x,f=h.y-this.followOffset.y,l?(p<l.x?c=x(c,c-(l.x-p),b.x):p>l.right&&(c=x(c,c+(p-l.right),b.x)),f<l.y?u=x(u,u-(l.y-f),b.y):f>l.bottom&&(u=x(u,u+(f-l.bottom),b.y))):(c=x(c,p-r,b.x),u=x(u,f-a,b.y)),d=!0),this.useBounds&&(c=this.clampX(c),u=this.clampY(u)),(this.scrollX=c)+i),p=(this.scrollY=u)+o,f=(this.midPoint.set(l,p),t/s),b=e/s,c=Math.floor(l-f/2),i=Math.floor(p-b/2);this.worldView.setTo(c,i,f,b),n.applyITRS(Math.floor(this.x+r),Math.floor(this.y+a),this.rotation,s,s),n.translate(-r,-a),this.shakeEffect.preRender(),d&&this.emit(m.FOLLOW_UPDATE,this,h)},setLerp:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),this.lerp.set(t,e),this},setFollowOffset:function(t,e){return this.followOffset.set(t=void 0===t?0:t,e=void 0===e?0:e),this},startFollow:function(t,e,i,o,s,n){void 0===e&&(e=!1),void 0===i&&(i=1),void 0===o&&(o=i),void 0===s&&(s=0),void 0===n&&(n=s),this._follow=t,this.roundPixels=e,i=r(i,0,1),o=r(o,0,1),this.lerp.set(i,o),this.followOffset.set(s,n);e=this.width/2,i=this.height/2,o=t.x-s,s=t.y-n;return this.midPoint.set(o,s),this.scrollX=o-e,this.scrollY=s-i,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(t,e){this.visible&&(this.rotateToEffect.update(t,e),this.panEffect.update(t,e),this.zoomEffect.update(t,e),this.shakeEffect.update(t,e),this.flashEffect.update(t,e),this.fadeEffect.update(t,e))},destroy:function(){this.resetFX(),s.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});t.exports=i},32743:(t,e,i)=>{var r=i(38058),o=i(83419),l=i(95540),s=i(37277),a=i(37303),n=i(97480),h=i(44594),i=new o({initialize:function(t){this.scene=t,this.systems=t.sys,this.roundPixels=t.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,t.sys.events.once(h.BOOT,this.boot,this),t.sys.events.on(h.START,this.start,this)},boot:function(){var t=this.systems;t.settings.cameras?this.fromJSON(t.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new r(0,0,t.scale.width,t.scale.height).setScene(this.scene),t.game.scale.on(n.RESIZE,this.onResize,this),this.systems.events.once(h.DESTROY,this.destroy,this)},start:function(){this.main||((t=this.systems).settings.cameras?this.fromJSON(t.settings.cameras):this.add(),this.main=this.cameras[0]);var t=this.systems.events;t.on(h.UPDATE,this.update,this),t.once(h.SHUTDOWN,this.shutdown,this)},add:function(t,e,i,o,s,n){void 0===i&&(i=this.scene.sys.scale.width),void 0===o&&(o=this.scene.sys.scale.height),void 0===s&&(s=!1),void 0===n&&(n="");t=new r(t=void 0===t?0:t,e=void 0===e?0:e,i,o);return t.setName(n),t.setScene(this.scene),t.setRoundPixels(this.roundPixels),t.id=this.getNextID(),this.cameras.push(t),s&&(this.main=t),t},addExisting:function(t,e){return void 0===e&&(e=!1),-1===this.cameras.indexOf(t)?(t.id=this.getNextID(),t.setRoundPixels(this.roundPixels),this.cameras.push(t),e&&(this.main=t),t):null},getNextID:function(){for(var t=this.cameras,e=1,i=0;i<32;i++){for(var o=!1,s=0;s<t.length;s++){var n=t[s];n&&n.id===e&&(o=!0)}if(!o)return e;e<<=1}return 0},getTotal:function(t){void 0===t&&(t=!1);for(var e=0,i=this.cameras,o=0;o<i.length;o++){var s=i[o];t&&!s.visible||e++}return e},fromJSON:function(t){Array.isArray(t)||(t=[t]);for(var e=this.scene.sys.scale.width,i=this.scene.sys.scale.height,o=0;o<t.length;o++){var s=t[o],n=l(s,"x",0),r=l(s,"y",0),a=l(s,"width",e),h=l(s,"height",i),n=this.add(n,r,a,h),r=(n.name=l(s,"name",""),n.zoom=l(s,"zoom",1),n.rotation=l(s,"rotation",0),n.scrollX=l(s,"scrollX",0),n.scrollY=l(s,"scrollY",0),n.roundPixels=l(s,"roundPixels",!1),n.visible=l(s,"visible",!0),l(s,"backgroundColor",!1)),a=(r&&n.setBackgroundColor(r),l(s,"bounds",null));a&&(h=l(a,"x",0),r=l(a,"y",0),s=l(a,"width",e),a=l(a,"height",i),n.setBounds(h,r,s,a))}return this},getCamera:function(t){for(var e=this.cameras,i=0;i<e.length;i++)if(e[i].name===t)return e[i];return null},getCamerasBelowPointer:function(t){for(var e=this.cameras,i=t.x,o=t.y,s=[],n=0;n<e.length;n++){var r=e[n];r.visible&&r.inputEnabled&&a(r,i,o)&&s.unshift(r)}return s},remove:function(t,e){void 0===e&&(e=!0),Array.isArray(t)||(t=[t]);for(var i=0,o=this.cameras,s=0;s<t.length;s++){var n=o.indexOf(t[s]);-1!==n&&(e?o[n].destroy():o[n].renderList=[],o.splice(n,1),i++)}return!this.main&&o[0]&&(this.main=o[0]),i},render:function(t,e){for(var i=this.scene,o=this.cameras,s=0;s<o.length;s++){var n,r=o[s];r.visible&&0<r.alpha&&(r.preRender(),n=this.getVisibleChildren(e.getChildren(),r),t.render(i,n,r))}},getVisibleChildren:function(t,e){return t.filter(function(t){return t.willRender(e)})},resetAll:function(){for(var t=0;t<this.cameras.length;t++)this.cameras[t].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(t,e){for(var i=0;i<this.cameras.length;i++)this.cameras[i].update(t,e)},onResize:function(t,e,i,o,s){for(var n=0;n<this.cameras.length;n++){var r=this.cameras[n];0===r._x&&0===r._y&&r._width===o&&r._height===s&&r.setSize(e.width,e.height)}},resize:function(t,e){for(var i=0;i<this.cameras.length;i++)this.cameras[i].setSize(t,e)},shutdown:function(){this.main=void 0;for(var t=0;t<this.cameras.length;t++)this.cameras[t].destroy();this.cameras=[];var e=this.systems.events;e.off(h.UPDATE,this.update,this),e.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(h.START,this.start,this),this.systems.events.off(h.DESTROY,this.destroy,this),this.systems.game.scale.off(n.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});s.register("CameraManager",i,"cameras"),t.exports=i},5020:(t,e,i)=>{var o=i(45319),s=i(83419),h=i(19715),i=new s({initialize:function(t){this.camera=t,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,i,o,s,n,r,a){return void 0===t&&(t=!0),void 0===e&&(e=1e3),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===r&&(r=null),void 0===a&&(a=this.camera.scene),!(n=void 0===n?!1:n)&&this.isRunning||(this.isRunning=!0,this.isComplete=!1,this.duration=e,this.direction=t,this.progress=0,this.red=i,this.green=o,this.blue=s,this.alpha=t?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=r,this._onUpdateScope=a,n=t?h.FADE_OUT_START:h.FADE_IN_START,this.camera.emit(n,this.camera,this,e,i,o,s)),this.camera},update:function(t,e){this.isRunning&&(this._elapsed+=e,this.progress=o(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(t){var e;return!(!this.isRunning&&!this.isComplete||(e=this.camera,t.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",t.fillRect(e.x,e.y,e.width,e.height),0))},postRenderWebGL:function(t,e){var i,o,s,n;return!(!this.isRunning&&!this.isComplete||(i=this.camera,o=this.red/255,s=this.green/255,n=this.blue/255,t.drawFillRect(i.x,i.y,i.width,i.height,e(n,s,o,1),this.alpha),0))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var t=this.direction?h.FADE_OUT_COMPLETE:h.FADE_IN_COMPLETE;this.camera.emit(t,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=i},10662:(t,e,i)=>{var o=i(45319),s=i(83419),a=i(19715),i=new s({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(t,e,i,o,s,n,r){return void 0===t&&(t=250),void 0===e&&(e=255),void 0===i&&(i=255),void 0===o&&(o=255),void 0===n&&(n=null),void 0===r&&(r=this.camera.scene),!(s=void 0===s?!1:s)&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,this.red=e,this.green=i,this.blue=o,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=n,this._onUpdateScope=r,this.camera.emit(a.FLASH_START,this.camera,this,t,e,i,o)),this.camera},update:function(t,e){this.isRunning&&(this._elapsed+=e,this.progress=o(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(t){var e;return!!this.isRunning&&(e=this.camera,t.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",t.fillRect(e.x,e.y,e.width,e.height),!0)},postRenderWebGL:function(t,e){var i,o,s,n;return!!this.isRunning&&(i=this.camera,o=this.red/255,s=this.green/255,n=this.blue/255,t.drawFillRect(i.x,i.y,i.width,i.height,e(n,s,o,1),this.alpha),!0)},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=i},20359:(t,e,i)=>{var n=i(45319),o=i(83419),h=i(62640),l=i(19715),s=i(26099),i=new o({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=new s,this.current=new s,this.destination=new s,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,i,o,s,n,r){void 0===i&&(i=1e3),void 0===o&&(o=h.Linear),void 0===n&&(n=null),void 0===r&&(r=this.camera.scene);var a=this.camera;return!(s=void 0===s?!1:s)&&this.isRunning||(this.isRunning=!0,this.duration=i,this.progress=0,this.source.set(a.scrollX,a.scrollY),this.destination.set(t,e),a.getScroll(t,e,this.current),"string"==typeof o&&h.hasOwnProperty(o)?this.ease=h[o]:"function"==typeof o&&(this.ease=o),this._elapsed=0,this._onUpdate=n,this._onUpdateScope=r,this.camera.emit(l.PAN_START,this.camera,this,i,t,e)),a},update:function(t,e){var i,o,s;this.isRunning&&(this._elapsed+=e,e=n(this._elapsed/this.duration,0,1),this.progress=e,i=this.camera,this._elapsed<this.duration?(s=this.ease(e),i.getScroll(this.destination.x,this.destination.y,this.current),o=this.source.x+(this.current.x-this.source.x)*s,s=this.source.y+(this.current.y-this.source.y)*s,i.setScroll(o,s),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,i,e,o,s)):(i.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,i,e,i.scrollX,i.scrollY),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(l.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});t.exports=i},34208:(t,e,i)=>{var h=i(45319),o=i(83419),l=i(19715),c=i(62640),i=new o({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(t,e,i,o,s,n,r){void 0===i&&(i=1e3),void 0===o&&(o=c.Linear),void 0===s&&(s=!1),void 0===n&&(n=null),void 0===r&&(r=this.camera.scene),this.shortestPath=e=void 0===e?!1:e;var e=t,t=(t<0?(e=-1*t,this.clockwise=!1):this.clockwise=!0,360*Math.PI/180),a=(e-=Math.floor(e/t)*t,this.camera);return!s&&this.isRunning||(this.isRunning=!0,this.duration=i,this.progress=0,this.source=a.rotation,this.destination=e,"string"==typeof o&&c.hasOwnProperty(o)?this.ease=c[o]:"function"==typeof o&&(this.ease=o),this._elapsed=0,this._onUpdate=n,this._onUpdateScope=r,this.shortestPath&&(o=s=0,(s=this.destination>this.source?Math.abs(this.destination-this.source):Math.abs(this.destination+t)-this.source)<(o=this.source>this.destination?Math.abs(this.source-this.destination):Math.abs(this.source+t)-this.destination)?this.clockwise=!0:o<s&&(this.clockwise=!1)),this.camera.emit(l.ROTATE_START,this.camera,this,i,e)),a},update:function(t,e){var i,o,s,n,r,a;this.isRunning&&(this._elapsed+=e,e=h(this._elapsed/this.duration,0,1),this.progress=e,i=this.camera,this._elapsed<this.duration?(o=this.ease(e),this.current=i.rotation,s=0,n=360*Math.PI/180,a=this.destination,r=this.current,!1===this.clockwise&&(a=this.current,r=this.destination),s=r<=a?Math.abs(a-r):Math.abs(a+n)-r,a=0,a=this.clockwise?i.rotation+s*o:i.rotation-s*o,i.rotation=a,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,i,e,a)):(i.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,i,e,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(l.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});t.exports=i},30330:(t,e,i)=>{var n=i(45319),o=i(83419),r=i(19715),s=i(26099),i=new o({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.intensity=new s,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(t,e,i,o,s){return void 0===t&&(t=100),void 0===e&&(e=.05),void 0===o&&(o=null),void 0===s&&(s=this.camera.scene),!(i=void 0===i?!1:i)&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,"number"==typeof e?this.intensity.set(e):this.intensity.set(e.x,e.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=o,this._onUpdateScope=s,this.camera.emit(r.SHAKE_START,this.camera,this,t,e)),this.camera},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(t,e){var i,o,s;this.isRunning&&(this._elapsed+=e,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?(e=this.intensity,i=this.camera.width,o=this.camera.height,s=this.camera.zoom,this._offsetX=(Math.random()*e.x*i*2-e.x*i)*s,this._offsetY=(Math.random()*e.y*o*2-e.y*o)*s,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))):this.effectComplete())},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});t.exports=i},45641:(t,e,i)=>{var o=i(45319),s=i(83419),a=i(62640),h=i(19715),i=new s({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,i,o,s,n){void 0===e&&(e=1e3),void 0===i&&(i=a.Linear),void 0===s&&(s=null),void 0===n&&(n=this.camera.scene);var r=this.camera;return!(o=void 0===o?!1:o)&&this.isRunning||(this.isRunning=!0,this.duration=e,this.progress=0,this.source=r.zoom,this.destination=t,"string"==typeof i&&a.hasOwnProperty(i)?this.ease=a[i]:"function"==typeof i&&(this.ease=i),this._elapsed=0,this._onUpdate=s,this._onUpdateScope=n,this.camera.emit(h.ZOOM_START,this.camera,this,e,t)),r},update:function(t,e){this.isRunning&&(this._elapsed+=e,this.progress=o(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(h.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=i},20052:(t,e,i)=>{t.exports={Fade:i(5020),Flash:i(10662),Pan:i(20359),Shake:i(30330),RotateTo:i(34208),Zoom:i(45641)}},16438:t=>{t.exports="cameradestroy"},32726:t=>{t.exports="camerafadeincomplete"},87807:t=>{t.exports="camerafadeinstart"},45917:t=>{t.exports="camerafadeoutcomplete"},95666:t=>{t.exports="camerafadeoutstart"},47056:t=>{t.exports="cameraflashcomplete"},91261:t=>{t.exports="cameraflashstart"},45047:t=>{t.exports="followupdate"},81927:t=>{t.exports="camerapancomplete"},74264:t=>{t.exports="camerapanstart"},54419:t=>{t.exports="postrender"},79330:t=>{t.exports="prerender"},93183:t=>{t.exports="camerarotatecomplete"},80112:t=>{t.exports="camerarotatestart"},62252:t=>{t.exports="camerashakecomplete"},86017:t=>{t.exports="camerashakestart"},539:t=>{t.exports="camerazoomcomplete"},51892:t=>{t.exports="camerazoomstart"},19715:(t,e,i)=>{t.exports={DESTROY:i(16438),FADE_IN_COMPLETE:i(32726),FADE_IN_START:i(87807),FADE_OUT_COMPLETE:i(45917),FADE_OUT_START:i(95666),FLASH_COMPLETE:i(47056),FLASH_START:i(91261),FOLLOW_UPDATE:i(45047),PAN_COMPLETE:i(81927),PAN_START:i(74264),POST_RENDER:i(54419),PRE_RENDER:i(79330),ROTATE_COMPLETE:i(93183),ROTATE_START:i(80112),SHAKE_COMPLETE:i(62252),SHAKE_START:i(86017),ZOOM_COMPLETE:i(539),ZOOM_START:i(51892)}},87969:(t,e,i)=>{t.exports={Camera:i(38058),BaseCamera:i(71911),CameraManager:i(32743),Effects:i(20052),Events:i(19715)}},63091:(t,e,i)=>{var o=i(83419),s=i(35154),i=new o({initialize:function(t){this.camera=s(t,"camera",null),this.left=s(t,"left",null),this.right=s(t,"right",null),this.up=s(t,"up",null),this.down=s(t,"down",null),this.zoomIn=s(t,"zoomIn",null),this.zoomOut=s(t,"zoomOut",null),this.zoomSpeed=s(t,"zoomSpeed",.01),this.minZoom=s(t,"minZoom",.001),this.maxZoom=s(t,"maxZoom",1e3),this.speedX=0,this.speedY=0;var e=s(t,"speed",null);"number"==typeof e?(this.speedX=e,this.speedY=e):(this.speedX=s(t,"speed.x",0),this.speedY=s(t,"speed.y",0)),this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(t){return this.camera=t,this},update:function(t){var e;this.active&&(void 0===t&&(t=1),e=this.camera,this.up&&this.up.isDown?e.scrollY-=this.speedY*t|0:this.down&&this.down.isDown&&(e.scrollY+=this.speedY*t|0),this.left&&this.left.isDown?e.scrollX-=this.speedX*t|0:this.right&&this.right.isDown&&(e.scrollX+=this.speedX*t|0),this.zoomIn&&this.zoomIn.isDown?(e.zoom-=this.zoomSpeed,e.zoom<this.minZoom&&(e.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(e.zoom+=this.zoomSpeed,e.zoom>this.maxZoom)&&(e.zoom=this.maxZoom))},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});t.exports=i},58818:(t,e,i)=>{var o=i(83419),s=i(35154),i=new o({initialize:function(t){this.camera=s(t,"camera",null),this.left=s(t,"left",null),this.right=s(t,"right",null),this.up=s(t,"up",null),this.down=s(t,"down",null),this.zoomIn=s(t,"zoomIn",null),this.zoomOut=s(t,"zoomOut",null),this.zoomSpeed=s(t,"zoomSpeed",.01),this.minZoom=s(t,"minZoom",.001),this.maxZoom=s(t,"maxZoom",1e3),this.accelX=0,this.accelY=0;var e=s(t,"acceleration",null),e=("number"==typeof e?(this.accelX=e,this.accelY=e):(this.accelX=s(t,"acceleration.x",0),this.accelY=s(t,"acceleration.y",0)),this.dragX=0,this.dragY=0,s(t,"drag",null)),e=("number"==typeof e?(this.dragX=e,this.dragY=e):(this.dragX=s(t,"drag.x",0),this.dragY=s(t,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0,s(t,"maxSpeed",null));"number"==typeof e?(this.maxSpeedX=e,this.maxSpeedY=e):(this.maxSpeedX=s(t,"maxSpeed.x",0),this.maxSpeedY=s(t,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(t){return this.camera=t,this},update:function(t){var e;this.active&&(void 0===t&&(t=1),e=this.camera,0<this._speedX?(this._speedX-=this.dragX*t,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*t,0<this._speedX)&&(this._speedX=0),0<this._speedY?(this._speedY-=this.dragY*t,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*t,0<this._speedY)&&(this._speedY=0),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY)&&(this._speedY=-this.maxSpeedY),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX)&&(this._speedX=-this.maxSpeedX),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,0!==this._speedX&&(e.scrollX-=this._speedX*t|0),0!==this._speedY&&(e.scrollY-=this._speedY*t|0),0!==this._zoom)&&(e.zoom+=this._zoom,e.zoom<this.minZoom?e.zoom=this.minZoom:e.zoom>this.maxZoom&&(e.zoom=this.maxZoom))},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});t.exports=i},38865:(t,e,i)=>{t.exports={FixedKeyControl:i(63091),SmoothedKeyControl:i(58818)}},26638:(t,e,i)=>{t.exports={Controls:i(38865),Scene2D:i(87969)}},8054:(t,e,i)=>{i={VERSION:"3.80.1",BlendModes:i(10312),ScaleModes:i(29795),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};t.exports=i},69547:(t,e,i)=>{var o=i(83419),s=i(8054),n=i(42363),r=i(82264),a=i(95540),h=i(35154),l=i(41212),c=i(29747),u=i(75508),d=i(36060),p=i(80333),i=new o({initialize:function(t){var e=h(t=void 0===t?{}:t,"scale",null),e=(this.width=h(e,"width",1024,t),this.height=h(e,"height",768,t),this.zoom=h(e,"zoom",1,t),this.parent=h(e,"parent",void 0,t),this.scaleMode=h(e,e?"mode":"scaleMode",0,t),this.expandParent=h(e,"expandParent",!0,t),this.autoRound=h(e,"autoRound",!1,t),this.autoCenter=h(e,"autoCenter",0,t),this.resizeInterval=h(e,"resizeInterval",500,t),this.fullscreenTarget=h(e,"fullscreenTarget",null,t),this.minWidth=h(e,"min.width",0,t),this.maxWidth=h(e,"max.width",0,t),this.minHeight=h(e,"min.height",0,t),this.maxHeight=h(e,"max.height",0,t),this.snapWidth=h(e,"snap.width",0,t),this.snapHeight=h(e,"snap.height",0,t),this.renderType=h(t,"type",s.AUTO),this.canvas=h(t,"canvas",null),this.context=h(t,"context",null),this.canvasStyle=h(t,"canvasStyle",null),this.customEnvironment=h(t,"customEnvironment",!1),this.sceneConfig=h(t,"scene",null),this.seed=h(t,"seed",[(Date.now()*Math.random()).toString()]),u.RND=new u.RandomDataGenerator(this.seed),this.gameTitle=h(t,"title",""),this.gameURL=h(t,"url","https://phaser.io"),this.gameVersion=h(t,"version",""),this.autoFocus=h(t,"autoFocus",!0),this.stableSort=h(t,"stableSort",-1),-1===this.stableSort&&(this.stableSort=r.browser.es2019?1:0),r.features.stableSort=this.stableSort,this.domCreateContainer=h(t,"dom.createContainer",!1),this.domPointerEvents=h(t,"dom.pointerEvents","none"),this.inputKeyboard=h(t,"input.keyboard",!0),this.inputKeyboardEventTarget=h(t,"input.keyboard.target",window),this.inputKeyboardCapture=h(t,"input.keyboard.capture",[]),this.inputMouse=h(t,"input.mouse",!0),this.inputMouseEventTarget=h(t,"input.mouse.target",null),this.inputMousePreventDefaultDown=h(t,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=h(t,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=h(t,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=h(t,"input.mouse.preventDefaultWheel",!0),this.inputTouch=h(t,"input.touch",r.input.touch),this.inputTouchEventTarget=h(t,"input.touch.target",null),this.inputTouchCapture=h(t,"input.touch.capture",!0),this.inputActivePointers=h(t,"input.activePointers",1),this.inputSmoothFactor=h(t,"input.smoothFactor",0),this.inputWindowEvents=h(t,"input.windowEvents",!0),this.inputGamepad=h(t,"input.gamepad",!1),this.inputGamepadEventTarget=h(t,"input.gamepad.target",window),this.disableContextMenu=h(t,"disableContextMenu",!1),this.audio=h(t,"audio",{}),this.hideBanner=!1===h(t,"banner",null),this.hidePhaser=h(t,"banner.hidePhaser",!1),this.bannerTextColor=h(t,"banner.text","#ffffff"),this.bannerBackgroundColor=h(t,"banner.background",["#ff0000","#ffff00","#00ff00","#00ffff","#000000"]),""===this.gameTitle&&this.hidePhaser&&(this.hideBanner=!0),this.fps=h(t,"fps",null),this.disablePreFX=h(t,"disablePreFX",!1),this.disablePostFX=h(t,"disablePostFX",!1),h(t,"render",null)),e=(this.pipeline=h(e,"pipeline",null,t),this.autoMobilePipeline=h(e,"autoMobilePipeline",!0,t),this.defaultPipeline=h(e,"defaultPipeline",d.MULTI_PIPELINE,t),this.antialias=h(e,"antialias",!0,t),this.antialiasGL=h(e,"antialiasGL",!0,t),this.mipmapFilter=h(e,"mipmapFilter","",t),this.desynchronized=h(e,"desynchronized",!1,t),this.roundPixels=h(e,"roundPixels",!0,t),this.pixelArt=h(e,"pixelArt",1!==this.zoom,t),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=h(e,"transparent",!1,t),this.clearBeforeRender=h(e,"clearBeforeRender",!0,t),this.preserveDrawingBuffer=h(e,"preserveDrawingBuffer",!1,t),this.premultipliedAlpha=h(e,"premultipliedAlpha",!0,t),this.failIfMajorPerformanceCaveat=h(e,"failIfMajorPerformanceCaveat",!1,t),this.powerPreference=h(e,"powerPreference","default",t),this.batchSize=h(e,"batchSize",4096,t),this.maxTextures=h(e,"maxTextures",-1,t),this.maxLights=h(e,"maxLights",10,t),h(t,"backgroundColor",0)),e=(this.backgroundColor=p(e),this.transparent&&(this.backgroundColor=p(0),this.backgroundColor.alpha=0),this.preBoot=h(t,"callbacks.preBoot",c),this.postBoot=h(t,"callbacks.postBoot",c),this.physics=h(t,"physics",{}),this.defaultPhysicsSystem=h(this.physics,"default",!1),this.loaderBaseURL=h(t,"loader.baseURL",""),this.loaderPath=h(t,"loader.path",""),this.loaderMaxParallelDownloads=h(t,"loader.maxParallelDownloads",r.os.android?6:32),this.loaderCrossOrigin=h(t,"loader.crossOrigin",void 0),this.loaderResponseType=h(t,"loader.responseType",""),this.loaderAsync=h(t,"loader.async",!0),this.loaderUser=h(t,"loader.user",""),this.loaderPassword=h(t,"loader.password",""),this.loaderTimeout=h(t,"loader.timeout",0),this.loaderWithCredentials=h(t,"loader.withCredentials",!1),this.loaderImageLoadType=h(t,"loader.imageLoadType","XHR"),this.loaderLocalScheme=h(t,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=h(t,"fx.glow.quality",.1),this.glowFXDistance=h(t,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[],h(t,"plugins",null)),i=n.DefaultScene,e=(e&&(Array.isArray(e)?this.defaultPlugins=e:l(e)&&(this.installGlobalPlugins=a(e,"global",[]),this.installScenePlugins=a(e,"scene",[]),Array.isArray(e.default)?i=e.default:Array.isArray(e.defaultMerge)&&(i=i.concat(e.defaultMerge)))),this.defaultPlugins=i,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg");this.defaultImage=h(t,"images.default",e+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=h(t,"images.missing",e+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=h(t,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=s.WEBGL:window.FORCE_CANVAS&&(this.renderType=s.CANVAS))}});t.exports=i},86054:(t,e,s)=>{var n=s(20623),r=s(27919),a=s(8054),h=s(89357);t.exports=function(t){var e=t.config;if((e.customEnvironment||e.canvas)&&e.renderType===a.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!e.customEnvironment&&!e.canvas&&e.renderType!==a.HEADLESS)if(e.renderType===a.AUTO&&(e.renderType=h.webGL?a.WEBGL:a.CANVAS),e.renderType===a.WEBGL){if(!h.webGL)throw new Error("Cannot create WebGL context, aborting.")}else{if(e.renderType!==a.CANVAS)throw new Error("Unknown value for renderer type: "+e.renderType);if(!h.canvas)throw new Error("Cannot create Canvas context, aborting.")}e.antialias||r.disableSmoothing();var i=t.scale.baseSize,o=i.width,i=i.height;e.canvas?(t.canvas=e.canvas,t.canvas.width=o,t.canvas.height=i):t.canvas=r.create(t,o,i,e.renderType),e.canvasStyle&&(t.canvas.style=e.canvasStyle),e.antialias||n.setCrisp(t.canvas),e.renderType!==a.HEADLESS&&(o=s(68627),i=s(74797),e.renderType===a.WEBGL?t.renderer=new i(t):(t.renderer=new o(t),t.context=t.renderer.gameContext))}},96391:(t,e,i)=>{var h=i(8054);t.exports=function(t){var e,i,o,s,n,r,a=t.config;a.hideBanner||(e="WebGL",a.renderType===h.CANVAS?e="Canvas":a.renderType===h.HEADLESS&&(e="Headless"),r=a.audio,r=(i=t.device.audio).webAudio&&!r.disableWebAudio?"Web Audio":r.noAudio||!i.webAudio&&!i.audioData?"No Audio":"HTML5 Audio",t.device.browser.ie?window.console:(n=[s=""],Array.isArray(a.bannerBackgroundColor)?(a.bannerBackgroundColor.forEach(function(t){s=s.concat("%c "),n.push("background: "+t),o=t}),n[n.length-1]="color: "+a.bannerTextColor+"; background: "+o):(s=s.concat("%c "),n.push("color: "+a.bannerTextColor+"; background: "+a.bannerBackgroundColor)),n.push("background: transparent"),a.gameTitle&&(s=s.concat(a.gameTitle),a.gameVersion&&(s=s.concat(" v"+a.gameVersion)),a.hidePhaser||(s=s.concat(" / "))),s=(s=a.hidePhaser?s:s.concat("Phaser v"+h.VERSION+" ("+e+" | "+r+")")).concat(" %c "+a.gameURL),n[0]=s))}},50127:(t,e,i)=>{var o=i(40366),s=i(60848),n=i(24047),r=i(27919),a=i(83419),h=i(69547),l=i(83719),c=i(86054),u=i(45893),d=i(96391),p=i(82264),f=i(57264),b=i(50792),y=i(8443),m=i(7003),x=i(37277),g=i(77332),v=i(76531),_=i(60903),w=i(69442),S=i(17130),A=i(65898),C=i(51085),T=i(14747),i=new a({initialize:function(t){this.config=new h(t),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new b,this.anims=new s(this),this.textures=new S(this),this.cache=new n(this),this.registry=new u(this,new b),this.input=new m(this,this.config),this.scene=new _(this,this.config.sceneConfig),this.device=p,this.scale=new v(this,this.config),this.sound=null,this.sound=T.create(this),this.loop=new A(this,this.config.fps),this.plugins=new g(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,f(this.boot.bind(this))},boot:function(){x.hasCore("EventEmitter")&&(this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),c(this),l(this),d(this),o(this.canvas,this.config.parent),this.textures.once(w.READY,this.texturesReady,this),this.events.emit(y.BOOT))},texturesReady:function(){this.events.emit(y.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),C(this);var t=this.events;t.on(y.HIDDEN,this.onHidden,this),t.on(y.VISIBLE,this.onVisible,this),t.on(y.BLUR,this.onBlur,this),t.on(y.FOCUS,this.onFocus,this)},step:function(t,e){if(this.pendingDestroy)return this.runDestroy();var i,o;this.isPaused||((i=this.events).emit(y.PRE_STEP,t,e),i.emit(y.STEP,t,e),this.scene.update(t,e),i.emit(y.POST_STEP,t,e),(o=this.renderer).preRender(),i.emit(y.PRE_RENDER,o,t,e),this.scene.render(o),o.postRender(),i.emit(y.POST_RENDER,o,t,e))},headlessStep:function(t,e){if(this.pendingDestroy)return this.runDestroy();var i;this.isPaused||((i=this.events).emit(y.PRE_STEP,t,e),i.emit(y.STEP,t,e),this.scene.update(t,e),i.emit(y.POST_STEP,t,e),this.scene.isProcessing=!1,i.emit(y.PRE_RENDER,null,t,e),i.emit(y.POST_RENDER,null,t,e))},onHidden:function(){this.loop.pause(),this.events.emit(y.PAUSE)},pause:function(){var t=this.isPaused;this.isPaused=!0,t||this.events.emit(y.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(y.RESUME)},resume:function(){var t=this.isPaused;this.isPaused=!1,t&&this.events.emit(y.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(t,e){void 0===e&&(e=!1),this.pendingDestroy=!0,this.removeCanvas=t,this.noReturn=e},runDestroy:function(){this.scene.destroy(),this.events.emit(y.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(r.remove(this.canvas),this.canvas.parentNode)&&this.canvas.parentNode.removeChild(this.canvas),this.domContainer&&this.domContainer.parentNode&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});t.exports=i},65898:(t,e,i)=>{var o=i(83419),s=i(35154),n=i(29747),r=i(43092),i=new o({initialize:function(t,e){this.game=t,this.raf=new r,this.started=!1,this.running=!1,this.minFps=s(e,"min",5),this.targetFps=s(e,"target",60),this.fpsLimit=s(e,"limit",0),this.hasFpsLimit=0<this.fpsLimit,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=n,this.forceSetTimeOut=s(e,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=s(e,"deltaHistory",10),this.panicMax=s(e,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=s(e,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var t=window.performance.now();this.time=t,this.lastTime=t,this.nextFpsUpdate=t+1e3;for(var e=this.framesThisSecond=0;e<this.deltaSmoothingMax;e++)this.deltaHistory[e]=Math.min(this._target,this.deltaHistory[e]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(t){if(this.started)return this;this.started=!0,this.running=!0;for(var e=0;e<this.deltaSmoothingMax;e++)this.deltaHistory[e]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=t;t=(this.hasFpsLimit?this.stepLimitFPS:this.step).bind(this);this.raf.start(t,this.forceSetTimeOut,this._target)},smoothDelta:function(t){var e=this.deltaIndex,i=this.deltaHistory,o=this.deltaSmoothingMax;(0<this._coolDown||!this.inFocus)&&(this._coolDown--,t=Math.min(t,this._target)),t>this._min&&(t=i[e],t=Math.min(t,this._min)),i[e]=t,this.deltaIndex++,this.deltaIndex>=o&&(this.deltaIndex=0);for(var s=0,n=0;n<o;n++)s+=i[n];return s/o},updateFPS:function(t){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0},stepLimitFPS:function(t){this.now=t;var e=Math.max(0,t-this.lastTime);this.rawDelta=e,this.time+=this.rawDelta,this.smoothStep&&(e=this.smoothDelta(e)),this.delta+=e,t>=this.nextFpsUpdate&&this.updateFPS(t),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(t,this.delta),this.delta=0),this.lastTime=t,this.frame++},step:function(t){this.now=t;var e=Math.max(0,t-this.lastTime);this.rawDelta=e,this.time+=this.rawDelta,this.smoothStep&&(e=this.smoothDelta(e)),this.delta=e,t>=this.nextFpsUpdate&&this.updateFPS(t),this.framesThisSecond++,this.callback(t,e),this.lastTime=t,this.frame++},tick:function(){var t=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(t):this.step(t)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(t){void 0===t&&(t=!1);var e=window.performance.now();this.running||(t&&(this.startTime+=-this.lastTime+(this.lastTime+e)),t=(this.hasFpsLimit?this.stepLimitFPS:this.step).bind(this),this.raf.start(t,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=e+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});t.exports=i},51085:(t,e,i)=>{var o=i(8443);t.exports=function(t){var e,i=t.events;void 0!==document.hidden?e="visibilitychange":["webkit","moz","ms"].forEach(function(t){void 0!==document[t+"Hidden"]&&(document.hidden=function(){return document[t+"Hidden"]},e=t+"visibilitychange")}),e&&document.addEventListener(e,function(t){document.hidden||"pause"===t.type?i.emit(o.HIDDEN):i.emit(o.VISIBLE)},!1),window.onblur=function(){i.emit(o.BLUR)},window.onfocus=function(){i.emit(o.FOCUS)},window.focus&&t.config.autoFocus&&window.focus()}},97217:t=>{t.exports="blur"},47548:t=>{t.exports="boot"},19814:t=>{t.exports="contextlost"},68446:t=>{t.exports="destroy"},41700:t=>{t.exports="focus"},25432:t=>{t.exports="hidden"},65942:t=>{t.exports="pause"},59211:t=>{t.exports="postrender"},47789:t=>{t.exports="poststep"},39066:t=>{t.exports="prerender"},460:t=>{t.exports="prestep"},16175:t=>{t.exports="ready"},42331:t=>{t.exports="resume"},11966:t=>{t.exports="step"},32969:t=>{t.exports="systemready"},94830:t=>{t.exports="visible"},8443:(t,e,i)=>{t.exports={BLUR:i(97217),BOOT:i(47548),CONTEXT_LOST:i(19814),DESTROY:i(68446),FOCUS:i(41700),HIDDEN:i(25432),PAUSE:i(65942),POST_RENDER:i(59211),POST_STEP:i(47789),PRE_RENDER:i(39066),PRE_STEP:i(460),READY:i(16175),RESUME:i(42331),STEP:i(11966),SYSTEM_READY:i(32969),VISIBLE:i(94830)}},42857:(t,e,i)=>{t.exports={Config:i(69547),CreateRenderer:i(86054),DebugHeader:i(96391),Events:i(8443),TimeStep:i(65898),VisibilityHandler:i(51085)}},99584:(t,e,i)=>{var y=i(5290),m=i(27919),x=i(35154);t.exports=function(t){var e=x(t,"data",[]),i=x(t,"canvas",null),o=x(t,"palette",y),s=x(t,"pixelWidth",1),n=x(t,"pixelHeight",s),r=x(t,"resizeCanvas",!0),a=x(t,"clearCanvas",!0),h=x(t,"preRender",null),t=x(t,"postRender",null),l=Math.floor(Math.abs(e[0].length*s)),c=Math.floor(Math.abs(e.length*n)),u=(i||(i=m.create2D(this,l,c),a=r=!1),r&&(i.width=l,i.height=c),i.getContext("2d",{willReadFrequently:!0}));a&&u.clearRect(0,0,l,c),h&&h(i,u);for(var d=0;d<e.length;d++)for(var p=e[d],f=0;f<p.length;f++){var b=p[f];"."!==b&&" "!==b&&(u.fillStyle=o[b],u.fillRect(f*s,d*n,s,n))}return t&&t(i,u),i}},15822:(t,e,i)=>{t.exports={GenerateTexture:i(99584),Palettes:i(57763)}},5290:t=>{t.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},23816:t=>{t.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},9866:t=>{t.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},77552:t=>{t.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},92259:t=>{t.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},57763:(t,e,i)=>{t.exports={ARNE16:i(5290),C64:i(23816),CGA:i(9866),JMP:i(77552),MSX:i(92259)}},46728:(t,e,i)=>{var o=i(83419),r=i(36316),s=i(80021),a=i(26099),n=new o({Extends:s,initialize:function(t,e,i,o){s.call(this,"CubicBezierCurve"),Array.isArray(t)&&(o=new a(t[6],t[7]),i=new a(t[4],t[5]),e=new a(t[2],t[3]),t=new a(t[0],t[1])),this.p0=t,this.p1=e,this.p2=i,this.p3=o},getStartPoint:function(t){return(t=void 0===t?new a:t).copy(this.p0)},getResolution:function(t){return t},getPoint:function(t,e){void 0===e&&(e=new a);var i=this.p0,o=this.p1,s=this.p2,n=this.p3;return e.set(r(t,i.x,o.x,s.x,n.x),r(t,i.y,o.y,s.y,n.y))},draw:function(t,e){var i=this.getPoints(e=void 0===e?32:e);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var o=1;o<i.length;o++)t.lineTo(i[o].x,i[o].y);return t.strokePath(),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});n.fromJSON=function(t){var t=t.points,e=new a(t[0],t[1]),i=new a(t[2],t[3]),o=new a(t[4],t[5]),t=new a(t[6],t[7]);return new n(e,i,o,t)},t.exports=n},80021:(t,e,i)=>{var o=i(83419),s=i(19217),n=i(87841),r=i(26099),i=new o({initialize:function(t){this.type=t,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new r,this._tmpVec2B=new r},draw:function(t,e){return t.strokePoints(this.getPoints(e=void 0===e?32:e))},getBounds:function(t,e){t=t||new n,void 0===e&&(e=16);var i=this.getLength(),i=(i<e&&(e=i/2),Math.max(1,Math.round(i/e)));return s(this.getSpacedPoints(i),t)},getDistancePoints:function(t){var e=this.getLength(),e=Math.max(1,e/t);return this.getSpacedPoints(e)},getEndPoint:function(t){return void 0===t&&(t=new r),this.getPointAt(1,t)},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,i=[],o=this.getPoint(0,this._tmpVec2A),s=0;i.push(0);for(var n=1;n<=t;n++)s+=(e=this.getPoint(n/t,this._tmpVec2B)).distance(o),i.push(s),o.copy(e);return this.cacheArcLengths=i},getPointAt:function(t,e){t=this.getUtoTmapping(t);return this.getPoint(t,e)},getPoints:function(t,e,i){void 0===i&&(i=[]),t=t||(e?this.getLength()/e:this.defaultDivisions);for(var o=0;o<=t;o++)i.push(this.getPoint(o/t));return i},getRandomPoint:function(t){return void 0===t&&(t=new r),this.getPoint(Math.random(),t)},getSpacedPoints:function(t,e,i){void 0===i&&(i=[]),t=t||(e?this.getLength()/e:this.defaultDivisions);for(var o=0;o<=t;o++){var s=this.getUtoTmapping(o/t,null,t);i.push(this.getPoint(s))}return i},getStartPoint:function(t){return void 0===t&&(t=new r),this.getPointAt(0,t)},getTangent:function(t,e){void 0===e&&(e=new r);var i=t-1e-4,t=t+1e-4;return 1<t&&(t=1),this.getPoint(i=i<0?0:i,this._tmpVec2A),this.getPoint(t,e),e.subtract(this._tmpVec2A).normalize()},getTangentAt:function(t,e){t=this.getUtoTmapping(t);return this.getTangent(t,e)},getTFromDistance:function(t,e){return t<=0?0:this.getUtoTmapping(0,t,e)},getUtoTmapping:function(t,e,i){for(var o,s=this.getLengths(i),n=0,i=s.length,r=e?Math.min(e,s[i-1]):t*s[i-1],a=0,h=i-1;a<=h;)if((o=s[n=Math.floor(a+(h-a)/2)]-r)<0)a=n+1;else{if(!(0<o)){h=n;break}h=n-1}return s[n=h]===r?n/(i-1):(n+(r-(e=s[n]))/(s[n+1]-e))/(i-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});t.exports=i},73825:(t,e,i)=>{var o=i(83419),l=i(80021),c=i(39506),u=i(35154),s=i(43396),d=i(26099),n=new o({Extends:l,initialize:function(t,e,i,o,s,n,r,a){var h;"object"==typeof t?(t=u(h=t,"x",0),e=u(h,"y",0),i=u(h,"xRadius",0),o=u(h,"yRadius",i),s=u(h,"startAngle",0),n=u(h,"endAngle",360),r=u(h,"clockwise",!1),a=u(h,"rotation",0)):(void 0===o&&(o=i),void 0===s&&(s=0),void 0===n&&(n=360),void 0===r&&(r=!1),void 0===a&&(a=0)),l.call(this,"EllipseCurve"),this.p0=new d(t,e),this._xRadius=i,this._yRadius=o,this._startAngle=c(s),this._endAngle=c(n),this._clockwise=r,this._rotation=c(a)},getStartPoint:function(t){return void 0===t&&(t=new d),this.getPoint(0,t)},getResolution:function(t){return 2*t},getPoint:function(t,e){void 0===e&&(e=new d);for(var i=2*Math.PI,o=this._endAngle-this._startAngle,s=Math.abs(o)<Number.EPSILON;o<0;)o+=i;for(;i<o;)o-=i;o<Number.EPSILON&&(o=s?0:i),this._clockwise&&!s&&(o===i?o=-i:o-=i);var n,r,a,h,s=this._startAngle+t*o,t=this.p0.x+this._xRadius*Math.cos(s),s=this.p0.y+this._yRadius*Math.sin(s);return 0!==this._rotation&&(n=Math.cos(this._rotation),r=Math.sin(this._rotation),t=(a=t-this.p0.x)*n-(h=s-this.p0.y)*r+this.p0.x,s=a*r+h*n+this.p0.y),e.set(t,s)},setXRadius:function(t){return this.xRadius=t,this},setYRadius:function(t){return this.yRadius=t,this},setWidth:function(t){return this.xRadius=t/2,this},setHeight:function(t){return this.yRadius=t/2,this},setStartAngle:function(t){return this.startAngle=t,this},setEndAngle:function(t){return this.endAngle=t,this},setClockwise:function(t){return this.clockwise=t,this},setRotation:function(t){return this.rotation=t,this},x:{get:function(){return this.p0.x},set:function(t){this.p0.x=t}},y:{get:function(){return this.p0.y},set:function(t){this.p0.y=t}},xRadius:{get:function(){return this._xRadius},set:function(t){this._xRadius=t}},yRadius:{get:function(){return this._yRadius},set:function(t){this._yRadius=t}},startAngle:{get:function(){return s(this._startAngle)},set:function(t){this._startAngle=c(t)}},endAngle:{get:function(){return s(this._endAngle)},set:function(t){this._endAngle=c(t)}},clockwise:{get:function(){return this._clockwise},set:function(t){this._clockwise=t}},angle:{get:function(){return s(this._rotation)},set:function(t){this._rotation=c(t)}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=t}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:s(this._startAngle),endAngle:s(this._endAngle),clockwise:this._clockwise,rotation:s(this._rotation)}}});n.fromJSON=function(t){return new n(t)},t.exports=n},33951:(t,e,i)=>{var o=i(83419),s=i(80021),n=i(19217),r=i(87841),a=i(26099),h=new o({Extends:s,initialize:function(t,e){s.call(this,"LineCurve"),Array.isArray(t)&&(e=new a(t[2],t[3]),t=new a(t[0],t[1])),this.p0=t,this.p1=e,this.arcLengthDivisions=1},getBounds:function(t){return void 0===t&&(t=new r),n([this.p0,this.p1],t)},getStartPoint:function(t){return(t=void 0===t?new a:t).copy(this.p0)},getResolution:function(t){return t=void 0===t?1:t},getPoint:function(t,e){return void 0===e&&(e=new a),1===t?e.copy(this.p1):(e.copy(this.p1).subtract(this.p0).scale(t).add(this.p0),e)},getPointAt:function(t,e){return this.getPoint(t,e)},getTangent:function(t,e){return(e=void 0===e?new a:e).copy(this.p1).subtract(this.p0).normalize(),e},getUtoTmapping:function(t,e,i){return e?(i=(i=this.getLengths(i))[i.length-1],Math.min(e,i)/i):t},draw:function(t){return t.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});h.fromJSON=function(t){var t=t.points,e=new a(t[0],t[1]),t=new a(t[2],t[3]);return new h(e,t)},t.exports=h},14744:(t,e,i)=>{var o=i(83419),s=i(80021),n=i(32112),r=i(26099),a=new o({Extends:s,initialize:function(t,e,i){s.call(this,"QuadraticBezierCurve"),Array.isArray(t)&&(i=new r(t[4],t[5]),e=new r(t[2],t[3]),t=new r(t[0],t[1])),this.p0=t,this.p1=e,this.p2=i},getStartPoint:function(t){return(t=void 0===t?new r:t).copy(this.p0)},getResolution:function(t){return t},getPoint:function(t,e){void 0===e&&(e=new r);var i=this.p0,o=this.p1,s=this.p2;return e.set(n(t,i.x,o.x,s.x),n(t,i.y,o.y,s.y))},draw:function(t,e){var i=this.getPoints(e=void 0===e?32:e);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var o=1;o<i.length;o++)t.lineTo(i[o].x,i[o].y);return t.strokePath(),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});a.fromJSON=function(t){var t=t.points,e=new r(t[0],t[1]),i=new r(t[2],t[3]),t=new r(t[4],t[5]);return new a(e,i,t)},t.exports=a},42534:(t,e,i)=>{var a=i(87842),o=i(83419),s=i(80021),h=i(26099),n=new o({Extends:s,initialize:function(t){void 0===t&&(t=[]),s.call(this,"SplineCurve"),this.points=[],this.addPoints(t)},addPoints:function(t){for(var e=0;e<t.length;e++){var i=new h;"number"==typeof t[e]?(i.x=t[e],i.y=t[e+1],e++):Array.isArray(t[e])?(i.x=t[e][0],i.y=t[e][1]):(i.x=t[e].x,i.y=t[e].y),this.points.push(i)}return this},addPoint:function(t,e){t=new h(t,e);return this.points.push(t),t},getStartPoint:function(t){return(t=void 0===t?new h:t).copy(this.points[0])},getResolution:function(t){return t*this.points.length},getPoint:function(t,e){void 0===e&&(e=new h);var i=this.points,t=(i.length-1)*t,o=Math.floor(t),t=t-o,s=i[0===o?o:o-1],n=i[o],r=i[o>i.length-2?i.length-1:o+1],i=i[o>i.length-3?i.length-1:o+2];return e.set(a(t,s.x,n.x,r.x,i.x),a(t,s.y,n.y,r.y,i.y))},toJSON:function(){for(var t=[],e=0;e<this.points.length;e++)t.push(this.points[e].x),t.push(this.points[e].y);return{type:this.type,points:t}}});n.fromJSON=function(t){return new n(t.points)},t.exports=n},25410:(t,e,i)=>{t.exports={Path:i(46669),MoveTo:i(68618),CubicBezier:i(46728),Curve:i(80021),Ellipse:i(73825),Line:i(33951),QuadraticBezier:i(14744),Spline:i(42534)}},68618:(t,e,i)=>{var o=i(83419),s=i(26099),i=new o({initialize:function(t,e){this.active=!1,this.p0=new s(t,e)},getPoint:function(t,e){return(e=void 0===e?new s:e).copy(this.p0)},getPointAt:function(t,e){return this.getPoint(t,e)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});t.exports=i},46669:(t,e,i)=>{var o=i(83419),l=i(46728),r=i(73825),s=i(39429),n=i(33951),a=i(68618),h=i(14744),c=i(87841),u=i(42534),d=i(26099),p=i(36383),f=new o({initialize:function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.name="",this.defaultDivisions=12,this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new d,this._tmpVec2A=new d,this._tmpVec2B=new d,"object"==typeof t?this.fromJSON(t):this.startPoint.set(t,e)},add:function(t){return this.curves.push(t),this},circleTo:function(t,e,i){return this.ellipseTo(t,t,0,360,e=void 0===e?!1:e,i)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);return t.equals(e)||this.curves.push(new n(e,t)),this},cubicBezierTo:function(t,e,i,o,s,n){var r,a,h=this.getEndPoint(),i=t instanceof d?(r=t,a=e,i):(r=new d(i,o),a=new d(s,n),new d(t,e));return this.add(new l(h,r,a,i))},quadraticBezierTo:function(t,e,i,o){var s,n=this.getEndPoint(),i=t instanceof d?(s=t,e):(s=new d(i,o),new d(t,e));return this.add(new h(n,s,i))},draw:function(t,e){for(var i=0;i<this.curves.length;i++){var o=this.curves[i];o.active&&o.draw(t,e)}return t},ellipseTo:function(t,e,i,o,s,n){t=new r(0,0,t,e,i,o,s,n),e=this.getEndPoint(this._tmpVec2A),i=t.getStartPoint(this._tmpVec2B);return e.subtract(i),t.x=e.x,t.y=e.y,this.add(t)},fromJSON:function(t){this.curves=[],this.cacheLengths=[],this.startPoint.set(t.x,t.y),this.autoClose=t.autoClose;for(var e=0;e<t.curves.length;e++){var i=t.curves[e];switch(i.type){case"LineCurve":this.add(n.fromJSON(i));break;case"EllipseCurve":this.add(r.fromJSON(i));break;case"SplineCurve":this.add(u.fromJSON(i));break;case"CubicBezierCurve":this.add(l.fromJSON(i));break;case"QuadraticBezierCurve":this.add(h.fromJSON(i))}}return this},getBounds:function(t,e){void 0===e&&(e=16),(t=void 0===t?new c:t).x=Number.MAX_VALUE,t.y=Number.MAX_VALUE;for(var i=new c,o=p.MIN_SAFE_INTEGER,s=p.MIN_SAFE_INTEGER,n=0;n<this.curves.length;n++){var r=this.curves[n];r.active&&(r.getBounds(i,e),t.x=Math.min(t.x,i.x),t.y=Math.min(t.y,i.y),o=Math.max(o,i.right),s=Math.max(s,i.bottom))}return t.right=o,t.bottom=s,t},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,i=0;i<this.curves.length;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t},getCurveAt:function(t){for(var e=t*this.getLength(),i=this.getCurveLengths(),o=0;o<i.length;){if(i[o]>=e)return this.curves[o];o++}return null},getEndPoint:function(t){return void 0===t&&(t=new d),0<this.curves.length?this.curves[this.curves.length-1].getPoint(1,t):t.copy(this.startPoint),t},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},getPoint:function(t,e){void 0===e&&(e=new d);for(var i,o,s,n=t*this.getLength(),r=this.getCurveLengths(),a=0;a<r.length;){if(r[a]>=n)return i=r[a]-n,s=(o=this.curves[a]).getLength(),o.getPointAt(0===s?0:1-i/s,e);a++}return null},getPoints:function(t,e){t||e||(t=this.defaultDivisions);for(var i,o=[],s=0;s<this.curves.length;s++){var n=this.curves[s];if(n.active)for(var r=n.getResolution(t),a=n.getPoints(r,e),h=0;h<a.length;h++){var l=a[h];i&&i.equals(l)||(o.push(l),i=l)}}return this.autoClose&&1<o.length&&!o[o.length-1].equals(o[0])&&o.push(o[0]),o},getRandomPoint:function(t){return void 0===t&&(t=new d),this.getPoint(Math.random(),t)},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e},getStartPoint:function(t){return(t=void 0===t?new d:t).copy(this.startPoint)},getTangent:function(t,e){void 0===e&&(e=new d);for(var i,o,s,n=t*this.getLength(),r=this.getCurveLengths(),a=0;a<r.length;){if(r[a]>=n)return i=r[a]-n,s=(o=this.curves[a]).getLength(),o.getTangentAt(0===s?0:1-i/s,e);a++}return null},lineTo:function(t,e){t instanceof d?this._tmpVec2B.copy(t):"object"==typeof t?this._tmpVec2B.setFromObject(t):this._tmpVec2B.set(t,e);t=this.getEndPoint(this._tmpVec2A);return this.add(new n([t.x,t.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(t){return t.unshift(this.getEndPoint()),this.add(new u(t))},moveTo:function(t,e){return t instanceof d?this.add(new a(t.x,t.y)):this.add(new a(t,e))},toJSON:function(){for(var t=[],e=0;e<this.curves.length;e++)t.push(this.curves[e].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:t}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});s.register("path",function(t,e){return new f(t,e)}),t.exports=f},45893:(t,e,i)=>{var o=i(83419),a=i(24882),i=new o({initialize:function(t,e){this.parent=t,(this.events=e)||(this.events=t.events||t),this.list={},this.values={},this._frozen=!1,!t.hasOwnProperty("sys")&&this.events&&this.events.once(a.DESTROY,this.destroy,this)},get:function(t){var e=this.list;if(Array.isArray(t)){for(var i=[],o=0;o<t.length;o++)i.push(e[t[o]]);return i}return e[t]},getAll:function(){var t,e={};for(t in this.list)this.list.hasOwnProperty(t)&&(e[t]=this.list[t]);return e},query:function(t){var e,i={};for(e in this.list)this.list.hasOwnProperty(e)&&e.match(t)&&(i[e]=this.list[e]);return i},set:function(t,e){if(!this._frozen){if("string"==typeof t)return this.setValue(t,e);for(var i in t)this.setValue(i,t[i])}return this},inc:function(t,e){var i;return this._frozen||(void 0===e&&(e=1),i=this.get(t),this.set(t,(i=void 0===i?0:i)+e)),this},toggle:function(t){return this._frozen||this.set(t,!this.get(t)),this},setValue:function(i,t){var o,s,n,r;return this._frozen||(this.has(i)?this.values[i]=t:(s=(o=this).list,n=this.events,r=this.parent,Object.defineProperty(this.values,i,{enumerable:!0,configurable:!0,get:function(){return s[i]},set:function(t){var e;o._frozen||(e=s[i],s[i]=t,n.emit(a.CHANGE_DATA,r,i,t,e),n.emit(a.CHANGE_DATA_KEY+i,r,t,e))}}),s[i]=t,n.emit(a.SET_DATA,r,i,t))),this},each:function(t,e){for(var i,o=[this.parent,null,void 0],s=1;s<arguments.length;s++)o.push(arguments[s]);for(i in this.list)o[1]=i,o[2]=this.list[i],t.apply(e,o);return this},merge:function(t,e){for(var i in void 0===e&&(e=!0),t)t.hasOwnProperty(i)&&(e||!e&&!this.has(i))&&this.setValue(i,t[i]);return this},remove:function(t){if(!this._frozen){if(!Array.isArray(t))return this.removeValue(t);for(var e=0;e<t.length;e++)this.removeValue(t[e])}return this},removeValue:function(t){var e;return this.has(t)&&(e=this.list[t],delete this.list[t],delete this.values[t],this.events.emit(a.REMOVE_DATA,this.parent,t,e)),this},pop:function(t){var e=void 0;return!this._frozen&&this.has(t)&&(e=this.list[t],delete this.list[t],delete this.values[t],this.events.emit(a.REMOVE_DATA,this.parent,t,e)),e},has:function(t){return this.list.hasOwnProperty(t)},setFreeze:function(t){return this._frozen=t,this},reset:function(){for(var t in this.list)delete this.list[t],delete this.values[t];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(a.CHANGE_DATA),this.events.off(a.SET_DATA),this.events.off(a.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(t){this._frozen=!!t}},count:{get:function(){var t,e=0;for(t in this.list)void 0!==this.list[t]&&e++;return e}}});t.exports=i},63646:(t,e,i)=>{var o=i(83419),s=i(45893),n=i(37277),r=i(44594),i=new o({Extends:s,initialize:function(t){s.call(this,t,t.sys.events),this.scene=t,this.systems=t.sys,t.sys.events.once(r.BOOT,this.boot,this),t.sys.events.on(r.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(r.DESTROY,this.destroy,this)},start:function(){this.events.once(r.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){s.prototype.destroy.call(this),this.events.off(r.START,this.start,this),this.scene=null,this.systems=null}});n.register("DataManagerPlugin",i,"data"),t.exports=i},10700:t=>{t.exports="changedata"},93608:t=>{t.exports="changedata-"},60883:t=>{t.exports="destroy"},69780:t=>{t.exports="removedata"},22166:t=>{t.exports="setdata"},24882:(t,e,i)=>{t.exports={CHANGE_DATA:i(10700),CHANGE_DATA_KEY:i(93608),DESTROY:i(60883),REMOVE_DATA:i(69780),SET_DATA:i(22166)}},44965:(t,e,i)=>{t.exports={DataManager:i(45893),DataManagerPlugin:i(63646),Events:i(24882)}},7098:(t,e,i)=>{var n=i(84148),r={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};t.exports=function(){if("function"!=typeof importScripts){r.audioData=!!window.Audio,r.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var t,e,i,o=document.createElement("audio"),s=!!o.canPlayType;try{s&&(t=function(t,e){t=o.canPlayType("audio/"+t).replace(/^no$/,"");return e?Boolean(t||o.canPlayType("audio/"+e).replace(/^no$/,"")):Boolean(t)},r.ogg=t('ogg; codecs="vorbis"'),r.opus=t('ogg; codecs="opus"',"opus"),r.mp3=t("mpeg"),r.wav=t("wav"),r.m4a=t("x-m4a"),r.aac=t("aac"),r.flac=t("flac","x-flac"),r.webm=t('webm; codecs="vorbis"'),""!==o.canPlayType('audio/mp4; codecs="ec-3"'))&&(n.edge||n.safari&&9<=n.safariVersion&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)&&(e=parseInt(RegExp.$1,10),i=parseInt(RegExp.$2,10),10===e&&11<=i||10<e))&&(r.dolby=!0)}catch(o){}}return r}()},84148:(t,e,i)=>{var i=i(25892),o={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};t.exports=(t=navigator.userAgent,/Edg\/\d+/.test(t)?(o.edge=!0,o.es2019=!0):/OPR/.test(t)?(o.opera=!0,o.es2019=!0):/Chrome\/(\d+)/.test(t)&&!i.windowsPhone?(o.chrome=!0,o.chromeVersion=parseInt(RegExp.$1,10),o.es2019=69<o.chromeVersion):/Firefox\D+(\d+)/.test(t)?(o.firefox=!0,o.firefoxVersion=parseInt(RegExp.$1,10),o.es2019=10<o.firefoxVersion):/AppleWebKit\/(?!.*CriOS)/.test(t)&&i.iOS?(o.mobileSafari=!0,o.es2019=!0):/MSIE (\d+\.\d+);/.test(t)?(o.ie=!0,o.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+(\.\d+)?) Safari/.test(t)&&!i.windowsPhone?(o.safari=!0,o.safariVersion=parseInt(RegExp.$1,10),o.es2019=10<o.safariVersion):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(t)&&(o.ie=!0,o.trident=!0,o.tridentVersion=parseInt(RegExp.$1,10),o.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(t)&&(o.silk=!0),o)},89289:(t,e,i)=>{var o,s,n,r=i(27919),a={supportInverseAlpha:!1,supportNewBlendModes:!1};t.exports=("function"!=typeof importScripts&&void 0!==document&&(a.supportNewBlendModes=(o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",s="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",(n=new Image).onload=function(){var e=new Image;e.onload=function(){var t=r.create2D(e,6).getContext("2d",{willReadFrequently:!0});if(t.globalCompositeOperation="multiply",t.drawImage(n,0,0),t.drawImage(e,2,0),!t.getImageData(2,0,1,1))return!1;t=t.getImageData(2,0,1,1).data;r.remove(e),a.supportNewBlendModes=255===t[0]&&0===t[1]&&0===t[2]},e.src=o+"/wCKxvRF"+s},n.src=o+"AP804Oa6"+s,!1),a.supportInverseAlpha=function(){var t=r.create2D(this,2).getContext("2d",{willReadFrequently:!0}),e=(t.fillStyle="rgba(10, 20, 30, 0.5)",t.fillRect(0,0,1,1),t.getImageData(0,0,1,1));if(null===e)return!1;t.putImageData(e,1,0);t=t.getImageData(1,0,1,1),t=t.data[0]===e.data[0]&&t.data[1]===e.data[1]&&t.data[2]===e.data[2]&&t.data[3]===e.data[3];return r.remove(this),t}()),a)},89357:(t,e,i)=>{var o=i(25892),n=i(84148),r=i(27919),a={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};t.exports=function(){if("function"!=typeof importScripts){a.canvas=!!window.CanvasRenderingContext2D;try{a.localStorage=!!localStorage.getItem}catch(t){a.localStorage=!1}a.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),a.fileSystem=!!window.requestFileSystem;var t,e,i,s=!1;a.webGL=function(){if(window.WebGLRenderingContext)try{var t=r.createWebGL(this),e=t.getContext("webgl")||t.getContext("experimental-webgl"),i=r.create2D(this),o=i.getContext("2d",{willReadFrequently:!0}).createImageData(1,1);return s=o.data instanceof Uint8ClampedArray,r.remove(t),r.remove(i),!!e}catch(t){}return!1}(),a.worker=!!window.Worker,a.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,a.getUserMedia=a.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,n.firefox&&n.firefoxVersion<21&&(a.getUserMedia=!1),!o.iOS&&(n.ie||n.firefox||n.chrome)&&(a.canvasBitBltShift=!0),(n.safari||n.mobileSafari)&&(a.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(a.vibration=!0),"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint32Array&&(a.littleEndian=(t=new ArrayBuffer(4),e=new Uint8Array(t),i=new Uint32Array(t),e[0]=161,e[1]=178,e[2]=195,e[3]=212,3569595041===i[0]||2712847316!==i[0]&&null)),a.support32bit="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof Int32Array&&null!==a.littleEndian&&s}return a}()},91639:t=>{var n={available:!1,cancel:"",keyboard:!1,request:""};t.exports=function(){if("function"!=typeof importScripts){for(var t="Fullscreen",e="FullScreen",i=["request"+t,"request"+e,"webkitRequest"+t,"webkitRequest"+e,"msRequest"+t,"msRequest"+e,"mozRequest"+e,"mozRequest"+t],o=0;o<i.length;o++)if(document.documentElement[i[o]]){n.available=!0,n.request=i[o];break}var s=["cancel"+e,"exit"+t,"webkitCancel"+e,"webkitExit"+t,"msCancel"+e,"msExit"+t,"mozCancel"+e,"mozExit"+t];if(n.available)for(o=0;o<s.length;o++)if(document[s[o]]){n.cancel=s[o];break}window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(n.keyboard=!0),Object.defineProperty(n,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}})}return n}()},31784:(t,e,i)=>{var i=i(84148),o={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};t.exports=("function"!=typeof importScripts&&(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&1<=navigator.maxTouchPoints)&&(o.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(o.mspointer=!0),navigator.getGamepads&&(o.gamepads=!0),"onwheel"in window||i.ie&&"WheelEvent"in window?o.wheelEvent="wheel":"onmousewheel"in window?o.wheelEvent="mousewheel":i.firefox&&"MouseScrollEvent"in window&&(o.wheelEvent="DOMMouseScroll")),o)},25892:t=>{var e,i={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};t.exports=("function"!=typeof importScripts&&(t=navigator.userAgent,/Windows/.test(t)?i.windows=!0:/Mac OS/.test(t)&&!/like Mac OS/.test(t)?navigator.maxTouchPoints&&2<navigator.maxTouchPoints?(i.iOS=!0,i.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),i.iOSVersion=parseInt(RegExp.$1,10)):i.macOS=!0:/Android/.test(t)?i.android=!0:/Linux/.test(t)?i.linux=!0:/iP[ao]d|iPhone/i.test(t)?(i.iOS=!0,navigator.appVersion.match(/OS (\d+)/),i.iOSVersion=parseInt(RegExp.$1,10),i.iPhone=-1!==t.toLowerCase().indexOf("iphone"),i.iPad=-1!==t.toLowerCase().indexOf("ipad")):/Kindle/.test(t)||/\bKF[A-Z][A-Z]+/.test(t)||/Silk.*Mobile Safari/.test(t)?i.kindle=!0:/CrOS/.test(t)&&(i.chromeOS=!0),(/Windows Phone/i.test(t)||/IEMobile/i.test(t))&&(i.android=!1,i.iOS=!1,i.macOS=!1,i.windows=!0,i.windowsPhone=!0),e=/Silk/.test(t),(i.windows||i.macOS||i.linux&&!e||i.chromeOS)&&(i.desktop=!0),(i.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t))&&(i.desktop=!1),navigator.standalone&&(i.webApp=!0),"function"!=typeof importScripts&&(void 0!==window.cordova&&(i.cordova=!0),void 0!==window.ejecta)&&(i.ejecta=!0),"undefined"!=typeof process&&process.versions&&process.versions.node&&(i.node=!0),i.node&&"object"==typeof process.versions&&(i.nodeWebkit=!!process.versions["node-webkit"],i.electron=!!process.versions.electron),/Crosswalk/.test(t)&&(i.crosswalk=!0),i.pixelRatio=window.devicePixelRatio||1),i)},43267:(t,e,i)=>{var s=i(95540),n={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};t.exports=function(){if("function"!=typeof importScripts){var t=document.createElement("video"),e=!!t.canPlayType,i=/^no$/;try{e&&(t.canPlayType('video/ogg; codecs="theora"').replace(i,"")&&(n.ogg=!0),t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(i,"")&&(n.h264=!0,n.mp4=!0),t.canPlayType("video/x-m4v").replace(i,"")&&(n.m4v=!0),t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(i,"")&&(n.webm=!0),t.canPlayType('video/webm; codecs="vp9"').replace(i,"")&&(n.vp9=!0),t.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(i,""))&&(n.hls=!0)}catch(t){}t.parentNode&&t.parentNode.removeChild(t),n.getVideoURL=function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i,o=s(t[e],"url",t[e]);if(0===o.indexOf("blob:"))return{url:o,type:""};if(i=0===o.indexOf("data:")?o.split(",")[0].match(/\/(.*?);/):o.match(/\.([a-zA-Z0-9]+)($|\?)/),i=s(t[e],"type",i?i[1]:"").toLowerCase(),n[i])return{url:o,type:i}}return null}}return n}()},82264:(t,e,i)=>{t.exports={os:i(25892),browser:i(84148),features:i(89357),input:i(31784),audio:i(7098),video:i(43267),fullscreen:i(91639),canvasFeatures:i(89289)}},89422:(t,e,i)=>{var i=i(83419),o=new Float32Array(20),s=new i({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(t){return this._matrix.set(t),this._dirty=!0,this},reset:function(){var t=this._matrix;return t.fill(0),t[0]=1,t[6]=1,t[12]=1,t[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var t=this._data;return this._dirty&&(t.set(this._matrix),t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,this._dirty=!1),t},brightness:function(t,e){t=void 0===t?0:t;return this.multiply([t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0],e=void 0===e?!1:e)},saturate:function(t,e){var t=2*(t=void 0===t?0:t)/3+1,i=-.5*(t-1);return this.multiply([t,i,i,0,0,i,t,i,0,0,i,i,t,0,0,0,0,0,1,0],e=void 0===e?!1:e)},desaturate:function(t){return this.saturate(-1,t=void 0===t?!1:t)},hue:function(t,e){void 0===e&&(e=!1),t=(t=void 0===t?0:t)/180*Math.PI;var i=Math.cos(t),t=Math.sin(t),o=.213,s=.715,n=.072;return this.multiply([o+.787*i+t*-o,s+i*-s+t*-s,n+i*-n+.928*t,0,0,o+i*-o+.143*t,s+i*(1-s)+.14*t,n+i*-n+-.283*t,0,0,o+i*-o+-.787*t,s+i*-s+t*s,n+.928*i+t*n,0,0,0,0,0,1,0],e)},grayscale:function(t,e){return this.saturate(-(t=void 0===t?1:t),e=void 0===e?!1:e)},blackWhite:function(t){return this.multiply(s.BLACK_WHITE,t=void 0===t?!1:t)},contrast:function(t,e){var t=(t=void 0===t?0:t)+1,i=-.5*(t-1);return this.multiply([t,0,0,0,i,0,t,0,0,i,0,0,t,0,i,0,0,0,1,0],e=void 0===e?!1:e)},negative:function(t){return this.multiply(s.NEGATIVE,t=void 0===t?!1:t)},desaturateLuminance:function(t){return this.multiply(s.DESATURATE_LUMINANCE,t=void 0===t?!1:t)},sepia:function(t){return this.multiply(s.SEPIA,t=void 0===t?!1:t)},night:function(t,e){return this.multiply([-2*(t=void 0===t?.1:t),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0],e=void 0===e?!1:e)},lsd:function(t){return this.multiply(s.LSD,t=void 0===t?!1:t)},brown:function(t){return this.multiply(s.BROWN,t=void 0===t?!1:t)},vintagePinhole:function(t){return this.multiply(s.VINTAGE,t=void 0===t?!1:t)},kodachrome:function(t){return this.multiply(s.KODACHROME,t=void 0===t?!1:t)},technicolor:function(t){return this.multiply(s.TECHNICOLOR,t=void 0===t?!1:t)},polaroid:function(t){return this.multiply(s.POLAROID,t=void 0===t?!1:t)},shiftToBGR:function(t){return this.multiply(s.SHIFT_BGR,t=void 0===t?!1:t)},multiply:function(t,e){(e=void 0===e?!1:e)||this.reset();var e=this._matrix,i=o;return i.set(e),e.set([i[0]*t[0]+i[1]*t[5]+i[2]*t[10]+i[3]*t[15],i[0]*t[1]+i[1]*t[6]+i[2]*t[11]+i[3]*t[16],i[0]*t[2]+i[1]*t[7]+i[2]*t[12]+i[3]*t[17],i[0]*t[3]+i[1]*t[8]+i[2]*t[13]+i[3]*t[18],i[0]*t[4]+i[1]*t[9]+i[2]*t[14]+i[3]*t[19]+i[4],i[5]*t[0]+i[6]*t[5]+i[7]*t[10]+i[8]*t[15],i[5]*t[1]+i[6]*t[6]+i[7]*t[11]+i[8]*t[16],i[5]*t[2]+i[6]*t[7]+i[7]*t[12]+i[8]*t[17],i[5]*t[3]+i[6]*t[8]+i[7]*t[13]+i[8]*t[18],i[5]*t[4]+i[6]*t[9]+i[7]*t[14]+i[8]*t[19]+i[9],i[10]*t[0]+i[11]*t[5]+i[12]*t[10]+i[13]*t[15],i[10]*t[1]+i[11]*t[6]+i[12]*t[11]+i[13]*t[16],i[10]*t[2]+i[11]*t[7]+i[12]*t[12]+i[13]*t[17],i[10]*t[3]+i[11]*t[8]+i[12]*t[13]+i[13]*t[18],i[10]*t[4]+i[11]*t[9]+i[12]*t[14]+i[13]*t[19]+i[14],i[15]*t[0]+i[16]*t[5]+i[17]*t[10]+i[18]*t[15],i[15]*t[1]+i[16]*t[6]+i[17]*t[11]+i[18]*t[16],i[15]*t[2]+i[16]*t[7]+i[17]*t[12]+i[18]*t[17],i[15]*t[3]+i[16]*t[8]+i[17]*t[13]+i[18]*t[18],i[15]*t[4]+i[16]*t[9]+i[17]*t[14]+i[18]*t[19]+i[19]]),this._dirty=!0,this}});s.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],s.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],s.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],s.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],s.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],s.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],s.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],s.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],s.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],s.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],s.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t.exports=s},51767:(t,e,i)=>{var o=i(83419),s=i(29747),i=new o({initialize:function(t,e,i){this._rgb=[0,0,0],this.onChangeCallback=s,this.dirty=!1,this.set(t,e,i)},set:function(t,e,i){return this._rgb=[t=void 0===t?0:t,e=void 0===e?0:e,i=void 0===i?0:i],this.onChange(),this},equals:function(t,e,i){var o=this._rgb;return o[0]===t&&o[1]===e&&o[2]===i},onChange:function(){this.dirty=!0;var t=this._rgb;this.onChangeCallback.call(this,t[0],t[1],t[2])},r:{get:function(){return this._rgb[0]},set:function(t){this._rgb[0]=t,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(t){this._rgb[1]=t,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(t){this._rgb[2]=t,this.onChange()}},destroy:function(){this.onChangeCallback=null}});t.exports=i},60461:t=>{t.exports={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12}},54312:(t,e,i)=>{var s=i(62235),n=i(35893),r=i(86327),a=i(88417);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,n(e)+i),r(t,s(e)+o),t}},46768:(t,e,i)=>{var s=i(62235),n=i(26541),r=i(86327),a=i(385);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,n(e)-i),r(t,s(e)+o),t}},35827:(t,e,i)=>{var s=i(62235),n=i(54380),r=i(86327),a=i(40136);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,n(e)+i),r(t,s(e)+o),t}},46871:(t,e,i)=>{var s=i(66786),n=i(35893),r=i(7702);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),s(t,n(e)+i,r(e)+o),t}},5198:(t,e,i)=>{var s=i(7702),n=i(26541),r=i(20786),a=i(385);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,n(e)-i),r(t,s(e)+o),t}},11879:(t,e,i)=>{var o=i(60461),n=[];n[o.BOTTOM_CENTER]=i(54312),n[o.BOTTOM_LEFT]=i(46768),n[o.BOTTOM_RIGHT]=i(35827),n[o.CENTER]=i(46871),n[o.LEFT_CENTER]=i(5198),n[o.RIGHT_CENTER]=i(80503),n[o.TOP_CENTER]=i(89698),n[o.TOP_LEFT]=i(922),n[o.TOP_RIGHT]=i(21373),n[o.LEFT_BOTTOM]=n[o.BOTTOM_LEFT],n[o.LEFT_TOP]=n[o.TOP_LEFT],n[o.RIGHT_BOTTOM]=n[o.BOTTOM_RIGHT],n[o.RIGHT_TOP]=n[o.TOP_RIGHT],t.exports=function(t,e,i,o,s){return n[i](t,e,o,s)}},80503:(t,e,i)=>{var s=i(7702),n=i(54380),r=i(20786),a=i(40136);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,n(e)+i),r(t,s(e)+o),t}},89698:(t,e,i)=>{var s=i(35893),n=i(17717),r=i(88417),a=i(66737);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),r(t,s(e)+i),a(t,n(e)-o),t}},922:(t,e,i)=>{var s=i(26541),n=i(17717),r=i(385),a=i(66737);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),r(t,s(e)-i),a(t,n(e)-o),t}},21373:(t,e,i)=>{var s=i(54380),n=i(17717),r=i(40136),a=i(66737);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),r(t,s(e)+i),a(t,n(e)-o),t}},91660:(t,e,i)=>{t.exports={BottomCenter:i(54312),BottomLeft:i(46768),BottomRight:i(35827),Center:i(46871),LeftCenter:i(5198),QuickSet:i(11879),RightCenter:i(80503),TopCenter:i(89698),TopLeft:i(922),TopRight:i(21373)}},71926:(t,e,i)=>{var o=i(60461),i=i(79291)(!1,{In:i(91660),To:i(16694)},o);t.exports=i},21578:(t,e,i)=>{var s=i(62235),n=i(35893),r=i(88417),a=i(66737);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),r(t,n(e)+i),a(t,s(e)+o),t}},10210:(t,e,i)=>{var s=i(62235),n=i(26541),r=i(385),a=i(66737);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),r(t,n(e)-i),a(t,s(e)+o),t}},82341:(t,e,i)=>{var s=i(62235),n=i(54380),r=i(40136),a=i(66737);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),r(t,n(e)+i),a(t,s(e)+o),t}},87958:(t,e,i)=>{var s=i(62235),n=i(26541),r=i(86327),a=i(40136);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,n(e)-i),r(t,s(e)+o),t}},40080:(t,e,i)=>{var s=i(7702),n=i(26541),r=i(20786),a=i(40136);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,n(e)-i),r(t,s(e)+o),t}},88466:(t,e,i)=>{var s=i(26541),n=i(17717),r=i(40136),a=i(66737);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),r(t,s(e)-i),a(t,n(e)-o),t}},38829:(t,e,i)=>{var o=i(60461),n=[];n[o.BOTTOM_CENTER]=i(21578),n[o.BOTTOM_LEFT]=i(10210),n[o.BOTTOM_RIGHT]=i(82341),n[o.LEFT_BOTTOM]=i(87958),n[o.LEFT_CENTER]=i(40080),n[o.LEFT_TOP]=i(88466),n[o.RIGHT_BOTTOM]=i(19211),n[o.RIGHT_CENTER]=i(34609),n[o.RIGHT_TOP]=i(48741),n[o.TOP_CENTER]=i(49440),n[o.TOP_LEFT]=i(81288),n[o.TOP_RIGHT]=i(61323),t.exports=function(t,e,i,o,s){return n[i](t,e,o,s)}},19211:(t,e,i)=>{var s=i(62235),n=i(54380),r=i(86327),a=i(385);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,n(e)+i),r(t,s(e)+o),t}},34609:(t,e,i)=>{var s=i(7702),n=i(54380),r=i(20786),a=i(385);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,n(e)+i),r(t,s(e)+o),t}},48741:(t,e,i)=>{var s=i(54380),n=i(17717),r=i(385),a=i(66737);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),r(t,s(e)+i),a(t,n(e)-o),t}},49440:(t,e,i)=>{var s=i(35893),n=i(17717),r=i(86327),a=i(88417);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,s(e)+i),r(t,n(e)-o),t}},81288:(t,e,i)=>{var s=i(26541),n=i(17717),r=i(86327),a=i(385);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,s(e)-i),r(t,n(e)-o),t}},61323:(t,e,i)=>{var s=i(54380),n=i(17717),r=i(86327),a=i(40136);t.exports=function(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),a(t,s(e)+i),r(t,n(e)-o),t}},16694:(t,e,i)=>{t.exports={BottomCenter:i(21578),BottomLeft:i(10210),BottomRight:i(82341),LeftBottom:i(87958),LeftCenter:i(40080),LeftTop:i(88466),QuickSet:i(38829),RightBottom:i(19211),RightCenter:i(34609),RightTop:i(48741),TopCenter:i(49440),TopLeft:i(81288),TopRight:i(61323)}},66786:(t,e,i)=>{var o=i(88417),s=i(20786);t.exports=function(t,e,i){return o(t,e),s(t,i)}},62235:t=>{t.exports=function(t){return t.y+t.height-t.height*t.originY}},72873:(t,e,i)=>{var s=i(62235),n=i(26541),r=i(54380),a=i(17717),h=i(87841);t.exports=function(t,e){void 0===e&&(e=new h);var i=n(t),o=a(t);return e.x=i,e.y=o,e.width=r(t)-i,e.height=s(t)-o,e}},35893:t=>{t.exports=function(t){return t.x-t.width*t.originX+.5*t.width}},7702:t=>{t.exports=function(t){return t.y-t.height*t.originY+.5*t.height}},26541:t=>{t.exports=function(t){return t.x-t.width*t.originX}},87431:t=>{t.exports=function(t){return t.width*t.originX}},46928:t=>{t.exports=function(t){return t.height*t.originY}},54380:t=>{t.exports=function(t){return t.x+t.width-t.width*t.originX}},17717:t=>{t.exports=function(t){return t.y-t.height*t.originY}},86327:t=>{t.exports=function(t,e){return t.y=e-t.height+t.height*t.originY,t}},88417:t=>{t.exports=function(t,e){var i=t.width*t.originX;return t.x=e+i-.5*t.width,t}},20786:t=>{t.exports=function(t,e){var i=t.height*t.originY;return t.y=e+i-.5*t.height,t}},385:t=>{t.exports=function(t,e){return t.x=e+t.width*t.originX,t}},40136:t=>{t.exports=function(t,e){return t.x=e-t.width+t.width*t.originX,t}},66737:t=>{t.exports=function(t,e){return t.y=e+t.height*t.originY,t}},58724:(t,e,i)=>{t.exports={CenterOn:i(66786),GetBottom:i(62235),GetBounds:i(72873),GetCenterX:i(35893),GetCenterY:i(7702),GetLeft:i(26541),GetOffsetX:i(87431),GetOffsetY:i(46928),GetRight:i(54380),GetTop:i(17717),SetBottom:i(86327),SetCenterX:i(88417),SetCenterY:i(20786),SetLeft:i(385),SetRight:i(40136),SetTop:i(66737)}},20623:t=>{t.exports={setCrisp:function(e){return["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"].forEach(function(t){e.style["image-rendering"]=t}),e.style.msInterpolationMode="nearest-neighbor",e},setBicubic:function(t){return t.style["image-rendering"]="auto",t.style.msInterpolationMode="bicubic",t}}},27919:(t,e,i)=>{var o,r,s,a=i(8054),h=i(68703),l=[],c=!1;t.exports={create2D:function(t,e,i){return o(t,e,i,a.CANVAS)},create:o=function(t,e,i,o,s){void 0===e&&(e=1),void 0===i&&(i=1),void 0===o&&(o=a.CANVAS),void 0===s&&(s=!1);var n=r(o),t=(null===n?(n={parent:t,canvas:document.createElement("canvas"),type:o},o===a.CANVAS&&l.push(n)):n.parent=t,n.canvas);return s&&(n.parent=t),t.width=e,t.height=i,c&&o===a.CANVAS&&h.disable(t.getContext("2d",{willReadFrequently:!1})),t},createWebGL:function(t,e,i){return o(t,e,i,a.WEBGL)},disableSmoothing:function(){c=!0},enableSmoothing:function(){c=!1},first:r=function(t){if((t=void 0===t?a.CANVAS:t)!==a.WEBGL)for(var e=0;e<l.length;e++){var i=l[e];if(!i.parent&&i.type===t)return i}return null},free:function(){return l.length-s()},pool:l,remove:function(e){var i=e instanceof HTMLCanvasElement;l.forEach(function(t){(i&&t.canvas===e||!i&&t.parent===e)&&(t.parent=null,t.canvas.width=1,t.canvas.height=1)})},total:s=function(){var e=0;return l.forEach(function(t){t.parent&&e++}),e}}},68703:t=>{var e,i="";t.exports={disable:function(t){return(i=""===i?e(t):i)&&(t[i]=!1),t},enable:function(t){return(i=""===i?e(t):i)&&(t[i]=!0),t},getPrefix:e=function(t){for(var e=["i","webkitI","msI","mozI","oI"],i=0;i<e.length;i++){var o=e[i]+"mageSmoothingEnabled";if(o in t)return o}return null},isEnabled:function(t){return null!==i?t[i]:null}}},65208:t=>{t.exports=function(t,e){return t.style.msTouchAction=e=void 0===e?"none":e,t.style["ms-touch-action"]=e,t.style["touch-action"]=e,t}},91610:t=>{t.exports=function(e,i){return void 0===i&&(i="none"),["-webkit-","-khtml-","-moz-","-ms-",""].forEach(function(t){e.style[t+"user-select"]=i}),e.style["-webkit-touch-callout"]=i,e.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",e}},26253:(t,e,i)=>{t.exports={CanvasInterpolation:i(20623),CanvasPool:i(27919),Smoothing:i(68703),TouchAction:i(65208),UserSelect:i(91610)}},40987:(t,e,i)=>{var o=i(83419),n=i(37589),r=i(1e3),s=i(7537),a=i(87837),h=new o({initialize:function(t,e,i,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(t,e,i,o)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(t,e,i,o,s){return void 0===o&&(o=255),void 0===s&&(s=!0),this._locked=!0,this.red=t,this.green=e,this.blue=i,this.alpha=o,this._locked=!1,this.update(s)},setGLTo:function(t,e,i,o){return void 0===o&&(o=1),this._locked=!0,this.redGL=t,this.greenGL=e,this.blueGL=i,this.alphaGL=o,this._locked=!1,this.update(!0)},setFromRGB:function(t){return this._locked=!0,this.red=t.r,this.green=t.g,this.blue=t.b,t.hasOwnProperty("a")&&(this.alpha=t.a),this._locked=!1,this.update(!0)},setFromHSV:function(t,e,i){return s(t,e,i,this)},update:function(t){var e,i,o,s;return void 0===t&&(t=!1),this._locked||(e=this.r,i=this.g,o=this.b,s=this.a,this._color=n(e,i,o),this._color32=r(e,i,o,s),this._rgba="rgba("+e+","+i+","+o+","+s/255+")",t&&a(e,i,o,this)),this},updateHSV:function(){var t=this.r,e=this.g,i=this.b;return a(t,e,i,this),this},clone:function(){return new h(this.r,this.g,this.b,this.a)},gray:function(t){return this.setTo(t,t,t)},random:function(t,e){void 0===t&&(t=0),void 0===e&&(e=255);var i=Math.floor(t+Math.random()*(e-t)),o=Math.floor(t+Math.random()*(e-t)),e=Math.floor(t+Math.random()*(e-t));return this.setTo(i,o,e)},randomGray:function(t,e){void 0===t&&(t=0),void 0===e&&(e=255);e=Math.floor(t+Math.random()*(e-t));return this.setTo(e,e,e)},saturate:function(t){return this.s+=t/100,this},desaturate:function(t){return this.s-=t/100,this},lighten:function(t){return this.v+=t/100,this},darken:function(t){return this.v-=t/100,this},brighten:function(t){var e=this.r,i=this.g,o=this.b,e=Math.max(0,Math.min(255,e-Math.round(-t/100*255))),i=Math.max(0,Math.min(255,i-Math.round(-t/100*255))),o=Math.max(0,Math.min(255,o-Math.round(-t/100*255)));return this.setTo(e,i,o)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(t){this.gl[0]=Math.min(Math.abs(t),1),this.r=Math.floor(255*this.gl[0]),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(t){this.gl[1]=Math.min(Math.abs(t),1),this.g=Math.floor(255*this.gl[1]),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(t){this.gl[2]=Math.min(Math.abs(t),1),this.b=Math.floor(255*this.gl[2]),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(t){this.gl[3]=Math.min(Math.abs(t),1),this.a=Math.floor(255*this.gl[3]),this.update()}},red:{get:function(){return this.r},set:function(t){t=Math.floor(Math.abs(t)),this.r=Math.min(t,255),this.gl[0]=t/255,this.update(!0)}},green:{get:function(){return this.g},set:function(t){t=Math.floor(Math.abs(t)),this.g=Math.min(t,255),this.gl[1]=t/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(t){t=Math.floor(Math.abs(t)),this.b=Math.min(t,255),this.gl[2]=t/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(t){t=Math.floor(Math.abs(t)),this.a=Math.min(t,255),this.gl[3]=t/255,this.update()}},h:{get:function(){return this._h},set:function(t){this._h=t,s(t,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(t){this._s=t,s(this._h,t,this._v,this)}},v:{get:function(){return this._v},set:function(t){this._v=t,s(this._h,this._s,t,this)}}});t.exports=h},92728:(t,e,i)=>{var l=i(37589);t.exports=function(t){void 0===t&&(t=1024);for(var e=[],i=255,o=0,s=0,n=0;n<=255;n++)e.push({r:i,g:n,b:s,color:l(i,n,s)});for(n=o=255;0<=n;n--)e.push({r:n,g:o,b:s,color:l(n,o,s)});for(n=i=0;n<=255;n++,o--)e.push({r:i,g:o,b:n,color:l(i,o,n)});for(s=255,n=o=0;n<=255;n++,s--,i++)e.push({r:i,g:o,b:s,color:l(i,o,s)});if(1024===t)return e;var r=[],a=0,h=1024/t;for(n=0;n<t;n++)r.push(e[Math.floor(a)]),a+=h;return r}},91588:t=>{t.exports=function(t){var e={r:t>>16&255,g:t>>8&255,b:255&t,a:255};return 16777215<t&&(e.a=t>>>24),e}},62957:t=>{t.exports=function(t){t=t.toString(16);return 1===t.length?"0"+t:t}},37589:t=>{t.exports=function(t,e,i){return t<<16|e<<8|i}},1e3:t=>{t.exports=function(t,e,i,o){return o<<24|t<<16|e<<8|i}},62183:(t,e,i)=>{var r=i(40987),a=i(89528);t.exports=function(t,e,i){var o=i,s=i,n=i;return 0!==e&&(o=a(e=2*i-(i=i<.5?i*(1+e):i+e-i*e),i,t+1/3),s=a(e,i,t),n=a(e,i,t-1/3)),(new r).setGLTo(o,s,n,1)}},27939:(t,e,i)=>{var s=i(7537);t.exports=function(t,e){void 0===t&&(t=1),void 0===e&&(e=1);for(var i=[],o=0;o<=359;o++)i.push(s(o/359,t,e));return i}},7537:(t,e,i)=>{var r=i(37589);function a(t,e,i,o){t=(t+6*e)%6,e=Math.min(t,4-t,1);return Math.round(255*(o-o*i*Math.max(0,e)))}t.exports=function(t,e,i,o){var s=a(5,t,e=void 0===e?1:e,i=void 0===i?1:i),n=a(3,t,e,i),t=a(1,t,e,i);return o?o.setTo?o.setTo(s,n,t,o.alpha,!0):(o.r=s,o.g=n,o.b=t,o.color=r(s,n,t),o):{r:s,g:n,b:t,color:r(s,n,t)}}},70238:(t,e,i)=>{var s=i(40987);t.exports=function(t){var e,i,o=new s,t=(t=t.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,i,o){return e+e+i+i+o+o}),/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t));return t&&(e=parseInt(t[1],16),i=parseInt(t[2],16),t=parseInt(t[3],16),o.setTo(e,i,t)),o}},89528:t=>{t.exports=function(t,e,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}},30100:(t,e,i)=>{var o=i(40987),s=i(90664);t.exports=function(t){t=s(t);return new o(t.r,t.g,t.b,t.a)}},90664:t=>{t.exports=function(t){return 16777215<t?{a:t>>>24,r:t>>16&255,g:t>>8&255,b:255&t}:{a:255,r:t>>16&255,g:t>>8&255,b:255&t}}},13699:(t,e,i)=>{function r(t,e,i,o,s,n,r,a){return a=(a=void 0===a?0:a)/(r=void 0===r?100:r),{r:h(t,o,a),g:h(e,s,a),b:h(i,n,a)}}var h=i(28915);t.exports={RGBWithRGB:r,ColorWithRGB:function(t,e,i,o,s,n){return r(t.r,t.g,t.b,e,i,o,s=void 0===s?100:s,n=void 0===n?0:n)},ColorWithColor:function(t,e,i,o){return r(t.r,t.g,t.b,e.r,e.g,e.b,i=void 0===i?100:i,o=void 0===o?0:o)}}},68957:(t,e,i)=>{var o=i(40987);t.exports=function(t){return new o(t.r,t.g,t.b,t.a)}},87388:(t,e,i)=>{var n=i(40987);t.exports=function(t){var e,i,o,s=new n,t=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(t.toLowerCase());return t&&(e=parseInt(t[1],10),i=parseInt(t[2],10),o=parseInt(t[3],10),t=void 0!==t[4]?parseFloat(t[4]):1,s.setTo(e,i,o,255*t)),s}},87837:t=>{t.exports=function(t,e,i,o){void 0===o&&(o={h:0,s:0,v:0}),t/=255,e/=255,i/=255;var s=Math.min(t,e,i),n=Math.max(t,e,i),r=n-s,a=0,h=0===n?0:r/n,l=n;return n!==s&&(n===t?a=(e-i)/r+(e<i?6:0):n===e?a=(i-t)/r+2:n===i&&(a=(t-e)/r+4),a/=6),o.hasOwnProperty("_h")?(o._h=a,o._s=h,o._v=l):(o.h=a,o.s=h,o.v=l),o}},75723:(t,e,i)=>{var n=i(62957);t.exports=function(t,e,i,o,s){return void 0===o&&(o=255),"#"===(s=void 0===s?"#":s)?"#"+((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1,7):"0x"+n(o)+n(t)+n(e)+n(i)}},85386:(t,e,i)=>{var o=i(30976),s=i(40987);t.exports=function(t,e){return new s(o(t=void 0===t?0:t,e=void 0===e?255:e),o(t,e),o(t,e))}},80333:(t,e,i)=>{var o=i(70238),s=i(30100),n=i(68957),r=i(87388);t.exports=function(t){switch(typeof t){case"string":return("rgb"===t.substr(0,3).toLowerCase()?r:o)(t);case"number":return s(t);case"object":return n(t)}}},3956:(t,e,i)=>{var o=i(40987);o.ColorSpectrum=i(92728),o.ColorToRGBA=i(91588),o.ComponentToHex=i(62957),o.GetColor=i(37589),o.GetColor32=i(1e3),o.HexStringToColor=i(70238),o.HSLToColor=i(62183),o.HSVColorWheel=i(27939),o.HSVToRGB=i(7537),o.HueToComponent=i(89528),o.IntegerToColor=i(30100),o.IntegerToRGB=i(90664),o.Interpolate=i(13699),o.ObjectToColor=i(68957),o.RandomRGB=i(85386),o.RGBStringToColor=i(87388),o.RGBToHSV=i(87837),o.RGBToString=i(75723),o.ValueToColor=i(80333),t.exports=o},27460:(t,e,i)=>{t.exports={Align:i(71926),BaseShader:i(73894),Bounds:i(58724),Canvas:i(26253),Color:i(3956),ColorMatrix:i(89422),Masks:i(69781),RGB:i(51767)}},6858:(t,e,i)=>{var o=i(83419),i=i(39429),n=new o({initialize:function(t,e,i,o,s,n){e=e||t.sys.make.image({x:i,y:o,key:s,frame:n,add:!1}),this.bitmapMask=e,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(t){this.bitmapMask=t},preRenderWebGL:function(t,e,i){t.pipelines.BITMAPMASK_PIPELINE.beginMask(this,e,i)},postRenderWebGL:function(t,e,i){t.pipelines.BITMAPMASK_PIPELINE.endMask(this,e,i)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});i.register("bitmapMask",function(t,e,i,o,s){return new n(this.scene,t,e,i,o,s)}),t.exports=n},80661:(t,e,i)=>{i=new(i(83419))({initialize:function(t,e){this.geometryMask=e,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(t){return this.geometryMask=t,this},setInvertAlpha:function(t){return this.invertAlpha=t=void 0===t?!0:t,this},preRenderWebGL:function(t,e,i){var o=t.gl;t.flush(),0===t.maskStack.length&&(o.enable(o.STENCIL_TEST),o.clear(o.STENCIL_BUFFER_BIT),t.maskCount=0),t.currentCameraMask.mask!==this&&(t.currentMask.mask=this),t.maskStack.push({mask:this,camera:i}),this.applyStencil(t,i,!0),t.maskCount++},applyStencil:function(t,e,i){var o=t.gl,s=this.geometryMask,n=t.maskCount;o.colorMask(!1,!1,!1,!1),i?(o.stencilFunc(o.EQUAL,n,255),o.stencilOp(o.KEEP,o.KEEP,o.INCR),n++):(o.stencilFunc(o.EQUAL,n+1,255),o.stencilOp(o.KEEP,o.KEEP,o.DECR)),this.level=n,s.renderWebGL(t,s,e),t.flush(),o.colorMask(!0,!0,!0,!0),o.stencilOp(o.KEEP,o.KEEP,o.KEEP),this.invertAlpha?o.stencilFunc(o.NOTEQUAL,n,255):o.stencilFunc(o.EQUAL,n,255)},postRenderWebGL:function(t){var e=t.gl,i=(t.maskStack.pop(),t.maskCount--,t.flush(),t.currentMask);0===t.maskStack.length?(i.mask=null,e.disable(e.STENCIL_TEST)):((e=t.maskStack[t.maskStack.length-1]).mask.applyStencil(t,e.camera,!1),t.currentCameraMask.mask!==e.mask?(i.mask=e.mask,i.camera=e.camera):i.mask=null)},preRenderCanvas:function(t,e,i){var o=this.geometryMask;t.currentContext.save(),o.renderCanvas(t,o,i,null,null,!0),t.currentContext.clip()},postRenderCanvas:function(t){t.currentContext.restore()},destroy:function(){this.geometryMask=null}});t.exports=i},69781:(t,e,i)=>{t.exports={BitmapMask:i(6858),GeometryMask:i(80661)}},73894:(t,e,i)=>{i=new(i(83419))({initialize:function(t,e,i,o){e&&""!==e||(e=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join("\n")),i&&""!==i||(i=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join("\n")),void 0===o&&(o=null),this.key=t,this.fragmentSrc=e,this.vertexSrc=i,this.uniforms=o}});t.exports=i},40366:t=>{t.exports=function(t,e){var i;if(e)"string"==typeof e?i=document.getElementById(e):"object"==typeof e&&1===e.nodeType&&(i=e);else if(t.parentElement||null===e)return t;return(i=i||document.body).appendChild(t),t}},83719:(t,e,i)=>{var o=i(40366);t.exports=function(t){var e,i=t.config;i.parent&&i.domCreateContainer&&((e=document.createElement("div")).style.cssText=["display: block;","width: "+t.scale.width+"px;","height: "+t.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+i.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),t.domContainer=e,o(e,i.parent))}},57264:(t,e,i)=>{var o=i(25892);t.exports=function(t){var e;"complete"!==document.readyState&&"interactive"!==document.readyState?(e=function(){document.removeEventListener("deviceready",e,!0),document.removeEventListener("DOMContentLoaded",e,!0),window.removeEventListener("load",e,!0),t()},document.body?o.cordova?document.addEventListener("deviceready",e,!1):(document.addEventListener("DOMContentLoaded",e,!0),window.addEventListener("load",e,!0)):window.setTimeout(e,20)):t()}},57811:t=>{t.exports=function(t){var e,i;return t?(t=Math.abs(window.orientation),e={w:0,h:0},(i=document.createElement("div")).setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(i),e.w=90===t?i.offsetHeight:window.innerWidth,e.h=90===t?window.innerWidth:i.offsetHeight,document.documentElement.removeChild(i),i=null,90!==Math.abs(window.orientation)?e.h:e.w):window.innerHeight}},45818:(t,e,i)=>{var o=i(13560);t.exports=function(t,e){var i=window.screen,i=!!i&&(i.orientation||i.mozOrientation||i.msOrientation);return i&&"string"==typeof i.type?i.type:"string"==typeof i?i:"number"==typeof window.orientation?0===window.orientation||180===window.orientation?o.ORIENTATION.PORTRAIT:o.ORIENTATION.LANDSCAPE:window.matchMedia?window.matchMedia("(orientation: portrait)").matches?o.ORIENTATION.PORTRAIT:window.matchMedia("(orientation: landscape)").matches?o.ORIENTATION.LANDSCAPE:void 0:t<e?o.ORIENTATION.PORTRAIT:o.ORIENTATION.LANDSCAPE}},74403:t=>{t.exports=function(t){var e;return""!==t&&("string"==typeof t?e=document.getElementById(t):t&&1===t.nodeType&&(e=t)),e=e||document.body}},56836:t=>{t.exports=function(t){var e="";try{window.DOMParser?e=(new DOMParser).parseFromString(t,"text/xml"):(e=new ActiveXObject("Microsoft.XMLDOM")).loadXML(t)}catch(t){e=null}return e&&e.documentElement&&!e.getElementsByTagName("parsererror").length?e:null}},35846:t=>{t.exports=function(t){t.parentNode&&t.parentNode.removeChild(t)}},43092:(t,e,i)=>{var o=i(83419),s=i(29747),i=new o({initialize:function(){this.isRunning=!1,this.callback=s,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var i=this;this.step=function t(e){i.callback(e),i.isRunning&&(i.timeOutID=window.requestAnimationFrame(t))},this.stepTimeout=function t(){i.isRunning&&(i.timeOutID=window.setTimeout(t,i.delay)),i.callback(window.performance.now())}},start:function(t,e,i){this.isRunning||(this.callback=t,this.isSetTimeOut=e,this.delay=i,this.isRunning=!0,this.timeOutID=e?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=s}});t.exports=i},84902:(t,e,i)=>{i={AddToDOM:i(40366),DOMContentLoaded:i(57264),GetInnerHeight:i(57811),GetScreenOrientation:i(45818),GetTarget:i(74403),ParseXML:i(56836),RemoveFromDOM:i(35846),RequestAnimationFrame:i(43092)};t.exports=i},47565:(t,e,i)=>{var o=i(83419),s=i(50792),i=i(37277),o=new o({Extends:s,initialize:function(){s.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});i.register("EventEmitter",o,"events"),t.exports=o},93055:(t,e,i)=>{t.exports={EventEmitter:i(47565)}},20122:(t,e,i)=>{var o=i(83419),s=i(72898),n=i(14811),i=new o({Extends:s,initialize:function(t,e){void 0===e&&(e=1),s.call(this,n.BARREL,t),this.amount=e}});t.exports=i},32251:(t,e,i)=>{var o=i(83419),a=i(72898),h=i(14811),i=new o({Extends:a,initialize:function(t,e,i,o,s,n,r){void 0===i&&(i=1),void 0===o&&(o=1),void 0===s&&(s=1),void 0===n&&(n=1),void 0===r&&(r=4),a.call(this,h.BLOOM,t),this.steps=r,this.offsetX=i,this.offsetY=o,this.blurStrength=s,this.strength=n,this.glcolor=[1,1,1],null!=e&&(this.color=e)},color:{get:function(){var t=this.glcolor;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},set:function(t){var e=this.glcolor;e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}}});t.exports=i},9047:(t,e,i)=>{var o=i(83419),a=i(72898),h=i(14811),i=new o({Extends:a,initialize:function(t,e,i,o,s,n,r){void 0===e&&(e=0),void 0===i&&(i=2),void 0===o&&(o=2),void 0===s&&(s=1),void 0===r&&(r=4),a.call(this,h.BLUR,t),this.quality=e,this.x=i,this.y=o,this.steps=r,this.strength=s,this.glcolor=[1,1,1],null!=n&&(this.color=n)},color:{get:function(){var t=this.glcolor;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},set:function(t){var e=this.glcolor;e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}}});t.exports=i},27885:(t,e,i)=>{var o=i(83419),h=i(72898),l=i(14811),i=new o({Extends:h,initialize:function(t,e,i,o,s,n,r,a){void 0===e&&(e=.5),void 0===i&&(i=1),void 0===o&&(o=.2),void 0===s&&(s=!1),void 0===n&&(n=1),void 0===r&&(r=1),void 0===a&&(a=1),h.call(this,l.BOKEH,t),this.radius=e,this.amount=i,this.contrast=o,this.isTiltShift=s,this.strength=a,this.blurX=n,this.blurY=r}});t.exports=i},12578:(t,e,i)=>{var o=i(83419),r=i(72898),a=i(14811),i=new o({Extends:r,initialize:function(t,e,i,o,s,n){void 0===e&&(e=8),void 0===s&&(s=1),void 0===n&&(n=.005),r.call(this,a.CIRCLE,t),this.scale=s,this.feather=n,this.thickness=e,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],null!=i&&(this.color=i),null!=o&&(this.backgroundColor=o)},color:{get:function(){var t=this.glcolor;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},set:function(t){var e=this.glcolor;e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}},backgroundColor:{get:function(){var t=this.glcolor2;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},set:function(t){var e=this.glcolor2;e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}},backgroundAlpha:{get:function(){return this.glcolor2[3]},set:function(t){this.glcolor2[3]=t}}});t.exports=i},15802:(t,e,i)=>{var o=i(83419),s=i(89422),n=i(14811),i=new o({Extends:s,initialize:function(t){s.call(this),this.type=n.COLOR_MATRIX,this.gameObject=t,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});t.exports=i},72898:(t,e,i)=>{i=new(i(83419))({initialize:function(t,e){this.type=t,this.gameObject=e,this.active=!0},setActive:function(t){return this.active=t,this},destroy:function(){this.gameObject=null,this.active=!1}});t.exports=i},44553:(t,e,i)=>{var o=i(83419),s=i(72898),n=i(14811),i=new o({Extends:s,initialize:function(t,e,i,o){void 0===e&&(e="__WHITE"),void 0===i&&(i=.005),void 0===o&&(o=.005),s.call(this,n.DISPLACEMENT,t),this.x=i,this.y=o,this.glTexture,this.setTexture(e)},setTexture:function(t){t=this.gameObject.scene.sys.textures.getFrame(t);return t&&(this.glTexture=t.glTexture),this}});t.exports=i},68531:(t,e,i)=>{var o=i(83419),n=i(72898),r=i(14811),i=new o({Extends:n,initialize:function(t,e,i,o,s){void 0===i&&(i=4),void 0===o&&(o=0),void 0===s&&(s=!1),n.call(this,r.GLOW,t),this.outerStrength=i,this.innerStrength=o,this.knockout=s,this.glcolor=[1,1,1,1],void 0!==e&&(this.color=e)},color:{get:function(){var t=this.glcolor;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},set:function(t){var e=this.glcolor;e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}}});t.exports=i},37102:(t,e,i)=>{var o=i(83419),l=i(72898),c=i(14811),i=new o({Extends:l,initialize:function(t,e,i,o,s,n,r,a,h){void 0===o&&(o=.2),void 0===s&&(s=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===a&&(a=1),void 0===h&&(h=0),l.call(this,c.GRADIENT,t),this.alpha=o,this.size=h,this.fromX=s,this.fromY=n,this.toX=r,this.toY=a,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],null!=e&&(this.color1=e),null!=i&&(this.color2=i)},color1:{get:function(){var t=this.glcolor1;return(t[0]<<16)+(t[1]<<8)+(0|t[2])},set:function(t){var e=this.glcolor1;e[0]=t>>16&255,e[1]=t>>8&255,e[2]=255&t}},color2:{get:function(){var t=this.glcolor2;return(t[0]<<16)+(t[1]<<8)+(0|t[2])},set:function(t){var e=this.glcolor2;e[0]=t>>16&255,e[1]=t>>8&255,e[2]=255&t}}});t.exports=i},86886:(t,e,i)=>{var o=i(83419),s=i(72898),n=i(14811),i=new o({Extends:s,initialize:function(t,e){void 0===e&&(e=1),s.call(this,n.PIXELATE,t),this.amount=e}});t.exports=i},92322:(t,e,i)=>{var o=i(83419),h=i(72898),l=i(14811),i=new o({Extends:h,initialize:function(t,e,i,o,s,n,r,a){void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=.1),void 0===s&&(s=1),void 0===r&&(r=6),void 0===a&&(a=1),h.call(this,l.SHADOW,t),this.x=e,this.y=i,this.decay=o,this.power=s,this.glcolor=[0,0,0,1],this.samples=r,this.intensity=a,void 0!==n&&(this.color=n)},color:{get:function(){var t=this.glcolor;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},set:function(t){var e=this.glcolor;e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}}});t.exports=i},39563:(t,e,i)=>{var o=i(83419),n=i(72898),r=i(14811),i=new o({Extends:n,initialize:function(t,e,i,o,s){void 0===e&&(e=.5),void 0===i&&(i=.5),void 0===o&&(o=3),void 0===s&&(s=!1),n.call(this,r.SHINE,t),this.speed=e,this.lineWidth=i,this.gradient=o,this.reveal=s}});t.exports=i},56448:(t,e,i)=>{var o=i(83419),n=i(72898),r=i(14811),i=new o({Extends:n,initialize:function(t,e,i,o,s){void 0===e&&(e=.5),void 0===i&&(i=.5),void 0===o&&(o=.5),void 0===s&&(s=.5),n.call(this,r.VIGNETTE,t),this.x=e,this.y=i,this.radius=o,this.strength=s}});t.exports=i},38433:(t,e,i)=>{var o=i(83419),n=i(72898),r=i(14811),i=new o({Extends:n,initialize:function(t,e,i,o,s){void 0===e&&(e=.1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=!1),n.call(this,r.WIPE,t),this.progress=0,this.wipeWidth=e,this.direction=i,this.axis=o,this.reveal=s}});t.exports=i},14811:t=>{t.exports={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19}},66064:(t,e,i)=>{var o=i(79291),s=i(14811),o=o(!1,{Barrel:i(20122),Controller:i(72898),Bloom:i(32251),Blur:i(9047),Bokeh:i(27885),Circle:i(12578),ColorMatrix:i(15802),Displacement:i(44553),Glow:i(68531),Gradient:i(37102),Pixelate:i(86886),Shadow:i(92322),Shine:i(39563),Vignette:i(56448),Wipe:i(38433)},s);t.exports=o},25305:(t,e,i)=>{var n=i(10312),r=i(23568);t.exports=function(t,e,i){e.x=r(i,"x",0),e.y=r(i,"y",0),e.depth=r(i,"depth",0),e.flipX=r(i,"flipX",!1),e.flipY=r(i,"flipY",!1);var o,s=r(i,"scale",null),s=("number"==typeof s?e.setScale(s):null!==s&&(e.scaleX=r(s,"x",1),e.scaleY=r(s,"y",1)),r(i,"scrollFactor",null)),s=("number"==typeof s?e.setScrollFactor(s):null!==s&&(e.scrollFactorX=r(s,"x",1),e.scrollFactorY=r(s,"y",1)),e.rotation=r(i,"rotation",0),r(i,"angle",null)),s=(null!==s&&(e.angle=s),e.alpha=r(i,"alpha",1),r(i,"origin",null));return"number"==typeof s?e.setOrigin(s):null!==s&&(o=r(s,"x",.5),s=r(s,"y",.5),e.setOrigin(o,s)),e.blendMode=r(i,"blendMode",n.NORMAL),e.visible=r(i,"visible",!0),r(i,"add",!0)&&t.sys.displayList.add(e),e.preUpdate&&t.sys.updateList.add(e),e}},13059:(t,e,i)=>{var c=i(23568);t.exports=function(t,e){var i,o,s,n,r,a,h,l,e=c(e,"anims",null);return null!==e&&("string"==typeof e?t.anims.play(e):"object"==typeof e&&(i=t.anims,l=c(e,"key",void 0))&&(o=c(e,"startFrame",void 0),s=c(e,"delay",0),n=c(e,"repeat",0),r=c(e,"repeatDelay",0),a=c(e,"yoyo",!1),h=c(e,"play",!1),e=c(e,"delayedPlay",0),l={key:l,delay:s,repeat:n,repeatDelay:r,yoyo:a,startFrame:o},h?i.play(l):0<e?i.playAfterDelay(l,e):i.load(l))),t}},8050:(t,e,i)=>{var o=i(83419),s=i(73162),n=i(37277),r=i(51708),a=i(44594),h=i(19186),i=new o({Extends:s,initialize:function(t){s.call(this,t),this.sortChildrenFlag=!1,this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(a.BOOT,this.boot,this),this.events.on(a.START,this.start,this)},boot:function(){this.events.once(a.DESTROY,this.destroy,this)},addChildCallback:function(t){t.displayList&&t.displayList!==this&&t.removeFromDisplayList(),t.parentContainer&&t.parentContainer.remove(t),t.displayList||(this.queueDepthSort(),t.displayList=this,t.emit(r.ADDED_TO_SCENE,t,this.scene),this.events.emit(a.ADDED_TO_SCENE,t,this.scene))},removeChildCallback:function(t){this.queueDepthSort(),t.displayList=null,t.emit(r.REMOVED_FROM_SCENE,t,this.scene),this.events.emit(a.REMOVED_FROM_SCENE,t,this.scene)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(h(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(t,e){return t._depth-e._depth},getChildren:function(){return this.list},shutdown:function(){for(var t=this.list;t.length;)t[0].destroy(!0);this.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});n.register("DisplayList",i,"displayList"),t.exports=i},95643:(t,e,i)=>{var o=i(83419),s=i(53774),n=i(45893),r=i(50792),a=i(51708),h=i(44594),l=new o({Extends:r,initialize:function(t,e){r.call(this),this.scene=t,this.displayList=null,this.type=e,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(a.ADDED_TO_SCENE,this.addedToScene,this),this.on(a.REMOVED_FROM_SCENE,this.removedFromScene,this),t.sys.queueDepthSort()},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},setState:function(t){return this.state=t,this},setDataEnabled:function(){return this.data||(this.data=new n(this)),this},setData:function(t,e){return this.data||(this.data=new n(this)),this.data.set(t,e),this},incData:function(t,e){return this.data||(this.data=new n(this)),this.data.inc(t,e),this},toggleData:function(t){return this.data||(this.data=new n(this)),this.data.toggle(t),this},getData:function(t){return this.data||(this.data=new n(this)),this.data.get(t)},setInteractive:function(t,e,i){return this.scene.sys.input.enable(this,t,e,i),this},disableInteractive:function(){return this.scene.sys.input.disable(this),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return s(this)},willRender:function(t){return!(this.displayList&&this.displayList.active&&!this.displayList.willRender(t)||l.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function(){for(var t=this,e=this.parentContainer,i=[];e&&(i.unshift(e.getIndex(t)),(t=e).parentContainer);)e=e.parentContainer;return this.displayList?i.unshift(this.displayList.getIndex(t)):i.unshift(this.scene.sys.displayList.getIndex(t)),i},addToDisplayList:function(t){return void 0===t&&(t=this.scene.sys.displayList),this.displayList&&this.displayList!==t&&this.removeFromDisplayList(),t.exists(this)||((this.displayList=t).add(this,!0),t.queueDepthSort(),this.emit(a.ADDED_TO_SCENE,this,this.scene),t.events.emit(h.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var t=this.displayList||this.scene.sys.displayList;return t&&t.exists(this)&&(t.remove(this,!0),t.queueDepthSort(),this.displayList=null,this.emit(a.REMOVED_FROM_SCENE,this,this.scene),t.events.emit(h.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(t){this.scene&&!this.ignoreDestroy&&(void 0===t&&(t=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(a.DESTROY,this,t),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});l.RENDER_MASK=15,t.exports=l},44603:(t,e,i)=>{var o=i(83419),s=i(37277),n=i(44594),r=new o({initialize:function(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(n.DESTROY,this.destroy,this)},start:function(){this.events.once(n.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});r.register=function(t,e){r.prototype.hasOwnProperty(t)||(r.prototype[t]=e)},r.remove=function(t){r.prototype.hasOwnProperty(t)&&delete r.prototype[t]},s.register("GameObjectCreator",r,"make"),t.exports=r},39429:(t,e,i)=>{var o=i(83419),s=i(37277),n=i(44594),r=new o({initialize:function(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(n.DESTROY,this.destroy,this)},start:function(){this.events.once(n.SHUTDOWN,this.shutdown,this)},existing:function(t){return(t.renderCanvas||t.renderWebGL)&&this.displayList.add(t),t.preUpdate&&this.updateList.add(t),t},shutdown:function(){this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});r.register=function(t,e){r.prototype.hasOwnProperty(t)||(r.prototype[t]=e)},r.remove=function(t){r.prototype.hasOwnProperty(t)&&delete r.prototype[t]},s.register("GameObjectFactory",r,"add"),t.exports=r},91296:(t,e,i)=>{var i=i(61340),r=new i,a=new i,h=new i,l={camera:r,sprite:a,calc:h};t.exports=function(t,e,i){var o=r,s=a,n=h;return s.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),o.copyFrom(e.matrix),i?(o.multiplyWithOffset(i,-e.scrollX*t.scrollFactorX,-e.scrollY*t.scrollFactorY),s.e=t.x,s.f=t.y):(s.e-=e.scrollX*t.scrollFactorX,s.f-=e.scrollY*t.scrollFactorY),o.multiply(s,n),l}},45027:(t,e,i)=>{var o=i(83419),s=i(25774),n=i(37277),r=i(44594),i=new o({Extends:s,initialize:function(t){s.call(this),this.checkQueue=!0,this.scene=t,this.systems=t.sys,t.sys.events.once(r.BOOT,this.boot,this),t.sys.events.on(r.START,this.start,this)},boot:function(){this.systems.events.once(r.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(r.PRE_UPDATE,this.update,this),t.on(r.UPDATE,this.sceneUpdate,this),t.once(r.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(t,e){for(var i=this._active,o=i.length,s=0;s<o;s++){var n=i[s];n.active&&n.preUpdate.call(n,t,e)}},shutdown:function(){for(var t=this._active.length;t--;)this._active[t].destroy(!0);for(t=this._pending.length;t--;)this._pending[t].destroy(!0);for(t=this._destroy.length;t--;)this._destroy[t].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var e=this.systems.events;e.off(r.PRE_UPDATE,this.update,this),e.off(r.UPDATE,this.sceneUpdate,this),e.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(r.START,this.start,this),this.scene=null,this.systems=null}});n.register("UpdateList",i,"updateList"),t.exports=i},3217:t=>{t.exports=function(t,e,i,o,s,n,r,a,h,l,c,u,d,p,f){var s=i.x-e.displayOriginX+s,n=i.y-e.displayOriginY+n,b=s+i.w,i=n+i.h,y=r.getXRound(s,n,a),m=r.getYRound(s,n,a),x=r.getXRound(s,i,a),s=r.getYRound(s,i,a),g=r.getXRound(b,i,a),i=r.getYRound(b,i,a),v=r.getXRound(b,n,a),r=r.getYRound(b,n,a);t.batchQuad(e,y,m,x,s,g,i,v,r,o.u0,o.v0,o.u1,o.v1,h,l,c,u,d,p,f)}},53048:t=>{t.exports=function(t,I,k,e){if(void 0===k&&(k=!1),void 0===e)return{local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0};var V,G,z,i=t.text,N=i.length,X=t.maxWidth,W=t.wordWrapCharCode,o=Number.MAX_VALUE,s=Number.MAX_VALUE,n=0,r=0,U=t.fontData.chars,a=t.fontData.lineHeight,Y=t.letterSpacing,j=t.lineSpacing,h=0,l=0,c=0,u=null,J=t._align,d=0,p=0,f=t.fontSize/t.fontData.size,b=f*t.scaleX,y=f*t.scaleY,m=null,x=0,g=[],v=Number.MAX_VALUE,_=0,H=0,w=0,S=[],q=[],A=null;if(0<X){for(B=0;B<N;B++)10!==(c=i.charCodeAt(B))?(u=U[c])&&(null!==m&&(z=u.kerning[x]),c===W?null!==A&&(S.push({word:A.word,i:A.i,x:A.x*b,y:A.y*y,w:A.w*b,h:A.h*y,cr:!1}),A=null):((A=null===A?{word:"",i:B,x:h,y:l,w:0,h:a,cr:!1}:A).word=A.word.concat(i[B]),A.w+=u.xOffset+u.xAdvance+(void 0!==z?z:0)),h+=u.xAdvance+Y,m=u,x=c):(null!==A&&(S.push({word:A.word,i:A.i,x:A.x*b,y:A.y*y,w:A.w*b,h:A.h*y,cr:!0}),A=null),h=0,l+=a+j,m=null);null!==A&&S.push({word:A.word,i:A.i,x:A.x*b,y:A.y*y,w:A.w*b,h:A.h*y,cr:!1}),m=null;for(var C,T=x=l=h=0,P=[],B=0;B<S.length;B++){var E=S[B],K=E.x,Z=E.x+E.w;C&&(T=K-(K-(C.x+C.w)+C.w),C=null),X<K-T||X<Z-T?(P.push(E.i-1),C=E.cr?(P.push(E.i+E.word.length),T=0,null):E):E.cr&&(P.push(E.i+E.word.length),T=0,C=null)}for(B=P.length-1;0<=B;B--)i=(V=i).substr(0,G=P[B])+"\n"+V.substr(G+1);N=(e.wrappedText=i).length,S=[],A=null}var M,Q,$,tt=0;for(B=0;B<N;B++)10!==(c=i.charCodeAt(B))?(u=U[c])&&(d=h,p=l,null!==m&&(d+=void 0!==(M=u.kerning[x])?M:0),d<o&&(o=d),p<s&&(s=p),n<(Q=d+u.xAdvance)&&(n=Q),r<($=p+a)&&(r=$),$=u.xOffset+u.xAdvance+(void 0!==M?M:0),c===W?null!==A&&(S.push({word:A.word,i:A.i,x:A.x*b,y:A.y*y,w:A.w*b,h:A.h*y}),A=null):((A=null===A?{word:"",i:tt,x:h,y:l,w:0,h:a}:A).word=A.word.concat(i[B]),A.w+=$),q.push({i:tt,idx:B,char:i[B],code:c,x:(u.xOffset+d)*f,y:(u.yOffset+l)*f,w:u.width*f,h:u.height*f,t:l*f,r:Q*f,b:a*f,line:H,glyph:u}),h+=u.xAdvance+Y+(void 0!==M?M:0),m=u,x=c,w=Q*f,tt++):(null!==A&&(S.push({word:A.word,i:A.i,x:A.x*b,y:A.y*y,w:A.w*b,h:A.h*y}),A=null),h=0,l+=a+j,m=null,_<(g[H]=w)&&(_=w),w<v&&(v=w),H++,w=0);if(null!==A&&S.push({word:A.word,i:A.i,x:A.x*b,y:A.y*y,w:A.w*b,h:A.h*y}),_<(g[H]=w)&&(_=w),w<v&&(v=w),0<J)for(var et=0;et<q.length;et++){var D,O=q[et];1===J?(D=(_-g[O.line])/2,O.x+=D,O.r+=D):2===J&&(D=_-g[O.line],O.x+=D,O.r+=D)}var R=e.local,L=e.global,F=e.lines;return R.x=o*f,R.y=s*f,R.width=n*f,R.height=r*f,L.x=t.x-t._displayOriginX+o*b,L.y=t.y-t._displayOriginY+s*y,L.width=n*b,L.height=r*y,F.shortest=v,F.longest=_,F.lengths=g,I&&(R.x=Math.ceil(R.x),R.y=Math.ceil(R.y),R.width=Math.ceil(R.width),R.height=Math.ceil(R.height),L.x=Math.ceil(L.x),L.y=Math.ceil(L.y),L.width=Math.ceil(L.width),L.height=Math.ceil(L.height),F.shortest=Math.ceil(v),F.longest=Math.ceil(_)),k&&(t._displayOriginX=t.originX*R.width,t._displayOriginY=t.originY*R.height,L.x=t.x-t._displayOriginX*t.scaleX,L.y=t.y-t._displayOriginY*t.scaleY,I)&&(L.x=Math.ceil(L.x),L.y=Math.ceil(L.y)),e.words=S,e.characters=q,e.lines.height=a,e.scale=f,e.scaleX=t.scaleX,e.scaleY=t.scaleY,e}},61327:(t,e,i)=>{var l=i(21859);t.exports=function(t,e,i,o,s,n,r){var a=t.sys.textures.get(i),h=a.get(o),s=t.sys.cache.xml.get(s);return!(!h||!s||(s=l(s,h,n,r,a),t.sys.cache.bitmapFont.add(e,{data:s,texture:i,frame:o,fromAtlas:!0}),0))}},6925:(t,e,i)=>{var S=i(35154);t.exports=function(t,e){var i=e.width,o=e.height,s=Math.floor(i/2),n=Math.floor(o/2),r=S(e,"chars","");if(""!==r){var a=S(e,"image",""),t=t.sys.textures.getFrame(a),h=t.cutX,l=t.cutY,c=t.source.width,u=t.source.height,d=S(e,"offset.x",0),t=S(e,"offset.y",0),p=S(e,"spacing.x",0),f=S(e,"spacing.y",0),b=S(e,"lineSpacing",0),y=S(e,"charsPerRow",null);null===y&&(y=c/i)>r.length&&(y=r.length);for(var m=d,x=t,g={retroFont:!0,font:a,size:i,lineHeight:o+b,chars:{}},v=0,_=0;_<r.length;_++){var w=r.charCodeAt(_);g.chars[w]={x:m,y:x,width:i,height:o,centerX:s,centerY:n,xOffset:0,yOffset:0,xAdvance:i,data:{},kerning:{},u0:(h+m)/c,v0:(l+x)/u,u1:(h+m+i)/c,v1:(l+x+o)/u},++v===y?(v=0,m=d,x+=o+f):m+=i+p}return{data:g,frame:null,texture:a}}}},21859:t=>{function R(t,e){return parseInt(t.getAttribute(e),10)}t.exports=function(t,e,i,o,s){void 0===i&&(i=0),void 0===o&&(o=0);var n,r,a=e.cutX,h=e.cutY,l=e.source.width,c=e.source.height,u=e.sourceIndex,d={},p=t.getElementsByTagName("info")[0],f=t.getElementsByTagName("common")[0],b=(d.font=p.getAttribute("face"),d.size=R(p,"size"),d.lineHeight=R(f,"lineHeight")+o,d.chars={},t.getElementsByTagName("char")),y=void 0!==e&&e.trimmed;y&&(n=e.height,r=e.width);for(var m=0;m<b.length;m++){var x=b[m],g=R(x,"id"),v=String.fromCharCode(g),_=R(x,"x"),w=R(x,"y"),S=R(x,"width"),A=R(x,"height"),C=(y&&(_<r&&(r=_),w<n)&&(n=w),y&&0!==n&&0!==r&&(_-=e.x,w-=e.y),(a+_)/l),T=(h+w)/c,P=(a+_+S)/l,B=(h+w+A)/c;d.chars[g]={x:_,y:w,width:S,height:A,centerX:Math.floor(S/2),centerY:Math.floor(A/2),xOffset:R(x,"xoffset"),yOffset:R(x,"yoffset"),xAdvance:R(x,"xadvance")+i,data:{},kerning:{},u0:C,v0:T,u1:P,v1:B},s&&0!==S&&0!==A&&(g=s.add(v,u,_,w,S,A))&&g.setUVs(S,A,C,T,P,B)}for(var E=t.getElementsByTagName("kerning"),m=0;m<E.length;m++){var M=E[m],D=R(M,"first"),O=R(M,"second"),M=R(M,"amount");d.chars[O].kerning[D]=M}return d}},196:(t,e,i)=>{var o=i(87662),i=i(79291)(!1,{Parse:i(6925)},o);t.exports=i},87662:t=>{t.exports={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:"ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",TEXT_SET7:"AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:"ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789"}},2638:(t,e,i)=>{var a=i(22186),o=i(83419),i=i(12310),o=new o({Extends:a,Mixins:[i],initialize:function(t,e,i,o,s,n,r){a.call(this,t,e,i,o,s,n,r),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(t,e){return this.cropWidth=t,this.cropHeight=e,this},setDisplayCallback:function(t){return this.displayCallback=t,this},setScrollX:function(t){return this.scrollX=t,this},setScrollY:function(t){return this.scrollY=t,this}});t.exports=o},86741:(t,e,i)=>{var V=i(20926);t.exports=function(t,e,i,o){var s=e._text,n=s.length,r=t.currentContext;if(0!==n&&V(t,r,e,i,o)){i.addToRenderList(e);var a,h,t=e.fromAtlas?e.frame:e.texture.frames.__BASE,l=e.displayCallback,c=e.callbackData,u=e.fontData.chars,d=e.fontData.lineHeight,p=e._letterSpacing,f=0,b=0,y=0,m=0,x=0,g=0,v=0,_=0,w=null,S=0,A=e.frame.source.image,C=t.cutX,T=t.cutY,P=0,B=0,I=e._fontSize/e.fontData.size,E=e._align,M=0,D=0,O=(e.getTextBounds(!1),e._bounds.lines),k=(1===E?D=(O.longest-O.lengths[0])/2:2===E&&(D=O.longest-O.lengths[0]),r.translate(-e.displayOriginX,-e.displayOriginY),i.roundPixels);0<e.cropWidth&&0<e.cropHeight&&(r.beginPath(),r.rect(0,0,e.cropWidth,e.cropHeight),r.clip());for(var R,L,F=0;F<n;F++)B=I,P=0,10!==(a=s.charCodeAt(F))?(h=u[a])&&(y=C+h.x,m=T+h.y,x=h.width,g=h.height,v=h.xOffset+f-e.scrollX,_=h.yOffset+b-e.scrollY,null!==w&&(v+=void 0!==(R=h.kerning[S])?R:0),l&&(c.index=F,c.charCode=a,c.x=v,c.y=_,c.scale=B,c.rotation=P,c.data=h.data,v=(L=l(c)).x,_=L.y,B=L.scale,P=L.rotation),_*=B,v=v*B+D,f+=h.xAdvance+p+(void 0!==R?R:0),w=h,S=a,0!==x)&&0!==g&&32!==a&&(k&&(v=Math.round(v),_=Math.round(_)),r.save(),r.translate(v,_),r.rotate(P),r.scale(B,B),r.drawImage(A,y,m,x,g,0,0,x,g),r.restore()):(M++,1===E?D=(O.longest-O.lengths[M])/2:2===E&&(D=O.longest-O.lengths[M]),f=0,b+=d,w=null);r.restore()}}},11164:(t,e,i)=>{var n=i(2638),r=i(25305),o=i(44603),a=i(23568);o.register("dynamicBitmapText",function(t,e){var i=a(t=void 0===t?{}:t,"font",""),o=a(t,"text",""),s=a(t,"size",!1),i=new n(this.scene,0,0,i,o,s);return void 0!==e&&(t.add=e),r(this.scene,i,t),i})},72566:(t,e,i)=>{var n=i(2638);i(39429).register("dynamicBitmapText",function(t,e,i,o,s){return this.displayList.add(new n(this.scene,t,e,i,o,s))})},12310:(t,e,i)=>{i(29747);var o=i(73482),i=i(86741);t.exports={renderWebGL:o,renderCanvas:i}},73482:(t,e,i)=>{var Q=i(91296),o=i(61340),$=i(70554),tt=new o;t.exports=function(t,e,i,o){var s=e.text,n=s.length;if(0!==n){i.addToRenderList(e);var r=t.pipelines.set(e.pipeline,e),o=Q(e,i,o),a=(t.pipelines.preBatch(e),o.sprite),h=o.calc,I=tt,o=0<e.cropWidth||0<e.cropHeight;o&&(r.flush(),t.pushScissor(h.tx,h.ty,e.cropWidth*h.scaleX,e.cropHeight*h.scaleY));var k,V=e.frame.glTexture,G=e.tintFill,l=$.getTintAppendFloatAlpha(e.tintTopLeft,i.alpha*e._alphaTL),c=$.getTintAppendFloatAlpha(e.tintTopRight,i.alpha*e._alphaTR),u=$.getTintAppendFloatAlpha(e.tintBottomLeft,i.alpha*e._alphaBL),d=$.getTintAppendFloatAlpha(e.tintBottomRight,i.alpha*e._alphaBR),z=r.setGameObject(e),N=0,X=0,W=0,U=e.letterSpacing,p=0,f=0,Y=e.scrollX,j=e.scrollY,b=e.fontData,J=b.chars,H=b.lineHeight,y=e.fontSize/b.size,m=0,x=e._align,q=0,g=0,b=e.getTextBounds(!1),v=(0<e.maxWidth&&(n=(s=b.wrappedText).length),e._bounds.lines);1===x?g=(v.longest-v.lengths[0])/2:2===x&&(g=v.longest-v.lengths[0]);for(var _,w,S,A,C,T,P,B,E,M,D,O,R,K=i.roundPixels,Z=e.displayCallback,L=e.callbackData,F=0;F<n;F++)10!==(w=s.charCodeAt(F))?(C=J[w])&&(p=C.width,f=C.height,S=C.xOffset+N-Y,A=C.yOffset+X-j,null!==k&&(S+=void 0!==(_=C.kerning[W])?_:0),N+=C.xAdvance+U,k=C,W=w,0!==p)&&0!==f&&32!==w&&(y=e.fontSize/e.fontData.size,m=0,Z&&(L.color=0,L.tint.topLeft=l,L.tint.topRight=c,L.tint.bottomLeft=u,L.tint.bottomRight=d,L.index=F,L.charCode=w,L.x=S,L.y=A,L.scale=y,L.rotation=m,L.data=C.data,S=(_=Z(L)).x,A=_.y,y=_.scale,m=_.rotation,d=_.color?(l=_.color,c=_.color,u=_.color,_.color):(l=_.tint.topLeft,c=_.tint.topRight,u=_.tint.bottomLeft,_.tint.bottomRight),l=$.getTintAppendFloatAlpha(l,i.alpha*e._alphaTL),c=$.getTintAppendFloatAlpha(c,i.alpha*e._alphaTR),u=$.getTintAppendFloatAlpha(u,i.alpha*e._alphaBL),d=$.getTintAppendFloatAlpha(d,i.alpha*e._alphaBR)),A*=y,S=(S*=y)-e.displayOriginX,A-=e.displayOriginY,S+=g,I.applyITRS(S,A,m,y,y),h.multiply(I,a),w=C.u0,S=C.v0,A=C.u1,C=C.v1,T=a.e,P=a.f,B=f*a.c+a.e,E=f*a.d+a.f,M=p*a.a+f*a.c+a.e,D=p*a.b+f*a.d+a.f,O=p*a.a+a.e,R=p*a.b+a.f,K&&(T=Math.round(T),P=Math.round(P),B=Math.round(B),E=Math.round(E),M=Math.round(M),D=Math.round(D),O=Math.round(O),R=Math.round(R)),r.shouldFlush(6)&&(r.flush(),z=r.setGameObject(e)),r.batchQuad(e,T,P,B,E,M,D,O,R,w,S,A,C,l,c,u,d,G,V,z)):(q++,1===x?g=(v.longest-v.lengths[q])/2:2===x&&(g=v.longest-v.lengths[q]),N=0,X+=H,k=null);o&&(r.flush(),t.popScissor()),t.pipelines.postBatch(e)}}},22186:(t,e,i)=>{var o=i(83419),p=i(45319),s=i(31401),a=i(95643),h=i(53048),n=i(61327),r=i(21859),l=i(87841),i=i(18658),c=new o({Extends:a,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.PostPipeline,s.ScrollFactor,s.Texture,s.Tint,s.Transform,s.Visible,i],initialize:function(t,e,i,o,s,n,r){void 0===s&&(s=""),void 0===r&&(r=0),a.call(this,t,"BitmapText"),this.font=o;t=this.scene.sys.cache.bitmapFont.get(o);this.fontData=t.data,this._text="",this._fontSize=n||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=r,this._bounds=h(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=t.fromAtlas,this.setTexture(t.texture,t.frame),this.setPosition(e,i),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(s)},setLeftAlign:function(){return this._align=c.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=c.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=c.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(t){return this._fontSize=t,this._dirty=!0,this},setLetterSpacing:function(t){return this._letterSpacing=t=void 0===t?0:t,this._dirty=!0,this},setLineSpacing:function(t){return this.lineSpacing=t=void 0===t?0:t,this},setText:function(t){return t||0===t||(t=""),(t=Array.isArray(t)?t.join("\n"):t)!==this.text&&(this._text=t.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(t,e,i,o){return void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=.5),this.dropShadowX=t=void 0===t?0:t,this.dropShadowY=e,this.dropShadowColor=i,this.dropShadowAlpha=o,this},setCharacterTint:function(t,e,i,o,s,n,r){void 0===i&&(i=!1),void 0===o&&(o=-1),void 0===s&&(r=n=s=o);var a=this.text.length;-1===(e=void 0===e?1:e)&&(e=a),t=p(t=(t=void 0===t?0:t)<0?a+t:t,0,a-1);for(var h=p(t+e,t,a),l=this.charColors,c=t;c<h;c++){var u,d=l[c];-1===o?l[c]=null:(u=i?1:0,d?(d.tintEffect=u,d.tintTL=o,d.tintTR=s,d.tintBL=n,d.tintBR=r):l[c]={tintEffect:u,tintTL:o,tintTR:s,tintBL:n,tintBR:r})}return this},setWordTint:function(t,e,i,o,s,n,r){void 0===e&&(e=1);for(var a=this.getTextBounds().words,h="number"==typeof t,l=0,c=0;c<a.length;c++){var u=a[c];if((h&&c===t||!h&&u.word===t)&&(this.setCharacterTint(u.i,u.word.length,i,o,s,n,r),++l===e))return this}return this},getTextBounds:function(t){var e=this._bounds;return(this._dirty||t||this.scaleX!==e.scaleX||this.scaleY!==e.scaleY)&&(h(this,t,!0,e),this._dirty=!1),e},getCharacterAt:function(t,e,i){for(var o=this.getLocalPoint(t,e,null,i),s=this.getTextBounds().characters,n=new l,r=0;r<s.length;r++){var a=s[r];if(n.setTo(a.x,a.t,a.r-a.x,a.b),n.contains(o.x,o.y))return a}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(t,e,i){void 0===e&&(e=this._fontSize),void 0===i&&(i=this._align);var o=this.scene.sys.cache.bitmapFont.get(t);return o&&(this.font=t,this.fontData=o.data,this._fontSize=e,this._align=i,this.fromAtlas=!0===o.fromAtlas,this.setTexture(o.texture,o.frame),h(this,!1,!0,this._bounds)),this},setMaxWidth:function(t,e){return this._maxWidth=t,this._dirty=!0,void 0!==e&&(this.wordWrapCharCode=e),this},align:{set:function(t){this._align=t,this._dirty=!0},get:function(){return this._align}},text:{set:function(t){this.setText(t)},get:function(){return this._text}},fontSize:{set:function(t){this._fontSize=t,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(t){this._letterSpacing=t,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(t){this._lineSpacing=t,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(t){this._maxWidth=t,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{get:function(){return this.width}},displayHeight:{get:function(){return this.height}},toJSON:function(){var t=s.ToJSON(this),e={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return t.data=e,t},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});c.ALIGN_LEFT=0,c.ALIGN_CENTER=1,c.ALIGN_RIGHT=2,c.ParseFromAtlas=n,c.ParseXMLBitmapFont=r,t.exports=c},37289:(t,e,i)=>{var L=i(20926);t.exports=function(t,e,i,o){var s=e._text,n=s.length,r=t.currentContext;if(0!==n&&L(t,r,e,i,o)){i.addToRenderList(e);var a,h,t=e.fromAtlas?e.frame:e.texture.frames.__BASE,l=e.fontData.chars,c=e.fontData.lineHeight,u=e._letterSpacing,d=e._lineSpacing,p=0,f=0,b=0,y=0,m=0,x=0,g=0,v=0,_=null,w=0,S=t.source.image,A=t.cutX,C=t.cutY,T=e._fontSize/e.fontData.size,P=e._align,B=0,E=0,o=e.getTextBounds(!1),M=(0<e.maxWidth&&(n=(s=o.wrappedText).length),e._bounds.lines);1===P?E=(M.longest-M.lengths[0])/2:2===P&&(E=M.longest-M.lengths[0]),r.translate(-e.displayOriginX,-e.displayOriginY);for(var D,O=i.roundPixels,R=0;R<n;R++)10!==(a=s.charCodeAt(R))?(h=l[a])&&(b=A+h.x,y=C+h.y,m=h.width,x=h.height,g=h.xOffset+p,v=h.yOffset+f,null!==_&&(g+=void 0!==(D=h.kerning[w])?D:0),v*=T,g=g*T+E,p+=h.xAdvance+u+(void 0!==D?D:0),_=h,w=a,0!==m)&&0!==x&&32!==a&&(O&&(g=Math.round(g),v=Math.round(v)),r.save(),r.translate(g,v),r.scale(T,T),r.drawImage(S,b,y,m,x,0,0,m,x),r.restore()):(B++,1===P?E=(M.longest-M.lengths[B])/2:2===P&&(E=M.longest-M.lengths[B]),p=0,f+=c+d,_=null);r.restore()}}},57336:(t,e,i)=>{var r=i(22186),a=i(25305),o=i(44603),h=i(23568),l=i(35154);o.register("bitmapText",function(t,e){var i=l(t=void 0===t?{}:t,"font",""),o=h(t,"text",""),s=h(t,"size",!1),n=l(t,"align",0),i=new r(this.scene,0,0,i,o,s,n);return void 0!==e&&(t.add=e),a(this.scene,i,t),i})},34914:(t,e,i)=>{var r=i(22186);i(39429).register("bitmapText",function(t,e,i,o,s,n){return this.displayList.add(new r(this.scene,t,e,i,o,s,n))})},18658:(t,e,i)=>{i(29747);var o=i(33590),i=i(37289);t.exports={renderWebGL:o,renderCanvas:i}},33590:(t,e,i)=>{var O=i(3217),R=i(91296),L=i(70554);t.exports=function(t,e,i,o){if(0!==e._text.length){i.addToRenderList(e);var s=t.pipelines.set(e.pipeline,e),n=R(e,i,o).calc;t.pipelines.preBatch(e);var r,a=i.roundPixels,h=i.alpha,l=e.charColors,c=e.tintFill,u=L.getTintAppendFloatAlpha,d=u(e.tintTopLeft,h*e._alphaTL),p=u(e.tintTopRight,h*e._alphaTR),f=u(e.tintBottomLeft,h*e._alphaBL),b=u(e.tintBottomRight,h*e._alphaBR),y=e.frame.glTexture,m=s.setGameObject(e),x=e.getTextBounds(!1).characters,g=e.dropShadowX,v=e.dropShadowY;if(0!==g||0!==v)for(var o=e.dropShadowColor,i=e.dropShadowAlpha,_=u(o,h*i*e._alphaTL),w=u(o,h*i*e._alphaTR),S=u(o,h*i*e._alphaBL),A=u(o,h*i*e._alphaBR),C=0;C<x.length;C++)D=(r=x[C]).glyph,32!==r.code&&0!==D.width&&0!==D.height&&O(s,e,r,D,g,v,n,a,_,w,S,A,1,y,m);for(C=0;C<x.length;C++){var T,P,B,E,M,D=(r=x[C]).glyph;32!==r.code&&0!==D.width&&0!==D.height&&(s.shouldFlush(6)&&(s.flush(),m=s.setGameObject(e)),l[r.i]?(T=(M=l[r.i]).tintEffect,P=u(M.tintTL,h*e._alphaTL),B=u(M.tintTR,h*e._alphaTR),E=u(M.tintBL,h*e._alphaBL),M=u(M.tintBR,h*e._alphaBR),O(s,e,r,D,0,0,n,a,P,B,E,M,T,y,m)):O(s,e,r,D,0,0,n,a,d,p,f,b,c,y,m))}t.pipelines.postBatch(e)}}},6107:(t,e,i)=>{var o=i(48011),n=i(46590),s=i(83419),r=i(31401),a=i(4327),h=i(95643),l=i(73162),i=new s({Extends:h,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Mask,r.Pipeline,r.PostPipeline,r.ScrollFactor,r.Size,r.Texture,r.Transform,r.Visible,o],initialize:function(t,e,i,o,s){h.call(this,t,"Blitter"),this.setTexture(o,s),this.setPosition(e,i),this.initPipeline(),this.initPostPipeline(),this.children=new l,this.renderList=[],this.dirty=!1},create:function(t,e,i,o,s){void 0===o&&(o=!0),void 0===s&&(s=this.children.length),void 0===i?i=this.frame:i instanceof a||(i=this.texture.get(i));t=new n(this,t,e,i,o);return this.children.addAt(t,s,!1),this.dirty=!0,t},createFromCallback:function(t,e,i,o){for(var s=this.createMultiple(e,i,o),n=0;n<s.length;n++){var r=s[n];t.call(this,r,n)}return s},createMultiple:function(i,t,o){void 0===t&&(t=this.frame.name),void 0===o&&(o=!0),Array.isArray(t)||(t=[t]);var s=[],n=this;return t.forEach(function(t){for(var e=0;e<i;e++)s.push(n.create(0,0,t,o))}),s},childCanRender:function(t){return t.visible&&0<t.alpha},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});t.exports=i},72396:t=>{t.exports=function(t,e,i,o){var s=e.getRenderList();if(0!==s.length){var n=t.currentContext,r=i.alpha*e.alpha;if(0!=r){i.addToRenderList(e),n.globalCompositeOperation=t.blendModes[e.blendMode],n.imageSmoothingEnabled=!e.frame.source.scaleMode;var a=e.x-i.scrollX*e.scrollFactorX,h=e.y-i.scrollY*e.scrollFactorY;n.save(),o&&o.copyToContext(n);for(var l=i.roundPixels,c=0;c<s.length;c++){var u=s[c],d=u.flipX||u.flipY,p=u.frame,f=p.canvasData,b=p.x,y=p.y,m=1,x=1,g=u.alpha*r;0!=g&&(n.globalAlpha=g,d?(u.flipX&&(m=-1,b-=f.width),u.flipY&&(x=-1,y-=f.height),0<f.width&&0<f.height&&(n.save(),n.translate(u.x+a,u.y+h),n.scale(m,x),n.drawImage(p.source.image,f.x,f.y,f.width,f.height,b,y,f.width,f.height),n.restore())):(l&&(b=Math.round(b),y=Math.round(y)),0<f.width&&0<f.height&&n.drawImage(p.source.image,f.x,f.y,f.width,f.height,b+u.x+a,y+u.y+h,f.width,f.height)))}n.restore()}}}},9403:(t,e,i)=>{var s=i(6107),n=i(25305),o=i(44603),r=i(23568);o.register("blitter",function(t,e){var i=r(t=void 0===t?{}:t,"key",null),o=r(t,"frame",null),i=new s(this.scene,0,0,i,o);return void 0!==e&&(t.add=e),n(this.scene,i,t),i})},12709:(t,e,i)=>{var s=i(6107);i(39429).register("blitter",function(t,e,i,o){return this.displayList.add(new s(this.scene,t,e,i,o))})},48011:(t,e,i)=>{i(29747);var o=i(99485),i=i(72396);t.exports={renderWebGL:o,renderCanvas:i}},99485:(t,e,i)=>{var o=i(61340),w=i(70554),S=new o;t.exports=function(t,e,i,o){var s=e.getRenderList(),n=i.alpha*e.alpha;if(0!==s.length&&0!=n){i.addToRenderList(e);var r=t.pipelines.set(this.pipeline,e),a=i.scrollX*e.scrollFactorX,h=i.scrollY*e.scrollFactorY,l=S.copyFrom(i.matrix),c=(o&&(l.multiplyWithOffset(o,-a,-h),h=a=0),e.x-a),u=e.y-h,d=-1;t.pipelines.preBatch(e);for(var p=0;p<s.length;p++){var f,b,y,m,x,g=s[p],v=g.frame,_=g.alpha*n;0!=_&&(m=v.width,f=v.height,y=c+g.x+v.x,b=u+g.y+v.y,g.flipX&&(m*=-1,y+=v.width),g.flipY&&(f*=-1,b+=v.height),y=l.setQuad(y,b,y+m,b+f),m=w.getTintAppendFloatAlpha(g.tint,_),v.sourceIndex!==d&&(x=r.setGameObject(e,v),d=v.sourceIndex),r.batchQuad(e,y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7],v.u0,v.v0,v.u1,v.v1,m,m,m,m,!1,v.glTexture,x))&&(d=-1)}t.pipelines.postBatch(e)}}},46590:(t,e,i)=>{var o=i(83419),s=i(4327),i=new o({initialize:function(t,e,i,o,s){this.parent=t,this.x=e,this.y=i,this.frame=o,this.data={},this.tint=16777215,this._visible=s,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(t){return void 0===t?this.frame=this.parent.frame:t instanceof s&&t.texture===this.parent.texture?this.frame=t:this.frame=this.parent.texture.get(t),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(t,e,i){return this.x=t,this.y=e,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,i&&this.setFrame(i),this},setPosition:function(t,e){return this.x=t,this.y=e,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,e){return this.flipX=t,this.flipY=e,this},setVisible:function(t){return this.visible=t,this},setAlpha:function(t){return this.alpha=t,this},setTint:function(t){return this.tint=t,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(t){this.parent.dirty|=this._visible!==t,this._visible=t}},alpha:{get:function(){return this._alpha},set:function(t){this.parent.dirty|=0<this._alpha!=0<t,this._alpha=t}}});t.exports=i},16005:(t,e,i)=>{var s=i(45319);t.exports={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t,e,i,o){return void 0===t&&(t=1),void 0===e?this.alpha=t:(this._alphaTL=s(t,0,1),this._alphaTR=s(e,0,1),this._alphaBL=s(i,0,1),this._alphaBR=s(o,0,1)),this},alpha:{get:function(){return this._alpha},set:function(t){t=s(t,0,1);this._alpha=t,this._alphaTL=t,this._alphaTR=t,this._alphaBL=t,0===(this._alphaBR=t)?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(t){t=s(t,0,1);0!==(this._alphaTL=t)&&(this.renderFlags|=2)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(t){t=s(t,0,1);0!==(this._alphaTR=t)&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(t){t=s(t,0,1);0!==(this._alphaBL=t)&&(this.renderFlags|=2)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(t){t=s(t,0,1);0!==(this._alphaBR=t)&&(this.renderFlags|=2)}}}},88509:(t,e,i)=>{var o=i(45319);t.exports={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t){return this.alpha=t=void 0===t?1:t,this},alpha:{get:function(){return this._alpha},set:function(t){t=o(t,0,1);0===(this._alpha=t)?this.renderFlags&=-3:this.renderFlags|=2}}}},90065:(t,e,i)=>{var o=i(10312),i={_blendMode:o.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(t){"string"==typeof t&&(t=o[t]),-1<=(t|=0)&&(this._blendMode=t)}},setBlendMode:function(t){return this.blendMode=t,this}};t.exports=i},94215:t=>{t.exports={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this}}},61683:t=>{t.exports={texture:null,frame:null,isCropped:!1,setCrop:function(t,e,i,o){return void 0===t?this.isCropped=!1:this.frame&&("number"==typeof t?this.frame.setCropUVs(this._crop,t,e,i,o,this.flipX,this.flipY):this.frame.setCropUVs(this._crop,t.x,t.y,t.width,t.height,this.flipX,this.flipY),this.isCropped=!0),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},89272:t=>{t.exports={_depth:0,depth:{get:function(){return this._depth},set:function(t){this.displayList&&this.displayList.queueDepthSort(),this._depth=t}},setDepth:function(t){return this.depth=t=void 0===t?0:t,this}}},47059:(t,e,i)=>{var o=i(83419),h=i(66064),n=i(19133),i=new o({initialize:function(t,e){this.gameObject=t,this.isPost=e,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(t){return this.padding=t=void 0===t?0:t,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(t){var e;this.isPost||((e=this.gameObject.scene.sys.renderer)&&e.pipelines?(this.gameObject.pipeline=e.pipelines.FX_PIPELINE,void 0!==t&&(this.padding=t),this.enabled=!0):this.enabled=!1)},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var t=this.list,e=0;e<t.length;e++)t[e].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(t){if(this.isPost){var e=this.gameObject.getPostPipeline(String(t.type));for(Array.isArray(e)||(e=[e]),s=0;s<e.length;s++){var i=e[s];if(i.controller===t){this.gameObject.removePostPipeline(i),t.destroy();break}}}else for(var o=this.list,s=0;s<o.length;s++)o[s]===t&&(n(o,s),t.destroy());return this.gameObject},disable:function(t){return void 0===t&&(t=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,t&&this.clear(),this.gameObject},add:function(t,e){var i;return this.isPost?(i=String(t.type),this.gameObject.setPostPipeline(i,e),(e=this.gameObject.getPostPipeline(i))?(e=Array.isArray(e)?e.pop():e).controller=t:void 0):(this.enabled||this.enable(),this.list.push(t),t)},addGlow:function(t,e,i,o,s,n){return this.add(new h.Glow(this.gameObject,t,e,i,o),{quality:s,distance:n})},addShadow:function(t,e,i,o,s,n,r){return this.add(new h.Shadow(this.gameObject,t,e,i,o,s,n,r))},addPixelate:function(t){return this.add(new h.Pixelate(this.gameObject,t))},addVignette:function(t,e,i,o){return this.add(new h.Vignette(this.gameObject,t,e,i,o))},addShine:function(t,e,i,o){return this.add(new h.Shine(this.gameObject,t,e,i,o))},addBlur:function(t,e,i,o,s,n){return this.add(new h.Blur(this.gameObject,t,e,i,o,s,n))},addGradient:function(t,e,i,o,s,n,r,a){return this.add(new h.Gradient(this.gameObject,t,e,i,o,s,n,r,a))},addBloom:function(t,e,i,o,s,n){return this.add(new h.Bloom(this.gameObject,t,e,i,o,s,n))},addColorMatrix:function(){return this.add(new h.ColorMatrix(this.gameObject))},addCircle:function(t,e,i,o,s){return this.add(new h.Circle(this.gameObject,t,e,i,o,s))},addBarrel:function(t){return this.add(new h.Barrel(this.gameObject,t))},addDisplacement:function(t,e,i){return this.add(new h.Displacement(this.gameObject,t,e,i))},addWipe:function(t,e,i){return this.add(new h.Wipe(this.gameObject,t,e,i))},addReveal:function(t,e,i){return this.add(new h.Wipe(this.gameObject,t,e,i,!0))},addBokeh:function(t,e,i){return this.add(new h.Bokeh(this.gameObject,t,e,i))},addTiltShift:function(t,e,i,o,s,n){return this.add(new h.Bokeh(this.gameObject,t,e,i,!0,o,s,n))},destroy:function(){this.clear(),this.gameObject=null}});t.exports=i},54434:t=>{t.exports={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,e){return this.flipX=t,this.flipY=e,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}}},8004:(t,e,i)=>{var l=i(87841),o=i(11520),s=i(26099);t.exports={prepareBoundsOutput:function(t,e){return void 0===e&&(e=!1),0!==this.rotation&&o(t,this.x,this.y,this.rotation),e&&this.parentContainer&&this.parentContainer.getBoundsTransformMatrix().transformPoint(t.x,t.y,t),t},getCenter:function(t,e){return(t=void 0===t?new s:t).x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getTopLeft:function(t,e){return(t=t||new s).x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getTopCenter:function(t,e){return(t=t||new s).x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getTopRight:function(t,e){return(t=t||new s).x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getLeftCenter:function(t,e){return(t=t||new s).x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getRightCenter:function(t,e){return(t=t||new s).x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getBottomLeft:function(t,e){return(t=t||new s).x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBottomCenter:function(t,e){return(t=t||new s).x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBottomRight:function(t,e){return(t=t||new s).x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBounds:function(t){var e,i,o,s,n,r,a,h;return void 0===t&&(t=new l),a=(h=(this.parentContainer?(h=this.parentContainer.getBoundsTransformMatrix(),this.getTopLeft(t),h.transformPoint(t.x,t.y,t),e=t.x,i=t.y,this.getTopRight(t),h.transformPoint(t.x,t.y,t),o=t.x,s=t.y,this.getBottomLeft(t),h.transformPoint(t.x,t.y,t),n=t.x,r=t.y,this.getBottomRight(t),h.transformPoint(t.x,t.y,t)):(this.getTopLeft(t),e=t.x,i=t.y,this.getTopRight(t),o=t.x,s=t.y,this.getBottomLeft(t),n=t.x,r=t.y,this.getBottomRight(t)),t.x),t.y),t.x=Math.min(e,o,n,h),t.y=Math.min(i,s,r,a),t.width=Math.max(e,o,n,h)-t.x,t.height=Math.max(i,s,r,a)-t.y,t}}},8573:(t,e,i)=>{var n=i(6858),o=i(80661);t.exports={mask:null,setMask:function(t){return this.mask=t,this},clearMask:function(t){return(t=void 0===t?!1:t)&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(t,e,i,o,s){return void 0===t&&(this.texture||this.shader||this.geom)&&(t=this),new n(this.scene,t,e,i,o,s)},createGeometryMask:function(t){return void 0!==t||"Graphics"!==this.type&&!this.geom||(t=this),new o(this.scene,t)}}},27387:t=>{t.exports={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(t){this._displayOriginX=t,this.originX=t/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(t){this._displayOriginY=t,this.originY=t/this.height}},setOrigin:function(t,e){return void 0===t&&(t=.5),void 0===e&&(e=t),this.originX=t,this.originY=e,this.updateDisplayOrigin()},setOriginFromFrame:function(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.displayOriginX=t,this.displayOriginY=e,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}}},37640:(t,e,i)=>{var s=i(39506),n=i(57355),r=i(35154),a=i(86353),h=i(26099),i={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:a.PLAYING_FORWARD,setPath:function(t,e){void 0===e&&(e=this.pathConfig);var i=this.pathTween;return i&&i.isPlaying()&&i.stop(),this.path=t,e&&this.startFollow(e),this},setRotateToPath:function(t,e){return void 0===e&&(e=0),this.rotateToPath=t,this.pathRotationOffset=e,this},isFollowing:function(){var t=this.pathTween;return t&&t.isPlaying()},startFollow:function(t,e){void 0===t&&(t={}),void 0===e&&(e=0);var i=this.pathTween,i=(i&&i.isPlaying()&&i.stop(),(t="number"==typeof t?{duration:t}:t).from=r(t,"from",0),t.to=r(t,"to",1),n(t,"positionOnPath",!1)),o=(this.rotateToPath=n(t,"rotateToPath",!1),this.pathRotationOffset=r(t,"rotationOffset",0),r(t,"startAt",e));return o&&(t.onStart=function(t){var t=t.data[0],e=(t.progress=o,t.elapsed=t.duration*o,t.ease(t.progress));t.current=t.start+(t.end-t.start)*e,t.setTargetValue()}),this.pathOffset||(this.pathOffset=new h(this.x,this.y)),this.pathVector||(this.pathVector=new h),this.pathDelta||(this.pathDelta=new h),this.pathDelta.reset(),t.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(t),this.path.getStartPoint(this.pathOffset),i&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=a.PLAYING_FORWARD,this.rotateToPath&&(e=this.path.getPoint(.1),this.rotation=Math.atan2(e.y-this.y,e.x-this.x)+s(this.pathRotationOffset)),this.pathConfig=t,this},pauseFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.pause(),this},resumeFollow:function(){var t=this.pathTween;return t&&t.isPaused()&&t.resume(),this},stopFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.stop(),this},pathUpdate:function(){var t,e,i,o=this.pathTween;o&&o.data&&(t=o.data[0],e=this.pathDelta,i=this.pathVector,e.copy(i).negate(),t.state===a.COMPLETE?(this.path.getPoint(t.end,i),e.add(i),i.add(this.pathOffset),this.setPosition(i.x,i.y)):t.state!==a.PLAYING_FORWARD&&t.state!==a.PLAYING_BACKWARD||(this.path.getPoint(o.getValue(),i),e.add(i),i.add(this.pathOffset),o=this.x,e=this.y,this.setPosition(i.x,i.y),i=this.x-o,o=this.y-e,0==i&&0==o)||(t.state!==this._prevDirection?this._prevDirection=t.state:this.rotateToPath&&(this.rotation=Math.atan2(o,i)+s(this.pathRotationOffset))))}};t.exports=i},72699:(t,e,i)=>{var s=i(62644);t.exports={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(t){this.pipelineData={};var e=this.scene.sys.renderer;if(e){e=e.pipelines;if(e){void 0===t&&(t=e.default);e=e.get(t);if(e)return this.defaultPipeline=e,this.pipeline=e,!0}}return!1},setPipeline:function(t,e,i){var o=this.scene.sys.renderer;return o&&(o=o.pipelines)&&((o=o.get(t))&&(this.pipeline=o),e)&&(this.pipelineData=i?s(e):e),this},setPipelineData:function(t,e){var i=this.pipelineData;return void 0===e?delete i[t]:i[t]=e,this},resetPipeline:function(t){return void 0===t&&(t=!1),this.pipeline=this.defaultPipeline,t&&(this.pipelineData={}),null!==this.pipeline},getPipelineName:function(){return this.pipeline.name}}},17581:(t,e,i)=>{var a=i(62644),o=i(47059),n=i(19133);t.exports={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(t){this.postPipelines=[],this.postPipelineData={},this.postFX=new o(this,!0),t&&(this.preFX=new o(this,!1))},setPostPipeline:function(t,e,i){var o=this.scene.sys.renderer;if(o){var s=o.pipelines;if(s){Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var r=s.getPostPipeline(t[n],this,e);r&&this.postPipelines.push(r)}e&&(this.postPipelineData=i?a(e):e)}this.hasPostPipeline=0<this.postPipelines.length}return this},setPostPipelineData:function(t,e){var i=this.postPipelineData;return void 0===e?delete i[t]:i[t]=e,this},getPostPipeline:function(t){for(var e="string"==typeof t,i=this.postPipelines,o=[],s=0;s<i.length;s++){var n=i[s];(e&&n.name===t||!e&&n instanceof t)&&o.push(n)}return 1===o.length?o[0]:o},resetPostPipeline:function(t){void 0===t&&(t=!1);for(var e=this.postPipelines,i=0;i<e.length;i++)e[i].destroy();this.postPipelines=[],this.hasPostPipeline=!1,t&&(this.postPipelineData={})},removePostPipeline:function(t){for(var e="string"==typeof t,i=this.postPipelines,o=i.length-1;0<=o;o--){var s=i[o];(e&&s.name===t||!e&&s===t)&&(s.destroy(),n(i,o))}return this.hasPostPipeline=0<this.postPipelines.length,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}}},80227:t=>{t.exports={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(t,e){return void 0===e&&(e=t),this.scrollFactorX=t,this.scrollFactorY=e,this}}},16736:t=>{t.exports={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function(t){t=t||this.frame,this.width=t.realWidth,this.height=t.realHeight;t=this.input;return t&&!t.customHitArea&&(t.hitArea.width=this.width,t.hitArea.height=this.height),this},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this}}},37726:(t,e,i)=>{var o=i(4327);t.exports={texture:null,frame:null,isCropped:!1,setTexture:function(t,e,i,o){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e,i,o)},setFrame:function(t,e,i){return void 0===e&&(e=!0),void 0===i&&(i=!0),t instanceof o?(this.texture=this.scene.sys.textures.get(t.texture.key),this.frame=t):this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&e&&this.setSizeToFrame(),this._originComponent&&i&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}}},79812:(t,e,i)=>{var o=i(4327);t.exports={texture:null,frame:null,isCropped:!1,setCrop:function(t,e,i,o){return void 0===t?this.isCropped=!1:this.frame&&("number"==typeof t?this.frame.setCropUVs(this._crop,t,e,i,o,this.flipX,this.flipY):this.frame.setCropUVs(this._crop,t.x,t.y,t.width,t.height,this.flipX,this.flipY),this.isCropped=!0),this},setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t,e,i){return void 0===e&&(e=!0),void 0===i&&(i=!0),t instanceof o?(this.texture=this.scene.sys.textures.get(t.texture.key),this.frame=t):this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&e&&this.setSizeToFrame(),this._originComponent&&i&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},27472:t=>{t.exports={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(t,e,i,o){return void 0===t&&(t=16777215),void 0===e&&(o=i=e=t),this.tintTopLeft=t,this.tintTopRight=e,this.tintBottomLeft=i,this.tintBottomRight=o,this.tintFill=!1,this},setTintFill:function(t,e,i,o){return this.setTint(t,e,i,o),this.tintFill=!0,this},tint:{get:function(){return this.tintTopLeft},set:function(t){this.setTint(t,t,t,t)}},isTinted:{get:function(){var t=16777215;return this.tintFill||this.tintTopLeft!==t||this.tintTopRight!==t||this.tintBottomLeft!==t||this.tintBottomRight!==t}}}},53774:t=>{t.exports=function(t){var e={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(e.textureKey=t.texture.key,e.frameKey=t.frame.name),e}},16901:(t,e,i)=>{var o=i(36383),s=i(61340),n=i(85955),r=i(86554),a=i(30954),h=i(26099);t.exports={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(t){this._scaleX=t,0===(this._scaleY=t)?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function(){return this._scaleX},set:function(t){0===(this._scaleX=t)?this.renderFlags&=-5:0!==this._scaleY&&(this.renderFlags|=4)}},scaleY:{get:function(){return this._scaleY},set:function(t){0===(this._scaleY=t)?this.renderFlags&=-5:0!==this._scaleX&&(this.renderFlags|=4)}},angle:{get:function(){return a(this._rotation*o.RAD_TO_DEG)},set:function(t){this.rotation=a(t)*o.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=r(t)}},setPosition:function(t,e,i,o){return void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=0),void 0===o&&(o=0),this.x=t,this.y=e,this.z=i,this.w=o,this},copyPosition:function(t){return void 0!==t.x&&(this.x=t.x),void 0!==t.y&&(this.y=t.y),void 0!==t.z&&(this.z=t.z),void 0!==t.w&&(this.w=t.w),this},setRandomPosition:function(t,e,i,o){return void 0===e&&(e=0),void 0===i&&(i=this.scene.sys.scale.width),void 0===o&&(o=this.scene.sys.scale.height),this.x=(t=void 0===t?0:t)+Math.random()*i,this.y=e+Math.random()*o,this},setRotation:function(t){return this.rotation=t=void 0===t?0:t,this},setAngle:function(t){return this.angle=t=void 0===t?0:t,this},setScale:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),this.scaleX=t,this.scaleY=e,this},setX:function(t){return this.x=t=void 0===t?0:t,this},setY:function(t){return this.y=t=void 0===t?0:t,this},setZ:function(t){return this.z=t=void 0===t?0:t,this},setW:function(t){return this.w=t=void 0===t?0:t,this},getLocalTransformMatrix:function(t){return(t=void 0===t?new s:t).applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(t,e){void 0===t&&(t=new s);var i=this.parentContainer;if(!i)return this.getLocalTransformMatrix(t);for(e=e||new s,t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);i;)e.applyITRS(i.x,i.y,i._rotation,i._scaleX,i._scaleY),e.multiply(t,t),i=i.parentContainer;return t},getLocalPoint:function(t,e,i,o){i=i||new h;var s=(o=o||this.scene.sys.cameras.main).scrollX,o=o.scrollY,t=t+s*this.scrollFactorX-s,s=e+o*this.scrollFactorY-o;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(t,s,i):n(t,s,this.x,this.y,this.rotation,this.scaleX,this.scaleY,i),this._originComponent&&(i.x+=this._displayOriginX,i.y+=this._displayOriginY),i},getParentRotation:function(){for(var t=0,e=this.parentContainer;e;)t+=e.rotation,e=e.parentContainer;return t}}},61340:(t,e,i)=>{var o=i(83419),s=i(36383),c=i(26099),i=new o({initialize:function(t,e,i,o,s,n){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=1),void 0===s&&(s=0),void 0===n&&(n=0),this.matrix=new Float32Array([t,e,i,o,s,n,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(t){this.matrix[0]=t}},b:{get:function(){return this.matrix[1]},set:function(t){this.matrix[1]=t}},c:{get:function(){return this.matrix[2]},set:function(t){this.matrix[2]=t}},d:{get:function(){return this.matrix[3]},set:function(t){this.matrix[3]=t}},e:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},f:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},tx:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},ty:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var t=this.matrix,e=t[0],i=t[1],o=t[2],t=t[3];return e||i?0<i?Math.acos(e/this.scaleX):-Math.acos(e/this.scaleX):o||t?s.TAU-(0<t?Math.acos(-o/this.scaleY):-Math.acos(o/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var t=this.matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,this},translate:function(t,e){var i=this.matrix;return i[4]=i[0]*t+i[2]*e+i[4],i[5]=i[1]*t+i[3]*e+i[5],this},scale:function(t,e){var i=this.matrix;return i[0]*=t,i[1]*=t,i[2]*=e,i[3]*=e,this},rotate:function(t){var e=Math.sin(t),t=Math.cos(t),i=this.matrix,o=i[0],s=i[1],n=i[2],r=i[3];return i[0]=o*t+n*e,i[1]=s*t+r*e,i[2]=o*-e+n*t,i[3]=s*-e+r*t,this},multiply:function(t,e){var i=this.matrix,t=t.matrix,o=i[0],s=i[1],n=i[2],r=i[3],a=i[4],h=i[5],l=t[0],c=t[1],u=t[2],d=t[3],p=t[4],t=t[5],i=void 0===e?i:e.matrix;return i[0]=l*o+c*n,i[1]=l*s+c*r,i[2]=u*o+d*n,i[3]=u*s+d*r,i[4]=p*o+t*n+a,i[5]=p*s+t*r+h,i},multiplyWithOffset:function(t,e,i){var o=this.matrix,t=t.matrix,s=o[0],n=o[1],r=o[2],a=o[3],h=e*s+i*r+o[4],e=e*n+i*a+o[5],i=t[0],l=t[1],c=t[2],u=t[3],d=t[4],t=t[5];return o[0]=i*s+l*r,o[1]=i*n+l*a,o[2]=c*s+u*r,o[3]=c*n+u*a,o[4]=d*s+t*r+h,o[5]=d*n+t*a+e,this},transform:function(t,e,i,o,s,n){var r=this.matrix,a=r[0],h=r[1],l=r[2],c=r[3],u=r[4],d=r[5];return r[0]=t*a+e*l,r[1]=t*h+e*c,r[2]=i*a+o*l,r[3]=i*h+o*c,r[4]=s*a+n*l+u,r[5]=s*h+n*c+d,this},transformPoint:function(t,e,i){var o=this.matrix,s=o[0],n=o[1],r=o[2],a=o[3],h=o[4],o=o[5];return(i=void 0===i?{x:0,y:0}:i).x=t*s+e*r+h,i.y=t*n+e*a+o,i},invert:function(){var t=this.matrix,e=t[0],i=t[1],o=t[2],s=t[3],n=t[4],r=t[5],a=e*s-i*o;return t[0]=s/a,t[1]=-i/a,t[2]=-o/a,t[3]=e/a,t[4]=(o*r-s*n)/a,t[5]=-(e*r-i*n)/a,this},copyFrom:function(t){var e=this.matrix;return e[0]=t.a,e[1]=t.b,e[2]=t.c,e[3]=t.d,e[4]=t.e,e[5]=t.f,this},copyFromArray:function(t){var e=this.matrix;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this},copyToContext:function(t){var e=this.matrix;return t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t},setToContext:function(t){return t.setTransform(this),t},copyToArray:function(t){var e=this.matrix;return void 0===t?t=[e[0],e[1],e[2],e[3],e[4],e[5]]:(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5]),t},setTransform:function(t,e,i,o,s,n){var r=this.matrix;return r[0]=t,r[1]=e,r[2]=i,r[3]=o,r[4]=s,r[5]=n,this},decomposeMatrix:function(){var t=this.decomposedMatrix,e=this.matrix,i=e[0],o=e[1],s=e[2],n=e[3],r=i*n-o*s;return t.translateX=e[4],t.translateY=e[5],i||o?(e=Math.sqrt(i*i+o*o),t.rotation=0<o?Math.acos(i/e):-Math.acos(i/e),t.scaleX=e,t.scaleY=r/e):s||n?(o=Math.sqrt(s*s+n*n),t.rotation=.5*Math.PI-(0<n?Math.acos(-s/o):-Math.acos(s/o)),t.scaleX=r/o,t.scaleY=o):(t.rotation=0,t.scaleX=0,t.scaleY=0),t},applyITRS:function(t,e,i,o,s){var n=this.matrix,r=Math.sin(i),i=Math.cos(i);return n[4]=t,n[5]=e,n[0]=i*o,n[1]=r*o,n[2]=-r*s,n[3]=i*s,this},applyInverse:function(t,e,i){void 0===i&&(i=new c);var o=this.matrix,s=o[0],n=o[1],r=o[2],a=o[3],h=o[4],o=o[5],l=1/(s*a+r*-n);return i.x=a*l*t+-r*l*e+(o*r-h*a)*l,i.y=s*l*e+-n*l*t+(-o*s+h*n)*l,i},setQuad:function(t,e,i,o,s,n){void 0===n&&(n=this.quad);var r=this.matrix,a=r[0],h=r[1],l=r[2],c=r[3],u=r[4],r=r[5];return(s=void 0===s?!1:s)?(n[0]=Math.round(t*a+e*l+u),n[1]=Math.round(t*h+e*c+r),n[2]=Math.round(t*a+o*l+u),n[3]=Math.round(t*h+o*c+r),n[4]=Math.round(i*a+o*l+u),n[5]=Math.round(i*h+o*c+r),n[6]=Math.round(i*a+e*l+u),n[7]=Math.round(i*h+e*c+r)):(n[0]=t*a+e*l+u,n[1]=t*h+e*c+r,n[2]=t*a+o*l+u,n[3]=t*h+o*c+r,n[4]=i*a+o*l+u,n[5]=i*h+o*c+r,n[6]=i*a+e*l+u,n[7]=i*h+e*c+r),n},getX:function(t,e){return t*this.a+e*this.c+this.e},getY:function(t,e){return t*this.b+e*this.d+this.f},getXRound:function(t,e,i){t=this.getX(t,e);return t=i?Math.round(t):t},getYRound:function(t,e,i){t=this.getY(t,e);return t=i?Math.round(t):t},getCSSMatrix:function(){var t=this.matrix;return"matrix("+t[0]+","+t[1]+","+t[2]+","+t[3]+","+t[4]+","+t[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});t.exports=i},59715:t=>{t.exports={_visible:!0,visible:{get:function(){return this._visible},set:function(t){t?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function(t){return this.visible=t,this}}},31401:(t,e,i)=>{t.exports={Alpha:i(16005),AlphaSingle:i(88509),BlendMode:i(90065),ComputedSize:i(94215),Crop:i(61683),Depth:i(89272),Flip:i(54434),FX:i(47059),GetBounds:i(8004),Mask:i(8573),Origin:i(27387),PathFollower:i(37640),Pipeline:i(72699),PostPipeline:i(17581),ScrollFactor:i(80227),Size:i(16736),Texture:i(37726),TextureCrop:i(79812),Tint:i(27472),ToJSON:i(53774),Transform:i(16901),TransformMatrix:i(61340),Visible:i(59715)}},31559:(t,e,i)=>{var n=i(37105),s=i(10312),o=i(83419),r=i(31401),a=i(51708),h=i(95643),l=i(87841),c=i(29959),u=i(36899),d=i(26099),i=new o({Extends:h,Mixins:[r.AlphaSingle,r.BlendMode,r.ComputedSize,r.Depth,r.Mask,r.PostPipeline,r.Transform,r.Visible,c],initialize:function(t,e,i,o){h.call(this,t,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new r.TransformMatrix,this.tempTransformMatrix=new r.TransformMatrix,this._sortKey="",this._sysEvents=t.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(e,i),this.setBlendMode(s.SKIP_CHECK),o&&this.add(o)},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return.5*this.width}},displayOriginY:{get:function(){return.5*this.height}},setExclusive:function(t){return this.exclusive=t=void 0===t?!0:t,this},getBounds:function(t){var e;if((t=void 0===t?new l:t).setTo(this.x,this.y,0,0),this.parentContainer&&(e=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y),t.setTo(e.x,e.y,0,0)),0<this.list.length){var i=this.list,o=new l,s=!1;t.setEmpty();for(var n=0;n<i.length;n++){var r=i[n];r.getBounds&&(r.getBounds(o),s?u(o,t,t):(t.setTo(o.x,o.y,o.width,o.height),s=!0))}}return t},addHandler:function(t){t.once(a.DESTROY,this.onChildDestroyed,this),this.exclusive&&(t.parentContainer&&t.parentContainer.remove(t),t.parentContainer=this,t.removeFromDisplayList(),t.addedToScene())},removeHandler:function(t){t.off(a.DESTROY,this.remove,this),this.exclusive&&(t.parentContainer=null,t.removedFromScene(),t.addToDisplayList())},pointToContainer:function(t,e){void 0===e&&(e=new d),this.parentContainer?this.parentContainer.pointToContainer(t,e):(e.x=t.x,e.y=t.y);var i=this.tempTransformMatrix;return i.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),i.invert(),i.transformPoint(t.x,t.y,e),e},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(t){return n.Add(this.list,t,this.maxSize,this.addHandler,this),this},addAt:function(t,e){return n.AddAt(this.list,t,e,this.maxSize,this.addHandler,this),this},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(i,t){return i&&n.StableSort(this.list,t=void 0===t?function(t,e){return t[i]-e[i]}:t),this},getByName:function(t){return n.GetFirst(this.list,"name",t)},getRandom:function(t,e){return n.GetRandom(this.list,t,e)},getFirst:function(t,e,i,o){return n.GetFirst(this.list,t,e,i,o)},getAll:function(t,e,i,o){return n.GetAll(this.list,t,e,i,o)},count:function(t,e,i,o){return n.CountAllMatching(this.list,t,e,i,o)},swap:function(t,e){return n.Swap(this.list,t,e),this},moveTo:function(t,e){return n.MoveTo(this.list,t,e),this},moveAbove:function(t,e){return n.MoveAbove(this.list,t,e),this},moveBelow:function(t,e){return n.MoveBelow(this.list,t,e),this},remove:function(t,e){var i=n.Remove(this.list,t,this.removeHandler,this);if(e&&i){Array.isArray(i)||(i=[i]);for(var o=0;o<i.length;o++)i[o].destroy()}return this},removeAt:function(t,e){t=n.RemoveAt(this.list,t,this.removeHandler,this);return e&&t&&t.destroy(),this},removeBetween:function(t,e,i){var o=n.RemoveBetween(this.list,t,e,this.removeHandler,this);if(i)for(var s=0;s<o.length;s++)o[s].destroy();return this},removeAll:function(t){var e=this.list;if(t){for(var i=0;i<e.length;i++)e[i]&&e[i].scene&&(e[i].off(a.DESTROY,this.onChildDestroyed,this),e[i].destroy());this.list=[]}else n.RemoveBetween(e,0,e.length,this.removeHandler,this);return this},bringToTop:function(t){return n.BringToTop(this.list,t),this},sendToBack:function(t){return n.SendToBack(this.list,t),this},moveUp:function(t){return n.MoveUp(this.list,t),this},moveDown:function(t){return n.MoveDown(this.list,t),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return n.Shuffle(this.list),this},replace:function(t,e,i){return n.Replace(this.list,t,e)&&(this.addHandler(e),this.removeHandler(t),i)&&t.destroy(),this},exists:function(t){return-1<this.list.indexOf(t)},setAll:function(t,e,i,o){return n.SetAll(this.list,t,e,i,o),this},each:function(t,e){for(var i=[null],o=this.list.slice(),s=o.length,n=2;n<arguments.length;n++)i.push(arguments[n]);for(n=0;n<s;n++)i[0]=o[n],t.apply(e,i);return this},iterate:function(t,e){for(var i=[null],o=2;o<arguments.length;o++)i.push(arguments[o]);for(o=0;o<this.list.length;o++)i[0]=this.list[o],t.apply(e,i);return this},setScrollFactor:function(t,e,i){return void 0===e&&(e=t),void 0===i&&(i=!1),this.scrollFactorX=t,this.scrollFactorY=e,i&&(n.SetAll(this.list,"scrollFactorX",t),n.SetAll(this.list,"scrollFactorY",e)),this},length:{get:function(){return this.list.length}},first:{get:function(){return(this.position=0)<this.list.length?this.list[0]:null}},last:{get:function(){return 0<this.list.length?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return 0<this.position?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]},onChildDestroyed:function(t){n.Remove(this.list,t),this.exclusive&&(t.parentContainer=null,t.removedFromScene())}});t.exports=i},53584:t=>{t.exports=function(t,e,i,o){i.addToRenderList(e);var s=e.list;if(0!==s.length){var n=e.localTransform,r=(o?(n.loadIdentity(),n.multiply(o),n.translate(e.x,e.y),n.rotate(e.rotation),n.scale(e.scaleX,e.scaleY)):n.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),-1!==e.blendMode),a=(r||t.setBlendMode(0),e._alpha),h=e.scrollFactorX,l=e.scrollFactorY;e.mask&&e.mask.preRenderCanvas(t,null,i);for(var c=0;c<s.length;c++){var u,d,p,f=s[c];f.willRender(i)&&(u=f.alpha,d=f.scrollFactorX,p=f.scrollFactorY,r||f.blendMode===t.currentBlendMode||t.setBlendMode(f.blendMode),f.setScrollFactor(d*h,p*l),f.setAlpha(u*a),f.renderCanvas(t,f,i,n),f.setAlpha(u),f.setScrollFactor(d,p))}e.mask&&e.mask.postRenderCanvas(t)}}},77143:(t,e,i)=>{var n=i(25305),r=i(31559),o=i(44603),a=i(23568),h=i(95540);o.register("container",function(t,e){var i=a(t=void 0===t?{}:t,"x",0),o=a(t,"y",0),s=h(t,"children",null),i=new r(this.scene,i,o,s);return void 0!==e&&(t.add=e),n(this.scene,i,t),i})},24961:(t,e,i)=>{var o=i(31559);i(39429).register("container",function(t,e,i){return this.displayList.add(new o(this.scene,t,e,i))})},29959:(t,e,i)=>{i(29747);var o=i(72249),i=i(53584);t.exports={renderWebGL:o,renderCanvas:i}},72249:t=>{t.exports=function(t,e,i,o){i.addToRenderList(e);var s=e.list,n=s.length;if(0!==n){var r=e.localTransform,a=(o?(r.loadIdentity(),r.multiply(o),r.translate(e.x,e.y),r.rotate(e.rotation),r.scale(e.scaleX,e.scaleY)):r.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),t.pipelines.preBatch(e),-1!==e.blendMode);a||t.setBlendMode(0);for(var h=e.alpha,l=e.scrollFactorX,c=e.scrollFactorY,u=0;u<n;u++){var d,p,f,b,y,m,x,g,v=s[u];v.willRender(i)&&(b=void 0!==v.alphaTopLeft?(d=v.alphaTopLeft,p=v.alphaTopRight,f=v.alphaBottomLeft,v.alphaBottomRight):f=p=d=v.alpha,y=v.scrollFactorX,m=v.scrollFactorY,a||v.blendMode===t.currentBlendMode||t.setBlendMode(v.blendMode),(x=v.mask)&&x.preRenderWebGL(t,v,i),(g=v.type)!==t.currentType&&(t.newType=!0,t.currentType=g),t.nextTypeMatch=u<n-1&&s[u+1].type===t.currentType,v.setScrollFactor(y*l,m*c),v.setAlpha(d*h,p*h,f*h,b*h),v.renderWebGL(t,v,i,r,e),v.setAlpha(d,p,f,b),v.setScrollFactor(y,m),x&&x.postRenderWebGL(t,i),t.newType=!1)}t.pipelines.postBatch(e)}}},47407:t=>{t.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},3069:(t,e,i)=>{var o=i(83419),s=i(31401),n=i(441),r=i(95643),a=i(41212),h=i(35846),l=i(44594),c=i(61369),i=new o({Extends:r,Mixins:[s.AlphaSingle,s.BlendMode,s.Depth,s.Origin,s.ScrollFactor,s.Transform,s.Visible,n],initialize:function(t,e,i,o,s,n){r.call(this,t,"DOMElement"),this.parent=t.sys.game.domContainer,this.cache=t.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new c,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(e,i),"string"==typeof o?"#"===o[0]?this.setElement(o.substr(1),s,n):this.createElement(o,s,n):o&&this.setElement(o,s,n),t.sys.events.on(l.SLEEP,this.handleSceneEvent,this),t.sys.events.on(l.WAKE,this.handleSceneEvent,this),t.sys.events.on(l.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(t){var e=this.node,i=e.style;e&&(i.display=t.settings.visible?"block":"none")},setSkew:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.skewX=t,this.skewY=e,this},setPerspective:function(t){return this.parent.style.perspective=t+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(t){this.parent.style.perspective=t+"px"}},addListener:function(t){if(this.node){t=t.split(" ");for(var e=0;e<t.length;e++)this.node.addEventListener(t[e],this.handler,!1)}return this},removeListener:function(t){if(this.node){t=t.split(" ");for(var e=0;e<t.length;e++)this.node.removeEventListener(t[e],this.handler)}return this},dispatchNativeEvent:function(t){this.emit(t.type,t)},createElement:function(t,e,i){return this.setElement(document.createElement(t),e,i)},setElement:function(t,e,i){var o;if(this.removeElement(),"string"==typeof t?("#"===t[0]&&(t=t.substr(1)),o=document.getElementById(t)):"object"==typeof t&&1===t.nodeType&&(o=t),!o)return this;if(this.node=o,e&&a(e))for(var s in e)o.style[s]=e[s];else"string"==typeof e&&(o.style=e);return o.style.zIndex="0",o.style.display="inline",o.style.position="absolute",(o.phaser=this).parent&&this.parent.appendChild(o),i&&(o.innerText=i),this.updateSize()},createFromCache:function(t,e){t=this.cache.get(t);return t&&this.createFromHTML(t,e),this},createFromHTML:function(t,e){void 0===e&&(e="div"),this.removeElement();e=document.createElement(e);return(this.node=e).style.zIndex="0",e.style.display="inline",e.style.position="absolute",(e.phaser=this).parent&&this.parent.appendChild(e),e.innerHTML=t,this.updateSize()},removeElement:function(){return this.node&&(h(this.node),this.node=null),this},updateSize:function(){var t=this.node,e=t.getBoundingClientRect();return this.width=t.clientWidth,this.height=t.clientHeight,this.displayWidth=e.width||0,this.displayHeight=e.height||0,this},getChildByProperty:function(t,e){if(this.node)for(var i=this.node.querySelectorAll("*"),o=0;o<i.length;o++)if(i[o][t]===e)return i[o];return null},getChildByID:function(t){return this.getChildByProperty("id",t)},getChildByName:function(t){return this.getChildByProperty("name",t)},setClassName:function(t){return this.node&&(this.node.className=t,this.updateSize()),this},setText:function(t){return this.node&&(this.node.innerText=t,this.updateSize()),this},setHTML:function(t){return this.node&&(this.node.innerHTML=t,this.updateSize()),this},preRender:function(){var t=this.parentContainer,e=this.node;e&&t&&!t.willRender()&&(e.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(l.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(l.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(l.PRE_RENDER,this.preRender,this)}});t.exports=i},49381:(t,e,i)=>{var p=i(47407),f=i(95643),i=i(61340),b=new i,y=new i,m=new i;t.exports=function(t,e,i,o){var s,n,r,a,h,l,c,u,d;e.node&&(s=e.node.style,r=e.scene.sys.settings,!s||!r.visible||f.RENDER_MASK!==e.renderFlags||0!==e.cameraFilter&&e.cameraFilter&i.id||e.parentContainer&&!e.parentContainer.willRender()?s.display="none":(r=e.parentContainer,n=i.alpha*e.alpha,r&&(n*=r.alpha),r=b,a=y,h=m,c=l=0,d=u="0%",o?(l=e.width*e.scaleX*e.originX,c=e.height*e.scaleY*e.originY,a.applyITRS(e.x-l,e.y-c,e.rotation,e.scaleX,e.scaleY),r.copyFrom(i.matrix),r.multiplyWithOffset(o,-i.scrollX*e.scrollFactorX,-i.scrollY*e.scrollFactorY),a.e=e.x-l,a.f=e.y-c):(l=e.width*e.originX,c=e.height*e.originY,a.applyITRS(e.x-l,e.y-c,e.rotation,e.scaleX,e.scaleY),r.copyFrom(i.matrix),u=100*e.originX+"%",d=100*e.originY+"%",a.e-=i.scrollX*e.scrollFactorX,a.f-=i.scrollY*e.scrollFactorY),r.multiply(a,h),e.transformOnly||(s.display="block",s.opacity=n,s.zIndex=e._depth,s.pointerEvents=e.pointerEvents,s.mixBlendMode=p[e._blendMode]),s.transform=h.getCSSMatrix()+" skew("+e.skewX+"rad, "+e.skewY+"rad) rotate3d("+e.rotate3d.x+","+e.rotate3d.y+","+e.rotate3d.z+","+e.rotate3d.w+e.rotate3dAngle+")",s.transformOrigin=u+" "+d))}},2611:(t,e,i)=>{var n=i(3069);i(39429).register("dom",function(t,e,i,o,s){t=new n(this.scene,t,e,i,o,s);return this.displayList.add(t),t})},441:(t,e,i)=>{i(29747);var o=i(49381),i=i(49381);t.exports={renderWebGL:o,renderCanvas:i}},62980:t=>{t.exports="addedtoscene"},41337:t=>{t.exports="destroy"},44947:t=>{t.exports="removedfromscene"},49358:t=>{t.exports="complete"},35163:t=>{t.exports="created"},97249:t=>{t.exports="error"},19483:t=>{t.exports="locked"},56059:t=>{t.exports="loop"},26772:t=>{t.exports="metadata"},64437:t=>{t.exports="playing"},83411:t=>{t.exports="play"},75780:t=>{t.exports="seeked"},67799:t=>{t.exports="seeking"},63500:t=>{t.exports="stalled"},55541:t=>{t.exports="stop"},53208:t=>{t.exports="textureready"},4992:t=>{t.exports="unlocked"},12:t=>{t.exports="unsupported"},51708:(t,e,i)=>{t.exports={ADDED_TO_SCENE:i(62980),DESTROY:i(41337),REMOVED_FROM_SCENE:i(44947),VIDEO_COMPLETE:i(49358),VIDEO_CREATED:i(35163),VIDEO_ERROR:i(97249),VIDEO_LOCKED:i(19483),VIDEO_LOOP:i(56059),VIDEO_METADATA:i(26772),VIDEO_PLAY:i(83411),VIDEO_PLAYING:i(64437),VIDEO_SEEKED:i(75780),VIDEO_SEEKING:i(67799),VIDEO_STALLED:i(63500),VIDEO_STOP:i(55541),VIDEO_TEXTURE:i(53208),VIDEO_UNLOCKED:i(4992),VIDEO_UNSUPPORTED:i(12)}},42421:(t,e,i)=>{var o=i(83419),s=i(31401),n=i(95643),i=i(64993),o=new o({Extends:n,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.Flip,s.Origin,s.ScrollFactor,s.Size,s.Texture,s.Tint,s.Transform,s.Visible,i],initialize:function(t){n.call(this,t,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});t.exports=o},70217:()=>{},56315:(t,e,i)=>{var o=i(42421);i(39429).register("extern",function(){var t=new o(this.scene);return this.displayList.add(t),t})},64993:(t,e,i)=>{i(29747);var o=i(80287),i=i(70217);t.exports={renderWebGL:o,renderCanvas:i}},80287:(t,e,i)=>{var s=i(91296);t.exports=function(t,e,i,o){t.pipelines.clear();o=s(e,i,o).calc;e.render.call(e,t,i,o),t.pipelines.rebind()}},85592:t=>{t.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},43831:(t,e,i)=>{var o=i(71911),s=i(83419),h=i(85592),n=i(31401),r=i(8497),a=i(95643),p=i(95540),l=i(35154),f=i(36383),i=i(84503),c=new s({Extends:a,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Mask,n.Pipeline,n.PostPipeline,n.Transform,n.Visible,n.ScrollFactor,i],initialize:function(t,e){var i=l(e,"x",0),o=l(e,"y",0);a.call(this,t,"Graphics"),this.setPosition(i,o),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.lineStyle(1,0,0),this.fillStyle(0,0),this.setDefaultStyles(e)},setDefaultStyles:function(t){return l(t,"lineStyle",null)&&(this.defaultStrokeWidth=l(t,"lineStyle.width",1),this.defaultStrokeColor=l(t,"lineStyle.color",16777215),this.defaultStrokeAlpha=l(t,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),l(t,"fillStyle",null)&&(this.defaultFillColor=l(t,"fillStyle.color",16777215),this.defaultFillAlpha=l(t,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(t,e,i){return this.commandBuffer.push(h.LINE_STYLE,t,e,i=void 0===i?1:i),this._lineWidth=t,this},fillStyle:function(t,e){return this.commandBuffer.push(h.FILL_STYLE,t,e=void 0===e?1:e),this},fillGradientStyle:function(t,e,i,o,s,n,r,a){return void 0===s&&(s=1),void 0===n&&(n=s),void 0===r&&(r=s),void 0===a&&(a=s),this.commandBuffer.push(h.GRADIENT_FILL_STYLE,s,n,r,a,t,e,i,o),this},lineGradientStyle:function(t,e,i,o,s,n){return this.commandBuffer.push(h.GRADIENT_LINE_STYLE,t,n=void 0===n?1:n,e,i,o,s),this},beginPath:function(){return this.commandBuffer.push(h.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(h.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(h.FILL_PATH),this},fill:function(){return this.commandBuffer.push(h.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(h.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(h.STROKE_PATH),this},fillCircleShape:function(t){return this.fillCircle(t.x,t.y,t.radius)},strokeCircleShape:function(t){return this.strokeCircle(t.x,t.y,t.radius)},fillCircle:function(t,e,i){return this.beginPath(),this.arc(t,e,i,0,f.PI2),this.fillPath(),this},strokeCircle:function(t,e,i){return this.beginPath(),this.arc(t,e,i,0,f.PI2),this.strokePath(),this},fillRectShape:function(t){return this.fillRect(t.x,t.y,t.width,t.height)},strokeRectShape:function(t){return this.strokeRect(t.x,t.y,t.width,t.height)},fillRect:function(t,e,i,o){return this.commandBuffer.push(h.FILL_RECT,t,e,i,o),this},strokeRect:function(t,e,i,o){var s=this._lineWidth/2,n=t-s,s=t+s;return this.beginPath(),this.moveTo(t,e),this.lineTo(t,e+o),this.strokePath(),this.beginPath(),this.moveTo(t+i,e),this.lineTo(t+i,e+o),this.strokePath(),this.beginPath(),this.moveTo(n,e),this.lineTo(s+i,e),this.strokePath(),this.beginPath(),this.moveTo(n,e+o),this.lineTo(s+i,e+o),this.strokePath(),this},fillRoundedRect:function(t,e,i,o,s){var n=s=void 0===s?20:s,r=s,a=s,h=s,s=("number"!=typeof s&&(n=p(s,"tl",20),r=p(s,"tr",20),a=p(s,"bl",20),h=p(s,"br",20)),0<=n),l=0<=r,c=0<=a,u=0<=h,n=Math.abs(n),r=Math.abs(r),a=Math.abs(a),h=Math.abs(h);return this.beginPath(),this.moveTo(t+n,e),this.lineTo(t+i-r,e),l?this.arc(t+i-r,e+r,r,-f.TAU,0):this.arc(t+i,e,r,Math.PI,f.TAU,!0),this.lineTo(t+i,e+o-h),u?this.arc(t+i-h,e+o-h,h,0,f.TAU):this.arc(t+i,e+o,h,-f.TAU,Math.PI,!0),this.lineTo(t+a,e+o),c?this.arc(t+a,e+o-a,a,f.TAU,Math.PI):this.arc(t,e+o,a,0,-f.TAU,!0),this.lineTo(t,e+n),s?this.arc(t+n,e+n,n,-Math.PI,-f.TAU):this.arc(t,e,n,f.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(t,e,i,o,s){var n=s=void 0===s?20:s,r=s,a=s,h=s,l=Math.min(i,o)/2,s=("number"!=typeof s&&(n=p(s,"tl",20),r=p(s,"tr",20),a=p(s,"bl",20),h=p(s,"br",20)),0<=n),c=0<=r,u=0<=a,d=0<=h,n=Math.min(Math.abs(n),l),r=Math.min(Math.abs(r),l),a=Math.min(Math.abs(a),l),h=Math.min(Math.abs(h),l);return this.beginPath(),this.moveTo(t+n,e),this.lineTo(t+i-r,e),this.moveTo(t+i-r,e),c?this.arc(t+i-r,e+r,r,-f.TAU,0):this.arc(t+i,e,r,Math.PI,f.TAU,!0),this.lineTo(t+i,e+o-h),this.moveTo(t+i,e+o-h),d?this.arc(t+i-h,e+o-h,h,0,f.TAU):this.arc(t+i,e+o,h,-f.TAU,Math.PI,!0),this.lineTo(t+a,e+o),this.moveTo(t+a,e+o),u?this.arc(t+a,e+o-a,a,f.TAU,Math.PI):this.arc(t,e+o,a,0,-f.TAU,!0),this.lineTo(t,e+n),this.moveTo(t,e+n),s?this.arc(t+n,e+n,n,-Math.PI,-f.TAU):this.arc(t,e,n,f.TAU,0,!0),this.strokePath(),this},fillPointShape:function(t,e){return this.fillPoint(t.x,t.y,e)},fillPoint:function(t,e,i){return!i||i<1?i=1:(t-=i/2,e-=i/2),this.commandBuffer.push(h.FILL_RECT,t,e,i,i),this},fillTriangleShape:function(t){return this.fillTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},strokeTriangleShape:function(t){return this.strokeTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},fillTriangle:function(t,e,i,o,s,n){return this.commandBuffer.push(h.FILL_TRIANGLE,t,e,i,o,s,n),this},strokeTriangle:function(t,e,i,o,s,n){return this.commandBuffer.push(h.STROKE_TRIANGLE,t,e,i,o,s,n),this},strokeLineShape:function(t){return this.lineBetween(t.x1,t.y1,t.x2,t.y2)},lineBetween:function(t,e,i,o){return this.beginPath(),this.moveTo(t,e),this.lineTo(i,o),this.strokePath(),this},lineTo:function(t,e){return this.commandBuffer.push(h.LINE_TO,t,e),this},moveTo:function(t,e){return this.commandBuffer.push(h.MOVE_TO,t,e),this},strokePoints:function(t,e,i,o){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===o&&(o=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var s=1;s<o;s++)this.lineTo(t[s].x,t[s].y);return e&&this.lineTo(t[0].x,t[0].y),i&&this.closePath(),this.strokePath(),this},fillPoints:function(t,e,i,o){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===o&&(o=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var s=1;s<o;s++)this.lineTo(t[s].x,t[s].y);return e&&this.lineTo(t[0].x,t[0].y),i&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(t,e){t=t.getPoints(e=void 0===e?32:e);return this.strokePoints(t,!0)},strokeEllipse:function(t,e,i,o,s){void 0===s&&(s=32);t=new r(t,e,i,o).getPoints(s);return this.strokePoints(t,!0)},fillEllipseShape:function(t,e){t=t.getPoints(e=void 0===e?32:e);return this.fillPoints(t,!0)},fillEllipse:function(t,e,i,o,s){void 0===s&&(s=32);t=new r(t,e,i,o).getPoints(s);return this.fillPoints(t,!0)},arc:function(t,e,i,o,s,n,r){return this.commandBuffer.push(h.ARC,t,e,i,o,s,n=void 0===n?!1:n,r=void 0===r?0:r),this},slice:function(t,e,i,o,s,n,r){return void 0===n&&(n=!1),void 0===r&&(r=0),this.commandBuffer.push(h.BEGIN_PATH),this.commandBuffer.push(h.MOVE_TO,t,e),this.commandBuffer.push(h.ARC,t,e,i,o,s,n,r),this.commandBuffer.push(h.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(h.SAVE),this},restore:function(){return this.commandBuffer.push(h.RESTORE),this},translateCanvas:function(t,e){return this.commandBuffer.push(h.TRANSLATE,t,e),this},scaleCanvas:function(t,e){return this.commandBuffer.push(h.SCALE,t,e),this},rotateCanvas:function(t){return this.commandBuffer.push(h.ROTATE,t),this},clear:function(){return this.commandBuffer.length=0,-1<this.defaultFillColor&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),-1<this.defaultStrokeColor&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(t,e,i){var o,s,n,r=this.scene.sys,a=r.game.renderer,h=(void 0===e&&(e=r.scale.width),void 0===i&&(i=r.scale.height),c.TargetCamera.setScene(this.scene),c.TargetCamera.setViewport(0,0,e,i),c.TargetCamera.scrollX=this.x,c.TargetCamera.scrollY=this.y,{willReadFrequently:!0});return"string"==typeof t?r.textures.exists(t)?(n=(o=r.textures.get(t)).getSourceImage())instanceof HTMLCanvasElement&&(s=n.getContext("2d",h)):s=(o=r.textures.createCanvas(t,e,i)).getSourceImage().getContext("2d",h):t instanceof HTMLCanvasElement&&(s=t.getContext("2d",h)),s&&(this.renderCanvas(a,this,c.TargetCamera,null,s,!1),o)&&o.refresh(),this},preDestroy:function(){this.commandBuffer=[]}});c.TargetCamera=new o,t.exports=c},32768:(t,e,i)=>{var p=i(85592),f=i(20926);t.exports=function(t,e,i,o,s,n){var r=e.commandBuffer,a=r.length,h=s||t.currentContext;if(0!==a&&f(t,h,e,i,o)){i.addToRenderList(e);var l,c,u;h.beginPath();for(var d=0;d<a;++d)switch(r[d]){case p.ARC:h.arc(r[d+1],r[d+2],r[d+3],r[d+4],r[d+5],r[d+6]),d+=7;break;case p.LINE_STYLE:u=r[d+1],c=r[d+2],l=r[d+3],h.strokeStyle="rgba("+((16711680&c)>>>16)+","+((65280&c)>>>8)+","+(255&c)+","+l+")",h.lineWidth=u,d+=3;break;case p.FILL_STYLE:c=r[d+1],l=r[d+2],h.fillStyle="rgba("+((16711680&c)>>>16)+","+((65280&c)>>>8)+","+(255&c)+","+l+")",d+=2;break;case p.BEGIN_PATH:h.beginPath();break;case p.CLOSE_PATH:h.closePath();break;case p.FILL_PATH:n||h.fill();break;case p.STROKE_PATH:n||h.stroke();break;case p.FILL_RECT:n?h.rect(r[d+1],r[d+2],r[d+3],r[d+4]):h.fillRect(r[d+1],r[d+2],r[d+3],r[d+4]),d+=4;break;case p.FILL_TRIANGLE:h.beginPath(),h.moveTo(r[d+1],r[d+2]),h.lineTo(r[d+3],r[d+4]),h.lineTo(r[d+5],r[d+6]),h.closePath(),n||h.fill(),d+=6;break;case p.STROKE_TRIANGLE:h.beginPath(),h.moveTo(r[d+1],r[d+2]),h.lineTo(r[d+3],r[d+4]),h.lineTo(r[d+5],r[d+6]),h.closePath(),n||h.stroke(),d+=6;break;case p.LINE_TO:h.lineTo(r[d+1],r[d+2]),d+=2;break;case p.MOVE_TO:h.moveTo(r[d+1],r[d+2]),d+=2;break;case p.LINE_FX_TO:h.lineTo(r[d+1],r[d+2]),d+=5;break;case p.MOVE_FX_TO:h.moveTo(r[d+1],r[d+2]),d+=5;break;case p.SAVE:h.save();break;case p.RESTORE:h.restore();break;case p.TRANSLATE:h.translate(r[d+1],r[d+2]),d+=2;break;case p.SCALE:h.scale(r[d+1],r[d+2]),d+=2;break;case p.ROTATE:h.rotate(r[d+1]),d+=1;break;case p.GRADIENT_FILL_STYLE:d+=5;break;case p.GRADIENT_LINE_STYLE:d+=6}h.restore()}}},87079:(t,e,i)=>{var o=i(44603),s=i(43831);o.register("graphics",function(t,e){void 0===t&&(t={}),void 0!==e&&(t.add=e);e=new s(this.scene,t);return t.add&&this.scene.sys.displayList.add(e),e})},1201:(t,e,i)=>{var o=i(43831);i(39429).register("graphics",function(t){return this.displayList.add(new o(this.scene,t))})},84503:(t,e,i)=>{i(29747);var o=i(77545);i(32768);i=i(32768),t.exports={renderWebGL:o,renderCanvas:i}},77545:(t,e,i)=>{function L(t,e,i){this.x=t,this.y=e,this.width=i}function F(t,e,i){this.points=[],this.pointsLength=1,this.points[0]=new L(t,e,i)}var I=i(85592),k=i(91296),o=i(61340),V=i(70554),G=[],z=new o;t.exports=function(t,e,i,o){if(0!==e.commandBuffer.length){i.addToRenderList(e);var s=t.pipelines.set(e.pipeline,e);t.pipelines.preBatch(e);for(var n=k(e,i,o).calc,r=z.loadIdentity(),a=e.commandBuffer,h=i.alpha*e.alpha,l=1,c=s.fillTint,u=s.strokeTint,d=0,p=0,f=0,b=2*Math.PI,y=[],m=0,x=!0,g=null,v=V.getTintAppendFloatAlpha,_=0;_<a.length;_++)switch(a[_]){case I.BEGIN_PATH:y.length=0,x=!(g=null);break;case I.CLOSE_PATH:x=!1,g&&g.points.length&&g.points.push(g.points[0]);break;case I.FILL_PATH:for(m=0;m<y.length;m++)s.batchFillPath(y[m].points,r,n);break;case I.STROKE_PATH:for(m=0;m<y.length;m++)s.batchStrokePath(y[m].points,l,x,r,n);break;case I.LINE_STYLE:var l=a[++_],w=v(a[++_],a[++_]*h);u.TL=w,u.TR=w,u.BL=w,u.BR=w;break;case I.FILL_STYLE:w=v(a[++_],a[++_]*h);c.TL=w,c.TR=w,c.BL=w,c.BR=w;break;case I.GRADIENT_FILL_STYLE:var S=a[++_]*h,A=a[++_]*h,C=a[++_]*h,T=a[++_]*h;c.TL=v(a[++_],S),c.TR=v(a[++_],A),c.BL=v(a[++_],C),c.BR=v(a[++_],T);break;case I.GRADIENT_LINE_STYLE:l=a[++_];S=a[++_]*h;u.TL=v(a[++_],S),u.TR=v(a[++_],S),u.BL=v(a[++_],S),u.BR=v(a[++_],S);break;case I.ARC:var P=0,B=a[++_],E=a[++_],M=a[++_],D=a[++_],O=a[++_],A=a[++_],R=a[++_];for(O-=D,A?O<-b?O=-b:0<O&&(O=O%b-b):b<O?O=b:O<0&&(O=b+O%b),null===g&&(g=new F(B+Math.cos(D)*M,E+Math.sin(D)*M,l),y.push(g),P+=.01);P<1+R;)f=O*P+D,d=B+Math.cos(f)*M,p=E+Math.sin(f)*M,g.points.push(new L(d,p,l)),P+=.01;f=O+D,d=B+Math.cos(f)*M,p=E+Math.sin(f)*M,g.points.push(new L(d,p,l));break;case I.FILL_RECT:s.batchFillRect(a[++_],a[++_],a[++_],a[++_],r,n);break;case I.FILL_TRIANGLE:s.batchFillTriangle(a[++_],a[++_],a[++_],a[++_],a[++_],a[++_],r,n);break;case I.STROKE_TRIANGLE:s.batchStrokeTriangle(a[++_],a[++_],a[++_],a[++_],a[++_],a[++_],l,r,n);break;case I.LINE_TO:null!==g?g.points.push(new L(a[++_],a[++_],l)):(g=new F(a[++_],a[++_],l),y.push(g));break;case I.MOVE_TO:g=new F(a[++_],a[++_],l),y.push(g);break;case I.SAVE:G.push(r.copyToArray());break;case I.RESTORE:r.copyFromArray(G.pop());break;case I.TRANSLATE:B=a[++_],E=a[++_],r.translate(B,E);break;case I.SCALE:B=a[++_],E=a[++_],r.scale(B,E);break;case I.ROTATE:r.rotate(a[++_])}t.pipelines.postBatch(e)}}},26479:(t,e,i)=>{var y=i(61061),o=i(83419),n=i(51708),s=i(50792),r=i(46710),m=i(95540),x=i(35154),g=i(97022),a=i(41212),v=i(88492),h=i(35072),l=i(68287),i=new o({Extends:s,initialize:function(t,e,i){s.call(this),i?e&&!Array.isArray(e)&&(e=[e]):Array.isArray(e)?a(e[0])&&(i=e,e=null):a(e)&&(i=e,e=null),this.scene=t,this.children=new h,this.isParent=!0,this.type="Group",this.classType=m(i,"classType",l),this.name=m(i,"name",""),this.active=m(i,"active",!0),this.maxSize=m(i,"maxSize",-1),this.defaultKey=m(i,"defaultKey",null),this.defaultFrame=m(i,"defaultFrame",null),this.runChildUpdate=m(i,"runChildUpdate",!1),this.createCallback=m(i,"createCallback",null),this.removeCallback=m(i,"removeCallback",null),this.createMultipleCallback=m(i,"createMultipleCallback",null),this.internalCreateCallback=m(i,"internalCreateCallback",null),this.internalRemoveCallback=m(i,"internalRemoveCallback",null),e&&this.addMultiple(e),i&&this.createMultiple(i),this.on(n.ADDED_TO_SCENE,this.addedToScene,this),this.on(n.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(t,e,i,o,s,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.defaultKey),void 0===o&&(o=this.defaultFrame),void 0===s&&(s=!0),void 0===n&&(n=!0),this.isFull()?null:((t=new this.classType(this.scene,t,e,i,o)).addToDisplayList(this.scene.sys.displayList),t.addToUpdateList(),t.visible=s,t.setActive(n),this.add(t),t)},createMultiple:function(t){if(this.isFull())return[];var e=[];if((t=Array.isArray(t)?t:[t])[0].key)for(var i=0;i<t.length;i++)var o=this.createFromConfig(t[i]),e=e.concat(o);return e},createFromConfig:function(t){if(this.isFull())return[];this.classType=m(t,"classType",this.classType);var e=m(t,"key",void 0),i=m(t,"frame",null),o=m(t,"visible",!0),s=m(t,"active",!0),n=[];if(void 0!==e){Array.isArray(e)||(e=[e]),Array.isArray(i)||(i=[i]);var r=m(t,"repeat",0),a=m(t,"randomKey",!1),h=m(t,"randomFrame",!1),l=m(t,"yoyo",!1),c=m(t,"quantity",!1),u=m(t,"frameQuantity",1),d=m(t,"max",0),p=v(e,i,{max:d,qty:c||u,random:a,randomB:h,repeat:r,yoyo:l});t.createCallback&&(this.createCallback=t.createCallback),t.removeCallback&&(this.removeCallback=t.removeCallback),t.internalCreateCallback&&(this.internalCreateCallback=t.internalCreateCallback),t.internalRemoveCallback&&(this.internalRemoveCallback=t.internalRemoveCallback);for(var f=0;f<p.length;f++){var b=this.create(0,0,p[f].a,p[f].b,o,s);if(!b)break;n.push(b)}g(t,"setXY")&&(e=x(t,"setXY.x",0),i=x(t,"setXY.y",0),d=x(t,"setXY.stepX",0),c=x(t,"setXY.stepY",0),y.SetXY(n,e,i,d,c)),g(t,"setRotation")&&(u=x(t,"setRotation.value",0),a=x(t,"setRotation.step",0),y.SetRotation(n,u,a)),g(t,"setScale")&&(h=x(t,"setScale.x",1),r=x(t,"setScale.y",h),l=x(t,"setScale.stepX",0),e=x(t,"setScale.stepY",0),y.SetScale(n,h,r,l,e)),g(t,"setOrigin")&&(i=x(t,"setOrigin.x",.5),d=x(t,"setOrigin.y",i),c=x(t,"setOrigin.stepX",0),u=x(t,"setOrigin.stepY",0),y.SetOrigin(n,i,d,c,u)),g(t,"setAlpha")&&(a=x(t,"setAlpha.value",1),h=x(t,"setAlpha.step",0),y.SetAlpha(n,a,h)),g(t,"setDepth")&&(r=x(t,"setDepth.value",0),l=x(t,"setDepth.step",0),y.SetDepth(n,r,l)),g(t,"setScrollFactor")&&(e=x(t,"setScrollFactor.x",1),i=x(t,"setScrollFactor.y",e),d=x(t,"setScrollFactor.stepX",0),c=x(t,"setScrollFactor.stepY",0),y.SetScrollFactor(n,e,i,d,c));u=m(t,"hitArea",null),a=m(t,"hitAreaCallback",null),h=(u&&y.SetHitArea(n,u,a),m(t,"gridAlign",!1));h&&y.GridAlign(n,h),this.createMultipleCallback&&this.createMultipleCallback.call(this,n)}return n},preUpdate:function(t,e){if(this.runChildUpdate&&0!==this.children.size)for(var i=this.children.entries.slice(),o=0;o<i.length;o++){var s=i[o];s.active&&s.update(t,e)}},add:function(t,e){return void 0===e&&(e=!1),this.isFull()||(this.children.set(t),this.internalCreateCallback&&this.internalCreateCallback.call(this,t),this.createCallback&&this.createCallback.call(this,t),e&&(t.addToDisplayList(this.scene.sys.displayList),t.addToUpdateList()),t.on(n.DESTROY,this.remove,this)),this},addMultiple:function(t,e){if(void 0===e&&(e=!1),Array.isArray(t))for(var i=0;i<t.length;i++)this.add(t[i],e);return this},remove:function(t,e,i){return void 0===e&&(e=!1),void 0===i&&(i=!1),this.children.contains(t)&&(this.children.delete(t),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,t),this.removeCallback&&this.removeCallback.call(this,t),t.off(n.DESTROY,this.remove,this),i?t.destroy():e&&(t.removeFromDisplayList(),t.removeFromUpdateList())),this},clear:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);for(var i=this.children,o=0;o<i.size;o++){var s=i.entries[o];s.off(n.DESTROY,this.remove,this),e?s.destroy():t&&(s.removeFromDisplayList(),s.removeFromUpdateList())}return this.children.clear(),this},contains:function(t){return this.children.contains(t)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(t,e,i,o){return r(this.children.entries,t,e,i,o)},getFirst:function(t,e,i,o,s,n,r){return this.getHandler(!0,1,t,e,i,o,s,n,r)},getFirstNth:function(t,e,i,o,s,n,r,a){return this.getHandler(!0,t,e,i,o,s,n,r,a)},getLast:function(t,e,i,o,s,n,r){return this.getHandler(!1,1,t,e,i,o,s,n,r)},getLastNth:function(t,e,i,o,s,n,r,a){return this.getHandler(!1,t,e,i,o,s,n,r,a)},getHandler:function(t,e,i,o,s,n,r,a,h){void 0===i&&(i=!1),void 0===o&&(o=!1);var l,c,u=0,d=this.children.entries;if(t)for(c=0;c<d.length;c++)if((l=d[c]).active===i){if(++u===e)break}else l=null;else for(c=d.length-1;0<=c;c--)if((l=d[c]).active===i){if(++u===e)break}else l=null;return l?("number"==typeof s&&(l.x=s),"number"==typeof n&&(l.y=n),l):o?this.create(s,n,r,a,h):null},get:function(t,e,i,o,s){return this.getFirst(!1,!0,t,e,i,o,s)},getFirstAlive:function(t,e,i,o,s,n){return this.getFirst(!0,t,e,i,o,s,n)},getFirstDead:function(t,e,i,o,s,n){return this.getFirst(!1,t,e,i,o,s,n)},playAnimation:function(t,e){return y.PlayAnimation(this.children.entries,t,e),this},isFull:function(){return-1!==this.maxSize&&this.children.size>=this.maxSize},countActive:function(t){void 0===t&&(t=!0);for(var e=0,i=0;i<this.children.size;i++)this.children.entries[i].active===t&&e++;return e},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var t=this.getTotalUsed();return(-1===this.maxSize?999999999999:this.maxSize)-t},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},propertyValueSet:function(t,e,i,o,s){return y.PropertyValueSet(this.children.entries,t,e,i,o,s),this},propertyValueInc:function(t,e,i,o,s){return y.PropertyValueInc(this.children.entries,t,e,i,o,s),this},setX:function(t,e){return y.SetX(this.children.entries,t,e),this},setY:function(t,e){return y.SetY(this.children.entries,t,e),this},setXY:function(t,e,i,o){return y.SetXY(this.children.entries,t,e,i,o),this},incX:function(t,e){return y.IncX(this.children.entries,t,e),this},incY:function(t,e){return y.IncY(this.children.entries,t,e),this},incXY:function(t,e,i,o){return y.IncXY(this.children.entries,t,e,i,o),this},shiftPosition:function(t,e,i){return y.ShiftPosition(this.children.entries,t,e,i),this},angle:function(t,e){return y.Angle(this.children.entries,t,e),this},rotate:function(t,e){return y.Rotate(this.children.entries,t,e),this},rotateAround:function(t,e){return y.RotateAround(this.children.entries,t,e),this},rotateAroundDistance:function(t,e,i){return y.RotateAroundDistance(this.children.entries,t,e,i),this},setAlpha:function(t,e){return y.SetAlpha(this.children.entries,t,e),this},setTint:function(t,e,i,o){return y.SetTint(this.children.entries,t,e,i,o),this},setOrigin:function(t,e,i,o){return y.SetOrigin(this.children.entries,t,e,i,o),this},scaleX:function(t,e){return y.ScaleX(this.children.entries,t,e),this},scaleY:function(t,e){return y.ScaleY(this.children.entries,t,e),this},scaleXY:function(t,e,i,o){return y.ScaleXY(this.children.entries,t,e,i,o),this},setDepth:function(t,e){return y.SetDepth(this.children.entries,t,e),this},setBlendMode:function(t){return y.SetBlendMode(this.children.entries,t),this},setHitArea:function(t,e){return y.SetHitArea(this.children.entries,t,e),this},shuffle:function(){return y.Shuffle(this.children.entries),this},kill:function(t){this.children.contains(t)&&t.setActive(!1)},killAndHide:function(t){this.children.contains(t)&&(t.setActive(!1),t.setVisible(!1))},setVisible:function(t,e,i){return y.SetVisible(this.children.entries,t,e,i),this},toggleVisible:function(){return y.ToggleVisible(this.children.entries),this},destroy:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1),this.scene&&!this.ignoreDestroy&&(this.emit(n.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(e,t),this.scene=void 0,this.children=void 0)}});t.exports=i},94975:(t,e,i)=>{var o=i(44603),s=i(26479);o.register("group",function(t){return new s(this.scene,null,t)})},3385:(t,e,i)=>{var o=i(26479);i(39429).register("group",function(t,e){return this.updateList.add(new o(this.scene,t,e))})},88571:(t,e,i)=>{var o=i(83419),s=i(31401),n=i(95643),i=i(59819),o=new o({Extends:n,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.PostPipeline,s.ScrollFactor,s.Size,s.TextureCrop,s.Tint,s.Transform,s.Visible,i],initialize:function(t,e,i,o,s){n.call(this,t,"Image"),this._crop=this.resetCropObject(),this.setTexture(o,s),this.setPosition(e,i),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});t.exports=o},40652:t=>{t.exports=function(t,e,i,o){i.addToRenderList(e),t.batchSprite(e,e.frame,i,o)}},82459:(t,e,i)=>{var s=i(25305),o=i(44603),n=i(23568),r=i(88571);o.register("image",function(t,e){var i=n(t=void 0===t?{}:t,"key",null),o=n(t,"frame",null),i=new r(this.scene,0,0,i,o);return void 0!==e&&(t.add=e),s(this.scene,i,t),i})},2117:(t,e,i)=>{var s=i(88571);i(39429).register("image",function(t,e,i,o){return this.displayList.add(new s(this.scene,t,e,i,o))})},59819:(t,e,i)=>{i(29747);var o=i(99517),i=i(40652);t.exports={renderWebGL:o,renderCanvas:i}},99517:t=>{t.exports=function(t,e,i,o){i.addToRenderList(e),this.pipeline.batchSprite(e,i,o)}},77856:(t,e,i)=>{var o={Events:i(51708),DisplayList:i(8050),GameObjectCreator:i(44603),GameObjectFactory:i(39429),UpdateList:i(45027),Components:i(31401),GetCalcMatrix:i(91296),BuildGameObject:i(25305),BuildGameObjectAnimation:i(13059),GameObject:i(95643),BitmapText:i(22186),Blitter:i(6107),Bob:i(46590),Container:i(31559),DOMElement:i(3069),DynamicBitmapText:i(2638),Extern:i(42421),Graphics:i(43831),Group:i(26479),Image:i(88571),Layer:i(93595),Particles:i(18404),PathFollower:i(1159),RenderTexture:i(591),RetroFont:i(196),Rope:i(77757),Sprite:i(68287),Text:i(50171),GetTextSize:i(14220),MeasureText:i(79557),TextStyle:i(35762),TileSprite:i(20839),Zone:i(41481),Video:i(18471),Shape:i(17803),Arc:i(23629),Curve:i(89),Ellipse:i(19921),Grid:i(30479),IsoBox:i(61475),IsoTriangle:i(16933),Line:i(57847),Polygon:i(24949),Rectangle:i(74561),Star:i(55911),Triangle:i(36931),Factories:{Blitter:i(12709),Container:i(24961),DOMElement:i(2611),DynamicBitmapText:i(72566),Extern:i(56315),Graphics:i(1201),Group:i(3385),Image:i(2117),Layer:i(20005),Particles:i(676),PathFollower:i(90145),RenderTexture:i(60505),Rope:i(96819),Sprite:i(46409),StaticBitmapText:i(34914),Text:i(68005),TileSprite:i(91681),Zone:i(84175),Video:i(89025),Arc:i(42563),Curve:i(40511),Ellipse:i(1543),Grid:i(34137),IsoBox:i(3933),IsoTriangle:i(49803),Line:i(2481),Polygon:i(64827),Rectangle:i(87959),Star:i(93697),Triangle:i(45245)},Creators:{Blitter:i(9403),Container:i(77143),DynamicBitmapText:i(11164),Graphics:i(87079),Group:i(94975),Image:i(82459),Layer:i(25179),Particles:i(92730),RenderTexture:i(34495),Rope:i(26209),Sprite:i(15567),StaticBitmapText:i(57336),Text:i(71259),TileSprite:i(14167),Zone:i(95261),Video:i(11511)}};o.Shader=i(20071),o.Mesh=i(4703),o.NineSlice=i(28103),o.PointLight=i(80321),o.Plane=i(33663),o.Factories.Shader=i(74177),o.Factories.Mesh=i(9225),o.Factories.NineSlice=i(47521),o.Factories.PointLight=i(71255),o.Factories.Plane=i(30985),o.Creators.Shader=i(54935),o.Creators.Mesh=i(20527),o.Creators.NineSlice=i(28279),o.Creators.PointLight=i(39829),o.Creators.Plane=i(56015),o.Light=i(41432),o.LightsManager=i(61356),o.LightsPlugin=i(88992),t.exports=o},93595:(t,e,i)=>{var o=i(10312),s=i(83419),n=i(31401),r=i(53774),a=i(45893),h=i(50792),l=i(51708),c=i(73162),u=i(33963),d=i(44594),p=i(19186),i=new s({Extends:c,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Mask,n.PostPipeline,n.Visible,h,u],initialize:function(t,e){c.call(this,t),h.call(this),this.scene=t,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=t.sys,this.events=t.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(o.SKIP_CHECK),e&&this.add(e),t.sys.queueDepthSort()},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},setState:function(t){return this.state=t,this},setDataEnabled:function(){return this.data||(this.data=new a(this)),this},setData:function(t,e){return this.data||(this.data=new a(this)),this.data.set(t,e),this},incData:function(t,e){return this.data||(this.data=new a(this)),this.data.inc(t,e),this},toggleData:function(t){return this.data||(this.data=new a(this)),this.data.toggle(t),this},getData:function(t){return this.data||(this.data=new a(this)),this.data.get(t)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return r(this)},willRender:function(t){return!(15!==this.renderFlags||0===this.list.length||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function(){for(var t=this,e=this.parentContainer,i=[];e&&(i.unshift(e.getIndex(t)),(t=e).parentContainer);)e=e.parentContainer;return i.unshift(this.displayList.getIndex(t)),i},addChildCallback:function(t){var e=t.displayList;e&&e!==this&&t.removeFromDisplayList(),t.displayList||(this.queueDepthSort(),t.displayList=this,t.emit(l.ADDED_TO_SCENE,t,this.scene),this.events.emit(d.ADDED_TO_SCENE,t,this.scene))},removeChildCallback:function(t){this.queueDepthSort(),t.displayList=null,t.emit(l.REMOVED_FROM_SCENE,t,this.scene),this.events.emit(d.REMOVED_FROM_SCENE,t,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(p(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(t,e){return t._depth-e._depth},getChildren:function(){return this.list},addToDisplayList:function(t){return void 0===t&&(t=this.scene.sys.displayList),this.displayList&&this.displayList!==t&&this.removeFromDisplayList(),t.exists(this)||((this.displayList=t).add(this,!0),t.queueDepthSort(),this.emit(l.ADDED_TO_SCENE,this,this.scene),t.events.emit(d.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var t=this.displayList||this.scene.sys.displayList;return t.exists(this)&&(t.remove(this,!0),t.queueDepthSort(),this.displayList=null,this.emit(l.REMOVED_FROM_SCENE,this,this.scene),t.events.emit(d.REMOVED_FROM_SCENE,this,this.scene)),this},destroy:function(t){if(this.scene&&!this.ignoreDestroy){this.emit(l.DESTROY,this);for(var e=this.list;e.length;)e[0].destroy(t);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0,!1),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});t.exports=i},2956:t=>{t.exports=function(t,e,i){var o=e.list;if(0!==o.length){e.depthSort();var s=-1!==e.blendMode,n=(s||t.setBlendMode(0),e._alpha);e.mask&&e.mask.preRenderCanvas(t,null,i);for(var r=0;r<o.length;r++){var a,h=o[r];h.willRender(i)&&(a=h.alpha,s||h.blendMode===t.currentBlendMode||t.setBlendMode(h.blendMode),h.setAlpha(a*n),h.renderCanvas(t,h,i),h.setAlpha(a))}e.mask&&e.mask.postRenderCanvas(t)}}},25179:(t,e,i)=>{var o=i(25305),s=i(93595),n=i(44603),r=i(23568);n.register("layer",function(t,e){var i=r(t=void 0===t?{}:t,"children",null),i=new s(this.scene,i);return void 0!==e&&(t.add=e),o(this.scene,i,t),i})},20005:(t,e,i)=>{var o=i(93595);i(39429).register("layer",function(t){return this.displayList.add(new o(this.scene,t))})},33963:(t,e,i)=>{i(29747);var o=i(15869),i=i(2956);t.exports={renderWebGL:o,renderCanvas:i}},15869:t=>{t.exports=function(t,e,i){var o=e.list,s=o.length;if(0!==s){e.depthSort(),t.pipelines.preBatch(e);var n=-1!==e.blendMode;n||t.setBlendMode(0);for(var r=e.alpha,a=0;a<s;a++){var h,l,c,u,d,p,f=o[a];f.willRender(i)&&(u=void 0!==f.alphaTopLeft?(h=f.alphaTopLeft,l=f.alphaTopRight,c=f.alphaBottomLeft,f.alphaBottomRight):c=l=h=f.alpha,n||f.blendMode===t.currentBlendMode||t.setBlendMode(f.blendMode),(d=f.mask)&&d.preRenderWebGL(t,f,i),(p=f.type)!==t.currentType&&(t.newType=!0,t.currentType=p),t.nextTypeMatch=a<s-1&&o[a+1].type===t.currentType,f.setAlpha(h*r,l*r,c*r,u*r),f.renderWebGL(t,f,i),f.setAlpha(h,l,c,u),d&&d.postRenderWebGL(t,i),t.newType=!1)}t.pipelines.postBatch(e)}}},41432:(t,e,i)=>{var a=i(96503),o=i(83419),s=i(31401),h=i(51767),n=i(70554),r=new o({Extends:a,Mixins:[s.Origin,s.ScrollFactor,s.Visible],initialize:function(t,e,i,o,s,n,r){a.call(this,t,e,i),this.color=new h(o,s,n),this.intensity=r,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(i)},displayWidth:{get:function(){return this.diameter},set:function(t){this.diameter=t}},displayHeight:{get:function(){return this.diameter},set:function(t){this.diameter=t}},width:{get:function(){return this.diameter},set:function(t){this.diameter=t}},height:{get:function(){return this.diameter},set:function(t){this.diameter=t}},willRender:function(t){return!(r.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},setColor:function(t){t=n.getFloatsFromUintRGB(t);return this.color.set(t[0],t[1],t[2]),this},setIntensity:function(t){return this.intensity=t,this},setRadius:function(t){return this.radius=t,this}});r.RENDER_MASK=15,t.exports=r},61356:(t,e,i)=>{var r=i(81491),o=i(83419),a=i(20339),n=i(41432),h=i(80321),s=i(51767),l=i(19133),c=i(19186),u=i(70554),i=new o({initialize:function(){this.lights=[],this.ambientColor=new s(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(t,e,i,o,s,n){return this.systems.displayList.add(new h(this.scene,t,e,i,o,s,n))},enable:function(){return-1===this.maxLights&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(t){for(var e=this.lights,i=t.worldView,o=[],s=0;s<e.length;s++){var n=e[s];n.willRender(t)&&r(n,i)&&o.push({light:n,distance:a(n.x,n.y,i.centerX,i.centerY)})}return o.length>this.maxLights&&(c(o,this.sortByDistance),o=o.slice(0,this.maxLights)),this.visibleLights=o.length,o},sortByDistance:function(t,e){return t.distance>=e.distance},setAmbientColor:function(t){t=u.getFloatsFromUintRGB(t);return this.ambientColor.set(t[0],t[1],t[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(t,e,i,o,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=128),void 0===s&&(s=1);o=u.getFloatsFromUintRGB(o=void 0===o?16777215:o),t=new n(t,e,i,o[0],o[1],o[2],s);return this.lights.push(t),t},removeLight:function(t){t=this.lights.indexOf(t);return 0<=t&&l(this.lights,t),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});t.exports=i},88992:(t,e,i)=>{var o=i(83419),s=i(61356),n=i(37277),r=i(44594),i=new o({Extends:s,initialize:function(t){this.scene=t,this.systems=t.sys,t.sys.settings.isBooted||t.sys.events.once(r.BOOT,this.boot,this),s.call(this)},boot:function(){var t=this.systems.events;t.on(r.SHUTDOWN,this.shutdown,this),t.on(r.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});n.register("LightsPlugin",i,"lights"),t.exports=i},4703:(t,e,i)=>{var o=i(83419),s=i(31401),n=i(39506),r=i(83997),d=i(95643),c=i(34684),a=i(92515),h=i(91296),p=i(37867),l=i(29807),u=i(43396),f=i(19186),b=i(25836),y=i(39318),i=new o({Extends:d,Mixins:[s.AlphaSingle,s.BlendMode,s.Depth,s.Mask,s.Pipeline,s.PostPipeline,s.ScrollFactor,s.Size,s.Texture,s.Transform,s.Visible,l],initialize:function(t,e,i,o,s,n,r,a,h,l,c,u){void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o="__WHITE"),d.call(this,t,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new b,this.modelScale=new b(1,1,1),this.modelRotation=new b,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new p,this.viewPosition=new b,this.viewMatrix=new p,this.projectionMatrix=new p,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;t=t.sys.renderer;this.setPosition(e,i),this.setTexture(o,s),this.setSize(t.width,t.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(t.width,t.height),n&&this.addVertices(n,r,a,h,l,c,u)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(t){return this.viewPosition.addScale(b.LEFT,t),this.dirtyCache[10]=1,this},panY:function(t){return this.viewPosition.y+=b.DOWN.y*t,this.dirtyCache[10]=1,this},panZ:function(t){return this.viewPosition.z+=t,this.dirtyCache[10]=1,this},setPerspective:function(t,e,i,o,s){return void 0===o&&(o=.01),void 0===s&&(s=1e3),this.fov=i=void 0===i?45:i,this.projectionMatrix.perspective(n(i),t/e,o,s),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(t,e,i,o){return void 0===t&&(t=this.scene.sys.renderer.getAspectRatio()),void 0===e&&(e=1),void 0===i&&(i=-1e3),void 0===o&&(o=1e3),this.fov=0,this.projectionMatrix.ortho(-t,t,-e,e,i,o),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(t){t.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(t,e,i,o,s,n,r,a,h){var l,t=this.scene.sys.cache.obj.get(t);return(l=t?c(t,this,e,i,o,s,n,r,a,h):l)&&l.verts.length,this},sortByDepth:function(t,e){return t.depth-e.depth},depthSort:function(){return f(this.faces,this.sortByDepth),this},addVertex:function(t,e,i,o,s,n,r){t=new y(t,e,i,o,s,n,r);return this.vertices.push(t),t},addFace:function(t,e,i){t=new r(t,e,i);return this.faces.push(t),this.dirtyCache[9]=-1,t},addVertices:function(t,e,i,o,s,n,r){t=a(t,e,i,o,s,n,r);return t&&(this.faces=this.faces.concat(t.faces),this.vertices=this.vertices.concat(t.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(t){return this.faces[t]},hasFaceAt:function(t,e,i){void 0===i&&(i=this.scene.sys.cameras.main);for(var o=h(this,i).calc,s=this.faces,n=0;n<s.length;n++)if(s[n].contains(t,e,o))return!0;return!1},getFaceAt:function(t,e,i){void 0===i&&(i=this.scene.sys.cameras.main);for(var o=h(this,i).calc,s=this.faces,n=[],r=0;r<s.length;r++){var a=s[r];a.contains(t,e,o)&&n.push(a)}return f(n,this.sortByDepth)},setDebug:function(t,e){return this.debugGraphic=t,this.debugCallback=t||e?e||this.renderDebug:null,this},isDirty:function(){var t=this.modelPosition,e=this.modelRotation,i=this.modelScale,o=this.dirtyCache,s=t.x,n=t.y,t=t.z,r=e.x,a=e.y,e=e.z,h=i.x,l=i.y,i=i.z,c=this.getFaceCount(),u=o[0],d=o[1],p=o[2],f=o[3],b=o[4],y=o[5],m=o[6],x=o[7],g=o[8],v=o[9];return o[0]=s,o[1]=n,o[2]=t,o[3]=r,o[4]=a,o[5]=e,o[6]=h,o[7]=l,o[8]=i,o[9]=c,u!==s||d!==n||p!==t||f!==r||b!==a||y!==e||m!==h||x!==l||g!==i||v!==c},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var t=this.dirtyCache;if(this.ignoreDirtyCache||t[10]||this.isDirty()){var e=this.width,i=this.height,o=this.viewMatrix,s=this.viewPosition,n=(t[10]&&(o.identity(),o.translate(s),o.invert(),t[10]=0),this.transformMatrix);n.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var r=s.z,a=this.faces,h=0;h<a.length;h++)a[h].transformCoordinatesLocal(n,e,i,r);this.depthSort()}},renderDebug:function(t,e){for(var i=t.debugGraphic,o=0;o<e.length;o++){var s=e[o],n=s.vertex1.tx,r=s.vertex1.ty,a=s.vertex2.tx,h=s.vertex2.ty,l=s.vertex3.tx,s=s.vertex3.ty;i.strokeTriangle(n,r,a,h,l,s)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(t){void 0===t&&(t={});var e=function(t,e,i){for(var o=this.faces,s=0;s<o.length;s++)if(o[s].contains(e,i))return!0;return!1}.bind(this);return this.scene.sys.input.enable(this,t,e),this},setTint:function(t){void 0===t&&(t=16777215);for(var e=this.vertices,i=0;i<e.length;i++)e[i].color=t;return this},uvScroll:function(t,e){for(var i=this.faces,o=0;o<i.length;o++)i[o].scrollUV(t,e);return this},uvScale:function(t,e){for(var i=this.faces,o=0;o<i.length;o++)i[o].scaleUV(t,e);return this},tint:{set:function(t){this.setTint(t)}},rotateX:{get:function(){return u(this.modelRotation.x)},set:function(t){this.modelRotation.x=n(t)}},rotateY:{get:function(){return u(this.modelRotation.y)},set:function(t){this.modelRotation.y=n(t)}},rotateZ:{get:function(){return u(this.modelRotation.z)},set:function(t){this.modelRotation.z=n(t)}}});t.exports=i},36488:t=>{t.exports=function(){}},20527:(t,e,i)=>{var u=i(25305),o=i(44603),d=i(23568),p=i(35154),f=i(4703);o.register("mesh",function(t,e){var i=d(t=void 0===t?{}:t,"key",null),o=d(t,"frame",null),s=p(t,"vertices",[]),n=p(t,"uvs",[]),r=p(t,"indicies",[]),a=p(t,"containsZ",!1),h=p(t,"normals",[]),l=p(t,"colors",16777215),c=p(t,"alphas",1),i=new f(this.scene,0,0,i,o,s,n,r,a,h,l,c);return void 0!==e&&(t.add=e),u(this.scene,i,t),i})},9225:(t,e,i)=>{var u=i(4703);i(39429).register("mesh",function(t,e,i,o,s,n,r,a,h,l,c){return this.displayList.add(new u(this.scene,t,e,i,o,s,n,r,a,h,l,c))})},29807:(t,e,i)=>{i(29747);var o=i(48833),i=i(36488);t.exports={renderWebGL:o,renderCanvas:i}},48833:(t,e,i)=>{var P=i(91296);t.exports=function(t,e,i,o){var s=e.faces,n=s.length;if(0!==n){i.addToRenderList(e);var r=t.pipelines.set(e.pipeline,e),o=P(e,i,o).calc;t.pipelines.preBatch(e);for(var a=r.setGameObject(e),h=r.vertexViewF32,l=r.vertexViewU32,c=r.vertexCount*r.currentShader.vertexComponentCount-1,u=e.tintFill,d=[],p=e.debugCallback,f=o.a,b=o.b,y=o.c,m=o.d,x=o.e,g=o.f,v=e.viewPosition.z,_=e.hideCCW,w=i.roundPixels,S=i.alpha*e.alpha,A=0,C=0;C<n;C++){var T=s[C];T.isInView(i,_,v,S,f,b,y,m,x,g,w)&&(r.shouldFlush(3)&&(r.flush(),a=r.setGameObject(e),c=0),c=T.load(h,l,c,a,u),A++,r.vertexCount+=3,r.currentBatch.count=r.vertexCount-r.currentBatch.start,p)&&d.push(T)}e.totalFrame+=A,p&&p.call(e,e,d),t.pipelines.postBatch(e)}}},28103:(t,e,i)=>{var o=i(83419),s=i(31401),p=i(95643),n=i(78023),f=i(39318),i=new o({Extends:p,Mixins:[s.AlphaSingle,s.BlendMode,s.Depth,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.PostPipeline,s.ScrollFactor,s.Texture,s.Transform,s.Visible,n],initialize:function(t,e,i,o,s,n,r,a,h,l,c){p.call(this,t,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1;t=t.textures.getFrame(o,s);this.is3Slice=!l&&!c,t.scale9&&(this.is3Slice=t.is3Slice);for(var u=this.is3Slice?18:54,d=0;d<u;d++)this.vertices.push(new f);this.setPosition(e,i),this.setTexture(o,s),this.setSlices(n,r,a,h,l,c,!1),this.updateDisplayOrigin(),this.initPipeline(),this.initPostPipeline()},setSlices:function(t,e,i,o,s,n,r){void 0===i&&(i=10),void 0===o&&(o=10),void 0===s&&(s=0),void 0===n&&(n=0),void 0===r&&(r=!1);var a,h=this.frame,l=!1;return(l=!(!this.is3Slice||!r||0===s||0===n)||l)||(h.scale9&&!r?(r=(l=h.data.scale9Borders).x,a=l.y,o=h.width-l.w-(i=r),n=h.height-l.h-(s=a),void 0===t&&(t=h.width),void 0===e&&(e=h.height)):(void 0===t&&(t=256),void 0===e&&(e=256)),this._width=t,this._height=e,this.leftWidth=i,this.rightWidth=o,this.topHeight=s,this.bottomHeight=n,this.is3Slice&&(e=h.height,this._height=e,this.topHeight=e,this.bottomHeight=0),this.updateVertices(),this.updateUVs()),this},updateUVs:function(){var t=this.leftWidth,e=this.rightWidth,i=this.topHeight,o=this.bottomHeight,s=this.frame.width,n=this.frame.height;this.updateQuadUVs(0,0,0,t/s,i/n),this.updateQuadUVs(6,t/s,0,1-e/s,i/n),this.updateQuadUVs(12,1-e/s,0,1,i/n),this.is3Slice||(this.updateQuadUVs(18,0,i/n,t/s,1-o/n),this.updateQuadUVs(24,t/s,i/n,1-e/s,1-o/n),this.updateQuadUVs(30,1-e/s,i/n,1,1-o/n),this.updateQuadUVs(36,0,1-o/n,t/s,1),this.updateQuadUVs(42,t/s,1-o/n,1-e/s,1),this.updateQuadUVs(48,1-e/s,1-o/n,1,1))},updateVertices:function(){var t=this.leftWidth,e=this.rightWidth,i=this.topHeight,o=this.bottomHeight,s=this.width,n=this.height;this.updateQuad(0,-.5,.5,t/s-.5,.5-i/n),this.updateQuad(6,t/s-.5,.5,.5-e/s,.5-i/n),this.updateQuad(12,.5-e/s,.5,.5,.5-i/n),this.is3Slice||(this.updateQuad(18,-.5,.5-i/n,t/s-.5,o/n-.5),this.updateQuad(24,t/s-.5,.5-i/n,.5-e/s,o/n-.5),this.updateQuad(30,.5-e/s,.5-i/n,.5,o/n-.5),this.updateQuad(36,-.5,o/n-.5,t/s-.5,-.5),this.updateQuad(42,t/s-.5,o/n-.5,.5-e/s,-.5),this.updateQuad(48,.5-e/s,o/n-.5,.5,-.5))},updateQuad:function(t,e,i,o,s){var n=this.width,r=this.height,a=this.originX,h=this.originY,l=this.vertices;l[t+0].resize(e,i,n,r,a,h),l[t+1].resize(e,s,n,r,a,h),l[t+2].resize(o,i,n,r,a,h),l[t+3].resize(e,s,n,r,a,h),l[t+4].resize(o,s,n,r,a,h),l[t+5].resize(o,i,n,r,a,h)},updateQuadUVs:function(t,e,i,o,s){var n=this.vertices,r=this.frame,a=r.u0,h=r.v0,l=r.u1,r=r.v1;0===a&&1===l||(e=a+e*(l=l-a),o=a+o*l),0===h&&1===r||(i=h+i*(a=r-h),s=h+s*a),n[t+0].setUVs(e,i),n[t+1].setUVs(e,s),n[t+2].setUVs(o,i),n[t+3].setUVs(e,s),n[t+4].setUVs(o,s),n[t+5].setUVs(o,i)},clearTint:function(){return this.setTint(16777215),this},setTint:function(t){return this.tint=t=void 0===t?16777215:t,this.tintFill=!1,this},setTintFill:function(t){return this.setTint(t),this.tintFill=!0,this},isTinted:{get:function(){return 16777215!==this.tint}},width:{get:function(){return this._width},set:function(t){this._width=Math.max(t,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(t){this.is3Slice||(this._height=Math.max(t,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,e){this.width=t,this.height=e,this.updateDisplayOrigin();t=this.input;return t&&!t.customHitArea&&(t.hitArea.width=this.width,t.hitArea.height=this.height),this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this},originX:{get:function(){return this._originX},set:function(t){this._originX=t,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(t){this._originY=t,this.updateVertices()}},setOrigin:function(t,e){return void 0===t&&(t=.5),void 0===e&&(e=t),this._originX=t,this._originY=e,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){var t;return this.is3Slice&&(t=this.frame.height,this._height=t,this.topHeight=t,this.bottomHeight=0),this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});t.exports=i},28279:(t,e,i)=>{var c=i(25305),o=i(44603),u=i(23568),d=i(35154),p=i(28103);o.register("nineslice",function(t,e){var i=u(t=void 0===t?{}:t,"key",null),o=u(t,"frame",null),s=d(t,"width",256),n=d(t,"height",256),r=d(t,"leftWidth",10),a=d(t,"rightWidth",10),h=d(t,"topHeight",0),l=d(t,"bottomHeight",0),i=new p(this.scene,0,0,i,o,s,n,r,a,h,l);return void 0!==e&&(t.add=e),c(this.scene,i,t),i})},47521:(t,e,i)=>{var c=i(28103);i(39429).register("nineslice",function(t,e,i,o,s,n,r,a,h,l){return this.displayList.add(new c(this.scene,t,e,i,o,s,n,r,a,h,l))})},78023:(t,e,i)=>{var o=i(29747),i=i(52230);t.exports={renderWebGL:i,renderCanvas:o}},52230:(t,e,i)=>{var x=i(91296),g=i(70554);t.exports=function(t,e,i,o){var s=e.vertices,n=s.length;if(0!==n){i.addToRenderList(e);var r=t.pipelines.set(e.pipeline,e),a=x(e,i,o,!1).calc,h=(t.pipelines.preBatch(e),r.setGameObject(e)),l=r.vertexViewF32,c=r.vertexViewU32,u=r.vertexCount*r.currentShader.vertexComponentCount-1,d=i.roundPixels,p=e.tintFill,o=i.alpha*e.alpha,f=g.getTintAppendFloatAlpha(e.tint,o),i=r.vertexAvailable(),b=-1;i<n&&(b=i);for(var y=0;y<n;y++){var m=s[y];y===b&&(r.flush(),h=r.setGameObject(e),u=0),l[++u]=a.getXRound(m.vx,m.vy,d),l[++u]=a.getYRound(m.vx,m.vy,d),l[++u]=m.u,l[++u]=m.v,l[++u]=h,l[++u]=p,c[++u]=f,r.vertexCount++,r.currentBatch.count=r.vertexCount-r.currentBatch.start}t.pipelines.postBatch(e)}}},76472:(t,e,i)=>{var o=i(83419),s=i(44777),n=i(37589),r=i(6113),a=i(91389),h=i(90664),i=new o({Extends:s,initialize:function(t){s.call(this,t,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return null===this.propertyValue?0:9},setMethods:function(){var t=this.propertyValue,e=t,i=this.defaultEmit,o=this.defaultUpdate;if(9===this.method){this.start=t[0],this.ease=r("Linear"),this.interpolation=a("linear"),i=this.easedValueEmit,o=this.easeValueUpdate,e=t[0],this.active=!0;for(var s=0;s<t.length;s++){var n=h(t[s]);this.r.push(n.r),this.g.push(n.g),this.b.push(n.b)}}return this.onEmit=i,this.onUpdate=o,this.current=e,this},setEase:function(t){this.easeName=t,this.ease=r(t)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(t,e,i){var i=this.ease(i),o=this.interpolation(this.r,i),s=this.interpolation(this.g,i),i=this.interpolation(this.b,i),o=n(o,s,i);return this.current=o}});t.exports=i},44777:(t,e,i)=>{var o=i(30976),s=i(45319),n=i(83419),r=i(99472),a=i(6113),h=i(95540),l=i(91389),c=i(77720),u=i(15994),i=new n({initialize:function(t,e,i){void 0===i&&(i=!1),this.propertyKey=t,this.propertyValue=e,this.defaultValue=e,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=i,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(t,e){void 0===t&&(t={}),e&&(this.propertyKey=e),this.propertyValue=h(t,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(t){switch(this.method){case 1:case 3:case 8:i=t;break;case 2:0<=this.propertyValue.indexOf(t)&&(i=t);break;case 4:var e=(this.end-this.start)/this.steps,i=c(t,e);this.counter=i;break;case 5:case 6:case 7:i=s(t,this.start,this.end);break;case 9:i=this.start[0]}return this.current=i,this},getMethod:function(){var t=this.propertyValue;if(null!==t){var e=typeof t;if("number"==e)return 1;if(Array.isArray(t))return 2;if("function"==e)return 3;if("object"==e){if(this.hasBoth(t,"start","end"))return this.has(t,"steps")?4:5;if(this.hasBoth(t,"min","max"))return 6;if(this.has(t,"random"))return 7;if(this.hasEither(t,"onEmit","onUpdate"))return 8;if(this.hasEither(t,"values","interpolation"))return 9}}return 0},setMethods:function(){var t=this.propertyValue,e=t,i=this.defaultEmit,o=this.defaultUpdate;switch(this.method){case 1:i=this.staticValueEmit;break;case 2:i=this.randomStaticValueEmit,e=t[0];break;case 3:this._onEmit=t,i=this.proxyEmit;break;case 4:this.start=t.start,this.end=t.end,this.steps=t.steps,this.counter=this.start,this.yoyo=!!this.has(t,"yoyo")&&t.yoyo,this.direction=0,i=this.steppedEmit,e=this.start;break;case 5:this.start=t.start,this.end=t.end;var s=this.has(t,"ease")?t.ease:"Linear";this.ease=a(s,t.easeParams),i=this.has(t,"random")&&t.random?this.randomRangedValueEmit:this.easedValueEmit,o=this.easeValueUpdate,e=this.start;break;case 6:this.start=t.min,this.end=t.max,i=this.has(t,"int")&&t.int?this.randomRangedIntEmit:this.randomRangedValueEmit,e=this.start;break;case 7:s=t.random;Array.isArray(s)&&(this.start=s[0],this.end=s[1]),i=this.randomRangedIntEmit,e=this.start;break;case 8:this._onEmit=this.has(t,"onEmit")?t.onEmit:this.defaultEmit,this._onUpdate=this.has(t,"onUpdate")?t.onUpdate:this.defaultUpdate,i=this.proxyEmit,o=this.proxyUpdate;break;case 9:this.start=t.values;s=this.has(t,"ease")?t.ease:"Linear";this.ease=a(s,t.easeParams),this.interpolation=l(t.interpolation),i=this.easedValueEmit,o=this.easeValueUpdate,e=this.start[0]}return this.onEmit=i,this.onUpdate=o,this.current=e,this},has:function(t,e){return t.hasOwnProperty(e)},hasBoth:function(t,e,i){return t.hasOwnProperty(e)&&t.hasOwnProperty(i)},hasEither:function(t,e,i){return t.hasOwnProperty(e)||t.hasOwnProperty(i)},defaultEmit:function(t,e,i){return i},defaultUpdate:function(t,e,i,o){return o},proxyEmit:function(t,e,i){t=this._onEmit(t,e,i);return this.current=t},proxyUpdate:function(t,e,i,o){t=this._onUpdate(t,e,i,o);return this.current=t},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var t=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[t],this.current},randomRangedValueEmit:function(t,e){var i=r(this.start,this.end);return t&&t.data[e]&&(t.data[e].min=i,t.data[e].max=this.end),this.current=i},randomRangedIntEmit:function(t,e){var i=o(this.start,this.end);return t&&t.data[e]&&(t.data[e].min=i,t.data[e].max=this.end),this.current=i},steppedEmit:function(){var t,e=this.counter,i=e,o=(this.end-this.start)/this.steps;return this.yoyo?(0===this.direction?(i+=o)>=this.end&&(t=i-this.end,i=this.end-t,this.direction=1):(i-=o)<=this.start&&(t=this.start-i,i=this.start+t,this.direction=0),this.counter=i):this.counter=u(i+o,this.start,this.end),this.current=e},easedValueEmit:function(t,e){return t&&t.data[e]&&((t=t.data[e]).min=this.start,t.max=this.end),this.current=this.start,this.start},easeValueUpdate:function(t,e,i){t=t.data[e],e=this.ease(i),i=this.interpolation?this.interpolation(this.start,e):(t.max-t.min)*e+t.min;return this.current=i},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});t.exports=i},24502:(t,e,i)=>{var o=i(83419),r=i(95540),a=i(20286),i=new o({Extends:a,initialize:function(t,e,i,o,s){var n;"object"==typeof t?(t=r(n=t,"x",0),e=r(n,"y",0),i=r(n,"power",0),o=r(n,"epsilon",100),s=r(n,"gravity",50)):(void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=100),void 0===s&&(s=50)),a.call(this,t,e,!0),this._gravity=s,this._power=i*s,this._epsilon=o*o},update:function(t,e){var i,o=this.x-t.x,s=this.y-t.y,n=o*o+s*s;0!==n&&(i=Math.sqrt(n),n<this._epsilon&&(n=this._epsilon),e=this._power*e/(n*i)*100,t.velocityX+=o*e,t.velocityY+=s*e)},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(t){this._epsilon=t*t}},power:{get:function(){return this._power/this._gravity},set:function(t){this._power=t*this._gravity}},gravity:{get:function(){return this._gravity},set:function(t){var e=this.power;this._gravity=t,this.power=e}}});t.exports=i},56480:(t,e,i)=>{var o=i(9674),f=i(45319),s=i(83419),l=i(39506),n=i(87841),c=i(11520),u=i(26099),i=new s({initialize:function(t){this.emitter=t,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new u,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=t.scene,this.anims=new o(this),this.bounds=new n},emit:function(t,e,i,o,s,n){return this.emitter.emit(t,e,i,o,s,n)},isAlive:function(){return 0<this.lifeCurrent},kill:function(){this.lifeCurrent=0},setPosition:function(t,e){void 0===e&&(e=0),this.x=t=void 0===t?0:t,this.y=e},fire:function(t,e){var i,o,s=this.emitter,n=s.ops,r=s.getAnim();if(r?this.anims.play(r):(this.frame=s.getFrame(),this.texture=this.frame.texture),this.frame)return s.getEmitZone(this),void 0===t?this.x+=n.x.onEmit(this,"x"):0<n.x.steps?this.x+=t+n.x.onEmit(this,"x"):this.x+=t,void 0===e?this.y+=n.y.onEmit(this,"y"):0<n.y.steps?this.y+=e+n.y.onEmit(this,"y"):this.y+=e,this.life=n.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=n.delay.onEmit(this,"delay"),this.holdCurrent=n.hold.onEmit(this,"hold"),this.scaleX=n.scaleX.onEmit(this,"scaleX"),this.scaleY=n.scaleY.active?n.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=n.rotate.onEmit(this,"rotate"),this.rotation=l(this.angle),s.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),0===this.delayCurrent&&s.getDeathZone(this)?(this.lifeCurrent=0,!1):(r=n.speedX.onEmit(this,"speedX"),t=n.speedY.active?n.speedY.onEmit(this,"speedY"):r,s.radial?(e=l(n.angle.onEmit(this,"angle")),this.velocityX=Math.cos(e)*Math.abs(r),this.velocityY=Math.sin(e)*Math.abs(t)):s.moveTo?(e=n.moveToX.onEmit(this,"moveToX"),i=n.moveToY.onEmit(this,"moveToY"),o=this.life/1e3,this.velocityX=(e-this.x)/o,this.velocityY=(i-this.y)/o):(this.velocityX=r,this.velocityY=t),s.acceleration&&(this.accelerationX=n.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=n.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=n.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=n.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=n.bounce.onEmit(this,"bounce"),this.alpha=n.alpha.onEmit(this,"alpha"),n.color.active?this.tint=n.color.onEmit(this,"tint"):this.tint=n.tint.onEmit(this,"tint"),!0);throw new Error("Particle has no texture frame")},update:function(t,e,i){if(this.lifeCurrent<=0)return!(0<this.holdCurrent)||(this.holdCurrent-=t,this.holdCurrent<=0);if(0<this.delayCurrent)return this.delayCurrent-=t,!1;this.anims.update(0,t);var o,s,n,r=this.emitter,a=r.ops,h=1-this.lifeCurrent/this.life;return this.lifeT=h,this.x=a.x.onUpdate(this,"x",h,this.x),this.y=a.y.onUpdate(this,"y",h,this.y),r.moveTo&&(o=a.moveToX.onUpdate(this,"moveToX",h,r.moveToX),s=a.moveToY.onUpdate(this,"moveToY",h,r.moveToY),n=this.lifeCurrent/1e3,this.velocityX=(o-this.x)/n,this.velocityY=(s-this.y)/n),this.computeVelocity(r,t,e,i,h),this.scaleX=a.scaleX.onUpdate(this,"scaleX",h,this.scaleX),a.scaleY.active?this.scaleY=a.scaleY.onUpdate(this,"scaleY",h,this.scaleY):this.scaleY=this.scaleX,this.angle=a.rotate.onUpdate(this,"rotate",h,this.angle),this.rotation=l(this.angle),r.getDeathZone(this)?!(this.lifeCurrent=0):(this.alpha=f(a.alpha.onUpdate(this,"alpha",h,this.alpha),0,1),a.color.active?this.tint=a.color.onUpdate(this,"color",h,this.tint):this.tint=a.tint.onUpdate(this,"tint",h,this.tint),this.lifeCurrent-=t,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(t,e,i,o,s){var n=t.ops,r=this.velocityX,a=this.velocityY,h=n.accelerationX.onUpdate(this,"accelerationX",s,this.accelerationX),l=n.accelerationY.onUpdate(this,"accelerationY",s,this.accelerationY),c=n.maxVelocityX.onUpdate(this,"maxVelocityX",s,this.maxVelocityX),u=n.maxVelocityY.onUpdate(this,"maxVelocityY",s,this.maxVelocityY);this.bounce=n.bounce.onUpdate(this,"bounce",s,this.bounce),r+=t.gravityX*i+h*i,a+=t.gravityY*i+l*i,r=f(r,-c,c),a=f(a,-u,u),this.velocityX=r,this.velocityY=a,this.x+=r*i,this.y+=a*i,t.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var d=0;d<o.length;d++){var p=o[d];p.active&&p.update(this,e,i,s)}},setSizeToFrame:function(){},getBounds:function(t){void 0===t&&(t=this.emitter.getWorldTransformMatrix());var e=Math.abs(t.scaleX)*this.scaleX,i=Math.abs(t.scaleY)*this.scaleY,o=this.x,s=this.y,n=this.rotation,e=this.frame.width*e/2,i=this.frame.height*i/2,r=this.bounds,a=new u(o-e,s-i),h=new u(o+e,s-i),l=new u(o-e,s+i),e=new u(o+e,s+i);return 0!==n&&(c(a,o,s,n),c(h,o,s,n),c(l,o,s,n),c(e,o,s,n)),t.transformPoint(a.x,a.y,a),t.transformPoint(h.x,h.y,h),t.transformPoint(l.x,l.y,l),t.transformPoint(e.x,e.y,e),r.x=Math.min(a.x,h.x,l.x,e.x),r.y=Math.min(a.y,h.y,l.y,e.y),r.width=Math.max(a.x,h.x,l.x,e.x)-r.x,r.height=Math.max(a.y,h.y,l.y,e.y)-r.y,r},destroy:function(){this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});t.exports=i},69601:(t,e,i)=>{var o=i(83419),h=i(20286),l=i(87841),i=new o({Extends:h,initialize:function(t,e,i,o,s,n,r,a){void 0===s&&(s=!0),void 0===n&&(n=!0),void 0===r&&(r=!0),void 0===a&&(a=!0),h.call(this,t,e,!0),this.bounds=new l(t,e,i,o),this.collideLeft=s,this.collideRight=n,this.collideTop=r,this.collideBottom=a},update:function(t){var e=this.bounds,i=-t.bounce,o=t.worldPosition;o.x<e.x&&this.collideLeft?(t.x+=e.x-o.x,t.velocityX*=i):o.x>e.right&&this.collideRight&&(t.x-=o.x-e.right,t.velocityX*=i),o.y<e.y&&this.collideTop?(t.y+=e.y-o.y,t.velocityY*=i):o.y>e.bottom&&this.collideBottom&&(t.y-=o.y-e.bottom,t.velocityY*=i)}});t.exports=i},31600:(t,e,i)=>{var o=i(83419),s=i(31401),n=i(53774),c=i(43459),r=i(26388),u=i(19909),a=i(76472),h=i(44777),p=i(20696),l=i(95643),d=i(95540),f=i(26546),b=i(24502),y=i(1985),m=i(97022),x=i(86091),g=i(73162),v=i(20074),_=i(56480),w=i(68875),S=i(87841),A=i(59996),C=i(72905),T=i(90668),P=i(19186),B=i(61340),E=i(26099),M=i(15994),D=i(69601),O=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],R=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],i=new o({Extends:l,Mixins:[s.AlphaSingle,s.BlendMode,s.Depth,s.Mask,s.Pipeline,s.PostPipeline,s.ScrollFactor,s.Texture,s.Transform,s.Visible,T],initialize:function(t,e,i,o,s){l.call(this,t,"ParticleEmitter"),this.particleClass=_,this.ops={accelerationX:new h("accelerationX",0),accelerationY:new h("accelerationY",0),alpha:new h("alpha",1),angle:new h("angle",{min:0,max:360},!0),bounce:new h("bounce",0),color:new a("color"),delay:new h("delay",0,!0),hold:new h("hold",0,!0),lifespan:new h("lifespan",1e3,!0),maxVelocityX:new h("maxVelocityX",1e4),maxVelocityY:new h("maxVelocityY",1e4),moveToX:new h("moveToX",0),moveToY:new h("moveToY",0),quantity:new h("quantity",1,!0),rotate:new h("rotate",0),scaleX:new h("scaleX",1),scaleY:new h("scaleY",1),speedX:new h("speedX",0,!0),speedY:new h("speedY",0,!0),tint:new h("tint",16777215),x:new h("x",0),y:new h("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new E,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new B,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new g(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(e,i),this.setTexture(o),s&&this.setConfig(s)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(t){if(t){for(var e,i=0,o="",s=this.ops,i=0;i<R.length;i++)s[o=R[i]].loadConfig(t);for(i=0;i<O.length;i++)m(t,o=O[i])&&(this[o]=d(t,o));this.acceleration=0!==this.accelerationX||0!==this.accelerationY,this.moveTo=0!==this.moveToX&&0!==this.moveToY,m(t,"speed")&&(s.speedX.loadConfig(t,"speed"),s.speedY.active=!1),(y(t,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),m(t,"scale")&&(s.scaleX.loadConfig(t,"scale"),s.scaleY.active=!1),m(t,"callbackScope")&&(e=d(t,"callbackScope",null),this.emitCallbackScope=e,this.deathCallbackScope=e),m(t,"emitZone")&&this.addEmitZone(t.emitZone),m(t,"deathZone")&&this.addDeathZone(t.deathZone),m(t,"bounds")&&((e=this.addParticleBounds(t.bounds)).collideLeft=d(t,"collideLeft",!0),e.collideRight=d(t,"collideRight",!0),e.collideTop=d(t,"collideTop",!0),e.collideBottom=d(t,"collideBottom",!0)),m(t,"followOffset")&&this.followOffset.setFromObject(d(t,"followOffset",0)),m(t,"texture")&&this.setTexture(t.texture),m(t,"frame")?this.setEmitterFrame(t.frame):m(t,"anim")&&this.setAnim(t.anim),m(t,"reserve")&&this.reserve(t.reserve),m(t,"advance")&&this.fastForward(t.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(p.START,this)}return this},toJSON:function(){for(var t=n(this),e=0,i="",e=0;e<O.length;e++)t[i=O[e]]=this[i];var o=this.ops;for(e=0;e<R.length;e++)o[i=R[e]]&&(t[i]=o[i].toJSON());return o.speedY.active||(delete t.speedX,t.speed=o.speedX.toJSON()),this.scaleX===this.scaleY&&(delete t.scaleX,delete t.scaleY,t.scale=o.scaleX.toJSON()),t},resetCounters:function(t,e){var i=this.counters;i.fill(0),i[0]=t,e&&(i[5]=1)},startFollow:function(t,e,i,o){return void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=!1),this.follow=t,this.followOffset.set(e,i),this.trackVisible=o,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var t,e=this.frames,i=e.length;return 1===i?t=e[0]:this.randomFrame?t=f(e):(t=e[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===i)&&(this.currentFrame=0)),this.texture.get(t)},setEmitterFrame:function(t,e,i){void 0===i&&(i=1),this.randomFrame=e=void 0===e?!0:e,this.frameQuantity=i,this.currentFrame=0;var e=typeof t;return this.frames.length=0,Array.isArray(t)?this.frames=this.frames.concat(t):"string"==e||"number"==e?this.frames.push(t):"object"==e&&((t=d(e=t,"frames",null))&&(this.frames=this.frames.concat(t)),t=d(e,"cycle",!1),this.randomFrame=!t,this.frameQuantity=d(e,"quantity",i)),1===this.frames.length&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var t=this.anims,e=t.length;return 0===e?null:1===e?t[0]:this.randomAnim?f(t):(t=t[this.currentAnim],this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=M(this.currentAnim+1,0,e)),t)},setAnim:function(t,e,i){void 0===i&&(i=1),this.randomAnim=e=void 0===e?!0:e,this.animQuantity=i,this.currentAnim=0;var e=typeof t;return this.anims.length=0,Array.isArray(t)?this.anims=this.anims.concat(t):"string"==e?this.anims.push(t):"object"==e&&((t=d(e=t,"anims",null))&&(this.anims=this.anims.concat(t)),t=d(e,"cycle",!1),this.randomAnim=!t,this.animQuantity=d(e,"quantity",i)),1===this.anims.length&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(t){return this.radial=t=void 0===t?!0:t,this},addParticleBounds:function(t,e,i,o,s,n,r,a){var h;return"object"==typeof t&&(t=(h=t).x,e=h.y,i=m(h,"w")?h.w:h.width,o=m(h,"h")?h.h:h.height),this.addParticleProcessor(new D(t,e,i,o,s,n,r,a))},setParticleSpeed:function(t,e){return void 0===e&&(e=t),this.ops.speedX.onChange(t),t===e?this.ops.speedY.active=!1:this.ops.speedY.onChange(e),this.radial=!0,this},setParticleScale:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),this.ops.scaleX.onChange(t),this.ops.scaleY.onChange(e),this},setParticleGravity:function(t,e){return this.gravityX=t,this.gravityY=e,this},setParticleAlpha:function(t){return this.ops.alpha.onChange(t),this},setParticleTint:function(t){return this.ops.tint.onChange(t),this},setEmitterAngle:function(t){return this.ops.angle.onChange(t),this},setParticleLifespan:function(t){return this.ops.lifespan.onChange(t),this},setQuantity:function(t){return this.quantity=t,this},setFrequency:function(t,e){return this.frequency=t,this.flowCounter=0<t?t:0,e&&(this.quantity=e),this},addDeathZone:function(t){var e;Array.isArray(t)||(t=[t]);for(var i,o,s=[],n=0;n<t.length;n++)(e=t[n])instanceof r?s.push(e):"function"==typeof e.contains?(e=new r(e,!0),s.push(e)):(i=d(e,"type","onEnter"),(o=d(e,"source",null))&&"function"==typeof o.contains&&(e=new r(o,"onEnter"===i),s.push(e)));return this.deathZones=this.deathZones.concat(s),s},removeDeathZone:function(t){return C(this.deathZones,t),this},clearDeathZones:function(){return this.deathZones.length=0,this},addEmitZone:function(t){Array.isArray(t)||(t=[t]);for(var e,i,o,s,n,r,a,h=[],l=0;l<t.length;l++)(a=t[l])instanceof w||a instanceof u?h.push(a):(e=d(a,"source",null))&&("random"===(i=d(a,"type","random"))&&"function"==typeof e.getRandomPoint?(a=new w(e),h.push(a)):"edge"===i&&"function"==typeof e.getPoints&&(i=d(a,"quantity",1),o=d(a,"stepRate",0),s=d(a,"yoyo",!1),n=d(a,"seamless",!0),r=d(a,"total",-1),a=new u(e,i,o,s,n,r),h.push(a)));return this.emitZones=this.emitZones.concat(h),h},removeEmitZone:function(t){return C(this.emitZones,t),this.zoneIndex=0,this},clearEmitZones:function(){return this.emitZones.length=0,this.zoneIndex=0,this},getEmitZone:function(t){var e=this.emitZones,i=e.length;0!==i&&((e=e[this.zoneIndex]).getPoint(t),-1<e.total)&&(this.zoneTotal++,this.zoneTotal===e.total)&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===i)&&(this.zoneIndex=0)},getDeathZone:function(t){for(var e=this.deathZones,i=0;i<e.length;i++){var o=e[i];if(o.willKill(t))return this.emit(p.DEATH_ZONE,this,t,o),!0}return!1},setEmitZone:function(t){return 0<=(t=isFinite(t)?t:this.emitZones.indexOf(t))&&(this.zoneIndex=t),this},addParticleProcessor:function(t){return this.processors.exists(t)||(t.emitter&&t.emitter.removeParticleProcessor(t),this.processors.add(t),t.emitter=this),t},removeParticleProcessor:function(t){return this.processors.exists(t)&&(this.processors.remove(t,!0),t.emitter=null),t},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(t){return this.addParticleProcessor(new b(t))},reserve:function(t){var e,i=this.dead;0<this.maxParticles&&(e=this.getParticleCount())+t>this.maxParticles&&(t=this.maxParticles-(e+t));for(var o=0;o<t;o++)i.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return 0<this.maxParticles&&this.getParticleCount()>=this.maxParticles||0<this.maxAliveParticles&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(t,e){return void 0===t?(this.emitCallback=null,this.emitCallbackScope=null):"function"==typeof t&&(this.emitCallback=t,e)&&(this.emitCallbackScope=e),this},onParticleDeath:function(t,e){return void 0===t?(this.deathCallback=null,this.deathCallbackScope=null):"function"==typeof t&&(this.deathCallback=t,e)&&(this.deathCallbackScope=e),this},killAll:function(){for(var t=this.dead,e=this.alive;0<e.length;)t.push(e.pop());return this},forEachAlive:function(t,e){for(var i=this.alive,o=i.length,s=0;s<o;s++)t.call(e,i[s],this);return this},forEachDead:function(t,e){for(var i=this.dead,o=i.length,s=0;s<o;s++)t.call(e,i[s],this);return this},start:function(t,e){return void 0===t&&(t=0),this.emitting||(0<t&&this.fastForward(t),this.emitting=!0,this.resetCounters(this.frequency,!0),void 0!==e&&(this.duration=Math.abs(e)),this.emit(p.START,this)),this},stop:function(t){return void 0===t&&(t=!1),this.emitting&&(this.emitting=!1,t&&this.killAll(),this.emit(p.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(t,e){return void 0===e&&(e=this.true),this.sortProperty=t=void 0===t?"":t,this.sortOrderAsc=e,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(t){return t=""!==this.sortProperty?this.depthSortCallback:null,this.sortCallback=t,this},depthSort:function(){return P(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(t,e){var i=this.sortProperty;return this.sortOrderAsc?t[i]-e[i]:e[i]-t[i]},flow:function(t,e,i){return void 0===e&&(e=1),this.emitting=!1,this.frequency=t,this.quantity=e,void 0!==i&&(this.stopAfter=i),this.start()},explode:function(t,e,i){this.frequency=-1,this.resetCounters(-1,!0);t=this.emitParticle(t,e,i);return this.emit(p.EXPLODE,this,t),t},emitParticleAt:function(t,e,i){return this.emitParticle(i,t,e)},emitParticle:function(t,e,i){if(!this.atLimit()){void 0===t&&(t=this.ops.quantity.onEmit());for(var o=this.dead,s=this.stopAfter,n=this.follow?this.follow.x+this.followOffset.x:e,r=this.follow?this.follow.y+this.followOffset.y:i,a=0;a<t;a++){var h=o.pop();if((h=h||new this.particleClass(this)).fire(n,r)?(this.particleBringToTop?this.alive.push(h):this.alive.unshift(h),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,h,this)):this.dead.push(h),0<s&&(this.stopCounter++,this.stopCounter>=s))break;if(this.atLimit())break}return h}},fastForward:function(t,e){void 0===e&&(e=1e3/60);var i=0;for(this.skipping=!0;i<Math.abs(t);)this.preUpdate(0,e),i+=e;return this.skipping=!1,this},preUpdate:function(t,e){var i=(e*=this.timeScale)/1e3,o=(this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix),this.getProcessors()),s=this.alive,n=this.dead,r=0,a=[],h=s.length;for(r=0;r<h;r++){var l=s[r];l.update(e,i,o)&&a.push({index:r,particle:l})}if(0<(h=a.length))for(var c=this.deathCallback,u=this.deathCallbackScope,r=h-1;0<=r;r--){var d=a[r];s.splice(d.index,1),n.push(d.particle),c&&c.call(u,d.particle),d.particle.setPosition()}if(this.emitting||this.skipping){if(0===this.frequency)this.emitParticle();else if(0<this.frequency)for(this.flowCounter-=e;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(0<this.duration&&(this.elapsed+=e,this.elapsed>=this.duration)&&this.stop(),0<this.stopAfter&&this.stopCounter>=this.stopAfter&&this.stop())}else 1===this.completeFlag&&0===s.length&&(this.completeFlag=0,this.emit(p.COMPLETE,this))},overlap:function(t){for(var e=this.getWorldTransformMatrix(),i=this.alive,o=i.length,s=[],n=0;n<o;n++){var r=i[n];A(t,r.getBounds(e))&&s.push(r)}return s},getBounds:function(t,e,i,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=1e3/60),void 0===o&&(o=new S);var s,n,r=this.getWorldTransformMatrix(),a=this.alive,h=!1;if(o.setTo(0,0,0,0),0<e){var l=0;for(this.skipping=!0;l<Math.abs(e);){for(this.preUpdate(0,i),s=0;s<a.length;s++)n=a[s].getBounds(r),h?v(o,n):(h=!0,c(n,o));l+=i}this.skipping=!1}else for(s=0;s<a.length;s++)n=a[s].getBounds(r),h?v(o,n):(h=!0,c(n,o));return 0<t&&x(o,t,t),o},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(t){this.ops.x.onChange(t)}},particleY:{get:function(){return this.ops.y.current},set:function(t){this.ops.y.onChange(t)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(t){this.ops.accelerationX.onChange(t)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(t){this.ops.accelerationY.onChange(t)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(t){this.ops.maxVelocityX.onChange(t)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(t){this.ops.maxVelocityY.onChange(t)}},speed:{get:function(){return this.ops.speedX.current},set:function(t){this.ops.speedX.onChange(t),this.ops.speedY.onChange(t)}},speedX:{get:function(){return this.ops.speedX.current},set:function(t){this.ops.speedX.onChange(t)}},speedY:{get:function(){return this.ops.speedY.current},set:function(t){this.ops.speedY.onChange(t)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(t){this.ops.moveToX.onChange(t)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(t){this.ops.moveToY.onChange(t)}},bounce:{get:function(){return this.ops.bounce.current},set:function(t){this.ops.bounce.onChange(t)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(t){this.ops.scaleX.onChange(t)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(t){this.ops.scaleY.onChange(t)}},particleColor:{get:function(){return this.ops.color.current},set:function(t){this.ops.color.onChange(t)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(t){this.ops.color.setEase(t)}},particleTint:{get:function(){return this.ops.tint.current},set:function(t){this.ops.tint.onChange(t)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(t){this.ops.alpha.onChange(t)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(t){this.ops.lifespan.onChange(t)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(t){this.ops.angle.onChange(t)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(t){this.ops.rotate.onChange(t)}},quantity:{get:function(){return this.ops.quantity.current},set:function(t){this.ops.quantity.onChange(t)}},delay:{get:function(){return this.ops.delay.current},set:function(t){this.ops.delay.onChange(t)}},hold:{get:function(){return this.ops.hold.current},set:function(t){this.ops.hold.onChange(t)}},flowCounter:{get:function(){return this.counters[0]},set:function(t){this.counters[0]=t}},frameCounter:{get:function(){return this.counters[1]},set:function(t){this.counters[1]=t}},animCounter:{get:function(){return this.counters[2]},set:function(t){this.counters[2]=t}},elapsed:{get:function(){return this.counters[3]},set:function(t){this.counters[3]=t}},stopCounter:{get:function(){return this.counters[4]},set:function(t){this.counters[4]=t}},completeFlag:{get:function(){return this.counters[5]},set:function(t){this.counters[5]=t}},zoneIndex:{get:function(){return this.counters[6]},set:function(t){this.counters[6]=t}},zoneTotal:{get:function(){return this.counters[7]},set:function(t){this.counters[7]=t}},currentFrame:{get:function(){return this.counters[8]},set:function(t){this.counters[8]=t}},currentAnim:{get:function(){return this.counters[9]},set:function(t){this.counters[9]=t}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;for(var t=this.ops,e=0;e<R.length;e++)t[R[e]].destroy();for(e=0;e<this.alive.length;e++)this.alive[e].destroy();for(e=0;e<this.dead.length;e++)this.dead[e].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});t.exports=i},9871:(t,e,i)=>{var w=i(59996),i=i(61340),S=new i,A=new i,C=new i,T=new i;t.exports=function(t,e,i,o){var s=S,n=A,r=C,a=T,h=(o?(a.loadIdentity(),a.multiply(o),a.translate(e.x,e.y),a.rotate(e.rotation),a.scale(e.scaleX,e.scaleY)):a.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),t.currentContext),l=i.roundPixels,c=i.alpha,u=e.alpha,d=e.alive,p=d.length,o=e.viewBounds;if(e.visible&&0!==p&&(!o||w(o,i.worldView))){e.sortCallback&&e.depthSort(),i.addToRenderList(e);var f=e.scrollFactorX,b=e.scrollFactorY;h.save(),h.globalCompositeOperation=t.blendModes[e.blendMode];for(var y=0;y<p;y++){var m,x,g,v=d[y],_=v.alpha*u*c;_<=0||0===v.scaleX||0===v.scaleY||(r.applyITRS(v.x,v.y,v.rotation,v.scaleX,v.scaleY),s.copyFrom(i.matrix),s.multiplyWithOffset(a,-i.scrollX*f,-i.scrollY*b),r.e=v.x,r.f=v.y,s.multiply(r,n),0<(m=(v=v.frame).canvasData).width&&0<m.height&&(x=-v.halfWidth,g=-v.halfHeight,h.globalAlpha=_,h.save(),n.setToContext(h),l&&(x=Math.round(x),g=Math.round(g)),h.imageSmoothingEnabled=!v.source.scaleMode,h.drawImage(v.source.image,m.x,m.y,m.width,m.height,x,g,m.width,m.height),h.restore()))}h.restore()}}},92730:(t,e,i)=>{var s=i(25305),o=i(44603),n=i(23568),r=i(95540),a=i(31600);o.register("particles",function(t,e){var i=n(t=void 0===t?{}:t,"key",null),o=r(t,"config",null),i=new a(this.scene,0,0,i);return void 0!==e&&(t.add=e),s(this.scene,i,t),o&&i.setConfig(o),i})},676:(t,e,i)=>{var o=i(39429),s=i(31600);o.register("particles",function(t,e,i,o){return this.displayList.add(new s(this.scene,t,e,i,o))})},90668:(t,e,i)=>{i(29747);var o=i(21188),i=i(9871);t.exports={renderWebGL:o,renderCanvas:i}},21188:(t,e,i)=>{var S=i(59996),o=i(61340),A=i(70554),C=new o,T=new o,P=new o,B=new o;t.exports=function(t,e,i,o){var s=t.pipelines.set(e.pipeline),n=C,r=T,a=P,h=B,l=(o?(h.loadIdentity(),h.multiply(o),h.translate(e.x,e.y),h.rotate(e.rotation),h.scale(e.scaleX,e.scaleY)):h.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),A.getTintAppendFloatAlpha),c=i.alpha,u=e.alpha,d=(t.pipelines.preBatch(e),e.alive),p=d.length,o=e.viewBounds;if(0!==p&&(!o||S(o,i.worldView))){e.sortCallback&&e.depthSort(),i.addToRenderList(e),n.copyFrom(i.matrix),n.multiplyWithOffset(h,-i.scrollX*e.scrollFactorX,-i.scrollY*e.scrollFactorY),t.setBlendMode(e.blendMode),e.mask&&(e.mask.preRenderWebGL(t,e,i),t.pipelines.set(e.pipeline));for(var f,b,y=e.tintFill,m=0;m<p;m++){var x,g,v,_=d[m],w=_.alpha*u*c;w<=0||0===_.scaleX||0===_.scaleY||(a.applyITRS(_.x,_.y,_.rotation,_.scaleX,_.scaleY),a.e=_.x,a.f=_.y,n.multiply(a,r),(x=_.frame).glTexture!==b&&(b=x.glTexture,f=s.setGameObject(e,x)),g=-x.halfWidth,v=-x.halfHeight,g=r.setQuad(g,v,g+x.width,v+x.height),v=l(_.tint,w),s.shouldFlush(6)&&(s.flush(),f=s.setGameObject(e,x)),s.batchQuad(e,g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],x.u0,x.v0,x.u1,x.v1,v,v,v,v,y,b,f))}e.mask&&e.mask.postRenderWebGL(t,i),t.pipelines.postBatch(e)}}},20286:(t,e,i)=>{i=new(i(83419))({initialize:function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=!0),this.emitter,this.x=t=void 0===t?0:t,this.y=e,this.active=i},update:function(){},destroy:function(){this.emitter=null}});t.exports=i},9774:t=>{t.exports="complete"},812:t=>{t.exports="deathzone"},30522:t=>{t.exports="explode"},96695:t=>{t.exports="start"},18677:t=>{t.exports="stop"},20696:(t,e,i)=>{t.exports={COMPLETE:i(9774),DEATH_ZONE:i(812),EXPLODE:i(30522),START:i(96695),STOP:i(18677)}},18404:(t,e,i)=>{t.exports={EmitterColorOp:i(76472),EmitterOp:i(44777),Events:i(20696),GravityWell:i(24502),Particle:i(56480),ParticleBounds:i(69601),ParticleEmitter:i(31600),ParticleProcessor:i(20286),Zones:i(21024)}},26388:(t,e,i)=>{i=new(i(83419))({initialize:function(t,e){this.source=t,this.killOnEnter=e},willKill:function(t){t=t.worldPosition,t=this.source.contains(t.x,t.y);return t&&this.killOnEnter||!t&&!this.killOnEnter}});t.exports=i},19909:(t,e,i)=>{i=new(i(83419))({initialize:function(t,e,i,o,s,n){void 0===o&&(o=!1),void 0===s&&(s=!0),void 0===n&&(n=-1),this.source=t,this.points=[],this.quantity=e,this.stepRate=i,this.yoyo=o,this.counter=-1,this.seamless=s,this._length=0,this._direction=0,this.total=n,this.updateSource()},updateSource:function(){this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless&&(e=this.points[0],t=this.points[this.points.length-1],e.x===t.x)&&e.y===t.y&&this.points.pop();var t,e=this._length;return this._length=this.points.length,this._length<e&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(t){return this.source=t,this.updateSource()},getPoint:function(t){0===this._direction?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,-1===this.counter&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var e=this.points[this.counter];e&&(t.x=e.x,t.y=e.y)}});t.exports=i},68875:(t,e,i)=>{var o=i(83419),s=i(26099),i=new o({initialize:function(t){this.source=t,this._tempVec=new s,this.total=-1},getPoint:function(t){var e=this._tempVec;this.source.getRandomPoint(e),t.x=e.x,t.y=e.y}});t.exports=i},21024:(t,e,i)=>{t.exports={DeathZone:i(26388),EdgeZone:i(19909),RandomZone:i(68875)}},1159:(t,e,i)=>{var o=i(83419),s=i(31401),r=i(68287),i=new o({Extends:r,Mixins:[s.PathFollower],initialize:function(t,e,i,o,s,n){r.call(this,t,i,o,s,n),this.path=e},preUpdate:function(t,e){this.anims.update(t,e),this.pathUpdate(t)}});t.exports=i},90145:(t,e,i)=>{var o=i(39429),n=i(1159);o.register("follower",function(t,e,i,o,s){t=new n(this.scene,t,e,i,o,s);return this.displayList.add(t),this.updateList.add(t),t})},33663:(t,e,i)=>{var h=i(9674),o=i(83419),s=i(48803),c=i(90664),l=i(4703),u=i(45650),i=new o({Extends:l,initialize:function(t,e,i,o,s,n,r,a){l.call(this,t,e,i,o=o||"__DEFAULT",s),this.type="Plane",this.anims=new h(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(n,r,a),this.setSizeToFrame(!1),this.setViewHeight()},originX:{get:function(){return.5}},originY:{get:function(){return.5}},setGridSize:function(t,e,i){void 0===e&&(e=8);var o=(i=void 0===i?!1:i)?!0:!1;return this.gridWidth=t=void 0===t?8:t,this.gridHeight=e,this.isTiled=i,this.clear(),s({mesh:this,widthSegments:t,heightSegments:e,isOrtho:!1,tile:i,flipY:o}),this},setSizeToFrame:function(t){void 0===t&&(t=!0);var e=this.frame;if(this.setPerspective(this.width/e.width,this.height/e.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),t){var i,o=this.gridWidth,s=this.gridHeight,n=this.vertices,r=e.u0,a=e.u1,h=e.v0,l=e.v1,c=0;if(this.isTiled)for(h=e.v1,l=e.v0,y=0;y<s;y++)for(i=0;i<o;i++)n[c++].setUVs(r,l),n[c++].setUVs(r,h),n[c++].setUVs(a,l),n[c++].setUVs(r,h),n[c++].setUVs(a,h),n[c++].setUVs(a,l);else{for(var u=o+1,d=s+1,p=a-r,f=l-h,b=[],y=0;y<d;y++)for(i=0;i<u;i++)b.push(r+i/o*p,h+y/s*f);for(y=0;y<s;y++)for(i=0;i<o;i++){var m=2*(i+u*y),x=2*(i+u*(y+1)),g=2*(i+1+u*(y+1)),v=2*(i+1+u*y);n[c++].setUVs(b[m],b[1+m]),n[c++].setUVs(b[x],b[1+x]),n[c++].setUVs(b[v],b[1+v]),n[c++].setUVs(b[x],b[1+x]),n[c++].setUVs(b[g],b[1+g]),n[c++].setUVs(b[v],b[1+v])}}}return this},setViewHeight:function(t){void 0===t&&(t=this.frame.height);var e=this.fov*(Math.PI/180);this.viewPosition.z=this.height/t/Math.tan(e/2),this.dirtyCache[10]=1},createCheckerboard:function(t,e,i,o,s){void 0===e&&(e=255),void 0===i&&(i=255),void 0===o&&(o=255),void 0===s&&(s=128);for(var n=c(t=void 0===t?16777215:t),r=c(e),a=[],h=0;h<16;h++)for(var l=0;l<16;l++)h<8&&l<8||7<h&&7<l?a.push(n.r,n.g,n.b,i):a.push(r.r,r.g,r.b,o);t=this.scene.sys.textures.addUint8Array(u(),new Uint8Array(a),16,16);return this.removeCheckerboard(),this.setTexture(t),this.setSizeToFrame(),this.setViewHeight(s),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(t,e){return this.anims.play(t,e)},playReverse:function(t,e){return this.anims.playReverse(t,e)},playAfterDelay:function(t,e){return this.anims.playAfterDelay(t,e)},playAfterRepeat:function(t,e){return this.anims.playAfterRepeat(t,e)},stop:function(){return this.anims.stop()},stopAfterDelay:function(t){return this.anims.stopAfterDelay(t)},stopAfterRepeat:function(t){return this.anims.stopAfterRepeat(t)},stopOnFrame:function(t){return this.anims.stopOnFrame(t)},preUpdate:function(t,e){l.prototype.preUpdate.call(this,t,e),this.anims.update(t,e)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});t.exports=i},56015:(t,e,i)=>{var a=i(25305),h=i(13059),o=i(44603),l=i(23568),c=i(35154),u=i(33663);o.register("plane",function(t,e){var i=l(t=void 0===t?{}:t,"key",null),o=l(t,"frame",null),s=c(t,"width",8),n=c(t,"height",8),r=c(t,"tile",!1),i=new u(this.scene,0,0,i,o,s,n,r),o=(void 0!==e&&(t.add=e),c(t,"checkerboard",null));return o&&(s=c(o,"color1",16777215),n=c(o,"color2",255),r=c(o,"alpha1",255),e=c(o,"alpha2",255),o=c(o,"height",128),i.createCheckerboard(s,n,r,e,o)),a(this.scene,i,t),h(i,t),i})},30985:(t,e,i)=>{var a=i(33663);i(39429).register("plane",function(t,e,i,o,s,n,r){return this.displayList.add(new a(this.scene,t,e,i,o,s,n,r))})},80321:(t,e,i)=>{var o=i(83419),s=i(31401),a=i(95643),h=i(30100),l=i(36060),i=i(67277),o=new o({Extends:a,Mixins:[s.AlphaSingle,s.BlendMode,s.Depth,s.Mask,s.Pipeline,s.PostPipeline,s.ScrollFactor,s.Transform,s.Visible,i],initialize:function(t,e,i,o,s,n,r){void 0===o&&(o=16777215),void 0===s&&(s=128),void 0===n&&(n=1),void 0===r&&(r=.1),a.call(this,t,"PointLight"),this.initPipeline(l.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(e,i),this.color=h(o),this.intensity=n,this.attenuation=r,this.width=2*s,this.height=2*s,this._radius=s},radius:{get:function(){return this._radius},set:function(t){this._radius=t,this.width=2*t,this.height=2*t}},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});t.exports=o},39829:(t,e,i)=>{var r=i(25305),o=i(44603),a=i(23568),h=i(80321);o.register("pointlight",function(t,e){var i=a(t=void 0===t?{}:t,"color",16777215),o=a(t,"radius",128),s=a(t,"intensity",1),n=a(t,"attenuation",.1),i=new h(this.scene,0,0,i,o,s,n);return void 0!==e&&(t.add=e),r(this.scene,i,t),i})},71255:(t,e,i)=>{var o=i(39429),r=i(80321);o.register("pointlight",function(t,e,i,o,s,n){return this.displayList.add(new r(this.scene,t,e,i,o,s,n))})},67277:(t,e,i)=>{var o=i(29747),i=i(57787);t.exports={renderWebGL:i,renderCanvas:o}},57787:(t,e,i)=>{var y=i(91296);t.exports=function(t,e,i,o){i.addToRenderList(e);var s=t.pipelines.set(e.pipeline),o=y(e,i,o).calc,n=e.width,r=e.height,a=-e._radius,h=-e._radius,n=a+n,r=h+r,l=o.getX(0,0),c=o.getY(0,0),u=o.getX(a,h),d=o.getY(a,h),p=o.getX(a,r),a=o.getY(a,r),f=o.getX(n,r),r=o.getY(n,r),b=o.getX(n,h),o=o.getY(n,h);t.pipelines.preBatch(e),s.batchPointLight(e,i,u,d,p,a,f,r,b,o,l,c),t.pipelines.postBatch(e)}},591:(t,e,i)=>{var o=i(83419),n=i(81320),r=i(88571),i=new o({Extends:r,initialize:function(t,e,i,o,s){void 0===e&&(e=0),void 0===i&&(i=0);o=new n(t.sys.textures,"",o=void 0===o?32:o,s=void 0===s?32:s);r.call(this,t,e,i,o),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(t,e){this.width=t,this.height=e,this.texture.setSize(t,e),this.updateDisplayOrigin();var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=t,i.hitArea.height=e),this},resize:function(t,e){return this.setSize(t,e),this},saveTexture:function(t){var e=this.texture;return e.key=t,e.manager.addDynamicTexture(e)&&(this._saved=!0),e},fill:function(t,e,i,o,s,n){return this.texture.fill(t,e,i,o,s,n),this},clear:function(){return this.texture.clear(),this},stamp:function(t,e,i,o,s){return this.texture.stamp(t,e,i,o,s),this},erase:function(t,e,i){return this.texture.erase(t,e,i),this},draw:function(t,e,i,o,s){return this.texture.draw(t,e,i,o,s),this},drawFrame:function(t,e,i,o,s,n){return this.texture.drawFrame(t,e,i,o,s,n),this},repeat:function(t,e,i,o,s,n,r,a,h){return this.texture.repeat(t,e,i,o,s,n,r,a,h),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(t,e,i,o,s){return this.texture.batchDraw(t,e,i,o,s),this},batchDrawFrame:function(t,e,i,o,s,n){return this.texture.batchDrawFrame(t,e,i,o,s,n),this},endDraw:function(t){return this.texture.endDraw(t),this},snapshotArea:function(t,e,i,o,s,n,r){return this.texture.snapshotArea(t,e,i,o,s,n,r),this},snapshot:function(t,e,i){return this.snapshotArea(0,0,this.width,this.height,t,e,i)},snapshotPixel:function(t,e,i){return this.snapshotArea(t,e,1,1,i,"pixel")},preDestroy:function(){this.camera=null,this._saved||this.texture.destroy()}});t.exports=i},34495:(t,e,i)=>{var r=i(25305),o=i(44603),a=i(23568),h=i(591);o.register("renderTexture",function(t,e){var i=a(t=void 0===t?{}:t,"x",0),o=a(t,"y",0),s=a(t,"width",32),n=a(t,"height",32),i=new h(this.scene,i,o,s,n);return void 0!==e&&(t.add=e),r(this.scene,i,t),i})},60505:(t,e,i)=>{var o=i(39429),s=i(591);o.register("renderTexture",function(t,e,i,o){return this.displayList.add(new s(this.scene,t,e,i,o))})},77757:(t,e,i)=>{var l=i(9674),o=i(83419),s=i(31401),c=i(95643),u=i(36060),n=i(38745),d=i(26099),i=new o({Extends:c,Mixins:[s.AlphaSingle,s.BlendMode,s.Depth,s.Flip,s.Mask,s.Pipeline,s.PostPipeline,s.Size,s.Texture,s.Transform,s.Visible,s.ScrollFactor,n],initialize:function(t,e,i,o,s,n,r,a,h){void 0===o&&(o="__DEFAULT"),void 0===n&&(n=2),void 0===r&&(r=!0),c.call(this,t,"Rope"),this.anims=new l(this),this.points=n,this.vertices,this.uv,this.colors,this.alphas,this.tintFill="__DEFAULT"===o,this.dirty=!1,this.horizontal=r,this._flipX=!1,this._flipY=!1,this._perp=new d,this.debugCallback=null,this.debugGraphic=null,this.setTexture(o,s),this.setPosition(e,i),this.setSizeToFrame(),this.initPipeline(u.ROPE_PIPELINE),this.initPostPipeline(),Array.isArray(n)&&this.resizeArrays(n.length),this.setPoints(n,a,h),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(t,e){var i=this.anims.currentFrame;this.anims.update(t,e),this.anims.currentFrame!==i&&(this.updateUVs(),this.updateVertices())},play:function(t,e,i){return this.anims.play(t,e,i),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(t,e,i){return void 0===t&&(t=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(t,e,i))},setVertical:function(t,e,i){return void 0===t&&(t=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(t,e,i)):this},setTintFill:function(t){return this.tintFill=t=void 0===t?!1:t,this},setAlphas:function(t,e){var i=this.points.length;if(!(i<1)){var o=this.alphas,s=(void 0===t?t=[1]:Array.isArray(t)||void 0!==e||(t=[t]),0);if(void 0!==e)for(r=0;r<i;r++)o[s=2*r]=t,o[s+1]=e;else if(t.length===i)for(r=0;r<i;r++)o[s=2*r]=t[r],o[s+1]=t[r];else for(var n=t[0],r=0;r<i;r++)t.length>(s=2*r)&&(n=t[s]),o[s]=n,t.length>s+1&&(n=t[s+1]),o[s+1]=n}return this},setColors:function(t){var e=this.points.length;if(!(e<1)){var i=this.colors,o=(void 0===t?t=[16777215]:Array.isArray(t)||(t=[t]),0);if(t.length===e)for(n=0;n<e;n++)i[o=2*n]=t[n],i[o+1]=t[n];else for(var s=t[0],n=0;n<e;n++)t.length>(o=2*n)&&(s=t[o]),i[o]=s,t.length>o+1&&(s=t[o+1]),i[o+1]=s}return this},setPoints:function(t,e,i){if("number"==typeof(t=void 0===t?2:t)){var o,s,n,r=t;if(r<2&&(r=2),t=[],this.horizontal)for(n=-this.frame.halfWidth,s=this.frame.width/(r-1),o=0;o<r;o++)t.push({x:n+o*s,y:0});else for(n=-this.frame.halfHeight,s=this.frame.height/(r-1),o=0;o<r;o++)t.push({x:0,y:n+o*s})}var a=t.length,h=this.points.length;return a<1||(1===a&&(t.unshift({x:0,y:0}),a++),h!==a&&this.resizeArrays(a),this.dirty=!0,this.points=t,this.updateUVs(),null!=e&&this.setColors(e),null!=i&&this.setAlphas(i)),this},updateUVs:function(){for(var t=this.uv,e=this.points.length,i=this.frame.u0,o=this.frame.v0,s=this.frame.u1,n=this.frame.v1,r=(s-i)/(e-1),a=(n-o)/(e-1),h=0;h<e;h++){var l,c,u,d=4*h,p=this.horizontal?(u=this._flipX?l=s-h*r:l=i+h*r,this._flipY?(c=n,o):(c=o,n)):(u=this._flipX?(l=i,s):(l=s,i),this._flipY?c=n-h*a:c=o+h*a);t[0+d]=l,t[1+d]=c,t[2+d]=u,t[3+d]=p}return this},resizeArrays:function(t){var e=this.colors,i=this.alphas;this.vertices=new Float32Array(4*t),this.uv=new Float32Array(4*t);for(var e=new Uint32Array(2*t),i=new Float32Array(2*t),o=0;o<2*t;o++)e[o]=16777215,i[o]=1;return this.colors=e,this.alphas=i,this.dirty=!0,this},updateVertices:function(){var t=this._perp,e=this.points,i=this.vertices,o=e.length;if(this.dirty=!1,!(o<1)){for(var s=e[0],n=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,r=0;r<o;r++){var a=e[r],h=4*r,l=r<o-1?e[r+1]:a,l=(t.x=l.y-s.y,t.y=-(l.x-s.x),t.length());t.x/=l,t.y/=l,t.x*=n,t.y*=n,i[h]=a.x+t.x,i[1+h]=a.y+t.y,i[2+h]=a.x-t.x,i[3+h]=a.y-t.y,s=a}return this}},setDebug:function(t,e){return this.debugGraphic=t,this.debugCallback=t||e?e||this.renderDebugVerts:null,this},renderDebugVerts:function(t,e,i){var o=t.debugGraphic,s=i[0],n=i[1],r=i[2],a=i[3];o.lineBetween(s,n,r,a);for(var h=4;h<e;h+=4){var l=i[h+0],c=i[h+1],u=i[h+2],d=i[h+3];o.lineBetween(s,n,l,c),o.lineBetween(r,a,u,d),o.lineBetween(r,a,l,c),o.lineBetween(l,c,u,d),s=l,n=c,r=u,a=d}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(t){return this._flipX=t,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(t){return this._flipY=t,this.updateUVs()}}});t.exports=i},95262:t=>{t.exports=function(){}},26209:(t,e,i)=>{var h=i(25305),o=i(44603),l=i(23568),c=i(35154),u=i(77757);o.register("rope",function(t,e){var i=l(t=void 0===t?{}:t,"key",null),o=l(t,"frame",null),s=l(t,"horizontal",!0),n=c(t,"points",void 0),r=c(t,"colors",void 0),a=c(t,"alphas",void 0),i=new u(this.scene,0,0,i,o,n,s,r,a);return void 0!==e&&(t.add=e),h(this.scene,i,t),i})},96819:(t,e,i)=>{var h=i(77757);i(39429).register("rope",function(t,e,i,o,s,n,r,a){return this.displayList.add(new h(this.scene,t,e,i,o,s,n,r,a))})},38745:(t,e,i)=>{i(29747);var o=i(20439),i=i(95262);t.exports={renderWebGL:o,renderCanvas:i}},20439:(t,e,i)=>{var T=i(91296),P=i(70554);t.exports=function(t,e,i,o){i.addToRenderList(e);var s=t.pipelines.set(e.pipeline,e),n=T(e,i,o).calc,r=e.vertices,a=e.uv,h=e.colors,l=e.alphas,c=e.alpha,u=P.getTintAppendFloatAlpha,d=i.roundPixels,p=r.length,o=Math.floor(.5*p),f=(s.flush(),t.pipelines.preBatch(e),s.setGameObject(e)),b=s.vertexViewF32,y=s.vertexViewU32,m=s.vertexCount*s.currentShader.vertexComponentCount-1,x=0,g=e.tintFill;e.dirty&&e.updateVertices();for(var v=e.debugCallback,_=[],w=0;w<p;w+=2){var S=r[w+0],A=r[w+1],C=S*n.a+A*n.c+n.e,S=S*n.b+A*n.d+n.f;d&&(C=Math.round(C),S=Math.round(S)),b[++m]=C,b[++m]=S,b[++m]=a[w+0],b[++m]=a[w+1],b[++m]=f,b[++m]=g,y[++m]=u(h[x],i.alpha*(l[x]*c)),x++,v&&(_[w+0]=C,_[w+1]=S)}v&&v.call(e,e,p,_),s.vertexCount+=o,s.currentBatch.count=s.vertexCount-s.currentBatch.start,t.pipelines.postBatch(e)}},20071:(t,e,i)=>{var o=i(83419),s=i(31401),h=i(95643),d=i(95540),n=i(79291),r=i(61622),a=i(25479),l=i(61340),c=i(95428),u=i(92503),i=new o({Extends:h,Mixins:[s.ComputedSize,s.Depth,s.GetBounds,s.Mask,s.Origin,s.ScrollFactor,s.Transform,s.Visible,a],initialize:function(t,e,i,o,s,n,r,a){void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=128),void 0===n&&(n=128),h.call(this,t,"Shader"),this.blendMode=-1,this.shader;t=t.sys.renderer;this.renderer=t,this.gl=t.gl,this.vertexData=new ArrayBuffer(2*Float32Array.BYTES_PER_ELEMENT*6),this.vertexBuffer=t.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this._deferSetShader=null,this._deferProjOrtho=null,this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new l,this._tempMatrix2=new l,this._tempMatrix3=new l,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=t.width,this._rendererHeight=t.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(i,o),this.setSize(s,n),this.setOrigin(.5,.5),this.setShader(e,r,a),this.renderer.on(u.RESTORE_WEBGL,this.onContextRestored,this)},willRender:function(t){return!!this.renderToTexture||!(h.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},setRenderToTexture:function(t,e){var i,o;return void 0===e&&(e=!1),this.renderToTexture||(e=this.width,i=this.height,o=this.renderer,this.glTexture=o.createTextureFromSource(null,e,i,0),this.framebuffer=o.createFramebuffer(e,i,this.glTexture,!1),this._rendererWidth=e,this._rendererHeight=i,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),t&&(this.texture=this.scene.sys.textures.addGLTexture(t,this.glTexture))),this.shader&&(o.pipelines.clear(),this.load(),this.flush(),o.pipelines.rebind()),this},setShader:function(t,e,i){if(this.renderer.contextLost)this._deferSetShader={key:t,textures:e,textureData:i};else{if(void 0===e&&(e=[]),"string"==typeof t){var o=this.scene.sys.cache.shader;if(!o.has(t))return this;this.shader=o.get(t)}else this.shader=t;o=this.gl,t=this.renderer,t=(this.program&&t.deleteProgram(this.program),t.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc)),o=(o.uniformMatrix4fv(o.getUniformLocation(t.webGLProgram,"uViewMatrix"),!1,this.viewMatrix),o.uniformMatrix4fv(o.getUniformLocation(t.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),o.uniform2f(o.getUniformLocation(t.webGLProgram,"uResolution"),this.width,this.height),this.program=t,new Date),t={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[o.getFullYear(),o.getMonth(),o.getDate(),60*o.getHours()*60+60*o.getMinutes()+o.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=n(!0,{},this.shader.uniforms,t):this.uniforms=t;for(var s=0;s<4;s++)e[s]&&this.setSampler2D("iChannel"+s,e[s],s,i);this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0)}return this},setPointer:function(t){return this.pointer=t,this},projOrtho:function(t,e,i,o){var s,n,r;this.renderer.contextLost?this._deferProjOrtho={left:t,right:e,bottom:i,top:o}:(s=1/(i-o),(n=this.projectionMatrix)[0]=-2*(r=1/(t-e)),n[5]=-2*s,n[10]=-.001,n[12]=(t+e)*r,n[13]=(o+i)*s,n[14]=-0,t=this.program,r=this.gl,this.renderer.setProgram(t),r.uniformMatrix4fv(r.getUniformLocation(t.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=e,this._rendererHeight=i)},initUniforms:function(){var t,e=this.renderer.glFuncMap,i=this.program;for(t in this._textureCount=0,this.uniforms){var o=this.uniforms[t],s=o.type,n=e[s];o.uniformLocation=this.renderer.createUniformLocation(i,t),"sampler2D"!==s&&(o.glMatrix=n.matrix,o.glValueLength=n.length,o.glFunc=n.func)}},setSampler2DBuffer:function(t,e,i,o,s,n){void 0===s&&(s=0),void 0===n&&(n={});t=this.uniforms[t];return t.value=e,n.width=i,n.height=o,t.textureData=n,this._textureCount=s,this.initSampler2D(t),this},setSampler2D:function(t,e,i,o){void 0===i&&(i=0);var s=this.scene.sys.textures;if(s.exists(e)){s=s.getFrame(e);if(s.glTexture&&s.glTexture.isRenderTexture)return this.setSampler2DBuffer(t,s.glTexture,s.width,s.height,i,o);var t=this.uniforms[t],n=s.source;t.textureKey=e,t.source=n.image,t.value=s.glTexture,n.isGLTexture&&((o=o||{}).width=n.width,o.height=n.height),o&&(t.textureData=o),this._textureCount=i,this.initSampler2D(t)}return this},setUniform:function(t,e){return r(this.uniforms,t,e),this},getUniform:function(t){return d(this.uniforms,t,null)},setChannel0:function(t,e){return this.setSampler2D("iChannel0",t,0,e)},setChannel1:function(t,e){return this.setSampler2D("iChannel1",t,1,e)},setChannel2:function(t,e){return this.setSampler2D("iChannel2",t,2,e)},setChannel3:function(t,e){return this.setSampler2D("iChannel3",t,3,e)},initSampler2D:function(t){var e,i,o,s,n,r,a,h,l,c,u;t.value&&((e=t.textureData)&&!t.value.isRenderTexture&&(i=this.gl,t=t.value,o=i[d(e,"magFilter","linear").toUpperCase()],s=i[d(e,"minFilter","linear").toUpperCase()],n=i[d(e,"wrapS","repeat").toUpperCase()],r=i[d(e,"wrapT","repeat").toUpperCase()],a=i[d(e,"format","rgba").toUpperCase()],h=d(e,"flipY",!1),l=d(e,"width",t.width),c=d(e,"height",t.height),u=d(e,"source",t.pixels),e.repeat&&(n=i.REPEAT,r=i.REPEAT),e.width&&(u=null),t.update(u,l,c,h,n,r,s,o,a)),this.renderer.setProgram(this.program),this._textureCount++)},syncUniforms:function(){var t,e,i,o,s,n,r=this.gl,a=this.uniforms,h=0;for(n in a)i=(t=a[n]).glFunc,e=t.glValueLength,o=t.uniformLocation,null!==(s=t.value)&&(1===e?t.glMatrix?i.call(r,o.webGLUniformLocation,t.transpose,s):i.call(r,o.webGLUniformLocation,s):2===e?i.call(r,o.webGLUniformLocation,s.x,s.y):3===e?i.call(r,o.webGLUniformLocation,s.x,s.y,s.z):4===e?i.call(r,o.webGLUniformLocation,s.x,s.y,s.z,s.w):"sampler2D"===t.type&&(r.activeTexture(r.TEXTURE0+h),r.bindTexture(r.TEXTURE_2D,s.webGLTexture),r.uniform1i(o.webGLUniformLocation,h),h++))},load:function(t){var e=this.gl,i=this.width,o=this.height,s=this.renderer,n=this.program,r=this.viewMatrix,t=(this.renderToTexture||(a=-this._displayOriginX,h=-this._displayOriginY,r[0]=t[0],r[1]=t[1],r[4]=t[2],r[5]=t[3],r[8]=t[4],r[9]=t[5],r[12]=r[0]*a+r[4]*h,r[13]=r[1]*a+r[5]*h),e.useProgram(n.webGLProgram),e.uniformMatrix4fv(e.getUniformLocation(n.webGLProgram,"uViewMatrix"),!1,r),e.uniformMatrix4fv(e.getUniformLocation(n.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),e.uniform2f(e.getUniformLocation(n.webGLProgram,"uResolution"),this.width,this.height),this.uniforms),a=t.resolution,h=(a.value.x=i,a.value.y=o,t.time.value=s.game.loop.getDuration(),this.pointer);h&&(r=t.mouse,e=h.x/i,n=1-h.y/o,r.value.x=e.toFixed(2),r.value.y=n.toFixed(2)),this.syncUniforms()},flush:function(){var t=this.width,e=this.height,i=this.program,o=this.gl,s=this.vertexBuffer,n=this.renderer,r=2*Float32Array.BYTES_PER_ELEMENT,s=(this.renderToTexture&&(n.setFramebuffer(this.framebuffer),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT)),o.bindBuffer(o.ARRAY_BUFFER,s.webGLBuffer),o.getAttribLocation(i.webGLProgram,"inPosition")),i=(-1!==s&&(o.enableVertexAttribArray(s),o.vertexAttribPointer(s,2,o.FLOAT,!1,r,0)),this.vertexViewF32);i[3]=e,i[4]=t,i[5]=e,i[8]=t,i[9]=e,i[10]=t,o.bufferSubData(o.ARRAY_BUFFER,0,this.bytes.subarray(0,6*r)),o.drawArrays(o.TRIANGLES,0,6),this.renderToTexture&&n.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},onContextRestored:function(){var t,e,i,o;null!==this._deferSetShader&&(t=this._deferSetShader.key,e=this._deferSetShader.textures,i=this._deferSetShader.textureData,this._deferSetShader=null,this.setShader(t,e,i)),null!==this._deferProjOrtho&&(t=this._deferProjOrtho.left,e=this._deferProjOrtho.right,i=this._deferProjOrtho.bottom,o=this._deferProjOrtho.top,this._deferProjOrtho=null,this.projOrtho(t,e,i,o))},preDestroy:function(){var e=this.renderer;e.off(u.RESTORE_WEBGL,this.onContextRestored,this),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(e.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null),c(this.uniforms,function(t){e.deleteUniformLocation(t.uniformLocation),t.uniformLocation=null})}});t.exports=i},80464:t=>{t.exports=function(){}},54935:(t,e,i)=>{var a=i(25305),o=i(44603),h=i(23568),l=i(20071);o.register("shader",function(t,e){var i=h(t=void 0===t?{}:t,"key",null),o=h(t,"x",0),s=h(t,"y",0),n=h(t,"width",128),r=h(t,"height",128),i=new l(this.scene,i,o,s,n,r);return void 0!==e&&(t.add=e),a(this.scene,i,t),i})},74177:(t,e,i)=>{var a=i(20071);i(39429).register("shader",function(t,e,i,o,s,n,r){return this.displayList.add(new a(this.scene,t,e,i,o,s,n,r))})},25479:(t,e,i)=>{i(29747);var o=i(19257),i=i(80464);t.exports={renderWebGL:o,renderCanvas:i}},19257:(t,e,i)=>{var s=i(91296);t.exports=function(t,e,i,o){e.shader&&(i.addToRenderList(e),t.pipelines.clear(),e.renderToTexture?e.load():(i=s(e,i,o).calc,t.width===e._rendererWidth&&t.height===e._rendererHeight||e.projOrtho(0,t.width,t.height,0),e.load(i.matrix)),e.flush(),t.pipelines.rebind())}},10441:(t,e,i)=>{var m=i(70554);t.exports=function(t,e,i,o,s,n){for(var r=m.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*o),a=i.pathData,h=i.pathIndexes,l=0;l<h.length;l+=3){var c=2*h[l],u=2*h[l+1],d=2*h[l+2],p=a[0+c]-s,c=a[1+c]-n,f=a[0+u]-s,u=a[1+u]-n,b=a[0+d]-s,d=a[1+d]-n,y=e.getX(p,c),p=e.getY(p,c),c=e.getX(f,u),f=e.getY(f,u),u=e.getX(b,d),b=e.getY(b,d);t.batchTri(i,y,p,c,f,u,b,0,0,1,1,r,r,r,2)}}},65960:t=>{t.exports=function(t,e,i,o){i=i||e.fillColor,o=o||e.fillAlpha;t.fillStyle="rgba("+((16711680&i)>>>16)+","+((65280&i)>>>8)+","+(255&i)+","+o+")"}},75177:t=>{t.exports=function(t,e,i,o){i=i||e.strokeColor,o=o||e.strokeAlpha;t.strokeStyle="rgba("+((16711680&i)>>>16)+","+((65280&i)>>>8)+","+(255&i)+","+o+")",t.lineWidth=e.lineWidth}},17803:(t,e,i)=>{var o=i(83419),s=i(31401),n=i(95643),r=i(23031),i=new o({Extends:n,Mixins:[s.AlphaSingle,s.BlendMode,s.Depth,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.PostPipeline,s.ScrollFactor,s.Transform,s.Visible],initialize:function(t,e,i){n.call(this,t,e=void 0===e?"Shape":e),this.geom=i,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new r,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.isFilled=!1:(this.fillColor=t,this.fillAlpha=e,this.isFilled=!0),this},setStrokeStyle:function(t,e,i){return void 0===i&&(i=1),void 0===t?this.isStroked=!1:(this.lineWidth=t,this.strokeColor=e,this.strokeAlpha=i,this.isStroked=!0),this},setClosePath:function(t){return this.closePath=t,this},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}}});t.exports=i},34682:(t,e,i)=>{var b=i(70554);t.exports=function(t,e,i,o,s){var n=t.strokeTint,i=b.getTintAppendFloatAlpha(e.strokeColor,e.strokeAlpha*i),r=(n.TL=i,n.TR=i,n.BL=i,n.BR=i,e.pathData),a=r.length-1,h=e.lineWidth,l=h/2,c=r[0]-o,u=r[1]-s;e.closePath||(a-=2);for(var d=2;d<a;d+=2){var p=r[d]-o,f=r[d+1]-s;t.batchLine(c,u,p,f,l,l,h,d-2,!!e.closePath&&d===a-1),c=p,u=f}}},23629:(t,e,i)=>{var o=i(13609),s=i(83419),l=i(39506),c=i(94811),u=i(96503),d=i(36383),p=i(17803),i=new s({Extends:p,Mixins:[o],initialize:function(t,e,i,o,s,n,r,a,h){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=360),void 0===r&&(r=!1),p.call(this,t,"Arc",new u(0,0,o=void 0===o?128:o)),this._startAngle=s,this._endAngle=n,this._anticlockwise=r,this._iterations=.01,this.setPosition(e,i);t=2*this.geom.radius;this.setSize(t,t),void 0!==a&&this.setFillStyle(a,h),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(t){this._iterations=t,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(t){t=2*(this.geom.radius=t);this.setSize(t,t),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(t){this._startAngle=t,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(t){this._endAngle=t,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(t){this._anticlockwise=t,this.updateData()}},setRadius:function(t){return this.radius=t,this},setIterations:function(t){return this.iterations=t=void 0===t?.01:t,this},setStartAngle:function(t,e){return this._startAngle=t,void 0!==e&&(this._anticlockwise=e),this.updateData()},setEndAngle:function(t,e){return this._endAngle=t,void 0!==e&&(this._anticlockwise=e),this.updateData()},updateData:function(){var t=this._iterations,e=t,i=this.geom.radius,o=l(this._startAngle),s=l(this._endAngle),n=i,r=i;s-=o,this._anticlockwise?s<-d.PI2?s=-d.PI2:0<s&&(s=-d.PI2+s%d.PI2):s>d.PI2?s=d.PI2:s<0&&(s=d.PI2+s%d.PI2);for(var a,h=[n+Math.cos(o)*i,r+Math.sin(o)*i];e<1;)a=s*e+o,h.push(n+Math.cos(a)*i,r+Math.sin(a)*i),e+=t;return a=s+o,h.push(n+Math.cos(a)*i,r+Math.sin(a)*i),h.push(n+Math.cos(o)*i,r+Math.sin(o)*i),this.pathIndexes=c(h),this.pathData=h,this}});t.exports=i},42542:(t,e,i)=>{var n=i(39506),r=i(65960),a=i(75177),h=i(20926);t.exports=function(t,e,i,o){i.addToRenderList(e);var s=t.currentContext;h(t,s,e,i,o)&&(t=e.radius,s.beginPath(),s.arc(t-e.originX*(2*t),t-e.originY*(2*t),t,n(e._startAngle),n(e._endAngle),e.anticlockwise),e.closePath&&s.closePath(),e.isFilled&&(r(s,e),s.fill()),e.isStroked&&(a(s,e),s.stroke()),s.restore())}},42563:(t,e,i)=>{var h=i(23629),i=i(39429);i.register("arc",function(t,e,i,o,s,n,r,a){return this.displayList.add(new h(this.scene,t,e,i,o,s,n,r,a))}),i.register("circle",function(t,e,i,o,s){return this.displayList.add(new h(this.scene,t,e,i,0,360,!1,o,s))})},13609:(t,e,i)=>{i(29747);var o=i(41447),i=i(42542);t.exports={renderWebGL:o,renderCanvas:i}},41447:(t,e,i)=>{var a=i(91296),h=i(10441),l=i(34682);t.exports=function(t,e,i,o){i.addToRenderList(e);var s=t.pipelines.set(e.pipeline),o=a(e,i,o),o=s.calcMatrix.copyFrom(o.calc),n=e._displayOriginX,r=e._displayOriginY,i=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&h(s,o,e,i,n,r),e.isStroked&&l(s,e,i,n,r),t.pipelines.postBatch(e)}},89:(t,e,i)=>{var o=i(83419),s=i(33141),n=i(94811),r=i(87841),a=i(17803),i=new o({Extends:a,Mixins:[s],initialize:function(t,e,i,o,s,n){void 0===e&&(e=0),void 0===i&&(i=0),a.call(this,t,"Curve",o),this._smoothness=32,this._curveBounds=new r,this.closePath=!1,this.setPosition(e,i),void 0!==s&&this.setFillStyle(s,n),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(t){this._smoothness=t,this.updateData()}},setSmoothness:function(t){return this._smoothness=t,this.updateData()},updateData:function(){var t=this._curveBounds,e=this._smoothness;this.geom.getBounds(t,e),this.setSize(t.width,t.height),this.updateDisplayOrigin();for(var i=[],o=this.geom.getPoints(e),s=0;s<o.length;s++)i.push(o[s].x,o[s].y);return i.push(o[0].x,o[0].y),this.pathIndexes=n(i),this.pathData=i,this}});t.exports=i},3170:(t,e,i)=>{var d=i(65960),p=i(75177),f=i(20926);t.exports=function(t,e,i,o){i.addToRenderList(e);var s=t.currentContext;if(f(t,s,e,i,o)){var n=e._displayOriginX+e._curveBounds.x,r=e._displayOriginY+e._curveBounds.y,a=e.pathData,h=a.length-1,t=a[0]-n,i=a[1]-r;s.beginPath(),s.moveTo(t,i),e.closePath||(h-=2);for(var l=2;l<h;l+=2){var c=a[l]-n,u=a[l+1]-r;s.lineTo(c,u)}e.closePath&&s.closePath(),e.isFilled&&(d(s,e),s.fill()),e.isStroked&&(p(s,e),s.stroke()),s.restore()}}},40511:(t,e,i)=>{var o=i(39429),n=i(89);o.register("curve",function(t,e,i,o,s){return this.displayList.add(new n(this.scene,t,e,i,o,s))})},33141:(t,e,i)=>{i(29747);var o=i(53987),i=i(3170);t.exports={renderWebGL:o,renderCanvas:i}},53987:(t,e,i)=>{var a=i(10441),h=i(91296),l=i(34682);t.exports=function(t,e,i,o){i.addToRenderList(e);var s=t.pipelines.set(e.pipeline),o=h(e,i,o),o=s.calcMatrix.copyFrom(o.calc),n=e._displayOriginX+e._curveBounds.x,r=e._displayOriginY+e._curveBounds.y,i=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&a(s,o,e,i,n,r),e.isStroked&&l(s,e,i,n,r),t.pipelines.postBatch(e)}},19921:(t,e,i)=>{var o=i(83419),s=i(94811),n=i(54205),a=i(8497),h=i(17803),i=new o({Extends:h,Mixins:[n],initialize:function(t,e,i,o,s,n,r){void 0===e&&(e=0),void 0===i&&(i=0),h.call(this,t,"Ellipse",new a((o=void 0===o?128:o)/2,(s=void 0===s?128:s)/2,o,s)),this._smoothness=64,this.setPosition(e,i),this.width=o,this.height=s,void 0!==n&&this.setFillStyle(n,r),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(t){this._smoothness=t,this.updateData()}},setSize:function(t,e){return this.width=t,this.height=e,this.geom.setPosition(t/2,e/2),this.geom.setSize(t,e),this.updateData()},setSmoothness:function(t){return this._smoothness=t,this.updateData()},updateData:function(){for(var t=[],e=this.geom.getPoints(this._smoothness),i=0;i<e.length;i++)t.push(e[i].x,e[i].y);return t.push(e[0].x,e[0].y),this.pathIndexes=s(t),this.pathData=t,this}});t.exports=i},7930:(t,e,i)=>{var d=i(65960),p=i(75177),f=i(20926);t.exports=function(t,e,i,o){i.addToRenderList(e);var s=t.currentContext;if(f(t,s,e,i,o)){var n=e._displayOriginX,r=e._displayOriginY,a=e.pathData,h=a.length-1,t=a[0]-n,i=a[1]-r;s.beginPath(),s.moveTo(t,i),e.closePath||(h-=2);for(var l=2;l<h;l+=2){var c=a[l]-n,u=a[l+1]-r;s.lineTo(c,u)}s.closePath(),e.isFilled&&(d(s,e),s.fill()),e.isStroked&&(p(s,e),s.stroke()),s.restore()}}},1543:(t,e,i)=>{var r=i(19921);i(39429).register("ellipse",function(t,e,i,o,s,n){return this.displayList.add(new r(this.scene,t,e,i,o,s,n))})},54205:(t,e,i)=>{i(29747);var o=i(19467),i=i(7930);t.exports={renderWebGL:o,renderCanvas:i}},19467:(t,e,i)=>{var a=i(10441),h=i(91296),l=i(34682);t.exports=function(t,e,i,o){i.addToRenderList(e);var s=t.pipelines.set(e.pipeline),o=h(e,i,o),o=s.calcMatrix.copyFrom(o.calc),n=e._displayOriginX,r=e._displayOriginY,i=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&a(s,o,e,i,n,r),e.isStroked&&l(s,e,i,n,r),t.pipelines.postBatch(e)}},30479:(t,e,i)=>{var o=i(83419),u=i(17803),i=i(26015),o=new o({Extends:u,Mixins:[i],initialize:function(t,e,i,o,s,n,r,a,h,l,c){void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=128),void 0===s&&(s=128),void 0===n&&(n=32),void 0===r&&(r=32),u.call(this,t,"Grid",null),this.cellWidth=n,this.cellHeight=r,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(e,i),this.setSize(o,s),this.setFillStyle(a,h),void 0!==l&&this.setOutlineStyle(l,c),this.updateDisplayOrigin()},setFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.showCells=!1:(this.fillColor=t,this.fillAlpha=e,this.showCells=!0),this},setAltFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.showAltCells=!1:(this.altFillColor=t,this.altFillAlpha=e,this.showAltCells=!0),this},setOutlineStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.showOutline=!1:(this.outlineFillColor=t,this.outlineFillAlpha=e,this.showOutline=!0),this}});t.exports=o},49912:(t,e,i)=>{var S=i(65960),A=i(75177),C=i(20926);t.exports=function(t,e,i,o){i.addToRenderList(e);var s=t.currentContext;if(C(t,s,e,i,o)){var n=-e._displayOriginX,r=-e._displayOriginY,t=i.alpha*e.alpha,a=e.width,h=e.height,l=e.cellWidth,c=e.cellHeight,u=Math.ceil(a/l),d=Math.ceil(h/c),p=l,f=c,b=l-(u*l-a),y=c-(d*c-h),o=e.showCells,m=e.showAltCells,i=e.showOutline,x=0,g=0,v=0;if(i&&(p--,f--,b===l&&b--,y===c)&&y--,o&&0<e.fillAlpha)for(S(s,e),g=0;g<d;g++)for(m&&(v=g%2),x=0;x<u;x++)m&&v?v=0:(v++,s.fillRect(n+x*l,r+g*c,x<u-1?p:b,g<d-1?f:y));if(m&&0<e.altFillAlpha)for(S(s,e,e.altFillColor,e.altFillAlpha*t),g=0;g<d;g++)for(m&&(v=g%2),x=0;x<u;x++)!m||v?(v=0,s.fillRect(n+x*l,r+g*c,x<u-1?p:b,g<d-1?f:y)):v=1;if(i&&0<e.outlineFillAlpha){for(A(s,e,e.outlineFillColor,e.outlineFillAlpha*t),x=1;x<u;x++){var _=x*l;s.beginPath(),s.moveTo(_+n,r),s.lineTo(_+n,h+r),s.stroke()}for(g=1;g<d;g++){var w=g*c;s.beginPath(),s.moveTo(n,w+r),s.lineTo(n+a,w+r),s.stroke()}}s.restore()}}},34137:(t,e,i)=>{var o=i(39429),c=i(30479);o.register("grid",function(t,e,i,o,s,n,r,a,h,l){return this.displayList.add(new c(this.scene,t,e,i,o,s,n,r,a,h,l))})},26015:(t,e,i)=>{i(29747);var o=i(46161),i=i(49912);t.exports={renderWebGL:o,renderCanvas:i}},46161:(t,e,i)=>{var A=i(91296),C=i(70554);t.exports=function(t,e,i,o){i.addToRenderList(e);var s=t.pipelines.set(e.pipeline),o=A(e,i,o);s.calcMatrix.copyFrom(o.calc).translate(-e._displayOriginX,-e._displayOriginY);var n,o=i.alpha*e.alpha,r=e.width,a=e.height,h=e.cellWidth,l=e.cellHeight,c=Math.ceil(r/h),u=Math.ceil(a/l),d=h,p=l,f=h-(c*h-r),b=l-(u*l-a),i=e.showCells,y=e.showAltCells,m=e.showOutline,x=0,g=0,v=0;if(m&&(d--,p--,f===h&&f--,b===l)&&b--,t.pipelines.preBatch(e),i&&0<e.fillAlpha)for(_=s.fillTint,n=C.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*o),_.TL=n,_.TR=n,_.BL=n,_.BR=n,g=0;g<u;g++)for(y&&(v=g%2),x=0;x<c;x++)y&&v?v=0:(v++,s.batchFillRect(x*h,g*l,x<c-1?d:f,g<u-1?p:b));if(y&&0<e.altFillAlpha)for(_=s.fillTint,n=C.getTintAppendFloatAlpha(e.altFillColor,e.altFillAlpha*o),_.TL=n,_.TR=n,_.BL=n,_.BR=n,g=0;g<u;g++)for(y&&(v=g%2),x=0;x<c;x++)!y||v?(v=0,s.batchFillRect(x*h,g*l,x<c-1?d:f,g<u-1?p:b)):v=1;if(m&&0<e.outlineFillAlpha){var i=s.strokeTint,_=C.getTintAppendFloatAlpha(e.outlineFillColor,e.outlineFillAlpha*o);for(i.TL=_,i.TR=_,i.BL=_,i.BR=_,x=1;x<c;x++){var w=x*h;s.batchLine(w,0,w,a,1,1,1,0,!1)}for(g=1;g<u;g++){var S=g*l;s.batchLine(0,S,r,S,1,1,1,0,!1)}}t.pipelines.postBatch(e)}},61475:(t,e,i)=>{var o=i(99651),s=i(83419),h=i(17803),i=new s({Extends:h,Mixins:[o],initialize:function(t,e,i,o,s,n,r,a){void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=48),void 0===s&&(s=32),void 0===n&&(n=15658734),void 0===r&&(r=10066329),void 0===a&&(a=13421772),h.call(this,t,"IsoBox",null),this.projection=4,this.fillTop=n,this.fillLeft=r,this.fillRight=a,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(e,i),this.setSize(o,s),this.updateDisplayOrigin()},setProjection:function(t){return this.projection=t,this},setFaces:function(t,e,i){return void 0===e&&(e=!0),void 0===i&&(i=!0),this.showTop=t=void 0===t?!0:t,this.showLeft=e,this.showRight=i,this},setFillStyle:function(t,e,i){return this.fillTop=t,this.fillLeft=e,this.fillRight=i,this.isFilled=!0,this}});t.exports=i},11508:(t,e,i)=>{var n=i(65960),r=i(20926);t.exports=function(t,e,i,o){i.addToRenderList(e);var s=t.currentContext;r(t,s,e,i,o)&&e.isFilled&&(t=e.width,i=e.height,o=t/2,t=t/e.projection,e.showTop&&(n(s,e,e.fillTop),s.beginPath(),s.moveTo(-o,-i),s.lineTo(0,-t-i),s.lineTo(o,-i),s.lineTo(o,-1),s.lineTo(0,t-1),s.lineTo(-o,-1),s.lineTo(-o,-i),s.fill()),e.showLeft&&(n(s,e,e.fillLeft),s.beginPath(),s.moveTo(-o,0),s.lineTo(0,t),s.lineTo(0,t-i),s.lineTo(-o,-i),s.lineTo(-o,0),s.fill()),e.showRight&&(n(s,e,e.fillRight),s.beginPath(),s.moveTo(o,0),s.lineTo(0,t),s.lineTo(0,t-i),s.lineTo(o,-i),s.lineTo(o,0),s.fill()),s.restore())}},3933:(t,e,i)=>{var o=i(39429),a=i(61475);o.register("isobox",function(t,e,i,o,s,n,r){return this.displayList.add(new a(this.scene,t,e,i,o,s,n,r))})},99651:(t,e,i)=>{i(29747);var o=i(68149),i=i(11508);t.exports={renderWebGL:o,renderCanvas:i}},68149:(t,e,i)=>{var m=i(91296),x=i(70554);t.exports=function(t,e,i,o){i.addToRenderList(e);var s,n,r,a,h,l,c,u,d,p=t.pipelines.set(e.pipeline),o=m(e,i,o),o=p.calcMatrix.copyFrom(o.calc),f=e.width,b=e.height,y=f/2,f=f/e.projection,i=i.alpha*e.alpha;e.isFilled&&(t.pipelines.preBatch(e),e.showTop&&(s=x.getTintAppendFloatAlpha(e.fillTop,i),n=o.getX(-y,-b),r=o.getY(-y,-b),a=o.getX(0,-f-b),h=o.getY(0,-f-b),l=o.getX(y,-b),c=o.getY(y,-b),u=o.getX(0,f-b),d=o.getY(0,f-b),p.batchQuad(e,n,r,a,h,l,c,u,d,0,0,1,1,s,s,s,s,2)),e.showLeft&&(s=x.getTintAppendFloatAlpha(e.fillLeft,i),n=o.getX(-y,0),r=o.getY(-y,0),a=o.getX(0,f),h=o.getY(0,f),l=o.getX(0,f-b),c=o.getY(0,f-b),u=o.getX(-y,-b),d=o.getY(-y,-b),p.batchQuad(e,n,r,a,h,l,c,u,d,0,0,1,1,s,s,s,s,2)),e.showRight&&(s=x.getTintAppendFloatAlpha(e.fillRight,i),n=o.getX(y,0),r=o.getY(y,0),a=o.getX(0,f),h=o.getY(0,f),l=o.getX(0,f-b),c=o.getY(0,f-b),u=o.getX(y,-b),d=o.getY(y,-b),p.batchQuad(e,n,r,a,h,l,c,u,d,0,0,1,1,s,s,s,s,2)),t.pipelines.postBatch(e))}},16933:(t,e,i)=>{var o=i(83419),s=i(60561),l=i(17803),i=new o({Extends:l,Mixins:[s],initialize:function(t,e,i,o,s,n,r,a,h){void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=48),void 0===s&&(s=32),void 0===n&&(n=!1),void 0===r&&(r=15658734),void 0===a&&(a=10066329),void 0===h&&(h=13421772),l.call(this,t,"IsoTriangle",null),this.projection=4,this.fillTop=r,this.fillLeft=a,this.fillRight=h,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=n,this.isFilled=!0,this.setPosition(e,i),this.setSize(o,s),this.updateDisplayOrigin()},setProjection:function(t){return this.projection=t,this},setReversed:function(t){return this.isReversed=t,this},setFaces:function(t,e,i){return void 0===e&&(e=!0),void 0===i&&(i=!0),this.showTop=t=void 0===t?!0:t,this.showLeft=e,this.showRight=i,this},setFillStyle:function(t,e,i){return this.fillTop=t,this.fillLeft=e,this.fillRight=i,this.isFilled=!0,this}});t.exports=i},79590:(t,e,i)=>{var r=i(65960),a=i(20926);t.exports=function(t,e,i,o){i.addToRenderList(e);var s,n=t.currentContext;a(t,n,e,i,o)&&e.isFilled&&(t=e.width,i=e.height,o=t/2,t=t/e.projection,s=e.isReversed,e.showTop&&s&&(r(n,e,e.fillTop),n.beginPath(),n.moveTo(-o,-i),n.lineTo(0,-t-i),n.lineTo(o,-i),n.lineTo(0,t-i),n.fill()),e.showLeft&&(r(n,e,e.fillLeft),n.beginPath(),s?n.moveTo(-o,-i):n.moveTo(-o,0),n.lineTo(0,t),n.lineTo(0,t-i),n.fill()),e.showRight&&(r(n,e,e.fillRight),n.beginPath(),s?n.moveTo(o,-i):n.moveTo(o,0),n.lineTo(0,t),n.lineTo(0,t-i),n.fill()),n.restore())}},49803:(t,e,i)=>{var o=i(39429),h=i(16933);o.register("isotriangle",function(t,e,i,o,s,n,r,a){return this.displayList.add(new h(this.scene,t,e,i,o,s,n,r,a))})},60561:(t,e,i)=>{i(29747);var o=i(51503),i=i(79590);t.exports={renderWebGL:o,renderCanvas:i}},51503:(t,e,i)=>{var x=i(91296),g=i(70554);t.exports=function(t,e,i,o){i.addToRenderList(e);var s,n,r,a,h,l,c,u,d,p=t.pipelines.set(e.pipeline),o=x(e,i,o),o=p.calcMatrix.copyFrom(o.calc),f=e.width,b=e.height,y=f/2,f=f/e.projection,m=e.isReversed,i=i.alpha*e.alpha;e.isFilled&&(t.pipelines.preBatch(e),e.showTop&&m&&(s=g.getTintAppendFloatAlpha(e.fillTop,i),n=o.getX(-y,-b),r=o.getY(-y,-b),a=o.getX(0,-f-b),h=o.getY(0,-f-b),l=o.getX(y,-b),c=o.getY(y,-b),u=o.getX(0,f-b),d=o.getY(0,f-b),p.batchQuad(e,n,r,a,h,l,c,u,d,0,0,1,1,s,s,s,s,2)),e.showLeft&&(s=g.getTintAppendFloatAlpha(e.fillLeft,i),c=(l=(h=(a=(r=m?(n=o.getX(-y,-b),o.getY(-y,-b)):(n=o.getX(-y,0),o.getY(-y,0)),o.getX(0,f)),o.getY(0,f)),o.getX(0,f-b)),o.getY(0,f-b)),p.batchTri(e,n,r,a,h,l,c,0,0,1,1,s,s,s,2)),e.showRight&&(s=g.getTintAppendFloatAlpha(e.fillRight,i),c=(l=(h=(a=(r=m?(n=o.getX(y,-b),o.getY(y,-b)):(n=o.getX(y,0),o.getY(y,0)),o.getX(0,f)),o.getY(0,f)),o.getX(0,f-b)),o.getY(0,f-b)),p.batchTri(e,n,r,a,h,l,c,0,0,1,1,s,s,s,2)),t.pipelines.postBatch(e))}},57847:(t,e,i)=>{var o=i(83419),l=i(17803),c=i(23031),i=i(36823),o=new o({Extends:l,Mixins:[i],initialize:function(t,e,i,o,s,n,r,a,h){void 0===e&&(e=0),void 0===i&&(i=0),l.call(this,t,"Line",new c(o=void 0===o?0:o,s=void 0===s?0:s,n=void 0===n?128:n,r=void 0===r?0:r));t=Math.max(1,this.geom.right-this.geom.left),o=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(e,i),this.setSize(t,o),void 0!==a&&this.setStrokeStyle(1,a,h),this.updateDisplayOrigin()},setLineWidth:function(t,e){return void 0===e&&(e=t),this._startWidth=t,this._endWidth=e,this.lineWidth=t,this},setTo:function(t,e,i,o){return this.geom.setTo(t,e,i,o),this}});t.exports=o},17440:(t,e,i)=>{var n=i(75177),r=i(20926);t.exports=function(t,e,i,o){i.addToRenderList(e);var s=t.currentContext;r(t,s,e,i,o)&&(t=e._displayOriginX,i=e._displayOriginY,e.isStroked&&(n(s,e),s.beginPath(),s.moveTo(e.geom.x1-t,e.geom.y1-i),s.lineTo(e.geom.x2-t,e.geom.y2-i),s.stroke()),s.restore())}},2481:(t,e,i)=>{var o=i(39429),h=i(57847);o.register("line",function(t,e,i,o,s,n,r,a){return this.displayList.add(new h(this.scene,t,e,i,o,s,n,r,a))})},36823:(t,e,i)=>{i(29747);var o=i(77385),i=i(17440);t.exports={renderWebGL:o,renderCanvas:i}},77385:(t,e,i)=>{var h=i(91296),l=i(70554);t.exports=function(t,e,i,o){i.addToRenderList(e);var s,n=t.pipelines.set(e.pipeline),o=h(e,i,o),r=(n.calcMatrix.copyFrom(o.calc),e._displayOriginX),a=e._displayOriginY,i=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isStroked&&(s=n.strokeTint,i=l.getTintAppendFloatAlpha(e.strokeColor,e.strokeAlpha*i),s.TL=i,s.TR=i,s.BL=i,s.BR=i,n.batchLine(e.geom.x1-r,e.geom.y1-a,e.geom.x2-r,e.geom.y2-a,e._startWidth/2,e._endWidth/2,1,0,!1,o.sprite,o.camera)),t.pipelines.postBatch(e)}},24949:(t,e,i)=>{var o=i(90273),s=i(83419),n=i(94811),r=i(13829),a=i(25717),h=i(17803),l=i(5469),i=new s({Extends:h,Mixins:[o],initialize:function(t,e,i,o,s,n){void 0===e&&(e=0),void 0===i&&(i=0),h.call(this,t,"Polygon",new a(o));t=r(this.geom);this.setPosition(e,i),this.setSize(t.width,t.height),void 0!==s&&this.setFillStyle(s,n),this.updateDisplayOrigin(),this.updateData()},smooth:function(t){void 0===t&&(t=1);for(var e=0;e<t;e++)l(this.geom);return this.updateData()},setTo:function(t){this.geom.setTo(t);t=r(this.geom);return this.setSize(t.width,t.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var t=[],e=this.geom.points,i=0;i<e.length;i++)t.push(e[i].x,e[i].y);return t.push(e[0].x,e[0].y),this.pathIndexes=n(t),this.pathData=t,this}});t.exports=i},38710:(t,e,i)=>{var d=i(65960),p=i(75177),f=i(20926);t.exports=function(t,e,i,o){i.addToRenderList(e);var s=t.currentContext;if(f(t,s,e,i,o)){var n=e._displayOriginX,r=e._displayOriginY,a=e.pathData,h=a.length-1,t=a[0]-n,i=a[1]-r;s.beginPath(),s.moveTo(t,i),e.closePath||(h-=2);for(var l=2;l<h;l+=2){var c=a[l]-n,u=a[l+1]-r;s.lineTo(c,u)}e.closePath&&s.closePath(),e.isFilled&&(d(s,e),s.fill()),e.isStroked&&(p(s,e),s.stroke()),s.restore()}}},64827:(t,e,i)=>{var o=i(39429),n=i(24949);o.register("polygon",function(t,e,i,o,s){return this.displayList.add(new n(this.scene,t,e,i,o,s))})},90273:(t,e,i)=>{i(29747);var o=i(73695),i=i(38710);t.exports={renderWebGL:o,renderCanvas:i}},73695:(t,e,i)=>{var a=i(10441),h=i(91296),l=i(34682);t.exports=function(t,e,i,o){i.addToRenderList(e);var s=t.pipelines.set(e.pipeline),o=h(e,i,o),o=s.calcMatrix.copyFrom(o.calc),n=e._displayOriginX,r=e._displayOriginY,i=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&a(s,o,e,i,n,r),e.isStroked&&l(s,e,i,n,r),t.pipelines.postBatch(e)}},74561:(t,e,i)=>{var o=i(83419),a=i(87841),h=i(17803),i=i(95597),o=new o({Extends:h,Mixins:[i],initialize:function(t,e,i,o,s,n,r){void 0===e&&(e=0),void 0===i&&(i=0),h.call(this,t,"Rectangle",new a(0,0,o=void 0===o?128:o,s=void 0===s?128:s)),this.setPosition(e,i),this.setSize(o,s),void 0!==n&&this.setFillStyle(n,r),this.updateDisplayOrigin(),this.updateData()},setSize:function(t,e){this.width=t,this.height=e,this.geom.setSize(t,e),this.updateData(),this.updateDisplayOrigin();var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=t,i.hitArea.height=e),this},updateData:function(){var t=[],e=this.geom,i=this._tempLine;return e.getLineA(i),t.push(i.x1,i.y1,i.x2,i.y2),e.getLineB(i),t.push(i.x2,i.y2),e.getLineC(i),t.push(i.x2,i.y2),e.getLineD(i),t.push(i.x2,i.y2),this.pathData=t,this}});t.exports=o},48682:(t,e,i)=>{var n=i(65960),r=i(75177),a=i(20926);t.exports=function(t,e,i,o){i.addToRenderList(e);var s=t.currentContext;a(t,s,e,i,o)&&(t=e._displayOriginX,i=e._displayOriginY,e.isFilled&&(n(s,e),s.fillRect(-t,-i,e.width,e.height)),e.isStroked&&(r(s,e),s.beginPath(),s.rect(-t,-i,e.width,e.height),s.stroke()),s.restore())}},87959:(t,e,i)=>{var o=i(39429),r=i(74561);o.register("rectangle",function(t,e,i,o,s,n){return this.displayList.add(new r(this.scene,t,e,i,o,s,n))})},95597:(t,e,i)=>{i(29747);var o=i(52059),i=i(48682);t.exports={renderWebGL:o,renderCanvas:i}},52059:(t,e,i)=>{var h=i(91296),l=i(34682),c=i(70554);t.exports=function(t,e,i,o){i.addToRenderList(e);var s,n,r=t.pipelines.set(e.pipeline),o=h(e,i,o),o=(r.calcMatrix.copyFrom(o.calc),e._displayOriginX),a=e._displayOriginY,i=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&(s=r.fillTint,n=c.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*i),s.TL=n,s.TR=n,s.BL=n,s.BR=n,r.batchFillRect(-o,-a,e.width,e.height)),e.isStroked&&l(r,e,i,o,a),t.pipelines.postBatch(e)}},55911:(t,e,i)=>{var o=i(81991),s=i(83419),l=i(94811),h=i(17803),i=new s({Extends:h,Mixins:[o],initialize:function(t,e,i,o,s,n,r,a){void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=5),void 0===s&&(s=32),void 0===n&&(n=64),h.call(this,t,"Star",null),this._points=o,this._innerRadius=s,this._outerRadius=n,this.setPosition(e,i),this.setSize(2*n,2*n),void 0!==r&&this.setFillStyle(r,a),this.updateDisplayOrigin(),this.updateData()},setPoints:function(t){return this._points=t,this.updateData()},setInnerRadius:function(t){return this._innerRadius=t,this.updateData()},setOuterRadius:function(t){return this._outerRadius=t,this.updateData()},points:{get:function(){return this._points},set:function(t){this._points=t,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(t){this._innerRadius=t,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(t){this._outerRadius=t,this.updateData()}},updateData:function(){var t=[],e=this._points,i=this._innerRadius,o=this._outerRadius,s=Math.PI/2*3,n=Math.PI/e,r=o,a=o;t.push(r,a+-o);for(var h=0;h<e;h++)t.push(r+Math.cos(s)*o,a+Math.sin(s)*o),s+=n,t.push(r+Math.cos(s)*i,a+Math.sin(s)*i),s+=n;return t.push(r,a+-o),this.pathIndexes=l(t),this.pathData=t,this}});t.exports=i},64272:(t,e,i)=>{var d=i(65960),p=i(75177),f=i(20926);t.exports=function(t,e,i,o){i.addToRenderList(e);var s=t.currentContext;if(f(t,s,e,i,o)){var n=e._displayOriginX,r=e._displayOriginY,a=e.pathData,h=a.length-1,t=a[0]-n,i=a[1]-r;s.beginPath(),s.moveTo(t,i),e.closePath||(h-=2);for(var l=2;l<h;l+=2){var c=a[l]-n,u=a[l+1]-r;s.lineTo(c,u)}s.closePath(),e.isFilled&&(d(s,e),s.fill()),e.isStroked&&(p(s,e),s.stroke()),s.restore()}}},93697:(t,e,i)=>{var a=i(55911);i(39429).register("star",function(t,e,i,o,s,n,r){return this.displayList.add(new a(this.scene,t,e,i,o,s,n,r))})},81991:(t,e,i)=>{i(29747);var o=i(57017),i=i(64272);t.exports={renderWebGL:o,renderCanvas:i}},57017:(t,e,i)=>{var a=i(10441),h=i(91296),l=i(34682);t.exports=function(t,e,i,o){i.addToRenderList(e);var s=t.pipelines.set(e.pipeline),o=h(e,i,o),o=s.calcMatrix.copyFrom(o.calc),n=e._displayOriginX,r=e._displayOriginY,i=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&a(s,o,e,i,n,r),e.isStroked&&l(s,e,i,n,r),t.pipelines.postBatch(e)}},36931:(t,e,i)=>{var o=i(83419),u=i(17803),d=i(16483),i=i(96195),o=new o({Extends:u,Mixins:[i],initialize:function(t,e,i,o,s,n,r,a,h,l,c){void 0===e&&(e=0),void 0===i&&(i=0),u.call(this,t,"Triangle",new d(o=void 0===o?0:o,s=void 0===s?128:s,n=void 0===n?64:n,r=void 0===r?0:r,a=void 0===a?128:a,h=void 0===h?128:h));t=this.geom.right-this.geom.left,o=this.geom.bottom-this.geom.top;this.setPosition(e,i),this.setSize(t,o),void 0!==l&&this.setFillStyle(l,c),this.updateDisplayOrigin(),this.updateData()},setTo:function(t,e,i,o,s,n){return this.geom.setTo(t,e,i,o,s,n),this.updateData()},updateData:function(){var t=[],e=this.geom,i=this._tempLine;return e.getLineA(i),t.push(i.x1,i.y1,i.x2,i.y2),e.getLineB(i),t.push(i.x2,i.y2),e.getLineC(i),t.push(i.x2,i.y2),this.pathData=t,this}});t.exports=o},85172:(t,e,i)=>{var h=i(65960),l=i(75177),c=i(20926);t.exports=function(t,e,i,o){i.addToRenderList(e);var s,n,r,a=t.currentContext;c(t,a,e,i,o)&&(t=e._displayOriginX,i=e._displayOriginY,o=e.geom.x1-t,s=e.geom.y1-i,n=e.geom.x2-t,r=e.geom.y2-i,t=e.geom.x3-t,i=e.geom.y3-i,a.beginPath(),a.moveTo(o,s),a.lineTo(n,r),a.lineTo(t,i),a.closePath(),e.isFilled&&(h(a,e),a.fill()),e.isStroked&&(l(a,e),a.stroke()),a.restore())}},45245:(t,e,i)=>{var o=i(39429),c=i(36931);o.register("triangle",function(t,e,i,o,s,n,r,a,h,l){return this.displayList.add(new c(this.scene,t,e,i,o,s,n,r,a,h,l))})},96195:(t,e,i)=>{i(29747);var o=i(83253),i=i(85172);t.exports={renderWebGL:o,renderCanvas:i}},83253:(t,e,i)=>{var p=i(91296),f=i(34682),b=i(70554);t.exports=function(t,e,i,o){i.addToRenderList(e);var s,n,r,a,h,l,c=t.pipelines.set(e.pipeline),o=p(e,i,o),u=(c.calcMatrix.copyFrom(o.calc),e._displayOriginX),d=e._displayOriginY,i=i.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&(s=c.fillTint,n=b.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*i),s.TL=n,s.TR=n,s.BL=n,s.BR=n,s=e.geom.x1-u,n=e.geom.y1-d,r=e.geom.x2-u,a=e.geom.y2-d,h=e.geom.x3-u,l=e.geom.y3-d,c.batchFillTriangle(s,n,r,a,h,l,o.sprite,o.camera)),e.isStroked&&f(c,e,i,u,d),t.pipelines.postBatch(e)}},68287:(t,e,i)=>{var n=i(9674),o=i(83419),s=i(31401),r=i(95643),i=i(92751),o=new o({Extends:r,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.PostPipeline,s.ScrollFactor,s.Size,s.TextureCrop,s.Tint,s.Transform,s.Visible,i],initialize:function(t,e,i,o,s){r.call(this,t,"Sprite"),this._crop=this.resetCropObject(),this.anims=new n(this),this.setTexture(o,s),this.setPosition(e,i),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(t,e){this.anims.update(t,e)},play:function(t,e){return this.anims.play(t,e)},playReverse:function(t,e){return this.anims.playReverse(t,e)},playAfterDelay:function(t,e){return this.anims.playAfterDelay(t,e)},playAfterRepeat:function(t,e){return this.anims.playAfterRepeat(t,e)},chain:function(t){return this.anims.chain(t)},stop:function(){return this.anims.stop()},stopAfterDelay:function(t){return this.anims.stopAfterDelay(t)},stopAfterRepeat:function(t){return this.anims.stopAfterRepeat(t)},stopOnFrame:function(t){return this.anims.stopOnFrame(t)},toJSON:function(){return s.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});t.exports=o},76552:t=>{t.exports=function(t,e,i,o){i.addToRenderList(e),t.batchSprite(e,e.frame,i,o)}},15567:(t,e,i)=>{var s=i(25305),n=i(13059),o=i(44603),r=i(23568),a=i(68287);o.register("sprite",function(t,e){var i=r(t=void 0===t?{}:t,"key",null),o=r(t,"frame",null),i=new a(this.scene,0,0,i,o);return void 0!==e&&(t.add=e),s(this.scene,i,t),n(i,t),i})},46409:(t,e,i)=>{var o=i(39429),s=i(68287);o.register("sprite",function(t,e,i,o){return this.displayList.add(new s(this.scene,t,e,i,o))})},92751:(t,e,i)=>{i(29747);var o=i(9409),i=i(76552);t.exports={renderWebGL:o,renderCanvas:i}},9409:t=>{t.exports=function(t,e,i,o){i.addToRenderList(e),e.pipeline.batchSprite(e,i,o)}},14220:t=>{t.exports=function(t,e,i){var o=t.canvas,s=t.context,n=t.style,r=[],a=0,h=i.length;0<n.maxLines&&n.maxLines<i.length&&(h=n.maxLines),n.syncFont(o,s);for(var l=0;l<h;l++){var c=n.strokeThickness;c+=s.measureText(i[l]).width,1<i[l].length&&(c+=t.letterSpacing*(i[l].length-1)),n.wordWrap&&(c-=s.measureText(" ").width),r[l]=Math.ceil(c),a=Math.max(a,r[l])}var o=e.fontSize+n.strokeThickness,e=o*h,u=t.lineSpacing;return 1<h&&(e+=u*(h-1)),{width:a,height:e,lines:h,lineWidths:r,lineSpacing:u,lineHeight:o}}},79557:(t,e,i)=>{var p=i(27919);t.exports=function(t){var e=p.create(this),i=e.getContext("2d",{willReadFrequently:!0}),o=(t.syncFont(e,i),i.measureText(t.testString));if("actualBoundingBoxAscent"in o)return s=o.actualBoundingBoxAscent,n=o.actualBoundingBoxDescent,p.remove(e),{ascent:s,descent:n,fontSize:s+n};var s=Math.ceil(o.width*t.baselineX),n=2*s,r=s*t.baselineY|0,o=(e.width=s,e.height=n,i.fillStyle="#f00",i.fillRect(0,0,s,n),i.font=t._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(t.testString,0,r),{ascent:0,descent:0,fontSize:0}),t=i.getImageData(0,0,s,n);if(t){for(var a,h=t.data,i=h.length,l=4*s,c=0,u=!1,d=0;d<r;d++){for(a=0;a<l;a+=4)if(255!==h[c+a]){u=!0;break}if(u)break;c+=l}for(o.ascent=r-d,c=i-l,u=!1,d=n;r<d;d--){for(a=0;a<l;a+=4)if(255!==h[c+a]){u=!0;break}if(u)break;c-=l}o.descent=d-r}else o.ascent=r,o.descent=6+r;return o.fontSize=o.ascent+o.descent,p.remove(e),o}},50171:(t,e,i)=>{var o=i(40366),n=i(27919),s=i(83419),r=i(31401),a=i(95643),A=i(14220),h=i(35154),l=i(35846),c=i(61771),u=i(35762),d=i(45650),i=new s({Extends:a,Mixins:[r.Alpha,r.BlendMode,r.ComputedSize,r.Crop,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.PostPipeline,r.ScrollFactor,r.Tint,r.Transform,r.Visible,c],initialize:function(t,e,i,o,s){void 0===e&&(e=0),void 0===i&&(i=0),a.call(this,t,"Text"),this.renderer=t.sys.renderer,this.setPosition(e,i),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=n.create(this),this.context,this.style=new u(this,s),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,(this.letterSpacing=0)===this.style.resolution&&(this.style.resolution=1),this._crop=this.resetCropObject(),this._textureKey=d(),this.texture=t.sys.textures.addCanvas(this._textureKey,this.canvas),this.context=this.texture.context,this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(o),s&&s.padding&&this.setPadding(s.padding),s&&s.lineSpacing&&this.setLineSpacing(s.lineSpacing)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",o(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(t){var e,i=this.style;return i.wordWrapCallback?(e=i.wordWrapCallback.call(i.wordWrapCallbackScope,t,this),Array.isArray(e)?e.join("\n"):e):i.wordWrapWidth?i.wordWrapUseAdvanced?this.advancedWordWrap(t,this.context,this.style.wordWrapWidth):this.basicWordWrap(t,this.context,this.style.wordWrapWidth):t},advancedWordWrap:function(t,e,i){for(var o="",s=t.replace(/ +/gi," ").split(this.splitRegExp),n=s.length,r=0;r<n;r++){var a="",h=(h=s[r]).replace(/^ *|\s*$/gi,"");if(e.measureText(h).width<i)o+=h+"\n";else{for(var l=i,c=h.split(" "),u=0;u<c.length;u++){var d=c[u],p=d+" ",f=e.measureText(p).width;if(l<f){if(0===u){for(var b=p;b.length&&(b=b.slice(0,-1),!((f=e.measureText(b).width)<=l)););if(!b.length)throw new Error("wordWrapWidth < a single character");d=d.substr(b.length);c[u]=d,a+=b}d=c[u].length?u:u+1,d=c.slice(d).join(" ").replace(/[ \n]*$/gi,"");s.splice(r+1,0,d),n=s.length;break}a+=p,l-=f}o+=a.replace(/[ \n]*$/gi,"")+"\n"}}return o.replace(/[\s|\n]*$/gi,"")},basicWordWrap:function(t,e,i){for(var o="",s=t.split(this.splitRegExp),n=s.length-1,r=e.measureText(" ").width,a=0;a<=n;a++){for(var h=i,l=s[a].split(" "),c=l.length-1,u=0;u<=c;u++){var d=l[u],p=e.measureText(d).width,f=p;u<c&&(f+=r),h<f&&0<u&&(o+="\n",h=i),o+=d,u<c?(o+=" ",h-=f):h-=p}a<n&&(o+="\n")}return o},getWrappedText:function(t){return void 0===t&&(t=this._text),this.style.syncFont(this.canvas,this.context),this.runWordWrap(t).split(this.splitRegExp)},setText:function(t){return t||0===t||(t=""),(t=Array.isArray(t)?t.join("\n"):t)!==this._text&&(this._text=t.toString(),this.updateText()),this},appendText:function(t,e){void 0===e&&(e=!0),t||0===t||(t=""),t=(t=Array.isArray(t)?t.join("\n"):t).toString();e=this._text.concat(e?"\n"+t:t);return e!==this._text&&(this._text=e,this.updateText()),this},setStyle:function(t){return this.style.setStyle(t)},setFont:function(t){return this.style.setFont(t)},setFontFamily:function(t){return this.style.setFontFamily(t)},setFontSize:function(t){return this.style.setFontSize(t)},setFontStyle:function(t){return this.style.setFontStyle(t)},setFixedSize:function(t,e){return this.style.setFixedSize(t,e)},setBackgroundColor:function(t){return this.style.setBackgroundColor(t)},setFill:function(t){return this.style.setFill(t)},setColor:function(t){return this.style.setColor(t)},setStroke:function(t,e){return this.style.setStroke(t,e)},setShadow:function(t,e,i,o,s,n){return this.style.setShadow(t,e,i,o,s,n)},setShadowOffset:function(t,e){return this.style.setShadowOffset(t,e)},setShadowColor:function(t){return this.style.setShadowColor(t)},setShadowBlur:function(t){return this.style.setShadowBlur(t)},setShadowStroke:function(t){return this.style.setShadowStroke(t)},setShadowFill:function(t){return this.style.setShadowFill(t)},setWordWrapWidth:function(t,e){return this.style.setWordWrapWidth(t,e)},setWordWrapCallback:function(t,e){return this.style.setWordWrapCallback(t,e)},setAlign:function(t){return this.style.setAlign(t)},setResolution:function(t){return this.style.setResolution(t)},setLineSpacing:function(t){return this.lineSpacing=t,this.updateText()},setLetterSpacing:function(t){return this.letterSpacing=t,this.updateText()},setPadding:function(t,e,i,o){var s,n;return"object"==typeof t?(i=null!==(n=h(s=t,"x",null))?t=n:(t=h(s,"left",0),h(s,"right",t)),o=null!==(n=h(s,"y",null))?e=n:(e=h(s,"top",0),h(s,"bottom",e))):(void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=t),void 0===o&&(o=e)),this.padding.left=t,this.padding.top=e,this.padding.right=i,this.padding.bottom=o,this.updateText()},setMaxLines:function(t){return this.style.setMaxLines(t)},setRTL:function(t){var e=this.style;return e.rtl!==(t=void 0===t?!0:t)&&((e.rtl=t)?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",o(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),"left"===e.align?e.align="right":"right"===e.align&&(e.align="left")),this},updateText:function(){var t,e=this.canvas,i=this.context,o=this.style,s=o.resolution,n=o.metrics,r=(o.syncFont(e,i),this._text),a=(r=o.wordWrapWidth||o.wordWrapCallback?this.runWordWrap(this._text):r).split(this.splitRegExp),h=A(this,n,a),l=this.padding;0===o.fixedWidth?(this.width=h.width+l.left+l.right,t=h.width):(this.width=o.fixedWidth,(t=this.width-l.left-l.right)<h.width&&(t=h.width)),0===o.fixedHeight?this.height=h.height+l.top+l.bottom:this.height=o.fixedHeight;var c,u,d=this.width,r=this.height;this.updateDisplayOrigin(),d*=s,r*=s,d=Math.max(d,1),r=Math.max(r,1),e.width!==d||e.height!==r?(e.width=d,e.height=r,this.frame.setSize(d,r),o.syncFont(e,i),o.rtl&&(i.direction="rtl")):i.clearRect(0,0,d,r),i.save(),i.scale(s,s),o.backgroundColor&&(i.fillStyle=o.backgroundColor,i.fillRect(0,0,d,r)),o.syncStyle(e,i),i.translate(l.left,l.top);for(var p=0;p<h.lines;p++){if(c=o.strokeThickness/2,u=o.strokeThickness/2+p*h.lineHeight+n.ascent,0<p&&(u+=h.lineSpacing*p),o.rtl)c=d-c-l.left-l.right;else if("right"===o.align)c+=t-h.lineWidths[p];else if("center"===o.align)c+=(t-h.lineWidths[p])/2;else if("justify"===o.align&&.85<=h.lineWidths[p]/h.width){var f=h.width-h.lineWidths[p],b=i.measureText(" ").width,y=a[p].trim(),m=y.split(" ");f+=(a[p].length-y.length)*b;for(var x=Math.floor(f/b),g=0;0<x;)m[g]+=" ",g=(g+1)%(m.length-1||1),--x;a[p]=m.join(" ")}if(this.autoRound&&(c=Math.round(c),u=Math.round(u)),o.strokeThickness&&(o.syncShadow(i,o.shadowStroke),i.strokeText(a[p],c,u)),o.color){o.syncShadow(i,o.shadowFill);var v=this.letterSpacing;if(0!==v)for(var _=0,w=a[p].split(""),S=0;S<w.length;S++)i.fillText(w[S],c+_,u),_+=i.measureText(w[S]).width+v;else i.fillText(a[p],c,u)}}i.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(e,this.frame.source.glTexture,!0));s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=this.width,s.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(t){this.setText(t)}},toJSON:function(){var t=r.ToJSON(this),e={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=e,t},preDestroy:function(){l(this.canvas),n.remove(this.canvas);var t=this.texture;t&&t.destroy()}});t.exports=i},79724:t=>{t.exports=function(t,e,i,o){0!==e.width&&0!==e.height&&(i.addToRenderList(e),t.batchSprite(e,e.frame,i,o))}},71259:(t,e,i)=>{var n=i(25305),o=i(44603),r=i(23568),a=i(50171);o.register("text",function(t,e){var i=r(t=void 0===t?{}:t,"text",""),o=r(t,"style",null),s=r(t,"padding",null),s=(null!==s&&(o.padding=s),new a(this.scene,0,0,i,o));return void 0!==e&&(t.add=e),n(this.scene,s,t),s.autoRound=r(t,"autoRound",!0),s.resolution=r(t,"resolution",1),s})},68005:(t,e,i)=>{var s=i(50171);i(39429).register("text",function(t,e,i,o){return this.displayList.add(new s(this.scene,t,e,i,o))})},61771:(t,e,i)=>{i(29747);var o=i(34397),i=i(79724);t.exports={renderWebGL:o,renderCanvas:i}},35762:(t,e,i)=>{var o=i(83419),r=i(23568),a=i(35154),h=i(79557),l={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|MÃ‰qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},i=new o({initialize:function(t,e){this.parent=t,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(e,!1,!0)},setStyle:function(t,e,i){for(var o in void 0===e&&(e=!0),void 0===i&&(i=!1),t&&t.hasOwnProperty("fontSize")&&"number"==typeof t.fontSize&&(t.fontSize=t.fontSize.toString()+"px"),l){var s=i?l[o][1]:this[o];this[o]=("wordWrapCallback"===o||"wordWrapCallbackScope"===o?a:r)(t,l[o][0],s)}var n=a(t,"font",null),n=(null!==n&&this.setFont(n,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),a(t,"fill",null)),n=(null!==n&&(this.color=n),a(t,"metrics",!1));return n?this.metrics={ascent:a(n,"ascent",0),descent:a(n,"descent",0),fontSize:a(n,"fontSize",0)}:!e&&this.metrics||(this.metrics=h(this)),e?this.parent.updateText():this.parent},syncFont:function(t,e){e.font=this._font},syncStyle:function(t,e){e.textBaseline="alphabetic",e.fillStyle=this.color,e.strokeStyle=this.stroke,e.lineWidth=this.strokeThickness,e.lineCap="round",e.lineJoin="round"},syncShadow:function(t,e){e?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)},update:function(t){return t&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=h(this)),this.parent.updateText()},setFont:function(t,e){void 0===e&&(e=!0);var i,o=t,s="",n="";return"string"!=typeof t?(o=a(t,"fontFamily","Courier"),s=a(t,"fontSize","16px"),n=a(t,"fontStyle","")):(i=0,n=2<(t=t.split(" ")).length?t[i++]:"",s=t[i++]||"16px",o=t[i++]||"Courier"),o===this.fontFamily&&s===this.fontSize&&n===this.fontStyle||(this.fontFamily=o,this.fontSize=s,this.fontStyle=n,e&&this.update(!0)),this.parent},setFontFamily:function(t){return this.fontFamily!==t&&(this.fontFamily=t,this.update(!0)),this.parent},setFontStyle:function(t){return this.fontStyle!==t&&(this.fontStyle=t,this.update(!0)),this.parent},setFontSize:function(t){return"number"==typeof t&&(t=t.toString()+"px"),this.fontSize!==t&&(this.fontSize=t,this.update(!0)),this.parent},setTestString:function(t){return this.testString=t,this.update(!0)},setFixedSize:function(t,e){return this.fixedWidth=t,this.fixedHeight=e,t&&(this.parent.width=t),e&&(this.parent.height=e),this.update(!1)},setBackgroundColor:function(t){return this.backgroundColor=t,this.update(!1)},setFill:function(t){return this.color=t,this.update(!1)},setColor:function(t){return this.color=t,this.update(!1)},setResolution:function(t){return this.resolution=t,this.update(!1)},setStroke:function(t,e){return void 0===e&&(e=this.strokeThickness),void 0===t&&0!==this.strokeThickness?(this.strokeThickness=0,this.update(!0)):this.stroke===t&&this.strokeThickness===e||(this.stroke=t,this.strokeThickness=e,this.update(!0)),this.parent},setShadow:function(t,e,i,o,s,n){return void 0===e&&(e=0),void 0===i&&(i="#000"),void 0===o&&(o=0),void 0===s&&(s=!1),void 0===n&&(n=!0),this.shadowOffsetX=t=void 0===t?0:t,this.shadowOffsetY=e,this.shadowColor=i,this.shadowBlur=o,this.shadowStroke=s,this.shadowFill=n,this.update(!1)},setShadowOffset:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.shadowOffsetX=t,this.shadowOffsetY=e,this.update(!1)},setShadowColor:function(t){return this.shadowColor=t=void 0===t?"#000":t,this.update(!1)},setShadowBlur:function(t){return this.shadowBlur=t=void 0===t?0:t,this.update(!1)},setShadowStroke:function(t){return this.shadowStroke=t,this.update(!1)},setShadowFill:function(t){return this.shadowFill=t,this.update(!1)},setWordWrapWidth:function(t,e){return void 0===e&&(e=!1),this.wordWrapWidth=t,this.wordWrapUseAdvanced=e,this.update(!1)},setWordWrapCallback:function(t,e){return void 0===e&&(e=null),this.wordWrapCallback=t,this.wordWrapCallbackScope=e,this.update(!1)},setAlign:function(t){return this.align=t=void 0===t?"left":t,this.update(!1)},setMaxLines:function(t){return this.maxLines=t=void 0===t?0:t,this.update(!1)},getTextMetrics:function(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}},toJSON:function(){var t,e={};for(t in l)e[t]=this[t];return e.metrics=this.getTextMetrics(),e},destroy:function(){this.parent=void 0}});t.exports=i},34397:(t,e,i)=>{var l=i(70554);t.exports=function(t,e,i,o){var s,n,r,a,h;0!==e.width&&0!==e.height&&(i.addToRenderList(e),n=(s=e.frame).width,r=s.height,a=l.getTintAppendFloatAlpha,h=(t=t.pipelines.set(e.pipeline,e)).setTexture2D(s.glTexture,e),t.batchTexture(e,s.glTexture,n,r,e.x,e.y,n/e.style.resolution,r/e.style.resolution,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.displayOriginX,e.displayOriginY,0,0,n,r,a(e.tintTopLeft,i.alpha*e._alphaTL),a(e.tintTopRight,i.alpha*e._alphaTR),a(e.tintBottomLeft,i.alpha*e._alphaBL),a(e.tintBottomRight,i.alpha*e._alphaBR),e.tintFill,0,0,i,o,!1,h))}},20839:(t,e,i)=>{var l=i(27919),o=i(83419),s=i(31401),c=i(95643),u=i(98439),n=i(68703),r=i(56295),d=i(45650),p=i(26099),i=new o({Extends:c,Mixins:[s.Alpha,s.BlendMode,s.ComputedSize,s.Crop,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.PostPipeline,s.ScrollFactor,s.Tint,s.Transform,s.Visible,r],initialize:function(t,e,i,o,s,n,r){var a=t.sys.renderer,n=(c.call(this,t,"TileSprite"),t.sys.textures.get(n)),h=n.get(r);h.source.compressionAlgorithm&&(h=(n=t.sys.textures.get("__MISSING")).get()),"DynamicTexture"===n.type&&(h=(n=t.sys.textures.get("__MISSING")).get()),s=o&&s?(o=Math.floor(o),Math.floor(s)):(o=h.width,h.height),this._tilePosition=new p,this._tileScale=new p(1,1),this.dirty=!1,this.renderer=a,this.canvas=l.create(this,o,s),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=n,this.displayFrame=h,this._crop=this.resetCropObject(),this._textureKey=d(),this.texture=t.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.potWidth=u(h.width),this.potHeight=u(h.height),this.fillCanvas=l.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(e,i),this.setSize(o,s),this.setFrame(r),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(t,e){return this.displayTexture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t){t=this.displayTexture.get(t);return this.potWidth=u(t.width),this.potHeight=u(t.height),this.canvas.width=0,t.cutWidth&&t.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this.displayFrame=t,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(t,e){return void 0!==t&&(this.tilePositionX=t),void 0!==e&&(this.tilePositionY=e),this},setTileScale:function(t,e){return void 0===t&&(t=this.tileScaleX),void 0===e&&(e=t),this.tileScaleX=t,this.tileScaleY=e,this},updateTileTexture:function(){var t,e,i,o,s;this.dirty&&this.renderer&&((t=this.displayFrame).source.isRenderTexture||t.source.isGLTexture||(e=this.fillContext,i=this.fillCanvas,o=this.potWidth,s=this.potHeight,this.renderer&&this.renderer.gl||(o=t.cutWidth,s=t.cutHeight),e.clearRect(0,0,o,s),i.width=o,i.height=s,e.drawImage(t.source.image,t.cutX,t.cutY,t.cutWidth,t.cutHeight,0,0,o,s),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(i,this.fillPattern):this.fillPattern=e.createPattern(i,"repeat"),this.updateCanvas()),this.dirty=!1)},updateCanvas:function(){var t,e,i,o,s=this.canvas;s.width===this.width&&s.height===this.height||(s.width=this.width,s.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl||(s=this.context,this.scene.sys.game.config.antialias||n.disable(s),t=this._tileScale.x,e=this._tileScale.y,i=this._tilePosition.x,o=this._tilePosition.y,s.clearRect(0,0,this.width,this.height),s.save(),s.scale(t,e),s.translate(-i,-o),s.fillStyle=this.fillPattern,s.fillRect(i,o,this.width/t,this.height/e),s.restore()),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),l.remove(this.canvas),l.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null;var t=this.texture;t&&t.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(t){this._tilePosition.x=t,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(t){this._tilePosition.y=t,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(t){this._tileScale.x=t,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(t){this._tileScale.y=t,this.dirty=!0}}});t.exports=i},46992:t=>{t.exports=function(t,e,i,o){e.updateCanvas(),i.addToRenderList(e),t.batchSprite(e,e.frame,i,o)}},14167:(t,e,i)=>{var h=i(25305),o=i(44603),l=i(23568),c=i(20839);o.register("tileSprite",function(t,e){var i=l(t=void 0===t?{}:t,"x",0),o=l(t,"y",0),s=l(t,"width",512),n=l(t,"height",512),r=l(t,"key",""),a=l(t,"frame",""),i=new c(this.scene,i,o,s,n,r,a);return void 0!==e&&(t.add=e),h(this.scene,i,t),i})},91681:(t,e,i)=>{var r=i(20839);i(39429).register("tileSprite",function(t,e,i,o,s,n){return this.displayList.add(new r(this.scene,t,e,i,o,s,n))})},56295:(t,e,i)=>{i(29747);var o=i(18553),i=i(46992);t.exports={renderWebGL:o,renderCanvas:i}},18553:(t,e,i)=>{var h=i(70554);t.exports=function(t,e,i,o){e.updateCanvas();var s,n,r=e.width,a=e.height;0!==r&&0!==a&&(i.addToRenderList(e),s=h.getTintAppendFloatAlpha,n=(t=t.pipelines.set(e.pipeline,e)).setTexture2D(e.fillPattern,e),t.batchTexture(e,e.fillPattern,e.displayFrame.width*e.tileScaleX,e.displayFrame.height*e.tileScaleY,e.x,e.y,r,a,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.originX*r,e.originY*a,0,0,r,a,s(e.tintTopLeft,i.alpha*e._alphaTL),s(e.tintTopRight,i.alpha*e._alphaTR),s(e.tintBottomLeft,i.alpha*e._alphaBL),s(e.tintBottomRight,i.alpha*e._alphaBR),e.tintFill,e.tilePositionX%e.displayFrame.width/e.displayFrame.width,e.tilePositionY%e.displayFrame.height/e.displayFrame.height,i,o,!1,n))}},18471:(t,e,i)=>{var o=i(45319),s=i(83419),n=i(31401),h=i(51708),r=i(8443),a=i(95643),l=i(36383),c=i(14463),u=i(45650),i=i(10247),s=new s({Extends:a,Mixins:[n.Alpha,n.BlendMode,n.ComputedSize,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.PostPipeline,n.ScrollFactor,n.TextureCrop,n.Tint,n.Transform,n.Visible,i],initialize:function(t,e,i,o){a.call(this,t,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=u(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._metadataCallbackHandler=this.metadataHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._rfvCallbackId=0;var s=t.sys.game,e=(this._device=s.device.video,this.setPosition(e,i),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),s.events.on(r.PAUSE,this.globalPause,this),s.events.on(r.RESUME,this.globalResume,this),t.sys.sound);e&&e.on(c.GLOBAL_MUTE,this.globalMute,this),o&&this.load(o)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(t){var e=this.scene.sys.cache.video.get(t);return e&&(this.cacheKey=t,this.loadHandler(e.url,e.noAudio,e.crossOrigin)),this},changeSource:function(t,e,i,o,s){void 0===e&&(e=!0),void 0===i&&(i=!1),this.cacheKey!==t&&(this.load(t),e)&&this.play(i,o,s)},getVideoKey:function(){return this.cacheKey},loadURL:function(t,e,i){void 0===e&&(e=!1);t=this._device.getVideoURL(t);return t&&(this.cacheKey="",this.loadHandler(t.url,e,i)),this},loadMediaStream:function(t,e,i){return this.loadHandler(null,e,i,t)},loadHandler:function(t,e,i,o){e=e||!1;var s=this.video;if(s?(this.removeLoadEventHandlers(),this.stop()):((s=document.createElement("video")).controls=!1,s.setAttribute("playsinline","playsinline"),s.setAttribute("preload","auto"),s.setAttribute("disablePictureInPicture","true")),e?(s.muted=!0,s.defaultMuted=!0,s.setAttribute("autoplay","autoplay")):(s.muted=!1,s.defaultMuted=!1,s.removeAttribute("autoplay")),i?s.setAttribute("crossorigin",i):s.removeAttribute("crossorigin"),o)if("srcObject"in s)try{s.srcObject=o}catch(t){if("TypeError"!==t.name)throw t;s.src=URL.createObjectURL(o)}else s.src=URL.createObjectURL(o);else s.src=t;this.retry=0,this.video=s,this._playCalled=!1,s.load(),this.addLoadEventHandlers();e=this.scene.sys.textures.get(this._key);return this.setTexture(e),this},requestVideoFrame:function(t,e){var i,o,s,n,r,a=this.video;a&&(i=e.width,o=e.height,r=this.videoTexture,s=this.videoTextureSource,(n=!r||s.source!==a)?(this._codePaused=a.paused,this._codeMuted=a.muted,r?(s.source=a,s.width=i,s.height=o,r.get().setSize(i,o)):((r=this.scene.sys.textures.create(this._key,a,i,o)).add("__BASE",0,0,0,i,o),this.setTexture(r),this.videoTexture=r,this.videoTextureSource=r.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(h.VIDEO_TEXTURE,this,r)),this.setSizeToFrame(),this.updateDisplayOrigin()):s.update(),this.isStalled=!1,r=(this.metadata=e).mediaTime,n&&(this._lastUpdate=r,this.emit(h.VIDEO_CREATED,this,i,o),this.frameReady||(this.frameReady=!0,this.emit(h.VIDEO_PLAY,this))),this._playingMarker?r>=this._markerOut&&(a.loop?(a.currentTime=this._markerIn,this.emit(h.VIDEO_LOOP,this)):(this.stop(!1),this.emit(h.VIDEO_COMPLETE,this))):r<this._lastUpdate&&this.emit(h.VIDEO_LOOP,this),this._lastUpdate=r,this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this)))},play:function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=l.MAX_SAFE_INTEGER);var o=this.video;return!o||this.isPlaying()||(void 0===t&&(t=o.loop),o.loop=t,this._markerIn=e,this._markerOut=i,this._playingMarker=-1<e&&e<i&&i<l.MAX_SAFE_INTEGER,this._playCalled)||(this._rfvCallbackId=o.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise()),this},addLoadEventHandlers:function(){var t=this.video;t&&(t.addEventListener("error",this._loadCallbackHandler),t.addEventListener("abort",this._loadCallbackHandler),t.addEventListener("loadedmetadata",this._metadataCallbackHandler))},removeLoadEventHandlers:function(){var t=this.video;t&&(t.removeEventListener("error",this._loadCallbackHandler),t.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var t=this.video;if(t){var e,i=this._callbacks;for(e in i)t.addEventListener(e,i[e])}},removeEventHandlers:function(){var t=this.video;if(t){var e,i=this._callbacks;for(e in i)t.removeEventListener(e,i[e])}},createPlayPromise:function(t){void 0===t&&(t=!0);var e,i,o,s=this.video,n=s.play();void 0!==n?(e=this.playSuccess.bind(this),o=this.playError.bind(this),t||(i=this,o=function(){i.failedPlayAttempts++}),n.then(e).catch(o)):(s.addEventListener("playing",this._callbacks.legacy),t||this.failedPlayAttempts++)},addMarker:function(t,e,i){return!isNaN(e)&&0<=e&&!isNaN(i)&&e<i&&(this.markers[t]=[e,i]),this},playMarker:function(t,e){t=this.markers[t];return t&&this.play(e,t[0],t[1]),this},removeMarker:function(t){return delete this.markers[t],this},snapshot:function(t,e){return void 0===t&&(t=this.width),void 0===e&&(e=this.height),this.snapshotArea(0,0,this.width,this.height,t,e)},snapshotArea:function(t,e,i,o,s,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.width),void 0===o&&(o=this.height),void 0===s&&(s=i),void 0===n&&(n=o);var r=this.video,a=this.snapshotTexture;return a?a.setSize(s,n):(a=this.scene.sys.textures.createCanvas(u(),s,n),this.snapshotTexture=a),r&&a.context.drawImage(r,t,e,i,o,0,0,s,n),a.update()},saveSnapshotTexture:function(t){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,t):this.snapshotTexture=this.scene.sys.textures.createCanvas(t,this.width,this.height),this.snapshotTexture},playSuccess:function(){var t;this._playCalled&&(this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(h.VIDEO_UNLOCKED,this)),(t=this.scene.sys.sound)&&t.mute&&this.setMute(!0),-1<this._markerIn)&&(this.video.currentTime=this._markerIn)},playError:function(t){var e=t.name;"NotAllowedError"===e?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(h.VIDEO_LOCKED,this)):"NotSupportedError"===e?(this.stop(!1),this.emit(h.VIDEO_UNSUPPORTED,this,t)):(this.stop(!1),this.emit(h.VIDEO_ERROR,this,t))},legacyPlayHandler:function(){var t=this.video;t&&(this.playSuccess(),t.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(h.VIDEO_PLAYING,this)},loadErrorHandler:function(t){this.stop(!1),this.emit(h.VIDEO_ERROR,this,t)},metadataHandler:function(t){this.emit(h.VIDEO_METADATA,this,t)},setSizeToFrame:function(t){t=t||this.frame,this.width=t.realWidth,this.height=t.realHeight,1!==this.scaleX&&(this.scaleX=this.displayWidth/this.width),1!==this.scaleY&&(this.scaleY=this.displayHeight/this.height);t=this.input;return t&&!t.customHitArea&&(t.hitArea.width=this.width,t.hitArea.height=this.height),this},stalledHandler:function(t){this.isStalled=!0,this.emit(h.VIDEO_STALLED,this,t)},completeHandler:function(){this._playCalled=!1,this.emit(h.VIDEO_COMPLETE,this)},preUpdate:function(t,e){this.video&&this._playCalled&&this.touchLocked&&this.playWhenUnlocked&&(this.retry+=e,this.retry>=this.retryInterval)&&(this.createPlayPromise(!1),this.retry=0)},seekTo:function(t){var e=this.video;return e&&(e=e.duration)!==1/0&&!isNaN(e)&&this.setCurrentTime(e*t),this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(t){var e,i,o=this.video;return o&&("string"==typeof t&&(e=t[0],i=parseFloat(t.substr(1)),"+"===e?t=o.currentTime+i:"-"===e&&(t=o.currentTime-i)),o.currentTime=t),this},seekingHandler:function(){this.isSeeking=!0,this.emit(h.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(h.VIDEO_SEEKED,this)},getProgress:function(){var t=this.video;if(t){var e=t.duration;if(e!==1/0&&!isNaN(e))return t.currentTime/e}return-1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(t){this._codeMuted=t=void 0===t?!0:t;var e=this.video;return e&&(e.muted=!!this._systemMuted||t),this},isMuted:function(){return this._codeMuted},globalMute:function(t,e){this._systemMuted=e;var i=this.video;i&&(i.muted=!!this._codeMuted||e)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,!this.video||this._codePaused||this.video.ended||this.createPlayPromise()},setPaused:function(t){var e=this.video;return this._codePaused=t=void 0===t?!0:t,e&&!e.ended&&(t?e.paused||(this.removeEventHandlers(),e.pause()):this._playCalled?e.paused&&!this._systemPaused&&this.createPlayPromise():this.play()),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(t){return void 0===t&&(t=1),this.video&&(this.video.volume=o(t,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(t){return this.video&&(this.video.playbackRate=t),this},getLoop:function(){return!!this.video&&this.video.loop},setLoop:function(t){return void 0===t&&(t=!0),this.video&&(this.video.loop=t),this},isPlaying:function(){return!!this.video&&!(this.video.paused||this.video.ended)},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(t,e){return void 0===e&&(e=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,t),this.videoTextureSource.setFlipY(e)),this._key=t,this.flipY=e,!!this.videoTexture},stop:function(t){void 0===t&&(t=!0);var e=this.video;return e&&(this.removeEventHandlers(),e.cancelVideoFrameCallback(this._rfvCallbackId),e.pause()),this.retry=0,this._playCalled=!1,t&&this.emit(h.VIDEO_STOP,this),this},removeVideoElement:function(){var t=this.video;if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("autoplay"),t.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var t=this.scene.sys.game.events,t=(t.off(r.PAUSE,this.globalPause,this),t.off(r.RESUME,this.globalResume,this),this.scene.sys.sound);t&&t.off(c.GLOBAL_MUTE,this.globalMute,this)}});t.exports=s},58352:t=>{t.exports=function(t,e,i,o){e.videoTexture&&(i.addToRenderList(e),t.batchSprite(e,e.frame,i,o))}},11511:(t,e,i)=>{var o=i(25305),s=i(44603),n=i(23568),r=i(18471);s.register("video",function(t,e){var i=n(t=void 0===t?{}:t,"key",null),i=new r(this.scene,0,0,i);return void 0!==e&&(t.add=e),o(this.scene,i,t),i})},89025:(t,e,i)=>{var o=i(18471);i(39429).register("video",function(t,e,i){return this.displayList.add(new o(this.scene,t,e,i))})},10247:(t,e,i)=>{i(29747);var o=i(29849),i=i(58352);t.exports={renderWebGL:o,renderCanvas:i}},29849:t=>{t.exports=function(t,e,i,o){e.videoTexture&&(i.addToRenderList(e),e.pipeline.batchSprite(e,i,o))}},41481:(t,e,i)=>{var n=i(10312),o=i(96503),s=i(87902),r=i(83419),a=i(31401),h=i(95643),l=i(87841),c=i(37303),i=new r({Extends:h,Mixins:[a.Depth,a.GetBounds,a.Origin,a.Transform,a.ScrollFactor,a.Visible],initialize:function(t,e,i,o,s){void 0===o&&(o=1),void 0===s&&(s=o),h.call(this,t,"Zone"),this.setPosition(e,i),this.width=o,this.height=s,this.blendMode=n.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,e,i){void 0===i&&(i=!0),this.width=t,this.height=e,this.updateDisplayOrigin();var o=this.input;return i&&o&&!o.customHitArea&&(o.hitArea.width=t,o.hitArea.height=e),this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this},setCircleDropZone:function(t){return this.setDropZone(new o(0,0,t),s)},setRectangleDropZone:function(t,e){return this.setDropZone(new l(0,0,t,e),c)},setDropZone:function(t,e){return this.input||this.setInteractive(t,e,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(t,e,i){i.addToRenderList(e)},renderWebGL:function(t,e,i){i.addToRenderList(e)}});t.exports=i},95261:(t,e,i)=>{var o=i(44603),s=i(23568),n=i(41481);o.register("zone",function(t){var e=s(t,"x",0),i=s(t,"y",0),o=s(t,"width",1),t=s(t,"height",o);return new n(this.scene,e,i,o,t)})},84175:(t,e,i)=>{var s=i(41481);i(39429).register("zone",function(t,e,i,o){return this.displayList.add(new s(this.scene,t,e,i,o))})},95166:t=>{t.exports=function(t){return 0<t.radius?Math.PI*t.radius*t.radius:0}},96503:(t,e,i)=>{var o=i(83419),s=i(87902),n=i(26241),r=i(79124),a=i(23777),h=i(28176),i=new o({initialize:function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.type=a.CIRCLE,this.x=t,this.y=e,this._radius=i,this._diameter=2*i},contains:function(t,e){return s(this,t,e)},getPoint:function(t,e){return n(this,t,e)},getPoints:function(t,e,i){return r(this,t,e,i)},getRandomPoint:function(t){return h(this,t)},setTo:function(t,e,i){return this.x=t,this.y=e,this._radius=i,this._diameter=2*i,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(t){this._radius=t,this._diameter=2*t}},diameter:{get:function(){return this._diameter},set:function(t){this._diameter=t,this._radius=.5*t}},left:{get:function(){return this.x-this._radius},set:function(t){this.x=t+this._radius}},right:{get:function(){return this.x+this._radius},set:function(t){this.x=t-this._radius}},top:{get:function(){return this.y-this._radius},set:function(t){this.y=t+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(t){this.y=t-this._radius}}});t.exports=i},71562:t=>{t.exports=function(t){return Math.PI*t.radius*2}},92110:(t,e,i)=>{var o=i(2141);t.exports=function(t,e,i){return(i=void 0===i?new o:i).x=t.x+t.radius*Math.cos(e),i.y=t.y+t.radius*Math.sin(e),i}},42250:(t,e,i)=>{var o=i(96503);t.exports=function(t){return new o(t.x,t.y,t.radius)}},87902:t=>{t.exports=function(t,e,i){return 0<t.radius&&e>=t.left&&e<=t.right&&i>=t.top&&i<=t.bottom&&(t.x-e)*(t.x-e)+(t.y-i)*(t.y-i)<=t.radius*t.radius}},5698:(t,e,i)=>{var o=i(87902);t.exports=function(t,e){return o(t,e.x,e.y)}},70588:(t,e,i)=>{var o=i(87902);t.exports=function(t,e){return o(t,e.x,e.y)&&o(t,e.right,e.y)&&o(t,e.x,e.bottom)&&o(t,e.right,e.bottom)}},26394:t=>{t.exports=function(t,e){return e.setTo(t.x,t.y,t.radius)}},76278:t=>{t.exports=function(t,e){return t.x===e.x&&t.y===e.y&&t.radius===e.radius}},2074:(t,e,i)=>{var o=i(87841);t.exports=function(t,e){return(e=void 0===e?new o:e).x=t.left,e.y=t.top,e.width=t.diameter,e.height=t.diameter,e}},26241:(t,e,i)=>{var o=i(92110),s=i(62945),n=i(36383),r=i(2141);t.exports=function(t,e,i){void 0===i&&(i=new r);e=s(e,0,n.PI2);return o(t,e,i)}},79124:(t,e,i)=>{var r=i(71562),a=i(92110),h=i(62945),l=i(36383);t.exports=function(t,e,i,o){void 0===o&&(o=[]),!e&&0<i&&(e=r(t)/i);for(var s=0;s<e;s++){var n=h(s/e,0,l.PI2);o.push(a(t,n))}return o}},50884:t=>{t.exports=function(t,e,i){return t.x+=e,t.y+=i,t}},39212:t=>{t.exports=function(t,e){return t.x+=e.x,t.y+=e.y,t}},28176:(t,e,i)=>{var n=i(2141);t.exports=function(t,e){void 0===e&&(e=new n);var i=2*Math.PI*Math.random(),o=Math.random()+Math.random(),o=1<o?2-o:o,s=o*Math.cos(i),o=o*Math.sin(i);return e.x=t.x+s*t.radius,e.y=t.y+o*t.radius,e}},88911:(t,e,i)=>{var o=i(96503);o.Area=i(95166),o.Circumference=i(71562),o.CircumferencePoint=i(92110),o.Clone=i(42250),o.Contains=i(87902),o.ContainsPoint=i(5698),o.ContainsRect=i(70588),o.CopyFrom=i(26394),o.Equals=i(76278),o.GetBounds=i(2074),o.GetPoint=i(26241),o.GetPoints=i(79124),o.Offset=i(50884),o.OffsetPoint=i(39212),o.Random=i(28176),t.exports=o},23777:t=>{t.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},78874:t=>{t.exports=function(t){return t.isEmpty()?0:t.getMajorRadius()*t.getMinorRadius()*Math.PI}},92990:t=>{t.exports=function(t){var e=t.width/2,t=t.height/2,i=Math.pow(e-t,2)/Math.pow(e+t,2);return Math.PI*(e+t)*(1+3*i/(10+Math.sqrt(4-3*i)))}},79522:(t,e,i)=>{var n=i(2141);t.exports=function(t,e,i){void 0===i&&(i=new n);var o=t.width/2,s=t.height/2;return i.x=t.x+o*Math.cos(e),i.y=t.y+s*Math.sin(e),i}},58102:(t,e,i)=>{var o=i(8497);t.exports=function(t){return new o(t.x,t.y,t.width,t.height)}},81154:t=>{t.exports=function(t,e,i){return!(t.width<=0||t.height<=0)&&(e=(e-t.x)/t.width,(e*=e)+(e=(i-t.y)/t.height)*e<.25)}},46662:(t,e,i)=>{var o=i(81154);t.exports=function(t,e){return o(t,e.x,e.y)}},1632:(t,e,i)=>{var o=i(81154);t.exports=function(t,e){return o(t,e.x,e.y)&&o(t,e.right,e.y)&&o(t,e.x,e.bottom)&&o(t,e.right,e.bottom)}},65534:t=>{t.exports=function(t,e){return e.setTo(t.x,t.y,t.width,t.height)}},8497:(t,e,i)=>{var o=i(83419),s=i(81154),n=i(90549),r=i(48320),a=i(23777),h=i(24820),i=new o({initialize:function(t,e,i,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=0),this.type=a.ELLIPSE,this.x=t,this.y=e,this.width=i,this.height=o},contains:function(t,e){return s(this,t,e)},getPoint:function(t,e){return n(this,t,e)},getPoints:function(t,e,i){return r(this,t,e,i)},getRandomPoint:function(t){return h(this,t)},setTo:function(t,e,i,o){return this.x=t,this.y=e,this.width=i,this.height=o,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(t){this.x=t+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(t){this.y=t+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});t.exports=i},36146:t=>{t.exports=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}},23694:(t,e,i)=>{var o=i(87841);t.exports=function(t,e){return(e=void 0===e?new o:e).x=t.left,e.y=t.top,e.width=t.width,e.height=t.height,e}},90549:(t,e,i)=>{var o=i(79522),s=i(62945),n=i(36383),r=i(2141);t.exports=function(t,e,i){void 0===i&&(i=new r);e=s(e,0,n.PI2);return o(t,e,i)}},48320:(t,e,i)=>{var r=i(92990),a=i(79522),h=i(62945),l=i(36383);t.exports=function(t,e,i,o){void 0===o&&(o=[]),!e&&0<i&&(e=r(t)/i);for(var s=0;s<e;s++){var n=h(s/e,0,l.PI2);o.push(a(t,n))}return o}},73424:t=>{t.exports=function(t,e,i){return t.x+=e,t.y+=i,t}},44808:t=>{t.exports=function(t,e){return t.x+=e.x,t.y+=e.y,t}},24820:(t,e,i)=>{var s=i(2141);t.exports=function(t,e){void 0===e&&(e=new s);var i=Math.random()*Math.PI*2,o=Math.sqrt(Math.random());return e.x=t.x+o*Math.cos(i)*t.width/2,e.y=t.y+o*Math.sin(i)*t.height/2,e}},49203:(t,e,i)=>{var o=i(8497);o.Area=i(78874),o.Circumference=i(92990),o.CircumferencePoint=i(79522),o.Clone=i(58102),o.Contains=i(81154),o.ContainsPoint=i(46662),o.ContainsRect=i(1632),o.CopyFrom=i(65534),o.Equals=i(36146),o.GetBounds=i(23694),o.GetPoint=i(90549),o.GetPoints=i(48320),o.Offset=i(73424),o.OffsetPoint=i(44808),o.Random=i(24820),t.exports=o},55738:(t,e,i)=>{var o=i(23777),i=i(79291)(!1,{Circle:i(88911),Ellipse:i(49203),Intersects:i(91865),Line:i(2529),Mesh:i(73090),Point:i(43711),Polygon:i(58423),Rectangle:i(93232),Triangle:i(84435)},o);t.exports=i},2044:(t,e,i)=>{var o=i(20339);t.exports=function(t,e){return o(t.x,t.y,e.x,e.y)<=t.radius+e.radius}},81491:t=>{t.exports=function(t,e){var i=e.width/2,o=e.height/2,s=Math.abs(t.x-e.x-i),e=Math.abs(t.y-e.y-o),n=i+t.radius,r=o+t.radius;return!(n<s||r<e)&&(s<=i||e<=o||(n=s-i)*n+(r=e-o)*r<=t.radius*t.radius)}},63376:(t,e,i)=>{var d=i(2141),p=i(2044);t.exports=function(t,e,i){var o,s,n,r,a,h,l,c,u;return void 0===i&&(i=[]),p(t,e)&&(a=t.x,h=t.y,t=t.radius,l=e.x,c=e.y,e=e.radius,h===c?0==(n=(s=-2*c)*s-4*(o=1)*(l*l+(r=(e*e-t*t-l*l+a*a)/(2*(a-l)))*r-2*l*r+c*c-e*e))?i.push(new d(r,-s/(2*o))):0<n&&(i.push(new d(r,(-s+Math.sqrt(n))/(2*o))),i.push(new d(r,(-s-Math.sqrt(n))/(2*o)))):0==(n=(s=2*h*(u=(a-l)/(h-c))-2*(e=(e*e-t*t-l*l+a*a-c*c+h*h)/(2*(h-c)))*u-2*a)*s-4*(o=u*u+1)*(a*a+h*h+e*e-t*t-2*h*e))?i.push(new d(r=-s/(2*o),e-r*u)):0<n&&(r=(-s+Math.sqrt(n))/(2*o),i.push(new d(r,e-r*u)),r=(-s-Math.sqrt(n))/(2*o),i.push(new d(r,e-r*u)))),i}},97439:(t,e,i)=>{var r=i(4042),a=i(81491);t.exports=function(t,e,i){var o,s,n;return void 0===i&&(i=[]),a(t,e)&&(o=e.getLineA(),s=e.getLineB(),n=e.getLineC(),e=e.getLineD(),r(o,t,i),r(s,t,i),r(n,t,i),r(e,t,i)),i}},4042:(t,e,i)=>{var d=i(2141),p=i(80462);t.exports=function(t,e,i){var o,s,n,r,a,h,l,c,u;return void 0===i&&(i=[]),p(t,e)&&(o=t.x1,s=t.y1,n=t.x2,t=t.y2,0==(h=(a=2*((n=n-o)*(u=o-e.x)+(t=t-s)*(h=s-e.y)))*a-4*(r=n*n+t*t)*(u*u+h*h-(u=e.radius)*u))?(l=o+(e=-a/(2*r))*n,c=s+e*t,0<=e&&e<=1&&i.push(new d(l,c))):0<h&&(l=o+(u=(-a-Math.sqrt(h))/(2*r))*n,c=s+u*t,0<=u&&u<=1&&i.push(new d(l,c)),l=o+(e=(-a+Math.sqrt(h))/(2*r))*n,c=s+e*t,0<=e)&&e<=1&&i.push(new d(l,c))),i}},36100:(t,e,i)=>{var f=i(25836);t.exports=function(t,e,i,o){var s,n,r,a=t.x1,h=t.y1,l=t.x2,t=t.y2,c=e.x1,u=e.y1,l=l-a,t=t-h,d=e.x2-c,e=e.y2-u,p=l*e-t*d;if(0==p)return null;if(i=void 0===i?!1:i){if((n=(c+d*(s=(l*(u-h)+t*(a-c))/(d*t-e*l))-a)/l)<0||s<0||1<s)return null;r=n}else{if(n=((h-u)*l-(a-c)*t)/p,(s=((c-a)*e-(u-h)*d)/p)<0||1<s||n<0||1<n)return null;r=s}return(o=void 0===o?new f:o).set(a+l*r,h+t*r,r)}},3073:(t,e,i)=>{var h=i(36100),o=i(23031),l=i(25836),c=new o,u=new l;t.exports=function(t,e,i,o){void 0===i&&(i=!1);var s=!1;(o=void 0===o?new l:o).set(),u.set();for(var n=e[e.length-1],r=0;r<e.length;r++){var a=e[r];c.setTo(n.x,n.y,a.x,a.y),n=a,h(t,c,i,u)&&(!s||u.z<o.z)&&(o.copy(u),s=!0)}return s?o:null}},56362:(t,e,i)=>{var o=i(25836),r=i(61369),a=i(3073),h=new o;t.exports=function(t,e,i,o){void 0===o&&(o=new r),Array.isArray(e)||(e=[e]);var s=!1;o.set(),h.set();for(var n=0;n<e.length;n++)a(t,e[n].points,i,h)&&(!s||h.z<o.z)&&(o.set(h.x,h.y,h.z,n),s=!0);return s?o:null}},60646:(t,e,i)=>{var l=i(2141),c=i(76112),u=i(92773);t.exports=function(t,e,i){if(void 0===i&&(i=[]),u(t,e))for(var o=e.getLineA(),s=e.getLineB(),n=e.getLineC(),e=e.getLineD(),r=[new l,new l,new l,new l],a=[c(o,t,r[0]),c(s,t,r[1]),c(n,t,r[2]),c(e,t,r[3])],h=0;h<4;h++)a[h]&&i.push(r[h]);return i}},71147:(t,e,i)=>{var a=i(61369),h=i(56362),l=new(i(23031));function c(t,e,i,o,s){var n=Math.cos(t),r=Math.sin(t),e=(l.setTo(e,i,e+n,i+r),h(l,o,!0));e&&s.push(new a(e.x,e.y,t,e.w))}function u(t,e){return t.z-e.z}t.exports=function(t,e,i){Array.isArray(i)||(i=[i]);for(var o=[],s=[],n=0;n<i.length;n++)for(var r=i[n].points,a=0;a<r.length;a++){var h=Math.atan2(r[a].y-e,r[a].x-t);-1===s.indexOf(h)&&(c(h,t,e,i,o),c(h-1e-5,t,e,i,o),c(h+1e-5,t,e,i,o),s.push(h))}return o.sort(u)}},68389:(t,e,i)=>{var o=i(87841),s=i(59996);t.exports=function(t,e,i){return void 0===i&&(i=new o),s(t,e)&&(i.x=Math.max(t.x,e.x),i.y=Math.max(t.y,e.y),i.width=Math.min(t.right,e.right)-i.x,i.height=Math.min(t.bottom,e.bottom)-i.y),i}},52784:(t,e,i)=>{var r=i(60646),a=i(59996);t.exports=function(t,e,i){var o,s,n;return void 0===i&&(i=[]),a(t,e)&&(o=t.getLineA(),s=t.getLineB(),n=t.getLineC(),t=t.getLineD(),r(o,e,i),r(s,e,i),r(n,e,i),r(t,e,i)),i}},26341:(t,e,i)=>{var n=i(89265),r=i(60646);t.exports=function(t,e,i){var o,s;return void 0===i&&(i=[]),n(t,e)&&(o=e.getLineA(),s=e.getLineB(),e=e.getLineC(),r(o,t,i),r(s,t,i),r(e,t,i)),i}},38720:(t,e,i)=>{var n=i(4042),r=i(67636);t.exports=function(t,e,i){var o,s;return void 0===i&&(i=[]),r(t,e)&&(o=t.getLineA(),s=t.getLineB(),t=t.getLineC(),n(o,e,i),n(s,e,i),n(t,e,i)),i}},13882:(t,e,i)=>{var h=i(2141),l=i(2822),c=i(76112);t.exports=function(t,e,i){if(void 0===i&&(i=[]),l(t,e))for(var o=t.getLineA(),s=t.getLineB(),t=t.getLineC(),n=[new h,new h,new h],r=[c(o,e,n[0]),c(s,e,n[1]),c(t,e,n[2])],a=0;a<3;a++)r[a]&&i.push(n[a]);return i}},75636:(t,e,i)=>{var n=i(82944),r=i(13882);t.exports=function(t,e,i){var o,s;return void 0===i&&(i=[]),n(t,e)&&(o=e.getLineA(),s=e.getLineB(),e=e.getLineC(),r(t,o,i),r(t,s,i),r(t,e,i)),i}},80462:(t,e,i)=>{var c=i(87902),u=new(i(2141));t.exports=function(t,e,i){var o,s,n,r,a,h,l;return void 0===i&&(i=u),c(e,t.x1,t.y1)?(i.x=t.x1,i.y=t.y1,!0):c(e,t.x2,t.y2)?(i.x=t.x2,i.y=t.y2,!0):(o=t.x2-t.x1,s=t.y2-t.y1,l=e.x-t.x1,n=e.y-t.y1,0<(r=(a=o)*o+(h=s)*s)&&(a*=l=(l*o+n*s)/r,h*=l),i.x=t.x1+a,i.y=t.y1+h,a*a+h*h<=r&&0<=a*o+h*s&&c(e,i.x,i.y))}},76112:t=>{t.exports=function(t,e,i){var o,s,n=t.x1,r=t.y1,a=t.x2,t=t.y2,h=e.x1,l=e.y1,c=e.x2,e=e.y2;return!(n===a&&r===t||h===c&&l===e||0==(o=(e-l)*(a-n)-(c-h)*(t-r))||(s=((a-n)*(r-l)-(t-r)*(n-h))/o,(c=((c-h)*(r-l)-(e-l)*(n-h))/o)<0)||1<c||s<0||1<s||(i&&(i.x=n+c*(a-n),i.y=r+c*(t-r)),0))}},92773:t=>{t.exports=function(t,e){var i=t.x1,o=t.y1,s=t.x2,t=t.y2,n=e.x,r=e.y,a=e.right,e=e.bottom,h=0;if(n<=i&&i<=a&&r<=o&&o<=e||n<=s&&s<=a&&r<=t&&t<=e)return!0;if(i<n&&n<=s){if((h=o+(t-o)*(n-i)/(s-i))>r&&h<=e)return!0}else if(a<i&&s<=a&&(h=o+(t-o)*(a-i)/(s-i))>=r&&h<=e)return!0;if(o<r&&r<=t){if((h=i+(s-i)*(r-o)/(t-o))>=n&&h<=a)return!0}else if(e<o&&t<=e&&(h=i+(s-i)*(e-o)/(t-o))>=n&&h<=a)return!0;return!1}},16204:t=>{t.exports=function(t,e,i){void 0===i&&(i=1);var o,s=e.x1,n=e.y1,r=e.x2,e=e.y2,a=t.x,t=t.y,h=(r-s)*(r-s)+(e-n)*(e-n);return 0!=h&&((o=((a-s)*(r-s)+(t-n)*(e-n))/h)<0?Math.sqrt((s-a)*(s-a)+(n-t)*(n-t))<=i:0<=o&&o<=1?Math.abs(((n-t)*(r-s)-(s-a)*(e-n))/h)*Math.sqrt(h)<=i:Math.sqrt((r-a)*(r-a)+(e-t)*(e-t))<=i)}},14199:(t,e,i)=>{var n=i(16204);t.exports=function(t,e){var i,o,s;return!!n(t,e)&&(i=Math.min(e.x1,e.x2),o=Math.max(e.x1,e.x2),s=Math.min(e.y1,e.y2),e=Math.max(e.y1,e.y2),t.x>=i)&&t.x<=o&&t.y>=s&&t.y<=e}},59996:t=>{t.exports=function(t,e){return!(t.width<=0||t.height<=0||e.width<=0||e.height<=0||t.right<e.x||t.bottom<e.y||t.x>e.right||t.y>e.bottom)}},89265:(t,e,i)=>{var l=i(76112),c=i(37303),u=i(48653),d=i(77493);t.exports=function(t,e){var i,o,s,n,r,a,h;return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)&&(h=e.getLineA(),i=e.getLineB(),o=e.getLineC(),!!(c(t,h.x1,h.y1)||c(t,h.x2,h.y2)||c(t,i.x1,i.y1)||c(t,i.x2,i.y2)||c(t,o.x1,o.y1)||c(t,o.x2,o.y2)||(s=t.getLineA(),n=t.getLineB(),r=t.getLineC(),a=t.getLineD(),l(h,s))||l(h,n)||l(h,r)||l(h,a)||l(i,s)||l(i,n)||l(i,r)||l(i,a)||l(o,s)||l(o,n)||l(o,r)||l(o,a))||(h=d(t),0<u(e,h,!0).length))}},84411:t=>{t.exports=function(t,e,i,o,s,n){return!(e>t.right+(n=void 0===n?0:n)||i<t.left-n||o>t.bottom+n||s<t.top-n)}},67636:(t,e,i)=>{var o=i(80462),s=i(10690);t.exports=function(t,e){return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top||!s(t,e.x,e.y)&&!o(t.getLineA(),e)&&!o(t.getLineB(),e)&&!o(t.getLineC(),e))}},2822:(t,e,i)=>{var o=i(76112);t.exports=function(t,e){return!!(t.contains(e.x1,e.y1)||t.contains(e.x2,e.y2)||o(t.getLineA(),e)||o(t.getLineB(),e)||o(t.getLineC(),e))}},82944:(t,e,i)=>{var h=i(48653),l=i(71694),c=i(76112);t.exports=function(t,e){var i,o,s,n,r,a;return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)&&(a=t.getLineA(),i=t.getLineB(),o=t.getLineC(),s=e.getLineA(),n=e.getLineB(),r=e.getLineC(),!!(c(a,s)||c(a,n)||c(a,r))||!!(c(i,s)||c(i,n)||c(i,r))||!!(c(o,s)||c(o,n)||c(o,r))||(a=l(t),0<h(e,a,!0).length)||(a=l(e),0<h(t,a,!0).length))}},91865:(t,e,i)=>{t.exports={CircleToCircle:i(2044),CircleToRectangle:i(81491),GetCircleToCircle:i(63376),GetCircleToRectangle:i(97439),GetLineToCircle:i(4042),GetLineToLine:i(36100),GetLineToPoints:i(3073),GetLineToPolygon:i(56362),GetLineToRectangle:i(60646),GetRaysFromPointToPolygon:i(71147),GetRectangleIntersection:i(68389),GetRectangleToRectangle:i(52784),GetRectangleToTriangle:i(26341),GetTriangleToCircle:i(38720),GetTriangleToLine:i(13882),GetTriangleToTriangle:i(75636),LineToCircle:i(80462),LineToLine:i(76112),LineToRectangle:i(92773),PointToLine:i(16204),PointToLineSegment:i(14199),RectangleToRectangle:i(59996),RectangleToTriangle:i(89265),RectangleToValues:i(84411),TriangleToCircle:i(67636),TriangleToLine:i(2822),TriangleToTriangle:i(82944)}},91938:t=>{t.exports=function(t){return Math.atan2(t.y2-t.y1,t.x2-t.x1)}},84993:t=>{t.exports=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=[]);var o=Math.round(t.x1),s=Math.round(t.y1),n=Math.round(t.x2),r=Math.round(t.y2),a=Math.abs(n-o),h=Math.abs(r-s),l=o<n?1:-1,c=s<r?1:-1,u=a-h;i.push({x:o,y:s});for(var d=1;o!==n||s!==r;){var p=u<<1;-h<p&&(u-=h,o+=l),p<a&&(u+=a,s+=c),d%e==0&&i.push({x:o,y:s}),d++}return i}},36469:t=>{t.exports=function(t,e,i){e-=(t.x1+t.x2)/2,i-=(t.y1+t.y2)/2;return t.x1+=e,t.y1+=i,t.x2+=e,t.y2+=i,t}},31116:(t,e,i)=>{var o=i(23031);t.exports=function(t){return new o(t.x1,t.y1,t.x2,t.y2)}},59944:t=>{t.exports=function(t,e){return e.setTo(t.x1,t.y1,t.x2,t.y2)}},59220:t=>{t.exports=function(t,e){return t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2}},78177:(t,e,i)=>{var r=i(35001);t.exports=function(t,e,i){void 0===i&&(i=e);var o=r(t),s=t.x2-t.x1,n=t.y2-t.y1;return e&&(t.x1=t.x1-s/o*e,t.y1=t.y1-n/o*e),i&&(t.x2=t.x2+s/o*i,t.y2=t.y2+n/o*i),t}},26708:(t,e,i)=>{var m=i(52816),x=i(6113),g=i(2141);t.exports=function(t,e,i,o,s){void 0===o&&(o=0);var n,r=[],a=t.x1,h=t.y1,l=t.x2-a,c=t.y2-h,u=x(e,s=void 0===s?[]:s),d=i-1;for(b=0;b<d;b++)n=u(b/d),r.push(new g(a+l*n,h+c*n));if(n=u(1),r.push(new g(a+l*n,h+c*n)),0<o){for(var p=r[0],f=[p],b=1;b<r.length-1;b++){var y=r[b];m(p,y)>=o&&(f.push(y),p=y)}t=r[r.length-1];return m(p,t)<o&&f.pop(),f.push(t),f}return r}},32125:(t,e,i)=>{var o=i(2141);t.exports=function(t,e){return(e=void 0===e?new o:e).x=(t.x1+t.x2)/2,e.y=(t.y1+t.y2)/2,e}},99569:(t,e,i)=>{var a=i(2141);t.exports=function(t,e,i){void 0===i&&(i=new a);var o=t.x1,s=t.y1,n=t.x2,t=t.y2,r=(n-o)*(n-o)+(t-s)*(t-s);return 0!=r&&(e=((e.x-o)*(n-o)+(e.y-s)*(t-s))/r,i.x=o+e*(n-o),i.y=s+e*(t-s)),i}},34638:(t,e,i)=>{var o=i(36383),s=i(91938),n=i(2141);t.exports=function(t,e){void 0===e&&(e=new n);t=s(t)-o.TAU;return e.x=Math.cos(t),e.y=Math.sin(t),e}},13151:(t,e,i)=>{var o=i(2141);t.exports=function(t,e,i){return(i=void 0===i?new o:i).x=t.x1+(t.x2-t.x1)*e,i.y=t.y1+(t.y2-t.y1)*e,i}},15258:(t,e,i)=>{var c=i(35001),u=i(2141);t.exports=function(t,e,i,o){void 0===o&&(o=[]),!e&&0<i&&(e=c(t)/i);for(var s=t.x1,n=t.y1,r=t.x2,a=t.y2,h=0;h<e;h++){var l=h/e;o.push(new u(s+(r-s)*l,n+(a-n)*l))}return o}},26408:t=>{t.exports=function(t,e){var i=t.x1,o=t.y1,s=t.x2,t=t.y2,n=(s-i)*(s-i)+(t-o)*(t-o);return 0!=n&&(s=((o-e.y)*(s-i)-(i-e.x)*(t-o))/n,Math.abs(s)*Math.sqrt(n))}},98770:t=>{t.exports=function(t){return Math.abs(t.y1-t.y2)}},35001:t=>{t.exports=function(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))}},23031:(t,e,i)=>{var o=i(83419),s=i(13151),n=i(15258),r=i(23777),a=i(65822),h=i(26099),i=new o({initialize:function(t,e,i,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=0),this.type=r.LINE,this.x1=t,this.y1=e,this.x2=i,this.y2=o},getPoint:function(t,e){return s(this,t,e)},getPoints:function(t,e,i){return n(this,t,e,i)},getRandomPoint:function(t){return a(this,t)},setTo:function(t,e,i,o){return void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=0),this.x1=t=void 0===t?0:t,this.y1=e,this.x2=i,this.y2=o,this},setFromObjects:function(t,e){return this.x1=t.x,this.y1=t.y,this.x2=e.x,this.y2=e.y,this},getPointA:function(t){return(t=void 0===t?new h:t).set(this.x1,this.y1),t},getPointB:function(t){return(t=void 0===t?new h:t).set(this.x2,this.y2),t},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(t){this.x1<=this.x2?this.x1=t:this.x2=t}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(t){this.x1>this.x2?this.x1=t:this.x2=t}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(t){this.y1<=this.y2?this.y1=t:this.y2=t}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(t){this.y1>this.y2?this.y1=t:this.y2=t}}});t.exports=i},64795:(t,e,i)=>{var o=i(36383),s=i(15994),n=i(91938);t.exports=function(t){t=n(t)-o.TAU;return s(t,-Math.PI,Math.PI)}},52616:(t,e,i)=>{var o=i(36383),s=i(91938);t.exports=function(t){return Math.cos(s(t)-o.TAU)}},87231:(t,e,i)=>{var o=i(36383),s=i(91938);t.exports=function(t){return Math.sin(s(t)-o.TAU)}},89662:t=>{t.exports=function(t,e,i){return t.x1+=e,t.y1+=i,t.x2+=e,t.y2+=i,t}},71165:t=>{t.exports=function(t){return-(t.x2-t.x1)/(t.y2-t.y1)}},65822:(t,e,i)=>{var o=i(2141);t.exports=function(t,e){void 0===e&&(e=new o);var i=Math.random();return e.x=t.x1+i*(t.x2-t.x1),e.y=t.y1+i*(t.y2-t.y1),e}},69777:(t,e,i)=>{var o=i(91938),s=i(64795);t.exports=function(t,e){return 2*s(e)-Math.PI-o(t)}},39706:(t,e,i)=>{var s=i(64400);t.exports=function(t,e){var i=(t.x1+t.x2)/2,o=(t.y1+t.y2)/2;return s(t,i,o,e)}},82585:(t,e,i)=>{var o=i(64400);t.exports=function(t,e,i){return o(t,e.x,e.y,i)}},64400:t=>{t.exports=function(t,e,i,o){var s=Math.cos(o),o=Math.sin(o),n=t.x1-e,r=t.y1-i;return t.x1=n*s-r*o+e,t.y1=n*o+r*s+i,n=t.x2-e,r=t.y2-i,t.x2=n*s-r*o+e,t.y2=n*o+r*s+i,t}},62377:t=>{t.exports=function(t,e,i,o,s){return t.x1=e,t.y1=i,t.x2=e+Math.cos(o)*s,t.y2=i+Math.sin(o)*s,t}},71366:t=>{t.exports=function(t){return(t.y2-t.y1)/(t.x2-t.x1)}},10809:t=>{t.exports=function(t){return Math.abs(t.x1-t.x2)}},2529:(t,e,i)=>{var o=i(23031);o.Angle=i(91938),o.BresenhamPoints=i(84993),o.CenterOn=i(36469),o.Clone=i(31116),o.CopyFrom=i(59944),o.Equals=i(59220),o.Extend=i(78177),o.GetEasedPoints=i(26708),o.GetMidPoint=i(32125),o.GetNearestPoint=i(99569),o.GetNormal=i(34638),o.GetPoint=i(13151),o.GetPoints=i(15258),o.GetShortestDistance=i(26408),o.Height=i(98770),o.Length=i(35001),o.NormalAngle=i(64795),o.NormalX=i(52616),o.NormalY=i(87231),o.Offset=i(89662),o.PerpSlope=i(71165),o.Random=i(65822),o.ReflectAngle=i(69777),o.Rotate=i(39706),o.RotateAroundPoint=i(82585),o.RotateAroundXY=i(64400),o.SetToAngle=i(62377),o.Slope=i(71366),o.Width=i(10809),t.exports=o},83997:(t,e,i)=>{var o=i(83419),s=i(87841),n=i(26099);function c(t,e,i,o){t-=i,i=e-o;return Math.sqrt(t*t+i*i)}i=new o({initialize:function(t,e,i){this.vertex1=t,this.vertex2=e,this.vertex3=i,this.bounds=new s,this._inCenter=new n},getInCenter:function(t){var e,i,o,s,n,r=this.vertex1,a=this.vertex2,h=this.vertex3,t=(t=void 0===t?!0:t)?(e=r.x,i=r.y,o=a.x,s=a.y,n=h.x,h.y):(e=r.vx,i=r.vy,o=a.vx,s=a.vy,n=h.vx,h.vy),r=c(n,t,o,s),a=c(e,i,n,t),h=c(o,s,e,i),l=r+a+h;return this._inCenter.set((e*r+o*a+n*h)/l,(i*r+s*a+t*h)/l)},contains:function(t,e,i){var o=this.vertex1,s=this.vertex2,n=this.vertex3,r=o.vx,a=o.vy,h=s.vx,l=s.vy,c=n.vx,u=n.vy,o=(i&&(d=i.a,b=i.b,p=i.c,y=i.d,f=i.e,i=i.f,r=o.vx*d+o.vy*p+f,a=o.vx*b+o.vy*y+i,h=s.vx*d+s.vy*p+f,l=s.vx*b+s.vy*y+i,c=n.vx*d+n.vy*p+f,u=n.vx*b+n.vy*y+i),c-r),s=u-a,d=h-r,p=l-a,f=t-r,b=e-a,n=o*o+s*s,y=o*d+s*p,i=o*f+s*b,c=d*d+p*p,u=d*f+p*b,h=n*c-y*y,l=0==h?0:1/h,t=(c*i-y*u)*l,r=(n*u-y*i)*l;return 0<=t&&0<=r&&t+r<1},isCounterClockwise:function(t){var e=this.vertex1,i=this.vertex2,o=this.vertex3,i=(i.vx-e.vx)*(o.vy-e.vy)-(i.vy-e.vy)*(o.vx-e.vx);return t<=0?0<=i:i<0},load:function(t,e,i,o,s){return i=this.vertex1.load(t,e,i,o,s),i=this.vertex2.load(t,e,i,o,s),this.vertex3.load(t,e,i,o,s)},transformCoordinatesLocal:function(t,e,i,o){return this.vertex1.transformCoordinatesLocal(t,e,i,o),this.vertex2.transformCoordinatesLocal(t,e,i,o),this.vertex3.transformCoordinatesLocal(t,e,i,o),this},updateBounds:function(){var t=this.vertex1,e=this.vertex2,i=this.vertex3,o=this.bounds;return o.x=Math.min(t.vx,e.vx,i.vx),o.y=Math.min(t.vy,e.vy,i.vy),o.width=Math.max(t.vx,e.vx,i.vx)-o.x,o.height=Math.max(t.vy,e.vy,i.vy)-o.y,this},isInView:function(t,e,i,o,s,n,r,a,h,l,c){this.update(o,s,n,r,a,h,l,c);o=this.vertex1,s=this.vertex2,n=this.vertex3;return!(o.ta<=0&&s.ta<=0&&n.ta<=0||e&&!this.isCounterClockwise(i)||((r=this.bounds).x=Math.min(o.tx,s.tx,n.tx),r.y=Math.min(o.ty,s.ty,n.ty),r.width=Math.max(o.tx,s.tx,n.tx)-r.x,r.height=Math.max(o.ty,s.ty,n.ty)-r.y,a=t.x+t.width,h=t.y+t.height,r.width<=0)||r.height<=0||t.width<=0||t.height<=0||r.right<t.x||r.bottom<t.y||r.x>a||r.y>h)},scrollUV:function(t,e){return this.vertex1.scrollUV(t,e),this.vertex2.scrollUV(t,e),this.vertex3.scrollUV(t,e),this},scaleUV:function(t,e){return this.vertex1.scaleUV(t,e),this.vertex2.scaleUV(t,e),this.vertex3.scaleUV(t,e),this},setColor:function(t){return this.vertex1.color=t,this.vertex2.color=t,this.vertex3.color=t,this},update:function(t,e,i,o,s,n,r,a){return this.vertex1.update(e,i,o,s,n,r,a,t),this.vertex2.update(e,i,o,s,n,r,a,t),this.vertex3.update(e,i,o,s,n,r,a,t),this},translate:function(t,e){void 0===e&&(e=0);var i=this.vertex1,o=this.vertex2,s=this.vertex3;return i.x+=t,i.y+=e,o.x+=t,o.y+=e,s.x+=t,s.y+=e,this},x:{get:function(){return this.getInCenter().x},set:function(t){var e=this.getInCenter();this.translate(t-e.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(t){var e=this.getInCenter();this.translate(0,t-e.y)}},alpha:{get:function(){var t=this.vertex1,e=this.vertex2,i=this.vertex3;return(t.alpha+e.alpha+i.alpha)/3},set:function(t){this.vertex1.alpha=t,this.vertex2.alpha=t,this.vertex3.alpha=t}},depth:{get:function(){var t=this.vertex1,e=this.vertex2,i=this.vertex3;return(t.vz+e.vz+i.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});t.exports=i},48803:(t,e,i)=>{var Z=i(83997),Q=i(95540),o=i(37867),s=i(25836),$=i(39318),tt=new s,et=new s,it=new o;t.exports=function(t){var e,i=Q(t,"mesh"),o=Q(t,"texture",null),s=Q(t,"frame"),n=Q(t,"width",1),r=Q(t,"height",n),a=Q(t,"widthSegments",1),h=Q(t,"heightSegments",a),l=Q(t,"x",0),c=Q(t,"y",0),u=Q(t,"z",0),I=Q(t,"rotateX",0),k=Q(t,"rotateY",0),V=Q(t,"rotateZ",0),G=Q(t,"zIsUp",!0),z=Q(t,"isOrtho",!!i&&i.dirtyCache[11]),d=Q(t,"colors",[16777215]),p=Q(t,"alphas",[1]),N=Q(t,"tile",!1),X=Q(t,"flipY",!1),t=Q(t,"width",null),f={faces:[],verts:[]};if(tt.set(l,c,u),et.set(I,k,V),it.fromRotationXYTranslation(et,tt,G),!o&&i)o=i.texture,s||(e=i.frame);else if(i&&"string"==typeof o)o=i.scene.sys.textures.get(o);else if(!o)return f;e=e||o.get(s),!t&&z&&o&&i&&(n=e.width/i.height,r=e.height/i.height);for(var W=n/2,U=r/2,b=Math.floor(a),y=Math.floor(h),m=b+1,Y=y+1,j=n/b,J=r/y,x=[],g=[],v=0,_=1,w=0,S=1,H=(e&&(v=e.u0,_=e.u1,S=X?(w=e.v1,e.v0):(w=e.v0,e.v1)),_-v),q=S-w,A=0;A<Y;A++)for(var K=A*J-U,C=0;C<m;C++)g.push(C*j-W,-K),x.push(v+C/b*H,w+A/y*q);Array.isArray(d)||(d=[d]),Array.isArray(p)||(p=[p]);var T=0,P=0;for(A=0;A<y;A++)for(C=0;C<b;C++){var B=2*(C+m*A),E=2*(C+m*(A+1)),M=2*(C+1+m*(A+1)),D=2*(C+1+m*A),O=d[P],R=p[T],B=new $(g[B],g[1+B],0,x[B],x[1+B],O,R).transformMat4(it),L=new $(g[E],g[1+E],0,x[E],x[1+E],O,R).transformMat4(it),F=new $(g[D],g[1+D],0,x[D],x[1+D],O,R).transformMat4(it),E=new $(g[E],g[1+E],0,x[E],x[1+E],O,R).transformMat4(it),M=new $(g[M],g[1+M],0,x[M],x[1+M],O,R).transformMat4(it),D=new $(g[D],g[1+D],0,x[D],x[1+D],O,R).transformMat4(it);N&&(B.setUVs(v,S),L.setUVs(v,w),F.setUVs(_,S),E.setUVs(v,w),M.setUVs(_,w),D.setUVs(_,S)),++P===d.length&&(P=0),++T===p.length&&(T=0),f.verts.push(B,L,F,E,M,D),f.faces.push(new Z(B,L,F),new Z(E,M,D))}return i&&(i.faces=i.faces.concat(f.faces),i.vertices=i.vertices.concat(f.verts)),f}},34684:(t,e,i)=>{var T=i(83997),o=i(37867),s=i(25836),P=i(39318),B=new s,E=new s,M=new o;t.exports=function(t,e,i,o,s,n,r,a,h,l){void 0===i&&(i=1),void 0===r&&(r=0),void 0===a&&(a=0),void 0===h&&(h=0),void 0===l&&(l=!0);var c={faces:[],verts:[]},u=t.materials;B.set(o=void 0===o?0:o,s=void 0===s?0:s,n=void 0===n?0:n),E.set(r,a,h),M.fromRotationXYTranslation(E,B,l);for(var d=0;d<t.models.length;d++)for(var p=t.models[d],f=p.vertices,b=p.textureCoords,y=p.faces,m=0;m<y.length;m++){var x=y[m],g=x.vertices[0],v=x.vertices[1],_=x.vertices[2],w=f[g.vertexIndex],S=f[v.vertexIndex],A=f[_.vertexIndex],g=g.textureCoordsIndex,v=v.textureCoordsIndex,_=_.textureCoordsIndex,g=-1===g?{u:0,v:1}:b[g],v=-1===v?{u:0,v:0}:b[v],_=-1===_?{u:1,v:1}:b[_],C=16777215,x=(""!==x.material&&u[x.material]&&(C=u[x.material]),new P(w.x*i,w.y*i,w.z*i,g.u,g.v,C).transformMat4(M)),w=new P(S.x*i,S.y*i,S.z*i,v.u,v.v,C).transformMat4(M),g=new P(A.x*i,A.y*i,A.z*i,_.u,_.v,C).transformMat4(M);c.verts.push(x,w,g),c.faces.push(new T(x,w,g))}return e&&(e.faces=e.faces.concat(c.faces),e.vertices=e.vertices.concat(c.verts)),c}},92515:(t,e,i)=>{var D=i(83997),O=i(39318);t.exports=function(t,e,i,o,s,n,r,a){if(void 0===o&&(o=!1),void 0===n&&(n=16777215),void 0===r&&(r=1),void 0===a&&(a=!1),t.length===e.length||o){var h,l,c={faces:[],vertices:[]},u=o?3:2,d=Array.isArray(n),p=Array.isArray(r);if(Array.isArray(i)&&0<i.length)for(P=0;P<i.length;P++){var f=i[P],b=2*i[P],y=i[P]*u,m=t[y],x=t[1+y],g=o?t[2+y]:0,v=e[b],_=e[1+b],w=d?n[f]:n,S=p?r[f]:r,A=l=h=0;s&&(h=s[y],l=s[1+y],A=o?s[2+y]:0),c.vertices.push(new O(m,x,g,v,_=a?1-_:_,w,S,h,l,A))}else for(var C=0,T=0,P=0;P<t.length;P+=u)m=t[P],x=t[P+1],g=o?t[P+2]:0,v=e[C],_=e[C+1],w=d?n[T]:n,S=p?r[T]:r,A=l=h=0,s&&(h=s[P],l=s[P+1],A=o?s[P+2]:0),c.vertices.push(new O(m,x,g,v,_,w,S,h,l,A)),C+=2,T++;for(P=0;P<c.vertices.length;P+=3){var B=c.vertices[P],E=c.vertices[P+1],M=c.vertices[P+2];c.faces.push(new D(B,E,M))}return c}}},85048:t=>{var E,M="untitled",D="",O="";function R(t){return 0===t.models.length&&t.models.push({faces:[],name:M,textureCoords:[],vertexNormals:[],vertices:[]}),D="",t.models[t.models.length-1]}t.exports=function(t,e){E=e=void 0===e?!0:e;var i={materials:{},materialLibraries:[],models:[]};O=D="";for(var o,s,n,r,a,h,l,c,u,d,p,f,b,y=t.split("\n"),m=0;m<y.length;m++){f=y[m],b=void 0;var x=(-1<(b=f.indexOf("#"))?f.substring(0,b):f).replace(/\s\s+/g," ").trim().split(" ");switch(x[0].toLowerCase()){case"o":p=2<=(p=x).length?p[1]:M,i.models.push({faces:[],name:p,textureCoords:[],vertexNormals:[],vertices:[]}),D="";break;case"g":2===(p=x).length&&(D=p[1]);break;case"v":l=i,d=u=c=void 0,c=2<=(d=(h=x).length)?parseFloat(h[1]):0,u=3<=d?parseFloat(h[2]):0,d=4<=d?parseFloat(h[3]):0,R(l).vertices.push({x:c,y:u,z:d});break;case"vt":h=i,u=c=l=void 0,l=2<=(u=(d=x).length)?parseFloat(d[1]):0,c=3<=u?parseFloat(d[2]):0,u=4<=u?parseFloat(d[3]):0,isNaN(l)&&(l=0),isNaN(c)&&(c=0),isNaN(u)&&(u=0),E&&(c=1-c),R(h).textureCoords.push({u:l,v:c,w:u});break;case"vn":s=i,a=r=n=void 0,n=2<=(a=(o=x).length)?parseFloat(o[1]):0,r=3<=a?parseFloat(o[2]):0,a=4<=a?parseFloat(o[3]):0,R(s).vertexNormals.push({x:n,y:r,z:a});break;case"f":C=A=T=B=P=S=w=_=v=g=void 0;var g=x,v=i,_=g.length-1;if(!(_<3)){for(var w={group:D,material:O,vertices:[]},S=0;S<_;S++){var A,C,T,P=g[S+1].split("/"),B=P.length;B<1||3<B||(C=A=T=0,T=parseInt(P[0],10),1<B&&""!==P[1]&&(A=parseInt(P[1],10)),2<B&&(C=parseInt(P[2],10)),0!==T&&(T<0&&(T=R(v).vertices.length+1+T),--A,--T,--C,w.vertices.push({textureCoordsIndex:A,vertexIndex:T,vertexNormalIndex:C})))}R(v).faces.push(w)}break;case"mtllib":o=i,2<=(s=x).length&&o.materialLibraries.push(s[1]);break;case"usemtl":2<=(n=x).length&&(O=n[1])}}return i}},61485:(t,e,i)=>{var c=i(37589);t.exports=function(t){for(var e={},i=t.split("\n"),o="",s=0;s<i.length;s++){var n=i[s].trim();if(0!==n.indexOf("#")&&""!==n){var r=n.replace(/\s\s+/g," ").trim().split(" ");switch(r[0].toLowerCase()){case"newmtl":o=r[1];break;case"kd":var a=Math.floor(255*r[1]),h=2<=r.length?Math.floor(255*r[2]):a,l=3<=r.length?Math.floor(255*r[3]):a;e[o]=c(a,h,l)}}}return e}},92570:t=>{t.exports=function(t,e,i,o){void 0===i&&void 0===o&&(s=(i=t.getInCenter()).x,n=i.y);var s,n,o=Math.cos(e),i=Math.sin(e),e=t.vertex1,r=t.vertex2,t=t.vertex3,a=e.x-s,h=e.y-n;e.set(a*o-h*i+s,a*i+h*o+n),a=r.x-s,h=r.y-n,r.set(a*o-h*i+s,a*i+h*o+n),a=t.x-s,h=t.y-n,t.set(a*o-h*i+s,a*i+h*o+n)}},39318:(t,e,i)=>{var o=i(83419),n=i(70554),c=i(25836),i=new o({Extends:c,initialize:function(t,e,i,o,s,n,r,a,h,l){void 0===n&&(n=16777215),void 0===r&&(r=1),void 0===a&&(a=0),void 0===h&&(h=0),void 0===l&&(l=0),c.call(this,t,e,i),this.vx=0,this.vy=0,this.vz=0,this.nx=a,this.ny=h,this.nz=l,this.u=o,this.v=s,this.color=n,this.alpha=r,this.tx=0,this.ty=0,this.ta=0,this.tu=o,this.tv=s},setUVs:function(t,e){return this.u=t,this.v=e,this.tu=t,this.tv=e,this},scrollUV:function(t,e){return this.tu+=t,this.tv+=e,this},scaleUV:function(t,e){return this.tu=this.u*t,this.tv=this.v*e,this},transformCoordinatesLocal:function(t,e,i,o){var s=this.x,n=this.y,r=this.z,t=t.val,a=s*t[0]+n*t[4]+r*t[8]+t[12],h=s*t[1]+n*t[5]+r*t[9]+t[13],l=s*t[2]+n*t[6]+r*t[10]+t[14],s=s*t[3]+n*t[7]+r*t[11]+t[15];this.vx=a/s*e,this.vy=-h/s*i,this.vz=o<=0?l/s:-l/s},resize:function(t,e,i,o,s,n){return this.x=t,this.y=e,this.vx=this.x*i,this.vy=-this.y*o,this.vz=0,s<.5?this.vx+=i*(.5-s):.5<s&&(this.vx-=i*(s-.5)),n<.5?this.vy+=o*(.5-n):.5<n&&(this.vy-=o*(n-.5)),this},update:function(t,e,i,o,s,n,r,a){t=this.vx*t+this.vy*i+s,i=this.vx*e+this.vy*o+n;return r&&(t=Math.round(t),i=Math.round(i)),this.tx=t,this.ty=i,this.ta=this.alpha*a,this},load:function(t,e,i,o,s){return t[++i]=this.tx,t[++i]=this.ty,t[++i]=this.tu,t[++i]=this.tv,t[++i]=o,t[++i]=s,e[++i]=n.getTintAppendFloatAlpha(this.color,this.ta),i}});t.exports=i},73090:(t,e,i)=>{i={Face:i(83997),GenerateGridVerts:i(48803),GenerateObjVerts:i(34684),GenerateVerts:i(92515),ParseObj:i(85048),ParseObjMaterial:i(61485),RotateFace:i(92570),Vertex:i(39318)};t.exports=i},96550:t=>{t.exports=function(t){return t.setTo(Math.ceil(t.x),Math.ceil(t.y))}},99706:(t,e,i)=>{var o=i(2141);t.exports=function(t){return new o(t.x,t.y)}},68010:t=>{t.exports=function(t,e){return e.setTo(t.x,t.y)}},27814:t=>{t.exports=function(t,e){return t.x===e.x&&t.y===e.y}},73565:t=>{t.exports=function(t){return t.setTo(Math.floor(t.x),Math.floor(t.y))}},87555:(t,e,i)=>{var s=i(2141);t.exports=function(t,e){if(void 0===e&&(e=new s),!Array.isArray(t))throw new Error("GetCentroid points argument must be an array");var i=t.length;if(i<1)throw new Error("GetCentroid points array must not be empty");if(1===i)e.x=t[0].x,e.y=t[0].y;else{for(var o=0;o<i;o++)e.x+=t[o].x,e.y+=t[o].y;e.x/=i,e.y/=i}return e}},28793:t=>{t.exports=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)}},44405:t=>{t.exports=function(t){return t.x*t.x+t.y*t.y}},20873:(t,e,i)=>{var h=i(87841);t.exports=function(t,e){void 0===e&&(e=new h);for(var i=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY,r=0;r<t.length;r++){var a=t[r];a.x>i&&(i=a.x),a.x<o&&(o=a.x),a.y>s&&(s=a.y),a.y<n&&(n=a.y)}return e.x=o,e.y=n,e.width=i-o,e.height=s-n,e}},26152:(t,e,i)=>{var s=i(2141);t.exports=function(t,e,i,o){return void 0===i&&(i=0),(o=void 0===o?new s:o).x=t.x+(e.x-t.x)*i,o.y=t.y+(e.y-t.y)*i,o}},55767:t=>{t.exports=function(t){return t.setTo(t.y,t.x)}},79432:(t,e,i)=>{var o=i(2141);t.exports=function(t,e){return(e=void 0===e?new o:e).setTo(-t.x,-t.y)}},2141:(t,e,i)=>{var o=i(83419),s=i(23777),i=new o({initialize:function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.type=s.POINT,this.x=t,this.y=e},setTo:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this}});t.exports=i},72930:(t,e,i)=>{var o=i(2141),s=i(44405);t.exports=function(t,e,i){void 0===i&&(i=new o);t=(t.x*e.x+t.y*e.y)/s(e);return 0!=t&&(i.x=t*e.x,i.y=t*e.y),i}},62880:(t,e,i)=>{var o=i(2141);t.exports=function(t,e,i){void 0===i&&(i=new o);t=t.x*e.x+t.y*e.y;return 0!=t&&(i.x=t*e.x,i.y=t*e.y),i}},15093:(t,e,i)=>{var o=i(28793);t.exports=function(t,e){var i;return 0===t.x&&0===t.y||(i=o(t),t.x/=i,t.y/=i),t.x*=e,t.y*=e,t}},43711:(t,e,i)=>{var o=i(2141);o.Ceil=i(96550),o.Clone=i(99706),o.CopyFrom=i(68010),o.Equals=i(27814),o.Floor=i(73565),o.GetCentroid=i(87555),o.GetMagnitude=i(28793),o.GetMagnitudeSq=i(44405),o.GetRectangleFromPoints=i(20873),o.Interpolate=i(26152),o.Invert=i(55767),o.Negative=i(79432),o.Project=i(72930),o.ProjectUnit=i(62880),o.SetMagnitude=i(15093),t.exports=o},12306:(t,e,i)=>{var o=i(25717);t.exports=function(t){return new o(t.points)}},63814:t=>{t.exports=function(t,e,i){for(var o=!1,s=-1,n=t.points.length-1;++s<t.points.length;n=s){var r=t.points[s].x,a=t.points[s].y,h=t.points[n].x,l=t.points[n].y;(a<=i&&i<l||l<=i&&i<a)&&e<(h-r)*(i-a)/(l-a)+r&&(o=!o)}return o}},99338:(t,e,i)=>{var o=i(63814);t.exports=function(t,e){return o(t,e.x,e.y)}},94811:t=>{"use strict";function e(t,e,i){i=i||2;var o,s,n,r,a,h=e&&e.length,l=h?e[0]*i:t.length,c=b(t,0,l,i,!0),u=[];if(c&&c.next!==c.prev){if(h&&(c=function(t,e,i,o){for(var s,n,r,a,h=[],l=0,c=e.length;l<c;l++)(s=b(t,e[l]*o,l<c-1?e[l+1]*o:t.length,o,!1))===s.next&&(s.steiner=!0),h.push(function(t){var e=t,i=t;for(;(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next,e!==t;);return i}(s));for(h.sort(y),l=0;l<h.length;l++)a=void 0,i=(a=function(t,e){var i,o=e,s=t.x,n=t.y,r=-1/0;do{if(n<=o.y&&n>=o.next.y&&o.next.y!==o.y){var a=o.x+(n-o.y)*(o.next.x-o.x)/(o.next.y-o.y);if(a<=s&&r<a&&(i=o.x<o.next.x?o:o.next,(r=a)===s))return i}}while((o=o.next)!==e);if(!i)return null;for(var h,l,c,u=i,d=i.x,p=i.y,f=1/0,o=i;s>=o.x&&o.x>=d&&s!==o.x&&B(n<p?s:r,n,d,p,n<p?r:s,n,o.x,o.y)&&(h=Math.abs(n-o.y)/(s-o.x),O(o,t))&&(h<f||h===f&&(o.x>i.x||o.x===i.x&&(c=o,E((l=i).prev,l,c.prev)<0)&&E(c.next,l,l.next)<0))&&(i=o,f=h),(o=o.next)!==u;);return i}(n=h[l],r=i))?(C(n=R(a,n),n.next),C(a,a.next)):r;return i}(t,e,c,i)),t.length>80*i){for(var d=o=t[0],p=s=t[1],f=i;f<l;f+=i)(n=t[f])<d&&(d=n),(r=t[f+1])<p&&(p=r),o<n&&(o=n),s<r&&(s=r);a=0!==(a=Math.max(o-d,s-p))?32767/a:0}T(c,u,i,d,p,a,0)}return u}function b(t,e,i,o,s){var n,r;if(s===0<m(t,e,i,o))for(n=e;n<i;n+=o)r=a(n,t[n],t[n+1],r);else for(n=i-o;e<=n;n-=o)r=a(n,t[n],t[n+1],r);return r&&M(r,r.next)&&(L(r),r=r.next),r}function C(t,e){if(!t)return t;e=e||t;var i,o=t;do{if(i=!1,o.steiner||!M(o,o.next)&&0!==E(o.prev,o,o.next))o=o.next;else{if(L(o),(o=e=o.prev)===o.next)break;i=!0}}while(i||o!==e);return e}function T(t,e,i,o,s,n,r){if(t){if(!r&&n){var a=t;var h=o;var l=s;var c=n;for(var u=a;0===u.z&&(u.z=P(u.x,u.y,h,l,c)),u.prevZ=u.prev,u.nextZ=u.next,(u=u.next)!==a;);u.prevZ.nextZ=null,u.prevZ=null;var d,p,f,b,y,m,x,g,v=u,_=1;do{for(p=v,y=v=null,m=0;p;){for(m++,f=p,d=x=0;d<_&&(x++,f=f.nextZ);d++);for(g=_;0<x||0<g&&f;)0!==x&&(0===g||!f||p.z<=f.z)?(p=(b=p).nextZ,x--):(f=(b=f).nextZ,g--),y?y.nextZ=b:v=b,b.prevZ=y,y=b;p=f}}while(y.nextZ=null,_*=2,1<m)}for(var w,S,A=t;t.prev!==t.next;)if(w=t.prev,S=t.next,n?function(t,e,i,o){var s=t.prev,n=t,r=t.next;if(0<=E(s,n,r))return;for(var a=s.x,h=n.x,l=r.x,c=s.y,u=n.y,d=r.y,p=a<h?a<l?a:l:h<l?h:l,f=c<u?c<d?c:d:u<d?u:d,b=h<a?l<a?a:l:l<h?h:l,y=u<c?d<c?c:d:d<u?u:d,m=P(p,f,e,i,o),x=P(b,y,e,i,o),g=t.prevZ,v=t.nextZ;g&&g.z>=m&&v&&v.z<=x;){if(g.x>=p&&g.x<=b&&g.y>=f&&g.y<=y&&g!==s&&g!==r&&B(a,c,h,u,l,d,g.x,g.y)&&0<=E(g.prev,g,g.next))return;if(g=g.prevZ,v.x>=p&&v.x<=b&&v.y>=f&&v.y<=y&&v!==s&&v!==r&&B(a,c,h,u,l,d,v.x,v.y)&&0<=E(v.prev,v,v.next))return;v=v.nextZ}for(;g&&g.z>=m;){if(g.x>=p&&g.x<=b&&g.y>=f&&g.y<=y&&g!==s&&g!==r&&B(a,c,h,u,l,d,g.x,g.y)&&0<=E(g.prev,g,g.next))return;g=g.prevZ}for(;v&&v.z<=x;){if(v.x>=p&&v.x<=b&&v.y>=f&&v.y<=y&&v!==s&&v!==r&&B(a,c,h,u,l,d,v.x,v.y)&&0<=E(v.prev,v,v.next))return;v=v.nextZ}return 1}(t,o,s,n):function(t){var e=t.prev,i=t,t=t.next;if(0<=E(e,i,t))return;for(var o=e.x,s=i.x,n=t.x,r=e.y,a=i.y,h=t.y,l=o<s?o<n?o:n:s<n?s:n,c=r<a?r<h?r:h:a<h?a:h,u=s<o?n<o?o:n:n<s?s:n,d=a<r?h<r?r:h:h<a?a:h,p=t.next;p!==e;){if(p.x>=l&&p.x<=u&&p.y>=c&&p.y<=d&&B(o,r,s,a,n,h,p.x,p.y)&&0<=E(p.prev,p,p.next))return;p=p.next}return 1}(t))e.push(w.i/i|0),e.push(t.i/i|0),e.push(S.i/i|0),L(t),t=S.next,A=S.next;else if((t=S)===A){r?1===r?T(t=function(t,e,i){var o=t;do{var s=o.prev,n=o.next.next}while(!M(s,n)&&D(s,o,o.next,n)&&O(s,n)&&O(n,s)&&(e.push(s.i/i|0),e.push(o.i/i|0),e.push(n.i/i|0),L(o),L(o.next),o=t=n),o=o.next,o!==t);return C(o)}(C(t),e,i),e,i,o,s,n,2):2===r&&function(t,e,i,o,s,n){var r=t;do{for(var a,h=r.next.next;h!==r.prev;){if(r.i!==h.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&D(i,i.next,t,e))return 1}while((i=i.next)!==t)}(t,e)&&(O(t,e)&&O(e,t)&&function(t,e){for(var i=t,o=!1,s=(t.x+e.x)/2,n=(t.y+e.y)/2;i.y>n!=i.next.y>n&&i.next.y!==i.y&&s<(i.next.x-i.x)*(n-i.y)/(i.next.y-i.y)+i.x&&(o=!o),(i=i.next)!==t;);return o}(t,e)&&(E(t.prev,t,e.prev)||E(t,e.prev,e))||M(t,e)&&0<E(t.prev,t,t.next)&&0<E(e.prev,e,e.next))}(r,h))return a=R(r,h),r=C(r,r.next),a=C(a,a.next),T(r,e,i,o,s,n,0),T(a,e,i,o,s,n,0);h=h.next}}while(r=r.next,r!==t)}(t,e,i,o,s,n):T(C(t),e,i,o,s,n,1);break}}}function y(t,e){return t.x-e.x}function P(t,e,i,o,s){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*s|0)|t<<8))|t<<4))|t<<2))|t<<1))|(1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-o)*s|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function B(t,e,i,o,s,n,r,a){return(t-r)*(n-a)<=(s-r)*(e-a)&&(i-r)*(e-a)<=(t-r)*(o-a)&&(s-r)*(o-a)<=(i-r)*(n-a)}function E(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function M(t,e){return t.x===e.x&&t.y===e.y}function D(t,e,i,o){var s=l(E(t,e,i)),n=l(E(t,e,o)),r=l(E(i,o,t)),a=l(E(i,o,e));return s!==n&&r!==a||0===s&&h(t,i,e)||0===n&&h(t,o,e)||0===r&&h(i,t,o)||0===a&&h(i,e,o)}function h(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function l(t){return 0<t?1:t<0?-1:0}function O(t,e){return E(t.prev,t,t.next)<0?0<=E(t,e,t.next)&&0<=E(t,t.prev,e):E(t,e,t.prev)<0||E(t,t.next,e)<0}function R(t,e){var i=new r(t.i,t.x,t.y),o=new r(e.i,e.x,e.y),s=t.next,n=e.prev;return(t.next=e).prev=t,(i.next=s).prev=i,(o.next=i).prev=o,(n.next=o).prev=n,o}function a(t,e,i,o){t=new r(t,e,i);return o?(t.next=o.next,(t.prev=o).next.prev=t,o.next=t):(t.prev=t).next=t,t}function L(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function r(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function m(t,e,i,o){for(var s=0,n=e,r=i-o;n<i;n+=o)s+=(t[r]-t[n])*(t[n+1]+t[r+1]),r=n;return s}e.deviation=function(t,e,i,o){var s=e&&e.length,n=s?e[0]*i:t.length,r=Math.abs(m(t,0,n,i));if(s)for(var a=0,h=e.length;a<h;a++){var l=e[a]*i,c=a<h-1?e[a+1]*i:t.length;r-=Math.abs(m(t,l,c,i))}for(var u=0,a=0;a<o.length;a+=3){var d=o[a]*i,p=o[a+1]*i,f=o[a+2]*i;u+=Math.abs((t[d]-t[f])*(t[1+p]-t[1+d])-(t[d]-t[p])*(t[1+f]-t[1+d]))}return 0===r&&0===u?0:Math.abs((u-r)/r)},e.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},o=0,s=0;s<t.length;s++){for(var n=0;n<t[s].length;n++)for(var r=0;r<e;r++)i.vertices.push(t[s][n][r]);0<s&&(o+=t[s-1].length,i.holes.push(o))}return i},t.exports=e},13829:(t,e,i)=>{var h=i(87841);t.exports=function(t,e){void 0===e&&(e=new h);for(var i,o=1/0,s=1/0,n=-o,r=-s,a=0;a<t.points.length;a++)i=t.points[a],o=Math.min(o,i.x),s=Math.min(s,i.y),n=Math.max(n,i.x),r=Math.max(r,i.y);return e.x=o,e.y=s,e.width=n-o,e.height=r-s,e}},26173:t=>{t.exports=function(t,e){void 0===e&&(e=[]);for(var i=0;i<t.points.length;i++)e.push(t.points[i].x),e.push(t.points[i].y);return e}},9564:(t,e,i)=>{var d=i(35001),p=i(23031),f=i(30052);t.exports=function(t,e,i,o){void 0===o&&(o=[]);var s=t.points,n=f(t);!e&&0<i&&(e=n/i);for(var r=0;r<e;r++)for(var a=n*(r/e),h=0,l=0;l<s.length;l++){var c=s[l],u=s[(l+1)%s.length],c=new p(c.x,c.y,u.x,u.y),u=d(c);if(!(a<h||h+u<a)){c=c.getPoint((a-h)/u);o.push(c);break}h+=u}return o}},30052:(t,e,i)=>{var r=i(35001),a=i(23031);t.exports=function(t){for(var e=t.points,i=0,o=0;o<e.length;o++){var s=e[o],n=e[(o+1)%e.length],s=new a(s.x,s.y,n.x,n.y);i+=r(s)}return i}},25717:(t,e,i)=>{var o=i(83419),s=i(63814),n=i(9564),r=i(23777),i=new o({initialize:function(t){this.type=r.POLYGON,this.area=0,this.points=[],t&&this.setTo(t)},contains:function(t,e){return s(this,t,e)},setTo:function(t){if(this.area=0,this.points=[],"string"==typeof t&&(t=t.split(" ")),Array.isArray(t)){for(var e,i=0;i<t.length;i++)e={x:0,y:0},"number"==typeof t[i]||"string"==typeof t[i]?(e.x=parseFloat(t[i]),e.y=parseFloat(t[i+1]),i++):Array.isArray(t[i])?(e.x=t[i][0],e.y=t[i][1]):(e.x=t[i].x,e.y=t[i].y),this.points.push(e);this.calculateArea()}return this},calculateArea:function(){if(this.points.length<3)this.area=0;else{for(var t,e,i=0,o=0;o<this.points.length-1;o++)t=this.points[o],i+=((e=this.points[o+1]).x-t.x)*(t.y+e.y);t=this.points[0],e=this.points[this.points.length-1],i+=(t.x-e.x)*(e.y+t.y),this.area=.5*-i}return this.area},getPoints:function(t,e,i){return n(this,t,e,i)}});t.exports=i},8133:t=>{t.exports=function(t){return t.points.reverse(),t}},29524:t=>{function s(t,e){var i=t.length-1,o=[t[0]];return function t(e,i,o,s,n){for(var r,a,h,l,c,u,d,p=s,f=i+1;f<o;f++){a=e[f],h=e[i],b=e[o],d=u=c=l=void 0,c=h.x,h=h.y,u=b.x-c,d=b.y-h,0==u&&0==d||(1<(l=((a.x-c)*u+(a.y-h)*d)/(u*u+d*d))?(c=b.x,h=b.y):0<l&&(c+=u*l,h+=d*l));var b=(u=a.x-c)*u+(d=a.y-h)*d;p<b&&(r=f,p=b)}s<p&&(1<r-i&&t(e,i,r,s,n),n.push(e[r]),1<o-r)&&t(e,r,o,s,n)}(t,0,i,e,o),o.push(t[i]),o}t.exports=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=!1);var o=t.points;return 2<o.length&&(e=e*e,i||(o=function(t,e){for(var i,o,s,n,r=t[0],a=[r],h=1,l=t.length;h<l;h++)s=r,0,e<(n=(o=i=t[h]).x-s.x)*n+(n=o.y-s.y)*n&&(a.push(i),r=i);return r!==i&&a.push(i),a}(o,e)),t.setTo(s(o,e))),t}},5469:t=>{function l(t,e){return t[0]=e[0],t[1]=e[1],t}t.exports=function(t){for(var e=[],i=t.points,o=0;o<i.length;o++)e.push([i[o].x,i[o].y]);var s=[];for(0<e.length&&s.push(l([0,0],e[0])),o=0;o<e.length-1;o++){var n=e[o],r=e[o+1],a=n[0],n=n[1],h=r[0],r=r[1];s.push([.85*a+.15*h,.85*n+.15*r]),s.push([.15*a+.85*h,.15*n+.85*r])}return 1<e.length&&s.push(l([0,0],e[e.length-1])),t.setTo(s)}},24709:t=>{t.exports=function(t,e,i){for(var o=t.points,s=0;s<o.length;s++)o[s].x+=e,o[s].y+=i;return t}},58423:(t,e,i)=>{var o=i(25717);o.Clone=i(12306),o.Contains=i(63814),o.ContainsPoint=i(99338),o.Earcut=i(94811),o.GetAABB=i(13829),o.GetNumberArray=i(26173),o.GetPoints=i(9564),o.Perimeter=i(30052),o.Reverse=i(8133),o.Simplify=i(29524),o.Smooth=i(5469),o.Translate=i(24709),t.exports=o},62224:t=>{t.exports=function(t){return t.width*t.height}},98615:t=>{t.exports=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t}},31688:t=>{t.exports=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),t}},67502:t=>{t.exports=function(t,e,i){return t.x=e-t.width/2,t.y=i-t.height/2,t}},65085:(t,e,i)=>{var o=i(87841);t.exports=function(t){return new o(t.x,t.y,t.width,t.height)}},37303:t=>{t.exports=function(t,e,i){return!(t.width<=0||t.height<=0)&&t.x<=e&&t.x+t.width>=e&&t.y<=i&&t.y+t.height>=i}},96553:(t,e,i)=>{var o=i(37303);t.exports=function(t,e){return o(t,e.x,e.y)}},70273:t=>{t.exports=function(t,e){return!(e.width*e.height>t.width*t.height)&&e.x>t.x&&e.x<t.right&&e.right>t.x&&e.right<t.right&&e.y>t.y&&e.y<t.bottom&&e.bottom>t.y&&e.bottom<t.bottom}},43459:t=>{t.exports=function(t,e){return e.setTo(t.x,t.y,t.width,t.height)}},77493:t=>{t.exports=function(t,e){return(e=void 0===e?[]:e).push({x:t.x,y:t.y}),e.push({x:t.right,y:t.y}),e.push({x:t.right,y:t.bottom}),e.push({x:t.x,y:t.bottom}),e}},9219:t=>{t.exports=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}},53751:(t,e,i)=>{var o=i(8249);t.exports=function(t,e){var i=o(t);return i<o(e)?t.setSize(e.height*i,e.height):t.setSize(e.width,e.width/i),t.setPosition(e.centerX-t.width/2,e.centerY-t.height/2)}},16088:(t,e,i)=>{var o=i(8249);t.exports=function(t,e){var i=o(t);return i>o(e)?t.setSize(e.height*i,e.height):t.setSize(e.width,e.width/i),t.setPosition(e.centerX-t.width/2,e.centerY-t.height/2)}},80774:t=>{t.exports=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t}},83859:t=>{t.exports=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t.width=Math.floor(t.width),t.height=Math.floor(t.height),t}},19217:(t,e,i)=>{var l=i(87841),c=i(36383);t.exports=function(t,e){if(void 0===e&&(e=new l),0!==t.length){for(var i,o,s=Number.MAX_VALUE,n=Number.MAX_VALUE,r=c.MIN_SAFE_INTEGER,a=c.MIN_SAFE_INTEGER,h=0;h<t.length;h++)o=t[h],o=Array.isArray(o)?(i=o[0],o[1]):(i=o.x,o.y),s=Math.min(s,i),n=Math.min(n,o),r=Math.max(r,i),a=Math.max(a,o);e.x=s,e.y=n,e.width=r-s,e.height=a-n}return e}},9477:(t,e,i)=>{var n=i(87841);t.exports=function(t,e,i,o,s){return(s=void 0===s?new n:s).setTo(Math.min(t,i),Math.min(e,o),Math.abs(t-i),Math.abs(e-o))}},8249:t=>{t.exports=function(t){return 0===t.height?NaN:t.width/t.height}},27165:(t,e,i)=>{var o=i(2141);t.exports=function(t,e){return(e=void 0===e?new o:e).x=t.centerX,e.y=t.centerY,e}},20812:(t,e,i)=>{var s=i(13019),n=i(2141);t.exports=function(t,e,i){var o;return(void 0===i&&(i=new n),e<=0||1<=e)?(i.x=t.x,i.y=t.y):(o=s(t)*e,.5<e?(o-=t.width+t.height)<=t.width?(i.x=t.right-o,i.y=t.bottom):(i.x=t.x,i.y=t.bottom-(o-t.width)):o<=t.width?(i.x=t.x+o,i.y=t.y):(i.x=t.right,i.y=t.y+(o-t.width))),i}},34819:(t,e,i)=>{var n=i(20812),r=i(13019);t.exports=function(t,e,i,o){void 0===o&&(o=[]),!e&&0<i&&(e=r(t)/i);for(var s=0;s<e;s++)o.push(n(t,s/e));return o}},51313:(t,e,i)=>{var o=i(2141);t.exports=function(t,e){return(e=void 0===e?new o:e).x=t.width,e.y=t.height,e}},86091:(t,e,i)=>{var n=i(67502);t.exports=function(t,e,i){var o=t.centerX,s=t.centerY;return t.setSize(t.width+2*e,t.height+2*i),n(t,o,s)}},53951:(t,e,i)=>{var o=i(87841),s=i(59996);t.exports=function(t,e,i){return void 0===i&&(i=new o),s(t,e)?(i.x=Math.max(t.x,e.x),i.y=Math.max(t.y,e.y),i.width=Math.min(t.right,e.right)-i.x,i.height=Math.min(t.bottom,e.bottom)-i.y):i.setEmpty(),i}},14649:(t,e,i)=>{var h=i(13019),l=i(2141);t.exports=function(t,e,i,o){if(void 0===o&&(o=[]),e||i){e?i=Math.round(h(t)/e):e=h(t)/i;for(var s=t.x,n=t.y,r=0,a=0;a<i;a++)switch(o.push(new l(s,n)),r){case 0:(s+=e)>=t.right&&(r=1,n+=s-t.right,s=t.right);break;case 1:(n+=e)>=t.bottom&&(r=2,s-=n-t.bottom,n=t.bottom);break;case 2:(s-=e)<=t.left&&(r=3,n-=t.left-s,s=t.left);break;case 3:(n-=e)<=t.top&&(r=0,n=t.top)}}return o}},33595:t=>{t.exports=function(t,e){for(var i=t.x,o=t.right,s=t.y,n=t.bottom,r=0;r<e.length;r++)i=Math.min(i,e[r].x),o=Math.max(o,e[r].x),s=Math.min(s,e[r].y),n=Math.max(n,e[r].y);return t.x=i,t.y=s,t.width=o-i,t.height=n-s,t}},20074:t=>{t.exports=function(t,e){var i=Math.min(t.x,e.x),o=Math.max(t.right,e.right),o=(t.x=i,t.width=o-i,Math.min(t.y,e.y)),i=Math.max(t.bottom,e.bottom);return t.y=o,t.height=i-o,t}},92171:t=>{t.exports=function(t,e,i){var o=Math.min(t.x,e),e=Math.max(t.right,e),e=(t.x=o,t.width=e-o,Math.min(t.y,i)),o=Math.max(t.bottom,i);return t.y=e,t.height=o-e,t}},42981:t=>{t.exports=function(t,e,i){return t.x+=e,t.y+=i,t}},46907:t=>{t.exports=function(t,e){return t.x+=e.x,t.y+=e.y,t}},60170:t=>{t.exports=function(t,e){return t.x<e.right&&t.right>e.x&&t.y<e.bottom&&t.bottom>e.y}},13019:t=>{t.exports=function(t){return 2*(t.width+t.height)}},85133:(t,e,i)=>{var r=i(2141),a=i(39506);t.exports=function(t,e,i){void 0===i&&(i=new r),e=a(e);var o=Math.sin(e),e=Math.cos(e),s=0<e?t.width/2:t.width/-2,n=0<o?t.height/2:t.height/-2;return Math.abs(s*o)<Math.abs(n*e)?n=s*o/e:s=n*e/o,i.x=s+t.centerX,i.y=n+t.centerY,i}},26597:(t,e,i)=>{var o=i(2141);t.exports=function(t,e){return(e=void 0===e?new o:e).x=t.x+Math.random()*t.width,e.y=t.y+Math.random()*t.height,e}},86470:(t,e,i)=>{var o=i(30976),s=i(70273),n=i(2141);t.exports=function(t,e,i){if(void 0===i&&(i=new n),s(t,e))switch(o(0,3)){case 0:i.x=t.x+Math.random()*(e.right-t.x),i.y=t.y+Math.random()*(e.top-t.y);break;case 1:i.x=e.x+Math.random()*(t.right-e.x),i.y=e.bottom+Math.random()*(t.bottom-e.bottom);break;case 2:i.x=t.x+Math.random()*(e.x-t.x),i.y=e.y+Math.random()*(t.bottom-e.y);break;case 3:i.x=e.right+Math.random()*(t.right-e.right),i.y=t.y+Math.random()*(e.bottom-t.y)}return i}},87841:(t,e,i)=>{var o=i(83419),s=i(37303),n=i(20812),r=i(34819),a=i(23777),h=i(23031),l=i(26597),i=new o({initialize:function(t,e,i,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=0),this.type=a.RECTANGLE,this.x=t,this.y=e,this.width=i,this.height=o},contains:function(t,e){return s(this,t,e)},getPoint:function(t,e){return n(this,t,e)},getPoints:function(t,e,i){return r(this,t,e,i)},getRandomPoint:function(t){return l(this,t)},setTo:function(t,e,i,o){return this.x=t,this.y=e,this.width=i,this.height=o,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(t){return(t=void 0===t?new h:t).setTo(this.x,this.y,this.right,this.y),t},getLineB:function(t){return(t=void 0===t?new h:t).setTo(this.right,this.y,this.right,this.bottom),t},getLineC:function(t){return(t=void 0===t?new h:t).setTo(this.right,this.bottom,this.x,this.bottom),t},getLineD:function(t){return(t=void 0===t?new h:t).setTo(this.x,this.bottom,this.x,this.y),t},left:{get:function(){return this.x},set:function(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}},right:{get:function(){return this.x+this.width},set:function(t){t<=this.x?this.width=0:this.width=t-this.x}},top:{get:function(){return this.y},set:function(t){t>=this.bottom?this.height=0:this.height=this.bottom-t,this.y=t}},bottom:{get:function(){return this.y+this.height},set:function(t){t<=this.y?this.height=0:this.height=t-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});t.exports=i},94845:t=>{t.exports=function(t,e){return t.width===e.width&&t.height===e.height}},31730:t=>{t.exports=function(t,e,i){return void 0===i&&(i=e),t.width*=e,t.height*=i,t}},36899:(t,e,i)=>{var r=i(87841);t.exports=function(t,e,i){void 0===i&&(i=new r);var o=Math.min(t.x,e.x),s=Math.min(t.y,e.y),n=Math.max(t.right,e.right)-o,t=Math.max(t.bottom,e.bottom)-s;return i.setTo(o,s,n,t)}},93232:(t,e,i)=>{var o=i(87841);o.Area=i(62224),o.Ceil=i(98615),o.CeilAll=i(31688),o.CenterOn=i(67502),o.Clone=i(65085),o.Contains=i(37303),o.ContainsPoint=i(96553),o.ContainsRect=i(70273),o.CopyFrom=i(43459),o.Decompose=i(77493),o.Equals=i(9219),o.FitInside=i(53751),o.FitOutside=i(16088),o.Floor=i(80774),o.FloorAll=i(83859),o.FromPoints=i(19217),o.FromXY=i(9477),o.GetAspectRatio=i(8249),o.GetCenter=i(27165),o.GetPoint=i(20812),o.GetPoints=i(34819),o.GetSize=i(51313),o.Inflate=i(86091),o.Intersection=i(53951),o.MarchingAnts=i(14649),o.MergePoints=i(33595),o.MergeRect=i(20074),o.MergeXY=i(92171),o.Offset=i(42981),o.OffsetPoint=i(46907),o.Overlaps=i(60170),o.Perimeter=i(13019),o.PerimeterPoint=i(85133),o.Random=i(26597),o.RandomOutside=i(86470),o.SameDimensions=i(94845),o.Scale=i(31730),o.Union=i(36899),t.exports=o},41658:t=>{t.exports=function(t){var e=t.x1,i=t.y1,o=t.x2,s=t.y2,n=t.x3,t=t.y3;return Math.abs(((n-e)*(s-i)-(o-e)*(t-i))/2)}},39208:(t,e,i)=>{var s=i(16483);t.exports=function(t,e,i){var o=i*(Math.sqrt(3)/2);return new s(t,e,t+i/2,e+o,t-i/2,e+o)}},39545:(t,e,i)=>{var p=i(94811),f=i(16483);t.exports=function(t,e,i,o,s){void 0===i&&(i=1),void 0===o&&(o=1),void 0===s&&(s=[]);for(var n,r,a,h,l,c,u=p(t,e=void 0===e?null:e),d=0;d<u.length;d+=3)r=u[d],h=u[d+1],c=u[d+2],n=t[2*r]*i,r=t[2*r+1]*o,a=t[2*h]*i,h=t[2*h+1]*o,l=t[2*c]*i,c=t[2*c+1]*o,s.push(new f(n,r,a,h,l,c));return s}},90301:(t,e,i)=>{var s=i(16483);t.exports=function(t,e,i,o){return new s(t,e,t,e-(o=void 0===o?i:o),t+i,e)}},23707:(t,e,i)=>{var s=i(97523),n=i(13584);t.exports=function(t,e,i,o){o=(o=void 0===o?s:o)(t),e-=o.x,i-=o.y;return n(t,e,i)}},97523:(t,e,i)=>{var o=i(2141);t.exports=function(t,e){return(e=void 0===e?new o:e).x=(t.x1+t.x2+t.x3)/3,e.y=(t.y1+t.y2+t.y3)/3,e}},24951:(t,e,i)=>{var l=i(26099);t.exports=function(t,e){void 0===e&&(e=new l);var i=t.x3,o=t.y3,s=t.x1-i,n=t.y1-o,r=t.x2-i,t=t.y2-o,a=2*(s*t-n*r),h=s*(r*r+t*t)-(s*s+n*n)*r;return e.x=i-(n*(r*r+t*t)-(s*s+n*n)*t)/a,e.y=o+h/a,e}},85614:(t,e,i)=>{var x=i(96503);t.exports=function(t,e){void 0===e&&(e=new x);var i,o,s,n,r=t.x1,a=t.y1,h=t.x2,l=t.y2,c=t.x3,t=t.y3,u=h-r,d=l-a,p=c-r,f=t-a,b=u*(r+h)+d*(a+l),y=p*(r+c)+f*(a+t),m=2*(u*(t-l)-d*(c-h));return Math.abs(m)<1e-6?(i=Math.min(r,h,c),o=Math.min(a,l,t),s=.5*(Math.max(r,h,c)-i),n=.5*(Math.max(a,l,t)-o),e.x=i+s,e.y=o+n):(e.x=(f*b-d*y)/m,e.y=(u*y-p*b)/m,s=e.x-r,n=e.y-a),e.radius=Math.sqrt(s*s+n*n),e}},74422:(t,e,i)=>{var o=i(16483);t.exports=function(t){return new o(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},10690:t=>{t.exports=function(t,e,i){var o=t.x3-t.x1,s=t.y3-t.y1,n=t.x2-t.x1,r=t.y2-t.y1,e=e-t.x1,i=i-t.y1,t=o*o+s*s,a=o*n+s*r,o=o*e+s*i,s=n*n+r*r,n=n*e+r*i,e=t*s-a*a,r=0==e?0:1/e,i=(s*o-a*n)*r,e=(t*n-a*o)*r;return 0<=i&&0<=e&&i+e<1}},48653:t=>{t.exports=function(t,e,i,o){void 0===i&&(i=!1),void 0===o&&(o=[]);for(var s,n,r,a=t.x3-t.x1,h=t.y3-t.y1,l=t.x2-t.x1,c=t.y2-t.y1,u=a*a+h*h,d=a*l+h*c,p=l*l+c*c,f=u*p-d*d,b=0==f?0:1/f,y=t.x1,m=t.y1,x=0;x<e.length&&(s=(u*(r=l*(n=e[x].x-y)+c*(s=e[x].y-m))-d*(n=a*n+h*s))*b,!(0<=(n=(p*n-d*r)*b)&&0<=s&&n+s<1&&(o.push({x:e[x].x,y:e[x].y}),i)));x++);return o}},96006:(t,e,i)=>{var o=i(10690);t.exports=function(t,e){return o(t,e.x,e.y)}},71326:t=>{t.exports=function(t,e){return e.setTo(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},71694:t=>{t.exports=function(t,e){return(e=void 0===e?[]:e).push({x:t.x1,y:t.y1}),e.push({x:t.x2,y:t.y2}),e.push({x:t.x3,y:t.y3}),e}},33522:t=>{t.exports=function(t,e){return t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2&&t.x3===e.x3&&t.y3===e.y3}},20437:(t,e,i)=>{var l=i(2141),c=i(35001);t.exports=function(t,e,i){void 0===i&&(i=new l);var o,s,n,r,a=t.getLineA(),h=t.getLineB(),t=t.getLineC();return e<=0||1<=e?(i.x=a.x1,i.y=a.y1):(r=0,(e=((o=c(a))+(s=c(h))+(n=c(t)))*e)<o?(i.x=a.x1+(a.x2-a.x1)*(r=e/o),i.y=a.y1+(a.y2-a.y1)*r):o+s<e?(r=(e-=o+s)/n,i.x=t.x1+(t.x2-t.x1)*r,i.y=t.y1+(t.y2-t.y1)*r):(r=(e-=o)/s,i.x=h.x1+(h.x2-h.x1)*r,i.y=h.y1+(h.y2-h.y1)*r)),i}},80672:(t,e,i)=>{var b=i(35001),y=i(2141);t.exports=function(t,e,i,o){void 0===o&&(o=[]);var s=t.getLineA(),n=t.getLineB(),r=t.getLineC(),a=b(s),h=b(n),l=b(r),c=a+h+l;!e&&0<i&&(e=c/i);for(var u=0;u<e;u++){var d=c*(u/e),p=0,f=new y;d<a?(f.x=s.x1+(s.x2-s.x1)*(p=d/a),f.y=s.y1+(s.y2-s.y1)*p):a+h<d?(p=(d-=a+h)/l,f.x=r.x1+(r.x2-r.x1)*p,f.y=r.y1+(r.y2-r.y1)*p):(p=(d-=a)/h,f.x=n.x1+(n.x2-n.x1)*p,f.y=n.y1+(n.y2-n.y1)*p),o.push(f)}return o}},39757:(t,e,i)=>{var u=i(2141);function d(t,e,i,o){t-=i,i=e-o;return Math.sqrt(t*t+i*i)}t.exports=function(t,e){void 0===e&&(e=new u);var i=t.x1,o=t.y1,s=t.x2,n=t.y2,r=t.x3,t=t.y3,a=d(r,t,s,n),h=d(i,o,r,t),l=d(s,n,i,o),c=a+h+l;return e.x=(i*a+s*h+r*l)/c,e.y=(o*a+n*h+t*l)/c,e}},13584:t=>{t.exports=function(t,e,i){return t.x1+=e,t.y1+=i,t.x2+=e,t.y2+=i,t.x3+=e,t.y3+=i,t}},1376:(t,e,i)=>{var o=i(35001);t.exports=function(t){var e=t.getLineA(),i=t.getLineB(),t=t.getLineC();return o(e)+o(i)+o(t)}},90260:(t,e,i)=>{var h=i(2141);t.exports=function(t,e){void 0===e&&(e=new h);var i=t.x2-t.x1,o=t.y2-t.y1,s=t.x3-t.x1,n=t.y3-t.y1,r=Math.random(),a=Math.random();return 1<=r+a&&(r=1-r,a=1-a),e.x=t.x1+(i*r+s*a),e.y=t.y1+(o*r+n*a),e}},52172:(t,e,i)=>{var o=i(99614),s=i(39757);t.exports=function(t,e){var i=s(t);return o(t,i.x,i.y,e)}},49907:(t,e,i)=>{var o=i(99614);t.exports=function(t,e,i){return o(t,e.x,e.y,i)}},99614:t=>{t.exports=function(t,e,i,o){var s=Math.cos(o),o=Math.sin(o),n=t.x1-e,r=t.y1-i;return t.x1=n*s-r*o+e,t.y1=n*o+r*s+i,n=t.x2-e,r=t.y2-i,t.x2=n*s-r*o+e,t.y2=n*o+r*s+i,n=t.x3-e,r=t.y3-i,t.x3=n*s-r*o+e,t.y3=n*o+r*s+i,t}},16483:(t,e,i)=>{var o=i(83419),s=i(10690),n=i(20437),r=i(80672),a=i(23777),h=i(23031),l=i(90260),i=new o({initialize:function(t,e,i,o,s,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===n&&(n=0),this.type=a.TRIANGLE,this.x1=t,this.y1=e,this.x2=i,this.y2=o,this.x3=s,this.y3=n},contains:function(t,e){return s(this,t,e)},getPoint:function(t,e){return n(this,t,e)},getPoints:function(t,e,i){return r(this,t,e,i)},getRandomPoint:function(t){return l(this,t)},setTo:function(t,e,i,o,s,n){return void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===n&&(n=0),this.x1=t=void 0===t?0:t,this.y1=e,this.x2=i,this.y2=o,this.x3=s,this.y3=n,this},getLineA:function(t){return(t=void 0===t?new h:t).setTo(this.x1,this.y1,this.x2,this.y2),t},getLineB:function(t){return(t=void 0===t?new h:t).setTo(this.x2,this.y2,this.x3,this.y3),t},getLineC:function(t){return(t=void 0===t?new h:t).setTo(this.x3,this.y3,this.x1,this.y1),t},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(t){t=this.x1<=this.x2&&this.x1<=this.x3?this.x1-t:this.x2<=this.x1&&this.x2<=this.x3?this.x2-t:this.x3-t;this.x1-=t,this.x2-=t,this.x3-=t}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(t){t=this.x1>=this.x2&&this.x1>=this.x3?this.x1-t:this.x2>=this.x1&&this.x2>=this.x3?this.x2-t:this.x3-t;this.x1-=t,this.x2-=t,this.x3-=t}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(t){t=this.y1<=this.y2&&this.y1<=this.y3?this.y1-t:this.y2<=this.y1&&this.y2<=this.y3?this.y2-t:this.y3-t;this.y1-=t,this.y2-=t,this.y3-=t}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(t){t=this.y1>=this.y2&&this.y1>=this.y3?this.y1-t:this.y2>=this.y1&&this.y2>=this.y3?this.y2-t:this.y3-t;this.y1-=t,this.y2-=t,this.y3-=t}}});t.exports=i},84435:(t,e,i)=>{var o=i(16483);o.Area=i(41658),o.BuildEquilateral=i(39208),o.BuildFromPolygon=i(39545),o.BuildRight=i(90301),o.CenterOn=i(23707),o.Centroid=i(97523),o.CircumCenter=i(24951),o.CircumCircle=i(85614),o.Clone=i(74422),o.Contains=i(10690),o.ContainsArray=i(48653),o.ContainsPoint=i(96006),o.CopyFrom=i(71326),o.Decompose=i(71694),o.Equals=i(33522),o.GetPoint=i(20437),o.GetPoints=i(80672),o.InCenter=i(39757),o.Perimeter=i(1376),o.Offset=i(13584),o.Random=i(90260),o.Rotate=i(52172),o.RotateAroundPoint=i(49907),o.RotateAroundXY=i(99614),t.exports=o},74457:t=>{t.exports=function(t,e,i){return{gameObject:t,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:e,hitAreaCallback:i,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}}},84409:t=>{t.exports=function(s,n){return function(t,e,i,o){e=s.getPixelAlpha(e,i,o.texture.key,o.frame.name);return e&&n<=e}}},7003:(t,e,i)=>{var o=i(83419),h=i(93301),s=i(50792),n=i(8214),r=i(8443),a=i(78970),l=i(85098),c=i(42515),u=i(36210),d=i(61340),y=i(85955),i=new o({initialize:function(t,e){this.game=t,this.scaleManager,this.canvas,this.config=e,this.enabled=!0,this.events=new s,this.isOver=!0,this.defaultCursor="",this.keyboard=e.inputKeyboard?new a(this):null,this.mouse=e.inputMouse?new l(this):null,this.touch=e.inputTouch?new u(this):null,this.pointers=[],this.pointersTotal=e.inputActivePointers,e.inputTouch&&1===this.pointersTotal&&(this.pointersTotal=2);for(var i=0;i<=this.pointersTotal;i++){var o=new c(this,i);o.smoothFactor=e.inputSmoothFactor,this.pointers.push(o)}this.mousePointer=e.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new d,this._tempMatrix2=new d,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],t.events.once(r.BOOT,this.boot,this)},boot:function(){var t=this.game,e=t.events;this.canvas=t.canvas,this.scaleManager=t.scale,this.events.emit(n.MANAGER_BOOT),e.on(r.PRE_RENDER,this.preRender,this),e.once(r.DESTROY,this.destroy,this)},setCanvasOver:function(t){this.isOver=!0,this.events.emit(n.GAME_OVER,t)},setCanvasOut:function(t){this.isOver=!1,this.events.emit(n.GAME_OUT,t)},preRender:function(){var t=this.game.loop.now,e=this.game.loop.delta,i=this.game.scene.getScenes(!0,!0);this.time=t,this.events.emit(n.MANAGER_UPDATE);for(var o=0;o<i.length;o++){var s=i[o];if(s.sys.input&&s.sys.input.updatePoll(t,e)&&this.globalTopOnly)return}},setDefaultCursor:function(t){this.defaultCursor=t,this.canvas.style.cursor!==t&&(this.canvas.style.cursor=t)},setCursor:function(t){t.cursor&&(this.canvas.style.cursor=t.cursor)},resetCursor:function(t){t.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(t){var e=[];10<this.pointersTotal+(t=void 0===t?1:t)&&(t=10-this.pointersTotal);for(var i=0;i<t;i++){var o=this.pointers.length,o=new c(this,o);o.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(o),this.pointersTotal++,e.push(o)}return e},updateInputPlugins:function(t,e){var i=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var o=0;o<i.length;o++){var s=i[o];if(s.sys.input&&(s.sys.input.update(t,e)&&this.globalTopOnly||this._tempSkip))return}},onTouchStart:function(t){for(var e=this.pointers,i=[],o=0;o<t.changedTouches.length;o++)for(var s=t.changedTouches[o],n=1;n<this.pointersTotal;n++){var r=e[n];if(!r.active){r.touchstart(s,t),this.activePointer=r,i.push(r);break}}this.updateInputPlugins(h.TOUCH_START,i)},onTouchMove:function(t){for(var e=this.pointers,i=[],o=0;o<t.changedTouches.length;o++)for(var s=t.changedTouches[o],n=1;n<this.pointersTotal;n++){var r=e[n];if(r.active&&r.identifier===s.identifier){var a=document.elementFromPoint(s.clientX,s.clientY)===this.canvas;!this.isOver&&a?this.setCanvasOver(t):this.isOver&&!a&&this.setCanvasOut(t),this.isOver&&(r.touchmove(s,t),this.activePointer=r,i.push(r));break}}this.updateInputPlugins(h.TOUCH_MOVE,i)},onTouchEnd:function(t){for(var e=this.pointers,i=[],o=0;o<t.changedTouches.length;o++)for(var s=t.changedTouches[o],n=1;n<this.pointersTotal;n++){var r=e[n];if(r.active&&r.identifier===s.identifier){r.touchend(s,t),i.push(r);break}}this.updateInputPlugins(h.TOUCH_END,i)},onTouchCancel:function(t){for(var e=this.pointers,i=[],o=0;o<t.changedTouches.length;o++)for(var s=t.changedTouches[o],n=1;n<this.pointersTotal;n++){var r=e[n];if(r.active&&r.identifier===s.identifier){r.touchcancel(s,t),i.push(r);break}}this.updateInputPlugins(h.TOUCH_CANCEL,i)},onMouseDown:function(t){var e=this.mousePointer;e.down(t),e.updateMotion(),this.activePointer=e,this.updateInputPlugins(h.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(t){var e=this.mousePointer;e.move(t),e.updateMotion(),this.activePointer=e,this.updateInputPlugins(h.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(t){var e=this.mousePointer;e.up(t),e.updateMotion(),this.activePointer=e,this.updateInputPlugins(h.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(t){var e=this.mousePointer;e.wheel(t),this.activePointer=e,this.updateInputPlugins(h.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(t){var e=this.mouse.locked;this.mousePointer.locked=e,this.events.emit(n.POINTERLOCK_CHANGE,t,e)},inputCandidate:function(t,e){var i=t.input;if(!i||!i.enabled||!t.willRender(e))return!1;var o=!0,s=t.parentContainer;if(s)do{if(!s.willRender(e)){o=!1;break}}while(s=s.parentContainer);return o},hitTest:function(t,e,i,o){void 0===o&&(o=this._tempHitTest);var s=this._tempPoint,n=i.scrollX,r=i.scrollY,a=(o.length=0,t.x),h=t.y;i.getWorldPoint(a,h,s),t.worldX=s.x,t.worldY=s.y;for(var l={x:0,y:0},c=this._tempMatrix,u=this._tempMatrix2,d=0;d<e.length;d++){var p,f,b=e[d];this.inputCandidate(b,i)&&(p=s.x+n*b.scrollFactorX-n,f=s.y+r*b.scrollFactorY-r,b.parentContainer?(b.getWorldTransformMatrix(c,u),c.applyInverse(p,f,l)):y(p,f,b.x,b.y,b.rotation,b.scaleX,b.scaleY,l),this.pointWithinHitArea(b,l.x,l.y))&&o.push(b)}return o},pointWithinHitArea:function(t,e,i){e+=t.displayOriginX,i+=t.displayOriginY;var o=t.input;return!(!o||!o.hitAreaCallback(o.hitArea,e,i,t)||(o.localX=e,o.localY=i,0))},pointWithinInteractiveObject:function(t,e,i){return!!t.hitArea&&(e+=t.gameObject.displayOriginX,i+=t.gameObject.displayOriginY,t.localX=e,t.localY=i,t.hitAreaCallback(t.hitArea,e,i,t))},transformPointer:function(t,e,i,o){var s=t.position,n=t.prevPosition,e=(n.x=s.x,n.y=s.y,this.scaleManager.transformX(e)),i=this.scaleManager.transformY(i),t=t.smoothFactor;o&&0!==t?(s.x=e*t+n.x*(1-t),s.y=i*t+n.y*(1-t)):(s.x=e,s.y=i)},destroy:function(){this.events.removeAllListeners(),this.game.events.off(r.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var t=0;t<this.pointers.length;t++)this.pointers[t].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});t.exports=i},48205:(t,e,i)=>{var n=i(96503),r=i(87902),o=i(83419),a=i(93301),f=i(74457),s=i(84409),h=i(20339),l=i(8497),c=i(81154),b=i(8214),u=i(50792),y=i(95540),d=i(23777),p=i(89639),m=i(41212),x=i(37277),g=i(87841),v=i(37303),_=i(44594),w=i(16483),S=i(10690),i=new o({Extends:u,initialize:function(t){u.call(this),this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.manager=t.sys.game.input,this.pluginEvents=new u,this.enabled=!0,this.displayList,this.cameras,p.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var e={cancelled:!1};this._eventContainer={stopPropagation:function(){e.cancelled=!0}},this._eventData=e,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,t.sys.events.once(_.BOOT,this.boot,this),t.sys.events.on(_.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(_.DESTROY,this.destroy,this),this.pluginEvents.emit(b.BOOT)},start:function(){var t=this.systems.events;t.on(_.TRANSITION_START,this.transitionIn,this),t.on(_.TRANSITION_OUT,this.transitionOut,this),t.on(_.TRANSITION_COMPLETE,this.transitionComplete,this),t.on(_.PRE_UPDATE,this.preUpdate,this),t.once(_.SHUTDOWN,this.shutdown,this),this.manager.events.on(b.GAME_OUT,this.onGameOut,this),this.manager.events.on(b.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(b.START)},onGameOver:function(t){this.isActive()&&this.emit(b.GAME_OVER,t.timeStamp,t)},onGameOut:function(t){this.isActive()&&this.emit(b.GAME_OUT,t.timeStamp,t)},preUpdate:function(){this.pluginEvents.emit(b.PRE_UPDATE);var t=this._pendingRemoval,e=this._pendingInsertion,i=t.length,o=e.length;if(0!==i||0!==o){for(var s=this._list,n=0;n<i;n++){var r=t[n],a=s.indexOf(r);-1<a&&(s.splice(a,1),this.clear(r,!0))}this._pendingRemoval.length=0,this._list=s.concat(e.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.canInput()},updatePoll:function(t,e){if(!this.isActive())return!1;if(this.pluginEvents.emit(b.UPDATE,t,e),this._updatedThisFrame)return this._updatedThisFrame=!1;for(var i=this.manager,o=i.pointers,s=i.pointersTotal,n=0;n<s;n++)o[n].updateMotion();if(0===this._list.length)return!1;i=this.pollRate;if(-1===i)return!1;if(0<i){if(this._pollTimer-=e,!(this._pollTimer<0))return!1;this._pollTimer=this.pollRate}var r=!1;for(n=0;n<s;n++){var a=0,h=o[n];this._tempZones=[],this._temp=this.hitTestPointer(h),this.sortGameObjects(this._temp,h),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length)&&this._tempZones.splice(1),a+=this.processOverOutEvents(h),2===this.getDragState(h)&&this.processDragThresholdEvent(h,t),0<a&&(r=!0)}return r},update:function(t,e){if(!this.isActive())return!1;for(var i=e.length,o=!1,s=0;s<i;s++){var n=0,r=e[s];switch(this._tempZones=[],this._temp=this.hitTestPointer(r),this.sortGameObjects(this._temp,r),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length)&&this._tempZones.splice(1),t){case a.MOUSE_DOWN:n=(n=(n+=this.processDragDownEvent(r))+this.processDownEvents(r))+this.processOverOutEvents(r);break;case a.MOUSE_UP:n=(n=(n+=this.processDragUpEvent(r))+this.processUpEvents(r))+this.processOverOutEvents(r);break;case a.TOUCH_START:n=(n=(n+=this.processDragDownEvent(r))+this.processDownEvents(r))+this.processOverEvents(r);break;case a.TOUCH_END:case a.TOUCH_CANCEL:n=(n=(n+=this.processDragUpEvent(r))+this.processUpEvents(r))+this.processOutEvents(r);break;case a.MOUSE_MOVE:case a.TOUCH_MOVE:n=(n=(n+=this.processDragMoveEvent(r))+this.processMoveEvents(r))+this.processOverOutEvents(r);break;case a.MOUSE_WHEEL:n+=this.processWheelEvent(r)}0<n&&(o=!0)}return this._updatedThisFrame=!0,o},clear:function(t,e){void 0===e&&(e=!1),this.disable(t);var i=t.input,i=(i&&(this.removeDebug(t),this.manager.resetCursor(i),i.gameObject=void 0,i.target=void 0,i.hitArea=void 0,i.hitAreaCallback=void 0,i.callbackContext=void 0,t.input=null),e||this.queueForRemoval(t),this._draggable.indexOf(t));return-1<i&&this._draggable.splice(i,1),t},disable:function(t){var e=t.input;e&&(e.enabled=!1,e.dragState=0);for(var i,o=this._drag,s=this._over,n=this.manager,r=0;r<n.pointersTotal;r++)-1<(i=o[r].indexOf(t))&&o[r].splice(i,1),-1<(i=s[r].indexOf(t))&&s[r].splice(i,1);return this},enable:function(t,e,i,o){return void 0===o&&(o=!1),t.input?t.input.enabled=!0:this.setHitArea(t,e,i),t.input&&o&&!t.input.dropZone&&(t.input.dropZone=o),this},hitTestPointer:function(t){for(var e=this.cameras.getCamerasBelowPointer(t),i=0;i<e.length;i++){for(var o=e[i],s=this.manager.hitTest(t,this._list,o),n=0;n<s.length;n++){var r=s[n];r.input.dropZone&&this._tempZones.push(r)}if(0<s.length)return t.camera=o,s}return t.camera=e[0],[]},processDownEvents:function(t){for(var e=0,i=this._temp,o=this._eventData,s=this._eventContainer,n=o.cancelled=!1,r=0;r<i.length;r++){var a=i[r];if(a.input&&a.input.enabled){if(e++,a.emit(b.GAMEOBJECT_POINTER_DOWN,t,a.input.localX,a.input.localY,s),o.cancelled||!a.input||!a.input.enabled){n=!0;break}if(this.emit(b.GAMEOBJECT_DOWN,t,a,s),o.cancelled||!a.input){n=!0;break}}}return!n&&this.manager&&(t.downElement===this.manager.game.canvas?this.emit(b.POINTER_DOWN,t,i):this.emit(b.POINTER_DOWN_OUTSIDE,t)),e},getDragState:function(t){return this._dragState[t.id]},setDragState:function(t,e){this._dragState[t.id]=e},processDragThresholdEvent:function(t,e){var i=!1,o=this.dragTimeThreshold,s=this.dragDistanceThreshold;if(i=0<s&&h(t.x,t.y,t.downX,t.downY)>=s||0<o&&e>=t.downTime+o?!0:i)return this.setDragState(t,3),this.processDragStartList(t)},processDragStartList:function(t){if(3!==this.getDragState(t))return 0;for(var e=this._drag[t.id],i=0;i<e.length;i++){var o=e[i],s=o.input;s.dragState=2,s.dragStartX=o.x,s.dragStartY=o.y,s.dragStartXGlobal=t.worldX,s.dragStartYGlobal=t.worldY,s.dragX=s.dragStartXGlobal-s.dragStartX,s.dragY=s.dragStartYGlobal-s.dragStartY,o.emit(b.GAMEOBJECT_DRAG_START,t,s.dragX,s.dragY),this.emit(b.DRAG_START,t,o)}return this.setDragState(t,4),e.length},processDragDownEvent:function(t){var e=this._temp;if(0===this._draggable.length||0===e.length||!t.primaryDown||0!==this.getDragState(t))return 0;this.setDragState(t,1);for(var i=[],o=0;o<e.length;o++){var s=e[o];s.input.draggable&&0===s.input.dragState&&i.push(s)}return 0===i.length?(this.setDragState(t,0),0):(1<i.length&&(this.sortGameObjects(i,t),this.topOnly)&&i.splice(1),this._drag[t.id]=i,0===this.dragDistanceThreshold&&0===this.dragTimeThreshold?(this.setDragState(t,3),this.processDragStartList(t)):(this.setDragState(t,2),0))},processDragMoveEvent:function(t){if(2===this.getDragState(t)&&this.processDragThresholdEvent(t,this.manager.game.loop.now),4!==this.getDragState(t))return 0;for(var e=this._tempZones,i=this._drag[t.id],o=0;o<i.length;o++){var s,n,r,a=i[o],h=a.input,l=h.target;l?0===(s=e.indexOf(l))?(a.emit(b.GAMEOBJECT_DRAG_OVER,t,l),this.emit(b.DRAG_OVER,t,a,l)):0<s?(a.emit(b.GAMEOBJECT_DRAG_LEAVE,t,l),this.emit(b.DRAG_LEAVE,t,a,l),h.target=e[0],l=h.target,a.emit(b.GAMEOBJECT_DRAG_ENTER,t,l),this.emit(b.DRAG_ENTER,t,a,l)):(a.emit(b.GAMEOBJECT_DRAG_LEAVE,t,l),this.emit(b.DRAG_LEAVE,t,a,l),e[0]?(h.target=e[0],l=h.target,a.emit(b.GAMEOBJECT_DRAG_ENTER,t,l),this.emit(b.DRAG_ENTER,t,a,l)):h.target=null):!l&&e[0]&&(h.target=e[0],l=h.target,a.emit(b.GAMEOBJECT_DRAG_ENTER,t,l),this.emit(b.DRAG_ENTER,t,a,l)),r=a.parentContainer?(s=t.worldX-h.dragStartXGlobal,l=t.worldY-h.dragStartYGlobal,n=a.getParentRotation(),r=s*Math.cos(n)+l*Math.sin(n),l=l*Math.cos(n)-s*Math.sin(n),r*=1/a.parentContainer.scaleX,l*=1/a.parentContainer.scaleY,n=r+h.dragStartX,l+h.dragStartY):(n=t.worldX-h.dragX,t.worldY-h.dragY),a.emit(b.GAMEOBJECT_DRAG,t,n,r),this.emit(b.DRAG,t,a,n,r)}return i.length},processDragUpEvent:function(t){for(var e=this._drag[t.id],i=0;i<e.length;i++){var o,s,n=e[i],r=n.input;r&&2===r.dragState&&(r.dragState=0,r.dragX=r.localX-n.displayOriginX,r.dragY=r.localY-n.displayOriginY,o=!1,(s=r.target)&&(n.emit(b.GAMEOBJECT_DROP,t,s),this.emit(b.DROP,t,n,s),o=!(r.target=null)),n.input)&&n.input.enabled&&(n.emit(b.GAMEOBJECT_DRAG_END,t,r.dragX,r.dragY,o),this.emit(b.DRAG_END,t,n,o))}return this.setDragState(t,0),e.splice(0),0},processMoveEvents:function(t){for(var e=0,i=this._temp,o=this._eventData,s=this._eventContainer,n=o.cancelled=!1,r=0;r<i.length;r++){var a=i[r];if(a.input&&a.input.enabled){if(e++,a.emit(b.GAMEOBJECT_POINTER_MOVE,t,a.input.localX,a.input.localY,s),o.cancelled||!a.input||!a.input.enabled){n=!0;break}if(this.emit(b.GAMEOBJECT_MOVE,t,a,s),o.cancelled||!a.input||!a.input.enabled){n=!0;break}if(this.topOnly)break}}return n||this.emit(b.POINTER_MOVE,t,i),e},processWheelEvent:function(t){for(var e=0,i=this._temp,o=this._eventData,s=this._eventContainer,n=o.cancelled=!1,r=t.deltaX,a=t.deltaY,h=t.deltaZ,l=0;l<i.length;l++){var c=i[l];if(c.input&&c.input.enabled){if(e++,c.emit(b.GAMEOBJECT_POINTER_WHEEL,t,r,a,h,s),o.cancelled||!c.input||!c.input.enabled){n=!0;break}if(this.emit(b.GAMEOBJECT_WHEEL,t,c,r,a,h,s),o.cancelled||!c.input||!c.input.enabled){n=!0;break}}}return n||this.emit(b.POINTER_WHEEL,t,i,r,a,h),e},processOverEvents:function(t){var e=this._temp,i=0,o=e.length,s=[];if(0<o){for(var n=this.manager,r=this._eventData,a=this._eventContainer,h=r.cancelled=!1,l=0;l<o;l++){var c=e[l];if(c.input&&c.input.enabled){if(s.push(c),n.setCursor(c.input),c.emit(b.GAMEOBJECT_POINTER_OVER,t,c.input.localX,c.input.localY,a),i++,r.cancelled||!c.input||!c.input.enabled){h=!0;break}if(this.emit(b.GAMEOBJECT_OVER,t,c,a),r.cancelled||!c.input||!c.input.enabled){h=!0;break}}}h||this.emit(b.POINTER_OVER,t,s)}return this._over[t.id]=s,i},processOutEvents:function(t){var e=this._over[t.id],i=0,o=e.length;if(0<o){var s=this.manager,n=this._eventData,r=this._eventContainer,a=n.cancelled=!1;this.sortGameObjects(e,t);for(var h=0;h<o;h++){var l=e[h];if((l=e[h]).input&&l.input.enabled){if(s.resetCursor(l.input),l.emit(b.GAMEOBJECT_POINTER_OUT,t,r),i++,n.cancelled||!l.input||!l.input.enabled){a=!0;break}if(this.emit(b.GAMEOBJECT_OUT,t,l,r),n.cancelled||!l.input||!l.input.enabled){a=!0;break}a||this.emit(b.POINTER_OUT,t,e)}}this._over[t.id]=[]}return i},processOverOutEvents:function(t){for(var e,i=this._temp,o=[],s=[],n=[],r=this._over[t.id],a=this._drag[t.id],h=this.manager,l=0;l<r.length;l++)e=r[l],(-1===i.indexOf(e)&&-1===a.indexOf(e)?o:n).push(e);for(l=0;l<i.length;l++)e=i[l],-1===r.indexOf(e)&&s.push(e);var c=o.length,u=0,d=this._eventData,p=this._eventContainer,f=d.cancelled=!1;if(0<c){for(this.sortGameObjects(o,t),l=0;l<c;l++)if((e=o[l]).input&&e.input.enabled){if(h.resetCursor(e.input),e.emit(b.GAMEOBJECT_POINTER_OUT,t,p),u++,d.cancelled||!e.input||!e.input.enabled){f=!0;break}if(this.emit(b.GAMEOBJECT_OUT,t,e,p),d.cancelled||!e.input||!e.input.enabled){f=!0;break}}f||this.emit(b.POINTER_OUT,t,o)}if(c=s.length,f=d.cancelled=!1,0<c){for(this.sortGameObjects(s,t),l=0;l<c;l++)if((e=s[l]).input&&e.input.enabled){if(h.setCursor(e.input),e.emit(b.GAMEOBJECT_POINTER_OVER,t,e.input.localX,e.input.localY,p),u++,d.cancelled||!e.input||!e.input.enabled){f=!0;break}if(this.emit(b.GAMEOBJECT_OVER,t,e,p),d.cancelled||!e.input||!e.input.enabled){f=!0;break}}f||this.emit(b.POINTER_OVER,t,s)}return r=n.concat(s),this._over[t.id]=this.sortGameObjects(r,t),u},processUpEvents:function(t){for(var e=this._temp,i=this._eventData,o=this._eventContainer,s=i.cancelled=!1,n=0;n<e.length;n++){var r=e[n];if(r.input&&r.input.enabled){if(r.emit(b.GAMEOBJECT_POINTER_UP,t,r.input.localX,r.input.localY,o),i.cancelled||!r.input||!r.input.enabled){s=!0;break}if(this.emit(b.GAMEOBJECT_UP,t,r,o),i.cancelled||!r.input||!r.input.enabled){s=!0;break}}}return!s&&this.manager&&(t.upElement===this.manager.game.canvas?this.emit(b.POINTER_UP,t,e):this.emit(b.POINTER_UP_OUTSIDE,t)),e.length},queueForInsertion:function(t){return-1===this._pendingInsertion.indexOf(t)&&-1===this._list.indexOf(t)&&this._pendingInsertion.push(t),this},queueForRemoval:function(t){return this._pendingRemoval.push(t),this},setDraggable:function(t,e){void 0===e&&(e=!0),Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var o=t[i],s=(o.input.draggable=e,this._draggable.indexOf(o));e&&-1===s?this._draggable.push(o):!e&&-1<s&&this._draggable.splice(s,1)}return this},makePixelPerfect:function(t){var e=this.systems.textures;return s(e,t=void 0===t?1:t)},setHitArea:function(t,e,i){if(void 0===e)return this.setHitAreaFromTexture(t);Array.isArray(t)||(t=[t]);var o,s,n=!1,r=!1,a=!1,h=!1,l=!1,c=!0;m(e)&&Object.keys(e).length?(o=e,t.some(function(t){return t.hasOwnProperty("faces")})||(e=y(o,"hitArea",null),i=y(o,"hitAreaCallback",null),l=y(o,"pixelPerfect",!1),s=y(o,"alphaTolerance",1),l&&(e={},i=this.makePixelPerfect(s))),n=y(o,"draggable",!1),r=y(o,"dropZone",!1),a=y(o,"cursor",!1),h=y(o,"useHandCursor",!1),e&&i||(this.setHitAreaFromTexture(t),c=!1)):"function"!=typeof e||i||(i=e,e={});for(var u=0;u<t.length;u++){var d,p=t[u];l&&"Container"===p.type||((d=p.input||f(p,e,i)).customHitArea=c,d.dropZone=r,d.cursor=h?"pointer":a,p.input=d,n&&this.setDraggable(p),this.queueForInsertion(p))}return this},setHitAreaCircle:function(t,e,i,o,s){void 0===s&&(s=r);e=new n(e,i,o);return this.setHitArea(t,e,s)},setHitAreaEllipse:function(t,e,i,o,s,n){void 0===n&&(n=c);e=new l(e,i,o,s);return this.setHitArea(t,e,n)},setHitAreaFromTexture:function(t,e){void 0===e&&(e=v),Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var o=t[i],s=o.frame,n=0,r=0;o.width?(n=o.width,r=o.height):s&&(n=s.realWidth,r=s.realHeight),("Container"!==o.type||0!==n&&0!==r)&&0!==n&&0!==r&&(o.input=f(o,new g(0,0,n,r),e),this.queueForInsertion(o))}return this},setHitAreaRectangle:function(t,e,i,o,s,n){void 0===n&&(n=v);e=new g(e,i,o,s);return this.setHitArea(t,e,n)},setHitAreaTriangle:function(t,e,i,o,s,n,r,a){void 0===a&&(a=S);e=new w(e,i,o,s,n,r);return this.setHitArea(t,e,a)},enableDebug:function(r,t){void 0===t&&(t=65280);var e=r.input;if(e&&e.hitArea){var i=e.hitArea,o=i.type,a=e.hitAreaDebug,s=this.systems.add,n=this.systems.updateList,h=(a&&(n.remove(a),a.destroy(),a=null),0),l=0;switch(o){case d.CIRCLE:a=s.arc(0,0,i.radius),h=i.x-i.radius,l=i.y-i.radius;break;case d.ELLIPSE:a=s.ellipse(0,0,i.width,i.height),h=i.x-i.width/2,l=i.y-i.height/2;break;case d.LINE:a=s.line(0,0,i.x1,i.y1,i.x2,i.y2);break;case d.POLYGON:a=s.polygon(0,0,i.points);break;case d.RECTANGLE:a=s.rectangle(0,0,i.width,i.height),h=i.x,l=i.y;break;case d.TRIANGLE:a=s.triangle(0,0,i.x1,i.y1,i.x2,i.y2,i.x3,i.y3)}a&&(a.isFilled=!1,a.strokeColor=t,a.preUpdate=function(){a.setVisible(r.visible),a.setStrokeStyle(1/r.scale,a.strokeColor),a.setDisplayOrigin(r.displayOriginX,r.displayOriginY);var t,e=r.x,i=r.y,o=r.rotation,s=r.scaleX,n=r.scaleY;r.parentContainer&&(e=(t=r.getWorldTransformMatrix()).tx,i=t.ty,o=t.rotation,s=t.scaleX,n=t.scaleY),a.setRotation(o),a.setScale(s,n),a.setPosition(e+h*s,i+l*n),a.setScrollFactor(r.scrollFactorX,r.scrollFactorY),a.setDepth(r.depth)},n.add(a),e.hitAreaDebug=a)}return this},removeDebug:function(t){t=t.input;return t&&t.hitAreaDebug&&(t.hitAreaDebug.destroy(),t.hitAreaDebug=null),this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(t){return this.pollRate=t,this._pollTimer=0,this},setGlobalTopOnly:function(t){return this.manager.globalTopOnly=t,this},setTopOnly:function(t){return this.topOnly=t,this},sortGameObjects:function(t,e){var i;return t.length<2||!e.camera?t:(i=e.camera.renderList,t.sort(function(t,e){t=Math.max(i.indexOf(t),0);return Math.max(i.indexOf(e),0)-t}))},sortDropZones:function(t){return t.length<2?t:(this.scene.sys.depthSort(),t.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(t,e){if(t.parentContainer||e.parentContainer){if(t.parentContainer===e.parentContainer)return e.parentContainer.getIndex(e)-t.parentContainer.getIndex(t);if(t.parentContainer===e)return-1;if(e.parentContainer===t)return 1;for(var i=t.getIndexList(),o=e.getIndexList(),s=Math.min(i.length,o.length),n=0;n<s;n++){var r=i[n],a=o[n];if(r!==a)return a-r}return o.length-i.length}return this.displayList.getIndex(e)-this.displayList.getIndex(t)},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(t){return this.manager.addPointer(t)},setDefaultCursor:function(t){return this.manager.setDefaultCursor(t),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(b.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;for(var t=this._dragState.length=0;t<10;t++)this._drag[t]=[],this._over[t]=[];this.removeAllListeners();var e=this.manager,i=(e.canvas.style.cursor=e.defaultCursor,this.systems.events);i.off(_.TRANSITION_START,this.transitionIn,this),i.off(_.TRANSITION_OUT,this.transitionOut,this),i.off(_.TRANSITION_COMPLETE,this.transitionComplete,this),i.off(_.PRE_UPDATE,this.preUpdate,this),e.events.off(b.GAME_OUT,this.onGameOut,this),e.events.off(b.GAME_OVER,this.onGameOver,this),i.off(_.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var t=this.manager.pointers,e=0;e<t.length;e++)t[e].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(b.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(_.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});x.register("InputPlugin",i,"input"),t.exports=i},89639:(t,e,i)=>{var l=i(35154),c={};t.exports={register:function(t,e,i,o,s){c[t]={plugin:e,mapping:i,settingsKey:o,configKey:s}},getPlugin:function(t){return c[t]},install:function(t){var e,i=t.scene.sys,o=i.settings.input,s=i.game.config;for(e in c){var n=c[e].plugin,r=c[e].mapping,a=c[e].settingsKey,h=c[e].configKey;l(o,a,s[h])&&(t[r]=new n(t))}},remove:function(t){c.hasOwnProperty(t)&&delete c[t]}}},42515:(t,e,i)=>{var r=i(31040),o=i(83419),s=i(20339),a=i(43855),h=i(47235),n=i(26099),l=i(25892),i=new o({initialize:function(t,e){this.manager=t,this.id=e,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new n,this.prevPosition=new n,this.midPoint=new n(-1,-1),this.velocity=new n,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=0===e,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(t){t=t.getWorldPoint(this.x,this.y);return this.worldX=t.x,this.worldY=t.y,this},positionToCamera:function(t,e){return t.getWorldPoint(this.x,this.y,e)},updateMotion:function(){var t,e,i=this.position.x,o=this.position.y,s=this.midPoint.x,n=this.midPoint.y;i===s&&o===n||(s=h(this.motionFactor,s,i),n=h(this.motionFactor,n,o),a(s,i,.1)&&(s=i),a(n,o,.1)&&(n=o),this.midPoint.set(s,n),this.velocity.set(t=i-s,e=o-n),this.angle=r(s,n,i,o),this.distance=Math.sqrt(t*t+e*e))},up:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.button=t.button,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),0===t.button&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),0===this.buttons&&(this.isDown=!1,this.upTime=t.timeStamp,this.wasTouch=!1)},down:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.button=t.button,this.downElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),0===t.button&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),l.macOS&&t.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=t.timeStamp),this.wasTouch=!1},move:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.manager.transformPointer(this,t.pageX,t.pageY,!0),this.locked&&(this.movementX=t.movementX||t.mozMovementX||t.webkitMovementX||0,this.movementY=t.movementY||t.mozMovementY||t.webkitMovementY||0),this.moveTime=t.timeStamp,this.wasTouch=!1},wheel:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.deltaX=t.deltaX,this.deltaY=t.deltaY,this.deltaZ=t.deltaZ,this.wasTouch=!1},touchstart:function(t,e){t.pointerId&&(this.pointerId=t.pointerId),this.identifier=t.identifier,this.target=t.target,this.active=!0,this.buttons=1,this.event=e,this.downElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=e.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(t,e){this.event=e,this.manager.transformPointer(this,t.pageX,t.pageY,!0),this.moveTime=e.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(t,e){this.buttons=0,this.event=e,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=e.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(t,e){this.buttons=0,this.event=e,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=e.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return 0===this.buttons},leftButtonDown:function(){return!!(1&this.buttons)},rightButtonDown:function(){return!!(2&this.buttons)},middleButtonDown:function(){return!!(4&this.buttons)},backButtonDown:function(){return!!(8&this.buttons)},forwardButtonDown:function(){return!!(16&this.buttons)},leftButtonReleased:function(){return 0===this.button&&!this.isDown},rightButtonReleased:function(){return 2===this.button&&!this.isDown},middleButtonReleased:function(){return 1===this.button&&!this.isDown},backButtonReleased:function(){return 3===this.button&&!this.isDown},forwardButtonReleased:function(){return 4===this.button&&!this.isDown},getDistance:function(){return this.isDown?s(this.downX,this.downY,this.x,this.y):s(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?r(this.downX,this.downY,this.x,this.y):r(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(t,e){void 0===t&&(t=10),void 0===e&&(e=[]);for(var i=this.prevPosition.x,o=this.prevPosition.y,s=this.position.x,n=this.position.y,r=0;r<t;r++){var a=1/t*r;e[r]={x:h(a,i,s),y:h(a,o,n)}}return e},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=0===this.id},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},time:{get:function(){return this.event?this.event.timeStamp:0}}});t.exports=i},93301:t=>{t.exports={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8}},7179:t=>{t.exports="boot"},85375:t=>{t.exports="destroy"},39843:t=>{t.exports="dragend"},23388:t=>{t.exports="dragenter"},16133:t=>{t.exports="drag"},27829:t=>{t.exports="dragleave"},53904:t=>{t.exports="dragover"},56058:t=>{t.exports="dragstart"},2642:t=>{t.exports="drop"},88171:t=>{t.exports="gameobjectdown"},36147:t=>{t.exports="dragend"},71692:t=>{t.exports="dragenter"},96149:t=>{t.exports="drag"},81285:t=>{t.exports="dragleave"},74048:t=>{t.exports="dragover"},21322:t=>{t.exports="dragstart"},49378:t=>{t.exports="drop"},86754:t=>{t.exports="gameobjectmove"},86433:t=>{t.exports="gameobjectout"},60709:t=>{t.exports="gameobjectover"},24081:t=>{t.exports="pointerdown"},11172:t=>{t.exports="pointermove"},18907:t=>{t.exports="pointerout"},95579:t=>{t.exports="pointerover"},35368:t=>{t.exports="pointerup"},26972:t=>{t.exports="wheel"},47078:t=>{t.exports="gameobjectup"},73802:t=>{t.exports="gameobjectwheel"},56718:t=>{t.exports="gameout"},25936:t=>{t.exports="gameover"},27503:t=>{t.exports="boot"},50852:t=>{t.exports="process"},96438:t=>{t.exports="update"},59152:t=>{t.exports="pointerlockchange"},47777:t=>{t.exports="pointerdown"},27957:t=>{t.exports="pointerdownoutside"},19444:t=>{t.exports="pointermove"},54251:t=>{t.exports="pointerout"},18667:t=>{t.exports="pointerover"},27192:t=>{t.exports="pointerup"},24652:t=>{t.exports="pointerupoutside"},45132:t=>{t.exports="wheel"},44512:t=>{t.exports="preupdate"},15757:t=>{t.exports="shutdown"},41637:t=>{t.exports="start"},93802:t=>{t.exports="update"},8214:(t,e,i)=>{t.exports={BOOT:i(7179),DESTROY:i(85375),DRAG_END:i(39843),DRAG_ENTER:i(23388),DRAG:i(16133),DRAG_LEAVE:i(27829),DRAG_OVER:i(53904),DRAG_START:i(56058),DROP:i(2642),GAME_OUT:i(56718),GAME_OVER:i(25936),GAMEOBJECT_DOWN:i(88171),GAMEOBJECT_DRAG_END:i(36147),GAMEOBJECT_DRAG_ENTER:i(71692),GAMEOBJECT_DRAG:i(96149),GAMEOBJECT_DRAG_LEAVE:i(81285),GAMEOBJECT_DRAG_OVER:i(74048),GAMEOBJECT_DRAG_START:i(21322),GAMEOBJECT_DROP:i(49378),GAMEOBJECT_MOVE:i(86754),GAMEOBJECT_OUT:i(86433),GAMEOBJECT_OVER:i(60709),GAMEOBJECT_POINTER_DOWN:i(24081),GAMEOBJECT_POINTER_MOVE:i(11172),GAMEOBJECT_POINTER_OUT:i(18907),GAMEOBJECT_POINTER_OVER:i(95579),GAMEOBJECT_POINTER_UP:i(35368),GAMEOBJECT_POINTER_WHEEL:i(26972),GAMEOBJECT_UP:i(47078),GAMEOBJECT_WHEEL:i(73802),MANAGER_BOOT:i(27503),MANAGER_PROCESS:i(50852),MANAGER_UPDATE:i(96438),POINTER_DOWN:i(47777),POINTER_DOWN_OUTSIDE:i(27957),POINTER_MOVE:i(19444),POINTER_OUT:i(54251),POINTER_OVER:i(18667),POINTER_UP:i(27192),POINTER_UP_OUTSIDE:i(24652),POINTER_WHEEL:i(45132),POINTERLOCK_CHANGE:i(59152),PRE_UPDATE:i(44512),SHUTDOWN:i(15757),START:i(41637),UPDATE:i(93802)}},97421:(t,e,i)=>{i=new(i(83419))({initialize:function(t,e){this.pad=t,this.events=t.events,this.index=e,this.value=0,this.threshold=.1},update:function(t){this.value=t},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});t.exports=i},28884:(t,e,i)=>{var o=i(83419),s=i(92734),i=new o({initialize:function(t,e){this.pad=t,this.events=t.manager,this.index=e,this.value=0,this.threshold=1,this.pressed=!1},update:function(t){this.value=t;var e=this.pad,i=this.index;t>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(s.BUTTON_DOWN,e,this,t),this.pad.emit(s.GAMEPAD_BUTTON_DOWN,i,t,this)):this.pressed&&(this.pressed=!1,this.events.emit(s.BUTTON_UP,e,this,t),this.pad.emit(s.GAMEPAD_BUTTON_UP,i,t,this))},destroy:function(){this.pad=null,this.events=null}});t.exports=i},99125:(t,e,i)=>{var n=i(97421),r=i(28884),o=i(83419),a=i(50792),h=i(26099),i=new o({Extends:a,initialize:function(t,e){a.call(this),this.manager=t,this.pad=e,this.id=e.id,this.index=e.index;for(var i=[],o=0;o<e.buttons.length;o++)i.push(new r(this,o));this.buttons=i;for(var s=[],o=0;o<e.axes.length;o++)s.push(new n(this,o));this.axes=s,this.vibration=e.vibrationActuator;t={value:0,pressed:!1},this._LCLeft=i[14]||t,this._LCRight=i[15]||t,this._LCTop=i[12]||t,this._LCBottom=i[13]||t,this._RCLeft=i[2]||t,this._RCRight=i[1]||t,this._RCTop=i[3]||t,this._RCBottom=i[0]||t,this._FBLeftTop=i[4]||t,this._FBLeftBottom=i[6]||t,this._FBRightTop=i[5]||t,this._FBRightBottom=i[7]||t,t={value:0};this._HAxisLeft=s[0]||t,this._VAxisLeft=s[1]||t,this._HAxisRight=s[2]||t,this._VAxisRight=s[3]||t,this.leftStick=new h,this.rightStick=new h,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(t){return this.axes[t].getValue()},setAxisThreshold:function(t){for(var e=0;e<this.axes.length;e++)this.axes[e].threshold=t},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(t){return this.buttons[t].value},isButtonDown:function(t){return this.buttons[t].pressed},update:function(t){if(!(t.timestamp<this._created)){for(var e=this.buttons,i=t.buttons,o=e.length,s=0;s<o;s++)e[s].update(i[s].value);var n=this.axes,r=t.axes,o=n.length;for(s=0;s<o;s++)n[s].update(r[s]);2<=o&&(this.leftStick.set(n[0].getValue(),n[1].getValue()),4<=o)&&this.rightStick.set(n[2].getValue(),n[3].getValue())}},destroy:function(){var t;for(this.removeAllListeners(),this.manager=null,this.pad=null,t=0;t<this.buttons.length;t++)this.buttons[t].destroy();for(t=0;t<this.axes.length;t++)this.axes[t].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});t.exports=i},56654:(t,e,i)=>{var o=i(83419),s=i(50792),n=i(92734),a=i(99125),r=i(35154),h=i(89639),l=i(8214),i=new o({Extends:s,initialize:function(t){s.call(this),this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,t.pluginEvents.once(l.BOOT,this.boot,this),t.pluginEvents.on(l.START,this.start,this)},boot:function(){var t=this.scene.sys.game,e=this.settings.input,i=t.config;this.enabled=r(e,"gamepad",i.inputGamepad)&&t.device.input.gamepads,this.target=r(e,"gamepad.target",i.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(l.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(l.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){function t(t){!t.defaultPrevented&&e.isActive()&&(e.refreshPads(),e.queue.push(t))}var e=this,i=this.target;this.onGamepadHandler=t,i.addEventListener("gamepadconnected",t,!1),i.addEventListener("gamepaddisconnected",t,!1),this.sceneInputPlugin.pluginEvents.on(l.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(l.UPDATE,this.update);for(var t=0;t<this.gamepads.length;t++)this.gamepads[t].removeAllListeners()},disconnectAll:function(){for(var t=0;t<this.gamepads.length;t++)this.gamepads[t].pad.connected=!1},refreshPads:function(){var t=navigator.getGamepads();if(t)for(var e=this.gamepads,i=0;i<t.length;i++){var o,s,n,r=t[i];r&&(n=r.id,(s=e[o=r.index])?s.id!==n?(s.destroy(),e[o]=new a(this,r)):s.update(r):(n=new a(this,r),e[o]=n,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=n):this._pad3=n:this._pad2=n:this._pad1=n))}else this.disconnectAll()},getAll:function(){for(var t=[],e=this.gamepads,i=0;i<e.length;i++)e[i]&&t.push(e[i]);return t},getPad:function(t){for(var e=this.gamepads,i=0;i<e.length;i++)if(e[i]&&e[i].index===t)return e[i]},update:function(){if(this.enabled){this.refreshPads();var t=this.queue.length;if(0!==t)for(var e=this.queue.splice(0,t),i=0;i<t;i++){var o=e[i],s=this.getPad(o.gamepad.index);"gamepadconnected"===o.type?this.emit(n.CONNECTED,s,o):"gamepaddisconnected"===o.type&&this.emit(n.DISCONNECTED,s,o)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var t=0;t<this.gamepads.length;t++)this.gamepads[t]&&this.gamepads[t].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});h.register("GamepadPlugin",i,"gamepad","gamepad","inputGamepad"),t.exports=i},89651:t=>{t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},65294:t=>{t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},90089:t=>{t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},64894:(t,e,i)=>{t.exports={DUALSHOCK_4:i(65294),SNES_USB:i(89651),XBOX_360:i(90089)}},46008:t=>{t.exports="down"},7629:t=>{t.exports="up"},42206:t=>{t.exports="connected"},86544:t=>{t.exports="disconnected"},94784:t=>{t.exports="down"},14325:t=>{t.exports="up"},92734:(t,e,i)=>{t.exports={BUTTON_DOWN:i(46008),BUTTON_UP:i(7629),CONNECTED:i(42206),DISCONNECTED:i(86544),GAMEPAD_BUTTON_DOWN:i(94784),GAMEPAD_BUTTON_UP:i(14325)}},48646:(t,e,i)=>{t.exports={Axis:i(97421),Button:i(28884),Events:i(92734),Gamepad:i(99125),GamepadPlugin:i(56654),Configs:i(64894)}},14350:(t,e,i)=>{var o=i(93301),i=i(79291)(!1,{CreatePixelPerfectHandler:i(84409),CreateInteractiveObject:i(74457),Events:i(8214),Gamepad:i(48646),InputManager:i(7003),InputPlugin:i(48205),InputPluginCache:i(89639),Keyboard:i(51442),Mouse:i(87078),Pointer:i(42515),Touch:i(95618)},o);t.exports=i},78970:(t,e,i)=>{var s=i(72905),o=i(83419),n=i(8443),r=i(8214),a=i(46032),h=i(29747),i=new o({initialize:function(t){this.manager=t,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=h,this.onKeyUp=h,t.events.once(r.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputKeyboard,this.target=t.inputKeyboardEventTarget,this.addCapture(t.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(n.POST_STEP,this.postUpdate,this)},startListeners:function(){var i=this,t=(this.onKeyDown=function(t){var e;!t.defaultPrevented&&i.enabled&&i.manager&&(i.queue.push(t),i.manager.events.emit(r.MANAGER_PROCESS),e=t.altKey||t.ctrlKey||t.shiftKey||t.metaKey,i.preventDefault)&&!e&&-1<i.captures.indexOf(t.keyCode)&&t.preventDefault()},this.onKeyUp=function(t){var e;!t.defaultPrevented&&i.enabled&&i.manager&&(i.queue.push(t),i.manager.events.emit(r.MANAGER_PROCESS),e=t.altKey||t.ctrlKey||t.shiftKey||t.metaKey,i.preventDefault)&&!e&&-1<i.captures.indexOf(t.keyCode)&&t.preventDefault()},this.target);t&&(t.addEventListener("keydown",this.onKeyDown,!1),t.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var t=this.target;t.removeEventListener("keydown",this.onKeyDown,!1),t.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(t){"string"==typeof t&&(t=t.split(",")),Array.isArray(t)||(t=[t]);for(var e=this.captures,i=0;i<t.length;i++){var o=t[i];"string"==typeof o&&(o=a[o.trim().toUpperCase()]),-1===e.indexOf(o)&&e.push(o)}this.preventDefault=0<e.length},removeCapture:function(t){"string"==typeof t&&(t=t.split(",")),Array.isArray(t)||(t=[t]);for(var e=this.captures,i=0;i<t.length;i++){var o=t[i];"string"==typeof o&&(o=a[o.toUpperCase()]),s(e,o)}this.preventDefault=0<e.length},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(n.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});t.exports=i},28846:(t,e,i)=>{var o=i(83419),s=i(50792),h=i(95922),n=i(8443),r=i(35154),a=i(8214),l=i(89639),c=i(30472),u=i(46032),d=i(87960),p=i(74600),f=i(44594),b=i(56583),i=new o({Extends:s,initialize:function(t){s.call(this),this.game=t.systems.game,this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.manager=t.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,t.pluginEvents.once(a.BOOT,this.boot,this),t.pluginEvents.on(a.START,this.start,this)},boot:function(){var t=this.settings.input,t=(this.enabled=r(t,"keyboard",!0),r(t,"keyboard.capture",null));t&&this.addCaptures(t),this.sceneInputPlugin.pluginEvents.once(a.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(a.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(a.SHUTDOWN,this.shutdown,this),this.game.events.on(n.BLUR,this.resetKeys,this),this.scene.sys.events.on(f.PAUSE,this.resetKeys,this),this.scene.sys.events.on(f.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(t){return this.manager.addCapture(t),this},removeCapture:function(t){return this.manager.removeCapture(t),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:u.UP,down:u.DOWN,left:u.LEFT,right:u.RIGHT,space:u.SPACE,shift:u.SHIFT})},addKeys:function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1);var o={};if("string"==typeof t){t=t.split(",");for(var s=0;s<t.length;s++){var n=t[s].trim();n&&(o[n]=this.addKey(n,e,i))}}else for(var r in t)o[r]=this.addKey(t[r],e,i);return o},addKey:function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1);var o,s=this.keys;return t instanceof c?(-1<(o=s.indexOf(t))?s[o]=t:s[t.keyCode]=t,e&&this.addCapture(t.keyCode),t.setEmitOnRepeat(i),t):(s[t="string"==typeof t?u[t.toUpperCase()]:t]||(s[t]=new c(this,t),e&&this.addCapture(t),s[t].setEmitOnRepeat(i)),s[t])},removeKey:function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var o,s,n=this.keys;return t instanceof c?-1<(s=n.indexOf(t))&&(o=this.keys[s],this.keys[s]=void 0):"string"==typeof t&&(t=u[t.toUpperCase()]),n[t]&&(o=n[t],n[t]=void 0),o&&(o.plugin=null,i&&this.removeCapture(o.keyCode),e)&&o.destroy(),this},removeAllKeys:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);for(var i=this.keys,o=0;o<i.length;o++){var s=i[o];s&&(i[o]=void 0,e&&this.removeCapture(s.keyCode),t)&&s.destroy()}return this},createCombo:function(t,e){return new d(this,t,e)},checkDown:function(t,e){if(void 0===e&&(e=0),this.enabled&&t.isDown){e=b(this.time-t.timeDown,e);if(e>t._tick)return t._tick=e,!0}return!1},update:function(){var t=this.manager.queue,e=t.length;if(this.isActive()&&0!==e)for(var i=this.keys,o=0;o<e;o++){var s=t[o],n=s.keyCode,r=i[n],a=!1;void 0===s.cancelled&&(s.cancelled=0,s.stopImmediatePropagation=function(){s.cancelled=1},s.stopPropagation=function(){s.cancelled=-1}),-1===s.cancelled||n===this.prevCode&&s.timeStamp===this.prevTime&&s.type===this.prevType||(this.prevCode=n,this.prevTime=s.timeStamp,this.prevType=s.type,"keydown"===s.type?(r&&(a=r.isDown,r.onDown(s)),s.cancelled||r&&a||(p[n]&&this.emit(h.KEY_DOWN+p[n],s),s.cancelled)||this.emit(h.ANY_KEY_DOWN,s)):(r&&r.onUp(s),s.cancelled||(p[n]&&this.emit(h.KEY_UP+p[n],s),s.cancelled)||this.emit(h.ANY_KEY_UP,s)),1===s.cancelled&&(s.cancelled=0))}},resetKeys:function(){for(var t=this.keys,e=0;e<t.length;e++)t[e]&&t[e].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(a.MANAGER_PROCESS,this.update,this),this.game.events.off(n.BLUR,this.resetKeys),this.scene.sys.events.off(f.PAUSE,this.resetKeys,this),this.scene.sys.events.off(f.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var t=this.keys,e=0;e<t.length;e++)t[e]&&t[e].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});l.register("KeyboardPlugin",i,"keyboard","keyboard","inputKeyboard"),t.exports=i},66970:t=>{t.exports=function(t,e){return e.timeLastMatched=t.timeStamp,e.index++,e.index===e.size||(e.current=e.keyCodes[e.index],!1)}},87960:(t,e,i)=>{var o=i(83419),r=i(95922),a=i(95540),h=i(68769),l=i(92803),i=new o({initialize:function(t,e,i){if(void 0===i&&(i={}),e.length<2)return!1;this.manager=t,this.enabled=!0,this.keyCodes=[];for(var o=0;o<e.length;o++){var s=e[o];"string"==typeof s?this.keyCodes.push(s.toUpperCase().charCodeAt(0)):"number"==typeof s?this.keyCodes.push(s):s.hasOwnProperty("keyCode")&&this.keyCodes.push(s.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=a(i,"resetOnWrongKey",!0),this.maxKeyDelay=a(i,"maxKeyDelay",0),this.resetOnMatch=a(i,"resetOnMatch",!1),this.deleteOnMatch=a(i,"deleteOnMatch",!1);var n=this;this.onKeyDown=function(t){!n.matched&&n.enabled&&h(t,n)&&(n.manager.emit(r.COMBO_MATCH,n,t),n.resetOnMatch?l(n):n.deleteOnMatch&&n.destroy())},this.manager.on(r.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(r.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});t.exports=i},68769:(t,e,i)=>{var n=i(66970);t.exports=function(t,e){var i,o,s;return!!e.matched||(o=i=!1,t.keyCode!==e.current||0<e.index&&0<e.maxKeyDelay&&(s=e.timeLastMatched+e.maxKeyDelay,!(t.timeStamp<=s))||(o=!0,i=n(t,e)),!o&&e.resetOnWrongKey&&(e.index=0,e.current=e.keyCodes[0]),i&&(e.timeLastMatched=t.timeStamp,e.matched=!0,e.timeMatched=t.timeStamp),i)}},92803:t=>{t.exports=function(t){return t.current=t.keyCodes[0],t.index=0,t.timeLastMatched=0,t.matched=!1,t.timeMatched=0,t}},92612:t=>{t.exports="keydown"},23345:t=>{t.exports="keyup"},21957:t=>{t.exports="keycombomatch"},44743:t=>{t.exports="down"},3771:t=>{t.exports="keydown-"},46358:t=>{t.exports="keyup-"},75674:t=>{t.exports="up"},95922:(t,e,i)=>{t.exports={ANY_KEY_DOWN:i(92612),ANY_KEY_UP:i(23345),COMBO_MATCH:i(21957),DOWN:i(44743),KEY_DOWN:i(3771),KEY_UP:i(46358),UP:i(75674)}},51442:(t,e,i)=>{t.exports={Events:i(95922),KeyboardManager:i(78970),KeyboardPlugin:i(28846),Key:i(30472),KeyCodes:i(46032),KeyCombo:i(87960),AdvanceKeyCombo:i(66970),ProcessKeyCombo:i(68769),ResetKeyCombo:i(92803),JustDown:i(90229),JustUp:i(38796),DownDuration:i(37015),UpDuration:i(41170)}},37015:t=>{t.exports=function(t,e){void 0===e&&(e=50);var i=t.plugin.game.loop.time-t.timeDown;return t.isDown&&i<e}},90229:t=>{t.exports=function(t){return!!t._justDown&&!(t._justDown=!1)}},38796:t=>{t.exports=function(t){return!!t._justUp&&!(t._justUp=!1)}},30472:(t,e,i)=>{var o=i(83419),s=i(50792),n=i(95922),i=new o({Extends:s,initialize:function(t,e){s.call(this),this.plugin=t,this.keyCode=e,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(t){return this.emitOnRepeat=t,this},onDown:function(t){this.originalEvent=t,this.enabled&&(this.altKey=t.altKey,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.location=t.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(n.DOWN,this,t):(this.isDown=!0,this.isUp=!1,this.timeDown=t.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(n.DOWN,this,t)))},onUp:function(t){this.originalEvent=t,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=t.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(n.UP,this,t))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});t.exports=i},46032:t=>{t.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175}},74600:(t,e,i)=>{var o,s=i(46032),n={};for(o in s)n[s[o]]=o;t.exports=n},41170:t=>{t.exports=function(t,e){void 0===e&&(e=50);var i=t.plugin.game.loop.time-t.timeUp;return t.isUp&&i<e}},85098:(t,e,i)=>{var o=i(83419),r=i(89357),s=i(8214),n=i(29747),i=new o({initialize:function(t){this.manager=t,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=n,this.onMouseDown=n,this.onMouseUp=n,this.onMouseDownWindow=n,this.onMouseUpWindow=n,this.onMouseOver=n,this.onMouseOut=n,this.onMouseWheel=n,this.pointerLockChange=n,this.isTop=!0,t.events.once(s.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputMouse,this.target=t.inputMouseEventTarget,this.passive=t.inputMousePassive,this.preventDefaultDown=t.inputMousePreventDefaultDown,this.preventDefaultUp=t.inputMousePreventDefaultUp,this.preventDefaultMove=t.inputMousePreventDefaultMove,this.preventDefaultWheel=t.inputMousePreventDefaultWheel,this.target?"string"==typeof this.target&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,t.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(t){return t.preventDefault(),!1}),this},requestPointerLock:function(){var t;r.pointerLock&&((t=this.target).requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,t.requestPointerLock())},releasePointerLock:function(){r.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var t=this.target;if(t){var i=this,o=this.manager,e=o.canvas,s=window&&window.focus&&o.game.config.autoFocus,n=(this.onMouseMove=function(t){!t.defaultPrevented&&i.enabled&&o&&o.enabled&&(o.onMouseMove(t),i.preventDefaultMove)&&t.preventDefault()},this.onMouseDown=function(t){s&&window.focus(),!t.defaultPrevented&&i.enabled&&o&&o.enabled&&(o.onMouseDown(t),i.preventDefaultDown)&&t.target===e&&t.preventDefault()},this.onMouseDownWindow=function(t){t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents||!t.defaultPrevented&&i.enabled&&o&&o.enabled&&t.target!==e&&o.onMouseDown(t)},this.onMouseUp=function(t){!t.defaultPrevented&&i.enabled&&o&&o.enabled&&(o.onMouseUp(t),i.preventDefaultUp)&&t.target===e&&t.preventDefault()},this.onMouseUpWindow=function(t){t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents||!t.defaultPrevented&&i.enabled&&o&&o.enabled&&t.target!==e&&o.onMouseUp(t)},this.onMouseOver=function(t){!t.defaultPrevented&&i.enabled&&o&&o.enabled&&o.setCanvasOver(t)},this.onMouseOut=function(t){!t.defaultPrevented&&i.enabled&&o&&o.enabled&&o.setCanvasOut(t)},this.onMouseWheel=function(t){!t.defaultPrevented&&i.enabled&&o&&o.enabled&&o.onMouseWheel(t),i.preventDefaultWheel&&t.target===e&&t.preventDefault()},{passive:!0});if(t.addEventListener("mousemove",this.onMouseMove),t.addEventListener("mousedown",this.onMouseDown),t.addEventListener("mouseup",this.onMouseUp),t.addEventListener("mouseover",this.onMouseOver,n),t.addEventListener("mouseout",this.onMouseOut,n),this.preventDefaultWheel?t.addEventListener("wheel",this.onMouseWheel,{passive:!1}):t.addEventListener("wheel",this.onMouseWheel,n),window&&o.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,n),window.top.addEventListener("mouseup",this.onMouseUpWindow,n)}catch(t){window.addEventListener("mousedown",this.onMouseDownWindow,n),window.addEventListener("mouseup",this.onMouseUpWindow,n),this.isTop=!1}r.pointerLock&&(this.pointerLockChange=function(t){var e=i.target;i.locked=document.pointerLockElement===e||document.mozPointerLockElement===e||document.webkitPointerLockElement===e,o.onPointerLockChange(t)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var t=this.target;t.removeEventListener("mousemove",this.onMouseMove),t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("mouseover",this.onMouseOver),t.removeEventListener("mouseout",this.onMouseOut),window&&((t=this.isTop?window.top:window).removeEventListener("mousedown",this.onMouseDownWindow),t.removeEventListener("mouseup",this.onMouseUpWindow)),r.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});t.exports=i},87078:(t,e,i)=>{t.exports={MouseManager:i(85098)}},36210:(t,e,i)=>{var o=i(83419),s=i(8214),n=i(29747),i=new o({initialize:function(t){this.manager=t,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=n,this.onTouchStartWindow=n,this.onTouchMove=n,this.onTouchEnd=n,this.onTouchEndWindow=n,this.onTouchCancel=n,this.onTouchCancelWindow=n,this.isTop=!0,t.events.once(s.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputTouch,this.target=t.inputTouchEventTarget,this.capture=t.inputTouchCapture,this.target?"string"==typeof this.target&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,t.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(t){return t.preventDefault(),!1}),this},startListeners:function(){var t=this.target;if(t){var e=this,i=this.manager,o=i.canvas,s=window&&window.focus&&i.game.config.autoFocus,n=(this.onTouchMove=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&(i.onTouchMove(t),e.capture)&&t.cancelable&&t.preventDefault()},this.onTouchStart=function(t){s&&window.focus(),!t.defaultPrevented&&e.enabled&&i&&i.enabled&&(i.onTouchStart(t),e.capture)&&t.cancelable&&t.target===o&&t.preventDefault()},this.onTouchStartWindow=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&t.target!==o&&i.onTouchStart(t)},this.onTouchEnd=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&(i.onTouchEnd(t),e.capture)&&t.cancelable&&t.target===o&&t.preventDefault()},this.onTouchEndWindow=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&t.target!==o&&i.onTouchEnd(t)},this.onTouchCancel=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&(i.onTouchCancel(t),e.capture)&&t.preventDefault()},this.onTouchCancelWindow=function(t){!t.defaultPrevented&&e.enabled&&i&&i.enabled&&i.onTouchCancel(t)},this.capture),r={passive:!0},a={passive:!1};if(t.addEventListener("touchstart",this.onTouchStart,n?a:r),t.addEventListener("touchmove",this.onTouchMove,n?a:r),t.addEventListener("touchend",this.onTouchEnd,n?a:r),t.addEventListener("touchcancel",this.onTouchCancel,n?a:r),window&&i.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,a),window.top.addEventListener("touchend",this.onTouchEndWindow,a),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,a)}catch(t){window.addEventListener("touchstart",this.onTouchStartWindow,a),window.addEventListener("touchend",this.onTouchEndWindow,a),window.addEventListener("touchcancel",this.onTouchCancelWindow,a),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var t=this.target;t.removeEventListener("touchstart",this.onTouchStart),t.removeEventListener("touchmove",this.onTouchMove),t.removeEventListener("touchend",this.onTouchEnd),t.removeEventListener("touchcancel",this.onTouchCancel),window&&((t=this.isTop?window.top:window).removeEventListener("touchstart",this.onTouchStartWindow),t.removeEventListener("touchend",this.onTouchEndWindow),t.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});t.exports=i},95618:(t,e,i)=>{t.exports={TouchManager:i(36210)}},41299:(t,e,i)=>{var o=i(83419),s=i(23906),n=i(54899),r=i(95540),a=i(98356),h=i(3374),l=i(84376),c=i(92638),i=new o({initialize:function(t,e){if(this.loader=t,this.cache=r(e,"cache",!1),this.type=r(e,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=r(e,"key",!1);var i=this.key;if(t.prefix&&""!==t.prefix&&(this.key=t.prefix+i),!this.key)throw new Error("Invalid File key: "+this.key);var o=r(e,"url");void 0===o?o=t.path+i+"."+r(e,"extension",""):"string"!=typeof o||o.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)||(o=t.path+o),this.url=o,this.src="",this.xhrSettings=c(r(e,"responseType",void 0)),r(e,"xhrSettings",!1)&&(this.xhrSettings=h(this.xhrSettings,r(e,"xhrSettings",{}))),this.xhrLoader=null,this.state="function"==typeof this.url?s.FILE_POPULATED:s.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=r(e,"config",{}),this.multiFile,this.linkFile,this.base64="string"==typeof o&&0===o.indexOf("data:")},setLink:function(t){(this.linkFile=t).linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===s.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=s.FILE_LOADING,this.src=a(this,this.loader.baseURL),0===this.src.indexOf("data:")&&(this.base64=!0),this.xhrLoader=l(this,this.loader.xhr))},onLoad:function(e,t){var i=e.responseURL&&this.loader.localSchemes.some(function(t){return 0===e.responseURL.indexOf(t)})&&0===t.target.status,t=!(t.target&&200!==t.target.status)||i;4===e.readyState&&400<=e.status&&e.status<=599&&(t=!1),this.state=s.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,t)},onBase64Load:function(t){this.xhrLoader=t,this.state=s.FILE_LOADED,this.percentComplete=1,this.loader.emit(n.FILE_PROGRESS,this,this.percentComplete),this.loader.nextFile(this,!0)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(t){t.lengthComputable&&(this.bytesLoaded=t.loaded,this.bytesTotal=t.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(n.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=s.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=s.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=s.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(t){var e,i;this.state!==s.FILE_PENDING_DESTROY&&(void 0===t&&(t=this.data),e=this.key,i=this.type,this.loader.emit(n.FILE_COMPLETE,e,i,t),this.loader.emit(n.FILE_KEY_COMPLETE+i+"-"+e,e,i,t),this.loader.flagForRemoval(this),this.state=s.FILE_PENDING_DESTROY)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});i.createObjectURL=function(t,e,i){var o;"function"==typeof URL?t.src=URL.createObjectURL(e):((o=new FileReader).onload=function(){t.removeAttribute("crossOrigin"),t.src="data:"+(e.type||i)+";base64,"+o.result.split(",")[1]},o.onerror=t.onerror,o.readAsDataURL(e))},i.revokeObjectURL=function(t){"function"==typeof URL&&URL.revokeObjectURL(t.src)},t.exports=i},74099:t=>{var i={};t.exports={install:function(t){for(var e in i)t[e]=i[e]},register:function(t,e){i[t]=e},destroy:function(){i={}}}},98356:t=>{t.exports=function(t,e){return!!t.url&&(t.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?t.url:e+t.url)}},74261:(t,e,i)=>{var o=i(83419),s=i(23906),n=i(35072),r=i(50792),a=i(54899),h=i(74099),y=i(95540),m=i(35154),l=i(37277),c=i(44594),u=i(92638),i=new o({Extends:r,initialize:function(t){r.call(this);var e=t.sys.game.config,i=t.sys.settings.loader;this.scene=t,this.systems=t.sys,this.cacheManager=t.sys.cache,this.textureManager=t.sys.textures,this.sceneManager=t.sys.game.scene,h.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(y(i,"baseURL",e.loaderBaseURL)),this.setPath(y(i,"path",e.loaderPath)),this.setPrefix(y(i,"prefix",e.loaderPrefix)),this.maxParallelDownloads=y(i,"maxParallelDownloads",e.loaderMaxParallelDownloads),this.xhr=u(y(i,"responseType",e.loaderResponseType),y(i,"async",e.loaderAsync),y(i,"user",e.loaderUser),y(i,"password",e.loaderPassword),y(i,"timeout",e.loaderTimeout),y(i,"withCredentials",e.loaderWithCredentials)),this.crossOrigin=y(i,"crossOrigin",e.loaderCrossOrigin),this.imageLoadType=y(i,"imageLoadType",e.loaderImageLoadType),this.localSchemes=y(i,"localScheme",e.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new n,this.inflight=new n,this.queue=new n,this._deleteQueue=new n,this.totalFailed=0,this.totalComplete=0,this.state=s.LOADER_IDLE,this.multiKeyIndex=0,t.sys.events.once(c.BOOT,this.boot,this),t.sys.events.on(c.START,this.pluginStart,this)},boot:function(){this.systems.events.once(c.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(c.SHUTDOWN,this.shutdown,this)},setBaseURL:function(t){return""!==(t=void 0===t?"":t)&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.baseURL=t,this},setPath:function(t){return""!==(t=void 0===t?"":t)&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.path=t,this},setPrefix:function(t){return this.prefix=t=void 0===t?"":t,this},setCORS:function(t){return this.crossOrigin=t,this},addFile:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=t[e];this.keyExists(i)||(this.list.set(i),this.emit(a.ADD,i.key,i.type,this,i),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(e){var i=e.hasCacheConflict();return i||this.list.iterate(function(t){if(t.type===e.type&&t.key===e.key)return!(i=!0)}),!i&&this.isLoading()&&(this.inflight.iterate(function(t){if(t.type===e.type&&t.key===e.key)return!(i=!0)}),this.queue.iterate(function(t){if(t.type===e.type&&t.key===e.key)return!(i=!0)})),i},addPack:function(t,e){"string"==typeof e&&(e=m(t,e))&&(t={packKey:e});var i,o=0,s=this.baseURL,n=this.path,r=this.prefix;for(i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=t[i],h=y(a,"baseURL",s),l=y(a,"path",n),c=y(a,"prefix",r),u=y(a,"files",null),d=y(a,"defaultType","void");if(Array.isArray(u)){this.setBaseURL(h),this.setPath(l),this.setPrefix(c);for(var p=0;p<u.length;p++){var f=u[p],b=f.hasOwnProperty("type")?f.type:d;this[b]&&(this[b](f),o++)}}}return this.setBaseURL(s),this.setPath(n),this.setPrefix(r),0<o},isLoading:function(){return this.state===s.LOADER_LOADING||this.state===s.LOADER_PROCESSING},isReady:function(){return this.state===s.LOADER_IDLE||this.state===s.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(a.START,this),0===this.list.size?this.loadComplete():(this.state=s.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(c.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(a.PROGRESS,this.progress)},update:function(){this.state===s.LOADER_LOADING&&0<this.list.size&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(t){if((t.state===s.FILE_POPULATED||t.state===s.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(t),this.list.delete(t),t.crossOrigin||(t.crossOrigin=this.crossOrigin),t.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(t,e){this.inflight&&(this.inflight.delete(t),this.updateProgress(),e?(this.totalComplete++,this.queue.set(t),this.emit(a.FILE_LOAD,t),t.onProcess()):(this.totalFailed++,this._deleteQueue.set(t),this.emit(a.FILE_LOAD_ERROR,t),this.fileProcessComplete(t)))},fileProcessComplete:function(t){this.scene&&this.systems&&this.systems.game&&!this.systems.game.pendingDestroy&&(t.state===s.FILE_ERRORED?t.multiFile&&t.multiFile.onFileFailed(t):t.state===s.FILE_COMPLETE&&(t.multiFile?t.multiFile.isReadyToProcess()&&(t.multiFile.addToCache(),t.multiFile.pendingDestroy()):(t.addToCache(),t.pendingDestroy())),this.queue.delete(t),0===this.list.size)&&0===this.inflight.size&&0===this.queue.size&&this.loadComplete()},loadComplete:function(){this.emit(a.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=s.LOADER_COMPLETE,this.systems.events.off(c.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(a.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(t){this._deleteQueue.set(t)},saveJSON:function(t,e){return this.save(JSON.stringify(t),e)},save:function(t,e,i){void 0===e&&(e="file.json"),void 0===i&&(i="application/json");t=new Blob([t],{type:i}),i=URL.createObjectURL(t),t=document.createElement("a");return t.download=e,t.textContent="Download "+e,t.href=i,t.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var t=this.systems.game.config,e=this.systems.settings.loader;this.setBaseURL(y(e,"baseURL",t.loaderBaseURL)),this.setPath(y(e,"path",t.loaderPath)),this.setPrefix(y(e,"prefix",t.loaderPrefix)),this.state=s.LOADER_IDLE},shutdown:function(){this.reset(),this.state=s.LOADER_SHUTDOWN,this.removeAllListeners(),this.systems.events.off(c.UPDATE,this.update,this),this.systems.events.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=s.LOADER_DESTROYED,this.systems.events.off(c.UPDATE,this.update,this),this.systems.events.off(c.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});l.register("Loader",i,"load"),t.exports=i},3374:(t,e,i)=>{var s=i(79291),n=i(92638);t.exports=function(t,e){var i=void 0===t?n():s({},t);if(e)for(var o in e)void 0!==e[o]&&(i[o]=e[o]);return i}},26430:(t,e,i)=>{var o=i(83419),r=i(23906),s=i(54899),i=new o({initialize:function(t,e,i,o){var s=[],o=(o.forEach(function(t){t&&s.push(t)}),this.loader=t,this.type=e,this.key=i,this.key);t.prefix&&""!==t.prefix&&(this.key=t.prefix+o),this.multiKeyIndex=t.multiKeyIndex++,this.files=s,this.state=r.FILE_PENDING,this.complete=!1,this.pending=s.length,this.failed=0,this.config={},this.baseURL=t.baseURL,this.path=t.path,this.prefix=t.prefix;for(var n=0;n<s.length;n++)s[n].multiFile=this},isReadyToProcess:function(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function(t){return this.files.push(t),(t.multiFile=this).pending++,this.complete=!1,this},onFileComplete:function(t){-1!==this.files.indexOf(t)&&this.pending--},onFileFailed:function(t){-1!==this.files.indexOf(t)&&this.failed++},pendingDestroy:function(){if(this.state!==r.FILE_PENDING_DESTROY){var t=this.key,e=this.type;this.loader.emit(s.FILE_COMPLETE,t,e),this.loader.emit(s.FILE_KEY_COMPLETE+e+"-"+t,t,e),this.loader.flagForRemoval(this);for(var i=0;i<this.files.length;i++)this.files[i].pendingDestroy();this.state=r.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});t.exports=i},84376:(t,e,i)=>{var n=i(3374);t.exports=function(t,e){var i=n(e,t.xhrSettings);if(!t.base64){var o=new XMLHttpRequest;if(o.open("GET",t.src,i.async,i.user,i.password),o.responseType=t.xhrSettings.responseType,o.timeout=i.timeout,i.headers)for(var s in i.headers)o.setRequestHeader(s,i.headers[s]);return i.header&&i.headerValue&&o.setRequestHeader(i.header,i.headerValue),i.requestedWith&&o.setRequestHeader("X-Requested-With",i.requestedWith),i.overrideMimeType&&o.overrideMimeType(i.overrideMimeType),i.withCredentials&&(o.withCredentials=!0),o.onload=t.onLoad.bind(t,o),o.onerror=t.onError.bind(t,o),o.onprogress=t.onProgress.bind(t),o.ontimeout=t.onError.bind(t,o),o.send(),o}e=t.url.split(";base64,").pop()||t.url.split(",").pop(),e={responseText:atob(e)};t.onBase64Load(e)}},92638:t=>{t.exports=function(t,e,i,o,s,n){return{responseType:t=void 0===t?"":t,async:e=void 0===e?!0:e,user:i=void 0===i?"":i,password:o=void 0===o?"":o,timeout:s=void 0===s?0:s,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:n=void 0===n?!1:n}}},23906:t=>{t.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20}},42155:t=>{t.exports="addfile"},38991:t=>{t.exports="complete"},27540:t=>{t.exports="filecomplete"},87464:t=>{t.exports="filecomplete-"},94486:t=>{t.exports="loaderror"},13035:t=>{t.exports="load"},38144:t=>{t.exports="fileprogress"},97520:t=>{t.exports="postprocess"},85595:t=>{t.exports="progress"},55680:t=>{t.exports="start"},54899:(t,e,i)=>{t.exports={ADD:i(42155),COMPLETE:i(38991),FILE_COMPLETE:i(27540),FILE_KEY_COMPLETE:i(87464),FILE_LOAD_ERROR:i(94486),FILE_LOAD:i(13035),FILE_PROGRESS:i(38144),POST_PROCESS:i(97520),PROGRESS:i(85595),START:i(55680)}},14135:(t,e,i)=>{var o=i(83419),s=i(74099),n=i(518),r=i(54899),a=new o({Extends:n,initialize:function(t,e,i,o,s){n.call(this,t,e,i,o,s),this.type="animationJSON"},onProcess:function(){this.loader.once(r.POST_PROCESS,this.onLoadComplete,this),n.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});s.register("animation",function(t,e,i,o){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new a(this,t[s]));else this.addFile(new a(this,t,e,o,i));return this}),t.exports=a},76272:(t,e,i)=>{var o=i(83419),s=i(74099),h=i(95540),l=i(19550),c=i(41212),u=i(518),d=i(26430),a=new o({Extends:d,initialize:function(t,e,i,o,s,n){var r,a=c(e)?(e=h(a=e,"key"),r=new l(t,{key:e,url:h(a,"textureURL"),extension:h(a,"textureExtension","png"),normalMap:h(a,"normalMap"),xhrSettings:h(a,"textureXhrSettings")}),new u(t,{key:e,url:h(a,"atlasURL"),extension:h(a,"atlasExtension","json"),xhrSettings:h(a,"atlasXhrSettings")})):(r=new l(t,e,i,s),new u(t,e,o,n));r.linkFile?d.call(this,t,"atlasjson",e,[r,a,r.linkFile]):d.call(this,t,"atlasjson",e,[r,a])},addToCache:function(){var t,e,i;this.isReadyToProcess()&&(t=this.files[0],e=this.files[1],i=this.files[2]?this.files[2].data:null,this.loader.textureManager.addAtlas(t.key,t.data,e.data,i),e.addToCache(),this.complete=!0)}});s.register("aseprite",function(t,e,i,o,s){var n;if(Array.isArray(t))for(var r=0;r<t.length;r++)n=new a(this,t[r]),this.addFile(n.files);else n=new a(this,t,e,i,o,s),this.addFile(n.files);return this}),t.exports=a},38734:(t,e,i)=>{var o=i(83419),s=i(74099),h=i(95540),l=i(19550),c=i(41212),u=i(518),d=i(26430),a=new o({Extends:d,initialize:function(t,e,i,o,s,n){var r,a=c(e)?(e=h(a=e,"key"),r=new l(t,{key:e,url:h(a,"textureURL"),extension:h(a,"textureExtension","png"),normalMap:h(a,"normalMap"),xhrSettings:h(a,"textureXhrSettings")}),new u(t,{key:e,url:h(a,"atlasURL"),extension:h(a,"atlasExtension","json"),xhrSettings:h(a,"atlasXhrSettings")})):(r=new l(t,e,i,s),new u(t,e,o,n));r.linkFile?d.call(this,t,"atlasjson",e,[r,a,r.linkFile]):d.call(this,t,"atlasjson",e,[r,a])},addToCache:function(){var t,e,i;this.isReadyToProcess()&&(t=this.files[0],e=this.files[1],i=this.files[2]?this.files[2].data:null,this.loader.textureManager.addAtlas(t.key,t.data,e.data,i),this.complete=!0)}});s.register("atlas",function(t,e,i,o,s){var n;if(Array.isArray(t))for(var r=0;r<t.length;r++)n=new a(this,t[r]),this.addFile(n.files);else n=new a(this,t,e,i,o,s),this.addFile(n.files);return this}),t.exports=a},74599:(t,e,i)=>{var o=i(83419),s=i(74099),h=i(95540),l=i(19550),c=i(41212),u=i(26430),d=i(57318),a=new o({Extends:u,initialize:function(t,e,i,o,s,n){var r,a=c(e)?(e=h(a=e,"key"),r=new l(t,{key:e,url:h(a,"textureURL"),extension:h(a,"textureExtension","png"),normalMap:h(a,"normalMap"),xhrSettings:h(a,"textureXhrSettings")}),new d(t,{key:e,url:h(a,"atlasURL"),extension:h(a,"atlasExtension","xml"),xhrSettings:h(a,"atlasXhrSettings")})):(r=new l(t,e,i,s),new d(t,e,o,n));r.linkFile?u.call(this,t,"atlasxml",e,[r,a,r.linkFile]):u.call(this,t,"atlasxml",e,[r,a])},addToCache:function(){var t,e,i;this.isReadyToProcess()&&(t=this.files[0],e=this.files[1],i=this.files[2]?this.files[2].data:null,this.loader.textureManager.addAtlasXML(t.key,t.data,e.data,i),this.complete=!0)}});s.register("atlasXML",function(t,e,i,o,s){var n;if(Array.isArray(t))for(var r=0;r<t.length;r++)n=new a(this,t[r]),this.addFile(n.files);else n=new a(this,t,e,i,o,s),this.addFile(n.files);return this}),t.exports=a},21097:(t,e,i)=>{var o=i(83419),s=i(23906),r=i(41299),n=i(74099),h=i(95540),l=i(89749),c=i(41212),u=new o({Extends:r,initialize:function(t,e,i,o,s){c(e)&&(e=h(n=e,"key"),o=h(n,"xhrSettings"),s=h(n,"context",s));var n={type:"audio",cache:t.cacheManager.audio,extension:i.type,responseType:"arraybuffer",key:e,url:i.url,xhrSettings:o,config:{context:s}};r.call(this,t,n)},onProcess:function(){this.state=s.FILE_PROCESSING;var e=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(t){e.data=t,e.onProcessComplete()},function(t){e.onProcessError()}),this.config.context=null}});u.create=function(t,e,i,o,s){var n=t.systems.game,r=n.config.audio,a=n.device.audio,i=(c(e)&&(i=h(e,"url",[]),o=h(e,"config",{})),u.getAudioURL(n,i));return i?a.webAudio&&!r.disableWebAudio?new u(t,e,i,s,n.sound.context):new l(t,e,i,o):null},u.getAudioURL=function(t,e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var o=h(e[i],"url",e[i]);if(0===o.indexOf("blob:")||0===o.indexOf("data:"))return{url:o,type:""};var s=o.match(/\.([a-zA-Z0-9]+)($|\?)/),s=h(e[i],"type",s?s[1]:"").toLowerCase();if(t.device.audio[s])return{url:o,type:s}}return null},n.register("audio",function(t,e,i,o){var s,n=this.systems.game,r=n.config.audio,n=n.device.audio;if(!r.noAudio&&(n.webAudio||n.audioData))if(Array.isArray(t))for(var a=0;a<t.length;a++)(s=u.create(this,t[a]))&&this.addFile(s);else(s=u.create(this,t,e,i,o))&&this.addFile(s);return this}),t.exports=u},89524:(t,e,i)=>{var l=i(21097),o=i(83419),s=i(74099),c=i(95540),u=i(41212),d=i(518),p=i(26430),f=new o({Extends:p,initialize:function(t,e,i,o,s,n,r){var a,h;u(e)&&(e=c(h=e,"key"),i=c(h,"jsonURL"),o=c(h,"audioURL"),s=c(h,"audioConfig"),n=c(h,"audioXhrSettings"),r=c(h,"jsonXhrSettings")),o?(h=l.create(t,e,o,s,n))&&(a=new d(t,e,i,r),p.call(this,t,"audiosprite",e,[h,a]),this.config.resourceLoad=!1):(a=new d(t,e,i,r),p.call(this,t,"audiosprite",e,[a]),this.config.resourceLoad=!0,this.config.audioConfig=s,this.config.audioXhrSettings=n)},onFileComplete:function(t){var e,i,o;-1!==this.files.indexOf(t)&&(this.pending--,this.config.resourceLoad)&&"json"===t.type&&t.data.hasOwnProperty("resources")&&(e=t.data.resources,i=c(this.config,"audioConfig"),o=c(this.config,"audioXhrSettings"),t=l.create(this.loader,t.key,e,i,o))&&(this.addToMultiFile(t),this.loader.addFile(t))},addToCache:function(){var t,e;this.isReadyToProcess()&&(t=this.files[0],e=this.files[1],t.addToCache(),e.addToCache(),this.complete=!0)}});s.register("audioSprite",function(t,e,i,o,s,n){var r,a=this.systems.game,h=a.config.audio,a=a.device.audio;if(!(h&&h.noAudio||!a.webAudio&&!a.audioData))if(Array.isArray(t))for(var l=0;l<t.length;l++)(r=new f(this,t[l])).files&&this.addFile(r.files);else(r=new f(this,t,e,i,o,s,n)).files&&this.addFile(r.files);return this})},85722:(t,e,i)=>{var o=i(83419),s=i(23906),a=i(41299),n=i(74099),h=i(95540),l=i(41212),r=new o({Extends:a,initialize:function(t,e,i,o,s){var n="bin",r=(l(e)&&(e=h(r=e,"key"),i=h(r,"url"),o=h(r,"xhrSettings"),n=h(r,"extension",n),s=h(r,"dataType",s)),{type:"binary",cache:t.cacheManager.binary,extension:n,responseType:"arraybuffer",key:e,url:i,xhrSettings:o,config:{dataType:s}});a.call(this,t,r)},onProcess:function(){this.state=s.FILE_PROCESSING;var t=this.config.dataType;this.data=t?new t(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});n.register("binary",function(t,e,i,o){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new r(this,t[s]));else this.addFile(new r(this,t,e,o,i));return this}),t.exports=r},97025:(t,e,i)=>{var o=i(83419),s=i(74099),h=i(95540),l=i(19550),c=i(41212),u=i(26430),n=i(21859),d=i(57318),a=new o({Extends:u,initialize:function(t,e,i,o,s,n){var r,a=c(e)?(e=h(a=e,"key"),r=new l(t,{key:e,url:h(a,"textureURL"),extension:h(a,"textureExtension","png"),normalMap:h(a,"normalMap"),xhrSettings:h(a,"textureXhrSettings")}),new d(t,{key:e,url:h(a,"fontDataURL"),extension:h(a,"fontDataExtension","xml"),xhrSettings:h(a,"fontDataXhrSettings")})):(r=new l(t,e,i,s),new d(t,e,o,n));r.linkFile?u.call(this,t,"bitmapfont",e,[r,a,r.linkFile]):u.call(this,t,"bitmapfont",e,[r,a])},addToCache:function(){var t,e,i;this.isReadyToProcess()&&(t=this.files[0],i=this.files[1],t.addToCache(),e=t.cache.get(t.key),i=n(i.data,t.cache.getFrame(t.key),0,0,e),this.loader.cacheManager.bitmapFont.add(t.key,{data:i,texture:t.key,frame:null}),this.complete=!0)}});s.register("bitmapFont",function(t,e,i,o,s){var n;if(Array.isArray(t))for(var r=0;r<t.length;r++)n=new a(this,t[r]),this.addFile(n.files);else n=new a(this,t,e,i,o,s),this.addFile(n.files);return this}),t.exports=a},16024:(t,e,i)=>{var o=i(83419),s=i(23906),r=i(41299),n=i(74099),a=i(95540),h=i(41212),l=new o({Extends:r,initialize:function(t,e,i,o){var s="css",n=(h(e)&&(e=a(n=e,"key"),i=a(n,"url"),o=a(n,"xhrSettings"),s=a(n,"extension",s)),{type:"script",cache:!1,extension:s,responseType:"text",key:e,url:i,xhrSettings:o});r.call(this,t,n)},onProcess:function(){this.state=s.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});n.register("css",function(t,e,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new l(this,t[o]));else this.addFile(new l(this,t,e,i));return this}),t.exports=l},69559:(t,e,i)=>{var c=i(38734),p=i(85722),o=i(83419),s=i(74099),f=i(95540),u=i(19550),d=i(41212),n=i(518),b=i(31403),y=i(46975),m=i(59327),r=i(26430),x=i(82038),a=i(55222),g=new o({Extends:r,initialize:function(t,e,i,o){var s;i.multiAtlasURL?(s=new n(t,{key:e,url:i.multiAtlasURL,xhrSettings:o,config:i}),r.call(this,t,"texture",e,[s])):(s=i.textureURL.substr(i.textureURL.length-3),i.type||(i.type="ktx"===s.toLowerCase()?"KTX":"PVR"),s=new p(t,{key:e,url:i.textureURL,extension:s,xhrSettings:o,config:i}),i.atlasURL?(o=new n(t,{key:e,url:i.atlasURL,xhrSettings:o,config:i}),r.call(this,t,"texture",e,[s,o])):r.call(this,t,"texture",e,[s])),this.config=i},onFileComplete:function(t){if(-1!==this.files.indexOf(t)&&(this.pending--,this.config.multiAtlasURL)&&"json"===t.type&&t.data.hasOwnProperty("textures")){var e=t.data.textures,t=this.config,i=this.loader,o=i.baseURL,s=i.path,n=i.prefix,r=f(t,"multiBaseURL",this.baseURL),a=f(t,"multiPath",this.path),h=f(t,"prefix",this.prefix),l=f(t,"textureXhrSettings");r&&i.setBaseURL(r),a&&i.setPath(a),h&&i.setPrefix(h);for(var c=0;c<e.length;c++){var u=e[c].image,d="CMA"+this.multiKeyIndex+"_"+u,u=new p(i,d,u,l);this.addToMultiFile(u),i.addFile(u),e[c].normalMap&&((d=new p(i,d,e[c].normalMap,l)).type="normalMap",u.setLink(d),this.addToMultiFile(d),i.addFile(d))}i.setBaseURL(o),i.setPath(s),i.setPrefix(n)}},addToCache:function(){var t,e,i,o,s,n;this.isReadyToProcess()&&((t=this.config).multiAtlasURL?this.addMultiToCache():(n=this.loader.systems.renderer,i=this.loader.textureManager,o=this.files[0],s=this.files[1],"PVR"===t.type?e=x(o.data):"KTX"===t.type&&(e=b(o.data)),e&&!a(e)&&(t.format,e.internalFormat.toString(16),e=null),e&&!n.supportsCompressedTexture(t.format,e.internalFormat)&&(t.format,e.internalFormat,e=null),e&&(e.format=n.getCompressedTextureName(t.format,e.internalFormat),n=s&&s.data?s.data:null,i.addCompressedTexture(o.key,e,n))),this.complete=!0)},addMultiToCache:function(){for(var t,e=this.config,i=this.files[0],o=[],s=[],n=[],r=this.loader.systems.renderer,a=this.loader.textureManager,h=1;h<this.files.length;h++){var l=this.files[h];if("normalMap"!==l.type)for(var c=l.key.indexOf("_"),u=l.key.substr(c+1),d=l.data,p=0;p<i.data.textures.length;p++){var f=i.data.textures[p];if(f.image===u){"PVR"===e.type?t=x(d):"KTX"===e.type&&(t=b(d)),t&&r.supportsCompressedTexture(e.format,t.internalFormat)&&(t.format=r.getCompressedTextureName(e.format,t.internalFormat),s.push(t),o.push(f),l.linkFile)&&n.push(l.linkFile.data);break}}}0===n.length&&(n=void 0),a.addAtlasJSONArray(this.key,s,o,n),this.complete=!0}});s.register("texture",function(t,e,i){function o(t,e,i,o){var s,n,r={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0},a=(d(e)&&(e=f(n=e,"key"),i=f(n,"url"),o=f(n,"xhrSettings")),!1);for(s in i)if(l.supportsCompressedTexture(s)){var h=i[s];"string"==typeof h?r.textureURL=h:r=y(h,r),r.format=s.toUpperCase(),a=!0;break}a&&("IMG"===r.format?(n=r.multiAtlasURL?new m(t,e,r.multiAtlasURL,r.multiPath,r.multiBaseURL,o).files:r.atlasURL?new c(t,e,r.textureURL,r.atlasURL,o).files:new u(t,e,r.textureURL,o),t.addFile(n)):(n=new g(t,e,r,o),t.addFile(n.files)))}var l=this.systems.renderer;if(Array.isArray(t))for(var s=0;s<t.length;s++)o(this,t[s]);else o(this,t,e,i);return this}),t.exports=g},47931:(t,e,i)=>{var o=i(83419),s=i(23906),a=i(41299),n=i(74099),h=i(95540),l=i(41212),c=i(73894),r=new o({Extends:a,initialize:function(t,e,i,o,s){var n="glsl",r=(l(e)?(e=h(r=e,"key"),i=h(r,"url"),o=h(r,"shaderType","fragment"),s=h(r,"xhrSettings"),n=h(r,"extension",n)):void 0===o&&(o="fragment"),{type:"glsl",cache:t.cacheManager.shader,extension:n,responseType:"text",key:e,url:i,config:{shaderType:o},xhrSettings:s});a.call(this,t,r)},onProcess:function(){this.state=s.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t=this.data.split("\n"),e=this.extractBlock(t,0);if(e)for(;e;){var i,o=this.getShaderName(e.header),s=this.getShaderType(e.header),n=this.getShaderUniforms(e.header),r=e.shader;this.cache.has(o)?(i=this.cache.get(o),"fragment"===s?i.fragmentSrc=r:i.vertexSrc=r,i.uniforms||(i.uniforms=n)):"fragment"===s?this.cache.add(o,new c(o,r,"",n)):this.cache.add(o,new c(o,"",r,n)),e=this.extractBlock(t,e.offset)}else"fragment"===this.config.shaderType?this.cache.add(this.key,new c(this.key,this.data)):this.cache.add(this.key,new c(this.key,"",this.data))},getShaderName:function(t){for(var e=0;e<t.length;e++){var i=t[e].trim();if("name:"===i.substring(0,5))return i.substring(5).trim()}return this.key},getShaderType:function(t){for(var e=0;e<t.length;e++){var i=t[e].trim();if("type:"===i.substring(0,5))return i.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(t){for(var e={},i=0;i<t.length;i++){var o=t[i].trim();if("uniform."===o.substring(0,8)){var s=o.indexOf(":");if(s){var n=o.substring(8,s);try{e[n]=JSON.parse(o.substring(s+1))}catch(t){}}}}return e},extractBlock:function(t,e){for(var i=-1,o=-1,s=-1,n=!1,r=!1,a=[],h=[],l=e;l<t.length;l++){var c=t[l].trim();if("---"===c)if(-1===i)i=l,n=!0;else{if(!n){r=!1;break}o=l,r=!(n=!1)}else n?a.push(c):r&&(h.push(c),s=l)}return n||-1===o?null:{header:a,shader:h.join("\n"),offset:s}}});n.register("glsl",function(t,e,i,o){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new r(this,t[s]));else this.addFile(new r(this,t,e,i,o));return this}),t.exports=r},89749:(t,e,i)=>{var o=i(83419),s=i(54899),n=i(41299),r=i(95540),a=i(98356),h=i(41212),i=new o({Extends:n,initialize:function(t,e,i,o){h(e)&&(e=r(s=e,"key"),o=r(s,"config",o));var s={type:"audio",cache:t.cacheManager.audio,extension:i.type,key:e,url:i.url,config:o};n.call(this,t,s),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var t=0;t<this.data.length;t++){var e=this.data[t];e.oncanplaythrough=null,e.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(t){t=t.target;t.oncanplaythrough=null,t.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(s.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var t=this.config&&this.config.instances||1;this.filesTotal=t,this.filesLoaded=0;for(var e=this.percentComplete=0;e<t;e++){var i=new Audio;i.dataset||(i.dataset={}),i.dataset.name=this.key+("0"+e).slice(-2),i.dataset.used="false",this.locked?i.dataset.locked="true":(i.dataset.locked="false",i.preload="auto",i.oncanplaythrough=this.onProgress.bind(this),i.onerror=this.onError.bind(this)),this.data.push(i)}for(e=0;e<this.data.length;e++)(i=this.data[e]).src=a(this,this.loader.baseURL),this.locked||i.load();this.locked&&setTimeout(this.onLoad.bind(this))}});t.exports=i},88470:(t,e,i)=>{var o=i(83419),s=i(23906),r=i(41299),n=i(74099),a=i(95540),h=i(41212),l=new o({Extends:r,initialize:function(t,e,i,o){var s="html",n=(h(e)&&(e=a(n=e,"key"),i=a(n,"url"),o=a(n,"xhrSettings"),s=a(n,"extension",s)),{type:"text",cache:t.cacheManager.html,extension:s,responseType:"text",key:e,url:i,xhrSettings:o});r.call(this,t,n)},onProcess:function(){this.state=s.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});n.register("html",function(t,e,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new l(this,t[o]));else this.addFile(new l(this,t,e,i));return this}),t.exports=l},14643:(t,e,i)=>{var o=i(83419),n=i(23906),h=i(41299),s=i(74099),l=i(95540),c=i(41212),r=new o({Extends:h,initialize:function(t,e,i,o,s,n){void 0===o&&(o=512),void 0===s&&(s=512);var r="html",a=(c(e)&&(e=l(a=e,"key"),i=l(a,"url"),n=l(a,"xhrSettings"),r=l(a,"extension",r),o=l(a,"width",o),s=l(a,"height",s)),{type:"html",cache:t.textureManager,extension:r,responseType:"text",key:e,url:i,xhrSettings:n,config:{width:o,height:s}});h.call(this,t,a)},onProcess:function(){this.state=n.FILE_PROCESSING;var t=this.config.width,e=this.config.height,i=[],e=(i.push('<svg width="'+t+'px" height="'+e+'px" viewBox="0 0 '+t+" "+e+'" xmlns="http://www.w3.org/2000/svg">'),i.push('<foreignObject width="100%" height="100%">'),i.push('<body xmlns="http://www.w3.org/1999/xhtml">'),i.push(this.xhrLoader.responseText),i.push("</body>"),i.push("</foreignObject>"),i.push("</svg>"),[i.join("\n")]),o=this;try{var s=new window.Blob(e,{type:"image/svg+xml;charset=utf-8"})}catch(t){return o.state=n.FILE_ERRORED,void o.onProcessComplete()}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){h.revokeObjectURL(o.data),o.onProcessComplete()},this.data.onerror=function(){h.revokeObjectURL(o.data),o.onProcessError()},h.createObjectURL(this.data,s,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});s.register("htmlTexture",function(t,e,i,o,s){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new r(this,t[n]));else this.addFile(new r(this,t,e,i,o,s));return this}),t.exports=r},19550:(t,e,i)=>{var o=i(83419),s=i(23906),l=i(41299),n=i(74099),c=i(95540),u=i(41212),r=i(98356),a=new o({Extends:l,initialize:function t(e,i,o,s,n){var r,a="png",h=(u(i)&&(i=c(h=i,"key"),o=c(h,"url"),r=c(h,"normalMap"),s=c(h,"xhrSettings"),a=c(h,"extension",a),n=c(h,"frameConfig")),Array.isArray(o)&&(r=o[1],o=o[0]),{type:"image",cache:e.textureManager,extension:a,responseType:"blob",key:i,url:o,xhrSettings:s,config:n});l.call(this,e,h),r&&((a=new t(e,this.key,r,s,n)).type="normalMap",this.setLink(a),e.addFile(a)),this.useImageElementLoad="HTMLImageElement"===e.imageLoadType||this.base64,this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=s.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var t=this;this.data.onload=function(){l.revokeObjectURL(t.data),t.onProcessComplete()},this.data.onerror=function(){l.revokeObjectURL(t.data),t.onProcessError()},l.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var t=this.state;this.state=s.FILE_PROCESSING,t===s.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){this.state=s.FILE_LOADING,this.src=r(this,this.loader.baseURL),this.data=new Image,this.data.crossOrigin=this.crossOrigin;var t=this;this.data.onload=function(){t.state=s.FILE_LOADED,t.loader.nextFile(t,!0)},this.data.onerror=function(){t.loader.nextFile(t,!1)},this.data.src=this.src},addToCache:function(){var t=this.linkFile;t?t.state>=s.FILE_COMPLETE&&("spritesheet"===t.type?t.addToCache():"normalMap"===this.type?this.cache.addImage(this.key,t.data,this.data):this.cache.addImage(this.key,this.data,t.data)):this.cache.addImage(this.key,this.data)}});n.register("image",function(t,e,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new a(this,t[o]));else this.addFile(new a(this,t,e,i));return this}),t.exports=a},518:(t,e,i)=>{var o=i(83419),a=i(23906),h=i(41299),s=i(74099),l=i(95540),c=i(35154),u=i(41212),n=new o({Extends:h,initialize:function(t,e,i,o,s){var n="json",r=(u(e)&&(e=l(r=e,"key"),i=l(r,"url"),o=l(r,"xhrSettings"),n=l(r,"extension",n),s=l(r,"dataKey",s)),{type:"json",cache:t.cacheManager.json,extension:n,responseType:"text",key:e,url:i,xhrSettings:o,config:s});h.call(this,t,r),u(i)&&(this.data=s?c(i,s):i,this.state=a.FILE_POPULATED)},onProcess:function(){if(this.state!==a.FILE_POPULATED){this.state=a.FILE_PROCESSING;try{var t=JSON.parse(this.xhrLoader.responseText)}catch(t){throw this.onProcessError(),t}var e=this.config;this.data="string"==typeof e?c(t,e,t):t}this.onProcessComplete()}});s.register("json",function(t,e,i,o){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new n(this,t[s]));else this.addFile(new n(this,t,e,o,i));return this}),t.exports=n},59327:(t,e,i)=>{var o=i(83419),s=i(74099),p=i(95540),f=i(19550),h=i(41212),l=i(518),c=i(26430),a=new o({Extends:c,initialize:function(t,e,i,o,s,n,r){h(e)&&(e=p(a=e,"key"),i=p(a,"url",!1)?p(a,"url"):p(a,"atlasURL"),n=p(a,"xhrSettings"),o=p(a,"path"),s=p(a,"baseURL"),r=p(a,"textureXhrSettings"));var a=new l(t,e,i,n);c.call(this,t,"multiatlas",e,[a]),this.config.path=o,this.config.baseURL=s,this.config.textureXhrSettings=r},onFileComplete:function(t){if(-1!==this.files.indexOf(t)&&(this.pending--,"json"===t.type)&&t.data.hasOwnProperty("textures")){var e=t.data.textures,t=this.config,i=this.loader,o=i.baseURL,s=i.path,n=i.prefix,r=p(t,"baseURL",this.baseURL),a=p(t,"path",this.path),h=p(t,"prefix",this.prefix),l=p(t,"textureXhrSettings");i.setBaseURL(r),i.setPath(a),i.setPrefix(h);for(var c=0;c<e.length;c++){var u=e[c].image,d="MA"+this.multiKeyIndex+"_"+u,u=new f(i,d,u,l);this.addToMultiFile(u),i.addFile(u),e[c].normalMap&&((d=new f(i,d,e[c].normalMap,l)).type="normalMap",u.setLink(d),this.addToMultiFile(d),i.addFile(d))}i.setBaseURL(o),i.setPath(s),i.setPrefix(n)}},addToCache:function(){if(this.isReadyToProcess()){for(var t=this.files[0],e=[],i=[],o=[],s=1;s<this.files.length;s++){var n=this.files[s];if("normalMap"!==n.type)for(var r=n.key.indexOf("_"),a=n.key.substr(r+1),h=n.data,l=0;l<t.data.textures.length;l++){var c=t.data.textures[l];if(c.image===a){i.push(h),e.push(c),n.linkFile&&o.push(n.linkFile.data);break}}}0===o.length&&(o=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,i,e,o),this.complete=!0}}});s.register("multiatlas",function(t,e,i,o,s){var n;if(Array.isArray(t))for(var r=0;r<t.length;r++)n=new a(this,t[r]),this.addFile(n.files);else n=new a(this,t,e,i,o,s),this.addFile(n.files);return this}),t.exports=a},99297:(t,e,i)=>{var o=i(83419),s=i(74099),l=i(95540),c=i(41212),u=i(26430),d=i(34328),n=new o({Extends:u,initialize:function(t,e,i,o){var s,n="js",r=[];c(e)&&(e=l(s=e,"key"),i=l(s,"url"),o=l(s,"xhrSettings"),n=l(s,"extension",n)),Array.isArray(i)||(i=[i]);for(var a=0;a<i.length;a++){var h=new d(t,{key:e+"_"+a.toString(),url:i[a],extension:n,xhrSettings:o});h.onProcess=function(){this.onProcessComplete()},r.push(h)}u.call(this,t,"scripts",e,r)},addToCache:function(){if(this.isReadyToProcess()){for(var t=0;t<this.files.length;t++){var e=this.files[t];e.data=document.createElement("script"),e.data.language="javascript",e.data.type="text/javascript",e.data.defer=!1,e.data.text=e.xhrLoader.responseText,document.head.appendChild(e.data)}this.complete=!0}}});s.register("scripts",function(t,e,i){var o;if(Array.isArray(t))for(var s=0;s<t.length;s++)o=new n(this,t[s]),this.addFile(o.files);else o=new n(this,t,e,i),this.addFile(o.files);return this}),t.exports=n},41846:(t,e,i)=>{var o=i(83419),s=i(74099),c=i(95540),u=i(41212),d=i(26430),n=i(85048),r=i(61485),p=i(78776),a=new o({Extends:d,initialize:function(t,e,i,o,s,n){var r,a,h,l=t.cacheManager.obj;u(e)?(e=c(h=e,"key"),r=new p(t,{key:e,type:"obj",cache:l,url:c(h,"url"),extension:c(h,"extension","obj"),xhrSettings:c(h,"xhrSettings"),config:{flipUV:c(h,"flipUV",s)}}),(o=c(h,"matURL"))&&(a=new p(t,{key:e,type:"mat",cache:l,url:o,extension:c(h,"matExtension","mat"),xhrSettings:c(h,"xhrSettings")}))):(r=new p(t,{key:e,url:i,type:"obj",cache:l,extension:"obj",xhrSettings:n,config:{flipUV:s}}),o&&(a=new p(t,{key:e,url:o,type:"mat",cache:l,extension:"mat",xhrSettings:n}))),d.call(this,t,"obj",e,[r,a])},addToCache:function(){var t,e,i;this.isReadyToProcess()&&(t=this.files[0],e=this.files[1],i=n(t.data,t.config.flipUV),e&&(i.materials=r(e.data)),t.cache.add(t.key,i),this.complete=!0)}});s.register("obj",function(t,e,i,o,s){var n;if(Array.isArray(t))for(var r=0;r<t.length;r++)n=new a(this,t[r]),this.addFile(n.files);else n=new a(this,t,e,i,o,s),this.addFile(n.files);return this}),t.exports=a},58610:(t,e,i)=>{var o=i(83419),s=i(23906),n=i(74099),r=i(518),a=new o({Extends:r,initialize:function(t,e,i,o,s){r.call(this,t,e,i,o,s),this.type="packfile"},onProcess:function(){var t;this.state!==s.FILE_POPULATED&&(this.state=s.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config&&((t={})[this.config]=this.data,this.data=t),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});n.register("pack",function(t,e,i,o){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new a(this,t[s]));else this.addFile(new a(this,t,e,o,i));return this}),t.exports=a},48988:(t,e,i)=>{var o=i(83419),h=i(23906),l=i(41299),s=i(74099),c=i(95540),u=i(41212),r=new o({Extends:l,initialize:function(t,e,i,o,s,n){var r="js",a=(u(e)&&(e=c(a=e,"key"),i=c(a,"url"),n=c(a,"xhrSettings"),r=c(a,"extension",r),o=c(a,"start"),s=c(a,"mapping")),{type:"plugin",cache:!1,extension:r,responseType:"text",key:e,url:i,xhrSettings:n,config:{start:o,mapping:s}});l.call(this,t,a),"function"==typeof i&&(this.data=i,this.state=h.FILE_POPULATED)},onProcess:function(){var t=this.loader.systems.plugins,e=this.config,i=c(e,"start",!1),e=c(e,"mapping",null);this.state===h.FILE_POPULATED?t.install(this.key,this.data,i,e):(this.state=h.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),t=t.install(this.key,window[this.key],i,e),(i||e)&&(this.loader.systems[e]=t,this.loader.scene[e]=t)),this.onProcessComplete()}});s.register("plugin",function(t,e,i,o,s){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new r(this,t[n]));else this.addFile(new r(this,t,e,i,o,s));return this}),t.exports=r},67397:(t,e,i)=>{var o=i(83419),d=i(23906),p=i(41299),s=i(74099),a=i(95540),h=i(41212),n=new o({Extends:p,initialize:function(t,e,i,o,s){var n="svg",r=(h(e)&&(e=a(r=e,"key"),i=a(r,"url"),o=a(r,"svgConfig",{}),s=a(r,"xhrSettings"),n=a(r,"extension",n)),{type:"svg",cache:t.textureManager,extension:n,responseType:"text",key:e,url:i,xhrSettings:s,config:{width:a(o,"width"),height:a(o,"height"),scale:a(o,"scale")}});p.call(this,t,r)},onProcess:function(){this.state=d.FILE_PROCESSING;var t=this.xhrLoader.responseText,e=[t],i=this.config.width,o=this.config.height,s=this.config.scale;t:if(i&&o||s){var n=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("svg")[0],r=n.hasAttribute("viewBox"),a=parseFloat(n.getAttribute("width")),h=parseFloat(n.getAttribute("height"));if(!r&&a&&h?n.setAttribute("viewBox","0  0 "+a+" "+h):!r||a||h||(a=(r=n.getAttribute("viewBox").split(/\s+|,/))[2],h=r[3]),s){if(!a||!h)break t;i=a*s,o=h*s}n.setAttribute("width",i.toString()+"px"),n.setAttribute("height",o.toString()+"px"),e=[(new XMLSerializer).serializeToString(n)]}try{var l=new window.Blob(e,{type:"image/svg+xml;charset=utf-8"})}catch(t){return void this.onProcessError()}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var c=this,u=!1;this.data.onload=function(){u||p.revokeObjectURL(c.data),c.onProcessComplete()},this.data.onerror=function(){u?c.onProcessError():(u=!0,p.revokeObjectURL(c.data),c.data.src="data:image/svg+xml,"+encodeURIComponent(e.join("")))},p.createObjectURL(this.data,l,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});s.register("svg",function(t,e,i,o){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new n(this,t[s]));else this.addFile(new n(this,t,e,i,o));return this}),t.exports=n},88423:(t,e,i)=>{var o=i(83419),s=i(23906),r=i(41299),n=i(74099),a=i(95540),h=i(41212),l=new o({Extends:r,initialize:function(t,e,i,o){var s="js",n=(h(e)&&(e=a(n=e,"key"),i=a(n,"url"),o=a(n,"xhrSettings"),s=a(n,"extension",s)),{type:"text",extension:s,responseType:"text",key:e,url:i,xhrSettings:o});r.call(this,t,n)},onProcess:function(){this.state=s.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t=this.data.concat("(function(){\nreturn new "+this.key+"();\n}).call(this);"),e=eval;this.loader.sceneManager.add(this.key,e(t)),this.complete=!0}});n.register("sceneFile",function(t,e,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new l(this,t[o]));else this.addFile(new l(this,t,e,i));return this}),t.exports=l},56812:(t,e,i)=>{var o=i(83419),h=i(23906),l=i(41299),s=i(74099),c=i(95540),u=i(41212),r=new o({Extends:l,initialize:function(t,e,i,o,s,n){var r="js",a=(u(e)&&(e=c(a=e,"key"),i=c(a,"url"),n=c(a,"xhrSettings"),r=c(a,"extension",r),o=c(a,"systemKey"),s=c(a,"sceneKey")),{type:"scenePlugin",cache:!1,extension:r,responseType:"text",key:e,url:i,xhrSettings:n,config:{systemKey:o,sceneKey:s}});l.call(this,t,a),"function"==typeof i&&(this.data=i,this.state=h.FILE_POPULATED)},onProcess:function(){var t=this.loader.systems.plugins,e=this.config,i=this.key,o=c(e,"systemKey",i),e=c(e,"sceneKey",i);this.state===h.FILE_POPULATED?t.installScenePlugin(o,this.data,e,this.loader.scene,!0):(this.state=h.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),t.installScenePlugin(o,window[this.key],e,this.loader.scene,!0)),this.onProcessComplete()}});s.register("scenePlugin",function(t,e,i,o,s){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new r(this,t[n]));else this.addFile(new r(this,t,e,i,o,s));return this}),t.exports=r},34328:(t,e,i)=>{var o=i(83419),s=i(23906),a=i(41299),n=i(74099),h=i(95540),l=i(41212),r=new o({Extends:a,initialize:function(t,e,i,o,s){var n="js",r=(l(e)?(e=h(r=e,"key"),i=h(r,"url"),o=h(r,"type","script"),s=h(r,"xhrSettings"),n=h(r,"extension",n)):void 0===o&&(o="script"),{type:o,cache:!1,extension:n,responseType:"text",key:e,url:i,xhrSettings:s});a.call(this,t,r)},onProcess:function(){this.state=s.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});n.register("script",function(t,e,i,o){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new r(this,t[s]));else this.addFile(new r(this,t,e,i,o));return this}),t.exports=r},85035:(t,e,i)=>{var o=i(83419),s=i(23906),n=i(74099),r=i(19550),a=new o({Extends:r,initialize:function(t,e,i,o,s){r.call(this,t,e,i,s,o),this.type="spritesheet"},addToCache:function(){var t=this.linkFile;t?t.state>=s.FILE_COMPLETE&&("normalMap"===this.type?this.cache.addSpriteSheet(this.key,t.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,t.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});n.register("spritesheet",function(t,e,i,o){if(Array.isArray(t))for(var s=0;s<t.length;s++)this.addFile(new a(this,t[s]));else this.addFile(new a(this,t,e,i,o));return this}),t.exports=a},78776:(t,e,i)=>{var o=i(83419),s=i(23906),h=i(41299),n=i(74099),l=i(95540),c=i(41212),r=new o({Extends:h,initialize:function(t,e,i,o){var s="text",n="txt",r=t.cacheManager.text,a=(c(e)&&(e=l(a=e,"key"),i=l(a,"url"),o=l(a,"xhrSettings"),n=l(a,"extension",n),s=l(a,"type",s),r=l(a,"cache",r)),{type:s,cache:r,extension:n,responseType:"text",key:e,url:i,xhrSettings:o});h.call(this,t,a)},onProcess:function(){this.state=s.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});n.register("text",function(t,e,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new r(this,t[o]));else this.addFile(new r(this,t,e,i));return this}),t.exports=r},49477:(t,e,i)=>{var o=i(83419),s=i(23906),r=i(41299),n=i(74099),a=i(95540),h=i(41212),l=i(80341),c=new o({Extends:r,initialize:function(t,e,i,o){var s="csv",n=(h(e)&&(e=a(n=e,"key"),i=a(n,"url"),o=a(n,"xhrSettings"),s=a(n,"extension",s)),{type:"tilemapCSV",cache:t.cacheManager.tilemap,extension:s,responseType:"text",key:e,url:i,xhrSettings:o});r.call(this,t,n),this.tilemapFormat=l.CSV},onProcess:function(){this.state=s.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,t)}});n.register("tilemapCSV",function(t,e,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new c(this,t[o]));else this.addFile(new c(this,t,e,i));return this}),t.exports=c},40807:(t,e,i)=>{var o=i(83419),s=i(74099),n=i(518),r=i(80341),a=new o({Extends:n,initialize:function(t,e,i,o){n.call(this,t,e,i,o),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function(){var t={format:r.WELTMEISTER,data:this.data};this.cache.add(this.key,t)}});s.register("tilemapImpact",function(t,e,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new a(this,t[o]));else this.addFile(new a(this,t,e,i));return this}),t.exports=a},56775:(t,e,i)=>{var o=i(83419),s=i(74099),n=i(518),r=i(80341),a=new o({Extends:n,initialize:function(t,e,i,o){n.call(this,t,e,i,o),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function(){var t={format:r.TILED_JSON,data:this.data};this.cache.add(this.key,t)}});s.register("tilemapTiledJSON",function(t,e,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new a(this,t[o]));else this.addFile(new a(this,t,e,i));return this}),t.exports=a},25771:(t,e,i)=>{var o=i(83419),s=i(74099),h=i(95540),l=i(19550),c=i(41212),u=i(26430),d=i(78776),a=new o({Extends:u,initialize:function(t,e,i,o,s,n){var r,a=c(e)?(e=h(a=e,"key"),r=new l(t,{key:e,url:h(a,"textureURL"),extension:h(a,"textureExtension","png"),normalMap:h(a,"normalMap"),xhrSettings:h(a,"textureXhrSettings")}),new d(t,{key:e,url:h(a,"atlasURL"),extension:h(a,"atlasExtension","txt"),xhrSettings:h(a,"atlasXhrSettings")})):(r=new l(t,e,i,s),new d(t,e,o,n));r.linkFile?u.call(this,t,"unityatlas",e,[r,a,r.linkFile]):u.call(this,t,"unityatlas",e,[r,a])},addToCache:function(){var t,e,i;this.isReadyToProcess()&&(t=this.files[0],e=this.files[1],i=this.files[2]?this.files[2].data:null,this.loader.textureManager.addUnityAtlas(t.key,t.data,e.data,i),this.complete=!0)}});s.register("unityAtlas",function(t,e,i,o,s){var n;if(Array.isArray(t))for(var r=0;r<t.length;r++)n=new a(this,t[r]),this.addFile(n.files);else n=new a(this,t,e,i,o,s),this.addFile(n.files);return this}),t.exports=a},33720:(t,e,i)=>{var o=i(83419),s=i(23906),n=i(41299),r=i(74099),a=i(98356),h=i(95540),l=i(41212),c=new o({Extends:n,initialize:function(t,e,i,o){void 0===o&&(o=!1),l(e)&&(e=h(s=e,"key"),i=h(s,"url",[]),o=h(s,"noAudio",!1));var s=t.systems.game.device.video.getVideoURL(i),i={type:"video",cache:t.cacheManager.video,extension:s.type,key:e,url:s.url,config:{noAudio:o}};n.call(this,t,i)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=a(this,this.loader.baseURL),this.state=s.FILE_LOADED,this.loader.nextFile(this,!0)}});r.register("video",function(t,e,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new c(this,t[o]));else this.addFile(new c(this,t,e,i));return this}),t.exports=c},57318:(t,e,i)=>{var o=i(83419),s=i(23906),r=i(41299),n=i(74099),a=i(95540),h=i(41212),l=i(56836),c=new o({Extends:r,initialize:function(t,e,i,o){var s="xml",n=(h(e)&&(e=a(n=e,"key"),i=a(n,"url"),o=a(n,"xhrSettings"),s=a(n,"extension",s)),{type:"xml",cache:t.cacheManager.xml,extension:s,responseType:"text",key:e,url:i,xhrSettings:o});r.call(this,t,n)},onProcess:function(){this.state=s.FILE_PROCESSING,this.data=l(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});n.register("xml",function(t,e,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new c(this,t[o]));else this.addFile(new c(this,t,e,i));return this}),t.exports=c},64589:(t,e,i)=>{t.exports={AnimationJSONFile:i(14135),AsepriteFile:i(76272),AtlasJSONFile:i(38734),AtlasXMLFile:i(74599),AudioFile:i(21097),AudioSpriteFile:i(89524),BinaryFile:i(85722),BitmapFontFile:i(97025),CompressedTextureFile:i(69559),CSSFile:i(16024),GLSLFile:i(47931),HTML5AudioFile:i(89749),HTMLFile:i(88470),HTMLTextureFile:i(14643),ImageFile:i(19550),JSONFile:i(518),MultiAtlasFile:i(59327),MultiScriptFile:i(99297),OBJFile:i(41846),PackFile:i(58610),PluginFile:i(48988),SceneFile:i(88423),ScenePluginFile:i(56812),ScriptFile:i(34328),SpriteSheetFile:i(85035),SVGFile:i(67397),TextFile:i(78776),TilemapCSVFile:i(49477),TilemapImpactFile:i(40807),TilemapJSONFile:i(56775),UnityAtlasFile:i(25771),VideoFile:i(33720),XMLFile:i(57318)}},57777:(t,e,i)=>{var o=i(23906),i=i(79291)(!1,{Events:i(54899),FileTypes:i(64589),File:i(41299),FileTypesManager:i(74099),GetURL:i(98356),LoaderPlugin:i(74261),MergeXHRSettings:i(3374),MultiFile:i(26430),XHRLoader:i(84376),XHRSettings:i(92638)},o);t.exports=i},53307:t=>{t.exports=function(t){for(var e=0,i=0;i<t.length;i++)e+=+t[i];return e/t.length}},85710:(t,e,i)=>{var o=i(6411);t.exports=function(t,e){return o(t)/o(e)/o(t-e)}},30976:t=>{t.exports=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}},87842:t=>{t.exports=function(t,e,i,o,s){var e=.5*(o-e),s=.5*(s-i),n=t*t;return t*n*(2*i-2*o+e+s)+(-3*i+3*o-2*e-s)*n+e*t+i}},26302:t=>{t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=10);i=Math.pow(i,-e);return Math.ceil(t*i)/i}},45319:t=>{t.exports=function(t,e,i){return Math.max(e,Math.min(i,t))}},39506:(t,e,i)=>{var o=i(36383);t.exports=function(t){return t*o.DEG_TO_RAD}},61241:t=>{t.exports=function(t,e){return Math.abs(t-e)}},38857:(t,e,i)=>{var y=i(45319),o=i(83419),s=i(37867),n=i(29747),r=new s,i=new o({initialize:function t(e,i,o,s){void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=t.DefaultOrder),this._x=e=void 0===e?0:e,this._y=i,this._z=o,this._order=s,this.onChangeCallback=n},x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback(this)}},set:function(t,e,i,o){return void 0===o&&(o=this._order),this._x=t,this._y=e,this._z=i,this._order=o,this.onChangeCallback(this),this},copy:function(t){return this.set(t.x,t.y,t.z,t.order)},setFromQuaternion:function(t,e,i){return void 0===e&&(e=this._order),void 0===i&&(i=!1),r.fromQuat(t),this.setFromRotationMatrix(r,e,i)},setFromRotationMatrix:function(t,e,i){void 0===e&&(e=this._order),void 0===i&&(i=!1);var t=t.val,o=t[0],s=t[4],n=t[8],r=t[1],a=t[5],h=t[9],l=t[2],c=t[6],u=t[10],d=0,p=0,f=0,b=.99999;switch(e){case"XYZ":p=Math.asin(y(n,-1,1)),Math.abs(n)<b?(d=Math.atan2(-h,u),f=Math.atan2(-s,o)):d=Math.atan2(c,a);break;case"YXZ":d=Math.asin(-y(h,-1,1)),Math.abs(h)<b?(p=Math.atan2(n,u),f=Math.atan2(r,a)):p=Math.atan2(-l,o);break;case"ZXY":d=Math.asin(y(c,-1,1)),f=Math.abs(c)<b?(p=Math.atan2(-l,u),Math.atan2(-s,a)):Math.atan2(r,o);break;case"ZYX":p=Math.asin(-y(l,-1,1)),f=Math.abs(l)<b?(d=Math.atan2(c,u),Math.atan2(r,o)):Math.atan2(-s,a);break;case"YZX":f=Math.asin(y(r,-1,1)),p=Math.abs(r)<b?(d=Math.atan2(-h,a),Math.atan2(-l,o)):Math.atan2(n,u);break;case"XZY":f=Math.asin(-y(s,-1,1)),Math.abs(s)<b?(d=Math.atan2(c,a),p=Math.atan2(n,o)):d=Math.atan2(-h,u)}return this._x=d,this._y=p,this._z=f,this._order=e,i&&this.onChangeCallback(this),this}});i.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],i.DefaultOrder="XYZ",t.exports=i},6411:t=>{t.exports=function(t){if(0===t)return 1;for(var e=t;--t;)e*=t;return e}},99472:t=>{t.exports=function(t,e){return Math.random()*(e-t)+t}},77623:t=>{t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=10);i=Math.pow(i,-e);return Math.floor(t*i)/i}},62945:(t,e,i)=>{var o=i(45319);t.exports=function(t,e,i){return(i-e)*(t=o(t,0,1))+e}},38265:t=>{t.exports=function(t,e){return t/e/1e3}},78702:t=>{t.exports=function(t){return t==parseFloat(t)?!(t%2):void 0}},94883:t=>{t.exports=function(t){return t===parseFloat(t)?!(t%2):void 0}},28915:t=>{t.exports=function(t,e,i){return(e-t)*i+t}},94908:t=>{t.exports=function(t,e,i){return void 0===i&&(i=0),t.clone().lerp(e,i)}},94434:(t,e,i)=>{var o=new(i(83419))({initialize:function(t){this.val=new Float32Array(9),t?this.copy(t):this.identity()},clone:function(){return new o(this)},set:function(t){return this.copy(t)},copy:function(t){var e=this.val,t=t.val;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},fromMat4:function(t){var t=t.val,e=this.val;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],this},fromArray:function(t){var e=this.val;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},identity:function(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this},transpose:function(){var t=this.val,e=t[1],i=t[2],o=t[5];return t[1]=t[3],t[2]=t[6],t[3]=e,t[5]=t[7],t[6]=i,t[7]=o,this},invert:function(){var t=this.val,e=t[0],i=t[1],o=t[2],s=t[3],n=t[4],r=t[5],a=t[6],h=t[7],l=t[8],c=l*n-r*h,u=-l*s+r*a,d=h*s-n*a,p=e*c+i*u+o*d;return p?(t[0]=c*(p=1/p),t[1]=(-l*i+o*h)*p,t[2]=(r*i-o*n)*p,t[3]=u*p,t[4]=(l*e-o*a)*p,t[5]=(-r*e+o*s)*p,t[6]=d*p,t[7]=(-h*e+i*a)*p,t[8]=(n*e-i*s)*p,this):null},adjoint:function(){var t=this.val,e=t[0],i=t[1],o=t[2],s=t[3],n=t[4],r=t[5],a=t[6],h=t[7],l=t[8];return t[0]=n*l-r*h,t[1]=o*h-i*l,t[2]=i*r-o*n,t[3]=r*a-s*l,t[4]=e*l-o*a,t[5]=o*s-e*r,t[6]=s*h-n*a,t[7]=i*a-e*h,t[8]=e*n-i*s,this},determinant:function(){var t=this.val,e=t[0],i=t[1],o=t[2],s=t[3],n=t[4],r=t[5],a=t[6],h=t[7],t=t[8];return e*(t*n-r*h)+i*(-t*s+r*a)+o*(h*s-n*a)},multiply:function(t){var e=this.val,i=e[0],o=e[1],s=e[2],n=e[3],r=e[4],a=e[5],h=e[6],l=e[7],c=e[8],t=t.val,u=t[0],d=t[1],p=t[2],f=t[3],b=t[4],y=t[5],m=t[6],x=t[7],t=t[8];return e[0]=u*i+d*n+p*h,e[1]=u*o+d*r+p*l,e[2]=u*s+d*a+p*c,e[3]=f*i+b*n+y*h,e[4]=f*o+b*r+y*l,e[5]=f*s+b*a+y*c,e[6]=m*i+x*n+t*h,e[7]=m*o+x*r+t*l,e[8]=m*s+x*a+t*c,this},translate:function(t){var e=this.val,i=t.x,t=t.y;return e[6]=i*e[0]+t*e[3]+e[6],e[7]=i*e[1]+t*e[4]+e[7],e[8]=i*e[2]+t*e[5]+e[8],this},rotate:function(t){var e=this.val,i=e[0],o=e[1],s=e[2],n=e[3],r=e[4],a=e[5],h=Math.sin(t),t=Math.cos(t);return e[0]=t*i+h*n,e[1]=t*o+h*r,e[2]=t*s+h*a,e[3]=t*n-h*i,e[4]=t*r-h*o,e[5]=t*a-h*s,this},scale:function(t){var e=this.val,i=t.x,t=t.y;return e[0]=i*e[0],e[1]=i*e[1],e[2]=i*e[2],e[3]=t*e[3],e[4]=t*e[4],e[5]=t*e[5],this},fromQuat:function(t){var e=t.x,i=t.y,o=t.z,t=t.w,s=e+e,n=i+i,r=o+o,a=e*s,h=e*n,e=e*r,l=i*n,i=i*r,o=o*r,s=t*s,n=t*n,t=t*r,r=this.val;return r[0]=1-(l+o),r[3]=h+t,r[6]=e-n,r[1]=h-t,r[4]=1-(a+o),r[7]=i+s,r[2]=e+n,r[5]=i-s,r[8]=1-(a+l),this},normalFromMat4:function(t){var t=t.val,e=this.val,i=t[0],o=t[1],s=t[2],n=t[3],r=t[4],a=t[5],h=t[6],l=t[7],c=t[8],u=t[9],d=t[10],p=t[11],f=t[12],b=t[13],y=t[14],t=t[15],m=i*a-o*r,x=i*h-s*r,g=i*l-n*r,v=o*h-s*a,_=o*l-n*a,w=s*l-n*h,S=c*b-u*f,A=c*y-d*f,c=c*t-p*f,C=u*y-d*b,u=u*t-p*b,d=d*t-p*y,p=m*d-x*u+g*C+v*c-_*A+w*S;return p?(e[0]=(a*d-h*u+l*C)*(p=1/p),e[1]=(h*c-r*d-l*A)*p,e[2]=(r*u-a*c+l*S)*p,e[3]=(s*u-o*d-n*C)*p,e[4]=(i*d-s*c+n*A)*p,e[5]=(o*c-i*u-n*S)*p,e[6]=(b*w-y*_+t*v)*p,e[7]=(y*g-f*w-t*x)*p,e[8]=(f*_-b*g+t*m)*p,this):null}});t.exports=o},37867:(t,e,i)=>{var o=i(83419),i=i(25836),s=new o({initialize:function(t){this.val=new Float32Array(16),t?this.copy(t):this.identity()},clone:function(){return new s(this)},set:function(t){return this.copy(t)},setValues:function(t,e,i,o,s,n,r,a,h,l,c,u,d,p,f,b){var y=this.val;return y[0]=t,y[1]=e,y[2]=i,y[3]=o,y[4]=s,y[5]=n,y[6]=r,y[7]=a,y[8]=h,y[9]=l,y[10]=c,y[11]=u,y[12]=d,y[13]=p,y[14]=f,y[15]=b,this},copy:function(t){t=t.val;return this.setValues(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},fromArray:function(t){return this.setValues(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(t,e,i){var i=a.fromQuat(i).val,o=e.x,s=e.y,e=e.z;return this.setValues(i[0]*o,i[1]*o,i[2]*o,0,i[4]*s,i[5]*s,i[6]*s,0,i[8]*e,i[9]*e,i[10]*e,0,t.x,t.y,t.z,1)},xyz:function(t,e,i){this.identity();var o=this.val;return o[12]=t,o[13]=e,o[14]=i,this},scaling:function(t,e,i){this.zero();var o=this.val;return o[0]=t,o[5]=e,o[10]=i,o[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var t=this.val,e=t[1],i=t[2],o=t[3],s=t[6],n=t[7],r=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=e,t[6]=t[9],t[7]=t[13],t[8]=i,t[9]=s,t[11]=t[14],t[12]=o,t[13]=n,t[14]=r,this},getInverse:function(t){return this.copy(t),this.invert()},invert:function(){var t=this.val,e=t[0],i=t[1],o=t[2],s=t[3],n=t[4],r=t[5],a=t[6],h=t[7],l=t[8],c=t[9],u=t[10],d=t[11],p=t[12],f=t[13],b=t[14],t=t[15],y=e*r-i*n,m=e*a-o*n,x=e*h-s*n,g=i*a-o*r,v=i*h-s*r,_=o*h-s*a,w=l*f-c*p,S=l*b-u*p,A=l*t-d*p,C=c*b-u*f,T=c*t-d*f,P=u*t-d*b,B=y*P-m*T+x*C+g*A-v*S+_*w;return B?this.setValues((r*P-a*T+h*C)*(B=1/B),(o*T-i*P-s*C)*B,(f*_-b*v+t*g)*B,(u*v-c*_-d*g)*B,(a*A-n*P-h*S)*B,(e*P-o*A+s*S)*B,(b*x-p*_-t*m)*B,(l*_-u*x+d*m)*B,(n*T-r*A+h*w)*B,(i*A-e*T-s*w)*B,(p*v-f*x+t*y)*B,(c*x-l*v-d*y)*B,(r*S-n*C-a*w)*B,(e*C-i*S+o*w)*B,(f*m-p*g-b*y)*B,(l*g-c*m+u*y)*B):this},adjoint:function(){var t=this.val,e=t[0],i=t[1],o=t[2],s=t[3],n=t[4],r=t[5],a=t[6],h=t[7],l=t[8],c=t[9],u=t[10],d=t[11],p=t[12],f=t[13],b=t[14],t=t[15];return this.setValues(r*(u*t-d*b)-c*(a*t-h*b)+f*(a*d-h*u),-(i*(u*t-d*b)-c*(o*t-s*b)+f*(o*d-s*u)),i*(a*t-h*b)-r*(o*t-s*b)+f*(o*h-s*a),-(i*(a*d-h*u)-r*(o*d-s*u)+c*(o*h-s*a)),-(n*(u*t-d*b)-l*(a*t-h*b)+p*(a*d-h*u)),e*(u*t-d*b)-l*(o*t-s*b)+p*(o*d-s*u),-(e*(a*t-h*b)-n*(o*t-s*b)+p*(o*h-s*a)),e*(a*d-h*u)-n*(o*d-s*u)+l*(o*h-s*a),n*(c*t-d*f)-l*(r*t-h*f)+p*(r*d-h*c),-(e*(c*t-d*f)-l*(i*t-s*f)+p*(i*d-s*c)),e*(r*t-h*f)-n*(i*t-s*f)+p*(i*h-s*r),-(e*(r*d-h*c)-n*(i*d-s*c)+l*(i*h-s*r)),-(n*(c*b-u*f)-l*(r*b-a*f)+p*(r*u-a*c)),e*(c*b-u*f)-l*(i*b-o*f)+p*(i*u-o*c),-(e*(r*b-a*f)-n*(i*b-o*f)+p*(i*a-o*r)),e*(r*u-a*c)-n*(i*u-o*c)+l*(i*a-o*r))},determinant:function(){var t=this.val,e=t[0],i=t[1],o=t[2],s=t[3],n=t[4],r=t[5],a=t[6],h=t[7],l=t[8],c=t[9],u=t[10],d=t[11],p=t[12],f=t[13],b=t[14],t=t[15];return(e*r-i*n)*(u*t-d*b)-(e*a-o*n)*(c*t-d*f)+(e*h-s*n)*(c*b-u*f)+(i*a-o*r)*(l*t-d*p)-(i*h-s*r)*(l*b-u*p)+(o*h-s*a)*(l*f-c*p)},multiply:function(t){var e=this.val,i=e[0],o=e[1],s=e[2],n=e[3],r=e[4],a=e[5],h=e[6],l=e[7],c=e[8],u=e[9],d=e[10],p=e[11],f=e[12],b=e[13],y=e[14],m=e[15],t=t.val,x=t[0],g=t[1],v=t[2],_=t[3];return e[0]=x*i+g*r+v*c+_*f,e[1]=x*o+g*a+v*u+_*b,e[2]=x*s+g*h+v*d+_*y,e[3]=x*n+g*l+v*p+_*m,x=t[4],g=t[5],v=t[6],_=t[7],e[4]=x*i+g*r+v*c+_*f,e[5]=x*o+g*a+v*u+_*b,e[6]=x*s+g*h+v*d+_*y,e[7]=x*n+g*l+v*p+_*m,x=t[8],g=t[9],v=t[10],_=t[11],e[8]=x*i+g*r+v*c+_*f,e[9]=x*o+g*a+v*u+_*b,e[10]=x*s+g*h+v*d+_*y,e[11]=x*n+g*l+v*p+_*m,x=t[12],g=t[13],v=t[14],_=t[15],e[12]=x*i+g*r+v*c+_*f,e[13]=x*o+g*a+v*u+_*b,e[14]=x*s+g*h+v*d+_*y,e[15]=x*n+g*l+v*p+_*m,this},multiplyLocal:function(t){var e=this.val,t=t.val;return this.setValues(e[0]*t[0]+e[1]*t[4]+e[2]*t[8]+e[3]*t[12],e[0]*t[1]+e[1]*t[5]+e[2]*t[9]+e[3]*t[13],e[0]*t[2]+e[1]*t[6]+e[2]*t[10]+e[3]*t[14],e[0]*t[3]+e[1]*t[7]+e[2]*t[11]+e[3]*t[15],e[4]*t[0]+e[5]*t[4]+e[6]*t[8]+e[7]*t[12],e[4]*t[1]+e[5]*t[5]+e[6]*t[9]+e[7]*t[13],e[4]*t[2]+e[5]*t[6]+e[6]*t[10]+e[7]*t[14],e[4]*t[3]+e[5]*t[7]+e[6]*t[11]+e[7]*t[15],e[8]*t[0]+e[9]*t[4]+e[10]*t[8]+e[11]*t[12],e[8]*t[1]+e[9]*t[5]+e[10]*t[9]+e[11]*t[13],e[8]*t[2]+e[9]*t[6]+e[10]*t[10]+e[11]*t[14],e[8]*t[3]+e[9]*t[7]+e[10]*t[11]+e[11]*t[15],e[12]*t[0]+e[13]*t[4]+e[14]*t[8]+e[15]*t[12],e[12]*t[1]+e[13]*t[5]+e[14]*t[9]+e[15]*t[13],e[12]*t[2]+e[13]*t[6]+e[14]*t[10]+e[15]*t[14],e[12]*t[3]+e[13]*t[7]+e[14]*t[11]+e[15]*t[15])},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var t=t.val,e=e.val,i=t[0],o=t[4],s=t[8],n=t[12],r=t[1],a=t[5],h=t[9],l=t[13],c=t[2],u=t[6],d=t[10],p=t[14],f=t[3],b=t[7],y=t[11],t=t[15],m=e[0],x=e[4],g=e[8],v=e[12],_=e[1],w=e[5],S=e[9],A=e[13],C=e[2],T=e[6],P=e[10],B=e[14],E=e[3],M=e[7],D=e[11],e=e[15];return this.setValues(i*m+o*_+s*C+n*E,r*m+a*_+h*C+l*E,c*m+u*_+d*C+p*E,f*m+b*_+y*C+t*E,i*x+o*w+s*T+n*M,r*x+a*w+h*T+l*M,c*x+u*w+d*T+p*M,f*x+b*w+y*T+t*M,i*g+o*S+s*P+n*D,r*g+a*S+h*P+l*D,c*g+u*S+d*P+p*D,f*g+b*S+y*P+t*D,i*v+o*A+s*B+n*e,r*v+a*A+h*B+l*e,c*v+u*A+d*B+p*e,f*v+b*A+y*B+t*e)},translate:function(t){return this.translateXYZ(t.x,t.y,t.z)},translateXYZ:function(t,e,i){var o=this.val;return o[12]=o[0]*t+o[4]*e+o[8]*i+o[12],o[13]=o[1]*t+o[5]*e+o[9]*i+o[13],o[14]=o[2]*t+o[6]*e+o[10]*i+o[14],o[15]=o[3]*t+o[7]*e+o[11]*i+o[15],this},scale:function(t){return this.scaleXYZ(t.x,t.y,t.z)},scaleXYZ:function(t,e,i){var o=this.val;return o[0]=o[0]*t,o[1]=o[1]*t,o[2]=o[2]*t,o[3]=o[3]*t,o[4]=o[4]*e,o[5]=o[5]*e,o[6]=o[6]*e,o[7]=o[7]*e,o[8]=o[8]*i,o[9]=o[9]*i,o[10]=o[10]*i,o[11]=o[11]*i,this},makeRotationAxis:function(t,e){var i=Math.cos(e),e=Math.sin(e),o=1-i,s=t.x,n=t.y,t=t.z,r=o*s,a=o*n;return this.setValues(r*s+i,r*n-e*t,r*t+e*n,0,r*n+e*t,a*n+i,a*t-e*s,0,r*t-e*n,a*t+e*s,o*t*t+i,0,0,0,0,1)},rotate:function(t,e){var i=this.val,o=e.x,s=e.y,e=e.z,n=Math.sqrt(o*o+s*s+e*e);if(Math.abs(n)<1e-6)return this;o*=n=1/n,s*=n,e*=n;var n=Math.sin(t),t=Math.cos(t),r=1-t,a=i[0],h=i[1],l=i[2],c=i[3],u=i[4],d=i[5],p=i[6],f=i[7],b=i[8],y=i[9],m=i[10],x=i[11],g=i[12],v=i[13],_=i[14],i=i[15],w=o*o*r+t,S=s*o*r+e*n,A=e*o*r-s*n,C=o*s*r-e*n,T=s*s*r+t,P=e*s*r+o*n,B=o*e*r+s*n,s=s*e*r-o*n,o=e*e*r+t;return this.setValues(a*w+u*S+b*A,h*w+d*S+y*A,l*w+p*S+m*A,c*w+f*S+x*A,a*C+u*T+b*P,h*C+d*T+y*P,l*C+p*T+m*P,c*C+f*T+x*P,a*B+u*s+b*o,h*B+d*s+y*o,l*B+p*s+m*o,c*B+f*s+x*o,g,v,_,i)},rotateX:function(t){var e=this.val,i=Math.sin(t),t=Math.cos(t),o=e[4],s=e[5],n=e[6],r=e[7],a=e[8],h=e[9],l=e[10],c=e[11];return e[4]=o*t+a*i,e[5]=s*t+h*i,e[6]=n*t+l*i,e[7]=r*t+c*i,e[8]=a*t-o*i,e[9]=h*t-s*i,e[10]=l*t-n*i,e[11]=c*t-r*i,this},rotateY:function(t){var e=this.val,i=Math.sin(t),t=Math.cos(t),o=e[0],s=e[1],n=e[2],r=e[3],a=e[8],h=e[9],l=e[10],c=e[11];return e[0]=o*t-a*i,e[1]=s*t-h*i,e[2]=n*t-l*i,e[3]=r*t-c*i,e[8]=o*i+a*t,e[9]=s*i+h*t,e[10]=n*i+l*t,e[11]=r*i+c*t,this},rotateZ:function(t){var e=this.val,i=Math.sin(t),t=Math.cos(t),o=e[0],s=e[1],n=e[2],r=e[3],a=e[4],h=e[5],l=e[6],c=e[7];return e[0]=o*t+a*i,e[1]=s*t+h*i,e[2]=n*t+l*i,e[3]=r*t+c*i,e[4]=a*t-o*i,e[5]=h*t-s*i,e[6]=l*t-n*i,e[7]=c*t-r*i,this},fromRotationTranslation:function(t,e){var i=t.x,o=t.y,s=t.z,t=t.w,n=i+i,r=o+o,a=s+s,h=i*n,l=i*r,i=i*a,c=o*r,o=o*a,s=s*a,n=t*n,r=t*r,t=t*a;return this.setValues(1-(c+s),l+t,i-r,0,l-t,1-(h+s),o+n,0,i+r,o-n,1-(h+c),0,e.x,e.y,e.z,1)},fromQuat:function(t){var e=t.x,i=t.y,o=t.z,t=t.w,s=e+e,n=i+i,r=o+o,a=e*s,h=e*n,e=e*r,l=i*n,i=i*r,o=o*r,s=t*s,n=t*n,t=t*r;return this.setValues(1-(l+o),h+t,e-n,0,h-t,1-(a+o),i+s,0,e+n,i-s,1-(a+l),0,0,0,0,1)},frustum:function(t,e,i,o,s,n){var r=1/(e-t),a=1/(o-i),h=1/(s-n);return this.setValues(2*s*r,0,0,0,0,2*s*a,0,0,(e+t)*r,(o+i)*a,(n+s)*h,-1,0,0,n*s*2*h,0)},perspective:function(t,e,i,o){var t=1/Math.tan(t/2),s=1/(i-o);return this.setValues(t/e,0,0,0,0,t,0,0,0,0,(o+i)*s,-1,0,0,2*o*i*s,0)},perspectiveLH:function(t,e,i,o){return this.setValues(2*i/t,0,0,0,0,2*i/e,0,0,0,0,-o/(i-o),1,0,0,i*o/(i-o),0)},ortho:function(t,e,i,o,s,n){var r=t-e,a=i-o,h=s-n;return this.setValues(-2*(r=0==r?r:1/r),0,0,0,0,-2*(a=0==a?a:1/a),0,0,0,0,2*(h=0==h?h:1/h),0,(t+e)*r,(o+i)*a,(n+s)*h,1)},lookAtRH:function(t,e,i){var o=this.val;return l.subVectors(t,e),0===l.getLengthSquared()&&(l.z=1),l.normalize(),n.crossVectors(i,l),0===n.getLengthSquared()&&(1===Math.abs(i.z)?l.x+=1e-4:l.z+=1e-4,l.normalize(),n.crossVectors(i,l)),n.normalize(),r.crossVectors(l,n),o[0]=n.x,o[1]=n.y,o[2]=n.z,o[4]=r.x,o[5]=r.y,o[6]=r.z,o[8]=l.x,o[9]=l.y,o[10]=l.z,this},lookAt:function(t,e,i){var o,s,n,r,a=t.x,h=t.y,t=t.z,l=i.x,c=i.y,i=i.z,u=e.x,d=e.y,e=e.z;return Math.abs(a-u)<1e-6&&Math.abs(h-d)<1e-6&&Math.abs(t-e)<1e-6?this.identity():(u=a-u,d=h-d,e=t-e,s=c*(e*=o=1/Math.sqrt(u*u+d*d+e*e))-i*(d*=o),i=i*(u*=o)-l*e,l=l*d-c*u,(o=Math.sqrt(s*s+i*i+l*l))?(s*=o=1/o,i*=o,l*=o):l=i=s=0,c=d*l-e*i,n=e*s-u*l,r=u*i-d*s,(o=Math.sqrt(c*c+n*n+r*r))?(c*=o=1/o,n*=o,r*=o):r=n=c=0,this.setValues(s,c,u,0,i,n,d,0,l,r,e,0,-(s*a+i*h+l*t),-(c*a+n*h+r*t),-(u*a+d*h+e*t),1))},yawPitchRoll:function(t,e,i){this.zero(),a.zero(),h.zero();var o=this.val,s=a.val,n=h.val,r=Math.sin(i),i=Math.cos(i);return o[10]=1,o[15]=1,o[0]=i,o[1]=r,o[4]=-r,o[5]=i,r=Math.sin(e),i=Math.cos(e),s[0]=1,s[15]=1,s[5]=i,s[10]=i,s[9]=-r,s[6]=r,r=Math.sin(t),i=Math.cos(t),n[5]=1,n[15]=1,n[0]=i,n[2]=-r,n[8]=r,n[10]=i,this.multiplyLocal(a),this.multiplyLocal(h),this},setWorldMatrix:function(t,e,i,o,s){return this.yawPitchRoll(t.y,t.x,t.z),a.scaling(i.x,i.y,i.z),h.xyz(e.x,e.y,e.z),this.multiplyLocal(a),this.multiplyLocal(h),o&&this.multiplyLocal(o),s&&this.multiplyLocal(s),this},multiplyToMat4:function(t,e){var i=this.val,t=t.val,o=i[0],s=i[1],n=i[2],r=i[3],a=i[4],h=i[5],l=i[6],c=i[7],u=i[8],d=i[9],p=i[10],f=i[11],b=i[12],y=i[13],m=i[14],i=i[15],x=t[0],g=t[1],v=t[2],_=t[3],w=t[4],S=t[5],A=t[6],C=t[7],T=t[8],P=t[9],B=t[10],E=t[11],M=t[12],D=t[13],O=t[14],t=t[15];return e.setValues(x*o+g*a+v*u+_*b,g*s+g*h+v*d+_*y,v*n+g*l+v*p+_*m,_*r+g*c+v*f+_*i,w*o+S*a+A*u+C*b,w*s+S*h+A*d+C*y,w*n+S*l+A*p+C*m,w*r+S*c+A*f+C*i,T*o+P*a+B*u+E*b,T*s+P*h+B*d+E*y,T*n+P*l+B*p+E*m,T*r+P*c+B*f+E*i,M*o+D*a+O*u+t*b,M*s+D*h+O*d+t*y,M*n+D*l+O*p+t*m,M*r+D*c+O*f+t*i)},fromRotationXYTranslation:function(t,e,i){var o=e.x,s=e.y,e=e.z,n=Math.sin(t.x),r=Math.cos(t.x),a=Math.sin(t.y),t=Math.cos(t.y),h=o,l=s,c=e,u=-n,d=0-u*a,p=0-r*a,u=u*t,f=r*t;return i||(h=t*o+a*e,l=d*o+r*s+u*e,c=p*o+n*s+f*e),this.setValues(t,d,p,0,0,r,n,0,a,u,f,0,h,l,c,1)},getMaxScaleOnAxis:function(){var t=this.val,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,t))}}),a=new s,h=new s,n=new i,r=new i,l=new i;t.exports=s},86883:t=>{t.exports=function(t,e,i){return Math.min(t+e,i)}},50040:t=>{t.exports=function(t){var e=t.length;if(0===e)return 0;t.sort(function(t,e){return t-e});var i=Math.floor(e/2);return e%2==0?(t[i]+t[i-1])/2:t[i]}},37204:t=>{t.exports=function(t,e,i){return Math.max(t-e,i)}},65201:t=>{t.exports=function(t,e,i,o){e=(t-e)/((i=void 0===i?e+1:i)-e);return 1<e?void 0!==o?(e=(o-t)/(o-i))<0&&(e=0):e=1:e<0&&(e=0),e}},15746:(t,e,i)=>{var o=i(83419),s=i(94434),n=i(29747),i=i(25836),r=new Int8Array([1,2,0]),a=new Float32Array([0,0,0]),h=new i(1,0,0),l=new i(0,1,0),c=new i,u=new s,i=new o({initialize:function(t,e,i,o){this.onChangeCallback=n,this.set(t,e,i,o)},x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback(this)}},copy:function(t){return this.set(t)},set:function(t,e,i,o,s){return void 0===s&&(s=!0),"object"==typeof t?(this._x=t.x||0,this._y=t.y||0,this._z=t.z||0,this._w=t.w||0):(this._x=t||0,this._y=e||0,this._z=i||0,this._w=o||0),s&&this.onChangeCallback(this),this},add:function(t){return this._x+=t.x,this._y+=t.y,this._z+=t.z,this._w+=t.w,this.onChangeCallback(this),this},subtract:function(t){return this._x-=t.x,this._y-=t.y,this._z-=t.z,this._w-=t.w,this.onChangeCallback(this),this},scale:function(t){return this._x*=t,this._y*=t,this._z*=t,this._w*=t,this.onChangeCallback(this),this},length:function(){var t=this.x,e=this.y,i=this.z,o=this.w;return Math.sqrt(t*t+e*e+i*i+o*o)},lengthSq:function(){var t=this.x,e=this.y,i=this.z,o=this.w;return t*t+e*e+i*i+o*o},normalize:function(){var t=this.x,e=this.y,i=this.z,o=this.w,s=t*t+e*e+i*i+o*o;return 0<s&&(s=1/Math.sqrt(s),this._x=t*s,this._y=e*s,this._z=i*s,this._w=o*s),this.onChangeCallback(this),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,e){var i=this.x,o=this.y,s=this.z,n=this.w;return this.set(i+(e=void 0===e?0:e)*(t.x-i),o+e*(t.y-o),s+e*(t.z-s),n+e*(t.w-n))},rotationTo:function(t,e){var i=t.x*e.x+t.y*e.y+t.z*e.z;return i<-.999999?(c.copy(h).cross(t).length()<1e-6&&c.copy(l).cross(t),c.normalize(),this.setAxisAngle(c,Math.PI)):.999999<i?this.set(0,0,0,1):(c.copy(t).cross(e),this._x=c.x,this._y=c.y,this._z=c.z,this._w=1+i,this.normalize())},setAxes:function(t,e,i){var o=u.val;return o[0]=e.x,o[3]=e.y,o[6]=e.z,o[1]=i.x,o[4]=i.y,o[7]=i.z,o[2]=-t.x,o[5]=-t.y,o[8]=-t.z,this.fromMat3(u).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(t,e){e*=.5;var i=Math.sin(e);return this.set(i*t.x,i*t.y,i*t.z,Math.cos(e))},multiply:function(t){var e=this.x,i=this.y,o=this.z,s=this.w,n=t.x,r=t.y,a=t.z,t=t.w;return this.set(e*t+s*n+i*a-o*r,i*t+s*r+o*n-e*a,o*t+s*a+e*r-i*n,s*t-e*n-i*r-o*a)},slerp:function(t,e){var i,o=this.x,s=this.y,n=this.z,r=this.w,a=t.x,h=t.y,l=t.z,t=t.w,c=o*a+s*h+n*l+r*t,u=(c<0&&(c=-c,a=-a,h=-h,l=-l,t=-t),1-e),d=e;return 1e-6<1-c&&(c=Math.acos(c),i=Math.sin(c),u=Math.sin((1-e)*c)/i,d=Math.sin(e*c)/i),this.set(u*o+d*a,u*s+d*h,u*n+d*l,u*r+d*t)},invert:function(){var t=this.x,e=this.y,i=this.z,o=this.w,s=t*t+e*e+i*i+o*o,s=s?1/s:0;return this.set(-t*s,-e*s,-i*s,o*s)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(t){t*=.5;var e=this.x,i=this.y,o=this.z,s=this.w,n=Math.sin(t),t=Math.cos(t);return this.set(e*t+s*n,i*t+o*n,o*t-i*n,s*t-e*n)},rotateY:function(t){t*=.5;var e=this.x,i=this.y,o=this.z,s=this.w,n=Math.sin(t),t=Math.cos(t);return this.set(e*t-o*n,i*t+s*n,o*t+e*n,s*t-i*n)},rotateZ:function(t){t*=.5;var e=this.x,i=this.y,o=this.z,s=this.w,n=Math.sin(t),t=Math.cos(t);return this.set(e*t+i*n,i*t-e*n,o*t+s*n,s*t-o*n)},calculateW:function(){var t=this.x,e=this.y,i=this.z;return this.w=-Math.sqrt(1-t*t-e*e-i*i),this},setFromEuler:function(t,e){var i=t.x/2,o=t.y/2,s=t.z/2,n=Math.cos(i),r=Math.cos(o),a=Math.cos(s),h=Math.sin(i),l=Math.sin(o),c=Math.sin(s);switch(t.order){case"XYZ":this.set(h*r*a+n*l*c,n*l*a-h*r*c,n*r*c+h*l*a,n*r*a-h*l*c,e);break;case"YXZ":this.set(h*r*a+n*l*c,n*l*a-h*r*c,n*r*c-h*l*a,n*r*a+h*l*c,e);break;case"ZXY":this.set(h*r*a-n*l*c,n*l*a+h*r*c,n*r*c+h*l*a,n*r*a-h*l*c,e);break;case"ZYX":this.set(h*r*a-n*l*c,n*l*a+h*r*c,n*r*c-h*l*a,n*r*a+h*l*c,e);break;case"YZX":this.set(h*r*a+n*l*c,n*l*a+h*r*c,n*r*c-h*l*a,n*r*a-h*l*c,e);break;case"XZY":this.set(h*r*a-n*l*c,n*l*a-h*r*c,n*r*c+h*l*a,n*r*a+h*l*c,e)}return this},setFromRotationMatrix:function(t){var e,t=t.val,i=t[0],o=t[4],s=t[8],n=t[1],r=t[5],a=t[9],h=t[2],l=t[6],t=t[10],c=i+r+t;return 0<c?(e=.5/Math.sqrt(c+1),this.set((l-a)*e,(s-h)*e,(n-o)*e,.25/e)):r<i&&t<i?(e=2*Math.sqrt(1+i-r-t),this.set(.25*e,(o+n)/e,(s+h)/e,(l-a)/e)):t<r?(e=2*Math.sqrt(1+r-i-t),this.set((o+n)/e,.25*e,(a+l)/e,(s-h)/e)):(e=2*Math.sqrt(1+t-i-r),this.set((s+h)/e,(a+l)/e,.25*e,(n-o)/e)),this},fromMat3:function(t){var e,i,o,t=t.val,s=t[0]+t[4]+t[8];return 0<s?(o=Math.sqrt(s+1),this.w=.5*o,this._x=(t[7]-t[5])*(o=.5/o),this._y=(t[2]-t[6])*o,this._z=(t[3]-t[1])*o):(t[4]>t[s=0]&&(s=1),t[8]>t[3*s+s]&&(s=2),e=r[s],i=r[e],o=Math.sqrt(t[3*s+s]-t[3*e+e]-t[3*i+i]+1),a[s]=.5*o,a[e]=(t[3*e+s]+t[3*s+e])*(o=.5/o),a[i]=(t[3*i+s]+t[3*s+i])*o,this._x=a[0],this._y=a[1],this._z=a[2],this._w=(t[3*i+e]-t[3*e+i])*o),this.onChangeCallback(this),this}});t.exports=i},43396:(t,e,i)=>{var o=i(36383);t.exports=function(t){return t*o.RAD_TO_DEG}},74362:t=>{t.exports=function(t,e){void 0===e&&(e=1);var i=2*Math.random()*Math.PI;return t.x=Math.cos(i)*e,t.y=Math.sin(i)*e,t}},60706:t=>{t.exports=function(t,e){void 0===e&&(e=1);var i=2*Math.random()*Math.PI,o=2*Math.random()-1,s=Math.sqrt(1-o*o)*e;return t.x=Math.cos(i)*s,t.y=Math.sin(i)*s,t.z=o*e,t}},67421:t=>{t.exports=function(t,e){return void 0===e&&(e=1),t.x=(2*Math.random()-1)*e,t.y=(2*Math.random()-1)*e,t.z=(2*Math.random()-1)*e,t.w=(2*Math.random()-1)*e,t}},36305:t=>{t.exports=function(t,e){var i=t.x,o=t.y;return t.x=i*Math.cos(e)-o*Math.sin(e),t.y=i*Math.sin(e)+o*Math.cos(e),t}},11520:t=>{t.exports=function(t,e,i,o){var s=Math.cos(o),o=Math.sin(o),n=t.x-e,r=t.y-i;return t.x=n*s-r*o+e,t.y=n*o+r*s+i,t}},1163:t=>{t.exports=function(t,e,i,o,s){o+=Math.atan2(t.y-i,t.x-e);return t.x=e+s*Math.cos(o),t.y=i+s*Math.sin(o),t}},70336:t=>{t.exports=function(t,e,i,o,s){return t.x=e+s*Math.cos(o),t.y=i+s*Math.sin(o),t}},72678:(t,e,i)=>{var o=i(25836),s=i(37867),i=i(15746),n=new s,r=new i,a=new o;t.exports=function(t,e,i){return r.setAxisAngle(e,i),n.fromRotationTranslation(r,a.set(0,0,0)),t.transformMat4(n)}},2284:t=>{t.exports=function(t){return 0<t?Math.ceil(t):Math.floor(t)}},41013:t=>{t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=10);i=Math.pow(i,-e);return Math.round(t*i)/i}},16922:t=>{t.exports=function(t,e,i,o){void 0===e&&(e=1),void 0===i&&(i=1),void 0===o&&(o=1),o*=Math.PI/t;for(var s=[],n=[],r=0;r<t;r++)e+=(i-=e*o)*o,s[r]=i,n[r]=e;return{sin:n,cos:s,length:t}}},7602:t=>{t.exports=function(t,e,i){return t<=e?0:i<=t?1:(t=(t-e)/(i-e))*t*(3-2*t)}},54261:t=>{t.exports=function(t,e,i){return(t=Math.max(0,Math.min(1,(t-e)/(i-e))))*t*t*(t*(6*t-15)+10)}},44408:(t,e,i)=>{var r=i(26099);t.exports=function(t,e,i,o){void 0===o&&(o=new r);var s=0,n=0;return 0<t&&t<=e*i&&(s=e-1<t?t-(n=Math.floor(t/e))*e:t),o.set(s,n)}},85955:(t,e,i)=>{var c=i(26099);t.exports=function(t,e,i,o,s,n,r,a){void 0===a&&(a=new c);var h=Math.sin(s),s=Math.cos(s),l=s*n,n=h*n,h=-h*r,s=s*r,r=1/(l*s+h*-n);return a.x=s*r*t+-h*r*e+(o*h-i*s)*r,a.y=l*r*e+-n*r*t+(-o*l+i*n)*r,a}},26099:(t,e,i)=>{var o=i(83419),s=i(43855),n=new o({initialize:function(t,e){this.x=0,this.y=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0):(void 0===e&&(e=t),this.x=t||0,this.y=e||0)},clone:function(){return new n(this.x,this.y)},copy:function(t){return this.x=t.x||0,this.y=t.y||0,this},setFromObject:function(t){return this.x=t.x||0,this.y=t.y||0,this},set:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setTo:function(t,e){return this.set(t,e)},setToPolar:function(t,e){return null==e&&(e=1),this.x=Math.cos(t)*e,this.y=Math.sin(t)*e,this},equals:function(t){return this.x===t.x&&this.y===t.y},fuzzyEquals:function(t,e){return s(this.x,t.x,e)&&s(this.y,t.y,e)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},setAngle:function(t){return this.setToPolar(t,this.length())},add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(t){var e=t.x-this.x,t=t.y-this.y;return Math.sqrt(e*e+t*t)},distanceSq:function(t){var e=t.x-this.x,t=t.y-this.y;return e*e+t*t},length:function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},setLength:function(t){return this.normalize().scale(t)},lengthSq:function(){var t=this.x,e=this.y;return t*t+e*e},normalize:function(){var t=this.x,e=this.y,i=t*t+e*e;return 0<i&&(i=1/Math.sqrt(i),this.x=t*i,this.y=e*i),this},normalizeRightHand:function(){var t=this.x;return this.x=-1*this.y,this.y=t,this},normalizeLeftHand:function(){var t=this.x;return this.x=this.y,this.y=-1*t,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lerp:function(t,e){var i=this.x,o=this.y;return this.x=i+(e=void 0===e?0:e)*(t.x-i),this.y=o+e*(t.y-o),this},transformMat3:function(t){var e=this.x,i=this.y,t=t.val;return this.x=t[0]*e+t[3]*i+t[6],this.y=t[1]*e+t[4]*i+t[7],this},transformMat4:function(t){var e=this.x,i=this.y,t=t.val;return this.x=t[0]*e+t[4]*i+t[12],this.y=t[1]*e+t[5]*i+t[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(t){var e=this.length();return e&&t<e&&this.scale(t/e),this},reflect:function(t){return t=t.clone().normalize(),this.subtract(t.scale(2*this.dot(t)))},mirror:function(t){return this.reflect(t).negate()},rotate:function(t){var e=Math.cos(t),t=Math.sin(t);return this.set(e*this.x-t*this.y,t*this.x+e*this.y)},project:function(t){var e=this.dot(t)/t.dot(t);return this.copy(t).scale(e)}});n.ZERO=new n,n.RIGHT=new n(1,0),n.LEFT=new n(-1,0),n.UP=new n(0,-1),n.DOWN=new n(0,1),n.ONE=new n(1,1),t.exports=n},25836:(t,e,i)=>{var o=new(i(83419))({initialize:function(t,e,i){this.x=0,this.y=0,this.z=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=e||0,this.z=i||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clone:function(){return new o(this.x,this.y,this.z)},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},crossVectors:function(t,e){var i=t.x,o=t.y,t=t.z,s=e.x,n=e.y,e=e.z;return this.x=o*e-t*n,this.y=t*s-i*e,this.z=i*n-o*s,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this},set:function(t,e,i){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=e||0,this.z=i||0),this},setFromMatrixPosition:function(t){return this.fromArray(t.val,12)},setFromMatrixColumn:function(t,e){return this.fromArray(t.val,4*e)},fromArray:function(t,e){return this.x=t[e=void 0===e?0:e],this.y=t[e+1],this.z=t[e+2],this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addScale:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(t){var e=t.x-this.x,i=t.y-this.y,t=t.z-this.z||0;return Math.sqrt(e*e+i*i+t*t)},distanceSq:function(t){var e=t.x-this.x,i=t.y-this.y,t=t.z-this.z||0;return e*e+i*i+t*t},length:function(){var t=this.x,e=this.y,i=this.z;return Math.sqrt(t*t+e*e+i*i)},lengthSq:function(){var t=this.x,e=this.y,i=this.z;return t*t+e*e+i*i},normalize:function(){var t=this.x,e=this.y,i=this.z,o=t*t+e*e+i*i;return 0<o&&(o=1/Math.sqrt(o),this.x=t*o,this.y=e*o,this.z=i*o),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function(t){var e=this.x,i=this.y,o=this.z,s=t.x,n=t.y,t=t.z;return this.x=i*t-o*n,this.y=o*s-e*t,this.z=e*n-i*s,this},lerp:function(t,e){var i=this.x,o=this.y,s=this.z;return this.x=i+(e=void 0===e?0:e)*(t.x-i),this.y=o+e*(t.y-o),this.z=s+e*(t.z-s),this},applyMatrix3:function(t){var e=this.x,i=this.y,o=this.z,t=t.val;return this.x=t[0]*e+t[3]*i+t[6]*o,this.y=t[1]*e+t[4]*i+t[7]*o,this.z=t[2]*e+t[5]*i+t[8]*o,this},applyMatrix4:function(t){var e=this.x,i=this.y,o=this.z,t=t.val,s=1/(t[3]*e+t[7]*i+t[11]*o+t[15]);return this.x=(t[0]*e+t[4]*i+t[8]*o+t[12])*s,this.y=(t[1]*e+t[5]*i+t[9]*o+t[13])*s,this.z=(t[2]*e+t[6]*i+t[10]*o+t[14])*s,this},transformMat3:function(t){var e=this.x,i=this.y,o=this.z,t=t.val;return this.x=e*t[0]+i*t[3]+o*t[6],this.y=e*t[1]+i*t[4]+o*t[7],this.z=e*t[2]+i*t[5]+o*t[8],this},transformMat4:function(t){var e=this.x,i=this.y,o=this.z,t=t.val;return this.x=t[0]*e+t[4]*i+t[8]*o+t[12],this.y=t[1]*e+t[5]*i+t[9]*o+t[13],this.z=t[2]*e+t[6]*i+t[10]*o+t[14],this},transformCoordinates:function(t){var e=this.x,i=this.y,o=this.z,t=t.val,s=e*t[0]+i*t[4]+o*t[8]+t[12],n=e*t[1]+i*t[5]+o*t[9]+t[13],r=e*t[2]+i*t[6]+o*t[10]+t[14],e=e*t[3]+i*t[7]+o*t[11]+t[15];return this.x=s/e,this.y=n/e,this.z=r/e,this},transformQuat:function(t){var e=this.x,i=this.y,o=this.z,s=t.x,n=t.y,r=t.z,t=t.w,a=t*e+n*o-r*i,h=t*i+r*e-s*o,l=t*o+s*i-n*e,e=-s*e-n*i-r*o;return this.x=a*t+e*-s+h*-r-l*-n,this.y=h*t+e*-n+l*-s-a*-r,this.z=l*t+e*-r+a*-n-h*-s,this},project:function(t){var e=this.x,i=this.y,o=this.z,t=t.val,s=t[0],n=t[1],r=t[2],a=t[3],h=t[4],l=t[5],c=t[6],u=t[7],d=t[8],p=t[9],f=t[10],b=t[11],y=t[12],m=t[13],x=t[14],a=1/(e*a+i*u+o*b+t[15]);return this.x=(e*s+i*h+o*d+y)*a,this.y=(e*n+i*l+o*p+m)*a,this.z=(e*r+i*c+o*f+x)*a,this},projectViewMatrix:function(t,e){return this.applyMatrix4(t).applyMatrix4(e)},unprojectViewMatrix:function(t,e){return this.applyMatrix4(t).applyMatrix4(e)},unproject:function(t,e){var i=t.x,o=t.y,s=t.z,t=t.w,i=this.x-i,o=t-this.y-1-o,n=this.z;return this.x=2*i/s-1,this.y=2*o/t-1,this.z=2*n-1,this.project(e)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});o.ZERO=new o,o.RIGHT=new o(1,0,0),o.LEFT=new o(-1,0,0),o.UP=new o(0,-1,0),o.DOWN=new o(0,1,0),o.FORWARD=new o(0,0,1),o.BACK=new o(0,0,-1),o.ONE=new o(1,1,1),t.exports=o},61369:(t,e,i)=>{var o=new(i(83419))({initialize:function(t,e,i,o){this.x=0,this.y=0,this.z=0,this.w=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=e||0,this.z=i||0,this.w=o||0)},clone:function(){return new o(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this.w=t.w||0,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},set:function(t,e,i,o){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=e||0,this.z=i||0,this.w=o||0),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this.w+=t.w||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this.w-=t.w||0,this},scale:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function(){var t=this.x,e=this.y,i=this.z,o=this.w;return Math.sqrt(t*t+e*e+i*i+o*o)},lengthSq:function(){var t=this.x,e=this.y,i=this.z,o=this.w;return t*t+e*e+i*i+o*o},normalize:function(){var t=this.x,e=this.y,i=this.z,o=this.w,s=t*t+e*e+i*i+o*o;return 0<s&&(s=1/Math.sqrt(s),this.x=t*s,this.y=e*s,this.z=i*s,this.w=o*s),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,e){var i=this.x,o=this.y,s=this.z,n=this.w;return this.x=i+(e=void 0===e?0:e)*(t.x-i),this.y=o+e*(t.y-o),this.z=s+e*(t.z-s),this.w=n+e*(t.w-n),this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this.w*=t.w||1,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this.w/=t.w||1,this},distance:function(t){var e=t.x-this.x,i=t.y-this.y,o=t.z-this.z||0,t=t.w-this.w||0;return Math.sqrt(e*e+i*i+o*o+t*t)},distanceSq:function(t){var e=t.x-this.x,i=t.y-this.y,o=t.z-this.z||0,t=t.w-this.w||0;return e*e+i*i+o*o+t*t},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(t){var e=this.x,i=this.y,o=this.z,s=this.w,t=t.val;return this.x=t[0]*e+t[4]*i+t[8]*o+t[12]*s,this.y=t[1]*e+t[5]*i+t[9]*o+t[13]*s,this.z=t[2]*e+t[6]*i+t[10]*o+t[14]*s,this.w=t[3]*e+t[7]*i+t[11]*o+t[15]*s,this},transformQuat:function(t){var e=this.x,i=this.y,o=this.z,s=t.x,n=t.y,r=t.z,t=t.w,a=t*e+n*o-r*i,h=t*i+r*e-s*o,l=t*o+s*i-n*e,e=-s*e-n*i-r*o;return this.x=a*t+e*-s+h*-r-l*-n,this.y=h*t+e*-n+l*-s-a*-r,this.z=l*t+e*-r+a*-n-h*-s,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});o.prototype.sub=o.prototype.subtract,o.prototype.mul=o.prototype.multiply,o.prototype.div=o.prototype.divide,o.prototype.dist=o.prototype.distance,o.prototype.distSq=o.prototype.distanceSq,o.prototype.len=o.prototype.length,o.prototype.lenSq=o.prototype.lengthSq,t.exports=o},60417:t=>{t.exports=function(t,e,i){return Math.abs(t-e)<=i}},15994:t=>{t.exports=function(t,e,i){i-=e;return e+((t-e)%i+i)%i}},31040:t=>{t.exports=function(t,e,i,o){return Math.atan2(o-e,i-t)}},55495:t=>{t.exports=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}},128:t=>{t.exports=function(t,e){return Math.atan2(e.x-t.x,e.y-t.y)}},41273:t=>{t.exports=function(t,e,i,o){return Math.atan2(i-t,o-e)}},1432:(t,e,i)=>{var o=i(36383);t.exports=function(t){return t>Math.PI&&(t-=o.PI2),Math.abs(((t+o.TAU)%o.PI2-o.PI2)%o.PI2)}},12407:t=>{t.exports=function(t){return 0<=(t%=2*Math.PI)?t:t+2*Math.PI}},53993:(t,e,i)=>{var o=i(99472);t.exports=function(){return o(-Math.PI,Math.PI)}},86564:(t,e,i)=>{var o=i(99472);t.exports=function(){return o(-180,180)}},90154:(t,e,i)=>{var o=i(12407);t.exports=function(t){return o(t+Math.PI)}},48736:(t,e,i)=>{var o=i(36383);t.exports=function(t,e,i){return void 0===i&&(i=.05),t!==e&&(Math.abs(e-t)<=i||Math.abs(e-t)>=o.PI2-i?t=e:(Math.abs(e-t)>Math.PI&&(e<t?e+=o.PI2:e-=o.PI2),t<e?t+=i:e<t&&(t-=i))),t}},61430:t=>{t.exports=function(t,e){e-=t;return 0==e?0:e-360*Math.floor((e+180)/360)}},86554:(t,e,i)=>{var o=i(15994);t.exports=function(t){return o(t,-Math.PI,Math.PI)}},30954:(t,e,i)=>{var o=i(15994);t.exports=function(t){return o(t,-180,180)}},25588:(t,e,i)=>{t.exports={Between:i(31040),BetweenPoints:i(55495),BetweenPointsY:i(128),BetweenY:i(41273),CounterClockwise:i(1432),Normalize:i(12407),Random:i(53993),RandomDegrees:i(86564),Reverse:i(90154),RotateTo:i(48736),ShortestBetween:i(61430),Wrap:i(86554),WrapDegrees:i(30954)}},36383:t=>{var e={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};t.exports=e},20339:t=>{t.exports=function(t,e,i,o){t-=i,i=e-o;return Math.sqrt(t*t+i*i)}},52816:t=>{t.exports=function(t,e){var i=t.x-e.x,t=t.y-e.y;return Math.sqrt(i*i+t*t)}},64559:t=>{t.exports=function(t,e){var i=t.x-e.x,t=t.y-e.y;return i*i+t*t}},82340:t=>{t.exports=function(t,e,i,o){return Math.max(Math.abs(t-i),Math.abs(e-o))}},14390:t=>{t.exports=function(t,e,i,o,s){return void 0===s&&(s=2),Math.sqrt(Math.pow(i-t,s)+Math.pow(o-e,s))}},2243:t=>{t.exports=function(t,e,i,o){return Math.abs(t-i)+Math.abs(e-o)}},89774:t=>{t.exports=function(t,e,i,o){t-=i,i=e-o;return t*t+i*i}},50994:(t,e,i)=>{t.exports={Between:i(20339),BetweenPoints:i(52816),BetweenPointsSquared:i(64559),Chebyshev:i(82340),Power:i(14390),Snake:i(2243),Squared:i(89774)}},62640:(t,e,i)=>{var o=i(54178),s=i(41521),n=i(79980),r=i(85433),a=i(99140),h=i(48857),l=i(81596),c=i(59133),u=i(98516),d=i(35248),p=i(82500),i=i(49752);t.exports={Power0:l,Power1:c.Out,Power2:r.Out,Power3:u.Out,Power4:d.Out,Linear:l,Quad:c.Out,Cubic:r.Out,Quart:u.Out,Quint:d.Out,Sine:p.Out,Expo:h.Out,Circ:n.Out,Elastic:a.Out,Back:o.Out,Bounce:s.Out,Stepped:i,"Quad.easeIn":c.In,"Cubic.easeIn":r.In,"Quart.easeIn":u.In,"Quint.easeIn":d.In,"Sine.easeIn":p.In,"Expo.easeIn":h.In,"Circ.easeIn":n.In,"Elastic.easeIn":a.In,"Back.easeIn":o.In,"Bounce.easeIn":s.In,"Quad.easeOut":c.Out,"Cubic.easeOut":r.Out,"Quart.easeOut":u.Out,"Quint.easeOut":d.Out,"Sine.easeOut":p.Out,"Expo.easeOut":h.Out,"Circ.easeOut":n.Out,"Elastic.easeOut":a.Out,"Back.easeOut":o.Out,"Bounce.easeOut":s.Out,"Quad.easeInOut":c.InOut,"Cubic.easeInOut":r.InOut,"Quart.easeInOut":u.InOut,"Quint.easeInOut":d.InOut,"Sine.easeInOut":p.InOut,"Expo.easeInOut":h.InOut,"Circ.easeInOut":n.InOut,"Elastic.easeInOut":a.InOut,"Back.easeInOut":o.InOut,"Bounce.easeInOut":s.InOut}},1639:t=>{t.exports=function(t,e){return t*t*(((e=void 0===e?1.70158:e)+1)*t-e)}},50099:t=>{t.exports=function(t,e){e=1.525*(e=void 0===e?1.70158:e);return(t*=2)<1?t*t*((1+e)*t-e)*.5:.5*((t-=2)*t*((1+e)*t+e)+2)}},41286:t=>{t.exports=function(t,e){return--t*t*(((e=void 0===e?1.70158:e)+1)*t+e)+1}},54178:(t,e,i)=>{t.exports={In:i(1639),Out:i(41286),InOut:i(50099)}},59590:t=>{t.exports=function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}},41788:t=>{t.exports=function(t){var e=!1;return t<.5?(t=1-2*t,e=!0):t=2*t-1,t<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5}},69905:t=>{t.exports=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},41521:(t,e,i)=>{t.exports={In:i(59590),Out:i(69905),InOut:i(41788)}},91861:t=>{t.exports=function(t){return 1-Math.sqrt(1-t*t)}},4177:t=>{t.exports=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},57512:t=>{t.exports=function(t){return Math.sqrt(1- --t*t)}},79980:(t,e,i)=>{t.exports={In:i(91861),Out:i(57512),InOut:i(4177)}},51150:t=>{t.exports=function(t){return t*t*t}},82820:t=>{t.exports=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},35033:t=>{t.exports=function(t){return--t*t*t+1}},85433:(t,e,i)=>{t.exports={In:i(51150),Out:i(35033),InOut:i(82820)}},69965:t=>{t.exports=function(t,e,i){var o;return void 0===e&&(e=.1),void 0===i&&(i=.1),0===t?0:1===t?1:(o=i/4,e<1?e=1:o=i*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*--t)*Math.sin((t-o)*(2*Math.PI)/i))}},50665:t=>{t.exports=function(t,e,i){var o;return void 0===e&&(e=.1),void 0===i&&(i=.1),0===t?0:1===t?1:(o=i/4,e<1?e=1:o=i*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*--t)*Math.sin((t-o)*(2*Math.PI)/i)*-.5:e*Math.pow(2,-10*--t)*Math.sin((t-o)*(2*Math.PI)/i)*.5+1)}},7744:t=>{t.exports=function(t,e,i){var o;return void 0===e&&(e=.1),void 0===i&&(i=.1),0===t?0:1===t?1:(o=i/4,e<1?e=1:o=i*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-o)*(2*Math.PI)/i)+1)}},99140:(t,e,i)=>{t.exports={In:i(69965),Out:i(7744),InOut:i(50665)}},24590:t=>{t.exports=function(t){return Math.pow(2,10*(t-1))-.001}},87844:t=>{t.exports=function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}},89433:t=>{t.exports=function(t){return 1-Math.pow(2,-10*t)}},48857:(t,e,i)=>{t.exports={In:i(24590),Out:i(89433),InOut:i(87844)}},48820:(t,e,i)=>{t.exports={Back:i(54178),Bounce:i(41521),Circular:i(79980),Cubic:i(85433),Elastic:i(99140),Expo:i(48857),Linear:i(81596),Quadratic:i(59133),Quartic:i(98516),Quintic:i(35248),Sine:i(82500),Stepped:i(49752)}},7147:t=>{t.exports=function(t){return t}},81596:(t,e,i)=>{t.exports=i(7147)},34826:t=>{t.exports=function(t){return t*t}},20544:t=>{t.exports=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},92029:t=>{t.exports=function(t){return t*(2-t)}},59133:(t,e,i)=>{t.exports={In:i(34826),Out:i(92029),InOut:i(20544)}},64413:t=>{t.exports=function(t){return t*t*t*t}},78137:t=>{t.exports=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},45840:t=>{t.exports=function(t){return 1- --t*t*t*t}},98516:(t,e,i)=>{t.exports={In:i(64413),Out:i(45840),InOut:i(78137)}},87745:t=>{t.exports=function(t){return t*t*t*t*t}},16509:t=>{t.exports=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},17868:t=>{t.exports=function(t){return--t*t*t*t*t+1}},35248:(t,e,i)=>{t.exports={In:i(87745),Out:i(17868),InOut:i(16509)}},80461:t=>{t.exports=function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)}},34025:t=>{t.exports=function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))}},52768:t=>{t.exports=function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)}},82500:(t,e,i)=>{t.exports={In:i(80461),Out:i(52768),InOut:i(34025)}},72251:t=>{t.exports=function(t,e){return void 0===e&&(e=1),t<=0?0:1<=t?1:1/e*(1+(e*t|0))}},49752:(t,e,i)=>{t.exports=i(72251)},75698:t=>{t.exports=function(t,e){return void 0===e&&(e=1e-4),Math.ceil(t-e)}},43855:t=>{t.exports=function(t,e,i){return void 0===i&&(i=1e-4),Math.abs(t-e)<i}},25777:t=>{t.exports=function(t,e){return void 0===e&&(e=1e-4),Math.floor(t+e)}},5470:t=>{t.exports=function(t,e,i){return e-(i=void 0===i?1e-4:i)<t}},94977:t=>{t.exports=function(t,e,i){return t<e+(i=void 0===i?1e-4:i)}},48379:(t,e,i)=>{t.exports={Ceil:i(75698),Equal:i(43855),Floor:i(25777),GreaterThan:i(5470),LessThan:i(94977)}},75508:(t,e,i)=>{var o=i(36383),i=i(79291)(!1,{Angle:i(25588),Distance:i(50994),Easing:i(48820),Fuzzy:i(48379),Interpolation:i(38289),Pow2:i(49001),Snap:i(73697),RandomDataGenerator:i(28453),Average:i(53307),Bernstein:i(85710),Between:i(30976),CatmullRom:i(87842),CeilTo:i(26302),Clamp:i(45319),DegToRad:i(39506),Difference:i(61241),Euler:i(38857),Factorial:i(6411),FloatBetween:i(99472),FloorTo:i(77623),FromPercent:i(62945),GetSpeed:i(38265),IsEven:i(78702),IsEvenStrict:i(94883),Linear:i(28915),LinearXY:i(94908),MaxAdd:i(86883),Median:i(50040),MinSub:i(37204),Percent:i(65201),RadToDeg:i(43396),RandomXY:i(74362),RandomXYZ:i(60706),RandomXYZW:i(67421),Rotate:i(36305),RotateAround:i(11520),RotateAroundDistance:i(1163),RotateTo:i(70336),RoundAwayFromZero:i(2284),RoundTo:i(41013),SinCosTableGenerator:i(16922),SmootherStep:i(54261),SmoothStep:i(7602),ToXY:i(44408),TransformXY:i(85955),Within:i(60417),Wrap:i(15994),Vector2:i(26099),Vector3:i(25836),Vector4:i(61369),Matrix3:i(94434),Matrix4:i(37867),Quaternion:i(15746),RotateVec3:i(72678)},o);t.exports=i},89318:(t,e,i)=>{var n=i(85710);t.exports=function(t,e){for(var i=0,o=t.length-1,s=0;s<=o;s++)i+=Math.pow(1-e,o-s)*Math.pow(e,s)*t[s]*n(o,s);return i}},77259:(t,e,i)=>{var n=i(87842);t.exports=function(t,e){var i=t.length-1,o=i*e,s=Math.floor(o);return t[0]===t[i]?(e<0&&(s=Math.floor(o=i*(1+e))),n(o-s,t[(s-1+i)%i],t[s],t[(s+1)%i],t[(s+2)%i])):e<0?t[0]-(n(-o,t[0],t[0],t[1],t[1])-t[0]):1<e?t[i]-(n(o-i,t[i],t[i],t[i-1],t[i-1])-t[i]):n(o-s,t[s?s-1:0],t[s],t[i<s+1?i:s+1],t[i<s+2?i:s+2])}},36316:t=>{t.exports=function(t,e,i,o,s){return(n=1-t)*n*n*e+3*(n=1-t)*n*t*i+3*(1-t)*t*t*o+t*t*t*s;var n}},28392:(t,e,i)=>{var n=i(28915);t.exports=function(t,e){var i=t.length-1,o=i*e,s=Math.floor(o);return e<0?n(t[0],t[1],o):1<e?n(t[i],t[i-1],i-o):n(t[s],t[i<s+1?i:s+1],o-s)}},32112:t=>{t.exports=function(t,e,i,o){return(s=1-t)*s*e+2*(1-t)*t*i+t*t*o;var s}},47235:(t,e,i)=>{var o=i(7602);t.exports=function(t,e,i){return e+(i-e)*o(t,0,1)}},50178:(t,e,i)=>{var o=i(54261);t.exports=function(t,e,i){return e+(i-e)*o(t,0,1)}},38289:(t,e,i)=>{t.exports={Bezier:i(89318),CatmullRom:i(77259),CubicBezier:i(36316),Linear:i(28392),QuadraticBezier:i(32112),SmoothStep:i(47235),SmootherStep:i(50178)}},98439:t=>{t.exports=function(t){t=Math.log(t)/.6931471805599453;return 1<<Math.ceil(t)}},50030:t=>{t.exports=function(t,e){return 0<t&&0==(t&t-1)&&0<e&&0==(e&e-1)}},81230:t=>{t.exports=function(t){return 0<t&&0==(t&t-1)}},49001:(t,e,i)=>{t.exports={GetNext:i(98439),IsSize:i(50030),IsValue:i(81230)}},28453:(t,e,i)=>{i=new(i(83419))({initialize:function(t){void 0===t&&(t=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],t&&this.init(t)},rnd:function(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},hash:function(t){var e,i=this.n;t=t.toString();for(var o=0;o<t.length;o++)i=(e=((e=.02519603282416938*(i+=t.charCodeAt(o)))-(i=e>>>0))*i)>>>0,i+=4294967296*(e-=i);return 2.3283064365386963e-10*((this.n=i)>>>0)},init:function(t){"string"==typeof t?this.state(t):this.sow(t)},sow:function(t){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,t)for(var e=0;e<t.length&&null!=t[e];e++){var i=t[e];this.s0-=this.hash(i),this.s0+=~~(this.s0<0),this.s1-=this.hash(i),this.s1+=~~(this.s1<0),this.s2-=this.hash(i),this.s2+=~~(this.s2<0)}},integer:function(){return 4294967296*this.rnd()},frac:function(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(t,e){return Math.floor(this.realInRange(0,e-t+1)+t)},between:function(t,e){return Math.floor(this.realInRange(0,e-t+1)+t)},realInRange:function(t,e){return this.frac()*(e-t)+t},normal:function(){return 1-2*this.frac()},uuid:function(){for(var t="",e="",e=t="";t++<36;e+=~t%5|3*t&4?(15^t?8^this.frac()*(20^t?16:4):4).toString(16):"-");return e},pick:function(t){return t[this.integerInRange(0,t.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(t){return t[~~(Math.pow(this.frac(),2)*(t.length-.5)+.5)]},timestamp:function(t,e){return this.realInRange(t||9466848e5,e||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(t){return"string"==typeof t&&t.match(/^!rnd/)&&(t=t.split(","),this.c=parseFloat(t[1]),this.s0=parseFloat(t[2]),this.s1=parseFloat(t[3]),this.s2=parseFloat(t[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(t){for(var e=t.length-1;0<e;e--){var i=Math.floor(this.frac()*(e+1)),o=t[i];t[i]=t[e],t[e]=o}return t}});t.exports=i},63448:t=>{t.exports=function(t,e,i,o){return void 0===i&&(i=0),0===e?t:(t-=i,t=e*Math.ceil(t/e),o?(i+t)/e:i+t)}},56583:t=>{t.exports=function(t,e,i,o){return void 0===i&&(i=0),0===e?t:(t-=i,t=e*Math.floor(t/e),o?(i+t)/e:i+t)}},77720:t=>{t.exports=function(t,e,i,o){return void 0===i&&(i=0),0===e?t:(t-=i,t=e*Math.round(t/e),o?(i+t)/e:i+t)}},73697:(t,e,i)=>{t.exports={Ceil:i(63448),Floor:i(56583),To:i(77720)}},85454:(t,e,i)=>{i(63595);var o=i(8054),s=i(79291),n={Actions:i(61061),Animations:i(60421),BlendModes:i(10312),Cache:i(83388),Cameras:i(26638),Core:i(42857),Class:i(83419),Create:i(15822),Curves:i(25410),Data:i(44965),Display:i(27460),DOM:i(84902),Events:i(93055),FX:i(66064),Game:i(50127),GameObjects:i(77856),Geom:i(55738),Input:i(14350),Loader:i(57777),Math:i(75508),Physics:i(44563),Plugins:i(18922),Renderer:i(36909),Scale:i(93364),ScaleModes:i(29795),Scene:i(97482),Scenes:i(62194),Structs:i(41392),Textures:i(27458),Tilemaps:i(62501),Time:i(90291),Tweens:i(43066),Utils:i(91799)};n.Sound=i(23717),n=s(!1,n,o),t.exports=n,i.g.Phaser=n},71289:(t,e,i)=>{var o=i(83419),s=i(92209),n=i(88571),i=new o({Extends:n,Mixins:[s.Acceleration,s.Angular,s.Bounce,s.Collision,s.Debug,s.Drag,s.Enable,s.Friction,s.Gravity,s.Immovable,s.Mass,s.Pushable,s.Size,s.Velocity],initialize:function(t,e,i,o,s){n.call(this,t,e,i,o,s),this.body=null}});t.exports=i},86689:(t,e,i)=>{var o=i(83419),s=i(39506),r=i(20339),c=i(89774),n=i(66022),a=i(95540),h=i(46975),l=i(72441),u=i(47956),d=i(37277),p=i(44594),f=i(26099),b=i(82248),i=new o({initialize:function(t){this.scene=t,this.systems=t.sys,this.config=this.getConfig(),this.world,this.add,this._category=1,t.sys.events.once(p.BOOT,this.boot,this),t.sys.events.on(p.START,this.start,this)},boot:function(){this.world=new b(this.scene,this.config),this.add=new n(this.world),this.systems.events.once(p.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new b(this.scene,this.config),this.add=new n(this.world));var t=this.systems.events;a(this.config,"customUpdate",!1)||t.on(p.UPDATE,this.world.update,this.world),t.on(p.POST_UPDATE,this.world.postUpdate,this.world),t.once(p.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(p.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(p.UPDATE,this.world.update,this.world)},getConfig:function(){var t=this.systems.game.config.physics,e=this.systems.settings.physics;return h(a(e,"arcade",{}),a(t,"arcade",{}))},nextCategory:function(){return this._category=this._category<<1,this._category},overlap:function(t,e,i,o,s){return void 0===i&&(i=null),void 0===s&&(s=i),this.world.collideObjects(t,e,i,o=void 0===o?null:o,s,!0)},collide:function(t,e,i,o,s){return void 0===i&&(i=null),void 0===s&&(s=i),this.world.collideObjects(t,e,i,o=void 0===o?null:o,s,!1)},collideTiles:function(t,e,i,o,s){return this.world.collideTiles(t,e,i,o,s)},overlapTiles:function(t,e,i,o,s){return this.world.overlapTiles(t,e,i,o,s)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(t,e,i,o,s,n){void 0===o&&(o=60);i=Math.atan2(i-t.y,e-t.x);return t.body.acceleration.setToPolar(i,o),void 0!==s&&void 0!==n&&t.body.maxVelocity.set(s,n),i},accelerateToObject:function(t,e,i,o,s){return this.accelerateTo(t,e.x,e.y,i,o,s)},closest:function(t,e){e=e||this.world.bodies.entries;for(var i=Number.MAX_VALUE,o=null,s=t.x,n=t.y,r=e.length,a=0;a<r;a++){var h=e[a],l=h.body||h;t!==h&&t!==l&&t!==l.gameObject&&t!==l.center&&(l=c(s,n,l.center.x,l.center.y))<i&&(o=h,i=l)}return o},furthest:function(t,e){e=e||this.world.bodies.entries;for(var i=-1,o=null,s=t.x,n=t.y,r=e.length,a=0;a<r;a++){var h=e[a],l=h.body||h;t!==h&&t!==l&&t!==l.gameObject&&t!==l.center&&i<(l=c(s,n,l.center.x,l.center.y))&&(o=h,i=l)}return o},moveTo:function(t,e,i,o,s){void 0===o&&(o=60),void 0===s&&(s=0);var n=Math.atan2(i-t.y,e-t.x);return 0<s&&(o=r(t.x,t.y,e,i)/(s/1e3)),t.body.velocity.setToPolar(n,o),n},moveToObject:function(t,e,i,o){return this.moveTo(t,e.x,e.y,i,o)},velocityFromAngle:function(t,e,i){return void 0===e&&(e=60),(i=void 0===i?new f:i).setToPolar(s(t),e)},velocityFromRotation:function(t,e,i){return void 0===e&&(e=60),(i=void 0===i?new f:i).setToPolar(t,e)},overlapRect:function(t,e,i,o,s,n){return u(this.world,t,e,i,o,s,n)},overlapCirc:function(t,e,i,o,s){return l(this.world,t,e,i,o,s)},shutdown:function(){var t;this.world&&((t=this.systems.events).off(p.UPDATE,this.world.update,this.world),t.off(p.POST_UPDATE,this.world.postUpdate,this.world),t.off(p.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null,this._category=1)},destroy:function(){this.shutdown(),this.scene.sys.events.off(p.START,this.start,this),this.scene=null,this.systems=null}});d.register("ArcadePhysics",i,"arcadePhysics"),t.exports=i},13759:(t,e,i)=>{var o=i(83419),s=i(92209),n=i(68287),i=new o({Extends:n,Mixins:[s.Acceleration,s.Angular,s.Bounce,s.Collision,s.Debug,s.Drag,s.Enable,s.Friction,s.Gravity,s.Immovable,s.Mass,s.Pushable,s.Size,s.Velocity],initialize:function(t,e,i,o,s){n.call(this,t,e,i,o,s),this.body=null}});t.exports=i},37742:(t,e,i)=>{var o=i(83419),s=i(78389),n=i(37747),r=i(63012),a=i(43396),h=i(87841),l=i(37303),c=i(95829),u=i(26099),i=new o({Mixins:[s],initialize:function(t,e){var i=64,o=64,s=void 0!==e;s&&e.displayWidth&&(i=e.displayWidth,o=e.displayHeight),s||(e={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0}),this.world=t,this.gameObject=s?e:void 0,this.isBody=!0,this.transform={x:e.x,y:e.y,rotation:e.angle,scaleX:e.scaleX,scaleY:e.scaleY,displayOriginX:e.displayOriginX,displayOriginY:e.displayOriginY},this.debugShowBody=t.defaults.debugShowBody,this.debugShowVelocity=t.defaults.debugShowVelocity,this.debugBodyColor=t.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new u,this.position=new u(e.x-e.scaleX*e.displayOriginX,e.y-e.scaleY*e.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=e.angle,this.preRotation=e.angle,this.width=i,this.height=o,this.sourceWidth=i,this.sourceHeight=o,e.frame&&(this.sourceWidth=e.frame.realWidth,this.sourceHeight=e.frame.realHeight),this.halfWidth=Math.abs(i/2),this.halfHeight=Math.abs(o/2),this.center=new u(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new u,this.newVelocity=new u,this.deltaMax=new u,this.acceleration=new u,this.allowDrag=!0,this.drag=new u,this.allowGravity=!0,this.gravity=new u,this.bounce=new u,this.worldBounce=null,this.customBoundsRectangle=t.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new u(1e4,1e4),this.maxSpeed=-1,this.friction=new u(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=n.FACING_NONE,this.immovable=!1,this.pushable=!0,this.slideFactor=new u(1,1),this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=c(!1),this.touching=c(!0),this.wasTouching=c(!0),this.blocked=c(!0),this.syncBounds=!1,this.physicsType=n.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._sx=e.scaleX,this._sy=e.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new h,this.directControl=!1,this.autoFrame=this.position.clone()},updateBounds:function(){var t=this.gameObject,e=this.transform,i=(t.parentContainer?(i=t.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2),e.x=i.tx,e.y=i.ty,e.rotation=a(i.rotation),e.scaleX=i.scaleX,e.scaleY=i.scaleY):(e.x=t.x,e.y=t.y,e.rotation=t.angle,e.scaleX=t.scaleX,e.scaleY=t.scaleY),e.displayOriginX=t.displayOriginX,e.displayOriginY=t.displayOriginY,!1);this.syncBounds?(t=t.getBounds(this._bounds),this.width=t.width,this.height=t.height,i=!0):(t=Math.abs(e.scaleX),e=Math.abs(e.scaleY),this._sx===t&&this._sy===e||(this.width=this.sourceWidth*t,this.height=this.sourceHeight*e,this._sx=t,this._sy=e,i=!0)),i&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var t=this.transform;this.position.x=t.x+t.scaleX*(this.offset.x-t.displayOriginX),this.position.y=t.y+t.scaleY*(this.offset.y-t.displayOriginY),this.updateCenter()},resetFlags:function(t){var e=this.wasTouching,i=this.touching,o=this.blocked;(t=void 0===t?!1:t)?c(!0,e):(e.none=i.none,e.up=i.up,e.down=i.down,e.left=i.left,e.right=i.right),c(!0,i),c(!0,o),this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(t,e){var i;t&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(i=this.position,this.prev.x=i.x,this.prev.y=i.y,this.prevFrame.x=i.x,this.prevFrame.y=i.y),t&&this.update(e)},update:function(t){var e,i=this.prev,o=this.position,s=this.velocity;i.set(o.x,o.y),this.moves?(this.directControl?(e=this.autoFrame,s.set((o.x-e.x)/t,(o.y-e.y)/t),this.world.updateMotion(this,t),this._dx=o.x-e.x,this._dy=o.y-e.y):(this.world.updateMotion(this,t),this.newVelocity.set(s.x*t,s.y*t),o.add(this.newVelocity),this._dx=o.x-i.x,this._dy=o.y-i.y),e=s.x,t=s.y,this.updateCenter(),this.angle=Math.atan2(t,e),this.speed=Math.sqrt(e*e+t*t),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&(s=this.blocked,this.world.emit(r.WORLD_BOUNDS,this,s.up,s.down,s.left,s.right))):(this._dx=o.x-i.x,this._dy=o.y-i.y)},postUpdate:function(){var t,e=this.position,i=e.x-this.prevFrame.x,o=e.y-this.prevFrame.y,s=this.gameObject;this.moves&&(0!==(t=this.deltaMax.x)&&0!==i&&(i<0&&i<-t?i=-t:0<i&&t<i&&(i=t)),0!==(t=this.deltaMax.y)&&0!==o&&(o<0&&o<-t?o=-t:0<o&&t<o&&(o=t)),s)&&(s.x+=i,s.y+=o),i<0?this.facing=n.FACING_LEFT:0<i&&(this.facing=n.FACING_RIGHT),o<0?this.facing=n.FACING_UP:0<o&&(this.facing=n.FACING_DOWN),this.allowRotation&&s&&(s.angle+=this.deltaZ()),this._tx=i,this._ty=o,this.autoFrame.set(e.x,e.y)},setBoundsRectangle:function(t){return this.customBoundsRectangle=t||this.world.bounds,this},checkWorldBounds:function(){var t=this.position,e=this.velocity,i=this.blocked,o=this.customBoundsRectangle,s=this.world.checkCollision,n=this.worldBounce?-this.worldBounce.x:-this.bounce.x,r=this.worldBounce?-this.worldBounce.y:-this.bounce.y,a=!1;return t.x<o.x&&s.left?(t.x=o.x,e.x*=n,a=i.left=!0):this.right>o.right&&s.right&&(t.x=o.right-this.width,e.x*=n,a=i.right=!0),t.y<o.y&&s.up?(t.y=o.y,e.y*=r,a=i.up=!0):this.bottom>o.bottom&&s.down&&(t.y=o.bottom-this.height,e.y*=r,a=i.down=!0),a&&(this.blocked.none=!1,this.updateCenter()),a},setOffset:function(t,e){return this.offset.set(t,e=void 0===e?t:e),this},setGameObject:function(t,e){return void 0===e&&(e=!0),this.world.remove(this),this.gameObject&&this.gameObject.body&&(this.gameObject.body=null),(this.gameObject=t).body&&(t.body=this),this.setSize(),this.world.add(this),this.enable=e,this},setSize:function(t,e,i){void 0===i&&(i=!0);var o=this.gameObject;return o&&(!t&&o.frame&&(t=o.frame.realWidth),!e)&&o.frame&&(e=o.frame.realHeight),this.sourceWidth=t,this.sourceHeight=e,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),i&&o&&o.getCenter&&(i=(o.width-t)/2,t=(o.height-e)/2,this.offset.set(i,t)),this.isCircle=!1,this.radius=0,this},setCircle:function(t,e,i){return void 0===e&&(e=this.offset.x),void 0===i&&(i=this.offset.y),0<t?(this.isCircle=!0,this.radius=t,this.sourceWidth=2*t,this.sourceHeight=2*t,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(e,i),this.updateCenter()):this.isCircle=!1,this},reset:function(t,e){this.stop();var i=this.gameObject,o=(i&&(i.setPosition(t,e),this.rotation=i.angle,this.preRotation=i.angle),this.position);i&&i.getTopLeft?i.getTopLeft(o):o.set(t,e),this.prev.copy(o),this.prevFrame.copy(o),this.autoFrame.copy(o),i&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function(t,e){return this.isCircle?0<this.radius&&t>=this.left&&t<=this.right&&e>=this.top&&e<=this.bottom&&(this.center.x-t)*(this.center.x-t)+(this.center.y-e)*(this.center.y-e)<=this.radius*this.radius:l(this,t,e)},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return 0<this._dx?this._dx:-this._dx},deltaAbsY:function(){return 0<this._dy?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(t){var e=this.position,i=e.x+this.halfWidth,o=e.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(t.defaultStrokeWidth,this.debugBodyColor),this.isCircle?t.strokeCircle(i,o,this.width/2):(this.checkCollision.up&&t.lineBetween(e.x,e.y,e.x+this.width,e.y),this.checkCollision.right&&t.lineBetween(e.x+this.width,e.y,e.x+this.width,e.y+this.height),this.checkCollision.down&&t.lineBetween(e.x,e.y+this.height,e.x+this.width,e.y+this.height),this.checkCollision.left&&t.lineBetween(e.x,e.y,e.x,e.y+this.height))),this.debugShowVelocity&&(t.lineStyle(t.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),t.lineBetween(i,o,i+this.velocity.x/2,o+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setDirectControl:function(t){return this.directControl=t=void 0===t?!0:t,this},setCollideWorldBounds:function(t,e,i,o){this.collideWorldBounds=t=void 0===t?!0:t;var t=void 0!==e,s=void 0!==i;return(t||s)&&(this.worldBounce||(this.worldBounce=new u),t&&(this.worldBounce.x=e),s)&&(this.worldBounce.y=i),void 0!==o&&(this.onWorldBounds=o),this},setVelocity:function(t,e){return this.velocity.set(t,e),t=this.velocity.x,e=this.velocity.y,this.speed=Math.sqrt(t*t+e*e),this},setVelocityX:function(t){return this.setVelocity(t,this.velocity.y)},setVelocityY:function(t){return this.setVelocity(this.velocity.x,t)},setMaxVelocity:function(t,e){return this.maxVelocity.set(t,e),this},setMaxVelocityX:function(t){return this.maxVelocity.x=t,this},setMaxVelocityY:function(t){return this.maxVelocity.y=t,this},setMaxSpeed:function(t){return this.maxSpeed=t,this},setSlideFactor:function(t,e){return this.slideFactor.set(t,e),this},setBounce:function(t,e){return this.bounce.set(t,e),this},setBounceX:function(t){return this.bounce.x=t,this},setBounceY:function(t){return this.bounce.y=t,this},setAcceleration:function(t,e){return this.acceleration.set(t,e),this},setAccelerationX:function(t){return this.acceleration.x=t,this},setAccelerationY:function(t){return this.acceleration.y=t,this},setAllowDrag:function(t){return this.allowDrag=t=void 0===t?!0:t,this},setAllowGravity:function(t){return this.allowGravity=t=void 0===t?!0:t,this},setAllowRotation:function(t){return this.allowRotation=t=void 0===t?!0:t,this},setDrag:function(t,e){return this.drag.set(t,e),this},setDamping:function(t){return this.useDamping=t,this},setDragX:function(t){return this.drag.x=t,this},setDragY:function(t){return this.drag.y=t,this},setGravity:function(t,e){return this.gravity.set(t,e),this},setGravityX:function(t){return this.gravity.x=t,this},setGravityY:function(t){return this.gravity.y=t,this},setFriction:function(t,e){return this.friction.set(t,e),this},setFrictionX:function(t){return this.friction.x=t,this},setFrictionY:function(t){return this.friction.y=t,this},setAngularVelocity:function(t){return this.angularVelocity=t,this},setAngularAcceleration:function(t){return this.angularAcceleration=t,this},setAngularDrag:function(t){return this.angularDrag=t,this},setMass:function(t){return this.mass=t,this},setImmovable:function(t){return this.immovable=t=void 0===t?!0:t,this},setEnable:function(t){return this.enable=t=void 0===t?!0:t,this},processX:function(t,e,i,o){this.x+=t,this.updateCenter(),null!==e&&(this.velocity.x=e*this.slideFactor.x);t=this.blocked;i&&(t.left=!0,t.none=!1),o&&(t.right=!0,t.none=!1)},processY:function(t,e,i,o){this.y+=t,this.updateCenter(),null!==e&&(this.velocity.y=e*this.slideFactor.y);t=this.blocked;i&&(t.up=!0,t.none=!1),o&&(t.down=!0,t.none=!1)},x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});t.exports=i},79342:(t,e,i)=>{i=new(i(83419))({initialize:function(t,e,i,o,s,n,r){this.world=t,this.name="",this.active=!0,this.overlapOnly=e,this.object1=i,this.object2=o,this.collideCallback=s,this.processCallback=n,this.callbackContext=r},setName:function(t){return this.name=t,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});t.exports=i},66022:(t,e,i)=>{var s=i(71289),n=i(13759),r=i(37742),o=i(83419),a=i(37747),h=i(60758),l=i(72624),c=i(71464),i=new o({initialize:function(t){this.world=t,this.scene=t.scene,this.sys=t.scene.sys},collider:function(t,e,i,o,s){return this.world.addCollider(t,e,i,o,s)},overlap:function(t,e,i,o,s){return this.world.addOverlap(t,e,i,o,s)},existing:function(t,e){e=e?a.STATIC_BODY:a.DYNAMIC_BODY;return this.world.enableBody(t,e),t},staticImage:function(t,e,i,o){t=new s(this.scene,t,e,i,o);return this.sys.displayList.add(t),this.world.enableBody(t,a.STATIC_BODY),t},image:function(t,e,i,o){t=new s(this.scene,t,e,i,o);return this.sys.displayList.add(t),this.world.enableBody(t,a.DYNAMIC_BODY),t},staticSprite:function(t,e,i,o){t=new n(this.scene,t,e,i,o);return this.sys.displayList.add(t),this.sys.updateList.add(t),this.world.enableBody(t,a.STATIC_BODY),t},sprite:function(t,e,i,o){t=new n(this.scene,t,e,i,o);return this.sys.displayList.add(t),this.sys.updateList.add(t),this.world.enableBody(t,a.DYNAMIC_BODY),t},staticGroup:function(t,e){return this.sys.updateList.add(new c(this.world,this.world.scene,t,e))},group:function(t,e){return this.sys.updateList.add(new h(this.world,this.world.scene,t,e))},body:function(t,e,i,o){var s=new r(this.world);return s.position.set(t,e),i&&o&&s.setSize(i,o),this.world.add(s,a.DYNAMIC_BODY),s},staticBody:function(t,e,i,o){var s=new l(this.world);return s.position.set(t,e),i&&o&&s.setSize(i,o),this.world.add(s,a.STATIC_BODY),s},destroy:function(){this.world=null,this.scene=null,this.sys=null}});t.exports=i},79599:t=>{t.exports=function(t){var e=0;if(Array.isArray(t))for(var i=0;i<t.length;i++)e|=t[i];else e=t;return e}},64897:(t,e,i)=>{var n=i(37747);t.exports=function(t,e,i,o){var s=0,o=t.deltaAbsX()+e.deltaAbsX()+o;return 0===t._dx&&0===e._dx?(t.embedded=!0,e.embedded=!0):t._dx>e._dx?(s=t.right-e.x)>o&&!i||!1===t.checkCollision.right||!1===e.checkCollision.left?s=0:(t.touching.none=!1,t.touching.right=!0,e.touching.none=!1,e.touching.left=!0,e.physicsType!==n.STATIC_BODY||i||(t.blocked.none=!1,t.blocked.right=!0),t.physicsType!==n.STATIC_BODY||i||(e.blocked.none=!1,e.blocked.left=!0)):t._dx<e._dx&&(-(s=t.x-e.width-e.x)>o&&!i||!1===t.checkCollision.left||!1===e.checkCollision.right?s=0:(t.touching.none=!1,t.touching.left=!0,e.touching.none=!1,e.touching.right=!0,e.physicsType!==n.STATIC_BODY||i||(t.blocked.none=!1,t.blocked.left=!0),t.physicsType!==n.STATIC_BODY||i||(e.blocked.none=!1,e.blocked.right=!0))),t.overlapX=s,e.overlapX=s}},45170:(t,e,i)=>{var n=i(37747);t.exports=function(t,e,i,o){var s=0,o=t.deltaAbsY()+e.deltaAbsY()+o;return 0===t._dy&&0===e._dy?(t.embedded=!0,e.embedded=!0):t._dy>e._dy?(s=t.bottom-e.y)>o&&!i||!1===t.checkCollision.down||!1===e.checkCollision.up?s=0:(t.touching.none=!1,t.touching.down=!0,e.touching.none=!1,e.touching.up=!0,e.physicsType!==n.STATIC_BODY||i||(t.blocked.none=!1,t.blocked.down=!0),t.physicsType!==n.STATIC_BODY||i||(e.blocked.none=!1,e.blocked.up=!0)):t._dy<e._dy&&(-(s=t.y-e.bottom)>o&&!i||!1===t.checkCollision.up||!1===e.checkCollision.down?s=0:(t.touching.none=!1,t.touching.up=!0,e.touching.none=!1,e.touching.down=!0,e.physicsType!==n.STATIC_BODY||i||(t.blocked.none=!1,t.blocked.up=!0),t.physicsType!==n.STATIC_BODY||i||(e.blocked.none=!1,e.blocked.down=!0))),t.overlapY=s,e.overlapY=s}},60758:(t,e,i)=>{var n=i(13759),o=i(83419),s=i(78389),r=i(37747),a=i(95540),h=i(26479),l=i(41212),i=new o({Extends:h,Mixins:[s],initialize:function(t,e,i,o){var s;i||o?l(i)?(o=i,i=null,o.internalCreateCallback=this.createCallbackHandler,o.internalRemoveCallback=this.removeCallbackHandler):o=Array.isArray(i)&&l(i[0])?(s=this,i.forEach(function(t){t.internalCreateCallback=s.createCallbackHandler,t.internalRemoveCallback=s.removeCallbackHandler,t.classType=a(t,"classType",n)}),null):{internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler}:o={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=t,o&&(o.classType=a(o,"classType",n)),this.physicsType=r.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=1,this.defaults={setCollideWorldBounds:a(o,"collideWorldBounds",!1),setBoundsRectangle:a(o,"customBoundsRectangle",null),setAccelerationX:a(o,"accelerationX",0),setAccelerationY:a(o,"accelerationY",0),setAllowDrag:a(o,"allowDrag",!0),setAllowGravity:a(o,"allowGravity",!0),setAllowRotation:a(o,"allowRotation",!0),setDamping:a(o,"useDamping",!1),setBounceX:a(o,"bounceX",0),setBounceY:a(o,"bounceY",0),setDragX:a(o,"dragX",0),setDragY:a(o,"dragY",0),setEnable:a(o,"enable",!0),setGravityX:a(o,"gravityX",0),setGravityY:a(o,"gravityY",0),setFrictionX:a(o,"frictionX",0),setFrictionY:a(o,"frictionY",0),setMaxSpeed:a(o,"maxSpeed",-1),setMaxVelocityX:a(o,"maxVelocityX",1e4),setMaxVelocityY:a(o,"maxVelocityY",1e4),setVelocityX:a(o,"velocityX",0),setVelocityY:a(o,"velocityY",0),setAngularVelocity:a(o,"angularVelocity",0),setAngularAcceleration:a(o,"angularAcceleration",0),setAngularDrag:a(o,"angularDrag",0),setMass:a(o,"mass",1),setImmovable:a(o,"immovable",!1)},h.call(this,e,i,o),this.type="PhysicsGroup"},createCallbackHandler:function(t){t.body||this.world.enableBody(t,r.DYNAMIC_BODY);var e,i=t.body;for(e in this.defaults)i[e](this.defaults[e])},removeCallbackHandler:function(t){t.body&&this.world.disableBody(t)},setVelocity:function(t,e,i){void 0===i&&(i=0);for(var o=this.getChildren(),s=0;s<o.length;s++)o[s].body.velocity.set(t+s*i,e+s*i);return this},setVelocityX:function(t,e){void 0===e&&(e=0);for(var i=this.getChildren(),o=0;o<i.length;o++)i[o].body.velocity.x=t+o*e;return this},setVelocityY:function(t,e){void 0===e&&(e=0);for(var i=this.getChildren(),o=0;o<i.length;o++)i[o].body.velocity.y=t+o*e;return this}});t.exports=i},3017:t=>{function o(){return f&&g&&r.blocked.right?(n.processX(-_,u,!1,!0),1):p&&v&&r.blocked.left?(n.processX(_,u,!0),1):m&&v&&n.blocked.right?(r.processX(-_,d,!1,!0),2):y&&g&&n.blocked.left?(r.processX(_,d,!0),2):0}function s(t){var e;return a&&h?(_*=.5,0===t||3===t?(n.processX(_,l),r.processX(-_,c)):(n.processX(-_,l),r.processX(_,c))):a&&!h?0===t||3===t?n.processX(_,u,!0):n.processX(-_,u,!1,!0):!a&&h?0===t||3===t?r.processX(-_,d,!1,!0):r.processX(_,d,!0):(e=.5*_,0===t?x?(n.processX(_,0,!0),r.processX(0,null,!1,!0)):m?(n.processX(e,0,!0),r.processX(-e,0,!1,!0)):(n.processX(e,r.velocity.x,!0),r.processX(-e,null,!1,!0)):1===t?b?(n.processX(0,null,!1,!0),r.processX(_,0,!0)):f?(n.processX(-e,0,!1,!0),r.processX(e,0,!0)):(n.processX(-e,null,!1,!0),r.processX(e,n.velocity.x,!0)):2===t?x?(n.processX(-_,0,!1,!0),r.processX(0,null,!0)):y?(n.processX(-e,0,!1,!0),r.processX(e,0,!0)):(n.processX(-e,r.velocity.x,!1,!0),r.processX(e,null,!0)):3===t&&(b?(n.processX(0,null,!0),r.processX(-_,0,!1,!0)):p?(n.processX(e,0,!0),r.processX(-e,0,!1,!0)):(n.processX(e,r.velocity.y,!0),r.processX(-e,null,!1,!0)))),!0}var n,r,a,h,l,c,u,d,p,f,b,y,m,x,g,v,_;t.exports={BlockCheck:o,Check:function(){var t=n.velocity.x,e=r.velocity.x,e=Math.sqrt(e*e*r.mass/n.mass)*(0<e?1:-1),t=Math.sqrt(t*t*n.mass/r.mass)*(0<t?1:-1),i=.5*(e+t);return l=i+(e-=i)*n.bounce.x,c=i+(t-=i)*r.bounce.x,p&&v?s(0):y&&g?s(1):f&&g?s(2):!(!m||!v)&&s(3)},Set:function(t,e,i){r=e;e=(n=t).velocity.x,t=r.velocity.x;return a=n.pushable,p=n._dx<0,f=0<n._dx,b=0===n._dx,g=Math.abs(n.right-r.x)<=Math.abs(r.right-n.x),u=t-e*n.bounce.x,h=r.pushable,y=r._dx<0,m=0<r._dx,x=0===r._dx,v=!g,d=e-t*r.bounce.x,_=Math.abs(i),o()},Run:s,RunImmovableBody1:function(t){1===t?r.velocity.x=0:g?r.processX(_,d,!0):r.processX(-_,d,!1,!0),n.moves&&(r.y+=(n.y-n.prev.y)*n.friction.y,r._dy=r.y-r.prev.y)},RunImmovableBody2:function(t){2===t?n.velocity.x=0:v?n.processX(_,u,!0):n.processX(-_,u,!1,!0),r.moves&&(n.y+=(r.y-r.prev.y)*r.friction.y,n._dy=n.y-n.prev.y)}}},47962:t=>{function o(){return f&&g&&r.blocked.down?(n.processY(-_,u,!1,!0),1):p&&v&&r.blocked.up?(n.processY(_,u,!0),1):m&&v&&n.blocked.down?(r.processY(-_,d,!1,!0),2):y&&g&&n.blocked.up?(r.processY(_,d,!0),2):0}function s(t){var e;return a&&h?(_*=.5,0===t||3===t?(n.processY(_,l),r.processY(-_,c)):(n.processY(-_,l),r.processY(_,c))):a&&!h?0===t||3===t?n.processY(_,u,!0):n.processY(-_,u,!1,!0):!a&&h?0===t||3===t?r.processY(-_,d,!1,!0):r.processY(_,d,!0):(e=.5*_,0===t?x?(n.processY(_,0,!0),r.processY(0,null,!1,!0)):m?(n.processY(e,0,!0),r.processY(-e,0,!1,!0)):(n.processY(e,r.velocity.y,!0),r.processY(-e,null,!1,!0)):1===t?b?(n.processY(0,null,!1,!0),r.processY(_,0,!0)):f?(n.processY(-e,0,!1,!0),r.processY(e,0,!0)):(n.processY(-e,null,!1,!0),r.processY(e,n.velocity.y,!0)):2===t?x?(n.processY(-_,0,!1,!0),r.processY(0,null,!0)):y?(n.processY(-e,0,!1,!0),r.processY(e,0,!0)):(n.processY(-e,r.velocity.y,!1,!0),r.processY(e,null,!0)):3===t&&(b?(n.processY(0,null,!0),r.processY(-_,0,!1,!0)):p?(n.processY(e,0,!0),r.processY(-e,0,!1,!0)):(n.processY(e,r.velocity.y,!0),r.processY(-e,null,!1,!0)))),!0}var n,r,a,h,l,c,u,d,p,f,b,y,m,x,g,v,_;t.exports={BlockCheck:o,Check:function(){var t=n.velocity.y,e=r.velocity.y,e=Math.sqrt(e*e*r.mass/n.mass)*(0<e?1:-1),t=Math.sqrt(t*t*n.mass/r.mass)*(0<t?1:-1),i=.5*(e+t);return l=i+(e-=i)*n.bounce.y,c=i+(t-=i)*r.bounce.y,p&&v?s(0):y&&g?s(1):f&&g?s(2):!(!m||!v)&&s(3)},Set:function(t,e,i){r=e;e=(n=t).velocity.y,t=r.velocity.y;return a=n.pushable,p=n._dy<0,f=0<n._dy,b=0===n._dy,g=Math.abs(n.bottom-r.y)<=Math.abs(r.bottom-n.y),u=t-e*n.bounce.y,h=r.pushable,y=r._dy<0,m=0<r._dy,x=0===r._dy,v=!g,d=e-t*r.bounce.y,_=Math.abs(i),o()},Run:s,RunImmovableBody1:function(t){1===t?r.velocity.y=0:g?r.processY(_,d,!0):r.processY(-_,d,!1,!0),n.moves&&(r.x+=(n.x-n.prev.x)*n.friction.x,r._dx=r.x-r.prev.x)},RunImmovableBody2:function(t){2===t?n.velocity.y=0:v?n.processY(_,u,!0):n.processY(-_,u,!1,!0),r.moves&&(n.x+=(r.x-r.prev.x)*r.friction.x,n._dx=n.x-n.prev.x)}}},14087:(t,e,i)=>{var r=i(64897),a=i(3017);t.exports=function(t,e,i,o,s){void 0===s&&(s=r(t,e,i,o));var o=t.immovable,n=e.immovable;return i||0===s||o&&n||t.customSeparateX||e.customSeparateX?0!==s||t.embedded&&e.embedded:(i=a.Set(t,e,s),o||n?(o?a.RunImmovableBody1(i):n&&a.RunImmovableBody2(i),!0):0<i||a.Check())}},89936:(t,e,i)=>{var r=i(45170),a=i(47962);t.exports=function(t,e,i,o,s){void 0===s&&(s=r(t,e,i,o));var o=t.immovable,n=e.immovable;return i||0===s||o&&n||t.customSeparateY||e.customSeparateY?0!==s||t.embedded&&e.embedded:(i=a.Set(t,e,s),o||n?(o?a.RunImmovableBody1(i):n&&a.RunImmovableBody2(i),!0):0<i||a.Check())}},95829:t=>{t.exports=function(t,e){return(e=void 0===e?{}:e).none=t,e.up=!1,e.down=!1,e.left=!1,e.right=!1,t||(e.up=!0,e.down=!0,e.left=!0,e.right=!0),e}},72624:(t,e,i)=>{var o=i(87902),s=i(83419),n=i(78389),r=i(37747),a=i(37303),h=i(95829),l=i(26099),i=new s({Mixins:[n],initialize:function(t,e){var i=64,o=64,s=void 0!==e;s&&e.displayWidth&&(i=e.displayWidth,o=e.displayHeight),s||(e={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0}),this.world=t,this.gameObject=s?e:void 0,this.isBody=!0,this.debugShowBody=t.defaults.debugShowStaticBody,this.debugBodyColor=t.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new l,this.position=new l(e.x-i*e.originX,e.y-o*e.originY),this.width=i,this.height=o,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new l(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=l.ZERO,this.allowGravity=!1,this.gravity=l.ZERO,this.bounce=l.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=h(!1),this.touching=h(!0),this.wasTouching=h(!0),this.blocked=h(!0),this.physicsType=r.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._dx=0,this._dy=0},setGameObject:function(t,e){return t&&t!==this.gameObject&&(this.gameObject.body=null,(t.body=this).gameObject=t),e&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var t=this.gameObject;return t.getTopLeft(this.position),this.width=t.displayWidth,this.height=t.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(t,e){return void 0===e&&(e=t),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(t,e),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(t,e,i){void 0===i&&(i=!0);var o=this.gameObject;return o&&o.frame&&(t=t||o.frame.realWidth,e=e||o.frame.realHeight),this.world.staticTree.remove(this),this.width=t,this.height=e,this.halfWidth=Math.floor(t/2),this.halfHeight=Math.floor(e/2),i&&o&&o.getCenter&&(t=o.displayWidth/2,e=o.displayHeight/2,this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(t-this.halfWidth,e-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y),this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(t,e,i){return void 0===e&&(e=this.offset.x),void 0===i&&(i=this.offset.y),0<t?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=t,this.width=2*t,this.height=2*t,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(e,i),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(t,e){var i=this.gameObject;void 0===t&&(t=i.x),void 0===e&&(e=i.y),this.world.staticTree.remove(this),i.setPosition(t,e),i.getTopLeft(this.position),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function(t,e){return(this.isCircle?o:a)(this,t,e)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(t){var e=this.position,i=e.x+this.halfWidth,o=e.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(t.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?t.strokeCircle(i,o,this.width/2):t.strokeRect(e.x,e.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(t){return this.mass=t=t<=0?.1:t,this},x:{get:function(){return this.position.x},set:function(t){this.world.staticTree.remove(this),this.position.x=t,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(t){this.world.staticTree.remove(this),this.position.y=t,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});t.exports=i},71464:(t,e,i)=>{var s=i(13759),o=i(83419),n=i(78389),r=i(37747),a=i(95540),h=i(26479),l=i(41212),i=new o({Extends:h,Mixins:[n],initialize:function(t,e,i,o){i||o?l(i)?(o=i,i=null,o.internalCreateCallback=this.createCallbackHandler,o.internalRemoveCallback=this.removeCallbackHandler,o.createMultipleCallback=this.createMultipleCallbackHandler,o.classType=a(o,"classType",s)):Array.isArray(i)&&l(i[0])?(o=i,i=null,o.forEach(function(t){t.internalCreateCallback=this.createCallbackHandler,t.internalRemoveCallback=this.removeCallbackHandler,t.createMultipleCallback=this.createMultipleCallbackHandler,t.classType=a(t,"classType",s)})):o={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler}:o={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:s},this.world=t,this.physicsType=r.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,h.call(this,e,i,o),this.type="StaticPhysicsGroup"},createCallbackHandler:function(t){t.body||this.world.enableBody(t,r.STATIC_BODY)},removeCallbackHandler:function(t){t.body&&this.world.disableBody(t)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var t=this.children.entries,e=0;e<t.length;e++)t[e].body.reset();return this}});t.exports=i},82248:(t,e,i)=>{var g=i(55495),o=i(37742),f=i(45319),s=i(83419),n=i(79342),b=i(37747),v=i(20339),_=i(52816),r=i(50792),y=i(63012),m=i(43855),x=i(5470),w=i(94977),S=i(64897),A=i(45170),u=i(96523),a=i(35154),C=i(36383),h=i(25774),T=i(96602),l=i(87841),c=i(59542),P=i(40012),d=i(14087),p=i(89936),B=i(35072),E=i(72624),M=i(2483),D=i(61340),O=i(26099),R=i(15994),i=new s({Extends:r,initialize:function(t,e){r.call(this),this.scene=t,this.bodies=new B,this.staticBodies=new B,this.pendingDestroy=new B,this.colliders=new h,this.gravity=new O(a(e,"gravity.x",0),a(e,"gravity.y",0)),this.bounds=new l(a(e,"x",0),a(e,"y",0),a(e,"width",t.sys.scale.width),a(e,"height",t.sys.scale.height)),this.checkCollision={up:a(e,"checkCollision.up",!0),down:a(e,"checkCollision.down",!0),left:a(e,"checkCollision.left",!0),right:a(e,"checkCollision.right",!0)},this.fps=a(e,"fps",60),this.fixedStep=a(e,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=a(e,"timeScale",1),this.OVERLAP_BIAS=a(e,"overlapBias",4),this.TILE_BIAS=a(e,"tileBias",16),this.forceX=a(e,"forceX",!1),this.isPaused=a(e,"isPaused",!1),this._total=0,this.drawDebug=a(e,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:a(e,"debugShowBody",!0),debugShowStaticBody:a(e,"debugShowStaticBody",!0),debugShowVelocity:a(e,"debugShowVelocity",!0),bodyDebugColor:a(e,"debugBodyColor",16711935),staticBodyDebugColor:a(e,"debugStaticBodyColor",255),velocityDebugColor:a(e,"debugVelocityColor",65280)},this.maxEntries=a(e,"maxEntries",16),this.useTree=a(e,"useTree",!0),this.tree=new c(this.maxEntries),this.staticTree=new c(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new D,this._tempMatrix2=new D,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(t,e){void 0===e&&(e=b.DYNAMIC_BODY),Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var o=t[i];if(o.isParent)for(var s=o.getChildren(),n=0;n<s.length;n++){var r=s[n];r.isParent?this.enable(r,e):this.enableBody(r,e)}else this.enableBody(o,e)}},enableBody:function(t,e){return void 0===e&&(e=b.DYNAMIC_BODY),t.hasTransformComponent&&(t.body||(e===b.DYNAMIC_BODY?t.body=new o(this,t):e===b.STATIC_BODY&&(t.body=new E(this,t))),this.add(t.body)),t},add:function(t){return t.physicsType===b.DYNAMIC_BODY?this.bodies.set(t):t.physicsType===b.STATIC_BODY&&(this.staticBodies.set(t),this.staticTree.insert(t)),t.enable=!0,t},disable:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=t[e];if(i.isParent)for(var o=i.getChildren(),s=0;s<o.length;s++){var n=o[s];n.isParent?this.disable(n):this.disableBody(n.body)}else this.disableBody(i.body)}},disableBody:function(t){this.remove(t),t.enable=!1},remove:function(t){t.physicsType===b.DYNAMIC_BODY?(this.tree.remove(t),this.bodies.delete(t)):t.physicsType===b.STATIC_BODY&&(this.staticBodies.delete(t),this.staticTree.remove(t))},createDebugGraphic:function(){var t=this.scene.sys.add.graphics({x:0,y:0});return t.setDepth(Number.MAX_VALUE),this.debugGraphic=t,this.drawDebug=!0,t},setBounds:function(t,e,i,o,s,n,r,a){return this.bounds.setTo(t,e,i,o),void 0!==s&&this.setBoundsCollision(s,n,r,a),this},setBoundsCollision:function(t,e,i,o){return void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===o&&(o=!0),this.checkCollision.left=t=void 0===t?!0:t,this.checkCollision.right=e,this.checkCollision.up=i,this.checkCollision.down=o,this},pause:function(){return this.isPaused=!0,this.emit(y.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(y.RESUME),this},addCollider:function(t,e,i,o,s){t=new n(this,!1,t,e,i=void 0===i?null:i,o=void 0===o?null:o,s=void 0===s?i:s);return this.colliders.add(t),t},addOverlap:function(t,e,i,o,s){t=new n(this,!0,t,e,i=void 0===i?null:i,o=void 0===o?null:o,s=void 0===s?i:s);return this.colliders.add(t),t},removeCollider:function(t){return this.colliders.remove(t),this},setFPS:function(t){return this.fps=t,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(t,e){if(!this.isPaused&&0!==this.bodies.size){var i,o=this._frameTime,s=this._frameTimeMS*this.timeScale,n=(this._elapsed+=e,this.bodies.entries),r=this._elapsed>=s;for(this.fixedStep||(o=.001*e,r=!0,this._elapsed=0),h=0;h<n.length;h++)(i=n[h]).enable&&i.preUpdate(r,o);if(r){this._elapsed-=s,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(n));for(var a=this.colliders.update(),h=0;h<a.length;h++){var l=a[h];l.active&&l.update()}this.emit(y.WORLD_STEP,o)}for(;this._elapsed>=s;)this._elapsed-=s,this.step(o)}},step:function(t){for(var e,i=this.bodies.entries,o=i.length,s=0;s<o;s++)(e=i[s]).enable&&e.update(t);this.useTree&&(this.tree.clear(),this.tree.load(i));var n=this.colliders.update();for(s=0;s<n.length;s++){var r=n[s];r.active&&r.update()}this.emit(y.WORLD_STEP,t),this.stepsLastFrame++},singleStep:function(){this.update(0,this._frameTimeMS),this.postUpdate()},postUpdate:function(){var t,e=this.bodies.entries,i=e.length,o=this.bodies,s=this.staticBodies;if(this.stepsLastFrame)for(l=this.stepsLastFrame=0;l<i;l++)(t=e[l]).enable&&t.postUpdate();if(this.drawDebug){var n=this.debugGraphic;for(n.clear(),l=0;l<i;l++)(t=e[l]).willDrawDebug()&&t.drawDebug(n);for(i=(e=s.entries).length,l=0;l<i;l++)(t=e[l]).willDrawDebug()&&t.drawDebug(n)}var r=this.pendingDestroy;if(0<r.size){for(var a=this.tree,h=this.staticTree,i=(e=r.entries).length,l=0;l<i;l++)(t=e[l]).physicsType===b.DYNAMIC_BODY?(a.remove(t),o.delete(t)):t.physicsType===b.STATIC_BODY&&(h.remove(t),s.delete(t)),t.world=void 0,t.gameObject=void 0;r.clear()}},updateMotion:function(t,e){t.allowRotation&&this.computeAngularVelocity(t,e),this.computeVelocity(t,e)},computeAngularVelocity:function(t,e){var i=t.angularVelocity,o=t.angularAcceleration,s=t.angularDrag,n=t.maxAngular,o=(o?i+=o*e:t.allowDrag&&s&&(x(i-(s*=e),0,.1)?i-=s:w(i+s,0,.1)?i+=s:i=0),(i=f(i,-n,n))-t.angularVelocity);t.angularVelocity+=o,t.rotation+=t.angularVelocity*e},computeVelocity:function(t,e){var i=t.velocity.x,o=t.acceleration.x,s=t.drag.x,n=t.maxVelocity.x,r=t.velocity.y,a=t.acceleration.y,h=t.drag.y,l=t.maxVelocity.y,c=t.speed,u=t.maxSpeed,d=t.allowDrag,p=t.useDamping;t.allowGravity&&(i+=(this.gravity.x+t.gravity.x)*e,r+=(this.gravity.y+t.gravity.y)*e),o?i+=o*e:d&&s&&(p?(i*=s=Math.pow(s,e),c=Math.sqrt(i*i+r*r),m(c,0,.001)&&(i=0)):x(i-(s*=e),0,.01)?i-=s:w(i+s,0,.01)?i+=s:i=0),a?r+=a*e:d&&h&&(p?(r*=h=Math.pow(h,e),c=Math.sqrt(i*i+r*r),m(c,0,.001)&&(r=0)):x(r-(h*=e),0,.01)?r-=h:w(r+h,0,.01)?r+=h:r=0),i=f(i,-n,n),r=f(r,-l,l),t.velocity.set(i,r),-1<u&&t.velocity.length()>u&&(t.velocity.normalize().scale(u),c=u),t.speed=c},separate:function(t,e,i,o,s){var n,r,a=!1,h=!0;return!t.enable||!e.enable||t.checkCollision.none||e.checkCollision.none||!this.intersects(t,e)||i&&!1===i.call(o,t.gameObject,e.gameObject)||((h=t.isCircle||e.isCircle?(i=this.separateCircle(t,e,s)).result?!(a=!0):(n=i.x,r=i.y,!0):h)&&(i=o=!1,h=this.OVERLAP_BIAS,s?(o=d(t,e,s,h,n),i=p(t,e,s,h,r)):this.forceX||Math.abs(this.gravity.y+t.gravity.y)<Math.abs(this.gravity.x+t.gravity.x)?(o=d(t,e,s,h,n),this.intersects(t,e)&&(i=p(t,e,s,h,r))):(i=p(t,e,s,h,r),this.intersects(t,e)&&(o=d(t,e,s,h,n))),a=o||i),a&&(s?(t.onOverlap||e.onOverlap)&&this.emit(y.OVERLAP,t.gameObject,e.gameObject,t,e):(t.onCollide||e.onCollide)&&this.emit(y.COLLIDE,t.gameObject,e.gameObject,t,e))),a},separateCircle:function(t,e,i){S(t,e,!1,0),A(t,e,!1,0);var o,s,n,r,a=t.isCircle,h=e.isCircle,l=t.center,c=e.center,u=t.immovable,d=e.immovable,p=t.velocity,f=e.velocity,b=0,y=!0,h=(a!==h?(y=!1,a=l.x,o=l.y,r=t.halfWidth,x=e.position.x,m=e.position.y,s=e.right,n=e.bottom,h&&(a=c.x,o=c.y,r=e.halfWidth,x=t.position.x,m=t.position.y,s=t.right,n=t.bottom),o<m?a<x?b=v(a,o,x,m)-r:s<a&&(b=v(a,o,s,m)-r):n<o&&(a<x?b=v(a,o,x,n)-r:s<a&&(b=v(a,o,s,n)-r)),b*=-1):b=t.halfWidth+e.halfWidth-_(l,c),t.overlapR=b,e.overlapR=b,g(l,c)),m=(b+C.EPSILON)*Math.cos(h),x=(b+C.EPSILON)*Math.sin(h),a={overlap:b,result:!1,x:m,y:x};return!i||y&&0===b?!y&&0===b||u&&d||t.customSeparateX||e.customSeparateX?(a.x=void 0,a.y=void 0):(o=!t.pushable&&!e.pushable,y?(s=l.x-c.x,n=l.y-c.y,r=Math.sqrt(Math.pow(s,2)+Math.pow(n,2)),h=(c.x-l.x)/r||0,i=(c.y-l.y)/r||0,b=2*(p.x*h+p.y*i-f.x*h-f.y*i)/(t.mass+e.mass),(u||d)&&(b*=2),u||(p.x=p.x-b/t.mass*h,p.y=p.y-b/t.mass*i,p.multiply(t.bounce)),d||(f.x=f.x+b/e.mass*h,f.y=f.y+b/e.mass*i,f.multiply(e.bounce)),u||d||(m*=.5,x*=.5),u||(t.x-=m,t.y-=x,t.updateCenter()),d||(e.x+=m,e.y+=x,e.updateCenter()),a.result=!0):(!u||t.pushable||o?(t.x-=m,t.y-=x,t.updateCenter()):d&&!e.pushable&&!o||(e.x+=m,e.y+=x,e.updateCenter()),a.x=void 0,a.y=void 0)):a.result=!0,a},intersects:function(t,e){return t!==e&&(t.isCircle||e.isCircle?t.isCircle?e.isCircle?_(t.center,e.center)<=t.halfWidth+e.halfWidth:this.circleBodyIntersects(t,e):this.circleBodyIntersects(e,t):!(t.right<=e.left||t.bottom<=e.top||t.left>=e.right||t.top>=e.bottom))},circleBodyIntersects:function(t,e){var i=f(t.center.x,e.left,e.right),e=f(t.center.y,e.top,e.bottom);return(t.center.x-i)*(t.center.x-i)+(t.center.y-e)*(t.center.y-e)<=t.halfWidth*t.halfWidth},overlap:function(t,e,i,o,s){return void 0===i&&(i=null),void 0===s&&(s=i),this.collideObjects(t,e,i,o=void 0===o?null:o,s,!0)},collide:function(t,e,i,o,s){return void 0===i&&(i=null),void 0===s&&(s=i),this.collideObjects(t,e,i,o=void 0===o?null:o,s,!1)},collideObjects:function(t,e,i,o,s,n){!t.isParent||void 0!==t.physicsType&&void 0!==e&&t!==e||(t=t.children.entries),e&&e.isParent&&void 0===e.physicsType&&(e=e.children.entries);var r,a=Array.isArray(t),h=Array.isArray(e);if(this._total=0,a||h)if(!a&&h)for(r=0;r<e.length;r++)this.collideHandler(t,e[r],i,o,s,n);else if(a&&!h)if(e)for(r=0;r<t.length;r++)this.collideHandler(t[r],e,i,o,s,n);else for(r=0;r<t.length;r++)for(var l=t[r],c=r+1;c<t.length;c++)r!==c&&this.collideHandler(l,t[c],i,o,s,n);else for(r=0;r<t.length;r++)for(c=0;c<e.length;c++)this.collideHandler(t[r],e[c],i,o,s,n);else this.collideHandler(t,e,i,o,s,n);return 0<this._total},collideHandler:function(t,e,i,o,s,n){return void 0===e&&t.isParent?this.collideGroupVsGroup(t,t,i,o,s,n):!(!t||!e)&&(t.body||t.isBody?e.body||e.isBody?this.collideSpriteVsSprite(t,e,i,o,s,n):e.isParent?this.collideSpriteVsGroup(t,e,i,o,s,n):e.isTilemap?this.collideSpriteVsTilemapLayer(t,e,i,o,s,n):void 0:t.isParent?e.body||e.isBody?this.collideSpriteVsGroup(e,t,i,o,s,n):e.isParent?this.collideGroupVsGroup(t,e,i,o,s,n):e.isTilemap?this.collideGroupVsTilemapLayer(t,e,i,o,s,n):void 0:t.isTilemap?e.body||e.isBody?this.collideSpriteVsTilemapLayer(e,t,i,o,s,n):e.isParent?this.collideGroupVsTilemapLayer(e,t,i,o,s,n):void 0:void 0)},canCollide:function(t,e){return t&&e&&0!=(t.collisionMask&e.collisionCategory)&&0!=(e.collisionMask&t.collisionCategory)},collideSpriteVsSprite:function(t,e,i,o,s,n){var r=t.isBody?t:t.body,a=e.isBody?e:e.body;return!!this.canCollide(r,a)&&(this.separate(r,a,o,s,n)&&(i&&i.call(s,t,e),this._total++),!0)},collideSpriteVsGroup:function(t,e,i,o,s,n){var r,a=t.isBody?t:t.body;if(0!==e.length&&a&&a.enable&&!a.checkCollision.none&&this.canCollide(a,e))if(this.useTree||e.physicsType===b.STATIC_BODY)for(var h=this.treeMinMax,l=(h.minX=a.left,h.minY=a.top,h.maxX=a.right,h.maxY=a.bottom,(e.physicsType===b.DYNAMIC_BODY?this.tree:this.staticTree).search(h)),c=l.length,u=0;u<c;u++)a!==(r=l[u])&&r.enable&&!r.checkCollision.none&&e.contains(r.gameObject)&&this.separate(a,r,o,s,n)&&(i&&i.call(s,a.gameObject,r.gameObject),this._total++);else{var d=e.getChildren(),p=e.children.entries.indexOf(t);for(c=d.length,u=0;u<c;u++)(r=d[u].body)&&u!==p&&r.enable&&this.separate(a,r,o,s,n)&&(i&&i.call(s,a.gameObject,r.gameObject),this._total++)}},collideGroupVsTilemapLayer:function(t,e,i,o,s,n){if(!this.canCollide(t,e))return!1;var r=t.getChildren();if(0===r.length)return!1;for(var a=!1,h=0;h<r.length;h++)(r[h].body||r[h].isBody)&&this.collideSpriteVsTilemapLayer(r[h],e,i,o,s,n)&&(a=!0);return a},collideTiles:function(t,e,i,o,s){return!(0===e.length||t.body&&!t.body.enable||t.isBody&&!t.enable)&&this.collideSpriteVsTilesHandler(t,e,i,o,s,!1,!1)},overlapTiles:function(t,e,i,o,s){return!(0===e.length||t.body&&!t.body.enable||t.isBody&&!t.enable)&&this.collideSpriteVsTilesHandler(t,e,i,o,s,!0,!1)},collideSpriteVsTilemapLayer:function(t,e,i,o,s,n){var r,a,h,l,c=t.isBody?t:t.body;return!(!c.enable||c.checkCollision.none||!this.canCollide(c,e))&&(h=e.layer,l=c.x-h.tileWidth*e.scaleX,r=c.y-h.tileHeight*e.scaleY,a=c.width+h.tileWidth*e.scaleX,c=c.height+h.tileHeight*e.scaleY,h=n?null:this.tileFilterOptions,0!==(l=u(l,r,a,c,h,e.scene.cameras.main,e.layer)).length)&&this.collideSpriteVsTilesHandler(t,l,i,o,s,n,!0)},collideSpriteVsTilesHandler:function(t,e,i,o,s,n,r){for(var a,h,l=t.isBody?t:t.body,c={left:0,right:0,top:0,bottom:0},u=!1,d=0;d<e.length;d++){var p=(h=(a=e[d]).tilemapLayer).tileToWorldXY(a.x,a.y);c.left=p.x,c.top=p.y,c.right=c.left+a.width*h.scaleX,c.bottom=c.top+a.height*h.scaleY,M(c,l)&&(!o||o.call(s,t,a))&&T(a,t)&&(n||P(d,l,a,c,h,this.TILE_BIAS,r))&&(this._total++,u=!0,i&&i.call(s,t,a),n&&l.onOverlap?this.emit(y.TILE_OVERLAP,t,a,l):l.onCollide&&this.emit(y.TILE_COLLIDE,t,a,l))}return u},collideGroupVsGroup:function(t,e,i,o,s,n){if(0!==t.length&&0!==e.length&&this.canCollide(t,e))for(var r=t.getChildren(),a=0;a<r.length;a++)this.collideSpriteVsGroup(r[a],e,i,o,s,n)},wrap:function(t,e){t.body?this.wrapObject(t,e):t.getChildren?this.wrapArray(t.getChildren(),e):Array.isArray(t)?this.wrapArray(t,e):this.wrapObject(t,e)},wrapArray:function(t,e){for(var i=0;i<t.length;i++)this.wrapObject(t[i],e)},wrapObject:function(t,e){t.x=R(t.x,this.bounds.left-(e=void 0===e?0:e),this.bounds.right+e),t.y=R(t.y,this.bounds.top-e,this.bounds.bottom+e)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});t.exports=i},1093:t=>{t.exports={setAcceleration:function(t,e){return this.body.acceleration.set(t,e),this},setAccelerationX:function(t){return this.body.acceleration.x=t,this},setAccelerationY:function(t){return this.body.acceleration.y=t,this}}},59023:t=>{t.exports={setAngularVelocity:function(t){return this.body.angularVelocity=t,this},setAngularAcceleration:function(t){return this.body.angularAcceleration=t,this},setAngularDrag:function(t){return this.body.angularDrag=t,this}}},62069:t=>{t.exports={setBounce:function(t,e){return this.body.bounce.set(t,e),this},setBounceX:function(t){return this.body.bounce.x=t,this},setBounceY:function(t){return this.body.bounce.y=t,this},setCollideWorldBounds:function(t,e,i,o){return this.body.setCollideWorldBounds(t,e,i,o),this}}},78389:(t,e,i)=>{var o=i(79599);t.exports={setCollisionCategory:function(t){return(this.body||this).collisionCategory=t,this},willCollideWith:function(t){return 0!=((this.body||this).collisionMask&t)},addCollidesWith:function(t){var e=this.body||this;return e.collisionMask=e.collisionMask|t,this},removeCollidesWith:function(t){var e=this.body||this;return e.collisionMask=e.collisionMask&~t,this},setCollidesWith:function(t){return(this.body||this).collisionMask=o(t),this},resetCollisionCategory:function(){var t=this.body||this;return t.collisionCategory=1,t.collisionMask=1,this}}},87118:t=>{t.exports={setDebug:function(t,e,i){return this.debugShowBody=t,this.debugShowVelocity=e,this.debugBodyColor=i,this},setDebugBodyColor:function(t){return this.body.debugBodyColor=t,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(t){this.body.debugShowBody=t}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(t){this.body.debugShowVelocity=t}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(t){this.body.debugBodyColor=t}}}},52819:t=>{t.exports={setDrag:function(t,e){return this.body.drag.set(t,e),this},setDragX:function(t){return this.body.drag.x=t,this},setDragY:function(t){return this.body.drag.y=t,this},setDamping:function(t){return this.body.useDamping=t,this}}},4074:t=>{t.exports={setDirectControl:function(t){return this.body.setDirectControl(t),this},enableBody:function(t,e,i,o,s){return t&&this.body.reset(e,i),o&&(this.body.gameObject.active=!0),s&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),this.body.stop(),this.body.enable=!1,t&&(this.body.gameObject.active=!1),e&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}}},40831:t=>{t.exports={setFriction:function(t,e){return this.body.friction.set(t,e),this},setFrictionX:function(t){return this.body.friction.x=t,this},setFrictionY:function(t){return this.body.friction.y=t,this}}},26775:t=>{t.exports={setGravity:function(t,e){return this.body.gravity.set(t,e),this},setGravityX:function(t){return this.body.gravity.x=t,this},setGravityY:function(t){return this.body.gravity.y=t,this}}},9437:t=>{t.exports={setImmovable:function(t){return this.body.immovable=t=void 0===t?!0:t,this}}},30621:t=>{t.exports={setMass:function(t){return this.body.mass=t,this}}},72441:(t,e,i)=>{var d=i(47956),p=i(96503),f=i(2044),b=i(81491);t.exports=function(t,e,i,o,s,n){var r=d(t,e-o,i-o,2*o,2*o,s,n);if(0===r.length)return r;for(var a=new p(e,i,o),h=new p,l=[],c=0;c<r.length;c++){var u=r[c];u.isCircle?(h.setTo(u.center.x,u.center.y,u.halfWidth),f(a,h)&&l.push(u)):b(a,u)&&l.push(u)}return l}},47956:t=>{t.exports=function(t,e,i,o,s,n,r){void 0===n&&(n=!0),void 0===r&&(r=!1);var a,h,l=[],c=[],u=t.treeMinMax;return u.minX=e,u.minY=i,u.maxX=e+o,u.maxY=i+s,r&&(c=t.staticTree.search(u)),n&&t.useTree?l=t.tree.search(u):n&&(r=t.bodies,a={position:{x:e,y:i},left:e,top:i,right:e+o,bottom:i+s,isCircle:!1},h=t.intersects,r.iterate(function(t){h(t,a)&&l.push(t)})),c.concat(l)}},62121:t=>{t.exports={setPushable:function(t){return this.body.pushable=t=void 0===t?!0:t,this}}},29384:t=>{t.exports={setOffset:function(t,e){return this.body.setOffset(t,e),this},setSize:function(t,e,i){return this.body.setSize(t,e,i),this},setBodySize:function(t,e,i){return this.body.setSize(t,e,i),this},setCircle:function(t,e,i){return this.body.setCircle(t,e,i),this}}},15098:t=>{t.exports={setVelocity:function(t,e){return this.body.setVelocity(t,e),this},setVelocityX:function(t){return this.body.setVelocityX(t),this},setVelocityY:function(t){return this.body.setVelocityY(t),this},setMaxVelocity:function(t,e){return this.body.maxVelocity.set(t,e),this}}},92209:(t,e,i)=>{t.exports={Acceleration:i(1093),Angular:i(59023),Bounce:i(62069),Collision:i(78389),Debug:i(87118),Drag:i(52819),Enable:i(4074),Friction:i(40831),Gravity:i(26775),Immovable:i(9437),Mass:i(30621),OverlapCirc:i(72441),OverlapRect:i(47956),Pushable:i(62121),Size:i(29384),Velocity:i(15098)}},37747:t=>{t.exports={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14}},20009:t=>{t.exports="collide"},36768:t=>{t.exports="overlap"},60473:t=>{t.exports="pause"},89954:t=>{t.exports="resume"},61804:t=>{t.exports="tilecollide"},7161:t=>{t.exports="tileoverlap"},34689:t=>{t.exports="worldbounds"},16006:t=>{t.exports="worldstep"},63012:(t,e,i)=>{t.exports={COLLIDE:i(20009),OVERLAP:i(36768),PAUSE:i(60473),RESUME:i(89954),TILE_COLLIDE:i(61804),TILE_OVERLAP:i(7161),WORLD_BOUNDS:i(34689),WORLD_STEP:i(16006)}},27064:(t,e,i)=>{var o=i(37747),i=i(79291)(!1,{ArcadePhysics:i(86689),Body:i(37742),Collider:i(79342),Components:i(92209),Events:i(63012),Factory:i(66022),GetCollidesWith:i(79599),GetOverlapX:i(64897),GetOverlapY:i(45170),SeparateX:i(14087),SeparateY:i(89936),Group:i(60758),Image:i(71289),Sprite:i(13759),StaticBody:i(72624),StaticGroup:i(71464),Tilemap:i(55173),World:i(82248)},o);t.exports=i},96602:t=>{t.exports=function(t,e){return t.collisionCallback?!t.collisionCallback.call(t.collisionCallbackContext,e,t):!t.layer.callbacks[t.index]||!t.layer.callbacks[t.index].callback.call(t.layer.callbacks[t.index].callbackContext,e,t)}},36294:t=>{t.exports=function(t,e){e<0?(t.blocked.none=!1,t.blocked.left=!0):0<e&&(t.blocked.none=!1,t.blocked.right=!0),t.position.x-=e,t.updateCenter(),0===t.bounce.x?t.velocity.x=0:t.velocity.x=-t.velocity.x*t.bounce.x}},67013:t=>{t.exports=function(t,e){e<0?(t.blocked.none=!1,t.blocked.up=!0):0<e&&(t.blocked.none=!1,t.blocked.down=!0),t.position.y-=e,t.updateCenter(),0===t.bounce.y?t.velocity.y=0:t.velocity.y=-t.velocity.y*t.bounce.y}},40012:(t,e,i)=>{var m=i(21329),x=i(53442),g=i(2483);t.exports=function(t,e,i,o,s,n,r){var a=o.left,h=o.top,l=o.right,c=o.bottom,u=i.faceLeft||i.faceRight,d=i.faceTop||i.faceBottom;if(r||(d=u=!0),!u&&!d)return!1;var p=0,f=0,b=0,y=1;if(e.deltaAbsX()>e.deltaAbsY()?b=-1:e.deltaAbsX()<e.deltaAbsY()&&(y=-1),0!==e.deltaX()&&0!==e.deltaY()&&u&&d&&(b=Math.min(Math.abs(e.position.x-l),Math.abs(e.right-a)),y=Math.min(Math.abs(e.position.y-c),Math.abs(e.bottom-h))),b<y){if(u&&0!==(p=m(e,i,a,l,n,r))&&!g(o,e))return!0;d&&(f=x(e,i,h,c,n,r))}else{if(d&&0!==(f=x(e,i,h,c,n,r))&&!g(o,e))return!0;u&&(p=m(e,i,a,l,n,r))}return 0!==p||0!==f}},21329:(t,e,i)=>{var c=i(36294);t.exports=function(t,e,i,o,s,n){var r=0,a=e.faceLeft,h=e.faceRight,l=e.collideLeft,e=e.collideRight;return n||(e=l=h=a=!0),t.deltaX()<0&&e&&t.checkCollision.left?h&&t.x<o&&(r=t.x-o)<-s&&(r=0):0<t.deltaX()&&l&&t.checkCollision.right&&a&&t.right>i&&(r=t.right-i)>s&&(r=0),0!==r&&(t.customSeparateX?t.overlapX=r:c(t,r)),r}},53442:(t,e,i)=>{var c=i(67013);t.exports=function(t,e,i,o,s,n){var r=0,a=e.faceTop,h=e.faceBottom,l=e.collideUp,e=e.collideDown;return n||(e=l=h=a=!0),t.deltaY()<0&&e&&t.checkCollision.up?h&&t.y<o&&(r=t.y-o)<-s&&(r=0):0<t.deltaY()&&l&&t.checkCollision.down&&a&&t.bottom>i&&(r=t.bottom-i)>s&&(r=0),0!==r&&(t.customSeparateY?t.overlapY=r:c(t,r)),r}},2483:t=>{t.exports=function(t,e){return!(e.right<=t.left||e.bottom<=t.top||e.position.x>=t.right||e.position.y>=t.bottom)}},55173:(t,e,i)=>{i={ProcessTileCallbacks:i(96602),ProcessTileSeparationX:i(36294),ProcessTileSeparationY:i(67013),SeparateTile:i(40012),TileCheckX:i(21329),TileCheckY:i(53442),TileIntersectsBody:i(2483)};t.exports=i},44563:(t,e,i)=>{t.exports={Arcade:i(27064),Matter:i(3875)}},68174:(t,e,i)=>{var o=i(83419),s=i(26099),i=new o({initialize:function(){this.boundsCenter=new s,this.centerDiff=new s},parseBody:function(t){var e,i,o,s,n;return!(!(t=t.hasOwnProperty("body")?t.body:t).hasOwnProperty("bounds")||!t.hasOwnProperty("centerOfMass")||(e=this.boundsCenter,i=this.centerDiff,o=t.bounds.max.x-t.bounds.min.x,s=t.bounds.max.y-t.bounds.min.y,n=o*t.centerOfMass.x,t=s*t.centerOfMass.y,e.set(o/2,s/2),i.set(n-e.x,t-e.y),0))},getTopLeft:function(t,e,i){var o;return void 0===e&&(e=0),void 0===i&&(i=0),!!this.parseBody(t)&&(t=this.boundsCenter,o=this.centerDiff,new s(e+t.x+o.x,i+t.y+o.y))},getTopCenter:function(t,e,i){var o;return void 0===e&&(e=0),void 0===i&&(i=0),!!this.parseBody(t)&&(t=this.boundsCenter,o=this.centerDiff,new s(e+o.x,i+t.y+o.y))},getTopRight:function(t,e,i){var o;return void 0===e&&(e=0),void 0===i&&(i=0),!!this.parseBody(t)&&(t=this.boundsCenter,o=this.centerDiff,new s(e-(t.x-o.x),i+t.y+o.y))},getLeftCenter:function(t,e,i){var o;return void 0===e&&(e=0),void 0===i&&(i=0),!!this.parseBody(t)&&(t=this.boundsCenter,o=this.centerDiff,new s(e+t.x+o.x,i+o.y))},getCenter:function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=0),!!this.parseBody(t)&&(t=this.centerDiff,new s(e+t.x,i+t.y))},getRightCenter:function(t,e,i){var o;return void 0===e&&(e=0),void 0===i&&(i=0),!!this.parseBody(t)&&(t=this.boundsCenter,o=this.centerDiff,new s(e-(t.x-o.x),i+o.y))},getBottomLeft:function(t,e,i){var o;return void 0===e&&(e=0),void 0===i&&(i=0),!!this.parseBody(t)&&(t=this.boundsCenter,o=this.centerDiff,new s(e+t.x+o.x,i-(t.y-o.y)))},getBottomCenter:function(t,e,i){var o;return void 0===e&&(e=0),void 0===i&&(i=0),!!this.parseBody(t)&&(t=this.boundsCenter,o=this.centerDiff,new s(e+o.x,i-(t.y-o.y)))},getBottomRight:function(t,e,i){var o;return void 0===e&&(e=0),void 0===i&&(i=0),!!this.parseBody(t)&&(t=this.boundsCenter,o=this.centerDiff,new s(e-(t.x-o.x),i-(t.y-o.y)))}});t.exports=i},19933:(t,e,i)=>{var o=i(6790);o.Body=i(22562),o.Composite=i(69351),o.World=i(4372),o.Collision=i(52284),o.Detector=i(81388),o.Pairs=i(99561),o.Pair=i(4506),o.Query=i(73296),o.Resolver=i(66272),o.Constraint=i(48140),o.Common=i(53402),o.Engine=i(48413),o.Events=i(35810),o.Sleeping=i(53614),o.Plugin=i(73832),o.Bodies=i(66280),o.Composites=i(74116),o.Axes=i(66615),o.Bounds=i(15647),o.Svg=i(74058),o.Vector=i(31725),o.Vertices=i(41598),o.World.add=o.Composite.add,o.World.remove=o.Composite.remove,o.World.addComposite=o.Composite.addComposite,o.World.addBody=o.Composite.addBody,o.World.addConstraint=o.Composite.addConstraint,o.World.clear=o.Composite.clear,t.exports=o},28137:(t,e,i)=>{var c=i(66280),o=i(83419),u=i(74116),n=i(48140),d=i(74058),s=i(75803),p=i(23181),r=i(34803),a=i(73834),h=i(19496),l=i(85791),f=i(98713),b=i(41598),i=new o({initialize:function(t){this.world=t,this.scene=t.scene,this.sys=t.scene.sys},rectangle:function(t,e,i,o,s){t=c.rectangle(t,e,i,o,s);return this.world.add(t),t},trapezoid:function(t,e,i,o,s,n){t=c.trapezoid(t,e,i,o,s,n);return this.world.add(t),t},circle:function(t,e,i,o,s){t=c.circle(t,e,i,o,s);return this.world.add(t),t},polygon:function(t,e,i,o,s){t=c.polygon(t,e,i,o,s);return this.world.add(t),t},fromVertices:function(t,e,i,o,s,n,r){"string"==typeof i&&(i=b.fromPath(i));t=c.fromVertices(t,e,i,o,s,n,r);return this.world.add(t),t},fromPhysicsEditor:function(t,e,i,o,s){void 0===s&&(s=!0);t=h.parseBody(t,e,i,o);return s&&!this.world.has(t)&&this.world.add(t),t},fromSVG:function(t,e,i,o,s,n){void 0===o&&(o=1),void 0===s&&(s={}),void 0===n&&(n=!0);for(var r=i.getElementsByTagName("path"),a=[],h=0;h<r.length;h++){var l=d.pathToVertices(r[h],30);1!==o&&b.scale(l,o,o),a.push(l)}i=c.fromVertices(t,e,a,s);return n&&this.world.add(i),i},fromJSON:function(t,e,i,o,s){void 0===s&&(s=!0);t=l.parseBody(t,e,i,o=void 0===o?{}:o);return t&&s&&this.world.add(t),t},imageStack:function(i,o,t,e,s,n,r,a,h){void 0===r&&(r=0),void 0===a&&(a=0),void 0===h&&(h={});var l=this.world,c=this.sys.displayList,t=(h.addToWorld=!1,u.stack(t,e,s,n,r,a,function(t,e){t=new p(l,t,e,i,o,h);return c.add(t),t.body}));return l.add(t),t},stack:function(t,e,i,o,s,n,r){t=u.stack(t,e,i,o,s,n,r);return this.world.add(t),t},pyramid:function(t,e,i,o,s,n,r){t=u.pyramid(t,e,i,o,s,n,r);return this.world.add(t),t},chain:function(t,e,i,o,s,n){return u.chain(t,e,i,o,s,n)},mesh:function(t,e,i,o,s){return u.mesh(t,e,i,o,s)},newtonsCradle:function(t,e,i,o,s){t=u.newtonsCradle(t,e,i,o,s);return this.world.add(t),t},car:function(t,e,i,o,s){t=u.car(t,e,i,o,s);return this.world.add(t),t},softBody:function(t,e,i,o,s,n,r,a,h,l){t=u.softBody(t,e,i,o,s,n,r,a,h,l);return this.world.add(t),t},joint:function(t,e,i,o,s){return this.constraint(t,e,i,o,s)},spring:function(t,e,i,o,s){return this.constraint(t,e,i,o,s)},constraint:function(t,e,i,o,s){void 0===o&&(o=1),(s=void 0===s?{}:s).bodyA="body"===t.type?t:t.body,s.bodyB="body"===e.type?e:e.body,isNaN(i)||(s.length=i),s.stiffness=o;t=n.create(s);return this.world.add(t),t},worldConstraint:function(t,e,i,o){void 0===i&&(i=1),(o=void 0===o?{}:o).bodyB="body"===t.type?t:t.body,isNaN(e)||(o.length=e),o.stiffness=i;t=n.create(o);return this.world.add(t),t},mouseSpring:function(t){return this.pointerConstraint(t)},pointerConstraint:function(t){(t=void 0===t?{}:t).hasOwnProperty("render")||(t.render={visible:!1});t=new f(this.scene,this.world,t);return this.world.add(t.constraint),t},image:function(t,e,i,o,s){t=new p(this.world,t,e,i,o,s);return this.sys.displayList.add(t),t},tileBody:function(t,e){return new a(this.world,t,e)},sprite:function(t,e,i,o,s){t=new r(this.world,t,e,i,o,s);return this.sys.displayList.add(t),this.sys.updateList.add(t),t},gameObject:function(t,e,i){return s(this.world,t,e,i)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});t.exports=i},75803:(t,e,i)=>{var r=i(31884),a=i(95540),h=i(26099);t.exports=function(t,o,e,i){void 0===e&&(e={}),void 0===i&&(i=!0);var s=o.x,n=o.y;return o.body={temp:!0,position:{x:s,y:n}},[r.Bounce,r.Collision,r.Force,r.Friction,r.Gravity,r.Mass,r.Sensor,r.SetBody,r.Sleep,r.Static,r.Transform,r.Velocity].forEach(function(t){for(var e in t)(i=t[e]).get&&"function"==typeof i.get||i.set&&"function"==typeof i.set?Object.defineProperty(o,e,{get:t[e].get,set:t[e].set}):Object.defineProperty(o,e,{value:t[e]});var i}),o.world=t,o._tempVec2=new h(s,n),e.hasOwnProperty("type")&&"body"===e.type?o.setExistingBody(e,i):(t=(t=a(e,"shape",null))||"rectangle",e.addToWorld=i,o.setBody(t,e)),o}},23181:(t,e,i)=>{var o=i(83419),s=i(31884),r=i(95643),a=i(95540),n=i(88571),h=i(72699),l=i(26099),i=new o({Extends:n,Mixins:[s.Bounce,s.Collision,s.Force,s.Friction,s.Gravity,s.Mass,s.Sensor,s.SetBody,s.Sleep,s.Static,s.Transform,s.Velocity,h],initialize:function(t,e,i,o,s,n){r.call(this,t.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(o,s),this.setSizeToFrame(),this.setOrigin(),this.world=t,this._tempVec2=new l(e,i);o=a(n,"shape",null);o?this.setBody(o,n):this.setRectangle(this.width,this.height,n),this.setPosition(e,i),this.initPipeline(),this.initPostPipeline(!0)}});t.exports=i},42045:(t,e,i)=>{var n=i(60461),o=i(66615),s=i(66280),r=i(22562),a=i(68174),h=i(15647),l=i(83419),c=i(52284),u=i(53402),d=i(69351),p=i(74116),f=i(48140),b=i(81388),y=i(20339),m=i(28137),x=i(95540),g=i(35154),v=i(18210),_=i(40178),w=i(6790),S=i(74507),A=i(46975),C=i(4506),T=i(99561),P=i(73832),B=i(37277),E=i(73296),M=i(66272),D=i(44594),O=i(74058),R=i(31725),L=i(41598),F=i(68243),u=(u.setDecomp(i(55973)),new l({initialize:function(t){this.scene=t,this.systems=t.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=r,this.composite=d,this.collision=c,this.detector=b,this.pair=C,this.pairs=T,this.query=E,this.resolver=M,this.constraint=f,this.bodies=s,this.composites=p,this.axes=o,this.bounds=h,this.svg=O,this.vector=R,this.vertices=L,this.verts=L,this._tempVec2=R.create(),g(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),g(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),g(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),M._restingThresh=g(this.config,"restingThresh",4),M._restingThreshTangent=g(this.config,"restingThreshTangent",6),M._positionDampen=g(this.config,"positionDampen",.9),M._positionWarming=g(this.config,"positionWarming",.8),M._frictionNormalMultiplier=g(this.config,"frictionNormalMultiplier",5),t.sys.events.once(D.BOOT,this.boot,this),t.sys.events.on(D.START,this.start,this)},boot:function(){this.world=new F(this.scene,this.config),this.add=new m(this.world),this.bodyBounds=new a,this.systems.events.once(D.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new F(this.scene,this.config),this.add=new m(this.world));var t=this.systems.events;t.on(D.UPDATE,this.world.update,this.world),t.on(D.POST_UPDATE,this.world.postUpdate,this.world),t.once(D.SHUTDOWN,this.shutdown,this)},getConfig:function(){var t=this.systems.game.config.physics,e=this.systems.settings.physics;return A(x(e,"matter",{}),x(t,"matter",{}))},enableAttractorPlugin:function(){return P.register(v),P.use(w,v),this},enableWrapPlugin:function(){return P.register(S),P.use(w,S),this},enableCollisionEventsPlugin:function(){return P.register(_),P.use(w,_),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(t,e){this.world.step(t,e)},containsPoint:function(t,e,i){t=this.getMatterBodies(t);e=R.create(e,i);return 0<E.point(t,e).length},intersectPoint:function(t,e,i){i=this.getMatterBodies(i);var t=R.create(t,e),o=[];return E.point(i,t).forEach(function(t){-1===o.indexOf(t)&&o.push(t)}),o},intersectRect:function(t,e,i,o,s,n){void 0===s&&(s=!1),n=this.getMatterBodies(n);var r=[];return E.region(n,{min:{x:t,y:e},max:{x:t+i,y:e+o}},s).forEach(function(t){-1===r.indexOf(t)&&r.push(t)}),r},intersectRay:function(t,e,i,o,s,n){void 0===s&&(s=1),n=this.getMatterBodies(n);for(var r=[],a=E.ray(n,R.create(t,e),R.create(i,o),s),h=0;h<a.length;h++)r.push(a[h].body);return r},intersectBody:function(t,e){e=this.getMatterBodies(e);for(var i=[],o=E.collides(t,e),s=0;s<o.length;s++){var n=o[s];n.bodyA===t?i.push(n.bodyB):i.push(n.bodyA)}return i},overlap:function(t,e,i,o,s){void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=i),Array.isArray(t)||(t=[t]),t=this.getMatterBodies(t),e=this.getMatterBodies(e);for(var n=!1,r=0;r<t.length;r++)for(var a=t[r],h=E.collides(a,e),l=0;l<h.length;l++){var c=h[l],u=c.bodyA.id===a.id?c.bodyB:c.bodyA;if(!o||o.call(s,a,u,c))if(n=!0,i)i.call(s,a,u,c);else if(!o)return!0}return n},setCollisionCategory:function(t,e){return(t=this.getMatterBodies(t)).forEach(function(t){t.collisionFilter.category=e}),this},setCollisionGroup:function(t,e){return(t=this.getMatterBodies(t)).forEach(function(t){t.collisionFilter.group=e}),this},setCollidesWith:function(t,e){t=this.getMatterBodies(t);var i=0;if(Array.isArray(e))for(var o=0;o<e.length;o++)i|=e[o];else i=e;return t.forEach(function(t){t.collisionFilter.mask=i}),this},getMatterBodies:function(t){if(!t)return this.world.getAllBodies();Array.isArray(t)||(t=[t]);for(var e=[],i=0;i<t.length;i++){var o=t[i].hasOwnProperty("body")?t[i].body:t[i];e.push(o)}return e},setVelocity:function(t,e,i){t=this.getMatterBodies(t);var o=this._tempVec2;return o.x=e,o.y=i,t.forEach(function(t){r.setVelocity(t,o)}),this},setVelocityX:function(t,e){t=this.getMatterBodies(t);var i=this._tempVec2;return i.x=e,t.forEach(function(t){i.y=t.velocity.y,r.setVelocity(t,i)}),this},setVelocityY:function(t,e){t=this.getMatterBodies(t);var i=this._tempVec2;return i.y=e,t.forEach(function(t){i.x=t.velocity.x,r.setVelocity(t,i)}),this},setAngularVelocity:function(t,e){return(t=this.getMatterBodies(t)).forEach(function(t){r.setAngularVelocity(t,e)}),this},applyForce:function(t,e){t=this.getMatterBodies(t);var i=this._tempVec2;return t.forEach(function(t){i.x=t.position.x,i.y=t.position.y,r.applyForce(t,i,e)}),this},applyForceFromPosition:function(t,e,i,o){t=this.getMatterBodies(t);var s=this._tempVec2;return t.forEach(function(t){void 0===o&&(o=t.angle),s.x=i*Math.cos(o),s.y=i*Math.sin(o),r.applyForce(t,e,s)}),this},applyForceFromAngle:function(t,e,i){t=this.getMatterBodies(t);var o=this._tempVec2;return t.forEach(function(t){void 0===i&&(i=t.angle),o.x=e*Math.cos(i),o.y=e*Math.sin(i),r.applyForce(t,{x:t.position.x,y:t.position.y},o)}),this},getConstraintLength:function(t){var e=t.pointA.x,i=t.pointA.y,o=t.pointB.x,s=t.pointB.y;return t.bodyA&&(e+=t.bodyA.position.x,i+=t.bodyA.position.y),t.bodyB&&(o+=t.bodyB.position.x,s+=t.bodyB.position.y),y(e,i,o,s)},alignBody:function(t,e,i,o){var s;switch(t=t.hasOwnProperty("body")?t.body:t,o){case n.TOP_LEFT:case n.LEFT_TOP:s=this.bodyBounds.getTopLeft(t,e,i);break;case n.TOP_CENTER:s=this.bodyBounds.getTopCenter(t,e,i);break;case n.TOP_RIGHT:case n.RIGHT_TOP:s=this.bodyBounds.getTopRight(t,e,i);break;case n.LEFT_CENTER:s=this.bodyBounds.getLeftCenter(t,e,i);break;case n.CENTER:s=this.bodyBounds.getCenter(t,e,i);break;case n.RIGHT_CENTER:s=this.bodyBounds.getRightCenter(t,e,i);break;case n.LEFT_BOTTOM:case n.BOTTOM_LEFT:s=this.bodyBounds.getBottomLeft(t,e,i);break;case n.BOTTOM_CENTER:s=this.bodyBounds.getBottomCenter(t,e,i);break;case n.BOTTOM_RIGHT:case n.RIGHT_BOTTOM:s=this.bodyBounds.getBottomRight(t,e,i)}return s&&r.setPosition(t,s),this},shutdown:function(){var t=this.systems.events;this.world&&(t.off(D.UPDATE,this.world.update,this.world),t.off(D.POST_UPDATE,this.world.postUpdate,this.world)),t.off(D.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(D.START,this.start,this),this.scene=null,this.systems=null}}));B.register("MatterPhysics",u,"matterPhysics"),t.exports=u},34803:(t,e,i)=>{var r=i(9674),o=i(83419),s=i(31884),a=i(95643),h=i(95540),n=i(72699),l=i(68287),c=i(26099),i=new o({Extends:l,Mixins:[s.Bounce,s.Collision,s.Force,s.Friction,s.Gravity,s.Mass,s.Sensor,s.SetBody,s.Sleep,s.Static,s.Transform,s.Velocity,n],initialize:function(t,e,i,o,s,n){a.call(this,t.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new r(this),this.setTexture(o,s),this.setSizeToFrame(),this.setOrigin(),this.world=t,this._tempVec2=new c(e,i);o=h(n,"shape",null);o?this.setBody(o,n):this.setRectangle(this.width,this.height,n),this.setPosition(e,i),this.initPipeline(),this.initPostPipeline(!0)}});t.exports=i},73834:(t,e,i)=>{var b=i(66280),y=i(22562),o=i(83419),s=i(31884),m=i(62644),n=i(50792),x=i(95540),g=i(97022),v=i(41598),i=new o({Extends:n,Mixins:[s.Bounce,s.Collision,s.Friction,s.Gravity,s.Mass,s.Sensor,s.Sleep,s.Static],initialize:function(t,e,i){n.call(this),this.tile=e,this.world=t,e.physics.matterBody&&e.physics.matterBody.destroy(),e.physics.matterBody=this;var t=x(i,"body",null),o=x(i,"addToWorld",!0);t?this.setBody(t,o):(o=e.getCollisionGroup(),0<x(o,"objects",[]).length?this.setFromTileCollision(i):this.setFromTileRectangle(i)),(e.flipX||e.flipY)&&(o={x:e.getCenterX(),y:e.getCenterY()},i=e.flipX?-1:1,e=e.flipY?-1:1,y.scale(t,i,e,o))},setFromTileRectangle:function(t){g(t=void 0===t?{}:t,"isStatic")||(t.isStatic=!0),g(t,"addToWorld")||(t.addToWorld=!0);var e=this.tile.getBounds(),i=e.x+e.width/2,o=e.y+e.height/2,i=b.rectangle(i,o,e.width,e.height,t);return this.setBody(i,t.addToWorld),this},setFromTileCollision:function(t){g(t=void 0===t?{}:t,"isStatic")||(t.isStatic=!0),g(t,"addToWorld")||(t.addToWorld=!0);for(var e=this.tile.tilemapLayer.scaleX,i=this.tile.tilemapLayer.scaleY,o=this.tile.getLeft(),s=this.tile.getTop(),n=this.tile.getCollisionGroup(),r=x(n,"objects",[]),a=[],h=0;h<r.length;h++){var l=r[h],c=o+l.x*e,u=s+l.y*i,d=l.width*e,p=l.height*i,f=null;l.rectangle?f=b.rectangle(c+d/2,u+p/2,d,p,t):l.ellipse?f=b.circle(c+d/2,u+p/2,d/2,t):(l.polygon||l.polyline)&&(p=(l.polygon||l.polyline).map(function(t){return{x:t.x*e,y:t.y*i}}),d=v.create(p),c+=(l=v.centre(d)).x,u+=l.y,f=b.fromVertices(c,u,d,t)),f&&a.push(f)}return 1===a.length?this.setBody(a[0],t.addToWorld):1<a.length&&((n=m(t)).parts=a,this.setBody(y.create(n),n.addToWorld)),this},setBody:function(t,e){return void 0===e&&(e=!0),this.body&&this.removeBody(),this.body=t,this.body.gameObject=this,e&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});t.exports=i},19496:(t,e,i)=>{var n=i(66280),l=i(22562),c=i(53402),u=i(95540),s=i(41598);t.exports={parseBody:function(t,e,i,o){void 0===o&&(o={});for(var s=u(i,"fixtures",[]),n=[],r=0;r<s.length;r++)for(var a=this.parseFixture(s[r]),h=0;h<a.length;h++)n.push(a[h]);i=c.clone(i,!0),c.extend(i,o,!0),delete i.fixtures,delete i.type,o=l.create(i);return l.setParts(o,n),l.setPosition(o,{x:t,y:e}),o},parseFixture:function(t){var e,i,o,s=c.extend({},!1,t);return delete s.circle,delete s.vertices,t.circle?(o=u(t.circle,"x"),e=u(t.circle,"y"),i=u(t.circle,"radius"),o=[n.circle(o,e,i,s)]):t.vertices&&(o=this.parseVertices(t.vertices,s)),o},parseVertices:function(t,e){void 0===e&&(e={});for(var i=[],o=0;o<t.length;o++)s.clockwiseSort(t[o]),i.push(l.create(c.extend({position:s.centre(t[o]),vertices:t[o]},e)));return n.flagCoincidentParts(i)}}},85791:(t,e,i)=>{var l=i(66280),c=i(22562);t.exports={parseBody:function(t,e,i,o){void 0===o&&(o={});var s,n=i.vertices;if(1===n.length)o.vertices=n[0],s=c.create(o),l.flagCoincidentParts(s.parts);else{for(var r=[],a=0;a<n.length;a++){var h=c.create({vertices:n[a]});r.push(h)}l.flagCoincidentParts(r),o.parts=r,s=c.create(o)}return s.label=i.label,c.setPosition(s,{x:t,y:e}),s}}},98713:(t,e,i)=>{var r=i(15647),o=i(83419),a=i(69351),s=i(48140),h=i(81388),l=i(1121),n=i(8214),c=i(46975),u=i(53614),d=i(26099),p=i(41598),i=new o({initialize:function(t,e,i){void 0===i&&(i={}),this.scene=t,this.world=e,this.camera=null,this.pointer=null,this.active=!0,this.position=new d,this.body=null,this.part=null,this.constraint=s.create(c(i,{label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}})),this.world.on(l.BEFORE_UPDATE,this.update,this),t.sys.input.on(n.POINTER_DOWN,this.onDown,this),t.sys.input.on(n.POINTER_UP,this.onUp,this)},onDown:function(t){this.pointer||(this.pointer=t,this.camera=t.camera)},onUp:function(t){t===this.pointer&&(this.pointer=null)},getBody:function(t){var e=this.position,i=this.constraint;this.camera.getWorldPoint(t.x,t.y,e);for(var o=a.allBodies(this.world.localWorld),s=0;s<o.length;s++){var n=o[s];if(!n.ignorePointer&&r.contains(n.bounds,e)&&h.canCollide(n.collisionFilter,i.collisionFilter)&&this.hitTestBody(n,e))return this.world.emit(l.DRAG_START,n,this.part,this),!0}return!1},hitTestBody:function(t,e){for(var i=this.constraint,o=t.parts.length,s=1<o?1:0;s<o;s++){var n=t.parts[s];if(p.contains(n.vertices,e))return i.pointA=e,i.pointB={x:e.x-t.position.x,y:e.y-t.position.y},i.bodyB=t,i.angleB=t.angle,u.set(t,!1),this.part=n,this.body=t,!0}return!1},update:function(){var t,e,i=this.pointer,o=this.body;this.active&&i?i.isDown||!o?i.isDown&&this.camera&&(o||this.getBody(i))&&(o=this.body,t=this.position,e=this.constraint,this.camera.getWorldPoint(i.x,i.y,t),e.pointA.x=t.x,e.pointA.y=t.y,u.set(o,!1),this.world.emit(l.DRAG,o,this)):this.stopDrag():o&&this.stopDrag()},stopDrag:function(){var t=this.body,e=this.constraint;e.bodyB=null,e.pointB=null,this.pointer=null,this.body=null,this.part=null,t&&this.world.emit(l.DRAG_END,t,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(l.BEFORE_UPDATE,this.update),this.scene.sys.input.off(n.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(n.POINTER_UP,this.onUp,this)}});t.exports=i},68243:(t,e,i)=>{var n=i(66280),o=i(22562),s=i(83419),y=i(53402),l=i(69351),c=i(48413),u=i(50792),r=i(1121),d=i(95540),p=i(35154),a=i(22562),h=i(35810),f=i(73834),b=i(4372),m=i(31725),i=new s({Extends:u,initialize:function(t,e){u.call(this),this.scene=t,this.engine=c.create(e),this.localWorld=this.engine.world;var i,o=p(e,"gravity",null),o=(o?this.setGravity(o.x,o.y,o.scale):!1===o&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=p(e,"enabled",!0),this.getDelta=p(e,"getDelta",this.update60Hz),d(e,"runner",{})),s=d(o,"fps",!1),n=d(o,"fps",60),r=d(o,"delta",1e3/n),a=d(o,"deltaMin",1e3/n),h=d(o,"deltaMax",1e3/(.5*n)),s=(this.runner={fps:n=s?n:1e3/r,deltaSampleSize:d(o,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:d(o,"isFixed",!1),delta:r,deltaMin:a,deltaMax:h},this.autoUpdate=p(e,"autoUpdate",!0),p(e,"debug",!1));this.drawDebug="object"==typeof s||s,this.debugGraphic,this.debugConfig={showAxes:d(s,"showAxes",!1),showAngleIndicator:d(s,"showAngleIndicator",!1),angleColor:d(s,"angleColor",15208787),showBroadphase:d(s,"showBroadphase",!1),broadphaseColor:d(s,"broadphaseColor",16757760),showBounds:d(s,"showBounds",!1),boundsColor:d(s,"boundsColor",16777215),showVelocity:d(s,"showVelocity",!1),velocityColor:d(s,"velocityColor",44783),showCollisions:d(s,"showCollisions",!1),collisionColor:d(s,"collisionColor",16094476),showSeparations:d(s,"showSeparations",!1),separationColor:d(s,"separationColor",16753920),showBody:d(s,"showBody",!0),showStaticBody:d(s,"showStaticBody",!0),showInternalEdges:d(s,"showInternalEdges",!1),renderFill:d(s,"renderFill",!1),renderLine:d(s,"renderLine",!0),fillColor:d(s,"fillColor",1075465),fillOpacity:d(s,"fillOpacity",1),lineColor:d(s,"lineColor",2678297),lineOpacity:d(s,"lineOpacity",1),lineThickness:d(s,"lineThickness",1),staticFillColor:d(s,"staticFillColor",857979),staticLineColor:d(s,"staticLineColor",1255396),showSleeping:d(s,"showSleeping",!1),staticBodySleepOpacity:d(s,"staticBodySleepOpacity",.7),sleepFillColor:d(s,"sleepFillColor",4605510),sleepLineColor:d(s,"sleepLineColor",10066585),showSensors:d(s,"showSensors",!0),sensorFillColor:d(s,"sensorFillColor",857979),sensorLineColor:d(s,"sensorLineColor",1255396),showPositions:d(s,"showPositions",!0),positionSize:d(s,"positionSize",4),positionColor:d(s,"positionColor",14697178),showJoint:d(s,"showJoint",!0),jointColor:d(s,"jointColor",14737474),jointLineOpacity:d(s,"jointLineOpacity",1),jointLineThickness:d(s,"jointLineThickness",2),pinSize:d(s,"pinSize",4),pinColor:d(s,"pinColor",4382944),springColor:d(s,"springColor",14697184),anchorColor:d(s,"anchorColor",15724527),anchorSize:d(s,"anchorSize",4),showConvexHulls:d(s,"showConvexHulls",!1),hullColor:d(s,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),d(e,"setBounds",!1)&&("boolean"==typeof(n=e.setBounds)?this.setBounds():(o=d(n,"x",0),r=d(n,"y",0),a=d(n,"width",t.sys.scale.width),h=d(n,"height",t.sys.scale.height),s=d(n,"thickness",64),e=d(n,"left",!0),t=d(n,"right",!0),i=d(n,"top",!0),n=d(n,"bottom",!0),this.setBounds(o,r,a,h,s,e,t,i,n)))},setCompositeRenderStyle:function(t){for(var e,i,o=t.bodies,s=t.constraints,n=t.composites,r=0;r<o.length;r++)i=(e=o[r]).render,this.setBodyRenderStyle(e,i.lineColor,i.lineOpacity,i.lineThickness,i.fillColor,i.fillOpacity);for(r=0;r<s.length;r++)i=(e=s[r]).render,this.setConstraintRenderStyle(e,i.lineColor,i.lineOpacity,i.lineThickness,i.pinSize,i.anchorColor,i.anchorSize);for(r=0;r<n.length;r++)e=n[r],this.setCompositeRenderStyle(e);return this},setBodyRenderStyle:function(t,e,i,o,s,n){var r=t.render,a=this.debugConfig;return r&&(null==e&&(e=t.isStatic?a.staticLineColor:a.lineColor),null==i&&(i=a.lineOpacity),null==o&&(o=a.lineThickness),null==s&&(s=t.isStatic?a.staticFillColor:a.fillColor),null==n&&(n=a.fillOpacity),!1!==e&&(r.lineColor=e),!1!==i&&(r.lineOpacity=i),!1!==o&&(r.lineThickness=o),!1!==s&&(r.fillColor=s),!1!==n)&&(r.fillOpacity=n),this},setConstraintRenderStyle:function(t,e,i,o,s,n,r){var a,t=t.render,h=this.debugConfig;return t&&(null==e&&("line"===(a=t.type)?e=h.jointColor:"pin"===a?e=h.pinColor:"spring"===a&&(e=h.springColor)),null==i&&(i=h.jointLineOpacity),null==o&&(o=h.jointLineThickness),null==s&&(s=h.pinSize),null==n&&(n=h.anchorColor),null==r&&(r=h.anchorSize),!1!==e&&(t.lineColor=e),!1!==i&&(t.lineOpacity=i),!1!==o&&(t.lineThickness=o),!1!==s&&(t.pinSize=s),!1!==n&&(t.anchorColor=n),!1!==r)&&(t.anchorSize=r),this},setEventsProxy:function(){var n=this,t=this.engine,e=this.localWorld;this.drawDebug&&(h.on(e,"compositeModified",function(t){n.setCompositeRenderStyle(t)}),h.on(e,"beforeAdd",function(t){for(var e=[].concat(t.object),i=0;i<e.length;i++){var o=e[i],s=o.render;"body"===o.type?n.setBodyRenderStyle(o,s.lineColor,s.lineOpacity,s.lineThickness,s.fillColor,s.fillOpacity):"composite"===o.type?n.setCompositeRenderStyle(o):"constraint"===o.type&&n.setConstraintRenderStyle(o,s.lineColor,s.lineOpacity,s.lineThickness,s.pinSize,s.anchorColor,s.anchorSize)}})),h.on(e,"beforeAdd",function(t){n.emit(r.BEFORE_ADD,t)}),h.on(e,"afterAdd",function(t){n.emit(r.AFTER_ADD,t)}),h.on(e,"beforeRemove",function(t){n.emit(r.BEFORE_REMOVE,t)}),h.on(e,"afterRemove",function(t){n.emit(r.AFTER_REMOVE,t)}),h.on(t,"beforeUpdate",function(t){n.emit(r.BEFORE_UPDATE,t)}),h.on(t,"afterUpdate",function(t){n.emit(r.AFTER_UPDATE,t)}),h.on(t,"collisionStart",function(t){var e,i,o=t.pairs;0<o.length&&(e=o[0].bodyA,i=o[0].bodyB),n.emit(r.COLLISION_START,t,e,i)}),h.on(t,"collisionActive",function(t){var e,i,o=t.pairs;0<o.length&&(e=o[0].bodyA,i=o[0].bodyB),n.emit(r.COLLISION_ACTIVE,t,e,i)}),h.on(t,"collisionEnd",function(t){var e,i,o=t.pairs;0<o.length&&(e=o[0].bodyA,i=o[0].bodyB),n.emit(r.COLLISION_END,t,e,i)})},setBounds:function(t,e,i,o,s,n,r,a,h){return void 0===i&&(i=this.scene.sys.scale.width),void 0===o&&(o=this.scene.sys.scale.height),void 0===r&&(r=!0),void 0===a&&(a=!0),void 0===h&&(h=!0),this.updateWall(n=void 0===n?!0:n,"left",(t=void 0===t?0:t)-(s=void 0===s?64:s),(e=void 0===e?0:e)-s,s,o+2*s),this.updateWall(r,"right",t+i,e-s,s,o+2*s),this.updateWall(a,"top",t,e-s,i,s),this.updateWall(h,"bottom",t,e+o,i,s),this},updateWall:function(t,e,i,o,s,n){var r=this.walls[e];t?(r&&b.remove(this.localWorld,r),this.walls[e]=this.create(i+=s/2,o+=n/2,s,n,{isStatic:!0,friction:0,frictionStatic:0})):(r&&b.remove(this.localWorld,r),this.walls[e]=null)},createDebugGraphic:function(){var t=this.scene.sys.add.graphics({x:0,y:0});return t.setDepth(Number.MAX_VALUE),this.debugGraphic=t,this.drawDebug=!0,t},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(t,e,i){return void 0===e&&(e=1),void 0===i&&(i=.001),this.localWorld.gravity.x=t=void 0===t?0:t,this.localWorld.gravity.y=e,this.localWorld.gravity.scale=i,this},create:function(t,e,i,o,s){t=n.rectangle(t,e,i,o,s);return b.add(this.localWorld,t),t},add:function(t){return b.add(this.localWorld,t),this},remove:function(t,e){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var o=t[i],o=o.body||o;l.remove(this.localWorld,o,e)}return this},removeConstraint:function(t,e){return l.remove(this.localWorld,t,e),this},convertTilemapLayer:function(t,e){var i=t.layer,t=t.getTilesWithin(0,0,i.width,i.height,{isColliding:!0});return this.convertTiles(t,e),this},convertTiles:function(t,e){if(0!==t.length)for(var i=0;i<t.length;i++)new f(this,t[i],e);return this},nextGroup:function(t){return a.nextGroup(t)},nextCategory:function(){return a.nextCategory()},pause:function(){return this.enabled=!1,this.emit(r.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(r.RESUME),this},update:function(t,e){var i,o,s;this.enabled&&this.autoUpdate&&(i=this.engine,o=this.runner,s=i.timing,o.isFixed?e=this.getDelta(t,e):(e=t-o.timePrev||o.delta,o.timePrev=t,o.deltaHistory.push(e),o.deltaHistory=o.deltaHistory.slice(-o.deltaSampleSize),e=(e=(e=Math.min.apply(null,o.deltaHistory))<o.deltaMin?o.deltaMin:e)>o.deltaMax?o.deltaMax:e,o.delta=e),o.timeScalePrev=s.timeScale,o.frameCounter+=1,1e3<=t-o.counterTimestamp&&(o.fps=o.frameCounter*((t-o.counterTimestamp)/1e3),o.counterTimestamp=t,o.frameCounter=0),c.update(i,e))},step:function(t){c.update(this.engine,t)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(t){t=t.hasOwnProperty("body")?t.body:t;return null!==l.get(this.localWorld,t.id,t.type)},getAllBodies:function(){return l.allBodies(this.localWorld)},getAllConstraints:function(){return l.allConstraints(this.localWorld)},getAllComposites:function(){return l.allComposites(this.localWorld)},postUpdate:function(){var t,e,i,o;this.drawDebug&&(t=this.debugConfig,e=this.engine,i=this.debugGraphic,o=l.allBodies(this.localWorld),this.debugGraphic.clear(),t.showBroadphase&&e.broadphase.controller&&this.renderGrid(e.broadphase,i,t.broadphaseColor,.5),t.showBounds&&this.renderBodyBounds(o,i,t.boundsColor,.5),(t.showBody||t.showStaticBody)&&this.renderBodies(o),t.showJoint&&this.renderJoints(),(t.showAxes||t.showAngleIndicator)&&this.renderBodyAxes(o,i,t.showAxes,t.angleColor,.5),t.showVelocity&&this.renderBodyVelocity(o,i,t.velocityColor,1,2),t.showSeparations&&this.renderSeparations(e.pairs.list,i,t.separationColor),t.showCollisions)&&this.renderCollisions(e.pairs.list,i,t.collisionColor)},renderGrid:function(t,e,i,o){e.lineStyle(1,i,o);for(var s=y.keys(t.buckets),n=0;n<s.length;n++){var r=s[n];t.buckets[r].length<2||(r=r.split(/C|R/),e.strokeRect(parseInt(r[1],10)*t.bucketWidth,parseInt(r[2],10)*t.bucketHeight,t.bucketWidth,t.bucketHeight))}return this},renderSeparations:function(t,e,i){e.lineStyle(1,i,1);for(var o=0;o<t.length;o++){var s,n,r,a,h,l=t[o];l.isActive&&(s=(l=l.collision).bodyA,n=l.bodyB,r=s.position,a=n.position,l=l.penetration,h=s.isStatic||n.isStatic?1:4,n.isStatic&&(h=0),e.lineBetween(a.x,a.y,a.x-l.x*h,a.y-l.y*h),h=s.isStatic||n.isStatic?1:4,s.isStatic&&(h=0),e.lineBetween(r.x,r.y,r.x-l.x*h,r.y-l.y*h))}return this},renderCollisions:function(t,e,i){var o,s,n,r,a,h;for(e.lineStyle(1,i,.5),e.fillStyle(i,1),o=0;o<t.length;o++)if((s=t[o]).isActive)for(var l=0;l<s.activeContacts.length;l++){var c=s.activeContacts[l].vertex;e.fillRect(c.x-2,c.y-2,5,5)}for(o=0;o<t.length;o++)(s=t[o]).isActive&&(n=s.collision,0<(r=s.activeContacts).length)&&(a=r[0].vertex.x,h=r[0].vertex.y,2===r.length&&(a=(r[0].vertex.x+r[1].vertex.x)/2,h=(r[0].vertex.y+r[1].vertex.y)/2),n.bodyB===n.supports[0].body||n.bodyA.isStatic?e.lineBetween(a-8*n.normal.x,h-8*n.normal.y,a,h):e.lineBetween(a+8*n.normal.x,h+8*n.normal.y,a,h));return this},renderBodyBounds:function(t,e,i,o){e.lineStyle(1,i,o);for(var s=0;s<t.length;s++){var n=t[s];if(n.render.visible){var r=n.bounds;if(r)e.strokeRect(r.min.x,r.min.y,r.max.x-r.min.x,r.max.y-r.min.y);else for(var a=n.parts,h=1<a.length?1:0;h<a.length;h++){var l=a[h];e.strokeRect(l.bounds.min.x,l.bounds.min.y,l.bounds.max.x-l.bounds.min.x,l.bounds.max.y-l.bounds.min.y)}}}return this},renderBodyAxes:function(t,e,i,o,s){e.lineStyle(1,o,s);for(var n=0;n<t.length;n++){var r,a,h,l=t[n],c=l.parts;if(l.render.visible)if(i)for(a=1<c.length?1:0;a<c.length;a++)for(r=c[a],h=0;h<r.axes.length;h++){var u=r.axes[h];e.lineBetween(r.position.x,r.position.y,r.position.x+20*u.x,r.position.y+20*u.y)}else for(a=1<c.length?1:0;a<c.length;a++)for(r=c[a],h=0;h<r.axes.length;h++)e.lineBetween(r.position.x,r.position.y,(r.vertices[0].x+r.vertices[r.vertices.length-1].x)/2,(r.vertices[0].y+r.vertices[r.vertices.length-1].y)/2)}return this},renderBodyVelocity:function(t,e,i,o,s){e.lineStyle(s,i,o);for(var n=0;n<t.length;n++){var r=t[n];r.render.visible&&e.lineBetween(r.position.x,r.position.y,r.position.x+2*(r.position.x-r.positionPrev.x),r.position.y+2*(r.position.y-r.positionPrev.y))}return this},renderBodies:function(t){for(var e=this.debugGraphic,i=this.debugConfig,o=i.showBody,s=i.showStaticBody,n=i.showSleeping,r=i.showInternalEdges,a=i.showConvexHulls,h=i.renderFill,l=i.renderLine,c=i.staticBodySleepOpacity,u=i.sleepFillColor,d=i.sleepLineColor,p=i.hullColor,f=0;f<t.length;f++){var b,y,m,x,g,v=t[f];!v.render.visible||!s&&v.isStatic||!o&&!v.isStatic||(g=v.render.lineColor,b=v.render.lineOpacity,y=v.render.lineThickness,m=v.render.fillColor,x=v.render.fillOpacity,n&&v.isSleeping&&(v.isStatic?(b*=c,x*=c):(g=d,m=u)),this.renderBody(v,e,r,g=l?g:null,b,y,m=h?m:null,x),g=v.parts.length,a&&1<g&&this.renderConvexHull(v,e,p,y))}},renderBody:function(t,e,i,o,s,n,r,a){void 0===o&&(o=null),void 0===s&&(s=null),void 0===n&&(n=1),void 0===r&&(r=null),void 0===a&&(a=null);for(var h,l,c=this.debugConfig,u=c.sensorFillColor,d=c.sensorLineColor,p=t.parts,f=p.length,b=1<f?1:0;b<f;b++){var y=p[b],m=y.render,x=m.opacity;if(m.visible&&0!==x&&(!y.isSensor||c.showSensors)){m=y.circleRadius;if(e.beginPath(),y.isSensor?(null!==r&&e.fillStyle(u,a*x),null!==o&&e.lineStyle(n,d,s*x)):(null!==r&&e.fillStyle(r,a*x),null!==o&&e.lineStyle(n,o,s*x)),m)e.arc(y.position.x,y.position.y,m,0,2*Math.PI);else{var g=y.vertices,v=g.length;e.moveTo(g[0].x,g[0].y);for(var _=1;_<v;_++){var w=g[_];!g[_-1].isInternal||i?e.lineTo(w.x,w.y):e.moveTo(w.x,w.y),_<v&&w.isInternal&&!i&&e.moveTo(g[w=(_+1)%v].x,g[w].y)}e.closePath()}null!==r&&e.fillPath(),null!==o&&e.strokePath()}}return c.showPositions&&!t.isStatic&&(h=t.position.x,t=t.position.y,l=Math.ceil(c.positionSize/2),e.fillStyle(c.positionColor,1),e.fillRect(h-l,t-l,c.positionSize,c.positionSize)),this},renderConvexHull:function(t,e,i,o){if(void 0===o&&(o=1),1<t.parts.length){var s=t.vertices;e.lineStyle(o,i),e.beginPath(),e.moveTo(s[0].x,s[0].y);for(var n=1;n<s.length;n++)e.lineTo(s[n].x,s[n].y);e.lineTo(s[0].x,s[0].y),e.strokePath()}return this},renderJoints:function(){for(var t=this.debugGraphic,e=l.allConstraints(this.localWorld),i=0;i<e.length;i++){var o=e[i].render,s=o.lineColor,n=o.lineOpacity,r=o.lineThickness,a=o.pinSize,h=o.anchorColor,o=o.anchorSize;this.renderConstraint(e[i],t,s,n,r,a,h,o)}},renderConstraint:function(t,e,i,o,s,n,r,a){var h=t.render;if(h.visible&&t.pointA&&t.pointB){e.lineStyle(s,i,o);var l,s=t.bodyA,i=t.bodyB,c=s?m.add(s.position,t.pointA):t.pointA;if("pin"===h.type)e.strokeCircle(c.x,c.y,n);else{if(l=i?m.add(i.position,t.pointB):t.pointB,e.beginPath(),e.moveTo(c.x,c.y),"spring"===h.type)for(var u,d=m.sub(l,c),p=m.perp(m.normalise(d)),f=Math.ceil(y.clamp(t.length/5,12,20)),b=1;b<f;b+=1)e.lineTo(c.x+d.x*(b/f)+p.x*(u=b%2==0?1:-1)*4,c.y+d.y*(b/f)+p.y*u*4);e.lineTo(l.x,l.y)}e.strokePath(),h.anchors&&0<a&&(e.fillStyle(r),e.fillCircle(c.x,c.y,a),e.fillCircle(l.x,l.y,a))}return this},resetCollisionIDs:function(){return o._nextCollidingGroupId=1,o._nextNonCollidingGroupId=-1,o._nextCategory=1,this},shutdown:function(){h.off(this.engine),this.removeAllListeners(),b.clear(this.localWorld,!1),c.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});t.exports=i},70410:t=>{t.exports={setBounce:function(t){return this.body.restitution=t,this}}},66968:t=>{t.exports={setCollisionCategory:function(t){return this.body.collisionFilter.category=t,this},setCollisionGroup:function(t){return this.body.collisionFilter.group=t,this},setCollidesWith:function(t){var e=0;if(Array.isArray(t))for(var i=0;i<t.length;i++)e|=t[i];else e=t;return this.body.collisionFilter.mask=e,this},setOnCollide:function(t){return this.body.onCollideCallback=t,this},setOnCollideEnd:function(t){return this.body.onCollideEndCallback=t,this},setOnCollideActive:function(t){return this.body.onCollideActiveCallback=t,this},setOnCollideWith:function(t,e){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var o=t[i].hasOwnProperty("body")?t[i].body:t[i];this.body.setOnCollideWith(o,e)}return this}}},51607:(t,e,i)=>{var o=i(22562);t.exports={applyForce:function(t){return this._tempVec2.set(this.body.position.x,this.body.position.y),o.applyForce(this.body,this._tempVec2,t),this},applyForceFrom:function(t,e){return o.applyForce(this.body,t,e),this},thrust:function(t){var e=this.body.angle;return this._tempVec2.set(t*Math.cos(e),t*Math.sin(e)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(t){var e=this.body.angle-Math.PI/2;return this._tempVec2.set(t*Math.cos(e),t*Math.sin(e)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(t){var e=this.body.angle+Math.PI/2;return this._tempVec2.set(t*Math.cos(e),t*Math.sin(e)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(t){var e=this.body.angle-Math.PI;return this._tempVec2.set(t*Math.cos(e),t*Math.sin(e)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}}},5436:t=>{t.exports={setFriction:function(t,e,i){return this.body.friction=t,void 0!==e&&(this.body.frictionAir=e),void 0!==i&&(this.body.frictionStatic=i),this},setFrictionAir:function(t){return this.body.frictionAir=t,this},setFrictionStatic:function(t){return this.body.frictionStatic=t,this}}},39858:t=>{t.exports={setIgnoreGravity:function(t){return this.body.ignoreGravity=t,this}}},37302:(t,e,i)=>{var o=i(22562),s=i(26099);t.exports={setMass:function(t){return o.setMass(this.body,t),this},setDensity:function(t){return o.setDensity(this.body,t),this},centerOfMass:{get:function(){return new s(this.body.centerOfMass.x,this.body.centerOfMass.y)}}}},39132:t=>{t.exports={setSensor:function(t){return this.body.isSensor=t,this},isSensor:function(){return this.body.isSensor}}},57772:(t,e,i)=>{var d=i(66280),p=i(22562),a=i(43855),f=i(95540),b=i(19496),y=i(85791),m=i(41598);t.exports={setRectangle:function(t,e,i){return this.setBody({type:"rectangle",width:t,height:e},i)},setCircle:function(t,e){return this.setBody({type:"circle",radius:t},e)},setPolygon:function(t,e,i){return this.setBody({type:"polygon",sides:e,radius:t},i)},setTrapezoid:function(t,e,i,o){return this.setBody({type:"trapezoid",width:t,height:e,slope:i},o)},setExistingBody:function(t,e){void 0===e&&(e=!0),this.body&&this.world.remove(this.body,!0),this.body=t;for(var i=0;i<t.parts.length;i++)t.parts[i].gameObject=this;var o,s,n,r=this;return t.destroy=function(){r.world.remove(r.body,!0),r.body.gameObject=null},e&&(this.world.has(t)&&this.world.remove(t,!0),this.world.add(t)),this._originComponent&&(e=t.render.sprite.xOffset,o=t.render.sprite.yOffset,s=t.centerOfMass.x,n=t.centerOfMass.y,a(s,.5)&&a(n,.5)?this.setOrigin(e+.5,o+.5):(s=t.centerOffset.x,n=t.centerOffset.y,this.setOrigin(e+s/this.displayWidth,o+n/this.displayHeight))),this},setBody:function(t,e){if(t){var i=f(t="string"==typeof t?{type:t}:t,"type","rectangle"),o=f(t,"x",this._tempVec2.x),s=f(t,"y",this._tempVec2.y),n=f(t,"width",this.width),r=f(t,"height",this.height);switch(i){case"rectangle":l=d.rectangle(o,s,n,r,e);break;case"circle":var a=f(t,"radius",Math.max(n,r)/2),h=f(t,"maxSides",25),l=d.circle(o,s,a,e,h);break;case"trapezoid":a=f(t,"slope",.5);l=d.trapezoid(o,s,n,r,a,e);break;case"polygon":h=f(t,"sides",5),a=f(t,"radius",Math.max(n,r)/2);l=d.polygon(o,s,h,a,e);break;case"fromVertices":case"fromVerts":var c,u,h=f(t,"verts",null);h&&("string"==typeof h&&(h=m.fromPath(h)),l=this.body&&!this.body.hasOwnProperty("temp")?(p.setVertices(this.body,h),this.body):(a=f(t,"flagInternal",!1),c=f(t,"removeCollinear",.01),u=f(t,"minimumArea",10),d.fromVertices(o,s,h,e,a,c,u)));break;case"fromPhysicsEditor":l=b.parseBody(o,s,t,e);break;case"fromPhysicsTracer":l=y.parseBody(o,s,t,e)}l&&this.setExistingBody(l,t.addToWorld)}return this}}},38083:(t,e,i)=>{var o=i(1121),s=i(53614),n=i(35810);t.exports={setToSleep:function(){return s.set(this.body,!0),this},setAwake:function(){return s.set(this.body,!1),this},setSleepThreshold:function(t){return this.body.sleepThreshold=t=void 0===t?60:t,this},setSleepEvents:function(t,e){return this.setSleepStartEvent(t),this.setSleepEndEvent(e),this},setSleepStartEvent:function(t){var e;return t?(e=this.world,n.on(this.body,"sleepStart",function(t){e.emit(o.SLEEP_START,t,this)})):n.off(this.body,"sleepStart"),this},setSleepEndEvent:function(t){var e;return t?(e=this.world,n.on(this.body,"sleepEnd",function(t){e.emit(o.SLEEP_END,t,this)})):n.off(this.body,"sleepEnd"),this}}},90556:(t,e,i)=>{var o=i(22562);t.exports={setStatic:function(t){return o.setStatic(this.body,t),this},isStatic:function(){return this.body.isStatic}}},85436:(t,e,i)=>{var n=i(22562),o=i(36383),s=i(86554),r=i(30954);t.exports={x:{get:function(){return this.body.position.x},set:function(t){this._tempVec2.set(t,this.y),n.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(t){this._tempVec2.set(this.x,t),n.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(t){var e=1/this._scaleX,i=1/this._scaleY;this._scaleX=t,0===this._scaleX?this.renderFlags&=-5:this.renderFlags|=4,n.scale(this.body,e,i),n.scale(this.body,t,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(t){var e=1/this._scaleX,i=1/this._scaleY;this._scaleY=t,0===this._scaleY?this.renderFlags&=-5:this.renderFlags|=4,n.scale(this.body,e,i),n.scale(this.body,this._scaleX,t)}},angle:{get:function(){return r(this.body.angle*o.RAD_TO_DEG)},set:function(t){this.rotation=r(t)*o.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(t){this._rotation=s(t),n.setAngle(this.body,this._rotation)}},setPosition:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._tempVec2.set(t,e),n.setPosition(this.body,this._tempVec2),this},setRotation:function(t){return this._rotation=s(t=void 0===t?0:t),n.setAngle(this.body,t),this},setFixedRotation:function(){return n.setInertia(this.body,1/0),this},setAngle:function(t){return this.angle=t=void 0===t?0:t,n.setAngle(this.body,this.rotation),this},setScale:function(t,e,i){void 0===t&&(t=1),void 0===e&&(e=t);var o=1/this._scaleX,s=1/this._scaleY;return this._scaleX=t,this._scaleY=e,n.scale(this.body,o,s,i),n.scale(this.body,t,e,i),this}}},42081:(t,e,i)=>{var o=i(22562);t.exports={setVelocityX:function(t){return this._tempVec2.set(t,this.body.velocity.y),o.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(t){return this._tempVec2.set(this.body.velocity.x,t),o.setVelocity(this.body,this._tempVec2),this},setVelocity:function(t,e){return this._tempVec2.set(t,e),o.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return o.getVelocity(this.body)},setAngularVelocity:function(t){return o.setAngularVelocity(this.body,t),this},getAngularVelocity:function(){return o.getAngularVelocity(this.body)},setAngularSpeed:function(t){return o.setAngularSpeed(this.body,t),this},getAngularSpeed:function(){return o.getAngularSpeed(this.body)}}},31884:(t,e,i)=>{t.exports={Bounce:i(70410),Collision:i(66968),Force:i(51607),Friction:i(5436),Gravity:i(39858),Mass:i(37302),Sensor:i(39132),SetBody:i(57772),Sleep:i(38083),Static:i(90556),Transform:i(85436),Velocity:i(42081)}},85608:t=>{t.exports="afteradd"},1213:t=>{t.exports="afterremove"},25968:t=>{t.exports="afterupdate"},67205:t=>{t.exports="beforeadd"},39438:t=>{t.exports="beforeremove"},44823:t=>{t.exports="beforeupdate"},92593:t=>{t.exports="collisionactive"},60128:t=>{t.exports="collisionend"},76861:t=>{t.exports="collisionstart"},92362:t=>{t.exports="dragend"},76408:t=>{t.exports="drag"},93971:t=>{t.exports="dragstart"},5656:t=>{t.exports="pause"},47861:t=>{t.exports="resume"},79099:t=>{t.exports="sleepend"},35906:t=>{t.exports="sleepstart"},1121:(t,e,i)=>{t.exports={AFTER_ADD:i(85608),AFTER_REMOVE:i(1213),AFTER_UPDATE:i(25968),BEFORE_ADD:i(67205),BEFORE_REMOVE:i(39438),BEFORE_UPDATE:i(44823),COLLISION_ACTIVE:i(92593),COLLISION_END:i(60128),COLLISION_START:i(76861),DRAG_END:i(92362),DRAG:i(76408),DRAG_START:i(93971),PAUSE:i(5656),RESUME:i(47861),SLEEP_END:i(79099),SLEEP_START:i(35906)}},3875:(t,e,i)=>{t.exports={BodyBounds:i(68174),Components:i(31884),Events:i(1121),Factory:i(28137),MatterGameObject:i(75803),Image:i(23181),Matter:i(19933),MatterPhysics:i(42045),PolyDecomp:i(55973),Sprite:i(34803),TileBody:i(73834),PhysicsEditorParser:i(19496),PhysicsJSONParser:i(85791),PointerConstraint:i(98713),World:i(68243)}},22562:(t,e,i)=>{var o,u={},d=(t.exports=u,i(41598)),l=i(31725),s=i(53614),c=i(53402),p=i(15647),f=i(66615);u._timeCorrection=!0,u._inertiaScale=4,u._nextCollidingGroupId=1,u._nextNonCollidingGroupId=-1,u._nextCategory=1,u._baseDelta=1e3/60,u.create=function(t){var e={id:c.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:1e3/60,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}},e=(!t.hasOwnProperty("position")&&t.hasOwnProperty("vertices")?t.position=d.centre(t.vertices):t.hasOwnProperty("vertices")||(e.vertices=d.fromPath("L 0 0 L 40 0 L 40 40 L 0 40")),c.extend(e,t));return o(e,t),e.setOnCollideWith=function(t,e){return e?this.onCollideWith[t.id]=e:delete this.onCollideWith[t.id],this},e},u.nextGroup=function(t){return t?u._nextNonCollidingGroupId--:u._nextCollidingGroupId++},u.nextCategory=function(){return u._nextCategory=u._nextCategory<<1,u._nextCategory},o=function(t,e){var i,o,s,n;e=e||{},u.set(t,{bounds:t.bounds||p.create(t.vertices),positionPrev:t.positionPrev||l.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),d.rotate(t.vertices,t.angle,t.position),f.rotate(t.axes,t.angle),p.update(t.bounds,t.vertices,t.velocity),u.set(t,{axes:e.axes||t.axes,area:e.area||t.area,mass:e.mass||t.mass,inertia:e.inertia||t.inertia}),1===t.parts.length&&(e=t.bounds,i=t.centerOfMass,o=t.centerOffset,s=e.max.x-e.min.x,n=e.max.y-e.min.y,i.x=-(e.min.x-t.position.x)/s,i.y=-(e.min.y-t.position.y)/n,o.x=s*i.x,o.y=n*i.y)},u.set=function(t,e,i){for(var o in"string"==typeof e&&(o=e,(e={})[o]=i),e)if(Object.prototype.hasOwnProperty.call(e,o))switch(i=e[o],o){case"isStatic":u.setStatic(t,i);break;case"isSleeping":s.set(t,i);break;case"mass":u.setMass(t,i);break;case"density":u.setDensity(t,i);break;case"inertia":u.setInertia(t,i);break;case"vertices":u.setVertices(t,i);break;case"position":u.setPosition(t,i);break;case"angle":u.setAngle(t,i);break;case"velocity":u.setVelocity(t,i);break;case"angularVelocity":u.setAngularVelocity(t,i);break;case"speed":u.setSpeed(t,i);break;case"angularSpeed":u.setAngularSpeed(t,i);break;case"parts":u.setParts(t,i);break;case"centre":u.setCentre(t,i);break;default:t[o]=i}},u.setStatic=function(t,e){for(var i=0;i<t.parts.length;i++){var o=t.parts[i];e?(o.isStatic||(o._original={restitution:o.restitution,friction:o.friction,mass:o.mass,inertia:o.inertia,density:o.density,inverseMass:o.inverseMass,inverseInertia:o.inverseInertia}),o.restitution=0,o.friction=1,o.mass=o.inertia=o.density=1/0,o.inverseMass=o.inverseInertia=0,o.positionPrev.x=o.position.x,o.positionPrev.y=o.position.y,o.anglePrev=o.angle,o.angularVelocity=0,o.speed=0,o.angularSpeed=0,o.motion=0):o._original&&(o.restitution=o._original.restitution,o.friction=o._original.friction,o.mass=o._original.mass,o.inertia=o._original.inertia,o.density=o._original.density,o.inverseMass=o._original.inverseMass,o.inverseInertia=o._original.inverseInertia,o._original=null),o.isStatic=e}},u.setMass=function(t,e){var i=t.inertia/(t.mass/6);t.inertia=e/6*i,t.inverseInertia=1/t.inertia,t.mass=e,t.inverseMass=1/t.mass,t.density=t.mass/t.area},u.setDensity=function(t,e){u.setMass(t,e*t.area),t.density=e},u.setInertia=function(t,e){t.inertia=e,t.inverseInertia=1/t.inertia},u.setVertices=function(t,e){e[0].body===t?t.vertices=e:t.vertices=d.create(e,t),t.axes=f.fromVertices(t.vertices),t.area=d.area(t.vertices),u.setMass(t,t.density*t.area);e=d.centre(t.vertices);d.translate(t.vertices,e,-1),u.setInertia(t,u._inertiaScale*d.inertia(t.vertices,t.mass)),d.translate(t.vertices,t.position),p.update(t.bounds,t.vertices,t.velocity)},u.setParts=function(t,e,i){for(e=e.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,n=0;n<e.length;n++){var o=e[n];o!==t&&(o.parent=t).parts.push(o)}if(1!==t.parts.length){if(i=void 0===i||i){for(var s=[],n=0;n<e.length;n++)s=s.concat(e[n].vertices);d.clockwiseSort(s);var i=d.hull(s),r=d.centre(i);u.setVertices(t,i),d.translate(t.vertices,r)}var i=u._totalProperties(t),r=i.centre.x,a=i.centre.y,h=t.bounds,l=t.centerOfMass,c=t.centerOffset;p.update(h,t.vertices,t.velocity),l.x=-(h.min.x-r)/(h.max.x-h.min.x),l.y=-(h.min.y-a)/(h.max.y-h.min.y),c.x=r,c.y=a,t.area=i.area,(t.parent=t).position.x=r,t.position.y=a,t.positionPrev.x=r,t.positionPrev.y=a,u.setMass(t,i.mass),u.setInertia(t,i.inertia),u.setPosition(t,i.centre)}},u.setCentre=function(t,e,i){i?(t.positionPrev.x+=e.x,t.positionPrev.y+=e.y,t.position.x+=e.x,t.position.y+=e.y):(t.positionPrev.x=e.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=e.y-(t.position.y-t.positionPrev.y),t.position.x=e.x,t.position.y=e.y)},u.setPosition=function(t,e,i){var o=l.sub(e,t.position);i?(t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.velocity.x=o.x,t.velocity.y=o.y,t.speed=l.magnitude(o)):(t.positionPrev.x+=o.x,t.positionPrev.y+=o.y);for(var s=0;s<t.parts.length;s++){var n=t.parts[s];n.position.x+=o.x,n.position.y+=o.y,d.translate(n.vertices,o),p.update(n.bounds,n.vertices,t.velocity)}},u.setAngle=function(t,e,i){var o=e-t.angle;i?(t.anglePrev=t.angle,t.angularVelocity=o,t.angularSpeed=Math.abs(o)):t.anglePrev+=o;for(var s=0;s<t.parts.length;s++){var n=t.parts[s];n.angle+=o,d.rotate(n.vertices,o,t.position),f.rotate(n.axes,o),p.update(n.bounds,n.vertices,t.velocity),0<s&&l.rotateAbout(n.position,o,t.position,n.position)}},u.setVelocity=function(t,e){var i=t.deltaTime/u._baseDelta;t.positionPrev.x=t.position.x-e.x*i,t.positionPrev.y=t.position.y-e.y*i,t.velocity.x=(t.position.x-t.positionPrev.x)/i,t.velocity.y=(t.position.y-t.positionPrev.y)/i,t.speed=l.magnitude(t.velocity)},u.getVelocity=function(t){var e=u._baseDelta/t.deltaTime;return{x:(t.position.x-t.positionPrev.x)*e,y:(t.position.y-t.positionPrev.y)*e}},u.getSpeed=function(t){return l.magnitude(u.getVelocity(t))},u.setSpeed=function(t,e){u.setVelocity(t,l.mult(l.normalise(u.getVelocity(t)),e))},u.setAngularVelocity=function(t,e){var i=t.deltaTime/u._baseDelta;t.anglePrev=t.angle-e*i,t.angularVelocity=(t.angle-t.anglePrev)/i,t.angularSpeed=Math.abs(t.angularVelocity)},u.getAngularVelocity=function(t){return(t.angle-t.anglePrev)*u._baseDelta/t.deltaTime},u.getAngularSpeed=function(t){return Math.abs(u.getAngularVelocity(t))},u.setAngularSpeed=function(t,e){u.setAngularVelocity(t,c.sign(u.getAngularVelocity(t))*e)},u.translate=function(t,e,i){u.setPosition(t,l.add(t.position,e),i)},u.rotate=function(t,e,i,o){var s,n,r,a;i&&(s=Math.cos(e),n=Math.sin(e),r=t.position.x-i.x,a=t.position.y-i.y,u.setPosition(t,{x:i.x+(r*s-a*n),y:i.y+(r*n+a*s)},o)),u.setAngle(t,t.angle+e,o)},u.scale=function(t,e,i,o){var s=0,n=0;o=o||t.position;for(var r=t.inertia===1/0,a=0;a<t.parts.length;a++){var h=t.parts[a];h.scale.x=e,h.scale.y=i,d.scale(h.vertices,e,i,o),h.axes=f.fromVertices(h.vertices),h.area=d.area(h.vertices),u.setMass(h,t.density*h.area),d.translate(h.vertices,{x:-h.position.x,y:-h.position.y}),u.setInertia(h,u._inertiaScale*d.inertia(h.vertices,h.mass)),d.translate(h.vertices,{x:h.position.x,y:h.position.y}),0<a&&(s+=h.area,n+=h.inertia),h.position.x=o.x+(h.position.x-o.x)*e,h.position.y=o.y+(h.position.y-o.y)*i,p.update(h.bounds,h.vertices,t.velocity)}1<t.parts.length&&(t.area=s,t.isStatic||(u.setMass(t,t.density*s),u.setInertia(t,n))),t.circleRadius&&(e===i?t.circleRadius*=e:t.circleRadius=null),r&&u.setInertia(t,1/0)},u.update=function(t,e){var i=(e=(void 0!==e?e:1e3/60)*t.timeScale)*e,o=u._timeCorrection?e/(t.deltaTime||e):1,s=1-t.frictionAir*(e/c._baseDelta),n=(t.position.x-t.positionPrev.x)*o,r=(t.position.y-t.positionPrev.y)*o;t.velocity.x=n*s+t.force.x/t.mass*i,t.velocity.y=r*s+t.force.y/t.mass*i,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.deltaTime=e,t.angularVelocity=(t.angle-t.anglePrev)*s*o+t.torque/t.inertia*i,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=l.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var a=0;a<t.parts.length;a++){var h=t.parts[a];d.translate(h.vertices,t.velocity),0<a&&(h.position.x+=t.velocity.x,h.position.y+=t.velocity.y),0!==t.angularVelocity&&(d.rotate(h.vertices,t.angularVelocity,t.position),f.rotate(h.axes,t.angularVelocity),0<a)&&l.rotateAbout(h.position,t.angularVelocity,t.position,h.position),p.update(h.bounds,h.vertices,t.velocity)}},u.updateVelocities=function(t){var e=u._baseDelta/t.deltaTime,i=t.velocity;i.x=(t.position.x-t.positionPrev.x)*e,i.y=(t.position.y-t.positionPrev.y)*e,t.speed=Math.sqrt(i.x*i.x+i.y*i.y),t.angularVelocity=(t.angle-t.anglePrev)*e,t.angularSpeed=Math.abs(t.angularVelocity)},u.applyForce=function(t,e,i){var o=e.x-t.position.x,e=e.y-t.position.y;t.force.x+=i.x,t.force.y+=i.y,t.torque+=o*i.y-e*i.x},u._totalProperties=function(t){for(var e={mass:0,area:0,inertia:0,centre:{x:0,y:0}},i=1===t.parts.length?0:1;i<t.parts.length;i++){var o=t.parts[i],s=o.mass!==1/0?o.mass:1;e.mass+=s,e.area+=o.area,e.inertia+=o.inertia,e.centre=l.add(e.centre,l.mult(o.position,s))}return e.centre=l.div(e.centre,e.mass),e}},69351:(t,e,i)=>{var u={},r=(t.exports=u,i(35810)),n=i(53402),a=i(15647),d=i(22562);u.create=function(t){return n.extend({id:n.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},t)},u.setModified=function(t,e,i,o){if(r.trigger(t,"compositeModified",t),(t.isModified=e)&&t.cache&&(t.cache.allBodies=null,t.cache.allConstraints=null,t.cache.allComposites=null),i&&t.parent&&u.setModified(t.parent,e,i,o),o)for(var s=0;s<t.composites.length;s++){var n=t.composites[s];u.setModified(n,e,i,o)}},u.add=function(t,e){var i=[].concat(e);r.trigger(t,"beforeAdd",{object:e});for(var o=0;o<i.length;o++){var s=i[o];switch(s.type){case"body":s.parent!==s?n.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)"):u.addBody(t,s);break;case"constraint":u.addConstraint(t,s);break;case"composite":u.addComposite(t,s);break;case"mouseConstraint":u.addConstraint(t,s.constraint)}}return r.trigger(t,"afterAdd",{object:e}),t},u.remove=function(t,e,i){var o=[].concat(e);r.trigger(t,"beforeRemove",{object:e});for(var s=0;s<o.length;s++){var n=o[s];switch(n.type){case"body":u.removeBody(t,n,i);break;case"constraint":u.removeConstraint(t,n,i);break;case"composite":u.removeComposite(t,n,i);break;case"mouseConstraint":u.removeConstraint(t,n.constraint)}}return r.trigger(t,"afterRemove",{object:e}),t},u.addComposite=function(t,e){return t.composites.push(e),e.parent=t,u.setModified(t,!0,!0,!1),t},u.removeComposite=function(t,e,i){var o=n.indexOf(t.composites,e);if(-1!==o&&u.removeCompositeAt(t,o),i)for(var s=0;s<t.composites.length;s++)u.removeComposite(t.composites[s],e,!0);return t},u.removeCompositeAt=function(t,e){return t.composites.splice(e,1),u.setModified(t,!0,!0,!1),t},u.addBody=function(t,e){return t.bodies.push(e),u.setModified(t,!0,!0,!1),t},u.removeBody=function(t,e,i){var o=n.indexOf(t.bodies,e);if(-1!==o&&u.removeBodyAt(t,o),i)for(var s=0;s<t.composites.length;s++)u.removeBody(t.composites[s],e,!0);return t},u.removeBodyAt=function(t,e){return t.bodies.splice(e,1),u.setModified(t,!0,!0,!1),t},u.addConstraint=function(t,e){return t.constraints.push(e),u.setModified(t,!0,!0,!1),t},u.removeConstraint=function(t,e,i){var o=n.indexOf(t.constraints,e);if(-1!==o&&u.removeConstraintAt(t,o),i)for(var s=0;s<t.composites.length;s++)u.removeConstraint(t.composites[s],e,!0);return t},u.removeConstraintAt=function(t,e){return t.constraints.splice(e,1),u.setModified(t,!0,!0,!1),t},u.clear=function(t,e,i){if(i)for(var o=0;o<t.composites.length;o++)u.clear(t.composites[o],e,!0);return e?t.bodies=t.bodies.filter(function(t){return t.isStatic}):t.bodies.length=0,t.constraints.length=0,t.composites.length=0,u.setModified(t,!0,!0,!1),t},u.allBodies=function(t){if(t.cache&&t.cache.allBodies)return t.cache.allBodies;for(var e=[].concat(t.bodies),i=0;i<t.composites.length;i++)e=e.concat(u.allBodies(t.composites[i]));return t.cache&&(t.cache.allBodies=e),e},u.allConstraints=function(t){if(t.cache&&t.cache.allConstraints)return t.cache.allConstraints;for(var e=[].concat(t.constraints),i=0;i<t.composites.length;i++)e=e.concat(u.allConstraints(t.composites[i]));return t.cache&&(t.cache.allConstraints=e),e},u.allComposites=function(t){if(t.cache&&t.cache.allComposites)return t.cache.allComposites;for(var e=[].concat(t.composites),i=0;i<t.composites.length;i++)e=e.concat(u.allComposites(t.composites[i]));return t.cache&&(t.cache.allComposites=e),e},u.get=function(t,e,i){var o;switch(i){case"body":o=u.allBodies(t);break;case"constraint":o=u.allConstraints(t);break;case"composite":o=u.allComposites(t).concat(t)}return!o||0===(i=o.filter(function(t){return t.id.toString()===e.toString()})).length?null:i[0]},u.move=function(t,e,i){return u.remove(t,e),u.add(i,e),t},u.rebase=function(t){for(var e=u.allBodies(t).concat(u.allConstraints(t)).concat(u.allComposites(t)),i=0;i<e.length;i++)e[i].id=n.nextId();return t},u.translate=function(t,e,i){for(var o=i?u.allBodies(t):t.bodies,s=0;s<o.length;s++)d.translate(o[s],e);return t},u.rotate=function(t,e,i,o){for(var s=Math.cos(e),n=Math.sin(e),r=o?u.allBodies(t):t.bodies,a=0;a<r.length;a++){var h=r[a],l=h.position.x-i.x,c=h.position.y-i.y;d.setPosition(h,{x:i.x+(l*s-c*n),y:i.y+(l*n+c*s)}),d.rotate(h,e)}return t},u.scale=function(t,e,i,o,s){for(var n=s?u.allBodies(t):t.bodies,r=0;r<n.length;r++){var a=n[r],h=a.position.x-o.x,l=a.position.y-o.y;d.setPosition(a,{x:o.x+h*e,y:o.y+l*i}),d.scale(a,e,i)}return t},u.bounds=function(t){for(var e=u.allBodies(t),i=[],o=0;o<e.length;o+=1){var s=e[o];i.push(s.bounds.min,s.bounds.max)}return a.create(i)}},4372:(t,e,i)=>{var o={},t=(t.exports=o,i(69351));o.create=t.create,o.add=t.add,o.remove=t.remove,o.clear=t.clear,o.addComposite=t.addComposite,o.addBody=t.addBody,o.addConstraint=t.addConstraint},52284:(t,e,i)=>{var h={};t.exports=h;var l=i(41598),c=i(4506),b=[],u={overlap:0,axis:null},d={overlap:0,axis:null};h.create=function(t,e){return{pair:null,collided:!1,bodyA:t,bodyB:e,parentA:t.parent,parentB:e.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},h.collides=function(t,e,i){var o,s,n,r,a;return h._overlapAxes(u,t.vertices,e.vertices,t.axes),u.overlap<=0||(h._overlapAxes(d,e.vertices,t.vertices,e.axes),d.overlap<=0)?null:((i=i&&i.table[c.id(t,e)])?o=i.collision:((o=h.create(t,e)).collided=!0,o.bodyA=t.id<e.id?t:e,o.bodyB=t.id<e.id?e:t,o.parentA=o.bodyA.parent,o.parentB=o.bodyB.parent),t=o.bodyA,e=o.bodyB,i=o.normal,s=o.supports,n=(r=(a=u.overlap<d.overlap?u:d).axis).x,r=r.y,n*(e.position.x-t.position.x)+r*(e.position.y-t.position.y)<0?(i.x=n,i.y=r):(i.x=-n,i.y=-r),o.tangent.x=-i.y,o.tangent.y=i.x,o.depth=a.overlap,o.penetration.x=i.x*o.depth,o.penetration.y=i.y*o.depth,n=h._findSupports(t,e,i,1),l.contains(t.vertices,n[r=0])&&(s[r++]=n[0]),l.contains(t.vertices,n[1])&&(s[r++]=n[1]),r<2&&(a=h._findSupports(e,t,i,-1),l.contains(e.vertices,a[0])&&(s[r++]=a[0]),r<2)&&l.contains(e.vertices,a[1])&&(s[r++]=a[1]),0===r&&(s[r++]=n[0]),s.length=r,o)},h._overlapAxes=function(t,e,i,o){for(var s,n,r=e.length,a=i.length,h=e[0].x,l=e[0].y,c=i[0].x,u=i[0].y,d=o.length,p=Number.MAX_VALUE,f=0,b=0;b<d;b++){for(var y=o[b],m=y.x,x=y.y,g=h*m+l*x,v=c*m+u*x,_=g,w=v,S=1;S<r;S+=1)(n=e[S].x*m+e[S].y*x)>_?_=n:n<g&&(g=n);for(S=1;S<a;S+=1)(n=i[S].x*m+i[S].y*x)>w?w=n:n<v&&(v=n);if((y=(y=_-v)<(s=w-g)?y:s)<p&&(f=b,(p=y)<=0))break}t.axis=o[f],t.overlap=p},h._projectToAxis=function(t,e,i){for(var o=e[0].x*i.x+e[0].y*i.y,s=o,n=1;n<e.length;n+=1){var r=e[n].x*i.x+e[n].y*i.y;s<r?s=r:r<o&&(o=r)}t.min=o,t.max=s},h._findSupports=function(t,e,i,o){for(var s,n,r,a=e.vertices,h=a.length,l=t.position.x,c=t.position.y,u=i.x*o,d=i.y*o,p=Number.MAX_VALUE,f=0;f<h;f+=1)(r=u*(l-(n=a[f]).x)+d*(c-n.y))<p&&(p=r,s=n);return p=u*(l-(e=a[(h+s.index-1)%h]).x)+d*(c-e.y),u*(l-(n=a[(s.index+1)%h]).x)+d*(c-n.y)<p?(b[0]=s,b[1]=n):(b[0]=s,b[1]=e),b}},43424:t=>{var e={};(t.exports=e).create=function(t){return{vertex:t,normalImpulse:0,tangentImpulse:0}}},81388:(t,e,i)=>{var T={},o=(t.exports=T,i(53402)),P=i(52284);T.create=function(t){return o.extend({bodies:[],pairs:null},t)},T.setBodies=function(t,e){t.bodies=e.slice(0)},T.clear=function(t){t.bodies=[]},T.collisions=function(t){var e,i=[],o=t.pairs,s=t.bodies,n=s.length,r=T.canCollide,a=P.collides;for(s.sort(T._compareBoundsX),e=0;e<n;e++)for(var h,l=s[e],c=(l.bounds,l.bounds.max.x),u=l.bounds.max.y,d=l.bounds.min.y,p=l.isStatic||l.isSleeping,f=l.parts.length,b=1===f,y=e+1;y<n;y++){var m=s[y];if((C=m.bounds).min.x>c)break;if(!(u<C.min.y||d>C.max.y)&&(!p||!m.isStatic&&!m.isSleeping)&&r(l.collisionFilter,m.collisionFilter)){var x=m.parts.length;if(b&&1===x)(S=a(l,m,o))&&i.push(S);else for(var g=1<x?1:0,v=1<f?1:0;v<f;v++)for(var _=l.parts[v],w=(h=_.bounds,g);w<x;w++){var S,A=m.parts[w],C=A.bounds;h.min.x>C.max.x||h.max.x<C.min.x||h.max.y<C.min.y||h.min.y>C.max.y||(S=a(_,A,o))&&i.push(S)}}}return i},T.canCollide=function(t,e){return t.group===e.group&&0!==t.group?0<t.group:0!=(t.mask&e.category)&&0!=(e.mask&t.category)},T._compareBoundsX=function(t,e){return t.bounds.min.x-e.bounds.min.x}},4506:(t,e,i)=>{var s={},p=(t.exports=s,i(43424));s.create=function(t,e){var i=t.bodyA,o=t.bodyB,i={id:s.id(i,o),bodyA:i,bodyB:o,collision:t,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:i.isSensor||o.isSensor,timeCreated:e,timeUpdated:e,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return s.update(i,t,e),i},s.update=function(t,e,i){var o=t.contacts,s=e.supports,n=t.activeContacts,r=e.parentA,a=e.parentB,h=r.vertices.length;t.isActive=!0,t.timeUpdated=i,t.collision=e,t.separation=e.depth,t.inverseMass=r.inverseMass+a.inverseMass,t.friction=(r.friction<a.friction?r:a).friction,t.frictionStatic=(r.frictionStatic>a.frictionStatic?r:a).frictionStatic,t.restitution=(r.restitution>a.restitution?r:a).restitution,t.slop=(r.slop>a.slop?r:a).slop,e.pair=t;for(var l=n.length=0;l<s.length;l++){var c=s[l],u=c.body===r?c.index:h+c.index,d=o[u];d?n.push(d):n.push(o[u]=p.create(c))}},s.setActive=function(t,e,i){e?(t.isActive=!0,t.timeUpdated=i):(t.isActive=!1,t.activeContacts.length=0)},s.id=function(t,e){return t.id<e.id?"A"+t.id+"B"+e.id:"A"+e.id+"B"+t.id}},99561:(t,e,i)=>{var o={},b=(t.exports=o,i(4506)),s=i(53402);o.create=function(t){return s.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},t)},o.update=function(t,e,i){var o,s,n,r=t.list,a=r.length,h=t.table,l=e.length,c=t.collisionStart,u=t.collisionEnd,d=t.collisionActive;for(c.length=0,u.length=0,f=d.length=0;f<a;f++)r[f].confirmedActive=!1;for(f=0;f<l;f++)(n=(o=e[f]).pair)?((n.isActive?d:c).push(n),b.update(n,o,i),n.confirmedActive=!0):(h[(n=b.create(o,i)).id]=n,c.push(n),r.push(n));for(var p=[],a=r.length,f=0;f<a;f++)(n=r[f]).confirmedActive||(b.setActive(n,!1,i),u.push(n),n.collision.bodyA.isSleeping)||n.collision.bodyB.isSleeping||p.push(f);for(f=0;f<p.length;f++)n=r[s=p[f]-f],r.splice(s,1),delete h[n.id]},o.clear=function(t){return t.table={},t.list.length=0,t.collisionStart.length=0,t.collisionActive.length=0,t.collisionEnd.length=0,t}},73296:(t,e,i)=>{var c={},u=(t.exports=c,i(31725)),p=i(52284),f=i(15647),d=i(66280),a=i(41598);c.collides=function(t,e){for(var i=[],o=e.length,s=t.bounds,n=p.collides,r=f.overlaps,a=0;a<o;a++){var h=e[a],l=h.parts.length,c=1===l?0:1;if(t!==h&&r(h.bounds,s))for(var u=c;u<l;u++){var d=h.parts[u];if(r(d.bounds,s)){d=n(d,t);if(d){i.push(d);break}}}}return i},c.ray=function(t,e,i,o){o=o||1e-100;for(var s=u.angle(e,i),n=u.magnitude(u.sub(e,i)),r=.5*(i.x+e.x),i=.5*(i.y+e.y),e=d.rectangle(r,i,n,o,{angle:s}),a=c.collides(e,t),h=0;h<a.length;h+=1){var l=a[h];l.body=l.bodyB=l.bodyA}return a},c.region=function(t,e,i){for(var o=[],s=0;s<t.length;s++){var n=t[s],r=f.overlaps(n.bounds,e);(r&&!i||!r&&i)&&o.push(n)}return o},c.point=function(t,e){for(var i=[],o=0;o<t.length;o++){var s=t[o];if(f.contains(s.bounds,e))for(var n=1===s.parts.length?0:1;n<s.parts.length;n++){var r=s.parts[n];if(f.contains(r.bounds,e)&&a.contains(r.vertices,e)){i.push(s);break}}}return i}},66272:(t,e,i)=>{var I={},p=(t.exports=I,i(41598)),k=i(53402),f=i(15647);I._restingThresh=2,I._restingThreshTangent=Math.sqrt(6),I._positionDampen=.9,I._positionWarming=.8,I._frictionNormalMultiplier=5,I._frictionMaxStatic=Number.MAX_VALUE,I.preSolvePosition=function(t){for(var e,i,o=t.length,s=0;s<o;s++)(e=t[s]).isActive&&(i=e.activeContacts.length,e.collision.parentA.totalContacts+=i,e.collision.parentB.totalContacts+=i)},I.solvePosition=function(t,e,i){for(var o,s,n,r,a,h,l,c=I._positionDampen*(i||1),u=k.clamp(e/k._baseDelta,0,1),d=t.length,p=0;p<d;p++)(o=t[p]).isActive&&!o.isSensor&&(n=(s=o.collision).parentA,r=s.parentB,a=s.normal,o.separation=a.x*(r.positionImpulse.x+s.penetration.x-n.positionImpulse.x)+a.y*(r.positionImpulse.y+s.penetration.y-n.positionImpulse.y));for(p=0;p<d;p++)(o=t[p]).isActive&&!o.isSensor&&(n=(s=o.collision).parentA,r=s.parentB,a=s.normal,l=o.separation-o.slop*u,(n.isStatic||r.isStatic)&&(l*=2),n.isStatic||n.isSleeping||(h=c/n.totalContacts,n.positionImpulse.x+=a.x*l*h,n.positionImpulse.y+=a.y*l*h),r.isStatic||r.isSleeping||(h=c/r.totalContacts,r.positionImpulse.x-=a.x*l*h,r.positionImpulse.y-=a.y*l*h))},I.postSolvePosition=function(t){for(var e=I._positionWarming,i=t.length,o=p.translate,s=f.update,n=0;n<i;n++){var r=t[n],a=r.positionImpulse,h=a.x,l=a.y,c=r.velocity;if((r.totalContacts=0)!==h||0!==l){for(var u=0;u<r.parts.length;u++){var d=r.parts[u];o(d.vertices,a),s(d.bounds,d.vertices,c),d.position.x+=h,d.position.y+=l}r.positionPrev.x+=h,r.positionPrev.y+=l,h*c.x+l*c.y<0?(a.x=0,a.y=0):(a.x*=e,a.y*=e)}}},I.preSolveVelocity=function(t){for(var e=t.length,i=0;i<e;i++){var o=t[i];if(o.isActive&&!o.isSensor)for(var s=o.activeContacts,n=s.length,o=o.collision,r=o.parentA,a=o.parentB,h=o.normal,l=o.tangent,c=0;c<n;c++){var u,d=s[c],p=d.vertex,f=d.normalImpulse,d=d.tangentImpulse;0===f&&0===d||(u=h.x*f+l.x*d,f=h.y*f+l.y*d,r.isStatic||r.isSleeping||(r.positionPrev.x+=u*r.inverseMass,r.positionPrev.y+=f*r.inverseMass,r.anglePrev+=r.inverseInertia*((p.x-r.position.x)*f-(p.y-r.position.y)*u)),a.isStatic)||a.isSleeping||(a.positionPrev.x-=u*a.inverseMass,a.positionPrev.y-=f*a.inverseMass,a.anglePrev-=a.inverseInertia*((p.x-a.position.x)*f-(p.y-a.position.y)*u))}}},I.solveVelocity=function(t,e){for(var i,o,s,e=e/k._baseDelta,n=e*e*e,r=-I._restingThresh*e,a=I._restingThreshTangent,h=I._frictionNormalMultiplier*e,l=I._frictionMaxStatic,c=t.length,u=0;u<c;u++){var d=t[u];if(d.isActive&&!d.isSensor){var p=d.collision,f=p.parentA,b=p.parentB,y=f.velocity,m=b.velocity,x=p.normal.x,g=p.normal.y,v=p.tangent.x,_=p.tangent.y,w=d.activeContacts,S=w.length,A=1/S,C=f.inverseMass+b.inverseMass,T=d.friction*d.frictionStatic*h;for(y.x=f.position.x-f.positionPrev.x,y.y=f.position.y-f.positionPrev.y,m.x=b.position.x-b.positionPrev.x,m.y=b.position.y-b.positionPrev.y,f.angularVelocity=f.angle-f.anglePrev,b.angularVelocity=b.angle-b.anglePrev,s=0;s<S;s++){var P=w[s],B=P.vertex,E=B.x-f.position.x,M=B.y-f.position.y,D=B.x-b.position.x,B=B.y-b.position.y,O=y.x-M*f.angularVelocity,R=y.y+E*f.angularVelocity,O=O-(m.x-B*b.angularVelocity),R=R-(m.y+D*b.angularVelocity),L=x*O+g*R,O=v*O+_*R,R=d.separation+L,F=Math.min(R,1),R=(R<0?0:F)*T,F=(O<-R||R<O?(i=d.friction*(0<O?1:-1)*n)<-(o=0<O?O:-O)?i=-o:o<i&&(i=o):(i=O,o=l),E*g-M*x),R=D*g-B*x,F=A/(C+f.inverseInertia*F*F+b.inverseInertia*R*R),R=(1+d.restitution)*L*F,F=(i*=F,L<r?P.normalImpulse=0:(F=P.normalImpulse,P.normalImpulse+=R,0<P.normalImpulse&&(P.normalImpulse=0),R=P.normalImpulse-F),O<-a||a<O?P.tangentImpulse=0:(L=P.tangentImpulse,P.tangentImpulse+=i,P.tangentImpulse<-o&&(P.tangentImpulse=-o),P.tangentImpulse>o&&(P.tangentImpulse=o),i=P.tangentImpulse-L),x*R+v*i),O=g*R+_*i;f.isStatic||f.isSleeping||(f.positionPrev.x+=F*f.inverseMass,f.positionPrev.y+=O*f.inverseMass,f.anglePrev+=(E*O-M*F)*f.inverseInertia),b.isStatic||b.isSleeping||(b.positionPrev.x-=F*b.inverseMass,b.positionPrev.y-=O*b.inverseMass,b.anglePrev-=(D*O-B*F)*b.inverseInertia)}}}}},48140:(t,e,i)=>{var b={},r=(t.exports=b,i(41598)),y=i(31725),a=i(53614),h=i(15647),l=i(66615),c=i(53402);b._warming=.4,b._torqueDampen=1,b._minLength=1e-6,b.create=function(t){t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var e=t.bodyA?y.add(t.bodyA.position,t.pointA):t.pointA,i=t.bodyB?y.add(t.bodyB.position,t.pointB):t.pointB,e=y.magnitude(y.sub(e,i)),i=(t.length=void 0!==t.length?t.length:e,t.id=t.id||c.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(0<t.length?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={},{visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null});return 0===t.length&&.1<t.stiffness?(i.type="pin",i.anchors=!1):t.stiffness<.9&&(i.type="spring"),t.render=c.extend(i,t.render),t},b.preSolveAll=function(t){for(var e=0;e<t.length;e+=1){var i=t[e],o=i.constraintImpulse;i.isStatic||0===o.x&&0===o.y&&0===o.angle||(i.position.x+=o.x,i.position.y+=o.y,i.angle+=o.angle)}},b.solveAll=function(t,e){for(var i=c.clamp(e/c._baseDelta,0,1),o=0;o<t.length;o+=1){var s=t[o],n=!s.bodyA||s.bodyA&&s.bodyA.isStatic,r=!s.bodyB||s.bodyB&&s.bodyB.isStatic;(n||r)&&b.solve(t[o],i)}for(o=0;o<t.length;o+=1)n=!(s=t[o]).bodyA||s.bodyA&&s.bodyA.isStatic,r=!s.bodyB||s.bodyB&&s.bodyB.isStatic,n||r||b.solve(t[o],i)},b.solve=function(t,e){var i,o,s,n,r,a,h,l,c,u=t.bodyA,d=t.bodyB,p=t.pointA,f=t.pointB;(u||d)&&(u&&!u.isStatic&&(y.rotate(p,u.angle-t.angleA,p),t.angleA=u.angle),d&&!d.isStatic&&(y.rotate(f,d.angle-t.angleB,f),t.angleB=d.angle),l=p,i=f,u&&(l=y.add(u.position,p)),d&&(i=y.add(d.position,f)),l)&&i&&(l=y.sub(l,i),n=((i=(i=y.magnitude(l))<b._minLength?b._minLength:i)-t.length)/i,r=1<=t.stiffness||0===t.length?t.stiffness*e:t.stiffness*e*e,e=t.damping*e,n=y.mult(l,n*r),a=(r=(u?u.inverseMass:0)+(d?d.inverseMass:0))+((u?u.inverseInertia:0)+(d?d.inverseInertia:0)),0<e&&(c=y.create(),h=y.div(l,i),l=y.sub(d&&y.sub(d.position,d.positionPrev)||c,u&&y.sub(u.position,u.positionPrev)||c),c=y.dot(h,l)),u&&!u.isStatic&&(s=u.inverseMass/r,u.constraintImpulse.x-=n.x*s,u.constraintImpulse.y-=n.y*s,u.position.x-=n.x*s,u.position.y-=n.y*s,0<e&&(u.positionPrev.x-=e*h.x*c*s,u.positionPrev.y-=e*h.y*c*s),o=y.cross(p,n)/a*b._torqueDampen*u.inverseInertia*(1-t.angularStiffness),u.constraintImpulse.angle-=o,u.angle-=o),d)&&!d.isStatic&&(s=d.inverseMass/r,d.constraintImpulse.x+=n.x*s,d.constraintImpulse.y+=n.y*s,d.position.x+=n.x*s,d.position.y+=n.y*s,0<e&&(d.positionPrev.x+=e*h.x*c*s,d.positionPrev.y+=e*h.y*c*s),o=y.cross(f,n)/a*b._torqueDampen*d.inverseInertia*(1-t.angularStiffness),d.constraintImpulse.angle+=o,d.angle+=o)},b.postSolveAll=function(t){for(var e=0;e<t.length;e++){var i=t[e],o=i.constraintImpulse;if(!(i.isStatic||0===o.x&&0===o.y&&0===o.angle)){a.set(i,!1);for(var s=0;s<i.parts.length;s++){var n=i.parts[s];r.translate(n.vertices,o),0<s&&(n.position.x+=o.x,n.position.y+=o.y),0!==o.angle&&(r.rotate(n.vertices,o.angle,i.position),l.rotate(n.axes,o.angle),0<s)&&y.rotateAbout(n.position,o.angle,i.position,n.position),h.update(n.bounds,n.vertices,i.velocity)}o.angle*=b._warming,o.x*=b._warming,o.y*=b._warming}}},b.pointAWorld=function(t){return{x:(t.bodyA?t.bodyA.position.x:0)+(t.pointA?t.pointA.x:0),y:(t.bodyA?t.bodyA.position.y:0)+(t.pointA?t.pointA.y:0)}},b.pointBWorld=function(t){return{x:(t.bodyB?t.bodyB.position.x:0)+(t.pointB?t.pointB.x:0),y:(t.bodyB?t.bodyB.position.y:0)+(t.pointB?t.pointB.y:0)}},b.currentLength=function(t){var e=(t.bodyA?t.bodyA.position.x:0)+(t.pointA?t.pointA.x:0),i=(t.bodyA?t.bodyA.position.y:0)+(t.pointA?t.pointA.y:0),e=e-((t.bodyB?t.bodyB.position.x:0)+(t.pointB?t.pointB.x:0)),i=i-((t.bodyB?t.bodyB.position.y:0)+(t.pointB?t.pointB.y:0));return Math.sqrt(e*e+i*i)}},53402:(t,e,i)=>{var o,h={};(t.exports=h)._baseDelta=1e3/60,h._nextId=0,h._seed=0,h._nowStartTime=+new Date,h._warnedOnce={},h._decomp=null,h.extend=function(t,e){for(var i,o="boolean"==typeof e?(i=2,e):(i=1,!0),s=i;s<arguments.length;s++){var n=arguments[s];if(n)for(var r in n)!o||!n[r]||n[r].constructor!==Object||t[r]&&t[r].constructor!==Object?t[r]=n[r]:(t[r]=t[r]||{},h.extend(t[r],o,n[r]))}return t},h.clone=function(t,e){return h.extend({},e,t)},h.keys=function(t){if(Object.keys)return Object.keys(t);var e,i=[];for(e in t)i.push(e);return i},h.values=function(t){var e=[];if(Object.keys)for(var i=Object.keys(t),o=0;o<i.length;o++)e.push(t[i[o]]);else for(var s in t)e.push(t[s]);return e},h.get=function(t,e,i,o){e=e.split(".").slice(i,o);for(var s=0;s<e.length;s+=1)t=t[e[s]];return t},h.set=function(t,e,i,o,s){o=e.split(".").slice(o,s);return h.get(t,e,0,-1)[o[o.length-1]]=i},h.shuffle=function(t){for(var e=t.length-1;0<e;e--){var i=Math.floor(h.random()*(e+1)),o=t[e];t[e]=t[i],t[i]=o}return t},h.choose=function(t){return t[Math.floor(h.random()*t.length)]},h.isElement=function(t){return"undefined"!=typeof HTMLElement?t instanceof HTMLElement:!!(t&&t.nodeType&&t.nodeName)},h.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},h.isFunction=function(t){return"function"==typeof t},h.isPlainObject=function(t){return"object"==typeof t&&t.constructor===Object},h.isString=function(t){return"[object String]"===toString.call(t)},h.clamp=function(t,e,i){return t<e?e:i<t?i:t},h.sign=function(t){return t<0?-1:1},h.now=function(){if("undefined"!=typeof window&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-h._nowStartTime},h.random=function(t,e){return e=void 0!==e?e:1,(t=void 0!==t?t:0)+o()*(e-t)},o=function(){return h._seed=(9301*h._seed+49297)%233280,h._seed/233280},h.colorToNumber=function(t){return 3==(t=t.replace("#","")).length&&(t=t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)),parseInt(t,16)},h.logLevel=1,h.log=function(){console&&0<h.logLevel&&h.logLevel},h.info=function(){console&&0<h.logLevel&&h.logLevel},h.warn=function(){console&&0<h.logLevel&&h.logLevel},h.warnOnce=function(){var t=Array.prototype.slice.call(arguments).join(" ");h._warnedOnce[t]||(h.warn(t),h._warnedOnce[t]=!0)},h.deprecated=function(t,e,i){t[e]=h.chain(function(){h.warnOnce("🔅 deprecated 🔅",i)},t[e])},h.nextId=function(){return h._nextId++},h.indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},h.map=function(t,e){if(t.map)return t.map(e);for(var i=[],o=0;o<t.length;o+=1)i.push(e(t[o]));return i},h.topologicalSort=function(t){var e,i=[],o=[],s=[];for(e in t)o[e]||s[e]||h._topologicalSort(e,o,s,t,i);return i},h._topologicalSort=function(t,e,i,o,s){var n=o[t]||[];i[t]=!0;for(var r=0;r<n.length;r+=1){var a=n[r];i[a]||e[a]||h._topologicalSort(a,e,i,o,s)}i[t]=!1,e[t]=!0,s.push(t)},h.chain=function(){for(var n=[],t=0;t<arguments.length;t+=1){var e=arguments[t];e._chained?n.push.apply(n,e._chained):n.push(e)}function i(){for(var t,e=new Array(arguments.length),i=0,o=arguments.length;i<o;i++)e[i]=arguments[i];for(i=0;i<n.length;i+=1){var s=n[i].apply(t,e);void 0!==s&&(t=s)}return t}return i._chained=n,i},h.chainPathBefore=function(t,e,i){return h.set(t,e,h.chain(i,h.get(t,e)))},h.chainPathAfter=function(t,e,i){return h.set(t,e,h.chain(h.get(t,e),i))},h.setDecomp=function(t){h._decomp=t},h.getDecomp=function(){var e=h._decomp;try{(e=e||"undefined"==typeof window?e:window.decomp)||void 0===i.g||(e=i.g.decomp)}catch(t){e=null}return e}},48413:(t,e,i)=>{var p={},f=(t.exports=p,i(53614)),b=i(66272),y=i(81388),m=i(99561),x=i(35810),g=i(69351),v=i(48140),_=i(53402),n=i(22562);p.create=function(t){var e=_.extend({positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},t=t||{});return e.world=t.world||g.create({label:"World"}),e.pairs=t.pairs||m.create(),e.detector=t.detector||y.create(),e.grid={buckets:[]},e.world.gravity=e.gravity,e.broadphase=e.grid,e.metrics={},e},p.update=function(t,e){var i,o=_.now(),s=t.world,n=t.detector,r=t.pairs,a=t.timing,h=a.timestamp,l=(e=void 0!==e?e:_._baseDelta,e*=a.timeScale,a.timestamp+=e,a.lastDelta=e,{timestamp:a.timestamp,delta:e}),c=(x.trigger(t,"beforeUpdate",l),g.allBodies(s)),u=g.allConstraints(s);for(s.isModified&&(y.setBodies(n,c),g.setModified(s,!1,!1,!0)),t.enableSleeping&&f.update(c,e),p._bodiesApplyGravity(c,t.gravity),0<e&&p._bodiesUpdate(c,e),x.trigger(t,"beforeSolve",l),v.preSolveAll(c),i=0;i<t.constraintIterations;i++)v.solveAll(u,e);v.postSolveAll(c),n.pairs=t.pairs;var s=y.collisions(n),d=(m.update(r,s,h),t.enableSleeping&&f.afterCollisions(r.list),0<r.collisionStart.length&&x.trigger(t,"collisionStart",{pairs:r.collisionStart,timestamp:a.timestamp,delta:e}),_.clamp(20/t.positionIterations,0,1));for(b.preSolvePosition(r.list),i=0;i<t.positionIterations;i++)b.solvePosition(r.list,e,d);for(b.postSolvePosition(c),v.preSolveAll(c),i=0;i<t.constraintIterations;i++)v.solveAll(u,e);for(v.postSolveAll(c),b.preSolveVelocity(r.list),i=0;i<t.velocityIterations;i++)b.solveVelocity(r.list,e);return p._bodiesUpdateVelocities(c),0<r.collisionActive.length&&x.trigger(t,"collisionActive",{pairs:r.collisionActive,timestamp:a.timestamp,delta:e}),0<r.collisionEnd.length&&x.trigger(t,"collisionEnd",{pairs:r.collisionEnd,timestamp:a.timestamp,delta:e}),p._bodiesClearForces(c),x.trigger(t,"afterUpdate",l),t.timing.lastElapsed=_.now()-o,t},p.merge=function(t,e){if(_.extend(t,e),e.world){t.world=e.world,p.clear(t);for(var i=g.allBodies(t.world),o=0;o<i.length;o++){var s=i[o];f.set(s,!1),s.id=_.nextId()}}},p.clear=function(t){m.clear(t.pairs),y.clear(t.detector)},p._bodiesClearForces=function(t){for(var e=t.length,i=0;i<e;i++){var o=t[i];o.force.x=0,o.force.y=0,o.torque=0}},p._bodiesApplyGravity=function(t,e){var i=void 0!==e.scale?e.scale:.001,o=t.length;if((0!==e.x||0!==e.y)&&0!==i)for(var s=0;s<o;s++){var n=t[s];n.ignoreGravity||n.isStatic||n.isSleeping||(n.force.y+=n.mass*e.y*i,n.force.x+=n.mass*e.x*i)}},p._bodiesUpdate=function(t,e){for(var i=t.length,o=0;o<i;o++){var s=t[o];s.isStatic||s.isSleeping||n.update(s,e)}},p._bodiesUpdateVelocities=function(t){for(var e=t.length,i=0;i<e;i++)n.updateVelocities(t[i])}},35810:(t,e,i)=>{var o={},c=(t.exports=o,i(53402));o.on=function(t,e,i){for(var o,s=e.split(" "),n=0;n<s.length;n++)o=s[n],t.events=t.events||{},t.events[o]=t.events[o]||[],t.events[o].push(i);return i},o.off=function(t,e,i){if(e){"function"==typeof e&&(i=e,e=c.keys(t.events).join(" "));for(var o=e.split(" "),s=0;s<o.length;s++){var n=t.events[o[s]],r=[];if(i&&n)for(var a=0;a<n.length;a++)n[a]!==i&&r.push(n[a]);t.events[o[s]]=r}}else t.events={}},o.trigger=function(t,e,i){var o,s,n,r=t.events;if(r&&0<c.keys(r).length){i=i||{};for(var a=e.split(" "),h=0;h<a.length;h++)if(s=r[o=a[h]]){(n=c.clone(i,!1)).name=o,n.source=t;for(var l=0;l<s.length;l++)s[l].apply(t,[n])}}}},6790:(t,e,i)=>{var o={},s=(t.exports=o,i(73832)),n=i(53402);o.name="matter-js",o.version="0.19.0",o.uses=[],o.used=[],o.use=function(){s.use(o,Array.prototype.slice.call(arguments))},o.before=function(t,e){return t=t.replace(/^Matter./,""),n.chainPathBefore(o,t,e)},o.after=function(t,e){return t=t.replace(/^Matter./,""),n.chainPathAfter(o,t,e)}},73832:(t,e,i)=>{var r={},a=(t.exports=r,i(53402));r._registry={},r.register=function(t){var e,i,o;return r.isPlugin(t)||a.warn("Plugin.register:",r.toString(t),"does not implement all required fields."),t.name in r._registry?(e=r._registry[t.name],i=r.versionParse(t.version).number,(o=r.versionParse(e.version).number)<i?(a.warn("Plugin.register:",r.toString(e),"was upgraded to",r.toString(t)),r._registry[t.name]=t):i<o?a.warn("Plugin.register:",r.toString(e),"can not be downgraded to",r.toString(t)):t!==e&&a.warn("Plugin.register:",r.toString(t),"is already registered to different plugin object")):r._registry[t.name]=t,t},r.resolve=function(t){return r._registry[r.dependencyParse(t).name]},r.toString=function(t){return"string"==typeof t?t:(t.name||"anonymous")+"@"+(t.version||t.range||"0.0.0")},r.isPlugin=function(t){return t&&t.name&&t.version&&t.install},r.isUsed=function(t,e){return-1<t.used.indexOf(e)},r.isFor=function(t,e){var i=t.for&&r.dependencyParse(t.for);return!t.for||e.name===i.name&&r.versionSatisfies(e.version,i.range)},r.use=function(t,e){if(t.uses=(t.uses||[]).concat(e||[]),0!==t.uses.length){for(var i,e=r.dependencies(t),o=a.topologicalSort(e),s=[],n=0;n<o.length;n+=1)o[n]!==t.name&&((i=r.resolve(o[n]))?r.isUsed(t,i.name)||(r.isFor(i,t)||(a.warn("Plugin.use:",r.toString(i),"is for",i.for,"but installed on",r.toString(t)+"."),i._warned=!0),i.install?i.install(t):(a.warn("Plugin.use:",r.toString(i),"does not specify an install function."),i._warned=!0),i._warned?(s.push("🔶 "+r.toString(i)),delete i._warned):s.push("✅ "+r.toString(i)),t.used.push(i.name)):s.push("❌ "+o[n]));0<s.length&&!i.silent&&a.info(s.join("  "))}else a.warn("Plugin.use:",r.toString(t),"does not specify any dependencies to install.")},r.dependencies=function(o,t){var s=r.dependencyParse(o),e=s.name;if(!(e in(t=t||{}))){o=r.resolve(o)||o,t[e]=a.map(o.uses||[],function(t){r.isPlugin(t)&&r.register(t);var e=r.dependencyParse(t),i=r.resolve(t);return i&&!r.versionSatisfies(i.version,e.range)?(a.warn("Plugin.dependencies:",r.toString(i),"does not satisfy",r.toString(e),"used by",r.toString(s)+"."),i._warned=!0,o._warned=!0):i||(a.warn("Plugin.dependencies:",r.toString(t),"used by",r.toString(s),"could not be resolved."),o._warned=!0),e.name});for(var i=0;i<t[e].length;i+=1)r.dependencies(t[e][i],t);return t}},r.dependencyParse=function(t){return a.isString(t)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/.test(t)||a.warn("Plugin.dependencyParse:",t,"is not a valid dependency string."),{name:t.split("@")[0],range:t.split("@")[1]||"*"}):{name:t.name,range:t.range||t.version}},r.versionParse=function(t){var e=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/,e=(e.test(t)||a.warn("Plugin.versionParse:",t,"is not a valid version or range."),e.exec(t)),i=Number(e[4]),o=Number(e[5]),s=Number(e[6]);return{isRange:Boolean(e[1]||e[2]),version:e[3],range:t,operator:e[1]||e[2]||"",major:i,minor:o,patch:s,parts:[i,o,s],prerelease:e[7],number:1e8*i+1e4*o+s}},r.versionSatisfies=function(t,e){var i=r.versionParse(e=e||"*"),o=r.versionParse(t);if(i.isRange){if("*"===i.operator||"*"===t)return!0;if(">"===i.operator)return o.number>i.number;if(">="===i.operator)return o.number>=i.number;if("~"===i.operator)return o.major===i.major&&o.minor===i.minor&&o.patch>=i.patch;if("^"===i.operator)return 0<i.major?o.major===i.major&&o.number>=i.number:0<i.minor?o.minor===i.minor&&o.patch>=i.patch:o.patch===i.patch}return t===e||"*"===t}},53614:(t,e,i)=>{var h={},l=(t.exports=h,i(22562)),o=i(35810),c=i(53402);h._motionWakeThreshold=.18,h._motionSleepThreshold=.08,h._minBias=.9,h.update=function(t,e){for(var i=e/c._baseDelta,o=h._motionSleepThreshold,s=0;s<t.length;s++){var n=t[s],r=l.getSpeed(n),a=l.getAngularSpeed(n),r=r*r+a*a;0===n.force.x&&0===n.force.y?(a=Math.min(n.motion,r),r=Math.max(n.motion,r),n.motion=h._minBias*a+(1-h._minBias)*r,0<n.sleepThreshold&&n.motion<o?(n.sleepCounter+=1,n.sleepCounter>=n.sleepThreshold/i&&h.set(n,!0)):0<n.sleepCounter&&--n.sleepCounter):h.set(n,!1)}},h.afterCollisions=function(t){for(var e=h._motionSleepThreshold,i=0;i<t.length;i++){var o,s,n=t[i];n.isActive&&(o=(n=n.collision).bodyA.parent,n=n.bodyB.parent,o.isSleeping&&n.isSleeping||o.isStatic||n.isStatic||!o.isSleeping&&!n.isSleeping||!(s=o.isSleeping&&!o.isStatic?o:n).isStatic&&(s===o?n:o).motion>e&&h.set(s,!1))}},h.set=function(t,e){var i=t.isSleeping;e?(t.isSleeping=!0,t.sleepCounter=t.sleepThreshold,t.positionImpulse.x=0,t.positionImpulse.y=0,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.anglePrev=t.angle,t.speed=0,t.angularSpeed=0,t.motion=0,i||o.trigger(t,"sleepStart")):(t.isSleeping=!1,t.sleepCounter=0,i&&o.trigger(t,"sleepEnd"))}},66280:(t,e,i)=>{var u={},T=(t.exports=u,i(41598)),P=i(53402),B=i(22562),E=i(15647),M=i(31725);u.rectangle=function(t,e,i,o,s){s=s||{};t={label:"Rectangle Body",position:{x:t,y:e},vertices:T.fromPath("L 0 0 L "+i+" 0 L "+i+" "+o+" L 0 "+o)};return s.chamfer&&(e=s.chamfer,t.vertices=T.chamfer(t.vertices,e.radius,e.quality,e.qualityMin,e.qualityMax),delete s.chamfer),B.create(P.extend({},t,s))},u.trapezoid=function(t,e,i,o,s,n){n=n||{};var r=i*(s*=.5),i=r+(1-2*s)*i,a=i+r,t={label:"Trapezoid Body",position:{x:t,y:e},vertices:T.fromPath(s<.5?"L 0 0 L "+r+" "+-o+" L "+i+" "+-o+" L "+a+" 0":"L 0 0 L "+i+" "+-o+" L "+a+" 0")};return n.chamfer&&(e=n.chamfer,t.vertices=T.chamfer(t.vertices,e.radius,e.quality,e.qualityMin,e.qualityMax),delete n.chamfer),B.create(P.extend({},t,n))},u.circle=function(t,e,i,o,s){o=o||{};var n={label:"Circle Body",circleRadius:i},s=(s=s||25,Math.ceil(Math.max(10,Math.min(s,i))));return s%2==1&&(s+=1),u.polygon(t,e,s,i,P.extend({},n,o))},u.polygon=function(t,e,i,o,s){if(s=s||{},i<3)return u.circle(t,e,o,s);for(var n=2*Math.PI/i,r="",a=.5*n,h=0;h<i;h+=1){var l=a+h*n,c=Math.cos(l)*o,l=Math.sin(l)*o;r+="L "+c.toFixed(3)+" "+l.toFixed(3)+" "}t={label:"Polygon Body",position:{x:t,y:e},vertices:T.fromPath(r)};return s.chamfer&&(e=s.chamfer,t.vertices=T.chamfer(t.vertices,e.radius,e.quality,e.qualityMin,e.qualityMax),delete s.chamfer),B.create(P.extend({},t,s))},u.fromVertices=function(t,e,i,o,s,n,r,a){var h,l,c,u,d=P.getDecomp(),p=Boolean(d&&d.quickDecomp);for(o=o||{},h=[],s=void 0!==s&&s,n=void 0!==n?n:.01,r=void 0!==r?r:10,a=void 0!==a?a:.01,P.isArray(i[0])||(i=[i]),c=0;c<i.length;c+=1)if(l=i[c],(f=T.isConvex(l))||p||P.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),f||!p)l=f?T.clockwiseSort(l):T.hull(l),h.push({position:{x:t,y:e},vertices:l});else for(var f=l.map(function(t){return[t.x,t.y]}),b=(d.makeCCW(f),!1!==n&&d.removeCollinearPoints(f,n),!1!==a&&d.removeDuplicatePoints&&d.removeDuplicatePoints(f,a),d.quickDecomp(f)),y=0;y<b.length;y++){var m=b[y].map(function(t){return{x:t[0],y:t[1]}});0<r&&T.area(m)<r||h.push({position:T.centre(m),vertices:m})}for(y=0;y<h.length;y++)h[y]=B.create(P.extend(h[y],o));if(s)for(y=0;y<h.length;y++)for(var x=h[y],g=y+1;g<h.length;g++){var v=h[g];if(E.overlaps(x.bounds,v.bounds))for(var _=x.vertices,w=v.vertices,S=0;S<x.vertices.length;S++)for(u=0;u<v.vertices.length;u++){var A=M.magnitudeSquared(M.sub(_[(S+1)%_.length],w[u])),C=M.magnitudeSquared(M.sub(_[S],w[(u+1)%w.length]));A<5&&C<5&&(_[S].isInternal=!0,w[u].isInternal=!0)}}return 1<h.length?(s=B.create(P.extend({parts:h.slice(0)},o)),B.setPosition(s,{x:t,y:e}),s):h[0]},u.flagCoincidentParts=function(t,e){void 0===e&&(e=5);for(var i=0;i<t.length;i++)for(var o=t[i],s=i+1;s<t.length;s++){var n=t[s];if(E.overlaps(o.bounds,n.bounds))for(var r=o.vertices,a=n.vertices,h=0;h<o.vertices.length;h++)for(var l=0;l<n.vertices.length;l++){var c=M.magnitudeSquared(M.sub(r[(h+1)%r.length],a[l])),u=M.magnitudeSquared(M.sub(r[h],a[(l+1)%a.length]));c<e&&u<e&&(r[h].isInternal=!0,a[l].isInternal=!0)}}return t}},74116:(t,e,i)=>{var p={},x=(t.exports=p,i(69351)),f=i(48140),b=i(53402),g=i(22562),c=i(66280);p.stack=function(t,e,i,o,s,n,r){for(var a,h=x.create({label:"Stack"}),l=t,c=e,u=0,d=0;d<o;d++){for(var p=0,f=0;f<i;f++){var b,y,m=r(l,c,f,d,a,u);m?(b=m.bounds.max.y-m.bounds.min.y,y=m.bounds.max.x-m.bounds.min.x,p<b&&(p=b),g.translate(m,{x:.5*y,y:.5*b}),l=m.bounds.max.x+s,x.addBody(h,m),a=m,u+=1):l+=s}c+=p+n,l=t}return h},p.chain=function(t,e,i,o,s,n){for(var r=t.bodies,a=1;a<r.length;a++){var h=r[a-1],l=r[a],c=h.bounds.max.y-h.bounds.min.y,u=h.bounds.max.x-h.bounds.min.x,d=l.bounds.max.y-l.bounds.min.y,h={bodyA:h,pointA:{x:u*e,y:c*i},bodyB:l,pointB:{x:(l.bounds.max.x-l.bounds.min.x)*o,y:d*s}},u=b.extend(h,n);x.addConstraint(t,f.create(u))}return t.label+=" Chain",t},p.mesh=function(t,e,i,o,s){for(var n,r,a,h,l=t.bodies,c=0;c<i;c++){for(n=1;n<e;n++)r=l[n-1+c*e],a=l[n+c*e],x.addConstraint(t,f.create(b.extend({bodyA:r,bodyB:a},s)));if(0<c)for(n=0;n<e;n++)r=l[n+(c-1)*e],a=l[n+c*e],x.addConstraint(t,f.create(b.extend({bodyA:r,bodyB:a},s))),o&&0<n&&(h=l[n-1+(c-1)*e],x.addConstraint(t,f.create(b.extend({bodyA:h,bodyB:a},s)))),o&&n<e-1&&(h=l[n+1+(c-1)*e],x.addConstraint(t,f.create(b.extend({bodyA:h,bodyB:a},s))))}return t.label+=" Mesh",t},p.pyramid=function(h,t,l,c,u,e,d){return p.stack(h,t,l,c,u,e,function(t,e,i,o,s,n){var r=Math.min(c,Math.ceil(l/2)),a=s?s.bounds.max.x-s.bounds.min.x:0;if(!(r<o||i<(o=r-o)||l-1-o<i))return 1===n&&g.translate(s,{x:(i+(l%2==1?1:-1))*a,y:0}),d(h+(s?i*a:0)+i*u,e,i,o,s,n)})},p.newtonsCradle=function(t,e,i,o,s){for(var n=x.create({label:"Newtons Cradle"}),r=0;r<i;r++){var a=c.circle(t+r*(1.9*o),e+s,o,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),h=f.create({pointA:{x:t+r*(1.9*o),y:e},bodyB:a});x.addBody(n,a),x.addConstraint(n,h)}return n},p.car=function(t,e,i,o,s){var n=g.nextGroup(!0),r=.5*-i+20,a=.5*i-20,h=x.create({label:"Car"}),i=c.rectangle(t,e,i,o,{collisionFilter:{group:n},chamfer:{radius:.5*o},density:2e-4}),o=c.circle(t+r,e+0,s,{collisionFilter:{group:n},friction:.8}),t=c.circle(t+a,e+0,s,{collisionFilter:{group:n},friction:.8}),e=f.create({bodyB:i,pointB:{x:r,y:0},bodyA:o,stiffness:1,length:0}),s=f.create({bodyB:i,pointB:{x:a,y:0},bodyA:t,stiffness:1,length:0});return x.addBody(h,i),x.addBody(h,o),x.addBody(h,t),x.addConstraint(h,e),x.addConstraint(h,s),h},p.softBody=function(t,e,i,o,s,n,r,a,h,l){h=b.extend({inertia:1/0},h),l=b.extend({stiffness:.2,render:{type:"line",anchors:!1}},l);t=p.stack(t,e,i,o,s,n,function(t,e){return c.circle(t,e,a,h)});return p.mesh(t,i,o,r,l),t.label="Soft Body",t}},66615:(t,e,i)=>{var o={},s=(t.exports=o,i(31725)),n=i(53402);o.fromVertices=function(t){for(var e={},i=0;i<t.length;i++){var o=(i+1)%t.length,o=s.normalise({x:t[o].y-t[i].y,y:t[i].x-t[o].x});e[(0===o.y?1/0:o.x/o.y).toFixed(3).toString()]=o}return n.values(e)},o.rotate=function(t,e){if(0!==e)for(var i=Math.cos(e),o=Math.sin(e),s=0;s<t.length;s++){var n=t[s],r=n.x*i-n.y*o;n.y=n.x*o+n.y*i,n.x=r}}},15647:t=>{var i={};(t.exports=i).create=function(t){var e={min:{x:0,y:0},max:{x:0,y:0}};return t&&i.update(e,t),e},i.update=function(t,e,i){t.min.x=1/0,t.max.x=-1/0,t.min.y=1/0,t.max.y=-1/0;for(var o=0;o<e.length;o++){var s=e[o];s.x>t.max.x&&(t.max.x=s.x),s.x<t.min.x&&(t.min.x=s.x),s.y>t.max.y&&(t.max.y=s.y),s.y<t.min.y&&(t.min.y=s.y)}i&&(0<i.x?t.max.x+=i.x:t.min.x+=i.x,0<i.y?t.max.y+=i.y:t.min.y+=i.y)},i.contains=function(t,e){return e.x>=t.min.x&&e.x<=t.max.x&&e.y>=t.min.y&&e.y<=t.max.y},i.overlaps=function(t,e){return t.min.x<=e.max.x&&t.max.x>=e.min.x&&t.max.y>=e.min.y&&t.min.y<=e.max.y},i.translate=function(t,e){t.min.x+=e.x,t.max.x+=e.x,t.min.y+=e.y,t.max.y+=e.y},i.shift=function(t,e){var i=t.max.x-t.min.x,o=t.max.y-t.min.y;t.min.x=e.x,t.max.x=e.x+i,t.min.y=e.y,t.max.y=e.y+o}},74058:(t,e,i)=>{var g={},v=(t.exports=g,i(15647),i(53402));g.pathToVertices=function(t,e){"undefined"==typeof window||"SVGPathSeg"in window||v.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");function i(t,e,i){var o,i=i%2==1&&1<i;d&&t==d.x&&e==d.y||(f=d&&i?(p=d.x,d.y):p=0,o={x:p+t,y:f+e},!i&&d||(d=o),b.push(o),m=p+t,x=f+e)}function o(t){var e=t.pathSegTypeAsLetter.toUpperCase();if("Z"!==e){switch(e){case"M":case"L":case"T":case"C":case"S":case"Q":m=t.x,x=t.y;break;case"H":m=t.x;break;case"V":x=t.y}i(m,x,t.pathSegType)}}var s,n,r,a,h,l,c,u,d,p,f,b=[],y=0,m=0,x=0;e=e||15;for(g._svgPathToAbsolute(t),r=t.getTotalLength(),l=[],s=0;s<t.pathSegList.numberOfItems;s+=1)l.push(t.pathSegList.getItem(s));for(c=l.concat();y<r;){if((h=l[t.getPathSegAtLength(y)])!=u){for(;c.length&&c[0]!=h;)o(c.shift());u=h}switch(h.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":a=t.getPointAtLength(y),i(a.x,a.y,0)}y+=e}for(s=0,n=c.length;s<n;++s)o(c[s]);return b},g._svgPathToAbsolute=function(t){for(var e,i,o,s,n,r,a=t.pathSegList,h=0,l=0,c=a.numberOfItems,u=0;u<c;++u){var d=a.getItem(u),p=d.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(p))"x"in d&&(h=d.x),"y"in d&&(l=d.y);else switch("x1"in d&&(o=h+d.x1),"x2"in d&&(n=h+d.x2),"y1"in d&&(s=l+d.y1),"y2"in d&&(r=l+d.y2),"x"in d&&(h+=d.x),"y"in d&&(l+=d.y),p){case"m":a.replaceItem(t.createSVGPathSegMovetoAbs(h,l),u);break;case"l":a.replaceItem(t.createSVGPathSegLinetoAbs(h,l),u);break;case"h":a.replaceItem(t.createSVGPathSegLinetoHorizontalAbs(h),u);break;case"v":a.replaceItem(t.createSVGPathSegLinetoVerticalAbs(l),u);break;case"c":a.replaceItem(t.createSVGPathSegCurvetoCubicAbs(h,l,o,s,n,r),u);break;case"s":a.replaceItem(t.createSVGPathSegCurvetoCubicSmoothAbs(h,l,n,r),u);break;case"q":a.replaceItem(t.createSVGPathSegCurvetoQuadraticAbs(h,l,o,s),u);break;case"t":a.replaceItem(t.createSVGPathSegCurvetoQuadraticSmoothAbs(h,l),u);break;case"a":a.replaceItem(t.createSVGPathSegArcAbs(h,l,d.r1,d.r2,d.angle,d.largeArcFlag,d.sweepFlag),u);break;case"z":case"Z":h=e,l=i}"M"!=p&&"m"!=p||(e=h,i=l)}}},31725:t=>{var i={};(t.exports=i).create=function(t,e){return{x:t||0,y:e||0}},i.clone=function(t){return{x:t.x,y:t.y}},i.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},i.magnitudeSquared=function(t){return t.x*t.x+t.y*t.y},i.rotate=function(t,e,i){var o=Math.cos(e),e=Math.sin(e),s=t.x*o-t.y*e;return(i=i||{}).y=t.x*e+t.y*o,i.x=s,i},i.rotateAbout=function(t,e,i,o){var s=Math.cos(e),e=Math.sin(e),n=i.x+((t.x-i.x)*s-(t.y-i.y)*e);return(o=o||{}).y=i.y+((t.x-i.x)*e+(t.y-i.y)*s),o.x=n,o},i.normalise=function(t){var e=i.magnitude(t);return 0===e?{x:0,y:0}:{x:t.x/e,y:t.y/e}},i.dot=function(t,e){return t.x*e.x+t.y*e.y},i.cross=function(t,e){return t.x*e.y-t.y*e.x},i.cross3=function(t,e,i){return(e.x-t.x)*(i.y-t.y)-(e.y-t.y)*(i.x-t.x)},i.add=function(t,e,i){return(i=i||{}).x=t.x+e.x,i.y=t.y+e.y,i},i.sub=function(t,e,i){return(i=i||{}).x=t.x-e.x,i.y=t.y-e.y,i},i.mult=function(t,e){return{x:t.x*e,y:t.y*e}},i.div=function(t,e){return{x:t.x/e,y:t.y/e}},i.perp=function(t,e){return{x:(e=!0===e?-1:1)*-t.y,y:e*t.x}},i.neg=function(t){return{x:-t.x,y:-t.y}},i.angle=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},i._temp=[i.create(),i.create(),i.create(),i.create(),i.create(),i.create()]},41598:(t,e,i)=>{var r={},x=(t.exports=r,i(31725)),g=i(53402);r.create=function(t,e){for(var i=[],o=0;o<t.length;o++){var s=t[o],s={x:s.x,y:s.y,index:o,body:e,isInternal:!1};i.push(s)}return i},r.fromPath=function(t,e){var o=[];return t.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/gi,function(t,e,i){o.push({x:parseFloat(e),y:parseFloat(i)})}),r.create(o,e)},r.centre=function(t){for(var e,i,o=r.area(t,!0),s={x:0,y:0},n=0;n<t.length;n++)i=(n+1)%t.length,e=x.cross(t[n],t[i]),i=x.mult(x.add(t[n],t[i]),e),s=x.add(s,i);return x.div(s,6*o)},r.mean=function(t){for(var e={x:0,y:0},i=0;i<t.length;i++)e.x+=t[i].x,e.y+=t[i].y;return x.div(e,t.length)},r.area=function(t,e){for(var i=0,o=t.length-1,s=0;s<t.length;s++)i+=(t[o].x-t[s].x)*(t[o].y+t[s].y),o=s;return e?i/2:Math.abs(i)/2},r.inertia=function(t,e){for(var i,o,s=0,n=0,r=t,a=0;a<r.length;a++)o=(a+1)%r.length,s+=(i=Math.abs(x.cross(r[o],r[a])))*(x.dot(r[o],r[o])+x.dot(r[o],r[a])+x.dot(r[a],r[a])),n+=i;return e/6*(s/n)},r.translate=function(t,e,i){for(var o=t.length,s=e.x*(i=void 0!==i?i:1),n=e.y*i,r=0;r<o;r++)t[r].x+=s,t[r].y+=n;return t},r.rotate=function(t,e,i){if(0!==e){for(var o,s,n,r=Math.cos(e),a=Math.sin(e),h=i.x,l=i.y,c=t.length,u=0;u<c;u++)s=(o=t[u]).x-h,n=o.y-l,o.x=h+(s*r-n*a),o.y=l+(s*a+n*r);return t}},r.contains=function(t,e){for(var i,o=e.x,s=e.y,n=t.length,r=t[n-1],a=0;a<n;a++){if(i=t[a],0<(o-r.x)*(i.y-r.y)+(s-r.y)*(r.x-i.x))return!1;r=i}return!0},r.scale=function(t,e,i,o){if(1!==e||1!==i){var s;o=o||r.centre(t);for(var n=0;n<t.length;n++)s=t[n],s=x.sub(s,o),t[n].x=o.x+s.x*e,t[n].y=o.y+s.y*i}return t},r.chamfer=function(t,e,i,o,s){e="number"==typeof e?[e]:e||[8],i=void 0!==i?i:-1,o=o||2,s=s||14;for(var n=[],r=0;r<t.length;r++){var a=t[0<=r-1?r-1:t.length-1],h=t[r],l=t[(r+1)%t.length],c=e[r<e.length?r:e.length-1];if(0!==c){var a=x.normalise({x:h.y-a.y,y:a.x-h.x}),l=x.normalise({x:l.y-h.y,y:h.x-l.x}),u=Math.sqrt(2*Math.pow(c,2)),d=x.mult(g.clone(a),c),p=x.normalise(x.mult(x.add(a,l),.5)),f=x.sub(h,x.mult(p,u)),b=i;-1===i&&(b=1.75*Math.pow(c,.32)),(b=g.clamp(b,o,s))%2==1&&(b+=1);for(var y=Math.acos(x.dot(a,l))/b,m=0;m<b;m++)n.push(x.add(x.rotate(d,y*m),f))}else n.push(h)}return n},r.clockwiseSort=function(t){var i=r.mean(t);return t.sort(function(t,e){return x.angle(i,t)-x.angle(i,e)}),t},r.isConvex=function(t){var e,i,o,s,n=0,r=t.length;if(r<3)return null;for(e=0;e<r;e++)if(s=(t[i=(e+1)%r].x-t[e].x)*(t[o=(e+2)%r].y-t[i].y),(s-=(t[i].y-t[e].y)*(t[o].x-t[i].x))<0?n|=1:0<s&&(n|=2),3===n)return!1;return 0!==n||null},r.hull=function(t){var e,i,o=[],s=[];for((t=t.slice(0)).sort(function(t,e){var i=t.x-e.x;return 0!=i?i:t.y-e.y}),i=0;i<t.length;i+=1){for(e=t[i];2<=s.length&&x.cross3(s[s.length-2],s[s.length-1],e)<=0;)s.pop();s.push(e)}for(i=t.length-1;0<=i;--i){for(e=t[i];2<=o.length&&x.cross3(o[o.length-2],o[o.length-1],e)<=0;)o.pop();o.push(e)}return o.pop(),s.pop(),o.concat(s)}},18210:(t,e,i)=>{var c=i(19933),s={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.19.0",silent:!0,install:function(t){t.after("Body.create",function(){s.Body.init(this)}),t.before("Engine.update",function(t){s.Engine.update(t)})},Body:{init:function(t){t.plugin.attractors=t.plugin.attractors||[]}},Engine:{update:function(t){for(var e=c.Composite.allBodies(t.world),i=0;i<e.length;i++){var o=e[i],s=o.plugin.attractors;if(s&&0<s.length)for(var n=0;n<e.length;n++){var r=e[n];if(i!==n)for(var a=0;a<s.length;a++){var h=s[a],l=h;(l=c.Common.isFunction(h)?h(o,r):l)&&c.Body.applyForce(r,r.position,l)}}}}},Attractors:{gravityConstant:.001,gravity:function(t,e){var i=c.Vector.sub(e.position,t.position),o=c.Vector.magnitudeSquared(i)||1e-4,i=c.Vector.normalise(i),o=-s.Attractors.gravityConstant*(t.mass*e.mass/o),i=c.Vector.mult(i,o);c.Body.applyForce(t,t.position,c.Vector.neg(i)),c.Body.applyForce(e,e.position,i)}}};t.exports=s},40178:t=>{t.exports={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.19.0",silent:!0,install:function(o){o.after("Engine.create",function(){o.Events.on(this,"collisionStart",function(t){t.pairs.map(function(t){var e=t.bodyA,i=t.bodyB;e.gameObject&&e.gameObject.emit("collide",e,i,t),i.gameObject&&i.gameObject.emit("collide",i,e,t),o.Events.trigger(e,"onCollide",{pair:t}),o.Events.trigger(i,"onCollide",{pair:t}),e.onCollideCallback&&e.onCollideCallback(t),i.onCollideCallback&&i.onCollideCallback(t),e.onCollideWith[i.id]&&e.onCollideWith[i.id](i,t),i.onCollideWith[e.id]&&i.onCollideWith[e.id](e,t)})}),o.Events.on(this,"collisionActive",function(t){t.pairs.map(function(t){var e=t.bodyA,i=t.bodyB;e.gameObject&&e.gameObject.emit("collideActive",e,i,t),i.gameObject&&i.gameObject.emit("collideActive",i,e,t),o.Events.trigger(e,"onCollideActive",{pair:t}),o.Events.trigger(i,"onCollideActive",{pair:t}),e.onCollideActiveCallback&&e.onCollideActiveCallback(t),i.onCollideActiveCallback&&i.onCollideActiveCallback(t)})}),o.Events.on(this,"collisionEnd",function(t){t.pairs.map(function(t){var e=t.bodyA,i=t.bodyB;e.gameObject&&e.gameObject.emit("collideEnd",e,i,t),i.gameObject&&i.gameObject.emit("collideEnd",i,e,t),o.Events.trigger(e,"onCollideEnd",{pair:t}),o.Events.trigger(i,"onCollideEnd",{pair:t}),e.onCollideEndCallback&&e.onCollideEndCallback(t),i.onCollideEndCallback&&i.onCollideEndCallback(t)})})})}}},74507:(t,e,i)=>{var r=i(19933),a={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.19.0",silent:!0,install:function(t){t.after("Engine.update",function(){a.Engine.update(this)})},Engine:{update:function(t){for(var t=t.world,e=r.Composite.allBodies(t),i=r.Composite.allComposites(t),o=0;o<e.length;o+=1){var s=e[o];s.plugin.wrap&&a.Body.wrap(s,s.plugin.wrap)}for(o=0;o<i.length;o+=1){var n=i[o];n.plugin.wrap&&a.Composite.wrap(n,n.plugin.wrap)}}},Bounds:{wrap:function(t,e){var i=null,o=null;if(void 0!==e.min.x&&void 0!==e.max.x&&(t.min.x>e.max.x?i=e.min.x-t.max.x:t.max.x<e.min.x&&(i=e.max.x-t.min.x)),void 0!==e.min.y&&void 0!==e.max.y&&(t.min.y>e.max.y?o=e.min.y-t.max.y:t.max.y<e.min.y&&(o=e.max.y-t.min.y)),null!==i||null!==o)return{x:i||0,y:o||0}}},Body:{wrap:function(t,e){e=a.Bounds.wrap(t.bounds,e);return e&&r.Body.translate(t,e),e}},Composite:{bounds:function(t){for(var e=r.Composite.allBodies(t),i=[],o=0;o<e.length;o+=1){var s=e[o];i.push(s.bounds.min,s.bounds.max)}return r.Bounds.create(i)},wrap:function(t,e){e=a.Bounds.wrap(a.Composite.bounds(t),e);return e&&r.Composite.translate(t,e),e}}};t.exports=a},55973:t=>{function A(t,e,i,o){var s,n=e[0]-t[0],e=e[1]-t[1],r=o[0]-i[0],o=o[1]-i[1];if(r*e-o*n!=0)return s=(n*(i[1]-t[1])+e*(t[0]-i[0]))/(r*e-o*n),i=(r*(t[1]-i[1])+o*(i[0]-t[0]))/(o*n-r*e),0<=s&&s<=1&&0<=i&&i<=1}function a(t,e,i){return(e[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(e[1]-t[1])}function C(t,e,i){return 0<a(t,e,i)}function T(t,e,i){return 0<=a(t,e,i)}function P(t,e,i){return a(t,e,i)<0}function B(t,e,i){return a(t,e,i)<=0}t.exports={decomp:function(t){var e=function t(e){for(var i=[],o=[],s=[],n=[],r=Number.MAX_VALUE,a=0;a<e.length;++a)if(O(e,a))for(var h=0;h<e.length;++h)if(c(e,a,h)){o=t(u(e,a,h,n)),s=t(u(e,h,a,n));for(var l=0;l<s.length;l++)o.push(s[l]);o.length<r&&(r=(i=o).length,i.push([M(e,a),M(e,h)]))}return i}(t);return 0<e.length?function t(e,i){if(0===i.length)return[e];if(i instanceof Array&&i.length&&i[0]instanceof Array&&2===i[0].length&&i[0][0]instanceof Array){for(var o=[e],s=0;s<i.length;s++)for(var n=i[s],r=0;r<o.length;r++){var a=t(o[r],n);if(a){o.splice(r,1),o.push(a[0],a[1]);break}}return o}n=i,s=e.indexOf(n[0]),r=e.indexOf(n[1]);return-1!==s&&-1!==r&&[u(e,s,r),u(e,r,s)]}(t,e):[t]},quickDecomp:function t(e,i,o,s,n,r,a){r=r||100,a=a||0,n=n||25,i=void 0!==i?i:[],o=o||[],s=s||[];var h=[0,0],l=[0,0],c=[0,0],u=0,d=0,p=0,f=0,b=0,y=0,m=0,x=[],g=[],v=e,_=e;if(!(_.length<3||++a>r)){for(var w=0;w<e.length;++w)if(O(v,w)){o.push(v[w]);for(var u=d=Number.MAX_VALUE,S=0;S<e.length;++S)C(M(v,w-1),M(v,w),M(v,S))&&B(M(v,w-1),M(v,w),M(v,S-1))&&(c=R(M(v,w-1),M(v,w),M(v,S),M(v,S-1)),P(M(v,w+1),M(v,w),c))&&(p=E(v[w],c))<d&&(d=p,l=c,y=S),C(M(v,w+1),M(v,w),M(v,S+1))&&B(M(v,w+1),M(v,w),M(v,S))&&(c=R(M(v,w+1),M(v,w),M(v,S),M(v,S+1)),C(M(v,w-1),M(v,w),c))&&(p=E(v[w],c))<u&&(u=p,h=c,b=S);if(y===(b+1)%e.length)c[0]=(l[0]+h[0])/2,c[1]=(l[1]+h[1])/2,s.push(c),w<b?(D(x,v,w,b+1),x.push(c),g.push(c),0!==y&&D(g,v,y,v.length),D(g,v,0,w+1)):(0!==w&&D(x,v,w,v.length),D(x,v,0,b+1),x.push(c),g.push(c),D(g,v,y,w+1));else{if(b<y&&(b+=e.length),f=Number.MAX_VALUE,b<y)return i;for(S=y;S<=b;++S)T(M(v,w-1),M(v,w),M(v,S))&&B(M(v,w+1),M(v,w),M(v,S))&&(p=E(M(v,w),M(v,S)))<f&&function(t,e,i){for(var o=0;o!==t.length;++o)if(o!==e&&o!==i&&(o+1)%t.length!==e&&(o+1)%t.length!==i&&A(M(t,e),M(t,i),M(t,o),M(t,o+1)))return;return 1}(v,w,S)&&(f=p,m=S%e.length);w<m?(D(x,v,w,m+1),0!==m&&D(g,v,m,_.length),D(g,v,0,w+1)):(0!==w&&D(x,v,w,_.length),D(x,v,0,m+1),D(g,v,m,w+1))}return x.length<g.length?(t(x,i,o,s,n,r,a),t(g,i,o,s,n,r,a)):(t(g,i,o,s,n,r,a),t(x,i,o,s,n,r,a)),i}i.push(e)}return i},isSimple:function(t){for(var e=t,i=0;i<e.length-1;i++)for(var o=0;o<i-1;o++)if(A(e[i],e[i+1],e[o],e[o+1]))return!1;for(i=1;i<e.length-2;i++)if(A(e[0],e[e.length-1],e[i],e[i+1]))return!1;return!0},removeCollinearPoints:function(t,e){for(var i=0,o=t.length-1;3<t.length&&0<=o;--o)!function(t,e,i,o){{var s,n,r;if(o)return r=l,(n=h)[0]=e[0]-t[0],n[1]=e[1]-t[1],r[0]=i[0]-e[0],r[1]=i[1]-e[1],s=n[0]*r[0]+n[1]*r[1],n=Math.sqrt(n[0]*n[0]+n[1]*n[1]),r=Math.sqrt(r[0]*r[0]+r[1]*r[1]),Math.acos(s/(n*r))<o}return 0===a(t,e,i)}(M(t,o-1),M(t,o),M(t,o+1),e)||(t.splice(o%t.length,1),i++);return i},removeDuplicatePoints:function(t,e){for(var i,o,s,n=t.length-1;1<=n;--n)for(var r=t[n],a=n-1;0<=a;--a)i=r,o=t[a],s=e,x(i[0],o[0],s)&&x(i[1],o[1],s)&&t.splice(n,1)},makeCCW:function(t){for(var e=0,i=t,o=1;o<t.length;++o)(i[o][1]<i[e][1]||i[o][1]===i[e][1]&&i[o][0]>i[e][0])&&(e=o);return!C(M(t,e-1),M(t,e),M(t,e+1))&&(function(t){for(var e=[],i=t.length,o=0;o!==i;o++)e.push(t.pop());for(o=0;o!==i;o++)t[o]=e[o]}(t),!0)}};var h=[],l=[];function E(t,e){var i=e[0]-t[0],e=e[1]-t[1];return i*i+e*e}function M(t,e){var i=t.length;return t[e<0?e%i+i:e%i]}function D(t,e,i,o){for(var s=i;s<o;s++)t.push(e[s])}function O(t,e){return P(M(t,e-1),M(t,e),M(t,e+1))}var y=[],m=[];function c(t,e,i){var o=y,s=m;if(T(M(t,e+1),M(t,e),M(t,i))&&B(M(t,e-1),M(t,e),M(t,i)))return!1;for(var n,r,a,h,l,c,u,d,p,f=E(M(t,e),M(t,i)),b=0;b!==t.length;++b)if((b+1)%t.length!==e&&b!==e&&T(M(t,e),M(t,i),M(t,b+1))&&B(M(t,e),M(t,i),M(t,b))&&(o[0]=M(t,e),o[1]=M(t,i),s[0]=M(t,b),s[1]=M(t,b+1),r=s,p=d=u=c=l=h=a=void 0,l=[0,0],c=(n=o)[1][1]-n[0][1],u=n[0][0]-n[1][0],n=c*n[0][0]+u*n[0][1],d=r[1][1]-r[0][1],p=r[0][0]-r[1][0],r=d*r[0][0]+p*r[0][1],x(h=c*p-d*u,0,a=a||0)||(l[0]=(p*n-u*r)/h,l[1]=(c*r-d*n)/h),a=l,E(M(t,e),a)<f))return!1;return!0}function u(t,e,i,o){var s=o||[];if(s.length=0,e<i)for(var n=e;n<=i;n++)s.push(t[n]);else{for(n=0;n<=i;n++)s.push(t[n]);for(n=e;n<t.length;n++)s.push(t[n])}return s}function R(t,e,i,o,s){var n=e[1]-t[1],e=t[0]-e[0],t=n*t[0]+e*t[1],r=o[1]-i[1],o=i[0]-o[0],i=r*i[0]+o*i[1],a=n*o-r*e;return x(a,0,s=s||0)?[0,0]:[(o*t-e*i)/a,(n*i-r*t)/a]}function x(t,e,i){return i=i||0,Math.abs(t-e)<=i}},52018:(t,e,i)=>{i=new(i(83419))({initialize:function(t){this.pluginManager=t,this.game=t.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=i},42363:t=>{t.exports={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]}},37277:t=>{var s={},n={};t.exports={register:function(t,e,i,o){s[t]={plugin:e,mapping:i,custom:o=void 0===o?!1:o}},registerCustom:function(t,e,i,o){n[t]={plugin:e,mapping:i,data:o}},hasCore:function(t){return s.hasOwnProperty(t)},hasCustom:function(t){return n.hasOwnProperty(t)},getCore:function(t){return s[t]},getCustom:function(t){return n[t]},getCustomClass:function(t){return n.hasOwnProperty(t)?n[t].plugin:null},remove:function(t){s.hasOwnProperty(t)&&delete s[t]},removeCustom:function(t){n.hasOwnProperty(t)&&delete n[t]},destroyCorePlugins:function(){for(var t in s)s.hasOwnProperty(t)&&delete s[t]},destroyCustomPlugins:function(){for(var t in n)n.hasOwnProperty(t)&&delete n[t]}}},77332:(t,e,i)=>{var o=i(83419),l=i(8443),s=i(50792),n=i(74099),r=i(44603),a=i(39429),c=i(95540),b=i(37277),h=i(72905),i=new o({Extends:s,initialize:function(t){s.call(this),this.game=t,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],t.isBooted?this.boot():t.events.once(l.BOOT,this.boot,this)},boot:function(){for(var t,e,i,o,s,n,r=this.game.config,a=(a=r.installGlobalPlugins).concat(this._pendingGlobal),h=0;h<a.length;h++)t=a[h],e=c(t,"key",null),i=c(t,"plugin",null),o=c(t,"start",!1),s=c(t,"mapping",null),n=c(t,"data",null),e&&i&&this.install(e,i,o,s,n);for(a=(a=r.installScenePlugins).concat(this._pendingScene),h=0;h<a.length;h++)t=a[h],e=c(t,"key",null),i=c(t,"plugin",null),s=c(t,"mapping",null),e&&i&&this.installScenePlugin(e,i,s);this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(l.DESTROY,this.destroy,this)},addToScene:function(t,e,i){for(var o,s=this.game,n=t.scene,r=t.settings.map,a=t.settings.isBooted,h=0;h<e.length;h++)s[p=e[h]]?(t[p]=s[p],r.hasOwnProperty(p)&&(n[r[p]]=t[p])):"game"===p&&r.hasOwnProperty(p)&&(n[r[p]]=s);for(var l=0;l<i.length;l++)for(o=i[l],h=0;h<o.length;h++){var c,u,d,p=o[h];b.hasCore(p)&&(u=(c=b.getCore(p)).mapping,d=new c.plugin(n,this,u),t[u]=d,c.custom?n[u]=d:r.hasOwnProperty(u)&&(n[r[u]]=d),a)&&d.boot()}for(o=this.plugins,h=0;h<o.length;h++){var f=o[h];f.mapping&&(n[f.mapping]=f.plugin)}},getDefaultScenePlugins:function(){var t=this.game.config.defaultPlugins;return t.concat(this.scenePlugins)},installScenePlugin:function(t,e,i,o,s){if(void 0===s&&(s=!1),"function"==typeof e){if(b.hasCore(t)||b.register(t,e,i,!0),-1===this.scenePlugins.indexOf(t))this.scenePlugins.push(t);else if(!s&&b.hasCore(t))return;o&&(s=new e(o,this,t),o.sys[t]=s,i&&""!==i&&(o[i]=s),s.boot())}},install:function(t,e,i,o,s){if(void 0===i&&(i=!1),void 0===o&&(o=null),void 0===s&&(s=null),"function"==typeof e&&!b.hasCustom(t))if(null!==o&&(i=!0),this.game.isBooted){if(b.registerCustom(t,e,o,s),i)return this.start(t)}else this._pendingGlobal.push({key:t,plugin:e,start:i,mapping:o,data:s});return null},getIndex:function(t){for(var e=this.plugins,i=0;i<e.length;i++)if(e[i].key===t)return i;return-1},getEntry:function(t){t=this.getIndex(t);if(-1!==t)return this.plugins[t]},isActive:function(t){t=this.getEntry(t);return t&&t.active},start:function(t,e){var i=this.getEntry(e=void 0===e?t:e);return i&&!i.active?(i.active=!0,i.plugin.start()):i=i||this.createEntry(t,e),i?i.plugin:null},createEntry:function(t,e){t=b.getCustom(t);return t&&(t={key:e,plugin:e=new t.plugin(this),active:!0,mapping:t.mapping,data:t.data},this.plugins.push(t),e.init(t.data),e.start()),t},stop:function(t){t=this.getEntry(t);return t&&t.active&&(t.active=!1,t.plugin.stop()),this},get:function(t,e){void 0===e&&(e=!0);var i,o=this.getEntry(t);return o?o.plugin:(i=this.getClass(t))&&e?(o=this.createEntry(t,t))?o.plugin:null:i||null},getClass:function(t){return b.getCustomClass(t)},removeGlobalPlugin:function(t){var e=this.getEntry(t);e&&h(this.plugins,e),b.removeCustom(t)},removeScenePlugin:function(t){h(this.scenePlugins,t),b.remove(t)},registerGameObject:function(t,e,i){return e&&a.register(t,e),i&&r.register(t,i),this},removeGameObject:function(t,e,i){return void 0===i&&(i=!0),(e=void 0===e?!0:e)&&a.remove(t),i&&r.remove(t),this},registerFileType:function(t,e,i){n.register(t,e),i&&i.sys.load&&(i.sys.load[t]=e)},destroy:function(){for(var t=0;t<this.plugins.length;t++)this.plugins[t].plugin.destroy();b.destroyCustomPlugins(),this.game.noReturn&&b.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});t.exports=i},45145:(t,e,i)=>{var o=i(52018),s=i(83419),n=i(44594),i=new s({Extends:o,initialize:function(t,e,i){o.call(this,e),this.scene=t,this.systems=t.sys,this.pluginKey=i,t.sys.events.once(n.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=i},18922:(t,e,i)=>{t.exports={BasePlugin:i(52018),DefaultPlugins:i(42363),PluginCache:i(37277),PluginManager:i(77332),ScenePlugin:i(45145)}},63595:()=>{HTMLVideoElement&&!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(s){const n=performance.now(),r=this.getVideoPlaybackQuality(),a=this.mozPresentedFrames||this.mozPaintedFrames||r.totalVideoFrames-r.droppedVideoFrames,h=(t,e)=>{var i=this.getVideoPlaybackQuality(),o=this.mozPresentedFrames||this.mozPaintedFrames||i.totalVideoFrames-i.droppedVideoFrames;if(o>a){const a=this.mozFrameDelay||i.totalFrameDelay-r.totalFrameDelay||0,h=e-t;s(e,{presentationTime:e+1e3*a,expectedDisplayTime:e+h,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+h/1e3,presentedFrames:o,processingDuration:a}),delete this._rvfcpolyfillmap[n]}else this._rvfcpolyfillmap[n]=requestAnimationFrame(t=>h(e,t))};return this._rvfcpolyfillmap[n]=requestAnimationFrame(t=>h(n,t)),n},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(t){cancelAnimationFrame(this._rvfcpolyfillmap[t]),delete this._rvfcpolyfillmap[t]})},10312:t=>{t.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},29795:t=>{t.exports={DEFAULT:0,LINEAR:0,NEAREST:1}},68627:(t,e,i)=>{var d=i(19715),l=i(32880),o=i(83419),s=i(8054),n=i(50792),p=i(92503),r=i(56373),a=i(97480),h=i(69442),c=i(61340),i=new o({Extends:n,initialize:function(t){n.call(this);var e=t.config,i=(this.config={clearBeforeRender:e.clearBeforeRender,backgroundColor:e.backgroundColor,antialias:e.antialias,roundPixels:e.roundPixels},this.game=t,this.type=s.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=t.canvas,{alpha:t.config.transparent,desynchronized:t.config.desynchronized,willReadFrequently:!1});this.gameContext=e.context||this.gameCanvas.getContext("2d",i),this.currentContext=this.gameContext,this.antialias=t.config.antialias,this.blendModes=r(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new c,this._tempMatrix2=new c,this._tempMatrix3=new c,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(h.READY,this.boot,this)},boot:function(){var t=this.game,e=t.scale.baseSize;this.width=e.width,this.height=e.height,this.isBooted=!0,t.scale.on(a.RESIZE,this.onResize,this),this.resize(e.width,e.height)},onResize:function(t,e){e.width===this.width&&e.height===this.height||this.resize(e.width,e.height)},resize:function(t,e){this.width=t,this.height=e,this.emit(p.RESIZE,t,e)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(t){return this.currentContext.globalCompositeOperation=t,this},setContext:function(t){return this.currentContext=t||this.gameContext,this},setAlpha:function(t){return this.currentContext.globalAlpha=t,this},preRender:function(){var t=this.gameContext,e=this.config,i=this.width,o=this.height;t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),e.clearBeforeRender&&(t.clearRect(0,0,i,o),e.transparent||(t.fillStyle=e.backgroundColor.rgba,t.fillRect(0,0,i,o))),t.save(),this.drawCount=0,this.emit(p.PRE_RENDER)},render:function(t,e,i){var o=e.length,s=(this.emit(p.RENDER,t,i),i.x),n=i.y,r=i.width,a=i.height,h=(i.renderToTexture?i:t.sys).context,l=(h.save(),this.game.scene.customViewports&&(h.beginPath(),h.rect(s,n,r,a),h.clip()),i.emit(d.PRE_RENDER,i),this.currentContext=h,i.mask);l&&l.preRenderCanvas(this,null,i._maskCamera),i.transparent||(h.fillStyle=i.backgroundColor.rgba,h.fillRect(s,n,r,a)),h.globalAlpha=i.alpha,h.globalCompositeOperation="source-over",this.drawCount+=o,i.renderToTexture&&i.emit(d.PRE_RENDER,i),i.matrix.copyToContext(h);for(var c=0;c<o;c++){var u=e[c];u.mask&&u.mask.preRenderCanvas(this,u,i),u.renderCanvas(this,u,i),u.mask&&u.mask.postRenderCanvas(this,u,i)}h.setTransform(1,0,0,1,0,0),h.globalCompositeOperation="source-over",h.globalAlpha=1,i.flashEffect.postRenderCanvas(h),i.fadeEffect.postRenderCanvas(h),i.dirty=!1,l&&l.postRenderCanvas(this),h.restore(),i.renderToTexture&&(i.emit(d.POST_RENDER,i),i.renderToGame)&&t.sys.context.drawImage(i.canvas,s,n),i.emit(d.POST_RENDER,i)},postRender:function(){this.gameContext.restore(),this.emit(p.POST_RENDER);var t=this.snapshotState;t.callback&&(l(this.gameCanvas,t),t.callback=null)},snapshotCanvas:function(t,e,i,o,s,n,r,a,h){void 0===i&&(i=!1),this.snapshotArea(o,s,n,r,e,a,h);o=this.snapshotState;return o.getPixel=i,l(t,o),o.callback=null,this},snapshot:function(t,e,i){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,t,e,i)},snapshotArea:function(t,e,i,o,s,n,r){var a=this.snapshotState;return a.callback=s,a.type=n,a.encoder=r,a.getPixel=!1,a.x=t,a.y=e,a.width=Math.min(i,this.gameCanvas.width),a.height=Math.min(o,this.gameCanvas.height),this},snapshotPixel:function(t,e,i){return this.snapshotArea(t,e,1,1,i),this.snapshotState.getPixel=!0,this},batchSprite:function(t,e,i,o){var s,n,r,a,h,l,c,u,d,p,f,b,y,m,x,g=i.alpha*t.alpha;0!=g&&(s=this.currentContext,n=this._tempMatrix1,r=this._tempMatrix2,a=(h=e.canvasData).x,h=h.y,l=e.cutWidth,c=e.cutHeight,x=e.customPivot,u=e.source.resolution,m=t.displayOriginX,d=t.displayOriginY,p=-m+e.x,f=-d+e.y,t.isCropped&&((b=t._crop).flipX===t.flipX&&b.flipY===t.flipY||e.updateCropUVs(b,t.flipX,t.flipY),l=b.cw,c=b.ch,a=b.cx,h=b.cy,p=-m+b.x,f=-d+b.y,t.flipX&&(0<=p?p=-(p+l):p<0&&(p=Math.abs(p)-l)),t.flipY)&&(0<=f?f=-(f+c):f<0&&(f=Math.abs(f)-c)),y=b=1,t.flipX&&(x||(p+=-e.realWidth+2*m),b=-1),t.flipY&&(x||(f+=-e.realHeight+2*d),y=-1),m=t.x,x=t.y,r.applyITRS(m,x,t.rotation,t.scaleX*b,t.scaleY*y),n.copyFrom(i.matrix),o?(n.multiplyWithOffset(o,-i.scrollX*t.scrollFactorX,-i.scrollY*t.scrollFactorY),r.e=m,r.f=x):(r.e-=i.scrollX*t.scrollFactorX,r.f-=i.scrollY*t.scrollFactorY),n.multiply(r),i.roundPixels&&(n.e=Math.round(n.e),n.f=Math.round(n.f)),s.save(),n.setToContext(s),s.globalCompositeOperation=this.blendModes[t.blendMode],s.globalAlpha=g,s.imageSmoothingEnabled=!e.source.scaleMode,t.mask&&t.mask.preRenderCanvas(this,t,i),0<l&&0<c&&(i.roundPixels?s.drawImage(e.source.image,a,h,l,c,Math.round(p),Math.round(f),Math.round(l/u),Math.round(c/u)):s.drawImage(e.source.image,a,h,l,c,p,f,l/u,c/u)),t.mask&&t.mask.postRenderCanvas(this,t,i),s.restore())},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});t.exports=i},55830:(t,e,i)=>{t.exports={CanvasRenderer:i(68627),GetBlendModes:i(56373),SetTransform:i(20926)}},56373:(t,e,i)=>{var o=i(10312),s=i(89289);t.exports=function(){var t=[],e=s.supportNewBlendModes,i="source-over";return t[o.NORMAL]=i,t[o.ADD]="lighter",t[o.MULTIPLY]=e?"multiply":i,t[o.SCREEN]=e?"screen":i,t[o.OVERLAY]=e?"overlay":i,t[o.DARKEN]=e?"darken":i,t[o.LIGHTEN]=e?"lighten":i,t[o.COLOR_DODGE]=e?"color-dodge":i,t[o.COLOR_BURN]=e?"color-burn":i,t[o.HARD_LIGHT]=e?"hard-light":i,t[o.SOFT_LIGHT]=e?"soft-light":i,t[o.DIFFERENCE]=e?"difference":i,t[o.EXCLUSION]=e?"exclusion":i,t[o.HUE]=e?"hue":i,t[o.SATURATION]=e?"saturation":i,t[o.COLOR]=e?"color":i,t[o.LUMINOSITY]=e?"luminosity":i,t[o.ERASE]="destination-out",t[o.SOURCE_IN]="source-in",t[o.SOURCE_OUT]="source-out",t[o.SOURCE_ATOP]="source-atop",t[o.DESTINATION_OVER]="destination-over",t[o.DESTINATION_IN]="destination-in",t[o.DESTINATION_OUT]="destination-out",t[o.DESTINATION_ATOP]="destination-atop",t[o.LIGHTER]="lighter",t[o.COPY]="copy",t[o.XOR]="xor",t}},20926:(t,e,i)=>{var r=i(91296);t.exports=function(t,e,i,o,s){var n=o.alpha*i.alpha;return!(n<=0||(o=r(i,o,s).calc,e.globalCompositeOperation=t.blendModes[i.blendMode],e.globalAlpha=n,e.save(),o.setToContext(e),e.imageSmoothingEnabled=i.frame?!i.frame.source.scaleMode:t.antialias,0))}},63899:t=>{t.exports="losewebgl"},6119:t=>{t.exports="postrender"},48070:t=>{t.exports="prerender"},15640:t=>{t.exports="render"},8912:t=>{t.exports="resize"},87124:t=>{t.exports="restorewebgl"},92503:(t,e,i)=>{t.exports={LOSE_WEBGL:i(63899),POST_RENDER:i(6119),PRE_RENDER:i(48070),RENDER:i(15640),RESIZE:i(8912),RESTORE_WEBGL:i(87124)}},36909:(t,e,i)=>{t.exports={Events:i(92503),Snapshot:i(89966)},t.exports.Canvas=i(55830),t.exports.WebGL=i(4159)},32880:(t,e,i)=>{var d=i(27919),p=i(40987),f=i(95540);t.exports=function(t,e){var i,o,s,n=f(e,"callback"),r=f(e,"type","image/png"),a=f(e,"encoder",.92),h=Math.abs(Math.round(f(e,"x",0))),l=Math.abs(Math.round(f(e,"y",0))),c=Math.floor(f(e,"width",t.width)),u=Math.floor(f(e,"height",t.height));f(e,"getPixel",!1)?(e=t.getContext("2d",{willReadFrequently:!1}).getImageData(h,l,1,1).data,n.call(null,new p(e[0],e[1],e[2],e[3]))):0!==h||0!==l||c!==t.width||u!==t.height?(e=(i=d.createWebGL(this,c,u)).getContext("2d",{willReadFrequently:!0}),0<c&&0<u&&e.drawImage(t,h,l,c,u,0,0,c,u),(o=new Image).onerror=function(){n.call(null),d.remove(i)},o.onload=function(){n.call(null,o),d.remove(i)},o.src=i.toDataURL(r,a)):((s=new Image).onerror=function(){n.call(null)},s.onload=function(){n.call(null,s)},s.src=t.toDataURL(r,a))}},88815:(t,e,i)=>{var w=i(27919),S=i(40987),A=i(95540);t.exports=function(t,e){var i=A(e,"callback"),o=A(e,"type","image/png"),s=A(e,"encoder",.92),n=Math.abs(Math.round(A(e,"x",0))),r=Math.abs(Math.round(A(e,"y",0))),a=A(e,"getPixel",!1),h=A(e,"isFramebuffer",!1),l=h?A(e,"bufferWidth",1):t.drawingBufferWidth,c=h?A(e,"bufferHeight",1):t.drawingBufferHeight;if(a){a=new Uint8Array(4);t.readPixels(n,h?r:c-r,1,1,t.RGBA,t.UNSIGNED_BYTE,a),i.call(null,new S(a[0],a[1],a[2],a[3]))}else{var u=Math.floor(A(e,"width",l)),d=Math.floor(A(e,"height",c)),p=u*d*4,f=new Uint8Array(p);t.readPixels(n,c-r-d,u,d,t.RGBA,t.UNSIGNED_BYTE,f);for(var b=w.createWebGL(this,u,d),a=b.getContext("2d",{willReadFrequently:!0}),l=a.getImageData(0,0,u,d),y=l.data,m=0;m<d;m++)for(var x=0;x<u;x++){var g=4*((d-m-1)*u+x),v=h?p-4*(m*u+(u-x)):4*(m*u+x);y[0+v]=f[0+g],y[1+v]=f[1+g],y[2+v]=f[2+g],y[3+v]=f[3+g]}a.putImageData(l,0,0);var _=new Image;_.onerror=function(){i.call(null),w.remove(b)},_.onload=function(){i.call(null,_),w.remove(b)},_.src=b.toDataURL(o,s)}}},89966:(t,e,i)=>{t.exports={Canvas:i(32880),WebGL:i(88815)}},7530:(t,e,i)=>{var o=i(83419),m=i(36060),s=i(90330),x=i(82264),g=i(95540),v=i(32302),n=i(63448),r=i(31302),_=i(58918),w=i(14811),S=i(92651),a=i(96569),h=i(56527),l=i(57516),c=i(43439),u=i(81041),d=i(12385),p=i(7589),f=i(95428),b=i(72905),i=new o({initialize:function(t){this.game=t.game,this.renderer=t,this.classes=new s([[m.UTILITY_PIPELINE,p],[m.MULTI_PIPELINE,l],[m.BITMAPMASK_PIPELINE,r],[m.SINGLE_PIPELINE,d],[m.ROPE_PIPELINE,u],[m.LIGHT_PIPELINE,a],[m.POINTLIGHT_PIPELINE,c],[m.MOBILE_PIPELINE,h]]),this.postPipelineClasses=new s,this.pipelines=new s,this.postPipelineInstances=[],this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(t,e,i){var o=this.renderer,s=this.renderTargets;this.frameInc=Math.floor(g(t,"frameInc",32));var n,r,a=o.width,h=o.height,l=this.game.config.disablePreFX;if(this.game.config.disablePostFX||this.postPipelineClasses.setAll([[String(w.BARREL),_.Barrel],[String(w.BLOOM),_.Bloom],[String(w.BLUR),_.Blur],[String(w.BOKEH),_.Bokeh],[String(w.CIRCLE),_.Circle],[String(w.COLOR_MATRIX),_.ColorMatrix],[String(w.DISPLACEMENT),_.Displacement],[String(w.GLOW),_.Glow],[String(w.GRADIENT),_.Gradient],[String(w.PIXELATE),_.Pixelate],[String(w.SHADOW),_.Shadow],[String(w.SHINE),_.Shine],[String(w.VIGNETTE),_.Vignette],[String(w.WIPE),_.Wipe]]),!l){this.classes.set(m.FX_PIPELINE,S);for(var c=Math.min(a,h),u=Math.ceil(c/this.frameInc),d=1;d<u;d++){var p=d*this.frameInc;s.push(new v(o,p,p)),s.push(new v(o,p,p)),s.push(new v(o,p,p)),this.maxDimension=p}s.push(new v(o,a,h,1,0,!0,!0)),s.push(new v(o,a,h,1,0,!0,!0)),s.push(new v(o,a,h,1,0,!0,!0))}var f=this,b=this.game;if(this.classes.each(function(t,e){n=f.add(t,new e({game:b})),t===m.UTILITY_PIPELINE&&(f.UTILITY_PIPELINE=n,f.fullFrame1=n.fullFrame1,f.fullFrame2=n.fullFrame2,f.halfFrame1=n.halfFrame1,f.halfFrame2=n.halfFrame2)}),this.MULTI_PIPELINE=this.get(m.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(m.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(m.MOBILE_PIPELINE),l||(this.FX_PIPELINE=this.get(m.FX_PIPELINE)),t)for(r in t){var y=t[r];(n=new y(b)).name=r,n.isPostFX?this.postPipelineClasses.set(r,y):this.has(r)||(this.classes.set(r,y),this.add(r,n))}this.default=this.get(e),i&&!x.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(t){t=this.get(t);return t&&(this.default=t),t},add:function(t,e){var i,o;if(!e.isPostFX)return i=this.pipelines,o=this.renderer,i.has(t)||(e.name=t,e.manager=this,i.set(t,e)),e.hasBooted||e.boot(),0===o.width||0===o.height||e.isPreFX||e.resize(o.width,o.height),e},addPostPipeline:function(t,e){this.postPipelineClasses.has(t)||this.postPipelineClasses.set(t,e)},flush:function(){this.current&&this.current.flush()},has:function(t){var e=this.pipelines;return"string"==typeof t?e.has(t):!!e.contains(t)},get:function(t){var e=this.pipelines;return"string"==typeof t?e.get(t):e.contains(t)?t:void 0},getPostPipeline:function(t,e,i){var o,s=this.postPipelineClasses,n="",r=typeof t;if("string"==r||"number"==r?(o=s.get(t),n=t):"function"==r?(s.contains(t)&&(o=t),n=t.name):"object"==r&&(o=s.get(t.name),n=t.name),o)return(r=new o(this.game,i)).name=n,e&&(r.gameObject=e),this.postPipelineInstances.push(r),r},removePostPipeline:function(t){b(this.postPipelineInstances,t)},remove:function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),this.pipelines.delete(t),e&&this.classes.delete(t),i&&this.postPipelineClasses.delete(t)},set:function(t,e,i){if(!t.isPostFX)return this.isCurrent(t,i)||(this.flush(),this.current&&this.current.unbind(),(this.current=t).bind(i)),t.updateProjectionMatrix(),t.onBind(e),t},preBatch:function(t){if(t.hasPostPipeline){this.flush();for(var e=t.postPipelines,i=e.length-1;0<=i;i--){var o=e[i];o.active&&o.preBatch(t)}}},postBatch:function(t){if(t.hasPostPipeline){this.flush();for(var e=t.postPipelines,i=0;i<e.length;i++){var o=e[i];o.active&&o.postBatch(t)}}},preBatchCamera:function(t){if(t.hasPostPipeline){this.flush();for(var e=t.postPipelines,i=e.length-1;0<=i;i--){var o=e[i];o.active&&o.preBatch(t)}}},postBatchCamera:function(t){if(t.hasPostPipeline){this.flush();for(var e=t.postPipelines,i=0;i<e.length;i++){var o=e[i];o.active&&o.postBatch(t)}}},isCurrent:function(t,e){var i=this.renderer,o=this.current;return o&&!e&&(e=o.currentShader),!(o!==t||e.program!==i.currentProgram)},copyFrame:function(t,e,i,o,s){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(t,e,i,o,s),this},copyToGame:function(t){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(t),this},drawFrame:function(t,e,i,o){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(t,e,i,o),this},blendFrames:function(t,e,i,o,s){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(t,e,i,o,s),this},blendFramesAdditive:function(t,e,i,o,s){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(t,e,i,o,s),this},clearFrame:function(t,e){return this.UTILITY_PIPELINE.clearFrame(t,e),this},blitFrame:function(t,e,i,o,s,n){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(t,e,i,o,s,n),this},copyFrameRect:function(t,e,i,o,s,n,r,a){return this.UTILITY_PIPELINE.copyFrameRect(t,e,i,o,s,n,r,a),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(t){return this.UTILITY_PIPELINE.bind(t)},setFX:function(){return this.set(this.FX_PIPELINE)},restoreContext:function(){this.rebind(),this.pipelines.each(function(t,e){e.restoreContext()}),f(this.postPipelineInstances,function(t){t.restoreContext()})},rebind:function(t){void 0===t&&this.previous&&(t=this.previous);var e,i=this.renderer,o=i.gl,o=(o.disable(o.DEPTH_TEST),o.disable(o.CULL_FACE),i.hasActiveStencilMask()?o.clear(o.DEPTH_BUFFER_BIT):(o.disable(o.STENCIL_TEST),o.clear(o.DEPTH_BUFFER_BIT|o.STENCIL_BUFFER_BIT)),o.viewport(0,0,i.width,i.height),i.currentProgram=null,i.setBlendMode(0,!0),i.vaoExtension),s=(o&&o.bindVertexArrayOES(null),this.pipelines.entries);for(e in s)s[e].glReset=!0;t&&(this.current=t).rebind()},clear:function(){var t=this.renderer,t=(this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,t.currentProgram=null,t.setBlendMode(0,!0),t.vaoExtension);t&&t.bindVertexArrayOES(null)},getRenderTarget:function(t){var e=this.renderTargets;return t>this.maxDimension?(this.targetIndex=e.length-3,e[this.targetIndex]):(t=3*(n(t,this.frameInc,0,!0)-1),e[this.targetIndex=t])},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});t.exports=i},32302:(t,e,i)=>{var o=i(83419),s=i(92503),i=new o({initialize:function(t,e,i,o,s,n,r,a,h){void 0===o&&(o=1),void 0===s&&(s=0),void 0===n&&(n=!0),void 0===r&&(r=!1),void 0===a&&(a=!0),void 0===h&&(h=!0),this.renderer=t,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=o,this.minFilter=s,this.autoClear=n,this.autoResize=!0,this.hasDepthBuffer=a,this.forceClamp=h,this.resize(e,i),r?this.setAutoResize(!0):this.autoResize=!1},setAutoResize:function(t){return t&&!this.autoResize?(this.renderer.on(s.RESIZE,this.resize,this),this.autoResize=!0):!t&&this.autoResize&&(this.renderer.off(s.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(t,e){var i;return(t=Math.round(t*this.scale))<=0&&(t=1),(e=Math.round(e*this.scale))<=0&&(e=1),!this.autoResize||t===this.width&&e===this.height||((i=this.renderer).deleteFramebuffer(this.framebuffer),i.deleteTexture(this.texture),this.texture=i.createTextureFromSource(null,t,e,this.minFilter,this.forceClamp),this.framebuffer=i.createFramebuffer(t,e,this.texture,this.hasDepthBuffer),this.width=t,this.height=e),this},willResize:function(t,e){return(t=Math.round(t*this.scale))<=0&&(t=1),(e=Math.round(e*this.scale))<=0&&(e=1),t!==this.width||e!==this.height},bind:function(t,e,i){var o=this.renderer;(t=void 0===t?!1:t)&&o.flush(),e&&i&&this.resize(e,i),o.pushFramebuffer(this.framebuffer,!1,!1),t&&this.adjustViewport(),this.autoClear&&((e=this.renderer.gl).clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)),o.clearStencilMask()},adjustViewport:function(){var t=this.renderer.gl;t.viewport(0,0,this.width,this.height),t.disable(t.SCISSOR_TEST)},clear:function(){var t=this.renderer,e=t.gl;t.pushFramebuffer(this.framebuffer),e.disable(e.SCISSOR_TEST),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),t.popFramebuffer(),t.resetScissor()},unbind:function(t){var e=this.renderer;return(t=void 0===t?!1:t)&&e.flush(),e.popFramebuffer()},destroy:function(){var t=this.renderer;t.off(s.RESIZE,this.resize,this),t.deleteFramebuffer(this.framebuffer),t.deleteTexture(this.texture),this.renderer=null,this.framebuffer=null,this.texture=null}});t.exports=i},70554:t=>{t.exports={getTintFromFloats:function(t,e,i,o){return((255&(255*o|0))<<24|(255&(255*t|0))<<16|(255&(255*e|0))<<8|255&(255*i|0))>>>0},getTintAppendFloatAlpha:function(t,e){return((255&(255*e|0))<<24|t)>>>0},getTintAppendFloatAlphaAndSwap:function(t,e){return((255&(255*e|0))<<24|(255&(0|t))<<16|(255&(t>>8|0))<<8|255&(t>>16|0))>>>0},getFloatsFromUintRGB:function(t){return[(255&(t>>16|0))/255,(255&(t>>8|0))/255,(255&(0|t))/255]},checkShaderMax:function(t,e){t=Math.min(16,t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS));return e&&-1!==e?Math.min(t,e):t},parseFragmentShaderMaxTextures:function(t,e){if(!t)return"";for(var i="",o=0;o<e;o++)0<o&&(i+="\n\telse "),o<e-1&&(i+="if (outTexId < "+o+".5)"),i=(i+="\n\t{")+("\n\t\ttexture = texture2D(uMainSampler["+o+"], outTexCoord);")+"\n\t}";return(t=t.replace(/%count%/gi,e.toString())).replace(/%forloop%/gi,i)},setGlowQuality:function(t,e,i,o){return void 0===i&&(i=e.config.glowFXQuality),void 0===o&&(o=e.config.glowFXDistance),(t=t.replace(/__SIZE__/gi,(1/i/o).toFixed(7))).replace(/__DIST__/gi,o.toFixed(0)+".0")}}},29100:(t,e,i)=>{var o=i(83419),x=i(62644),s=i(50792),m=i(77085),g=i(95540),v=i(37867),_=i(92503),w=i(32302),S=i(70554),A=i(38683),i=new o({Extends:s,initialize:function(t){s.call(this);var e=t.game,i=e.renderer,o=i.gl;this.name=g(t,"name","WebGLPipeline"),this.game=e,this.renderer=i,this.manager,this.gl=o,this.view=e.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=g(t,"topology",o.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=g(t,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=t,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[],this.resizeUniform=g(t,"resizeUniform","")},boot:function(){var t=this.gl,e=this.config,i=this.renderer,o=(this.isPostFX||(this.projectionMatrix=(new v).identity()),this.renderTargets),s=g(e,"renderTarget",!1),n=i.width,r=i.height;if("number"==typeof(s="boolean"==typeof s?s&&1:s))for(b=0;b<s;b++)o.push(new w(i,n,r,1,0,!0));else if(Array.isArray(s))for(b=0;b<s.length;b++){var a=g(s[b],"scale",1),h=g(s[b],"minFilter",0),l=g(s[b],"autoClear",1),c=g(s[b],"autoResize",!1),u=g(s[b],"width",null),d=g(s[b],"height",u);u?o.push(new w(i,u,d,1,h,l,c)):o.push(new w(i,n,r,a,h,l,c))}o.length&&(this.currentRenderTarget=o[0]),this.setShadersFromConfig(e);for(var p=this.shaders,f=0,b=0;b<p.length;b++)p[b].vertexSize>f&&(f=p[b].vertexSize);var y=g(e,"batchSize",i.config.batchSize),y=(this.vertexCapacity=6*y,new ArrayBuffer(this.vertexCapacity*f)),e=(this.vertexData=y,this.bytes=new Uint8Array(y),this.vertexViewF32=new Float32Array(y),this.vertexViewU32=new Uint32Array(y),g(e,"vertices",null));for(e?(this.vertexViewF32.set(e),this.vertexBuffer=i.createVertexBuffer(y,t.STATIC_DRAW)):this.vertexBuffer=i.createVertexBuffer(y.byteLength,t.DYNAMIC_DRAW),this.setVertexBuffer(),b=p.length-1;0<=b;b--)p[b].rebind();this.hasBooted=!0,i.on(_.RESIZE,this.resize,this),i.on(_.PRE_RENDER,this.onPreRender,this),i.on(_.RENDER,this.onRender,this),i.on(_.POST_RENDER,this.onPostRender,this),this.emit(m.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(t,e,i){var o=this.renderer;return t===this.currentShader&&o.currentProgram===this.currentShader.program||(this.flush(),this.setVertexBuffer(i)&&!e&&(e=!0),t.bind(e,!1),this.currentShader=t),this},getShaderByName:function(t){for(var e=this.shaders,i=0;i<e.length;i++)if(e[i].name===t)return e[i]},setShadersFromConfig:function(t){var e=this.shaders,i=this.renderer;for(d=0;d<e.length;d++)e[d].destroy();var o="vertShader",s="fragShader",n="attributes",r=g(t,o,null),a=S.parseFragmentShaderMaxTextures(g(t,s,null),i.maxTextures),h=g(t,n,null),l=g(t,"shaders",[]),c=l.length;if(0===c)r&&a&&(this.shaders=[new A(this,"default",r,a,x(h))]);else{for(var u=[],d=0;d<c;d++){var p,f,b,y,m=l[d],m="string"==typeof m?(p="default",f=r,b=S.parseFragmentShaderMaxTextures(m,i.maxTextures),h):(p=g(m,"name","default"),f=g(m,o,r),b=S.parseFragmentShaderMaxTextures(g(m,s,a),i.maxTextures),g(m,n,h));"default"===p&&-1<(y=b.split("\n")[0].trim()).indexOf("#define SHADER_NAME")&&(p=y.substring(20)),f&&b&&u.push(new A(this,p,f,b,x(m)))}this.shaders=u}return 0!==this.shaders.length&&(this.currentShader=this.shaders[0]),this},createBatch:function(t){return this.currentBatch={start:this.vertexCount,count:0,texture:[t],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=t,this.batch.push(this.currentBatch),0},addTextureToBatch:function(t){var e=this.currentBatch;e&&(e.texture.push(t),e.unit++,e.maxUnit++)},pushBatch:function(t){var e,i;return!this.currentBatch||this.forceZero&&t!==this.currentTexture?this.createBatch(t):t===this.currentTexture?this.currentUnit:-1===(i=(e=this.currentBatch).texture.indexOf(t))?e.texture.length===this.renderer.maxTextures?this.createBatch(t):(e.unit++,e.maxUnit++,e.texture.push(t),this.currentUnit=e.unit,this.currentTexture=t,e.unit):(this.currentUnit=i,this.currentTexture=t,i)},setGameObject:function(t,e){return void 0===e&&(e=t.frame),this.pushBatch(e.source.glTexture)},shouldFlush:function(t){return this.vertexCount+(t=void 0===t?0:t)>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(t,e){t===this.width&&e===this.height||this.flush(),this.width=t,this.height=e;for(var i=this.renderTargets,o=0;o<i.length;o++)i[o].resize(t,e);return this.setProjectionMatrix(t,e),this.resizeUniform&&this.set2f(this.resizeUniform,t,e),this.emit(m.RESIZE,t,e,this),this.onResize(t,e),this},setProjectionMatrix:function(t,e){var i=this.projectionMatrix;if(i){this.projectionWidth=t,this.projectionHeight=e,i.ortho(0,t,e,0,-1e3,1e3);for(var o=this.shaders,s="uProjectionMatrix",n=0;n<o.length;n++){var r=o[n];r.hasUniform(s)&&(r.resetUniform(s),r.setMatrix4fv(s,!1,i.val,r))}}return this},flipProjectionMatrix:function(t){var e=this.projectionMatrix;if(!e)return this;var i=this.projectionWidth,o=this.projectionHeight;(t=void 0===t?!0:t)?e.ortho(0,i,0,o,-1e3,1e3):e.ortho(0,i,o,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,e.val)},updateProjectionMatrix:function(){var t,e;this.projectionMatrix&&(t=this.renderer.projectionWidth,e=this.renderer.projectionHeight,this.projectionWidth===t&&this.projectionHeight===e||this.setProjectionMatrix(t,e))},bind:function(t){var e,i;return void 0===t&&(t=this.currentShader),this.glReset?this.rebind(t):(e=!1,(i=this.gl).getParameter(i.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(i.bindBuffer(i.ARRAY_BUFFER,this.vertexBuffer.webGLBuffer),this.activeBuffer=this.vertexBuffer,e=!0),t.bind(e),this.currentShader=t,this.activeTextures.length=0,this.emit(m.BIND,this,t),this.onActive(t),this)},rebind:function(t){this.activeBuffer=null,this.setVertexBuffer();for(var e=this.shaders,i=e.length-1;0<=i;i--){var o=e[i].rebind();t&&o!==t||(this.currentShader=o)}return this.activeTextures.length=0,this.emit(m.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},restoreContext:function(){var t=this.shaders,e=!!this.vertexBuffer;this.activeBuffer=null,this.activeTextures.length=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,e&&this.setVertexBuffer();for(var i=0;i<t.length;i++){var o=t[i];o.syncUniforms(),e&&o.rebind()}},setVertexBuffer:function(t){var e;return(t=void 0===t?this.vertexBuffer:t)!==this.activeBuffer&&(e=this.gl,this.gl.bindBuffer(e.ARRAY_BUFFER,t.webGLBuffer),this.activeBuffer=t,!0)},preBatch:function(t){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(t),this},postBatch:function(t){return this.onDraw(this.currentRenderTarget),this.onPostBatch(t),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(t){if(void 0===t&&(t=!1),0<this.vertexCount){this.emit(m.BEFORE_FLUSH,this,t),this.onBeforeFlush(t);var e=this.gl,i=this.vertexCount,o=this.currentShader.vertexSize,s=this.topology;if(this.active){this.setVertexBuffer(),i===this.vertexCapacity?e.bufferData(e.ARRAY_BUFFER,this.vertexData,e.DYNAMIC_DRAW):e.bufferSubData(e.ARRAY_BUFFER,0,this.bytes.subarray(0,i*o));var n,r,a=this.batch,h=this.activeTextures;if(this.forceZero)for(h[0]||e.activeTexture(e.TEXTURE0),n=0;n<a.length;n++)r=(l=a[n]).texture[0],h[0]!==r&&(e.bindTexture(e.TEXTURE_2D,r.webGLTexture),h[0]=r),e.drawArrays(s,l.start,l.count);else for(n=0;n<a.length;n++){for(var l=a[n],c=0;c<=l.maxUnit;c++)r=l.texture[c],h[c]!==r&&(e.activeTexture(e.TEXTURE0+c),e.bindTexture(e.TEXTURE_2D,r.webGLTexture),h[c]=r);e.drawArrays(s,l.start,l.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(m.AFTER_FLUSH,this,t),this.onAfterFlush(t)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(t,e,i,o,s,n,r){var a=this.vertexViewF32,h=this.vertexViewU32,l=this.vertexCount*this.currentShader.vertexComponentCount-1;a[++l]=t,a[++l]=e,a[++l]=i,a[++l]=o,a[++l]=s,a[++l]=n,h[++l]=r,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(t,e,i,o,s,n,r,a,h,l,c,u,d,p,f,b,y,m,x,g){void 0===g&&(g=this.currentUnit);var v=!1,x=(this.shouldFlush(6)&&(this.flush(),v=!0),this.currentBatch||(g=this.setTexture2D(x)),this.vertexViewF32),_=this.vertexViewU32,w=this.vertexCount*this.currentShader.vertexComponentCount-1;return x[++w]=e,x[++w]=i,x[++w]=l,x[++w]=c,x[++w]=g,x[++w]=m,_[++w]=p,x[++w]=o,x[++w]=s,x[++w]=l,x[++w]=d,x[++w]=g,x[++w]=m,_[++w]=b,x[++w]=n,x[++w]=r,x[++w]=u,x[++w]=d,x[++w]=g,x[++w]=m,_[++w]=y,x[++w]=e,x[++w]=i,x[++w]=l,x[++w]=c,x[++w]=g,x[++w]=m,_[++w]=p,x[++w]=n,x[++w]=r,x[++w]=u,x[++w]=d,x[++w]=g,x[++w]=m,_[++w]=y,x[++w]=a,x[++w]=h,x[++w]=u,x[++w]=c,x[++w]=g,x[++w]=m,_[++w]=f,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(t),v},batchTri:function(t,e,i,o,s,n,r,a,h,l,c,u,d,p,f,b,y){void 0===y&&(y=this.currentUnit);var m=!1,b=(this.shouldFlush(3)&&(this.flush(),m=!0),this.currentBatch||(y=this.setTexture2D(b)),this.vertexViewF32),x=this.vertexViewU32,g=this.vertexCount*this.currentShader.vertexComponentCount-1;return b[++g]=e,b[++g]=i,b[++g]=a,b[++g]=h,b[++g]=y,b[++g]=f,x[++g]=u,b[++g]=o,b[++g]=s,b[++g]=a,b[++g]=c,b[++g]=y,b[++g]=f,x[++g]=d,b[++g]=n,b[++g]=r,b[++g]=l,b[++g]=c,b[++g]=y,b[++g]=f,x[++g]=p,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(t),m},drawFillRect:function(t,e,i,o,s,n,r,a){void 0===r&&(r=this.renderer.whiteTexture),void 0===a&&(a=!0),t=Math.floor(t),e=Math.floor(e);var i=Math.floor(t+i),o=Math.floor(e+o),h=this.setTexture2D(r),s=S.getTintAppendFloatAlphaAndSwap(s,n),n=0,l=1;a&&(n=1,l=0),this.batchQuad(null,t,e,t,o,i,o,i,e,0,n,1,l,s,s,s,s,0,r,h)},setTexture2D:function(t){return void 0===t&&(t=this.renderer.whiteTexture),this.pushBatch(t)},bindTexture:function(t,e){var i=this.gl;return i.activeTexture(i.TEXTURE0+(e=void 0===e?0:e)),i.bindTexture(i.TEXTURE_2D,t.webGLTexture),this},bindRenderTarget:function(t,e){return this.bindTexture(t.texture,e)},setTime:function(t,e){return this.set1f(t,this.game.loop.getDuration(),e),this},setBoolean:function(t,e,i){return(i=void 0===i?this.currentShader:i).setBoolean(t,e),this},set1f:function(t,e,i){return(i=void 0===i?this.currentShader:i).set1f(t,e),this},set2f:function(t,e,i,o){return(o=void 0===o?this.currentShader:o).set2f(t,e,i),this},set3f:function(t,e,i,o,s){return(s=void 0===s?this.currentShader:s).set3f(t,e,i,o),this},set4f:function(t,e,i,o,s,n){return(n=void 0===n?this.currentShader:n).set4f(t,e,i,o,s),this},set1fv:function(t,e,i){return(i=void 0===i?this.currentShader:i).set1fv(t,e),this},set2fv:function(t,e,i){return(i=void 0===i?this.currentShader:i).set2fv(t,e),this},set3fv:function(t,e,i){return(i=void 0===i?this.currentShader:i).set3fv(t,e),this},set4fv:function(t,e,i){return(i=void 0===i?this.currentShader:i).set4fv(t,e),this},set1iv:function(t,e,i){return(i=void 0===i?this.currentShader:i).set1iv(t,e),this},set2iv:function(t,e,i){return(i=void 0===i?this.currentShader:i).set2iv(t,e),this},set3iv:function(t,e,i){return(i=void 0===i?this.currentShader:i).set3iv(t,e),this},set4iv:function(t,e,i){return(i=void 0===i?this.currentShader:i).set4iv(t,e),this},set1i:function(t,e,i){return(i=void 0===i?this.currentShader:i).set1i(t,e),this},set2i:function(t,e,i,o){return(o=void 0===o?this.currentShader:o).set2i(t,e,i),this},set3i:function(t,e,i,o,s){return(s=void 0===s?this.currentShader:s).set3i(t,e,i,o),this},set4i:function(t,e,i,o,s,n){return(n=void 0===n?this.currentShader:n).set4i(t,e,i,o,s),this},setMatrix2fv:function(t,e,i,o){return(o=void 0===o?this.currentShader:o).setMatrix2fv(t,e,i),this},setMatrix3fv:function(t,e,i,o){return(o=void 0===o?this.currentShader:o).setMatrix3fv(t,e,i),this},setMatrix4fv:function(t,e,i,o){return(o=void 0===o?this.currentShader:o).setMatrix4fv(t,e,i),this},destroy:function(){this.emit(m.DESTROY,this);for(var t=this.shaders,e=0;e<t.length;e++)t[e].destroy();var i=this.renderTargets;for(e=0;e<i.length;e++)i[e].destroy();var o=this.renderer;return o.deleteBuffer(this.vertexBuffer),o.off(_.RESIZE,this.resize,this),o.off(_.PRE_RENDER,this.onPreRender,this),o.off(_.RENDER,this.onRender,this),o.off(_.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});t.exports=i},74797:(t,e,i)=>{var h=i(95428),o=i(72905),r=i(19715),s=i(83419),c=i(8054),n=i(50792),l=i(92503),u=i(50030),d=i(37867),a=i(29747),p=i(7530),f=i(32302),b=i(97480),y=i(69442),m=i(70554),x=i(88815),g=i(26128),v=i(1482),_=i(82751),w=i(84387),S=i(93567),A=i(57183),i=new s({Extends:n,initialize:function(t){n.call(this);var e=t.config,i={alpha:e.transparent,desynchronized:e.desynchronized,depth:!0,antialias:e.antialiasGL,premultipliedAlpha:e.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:e.failIfMajorPerformanceCaveat,powerPreference:e.powerPreference,preserveDrawingBuffer:e.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:e.clearBeforeRender,antialias:e.antialias,backgroundColor:e.backgroundColor,contextCreation:i,roundPixels:e.roundPixels,maxTextures:e.maxTextures,maxTextureSize:e.maxTextureSize,batchSize:e.batchSize,maxLights:e.maxLights,mipmapFilter:e.mipmapFilter},this.game=t,this.type=c.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=t.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.glBufferWrappers=[],this.glProgramWrappers=[],this.glTextureWrappers=[],this.glFramebufferWrappers=[],this.glAttribLocationWrappers=[],this.glUniformLocationWrappers=[],this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=a,this.contextRestoredHandler=a,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.normalTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(t){var i,e=this.game,o=this.canvas,s=t.backgroundColor;if(!(i=e.config.context||o.getContext("webgl",t.contextCreation)||o.getContext("experimental-webgl",t.contextCreation))||i.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=i;function n(){var t=i.getSupportedExtensions(),e=(r.supportedExtensions=t,"ANGLE_instanced_arrays"),e=(r.instancedArraysExtension=-1<t.indexOf(e)?i.getExtension(e):null,"OES_vertex_array_object");r.vaoExtension=-1<t.indexOf(e)?i.getExtension(e):null}var r=this;n(),this.contextLostHandler=function(t){r.contextLost=!0,console,r.emit(l.LOSE_WEBGL,r),t.preventDefault()},o.addEventListener("webglcontextlost",this.contextLostHandler,!1),this.contextRestoredHandler=function(t){var e;i.isContextLost()?console:(r.currentProgram=null,r.currentFramebuffer=null,r.setBlendMode(c.BlendModes.NORMAL),i.disable(i.BLEND),i.disable(i.DEPTH_TEST),i.enable(i.CULL_FACE),r.compression=r.getCompressedTextures(),h(r.glTextureWrappers,e=function(t){t.createResource()}),h(r.glBufferWrappers,e),h(r.glFramebufferWrappers,e),h(r.glProgramWrappers,e),h(r.glAttribLocationWrappers,e),h(r.glUniformLocationWrappers,e),r.createTemporaryTextures(),r.pipelines.restoreContext(),r.resize(r.game.scale.baseSize.width,r.game.scale.baseSize.height),n(),r.contextLost=!1,console,r.emit(l.RESTORE_WEBGL,r),t.preventDefault())},o.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),e.context=i;for(var a=0;a<=27;a++)this.blendModes.push({func:[i.ONE,i.ONE_MINUS_SRC_ALPHA],equation:i.FUNC_ADD});return this.blendModes[1].func=[i.ONE,i.DST_ALPHA],this.blendModes[2].func=[i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[i.ONE,i.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[i.ZERO,i.ONE_MINUS_SRC_ALPHA],equation:i.FUNC_REVERSE_SUBTRACT},this.glFormats=[i.BYTE,i.SHORT,i.UNSIGNED_BYTE,i.UNSIGNED_SHORT,i.FLOAT],this.glFuncMap={mat2:{func:i.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:i.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:i.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:i.uniform1f,length:1},"1fv":{func:i.uniform1fv,length:1},"1i":{func:i.uniform1i,length:1},"1iv":{func:i.uniform1iv,length:1},"2f":{func:i.uniform2f,length:2},"2fv":{func:i.uniform2fv,length:1},"2i":{func:i.uniform2i,length:2},"2iv":{func:i.uniform2iv,length:1},"3f":{func:i.uniform3f,length:3},"3fv":{func:i.uniform3fv,length:1},"3i":{func:i.uniform3i,length:3},"3iv":{func:i.uniform3iv,length:1},"4f":{func:i.uniform4f,length:4},"4fv":{func:i.uniform4fv,length:1},"4i":{func:i.uniform4i,length:4},"4iv":{func:i.uniform4iv,length:1}},t.maxTextures&&-1!==t.maxTextures||(t.maxTextures=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS)),t.maxTextureSize||(t.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),i.disable(i.DEPTH_TEST),i.disable(i.CULL_FACE),i.enable(i.BLEND),i.clearColor(s.redGL,s.greenGL,s.blueGL,s.alphaGL),-1!==["NEAREST","LINEAR","NEAREST_MIPMAP_NEAREST","LINEAR_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_LINEAR"].indexOf(t.mipmapFilter)&&(this.mipmapFilter=i[t.mipmapFilter]),this.maxTextures=m.checkShaderMax(i,t.maxTextures),this.textureIndexes=[],this.createTemporaryTextures(),this.pipelines=new p(this),this.setBlendMode(c.BlendModes.NORMAL),this.projectionMatrix=(new d).identity(),e.textures.once(y.READY,this.boot,this),this},boot:function(){var t=this.game,e=this.pipelines,i=t.scale.baseSize,o=i.width,i=i.height,s=(this.width=o,this.height=i,this.isBooted=!0,this.renderTarget=new f(this,o,i,1,0,!0,!0),this.maskTarget=new f(this,o,i,1,0,!0,!0),this.maskSource=new f(this,o,i,1,0,!0,!0),t.config),e=(e.boot(s.pipeline,s.defaultPipeline,s.autoMobilePipeline),this.blankTexture=t.textures.getFrame("__DEFAULT").glTexture,this.normalTexture=t.textures.getFrame("__NORMAL").glTexture,this.whiteTexture=t.textures.getFrame("__WHITE").glTexture,this.gl);e.bindFramebuffer(e.FRAMEBUFFER,null),e.enable(e.SCISSOR_TEST),t.scale.on(b.RESIZE,this.onResize,this),this.resize(o,i)},createTemporaryTextures:function(){for(var t=this.gl,e=0;e<this.maxTextures;e++){var i=t.createTexture();t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(e)}},captureFrame:function(t,e){void 0===t&&(t=!1)},captureNextFrame:function(){},getFps:function(){},log:function(){},startCapture:function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=!1)},stopCapture:function(){},onCapture:function(t){},onResize:function(t,e){e.width===this.width&&e.height===this.height||this.resize(e.width,e.height)},beginCapture:function(t,e){void 0===t&&(t=this.width),void 0===e&&(e=this.height),this.renderTarget.bind(!0,t,e),this.setProjectionMatrix(t,e)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(t,e){var i=this.gl;return this.width=t,this.height=e,this.setProjectionMatrix(t,e),i.viewport(0,0,t,e),this.drawingBufferHeight=i.drawingBufferHeight,i.scissor(0,i.drawingBufferHeight-e,t,e),this.defaultScissor[2]=t,this.defaultScissor[3]=e,this.emit(l.RESIZE,t,e),this},getCompressedTextures:function(){function t(t,e){var i=t.getExtension(n+e)||t.getExtension("WEBKIT_WEBGL_compressed_texture_"+e)||t.getExtension("EXT_texture_compression_"+e);if(i){var o,s={};for(o in i)s[i[o]]=o;return s}}var n="WEBGL_compressed_texture_",e=this.gl;return{ETC:t(e,"etc"),ETC1:t(e,"etc1"),ATC:t(e,"atc"),ASTC:t(e,"astc"),BPTC:t(e,"bptc"),RGTC:t(e,"rgtc"),PVRTC:t(e,"pvrtc"),S3TC:t(e,"s3tc"),S3TCSRGB:t(e,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(t,e){t=this.compression[t.toUpperCase()];if(e in t)return t[e]},supportsCompressedTexture:function(t,e){t=this.compression[t.toUpperCase()];return!!t&&(!e||e in t)},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(t,e){return t===this.projectionWidth&&e===this.projectionHeight||(this.projectionWidth=t,this.projectionHeight=e,this.projectionMatrix.ortho(0,t,e,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(t){return!!this.supportedExtensions&&this.supportedExtensions.indexOf(t)},getExtension:function(t){return this.hasExtension(t)?(t in this.extensions||(this.extensions[t]=this.gl.getExtension(t)),this.extensions[t]):null},flush:function(){this.pipelines.flush()},pushScissor:function(t,e,i,o,s){void 0===s&&(s=this.drawingBufferHeight);var n=[t,e,i,o];return this.scissorStack.push(n),this.setScissor(t,e,i,o,s),this.currentScissor=n},setScissor:function(t,e,i,o,s){void 0===s&&(s=this.drawingBufferHeight);var n,r,a,h=this.gl,l=this.currentScissor,c=0<i&&0<o;l&&c&&(n=l[0],r=l[1],a=l[2],l=l[3],c=n!==t||r!==e||a!==i||l!==o),c&&(this.flush(),h.scissor(t,s-e-o,i,o))},resetScissor:function(){var t,e,i,o=this.gl,s=(o.enable(o.SCISSOR_TEST),this.currentScissor);s&&(t=s[0],e=s[1],i=s[2],s=s[3],0<i)&&0<s&&o.scissor(t,this.drawingBufferHeight-e-s,i,s)},popScissor:function(){var t=this.scissorStack,t=(t.pop(),t[t.length-1]);t&&this.setScissor(t[0],t[1],t[2],t[3]),this.currentScissor=t},hasActiveStencilMask:function(){var t=this.currentMask.mask,e=this.currentCameraMask.mask;return t&&t.isStencil||e&&e.isStencil},resetViewport:function(){var t=this.gl;t.viewport(0,0,this.width,this.height),this.drawingBufferHeight=t.drawingBufferHeight},setBlendMode:function(t,e){var i=this.gl,o=this.blendModes[t];return!!((e=void 0===e?!1:e)||t!==c.BlendModes.SKIP_CHECK&&this.currentBlendMode!==t)&&(this.flush(),i.enable(i.BLEND),i.blendEquation(o.equation),2<o.func.length?i.blendFuncSeparate(o.func[0],o.func[1],o.func[2],o.func[3]):i.blendFunc(o.func[0],o.func[1]),this.currentBlendMode=t,!0)},addBlendMode:function(t,e){return this.blendModes.push({func:t,equation:e})-1},updateBlendMode:function(t,e,i){return this.blendModes[t]&&(this.blendModes[t].func=e,i)&&(this.blendModes[t].equation=i),this},removeBlendMode:function(t){return 17<t&&this.blendModes[t]&&this.blendModes.splice(t,1),this},pushFramebuffer:function(t,e,i,o,s){return t===this.currentFramebuffer?this:(this.fboStack.push(t),this.setFramebuffer(t,e,i,o,s))},setFramebuffer:function(t,e,i,o,s){var n,r,a;return void 0===e&&(e=!1),void 0===i&&(i=!0),void 0===o&&(o=null),void 0===s&&(s=!1),t!==this.currentFramebuffer&&(n=this.gl,r=this.width,a=this.height,t&&t.renderTexture&&i?(r=t.renderTexture.width,a=t.renderTexture.height):this.flush(),t?n.bindFramebuffer(n.FRAMEBUFFER,t.webGLFramebuffer):n.bindFramebuffer(n.FRAMEBUFFER,null),i&&n.viewport(0,0,r,a),o&&n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,o.webGLTexture,0),s&&(n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT)),e&&(t?(this.drawingBufferHeight=a,this.pushScissor(0,0,r,a)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=t),this},popFramebuffer:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!0);var i=this.fboStack;i.pop();i=(i=i[i.length-1])||null;return this.setFramebuffer(i,t,e),i},restoreFramebuffer:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!0);var i=this.fboStack,i=(i=i[i.length-1])||null;this.currentFramebuffer=null,this.setFramebuffer(i,t,e)},setProgram:function(t){return t!==this.currentProgram&&(this.flush(),this.gl.useProgram(t.webGLProgram),this.currentProgram=t,!0)},resetProgram:function(){return this.gl.useProgram(this.currentProgram.webGLProgramWrapper),this},createTextureFromSource:function(t,e,i,o,s){void 0===s&&(s=!1);var n=this.gl,r=n.NEAREST,a=n.NEAREST,h=n.CLAMP_TO_EDGE,l=(e=t?t.width:e,i=t?t.height:i,u(e,i));return l&&!s&&(h=n.REPEAT),o===c.ScaleModes.LINEAR&&this.config.antialias&&(o=!(s=t&&t.compressed)&&l||s&&1<t.mipmaps.length,r=this.mipmapFilter&&o?this.mipmapFilter:n.LINEAR,a=n.LINEAR),t||"number"!=typeof e||"number"!=typeof i?this.createTexture2D(0,r,a,h,h,n.RGBA,t):this.createTexture2D(0,r,a,h,h,n.RGBA,null,e,i)},createTexture2D:function(t,e,i,o,s,n,r,a,h,l,c,u){"number"!=typeof a&&(a=r?r.width:1),"number"!=typeof h&&(h=r?r.height:1);t=new _(this.gl,t,e,i,o,s,n,r,a,h,l,c,u);return this.glTextureWrappers.push(t),t},createFramebuffer:function(t,e,i,o){this.currentFramebuffer=null;t=new w(this.gl,t,e,i,o);return this.glFramebufferWrappers.push(t),t},beginBitmapMask:function(t,e){this.gl&&(this.flush(),this.maskTarget.bind(!0),this.currentCameraMask.mask!==t)&&(this.currentMask.mask=t,this.currentMask.camera=e)},drawBitmapMask:function(t,e,i){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),t.renderWebGL(this,t,e),this.maskSource.unbind(!0),this.maskTarget.unbind();t=this.gl,e=this.getCurrentStencilMask();e?(t.enable(t.STENCIL_TEST),e.mask.applyStencil(this,e.camera,!0)):this.currentMask.mask=null,this.pipelines.set(i),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.maskTarget.texture.webGLTexture),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,this.maskSource.texture.webGLTexture)},createProgram:function(t,e){t=new v(this.gl,t,e);return this.glProgramWrappers.push(t),t},createVertexBuffer:function(t,e){var i=this.gl,t=new g(i,t,i.ARRAY_BUFFER,e);return this.glBufferWrappers.push(t),t},createAttribLocation:function(t,e){t=new S(this.gl,t,e);return this.glAttribLocationWrappers.push(t),t},createUniformLocation:function(t,e){t=new A(this.gl,t,e);return this.glUniformLocationWrappers.push(t),t},createIndexBuffer:function(t,e){var i=this.gl,t=new g(i,t,i.ELEMENT_ARRAY_BUFFER,e);return this.glBufferWrappers.push(t),t},deleteTexture:function(t){if(t)return o(this.glTextureWrappers,t),t.destroy(),this},deleteFramebuffer:function(t){return t&&(o(this.fboStack,t),o(this.glFramebufferWrappers,t),t.destroy()),this},deleteProgram:function(t){return t&&(o(this.glProgramWrappers,t),t.destroy()),this},deleteAttribLocation:function(t){return t&&(o(this.glAttribLocationWrappers,t),t.destroy()),this},deleteUniformLocation:function(t){return t&&(o(this.glUniformLocationWrappers,t),t.destroy()),this},deleteBuffer:function(t){return t&&(o(this.glBufferWrappers,t),t.destroy()),this},preRenderCamera:function(t){var e=t.x,i=t.y,o=t.width,s=t.height,n=t.backgroundColor;t.emit(r.PRE_RENDER,t),this.pipelines.preBatchCamera(t),this.pushScissor(e,i,o,s),t.mask&&(this.currentCameraMask.mask=t.mask,this.currentCameraMask.camera=t._maskCamera,t.mask.preRenderWebGL(this,t,t._maskCamera)),0<n.alphaGL&&this.pipelines.setMulti().drawFillRect(e,i,o,s,m.getTintFromFloats(n.blueGL,n.greenGL,n.redGL,1),n.alphaGL)},getCurrentStencilMask:function(){var t=null,e=this.maskStack,i=this.currentCameraMask;return 0<e.length?t=e[e.length-1]:i.mask&&i.mask.isStencil&&(t=i),t},postRenderCamera:function(t){var e,i=t.flashEffect,o=t.fadeEffect;(i.isRunning||o.isRunning||o.isComplete)&&(e=this.pipelines.setMulti(),i.postRenderWebGL(e,m.getTintFromFloats),o.postRenderWebGL(e,m.getTintFromFloats)),t.dirty=!1,this.popScissor(),t.mask&&(this.currentCameraMask.mask=null,t.mask.postRenderWebGL(this,t._maskCamera)),this.pipelines.postBatchCamera(t),t.emit(r.POST_RENDER,t)},preRender:function(){var t,e;this.contextLost||((t=this.gl).bindFramebuffer(t.FRAMEBUFFER,null),this.config.clearBeforeRender&&(e=this.config.backgroundColor,t.clearColor(e.redGL,e.greenGL,e.blueGL,e.alphaGL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT)),t.enable(t.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&t.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(l.PRE_RENDER))},render:function(t,e,i){if(!this.contextLost){var o=e.length;if(this.emit(l.RENDER,t,i),this.preRenderCamera(i),0===o);else{this.currentType="";for(var s=this.currentMask,n=0;n<o;n++){this.finalType=n===o-1;var r=e[n],a=r.mask,a=((s=this.currentMask).mask&&s.mask!==a&&s.mask.postRenderWebGL(this,s.camera),a&&s.mask!==a&&a.preRenderWebGL(this,r,i),r.blendMode!==this.currentBlendMode&&this.setBlendMode(r.blendMode),r.type);a!==this.currentType&&(this.newType=!0,this.currentType=a),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=e[n+1].type===this.currentType,r.renderWebGL(this,r,i),this.newType=!1}(s=this.currentMask).mask&&s.mask.postRenderWebGL(this,s.camera)}this.setBlendMode(c.BlendModes.NORMAL),this.postRenderCamera(i)}},postRender:function(){var t;this.contextLost||(this.flush(),this.emit(l.POST_RENDER),(t=this.snapshotState).callback&&(x(this.gl,t),t.callback=null))},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var t=this.gl,e=this.getCurrentStencilMask();e&&(e=e.mask,t.enable(t.STENCIL_TEST),e.invertAlpha?t.stencilFunc(t.NOTEQUAL,e.level,255):t.stencilFunc(t.EQUAL,e.level,255))},snapshot:function(t,e,i){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,t,e,i)},snapshotArea:function(t,e,i,o,s,n,r){var a=this.snapshotState;return a.callback=s,a.type=n,a.encoder=r,a.getPixel=!1,a.x=t,a.y=e,a.width=i,a.height=o,this},snapshotPixel:function(t,e,i){return this.snapshotArea(t,e,1,1,i),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(t,e,i,o,s,n,r,a,h,l,c){void 0===s&&(s=!1),"pixel"===l&&(s=!0,l="image/png");var u=this.currentFramebuffer,n=(this.snapshotArea(n=void 0===n?0:n,r=void 0===r?0:r,a=void 0===a?e:a,h=void 0===h?i:h,o,l,c),this.snapshotState);return n.getPixel=s,n.isFramebuffer=!0,n.bufferWidth=e,n.bufferHeight=i,n.width=Math.min(n.width,e),n.height=Math.min(n.height,i),this.setFramebuffer(t),x(this.gl,n),this.setFramebuffer(u),n.callback=null,n.isFramebuffer=!1,this},canvasToTexture:function(t,e,i,o){void 0===i&&(i=!1),void 0===o&&(o=!1);var s=this.gl,n=s.NEAREST,r=s.NEAREST,a=t.width,h=t.height,l=s.CLAMP_TO_EDGE,c=u(a,h);return!i&&c&&(l=s.REPEAT),this.config.antialias&&(n=c&&this.mipmapFilter?this.mipmapFilter:s.LINEAR,r=s.LINEAR),e?(e.update(t,a,h,o,l,l,n,r,e.format),e):this.createTexture2D(0,n,r,l,l,s.RGBA,t,a,h,!0,!1,o)},createCanvasTexture:function(t,e,i){return this.canvasToTexture(t,null,e=void 0===e?!1:e,i=void 0===i?!1:i)},updateCanvasTexture:function(t,e,i,o){return this.canvasToTexture(t,e,o=void 0===o?!1:o,i=void 0===i?!1:i)},videoToTexture:function(t,e,i,o){void 0===i&&(i=!1),void 0===o&&(o=!1);var s=this.gl,n=s.NEAREST,r=s.NEAREST,a=t.videoWidth,h=t.videoHeight,l=s.CLAMP_TO_EDGE,c=u(a,h);return!i&&c&&(l=s.REPEAT),this.config.antialias&&(n=c&&this.mipmapFilter?this.mipmapFilter:s.LINEAR,r=s.LINEAR),e?(e.update(t,a,h,o,l,l,n,r,e.format),e):this.createTexture2D(0,n,r,l,l,s.RGBA,t,a,h,!0,!0,o)},createVideoTexture:function(t,e,i){return this.videoToTexture(t,null,e=void 0===e?!1:e,i=void 0===i?!1:i)},updateVideoTexture:function(t,e,i,o){return this.videoToTexture(t,e,o=void 0===o?!1:o,i=void 0===i?!1:i)},createUint8ArrayTexture:function(t,e,i){var o=this.gl,s=o.NEAREST,n=o.NEAREST,r=o.CLAMP_TO_EDGE;return u(e,i)&&(r=o.REPEAT),this.createTexture2D(0,s,n,r,r,o.RGBA,t,e,i)},setTextureFilter:function(t,e){var i=this.gl,e=0===e?i.LINEAR:i.NEAREST,o=(i.activeTexture(i.TEXTURE0),i.getParameter(i.TEXTURE_BINDING_2D));return i.bindTexture(i.TEXTURE_2D,t.webGLTexture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,e),t.minFilter=e,t.magFilter=e,o&&i.bindTexture(i.TEXTURE_2D,o),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);function t(t){t.destroy()}h(this.glAttribLocationWrappers,t),h(this.glBufferWrappers,t),h(this.glFramebufferWrappers,t),h(this.glProgramWrappers,t),h(this.glTextureWrappers,t),h(this.glUniformLocationWrappers,t),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});t.exports=i},38683:(t,e,i)=>{var o=i(83419),s=i(95428),c=i(95540),u=i(14500),i=new o({initialize:function(t,e,i,o,s){this.pipeline=t,this.name=e,this.renderer=t.renderer,this.gl=this.renderer.gl,this.fragSrc=o,this.vertSrc=i,this.program=this.renderer.createProgram(i,o),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(s),this.createUniforms()},createAttributes:function(t){for(var e=0,i=0,o=[],s=this.vertexComponentCount=0;s<t.length;s++){var n=t[s],r=n.name,a=c(n,"size",1),h=c(n,"type",u.FLOAT),l=h.enum,h=h.size,n=!!n.normalized;o.push({name:r,size:a,type:l,normalized:n,offset:i,enabled:!1,location:-1}),4===h?e+=a:e++,i+=a*h}this.vertexSize=i,this.vertexComponentCount=e,this.attributes=o},bind:function(t,e){return void 0===t&&(t=!1),(e=void 0===e?!1:e)&&this.pipeline.flush(),this.renderer.setProgram(this.program),t&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(t){void 0===t&&(t=!1);for(var e=this.gl,i=this.renderer,o=this.vertexSize,s=this.attributes,n=this.program,r=0;r<s.length;r++){var a,h=s[r],l=h.size,c=h.type,u=h.offset,d=h.enabled,p=h.location,f=!!h.normalized;t?(-1!==p&&i.deleteAttribLocation(p),0<=(a=this.renderer.createAttribLocation(n,h.name)).webGLAttribLocation?(e.enableVertexAttribArray(a.webGLAttribLocation),e.vertexAttribPointer(a.webGLAttribLocation,l,c,f,o,u),h.enabled=!0,h.location=a):-1!==a.webGLAttribLocation&&e.disableVertexAttribArray(a.webGLAttribLocation)):d?e.vertexAttribPointer(p.webGLAttribLocation,l,c,f,o,u):!d&&-1!==p&&-1<p.webGLAttribLocation&&(e.disableVertexAttribArray(p.webGLAttribLocation),h.location=-1)}return this},createUniforms:function(){for(var t,e=this.gl,i=this.program,o=this.uniforms,s=e.getProgramParameter(i.webGLProgram,e.ACTIVE_UNIFORMS),n=0;n<s;n++){var r,a=e.getActiveUniform(i.webGLProgram,n);a&&(a=a.name,null!==(t=this.renderer.createUniformLocation(i,a))&&(o[a]={name:a,location:t,setter:null,value1:null,value2:null,value3:null,value4:null}),0<(r=a.indexOf("[")))&&(a=a.substr(0,r),o.hasOwnProperty(a)||null!==(t=this.renderer.createUniformLocation(i,a))&&(o[a]={name:a,location:t,setter:null,value1:null,value2:null,value3:null,value4:null}))}return this},syncUniforms:function(){var t,e=this.gl;for(t in this.renderer.setProgram(this.program),this.uniforms){var i=this.uniforms[t];i.setter&&i.setter.call(e,i.location.webGLUniformLocation,i.value1,i.value2,i.value3,i.value4)}},hasUniform:function(t){return this.uniforms.hasOwnProperty(t)},resetUniform:function(t){t=this.uniforms[t];return t&&(t.value1=null,t.value2=null,t.value3=null,t.value4=null),this},setUniform1:function(t,e,i,o){e=this.uniforms[e];return e&&(!o&&e.value1===i||(e.setter||(e.setter=t),e.value1=i,this.renderer.setProgram(this.program),t.call(this.gl,e.location.webGLUniformLocation,i),this.pipeline.currentShader=this)),this},setUniform2:function(t,e,i,o,s){e=this.uniforms[e];return e&&(!s&&e.value1===i&&e.value2===o||(e.setter||(e.setter=t),e.value1=i,e.value2=o,this.renderer.setProgram(this.program),t.call(this.gl,e.location.webGLUniformLocation,i,o),this.pipeline.currentShader=this)),this},setUniform3:function(t,e,i,o,s,n){e=this.uniforms[e];return e&&(!n&&e.value1===i&&e.value2===o&&e.value3===s||(e.setter||(e.setter=t),e.value1=i,e.value2=o,e.value3=s,this.renderer.setProgram(this.program),t.call(this.gl,e.location.webGLUniformLocation,i,o,s),this.pipeline.currentShader=this)),this},setUniform4:function(t,e,i,o,s,n,r){e=this.uniforms[e];return e&&(!r&&e.value1===i&&e.value2===o&&e.value3===s&&e.value4===n||(e.setter||(e.setter=t),e.value1=i,e.value2=o,e.value3=s,e.value4=n,this.renderer.setProgram(this.program),t.call(this.gl,e.location.webGLUniformLocation,i,o,s,n),this.pipeline.currentShader=this)),this},setBoolean:function(t,e){return this.setUniform1(this.gl.uniform1i,t,Number(e))},set1f:function(t,e){return this.setUniform1(this.gl.uniform1f,t,e)},set2f:function(t,e,i){return this.setUniform2(this.gl.uniform2f,t,e,i)},set3f:function(t,e,i,o){return this.setUniform3(this.gl.uniform3f,t,e,i,o)},set4f:function(t,e,i,o,s){return this.setUniform4(this.gl.uniform4f,t,e,i,o,s)},set1fv:function(t,e){return this.setUniform1(this.gl.uniform1fv,t,e,!0)},set2fv:function(t,e){return this.setUniform1(this.gl.uniform2fv,t,e,!0)},set3fv:function(t,e){return this.setUniform1(this.gl.uniform3fv,t,e,!0)},set4fv:function(t,e){return this.setUniform1(this.gl.uniform4fv,t,e,!0)},set1iv:function(t,e){return this.setUniform1(this.gl.uniform1iv,t,e,!0)},set2iv:function(t,e){return this.setUniform1(this.gl.uniform2iv,t,e,!0)},set3iv:function(t,e){return this.setUniform1(this.gl.uniform3iv,t,e,!0)},set4iv:function(t,e){return this.setUniform1(this.gl.uniform4iv,t,e,!0)},set1i:function(t,e){return this.setUniform1(this.gl.uniform1i,t,e)},set2i:function(t,e,i){return this.setUniform2(this.gl.uniform2i,t,e,i)},set3i:function(t,e,i,o){return this.setUniform3(this.gl.uniform3i,t,e,i,o)},set4i:function(t,e,i,o,s){return this.setUniform4(this.gl.uniform4i,t,e,i,o,s)},setMatrix2fv:function(t,e,i){return this.setUniform2(this.gl.uniformMatrix2fv,t,e,i,!0)},setMatrix3fv:function(t,e,i){return this.setUniform2(this.gl.uniformMatrix3fv,t,e,i,!0)},setMatrix4fv:function(t,e,i){return this.setUniform2(this.gl.uniformMatrix4fv,t,e,i,!0)},createProgram:function(t,e){return void 0===t&&(t=this.vertSrc),void 0===e&&(e=this.fragSrc),this.program&&this.renderer.deleteProgram(this.program),this.vertSrc=t,this.fragSrc=e,this.program=this.renderer.createProgram(t,e),this.createUniforms(),this.rebind()},destroy:function(){var e=this.renderer;s(this.uniforms,function(t){e.deleteUniformLocation(t.location)}),this.uniforms=null,s(this.attributes,function(t){e.deleteAttribLocation(t.location)}),this.attributes=null,e.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null}});t.exports=i},14500:t=>{t.exports={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}}},4159:(t,e,i)=>{var o=i(14500),i=i(79291)(!1,{PipelineManager:i(7530),Pipelines:i(96615),RenderTarget:i(32302),Utils:i(70554),WebGLPipeline:i(29100),WebGLRenderer:i(74797),WebGLShader:i(38683),Wrappers:i(9503)},o);t.exports=i},31302:(t,e,i)=>{var o=i(83419),s=i(95540),n=i(78908),r=i(85191),a=i(14500),h=i(29100),i=new o({Extends:h,initialize:function(t){t.fragShader=s(t,"fragShader",n),t.vertShader=s(t,"vertShader",r),t.batchSize=s(t,"batchSize",1),t.vertices=s(t,"vertices",[-1,1,-1,-7,7,1]),t.attributes=s(t,"attributes",[{name:"inPosition",size:2,type:a.FLOAT}]),h.call(this,t)},boot:function(){h.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(t,e){h.prototype.resize.call(this,t,e),this.set2f("uResolution",t,e)},beginMask:function(t,e,i){this.renderer.beginBitmapMask(t,i)},endMask:function(t,e,i){var o=this.gl,s=this.renderer,n=t.bitmapMask;n&&o&&(s.drawBitmapMask(n,e,this),i&&this.set2f("uResolution",i.width,i.height),this.set1i("uInvertMaskAlpha",t.invertAlpha),o.drawArrays(this.topology,0,3),i&&this.set2f("uResolution",this.width,this.height),o.bindTexture(o.TEXTURE_2D,null))}});t.exports=i},92651:(t,e,i)=>{var o=i(83419),s=i(58918),h=i(14811),l=i(95540),n=i(43558),r=i(89350),a=i(70554),i=new o({Extends:n,initialize:function(t){t.shaders=[a.setGlowQuality(r.FXGlowFrag,t.game),r.FXShadowFrag,r.FXPixelateFrag,r.FXVignetteFrag,r.FXShineFrag,r.FXBlurLowFrag,r.FXBlurMedFrag,r.FXBlurHighFrag,r.FXGradientFrag,r.FXBloomFrag,r.ColorMatrixFrag,r.FXCircleFrag,r.FXBarrelFrag,r.FXDisplacementFrag,r.FXWipeFrag,r.FXBokehFrag],n.call(this,t);t=this.game,this.glow=new s.Glow(t),this.shadow=new s.Shadow(t),this.pixelate=new s.Pixelate(t),this.vignette=new s.Vignette(t),this.shine=new s.Shine(t),this.gradient=new s.Gradient(t),this.circle=new s.Circle(t),this.barrel=new s.Barrel(t),this.wipe=new s.Wipe(t),this.bokeh=new s.Bokeh(t),t=[];t[h.GLOW]=this.onGlow,t[h.SHADOW]=this.onShadow,t[h.PIXELATE]=this.onPixelate,t[h.VIGNETTE]=this.onVignette,t[h.SHINE]=this.onShine,t[h.BLUR]=this.onBlur,t[h.GRADIENT]=this.onGradient,t[h.BLOOM]=this.onBloom,t[h.COLOR_MATRIX]=this.onColorMatrix,t[h.CIRCLE]=this.onCircle,t[h.BARREL]=this.onBarrel,t[h.DISPLACEMENT]=this.onDisplacement,t[h.WIPE]=this.onWipe,t[h.BOKEH]=this.onBokeh,this.fxHandlers=t,this.source,this.target,this.swap},onDraw:function(t,e,i){this.source=t,this.target=e,this.swap=i;var o=t.width,s=t.height,e=this.tempSprite,n=this.fxHandlers;if(e&&e.preFX)for(var r=e.preFX.list,a=0;a<r.length;a++){var h=r[a];h.active&&n[h.type].call(this,h,o,s)}this.drawToGame(this.source)},runDraw:function(){var t=this.source,e=this.target;this.copy(t,e),this.source=e,this.target=t},onGlow:function(t,e,i){var o=this.shaders[h.GLOW];this.setShader(o),this.glow.onPreRender(t,o,e,i),this.runDraw()},onShadow:function(t){var e=this.shaders[h.SHADOW];this.setShader(e),this.shadow.onPreRender(t,e),this.runDraw()},onPixelate:function(t,e,i){var o=this.shaders[h.PIXELATE];this.setShader(o),this.pixelate.onPreRender(t,o,e,i),this.runDraw()},onVignette:function(t){var e=this.shaders[h.VIGNETTE];this.setShader(e),this.vignette.onPreRender(t,e),this.runDraw()},onShine:function(t,e,i){var o=this.shaders[h.SHINE];this.setShader(o),this.shine.onPreRender(t,o,e,i),this.runDraw()},onBlur:function(t,e,i){var o=l(t,"quality"),o=this.shaders[h.BLUR+o];this.setShader(o),this.set1i("uMainSampler",0),this.set2f("resolution",e,i),this.set1f("strength",l(t,"strength")),this.set3fv("color",l(t,"glcolor"));for(var s=l(t,"x"),n=l(t,"y"),r=l(t,"steps"),a=0;a<r;a++)this.set2f("offset",s,0),this.runDraw(),this.set2f("offset",0,n),this.runDraw()},onGradient:function(t){var e=this.shaders[h.GRADIENT];this.setShader(e),this.gradient.onPreRender(t,e),this.runDraw()},onBloom:function(t,e,i){var o=this.shaders[h.BLOOM];this.copySprite(this.source,this.swap),this.setShader(o),this.set1i("uMainSampler",0),this.set1f("strength",l(t,"blurStrength")),this.set3fv("color",l(t,"glcolor"));for(var s=2/e*l(t,"offsetX"),n=2/i*l(t,"offsetY"),r=l(t,"steps"),a=0;a<r;a++)this.set2f("offset",s,0),this.runDraw(),this.set2f("offset",0,n),this.runDraw();this.blendFrames(this.swap,this.source,this.target,l(t,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(t){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",t.getData()),this.set1f("uAlpha",t.alpha),this.runDraw()},onCircle:function(t,e,i){var o=this.shaders[h.CIRCLE];this.setShader(o),this.circle.onPreRender(t,o,e,i),this.runDraw()},onBarrel:function(t){var e=this.shaders[h.BARREL];this.setShader(e),this.barrel.onPreRender(t,e),this.runDraw()},onDisplacement:function(t){this.setShader(this.shaders[h.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",t.x,t.y),this.bindTexture(t.glTexture,1),this.runDraw()},onWipe:function(t){var e=this.shaders[h.WIPE];this.setShader(e),this.wipe.onPreRender(t,e),this.runDraw()},onBokeh:function(t,e,i){var o=this.shaders[h.BOKEH];this.setShader(o),this.bokeh.onPreRender(t,o,e,i),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,n.prototype.destroy.call(this),this}});t.exports=i},96569:(t,e,i)=>{var o=i(83419),s=i(95540),n=i(31063),O=i(57516),r=i(61340),a=i(26099),h=i(29100),i=new o({Extends:O,initialize:function(t){var e=s(t,"fragShader",n);t.fragShader=e.replace("%LIGHT_COUNT%",t.game.renderer.config.maxLights),O.call(this,t),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new a,this._tempMatrix=new r,this._tempMatrix2=new r},boot:function(){h.prototype.boot.call(this)},onRender:function(t,e){t=t.sys.lights;if(this.lightsActive=!1,t&&t.active){var i,o=t.getLights(e),s=o.length,n=(this.lightsActive=!0,this.renderer.height),r=e.matrix,a=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",e.x,e.y,e.rotation,e.zoom),this.set3f("uAmbientLightColor",t.ambientColor.r,t.ambientColor.g,t.ambientColor.b),this.set1i("uLightCount",s),i=0;i<s;i++){var h=o[i].light,l=h.color,c="uLights["+i+"].";r.transformPoint(h.x,h.y,a),this.set2f(c+"position",a.x-e.scrollX*h.scrollFactorX*e.zoom,n-(a.y-e.scrollY*h.scrollFactorY*e.zoom)),this.set3f(c+"color",l.r,l.g,l.b),this.set1f(c+"intensity",h.intensity),this.set1f(c+"radius",h.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(t){var e,i,o;t===this.currentNormalMapRotation&&0!==this.vertexCount||(0<this.vertexCount&&this.flush(),e=this.inverseRotationMatrix,t?(o=-t,i=Math.cos(o),o=Math.sin(o),e[1]=o,e[3]=-o,e[0]=e[4]=i):(e[0]=e[4]=1,e[1]=e[3]=0),this.setMatrix3fv("uInverseRotationMatrix",!1,e),this.currentNormalMapRotation=t)},setTexture2D:function(t,e){var i=this.renderer,i=(void 0===t&&(t=i.whiteTexture),this.getNormalMap(e)),t=(this.isNewNormalMap(t,i)&&(this.flush(),this.createBatch(t),this.addTextureToBatch(i),this.currentNormalMap=i),0);return e&&e.parentContainer?t=e.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2).rotationNormalized:e&&(t=e.rotation),this.setNormalMapRotation(t),0},setGameObject:function(t,e){var e=(e=void 0===e?t.frame:e).glTexture,i=this.getNormalMap(t);return this.isNewNormalMap(e,i)&&(this.flush(),this.createBatch(e),this.addTextureToBatch(i),this.currentNormalMap=i),t.parentContainer?(e=t.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2),this.setNormalMapRotation(e.rotationNormalized)):this.setNormalMapRotation(t.rotation),0},isNewNormalMap:function(t,e){return this.currentTexture!==t||this.currentNormalMap!==e},getNormalMap:function(t){var e;return t&&(t.displayTexture?e=t.displayTexture.dataSource[t.displayFrame.sourceIndex]:t.texture?e=t.texture.dataSource[t.frame.sourceIndex]:t.tileset&&(e=(Array.isArray(t.tileset)?t.tileset[0]:t.tileset).image.dataSource[0]),e)?e.glTexture:this.renderer.normalTexture},batchSprite:function(t,e,i){this.lightsActive&&O.prototype.batchSprite.call(this,t,e,i)},batchTexture:function(t,e,i,o,s,n,r,a,h,l,c,u,d,p,f,b,y,m,x,g,v,_,w,S,A,C,T,P,B,E,M,D){this.lightsActive&&O.prototype.batchTexture.call(this,t,e,i,o,s,n,r,a,h,l,c,u,d,p,f,b,y,m,x,g,v,_,w,S,A,C,T,P,B,E,M,D)},batchTextureFrame:function(t,e,i,o,s,n,r){this.lightsActive&&O.prototype.batchTextureFrame.call(this,t,e,i,o,s,n,r)}});t.exports=i},56527:(t,e,i)=>{var o=i(83419),s=i(95540),n=i(57516),r=i(45561),a=i(60722),h=i(14500),l=i(29100),i=new o({Extends:n,initialize:function(t){t.fragShader=s(t,"fragShader",r),t.vertShader=s(t,"vertShader",a),t.attributes=s(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:h.UNSIGNED_BYTE,normalized:!0}]),t.forceZero=!0,t.resizeUniform="uResolution",n.call(this,t)},boot:function(){l.prototype.boot.call(this);var t=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",t.width,t.height),this.set1i("uRoundPixels",t.config.roundPixels)}});t.exports=i},57516:(t,e,i)=>{var o=i(83419),v=i(94811),s=i(95540),n=i(98840),r=i(44667),a=i(61340),_=i(70554),h=i(14500),l=i(29100),i=new o({Extends:l,initialize:function(t){var e=t.game.renderer,i=s(t,"fragShader",n);t.fragShader=_.parseFragmentShaderMaxTextures(i,e.maxTextures),t.vertShader=s(t,"vertShader",r),t.attributes=s(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:h.UNSIGNED_BYTE,normalized:!0}]),t.resizeUniform="uResolution",l.call(this,t),this._tempMatrix1=new a,this._tempMatrix2=new a,this._tempMatrix3=new a,this.calcMatrix=new a,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){l.prototype.boot.call(this);var t=this.renderer;this.set1iv("uMainSampler",t.textureIndexes),this.set2f("uResolution",t.width,t.height),this.set1i("uRoundPixels",t.config.roundPixels)},batchSprite:function(t,e,i){this.manager.set(this,t);var o=this._tempMatrix1,s=this._tempMatrix2,n=this._tempMatrix3,r=t.frame,a=r.glTexture,h=r.u0,l=r.v0,c=r.u1,u=r.v1,d=r.x,p=r.y,f=r.cutWidth,b=r.cutHeight,y=r.customPivot,m=t.displayOriginX,x=t.displayOriginY,d=-m+d,p=-x+p,g=(t.isCropped&&((g=t._crop).flipX===t.flipX&&g.flipY===t.flipY||r.updateCropUVs(g,t.flipX,t.flipY),h=g.u0,l=g.v0,c=g.u1,u=g.v1,f=g.width,b=g.height,d=-m+g.x,p=-x+g.y),1),v=1,m=(t.flipX&&(y||(d+=-r.realWidth+2*m),g=-1),t.flipY&&(y||(p+=-r.realHeight+2*x),v=-1),t.x),y=t.y,x=(s.applyITRS(m,y,t.rotation,t.scaleX*g,t.scaleY*v),o.copyFrom(e.matrix),i?(o.multiplyWithOffset(i,-e.scrollX*t.scrollFactorX,-e.scrollY*t.scrollFactorY),s.e=m,s.f=y):(s.e-=e.scrollX*t.scrollFactorX,s.f-=e.scrollY*t.scrollFactorY),o.multiply(s,n),n.setQuad(d,p,d+f,p+b)),g=_.getTintAppendFloatAlpha,v=e.alpha,i=g(t.tintTopLeft,v*t._alphaTL),m=g(t.tintTopRight,v*t._alphaTR),y=g(t.tintBottomLeft,v*t._alphaBL),o=g(t.tintBottomRight,v*t._alphaBR),s=(this.shouldFlush(6)&&this.flush(),this.setGameObject(t,r));this.manager.preBatch(t),this.currentShader.set1i("uRoundPixels",e.roundPixels),this.batchQuad(t,x[0],x[1],x[2],x[3],x[4],x[5],x[6],x[7],h,l,c,u,i,m,y,o,t.tintFill,a,s),this.manager.postBatch(t)},batchTexture:function(t,e,i,o,s,n,r,a,I,k,V,h,l,c,u,d,p,f,b,y,m,G,z,N,X,W,x,g,v,_,U,w,S){void 0===S&&(S=!1),this.manager.set(this,t);var A,C,T,P,B,E=this._tempMatrix1,M=this._tempMatrix2,D=this._tempMatrix3,Y=f/i+x,j=b/o+g,J=(f+y)/i+x,H=(b+m)/o+g,O=r,R=a,L=-d,F=-p,y=(t.isCropped&&(C=(A=t._crop).width,T=A.height,P=f=A.x,B=b=A.y,Y=(P=h?y-A.x-C:P)/i+x,j=(B=l?m-A.y-T:B)/o+g,J=(P+(r=O=C))/i+x,H=(B+(a=R=T))/o+g,L=-d+f,F=-p+b),h&&(O*=-1,L+=r),(l^=!U&&e.isRenderTexture?1:0)&&(R*=-1,F+=a),M.applyITRS(s,n,V,I,k),E.copyFrom(v.matrix),_?(E.multiplyWithOffset(_,-v.scrollX*c,-v.scrollY*u),M.e=s,M.f=n):(M.e-=v.scrollX*c,M.f-=v.scrollY*u),E.multiply(M,D),D.setQuad(L,F,L+O,F+R));null==w&&(w=this.setTexture2D(e)),t&&!S&&this.manager.preBatch(t),this.currentShader.set1i("uRoundPixels",v.roundPixels),this.batchQuad(t,y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7],Y,j,J,H,G,z,N,X,W,e,w),t&&!S&&this.manager.postBatch(t)},batchTextureFrame:function(t,e,i,o,s,n,r){this.manager.set(this);var n=this._tempMatrix1.copyFrom(n),a=this._tempMatrix2,r=(r?n.multiply(r,a):a=n,a.setQuad(e,i,e+t.width,i+t.height)),n=this.setTexture2D(t.source.glTexture);o=_.getTintAppendFloatAlpha(o,s),this.batchQuad(null,r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],t.u0,t.v0,t.u1,t.v1,o,o,o,o,0,t.glTexture,n)},batchFillRect:function(t,e,i,o,s,n){this.renderer.pipelines.set(this);var r=this.calcMatrix,n=(n&&n.multiply(s,r),r.setQuad(t,e,t+i,e+o)),s=this.fillTint;this.batchQuad(null,n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],0,0,1,1,s.TL,s.TR,s.BL,s.BR,2)},batchFillTriangle:function(t,e,i,o,s,n,r,a){this.renderer.pipelines.set(this);var h=this.calcMatrix,a=(a&&a.multiply(r,h),h.getX(t,e)),r=h.getY(t,e),t=h.getX(i,o),e=h.getY(i,o),i=h.getX(s,n),o=h.getY(s,n),h=this.fillTint;this.currentShader.set1i("uRoundPixels",!1),this.batchTri(null,a,r,t,e,i,o,0,0,1,1,h.TL,h.TR,h.BL,2)},batchStrokeTriangle:function(t,e,i,o,s,n,r,a,h){var l=this.tempTriangle;l[0].x=t,l[0].y=e,l[0].width=r,l[1].x=i,l[1].y=o,l[1].width=r,l[2].x=s,l[2].y=n,l[2].width=r,l[3].x=t,l[3].y=e,l[3].width=r,this.batchStrokePath(l,r,!1,a,h)},batchFillPath:function(t,e,i){this.renderer.pipelines.set(this);var o=this.calcMatrix;i&&i.multiply(e,o);for(var s,n,r=t.length,a=this.polygonCache,h=this.fillTint.TL,l=this.fillTint.TR,c=this.fillTint.BL,u=0;u<r;++u)n=t[u],a.push(n.x,n.y);r=(s=v(a)).length,this.currentShader.set1i("uRoundPixels",!1);for(var d=0;d<r;d+=3){var p=2*s[d+0],f=2*s[d+1],b=2*s[d+2],y=a[0+p],p=a[1+p],m=a[0+f],f=a[1+f],x=a[0+b],b=a[1+b],g=o.getX(y,p),y=o.getY(y,p),p=o.getX(m,f),m=o.getY(m,f),f=o.getX(x,b),x=o.getY(x,b);this.batchTri(null,g,y,p,m,f,x,0,0,1,1,h,l,c,2)}a.length=0},batchStrokePath:function(t,e,i,o,s){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var n=t.length-1,r=0;r<n;r++){var a=t[r],h=t[r+1];this.batchLine(a.x,a.y,h.x,h.y,a.width/2,h.width/2,e,r,!i&&r===n-1,o,s)}},batchLine:function(t,e,i,o,s,n,r,a,h,l,c){this.renderer.pipelines.set(this);var u,d,p,f,b=this.calcMatrix,c=(c&&c.multiply(l,b),i-t),l=o-e,c=Math.sqrt(c*c+l*l);0!==c&&(d=t-(l=s*(o-e)/c),p=e-(s=s*(t-i)/c),f=i+(u=n*(o-e)/c),c=o+(n=n*(t-i)/c),t=t+l,l=e+s,i=b.getX(e=i-u,s=o-n),u=b.getY(e,s),o=b.getX(d,p),n=b.getY(d,p),e=b.getX(f,c),s=b.getY(f,c),d=b.getX(t,l),p=b.getY(t,l),c=(f=this.strokeTint).TL,b=f.TR,t=f.BL,l=f.BR,this.currentShader.set1i("uRoundPixels",!1),this.batchQuad(null,d,p,o,n,i,u,e,s,0,0,1,1,c,b,t,l,2),r<=2||(f=this.prevQuad,r=this.firstQuad,0<a&&f[4]?this.batchQuad(null,d,p,o,n,f[0],f[1],f[2],f[3],0,0,1,1,c,b,t,l,2):(r[0]=d,r[1]=p,r[2]=o,r[3]=n,r[4]=1),h&&r[4]?this.batchQuad(null,i,u,e,s,r[0],r[1],r[2],r[3],0,0,1,1,c,b,t,l,2):(f[0]=i,f[1]=u,f[2]=e,f[3]=s,f[4]=1)))},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,l.prototype.destroy.call(this),this}});t.exports=i},43439:(t,e,i)=>{var o=i(83419),s=i(95540),n=i(4127),r=i(89924),a=i(29100),i=new o({Extends:a,initialize:function(t){t.vertShader=s(t,"vertShader",r),t.fragShader=s(t,"fragShader",n),t.attributes=s(t,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),a.call(this,t)},onRender:function(t,e){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",e.zoom)},batchPointLight:function(t,e,i,o,s,n,r,a,h,l,c,u){var d=t.color,p=t.intensity,f=t.radius,b=t.attenuation,y=d.r*p,m=d.g*p,d=d.b*p,p=e.alpha*t.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(i,o,c,u,f,b,y,m,d,p),this.batchLightVert(s,n,c,u,f,b,y,m,d,p),this.batchLightVert(r,a,c,u,f,b,y,m,d,p),this.batchLightVert(i,o,c,u,f,b,y,m,d,p),this.batchLightVert(r,a,c,u,f,b,y,m,d,p),this.batchLightVert(h,l,c,u,f,b,y,m,d,p),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(t,e,i,o,s,n,r,a,h,l){var c=this.vertexViewF32,u=this.vertexCount*this.currentShader.vertexComponentCount-1;c[++u]=t,c[++u]=e,c[++u]=i,c[++u]=o,c[++u]=s,c[++u]=n,c[++u]=r,c[++u]=a,c[++u]=h,c[++u]=l,this.vertexCount++}});t.exports=i},84057:(t,e,i)=>{var o=i(83419),s=i(89422),n=i(95540),r=i(27681),a=i(49627),h=i(29100),i=new o({Extends:h,initialize:function(t){t.renderTarget=n(t,"renderTarget",1),t.fragShader=n(t,"fragShader",r),t.vertShader=n(t,"vertShader",a),t.attributes=n(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),t.batchSize=1,t.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],h.call(this,t),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new s,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines)},bootFX:function(){h.prototype.boot.call(this);var t=this.manager.UTILITY_PIPELINE,t=(this.fullFrame1=t.fullFrame1,this.fullFrame2=t.fullFrame2,this.halfFrame1=t.halfFrame1,this.halfFrame2=t.halfFrame2,this.renderer);this.set1i("uMainSampler",0),this.set2f("uResolution",t.width,t.height),this.set1i("uRoundPixels",t.config.roundPixels);for(var e=this.renderTargets,i=0;i<e.length;i++)e[i].autoResize=!0},postBatch:function(t){return this.hasBooted||(this.bootFX(),this.currentRenderTarget&&this.currentRenderTarget.bind()),this.onDraw(this.currentRenderTarget),this.onPostBatch(t),this},onDraw:function(t){this.bindAndDraw(t)},getController:function(t){return void 0!==t?t:this.controller||this},copySprite:function(t,e,i){void 0===i&&(i=!1);var o=this.gl,t=(o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,t.texture.webGLTexture),o.getParameter(o.FRAMEBUFFER_BINDING));o.bindFramebuffer(o.FRAMEBUFFER,e.framebuffer.webGLFramebuffer),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,e.texture.webGLTexture,0),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),o.bufferData(o.ARRAY_BUFFER,this.vertexData,o.STATIC_DRAW),o.drawArrays(o.TRIANGLES,0,6),i&&(o.bindTexture(o.TEXTURE_2D,null),o.bindFramebuffer(o.FRAMEBUFFER,t))},copyFrame:function(t,e,i,o,s){this.manager.copyFrame(t,e,i,o,s)},copyToGame:function(t){this.manager.copyToGame(t)},drawFrame:function(t,e,i){this.manager.drawFrame(t,e,i,this.colorMatrix)},blendFrames:function(t,e,i,o,s){this.manager.blendFrames(t,e,i,o,s)},blendFramesAdditive:function(t,e,i,o,s){this.manager.blendFramesAdditive(t,e,i,o,s)},clearFrame:function(t,e){this.manager.clearFrame(t,e)},blitFrame:function(t,e,i,o,s,n){this.manager.blitFrame(t,e,i,o,s,n)},copyFrameRect:function(t,e,i,o,s,n,r,a){this.manager.copyFrameRect(t,e,i,o,s,n,r,a)},bindAndDraw:function(t,e,i,o,s){void 0===i&&(i=!0),void 0===o&&(o=!0);var n=this.gl,r=this.renderer;this.bind(s),this.set1i("uMainSampler",0),e?(n.viewport(0,0,e.width,e.height),n.bindFramebuffer(n.FRAMEBUFFER,e.framebuffer.webGLFramebuffer),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e.texture.webGLTexture,0),i&&(o?n.clearColor(0,0,0,0):n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT))):(r.popFramebuffer(!1,!1),r.currentFramebuffer||n.viewport(0,0,r.width,r.height)),r.restoreStencilMask(),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,t.texture.webGLTexture),n.bufferData(n.ARRAY_BUFFER,this.vertexData,n.STATIC_DRAW),n.drawArrays(n.TRIANGLES,0,6),e&&(n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,r.currentFramebuffer.webGLFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,this.manager.removePostPipeline(this),h.prototype.destroy.call(this),this}});t.exports=i},43558:(t,e,i)=>{var u=i(10312),A=i(67502),o=i(83419),s=i(96293),n=i(95540),r=i(57516),a=i(27681),h=i(87841),l=i(32302),c=i(45561),d=i(60722),p=i(29100),i=new o({Extends:r,initialize:function(t){var e=n(t,"fragShader",a),i=n(t,"vertShader",d),o=n(t,"drawShader",a),e=[{name:"DrawSprite",fragShader:c,vertShader:d},{name:"CopySprite",fragShader:e,vertShader:i},{name:"DrawGame",fragShader:o,vertShader:d},{name:"ColorMatrix",fragShader:s}],o=n(t,"shaders",[]);t.shaders=e.concat(o),t.vertShader||(t.vertShader=i),t.batchSize=1,r.call(this,t),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new h,this.targetBounds=new h,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){p.prototype.boot.call(this);var t=this.shaders,e=this.renderer,t=(this.drawSpriteShader=t[0],this.copyShader=t[1],this.gameShader=t[2],this.colorMatrixShader=t[3],this.fsTarget=new l(e,e.width,e.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget),new ArrayBuffer(168));this.quadVertexData=t,this.quadVertexViewF32=new Float32Array(t),this.quadVertexBuffer=e.createVertexBuffer(t,this.gl.STATIC_DRAW),this.onResize(e.width,e.height),this.currentShader=this.copyShader,this.set2f("uResolution",e.width,e.height),this.set1i("uRoundPixels",e.config.roundPixels)},onResize:function(t,e){var i=this.quadVertexViewF32;i[1]=e,i[22]=e,i[14]=t,i[28]=t,i[35]=t,i[36]=e},batchQuad:function(t,e,i,o,s,n,r,a,h,l,c,u,d,p,f,b,y,m,x){var g=Math.min(e,o,n,a),v=Math.min(i,s,r,h),_=Math.max(e,o,n,a)-g,w=Math.max(i,s,r,h)-v,g=this.spriteBounds.setTo(g,v,_,w),v=t?t.preFX.padding:0,_=Math.abs(Math.max(_+2*v,w+2*v)),w=this.manager.getRenderTarget(_),v=this.targetBounds.setTo(0,0,w.width,w.height),_=(A(v,g.centerX,g.centerY),this.tempSprite=t,this.gl),g=this.renderer,S=(g.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.set2f("uResolution",g.width,g.height),this.set1i("uRoundPixels",g.config.roundPixels),this.flipProjectionMatrix(!0),t&&(this.onDrawSprite(t,w),t.preFX.onFX(this)),this.fsTarget);return this.flush(),_.viewport(0,0,g.width,g.height),_.bindFramebuffer(_.FRAMEBUFFER,S.framebuffer.webGLFramebuffer),_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,S.texture.webGLTexture,0),_.clearColor(0,0,0,0),_.clear(_.COLOR_BUFFER_BIT),this.setTexture2D(x),this.batchVert(e,i,l,c,0,m,p),this.batchVert(o,s,l,d,0,m,b),this.batchVert(n,r,u,d,0,m,y),this.batchVert(e,i,l,c,0,m,p),this.batchVert(n,r,u,d,0,m,y),this.batchVert(a,h,u,c,0,m,f),this.flush(),this.flipProjectionMatrix(!1),_.activeTexture(_.TEXTURE0),_.bindTexture(_.TEXTURE_2D,w.texture.webGLTexture),_.copyTexSubImage2D(_.TEXTURE_2D,0,0,0,v.x,v.y,v.width,v.height),_.bindFramebuffer(_.FRAMEBUFFER,null),_.bindTexture(_.TEXTURE_2D,null),this.onBatch(t),this.currentShader=this.copyShader,this.onDraw(w,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(t,e,i,o,s,n,r){void 0===i&&(i=!0),void 0===o&&(o=!0),void 0===s&&(s=!1),void 0===r&&(r=this.copyShader);var a,h=this.gl,l=this.tempSprite,c=(n&&(r=this.colorMatrixShader),this.currentShader=r,this.setVertexBuffer(this.quadVertexBuffer)),r=(r.bind(c,!1),this.renderer);this.set1i("uMainSampler",0),this.set2f("uResolution",r.width,r.height),this.set1i("uRoundPixels",r.config.roundPixels),l.preFX.onFXCopy(this),this.onCopySprite(t,e,l),n&&(this.set1fv("uColorMatrix",n.getData()),this.set1f("uAlpha",n.alpha)),h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,t.texture.webGLTexture),t.height>e.height?(h.viewport(0,0,t.width,t.height),this.setTargetUVs(t,e)):(c=e.height-t.height,h.viewport(0,c,t.width,t.height),this.resetUVs()),h.bindFramebuffer(h.FRAMEBUFFER,e.framebuffer.webGLFramebuffer),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,e.texture.webGLTexture,0),i&&(h.clearColor(0,0,0,Number(!o)),h.clear(h.COLOR_BUFFER_BIT)),s&&(a=this.renderer.currentBlendMode,this.renderer.setBlendMode(u.ERASE)),h.bufferData(h.ARRAY_BUFFER,this.quadVertexData,h.STATIC_DRAW),h.drawArrays(h.TRIANGLES,0,6),s&&this.renderer.setBlendMode(a),h.bindFramebuffer(h.FRAMEBUFFER,null)},copy:function(t,e){var i=this.gl;this.set1i("uMainSampler",0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,t.texture.webGLTexture),i.viewport(0,0,t.width,t.height),this.setUVs(0,0,0,1,1,1,1,0),i.bindFramebuffer(i.FRAMEBUFFER,e.framebuffer.webGLFramebuffer),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,e.texture.webGLTexture,0),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.bufferData(i.ARRAY_BUFFER,this.quadVertexData,i.STATIC_DRAW),i.drawArrays(i.TRIANGLES,0,6),i.bindFramebuffer(i.FRAMEBUFFER,null)},blendFrames:function(t,e,i,o,s){this.manager.blendFrames(t,e,i,o,s)},blendFramesAdditive:function(t,e,i,o,s){this.manager.blendFramesAdditive(t,e,i,o,s)},drawToGame:function(t){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(t)},copyToGame:function(t){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(t)},bindAndDraw:function(t){var e=this.gl,i=this.renderer,o=(this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(t.texture),this._tempMatrix1.loadIdentity()),s=this.targetBounds.x,n=this.targetBounds.y,r=s+t.width,t=n+t.height,a=o.getX(s,n),h=o.getX(s,t),l=o.getX(r,t),c=o.getX(r,n),u=o.getY(s,n),s=o.getY(s,t),t=o.getY(r,t),o=o.getY(r,n),r=16777215;this.batchVert(a,u,0,0,0,0,r),this.batchVert(h,s,0,1,0,0,r),this.batchVert(l,t,1,1,0,0,r),this.batchVert(a,u,0,0,0,0,r),this.batchVert(l,t,1,1,0,0,r),this.batchVert(c,o,1,0,0,0,r),i.restoreFramebuffer(!1,!0),i.currentFramebuffer||e.viewport(0,0,i.width,i.height),i.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(t){this.drawToGame(t)},setUVs:function(t,e,i,o,s,n,r,a){var h=this.quadVertexViewF32;h[2]=t,h[3]=e,h[9]=i,h[10]=o,h[16]=s,h[17]=n,h[23]=t,h[24]=e,h[30]=s,h[31]=n,h[37]=r,h[38]=a},setTargetUVs:function(t,e){e=e.height/t.height;this.setUVs(0,e=.5<e?.5-(e-.5):.5-e+.5,0,1+e,1,1+e,1,e)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.renderer.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,r.prototype.destroy.call(this),this}});t.exports=i},81041:(t,e,i)=>{var o=i(83419),s=i(95540),n=i(57516),i=new o({Extends:n,initialize:function(t){t.topology=5,t.batchSize=s(t,"batchSize",256),n.call(this,t)}});t.exports=i},12385:(t,e,i)=>{var o=i(83419),s=i(95540),n=i(57516),r=i(45561),a=i(60722),h=i(29100),i=new o({Extends:n,initialize:function(t){t.fragShader=s(t,"fragShader",r),t.vertShader=s(t,"vertShader",a),t.forceZero=!0,n.call(this,t)},boot:function(){h.prototype.boot.call(this);var t=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",t.width,t.height),this.set1i("uRoundPixels",t.config.roundPixels)}});t.exports=i},7589:(t,e,i)=>{var o=i(35407),l=i(10312),s=i(83419),n=i(89422),r=i(96293),a=i(36682),h=i(95540),c=i(48247),u=i(49627),d=i(29100),i=new s({Extends:d,initialize:function(t){t.renderTarget=h(t,"renderTarget",[{scale:1,autoResize:!0},{scale:1,autoResize:!0},{scale:.5,autoResize:!0},{scale:.5,autoResize:!0}]),t.vertShader=h(t,"vertShader",u),t.shaders=h(t,"shaders",[{name:"Copy",fragShader:a},{name:"AddBlend",fragShader:o},{name:"LinearBlend",fragShader:c},{name:"ColorMatrix",fragShader:r}]),t.attributes=h(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),t.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],t.batchSize=1,d.call(this,t),this.colorMatrix=new n,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){d.prototype.boot.call(this);var t=this.shaders,e=this.renderTargets;this.copyShader=t[0],this.addShader=t[1],this.linearShader=t[2],this.colorMatrixShader=t[3],this.fullFrame1=e[0],this.fullFrame2=e[1],this.halfFrame1=e[2],this.halfFrame2=e[3]},copyFrame:function(t,e,i,o,s){void 0===i&&(i=1),void 0===o&&(o=!0),void 0===s&&(s=!0);var n=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",i),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,t.texture.webGLTexture),e?(n.viewport(0,0,e.width,e.height),n.bindFramebuffer(n.FRAMEBUFFER,e.framebuffer.webGLFramebuffer),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e.texture.webGLTexture,0)):n.viewport(0,0,t.width,t.height),o&&(s?n.clearColor(0,0,0,0):n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT)),n.bufferData(n.ARRAY_BUFFER,this.vertexData,n.STATIC_DRAW),n.drawArrays(n.TRIANGLES,0,6),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindTexture(n.TEXTURE_2D,null)},blitFrame:function(t,e,i,o,s,n,r){void 0===i&&(i=1),void 0===o&&(o=!0),void 0===s&&(s=!0),void 0===n&&(n=!1),void 0===r&&(r=!1);var a,h=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",i),h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,t.texture.webGLTexture),t.height>e.height?(h.viewport(0,0,t.width,t.height),this.setTargetUVs(t,e)):(i=e.height-t.height,h.viewport(0,i,t.width,t.height)),h.bindFramebuffer(h.FRAMEBUFFER,e.framebuffer.webGLFramebuffer),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,e.texture.webGLTexture,0),o&&(s?h.clearColor(0,0,0,0):h.clearColor(0,0,0,1),h.clear(h.COLOR_BUFFER_BIT)),n&&(a=this.renderer.currentBlendMode,this.renderer.setBlendMode(l.ERASE)),r&&this.flipY(),h.bufferData(h.ARRAY_BUFFER,this.vertexData,h.STATIC_DRAW),h.drawArrays(h.TRIANGLES,0,6),n&&this.renderer.setBlendMode(a),h.bindFramebuffer(h.FRAMEBUFFER,null),h.bindTexture(h.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(t,e,i,o,s,n,r,a){void 0===r&&(r=!0),void 0===a&&(a=!0);var h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,t.framebuffer.webGLFramebuffer),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,t.texture.webGLTexture,0),r&&(a?h.clearColor(0,0,0,0):h.clearColor(0,0,0,1),h.clear(h.COLOR_BUFFER_BIT)),h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,e.texture.webGLTexture),h.copyTexSubImage2D(h.TEXTURE_2D,0,0,0,i,o,s,n),h.bindFramebuffer(h.FRAMEBUFFER,null),h.bindTexture(h.TEXTURE_2D,null)},copyToGame:function(t){var e=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t.texture.webGLTexture),e.bufferData(e.ARRAY_BUFFER,this.vertexData,e.STATIC_DRAW),e.drawArrays(e.TRIANGLES,0,6)},drawFrame:function(t,e,i,o){void 0===i&&(i=!0),void 0===o&&(o=this.colorMatrix);var s=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",o.getData()),this.set1f("uAlpha",o.alpha),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,t.texture.webGLTexture),e?(s.viewport(0,0,e.width,e.height),s.bindFramebuffer(s.FRAMEBUFFER,e.framebuffer.webGLFramebuffer),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,e.texture.webGLTexture,0)):s.viewport(0,0,t.width,t.height),i?s.clearColor(0,0,0,0):s.clearColor(0,0,0,1),s.clear(s.COLOR_BUFFER_BIT),s.bufferData(s.ARRAY_BUFFER,this.vertexData,s.STATIC_DRAW),s.drawArrays(s.TRIANGLES,0,6),s.bindFramebuffer(s.FRAMEBUFFER,null),s.bindTexture(s.TEXTURE_2D,null)},blendFrames:function(t,e,i,o,s,n){void 0===o&&(o=1),void 0===s&&(s=!0),void 0===n&&(n=this.linearShader);var r=this.gl;this.setShader(n),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",o),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,t.texture.webGLTexture),r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,e.texture.webGLTexture),i?(r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer.webGLFramebuffer),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,i.texture.webGLTexture,0),r.viewport(0,0,i.width,i.height)):r.viewport(0,0,t.width,t.height),s?r.clearColor(0,0,0,0):r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT),r.bufferData(r.ARRAY_BUFFER,this.vertexData,r.STATIC_DRAW),r.drawArrays(r.TRIANGLES,0,6),r.bindFramebuffer(r.FRAMEBUFFER,null),r.bindTexture(r.TEXTURE_2D,null)},blendFramesAdditive:function(t,e,i,o,s){this.blendFrames(t,e,i,o,s,this.addShader)},clearFrame:function(t,e){void 0===e&&(e=!0);var i=this.gl,t=(i.viewport(0,0,t.width,t.height),i.bindFramebuffer(i.FRAMEBUFFER,t.framebuffer.webGLFramebuffer),e?i.clearColor(0,0,0,0):i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT),this.renderer.currentFramebuffer);i.bindFramebuffer(i.FRAMEBUFFER,t.webGLFramebuffer)},setUVs:function(t,e,i,o,s,n,r,a){var h=this.vertexViewF32;h[2]=t,h[3]=e,h[6]=i,h[7]=o,h[10]=s,h[11]=n,h[14]=t,h[15]=e,h[18]=s,h[19]=n,h[22]=r,h[23]=a},setTargetUVs:function(t,e){e=e.height/t.height;this.setUVs(0,e=.5<e?.5-(e-.5):.5-e+.5,0,1+e,1,1+e,1,e)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});t.exports=i},36060:t=>{t.exports={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"}},84817:t=>{t.exports="pipelineafterflush"},36712:t=>{t.exports="pipelinebeforeflush"},40285:t=>{t.exports="pipelinebind"},65918:t=>{t.exports="pipelineboot"},92852:t=>{t.exports="pipelinedestroy"},56072:t=>{t.exports="pipelinerebind"},57566:t=>{t.exports="pipelineresize"},77085:(t,e,i)=>{t.exports={AFTER_FLUSH:i(84817),BEFORE_FLUSH:i(36712),BIND:i(40285),BOOT:i(65918),DESTROY:i(92852),REBIND:i(56072),RESIZE:i(57566)}},54812:(t,e,i)=>{var o=i(83419),s=i(99155),n=i(84057),i=new o({Extends:n,initialize:function(t){n.call(this,{game:t,fragShader:s}),this.amount=1},onPreRender:function(t,e){t=this.getController(t),this.set1f("amount",t.amount,e)}});t.exports=i},67329:(t,e,i)=>{var o=i(83419),s=i(24400),n=i(84057),i=new o({Extends:n,initialize:function(t){n.call(this,{game:t,fragShader:s}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(t){t=this.getController(t),this.set1f("strength",t.blurStrength),this.set3fv("color",t.glcolor)},onDraw:function(t){var e=this.getController(),i=this.fullFrame1,o=this.fullFrame2;this.copyFrame(t,o);for(var s=2/t.width*e.offsetX,n=2/t.height*e.offsetY,r=0;r<e.steps;r++)this.set2f("offset",s,0),this.copySprite(t,i),this.set2f("offset",0,n),this.copySprite(i,t);this.blendFrames(o,t,i,e.strength),this.copyToGame(i)}});t.exports=i},8861:(t,e,i)=>{var o=i(83419),s=i(41514),n=i(51078),r=i(94328),a=i(84057),i=new o({Extends:a,initialize:function(t){a.call(this,{game:t,shaders:[{name:"Gaussian5",fragShader:s},{name:"Gaussian9",fragShader:n},{name:"Gaussian13",fragShader:r}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(t){var e=this.getController(),i=this.gl,o=this.fullFrame1,s=i.getParameter(i.FRAMEBUFFER_BINDING);this.bind(this.shaders[e.quality]),i.activeTexture(i.TEXTURE0),i.viewport(0,0,t.width,t.height),this.set1i("uMainSampler",0),this.set2f("resolution",t.width,t.height),this.set1f("strength",e.strength),this.set3fv("color",e.glcolor);for(var n=0;n<e.steps;n++)this.set2f("offset",e.x,0),this.copySprite(t,o),this.set2f("offset",0,e.y),this.copySprite(o,t);i.bindFramebuffer(i.FRAMEBUFFER,s),i.bindTexture(i.TEXTURE_2D,null),this.copyToGame(t)}});t.exports=i},51051:(t,e,i)=>{var o=i(83419),s=i(90610),n=i(84057),i=new o({Extends:n,initialize:function(t){n.call(this,{game:t,fragShader:s}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(t,e,i,o){t=this.getController(t),this.set1f("radius",t.radius,e),this.set1f("amount",t.amount,e),this.set1f("contrast",t.contrast,e),this.set1f("strength",t.strength,e),this.set2f("blur",t.blurX,t.blurY,e),this.setBoolean("isTiltShift",t.isTiltShift,e),i&&o&&this.set2f("resolution",i,o,e)},onDraw:function(t){this.set2f("resolution",t.width,t.height),this.bindAndDraw(t)}});t.exports=i},89428:(t,e,i)=>{var o=i(83419),s=i(91899),n=i(84057),i=new o({Extends:n,initialize:function(t){n.call(this,{game:t,fragShader:s}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(t,e,i,o){t=this.getController(t),this.set1f("scale",t.scale,e),this.set1f("feather",t.feather,e),this.set1f("thickness",t.thickness,e),this.set3fv("color",t.glcolor,e),this.set4fv("backgroundColor",t.glcolor2,e),i&&o&&this.set2f("resolution",i,o,e)},onDraw:function(t){this.set2f("resolution",t.width,t.height),this.bindAndDraw(t)}});t.exports=i},88904:(t,e,i)=>{var o=i(83419),s=i(84057),i=new o({Extends:s,initialize:function(t){s.call(this,{game:t})},onDraw:function(t){var e=this.fullFrame1;this.controller?this.manager.drawFrame(t,e,!0,this.controller):this.drawFrame(t,e),this.copyToGame(e)}});t.exports=i},63563:(t,e,i)=>{var o=i(83419),s=i(47838),n=i(84057),i=new o({Extends:n,initialize:function(t){n.call(this,{game:t,fragShader:s}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(t){t=this.game.textures.getFrame(t);t&&(this.glTexture=t.glTexture)},onDraw:function(t){var e=this.getController(),i=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",e.x,e.y),this.bindTexture(e.glTexture,1),this.copySprite(t,i),this.copyToGame(i)}});t.exports=i},94045:(t,e,i)=>{var o=i(83419),s=i(95540),n=i(98656),r=i(84057),a=i(70554),i=new o({Extends:r,initialize:function(t,e){var i=s(e,"quality",.1),e=s(e,"distance",10);r.call(this,{game:t,fragShader:a.setGlowQuality(n,t,i,e)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(t,e,i,o){t=this.getController(t),this.set1f("outerStrength",t.outerStrength,e),this.set1f("innerStrength",t.innerStrength,e),this.set4fv("glowColor",t.glcolor,e),this.setBoolean("knockout",t.knockout,e),i&&o&&this.set2f("resolution",i,o,e)},onDraw:function(t){this.set2f("resolution",t.width,t.height),this.bindAndDraw(t)}});t.exports=i},74088:(t,e,i)=>{var o=i(83419),s=i(70463),n=i(84057),i=new o({Extends:n,initialize:function(t){n.call(this,{game:t,fragShader:s}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(t,e){t=this.getController(t),this.set1f("alpha",t.alpha,e),this.set1i("size",t.size,e),this.set3fv("color1",t.glcolor1,e),this.set3fv("color2",t.glcolor2,e),this.set2f("positionFrom",t.fromX,t.fromY,e),this.set2f("positionTo",t.toX,t.toY,e)}});t.exports=i},99636:(t,e,i)=>{var o=i(83419),s=i(50831),n=i(84057),i=new o({Extends:n,initialize:function(t){n.call(this,{game:t,fragShader:s}),this.amount=1},onPreRender:function(t,e,i,o){t=this.getController(t),this.set1f("amount",t.amount,e),i&&o&&this.set2f("resolution",i,o,e)},onDraw:function(t){this.set2f("resolution",t.width,t.height),this.bindAndDraw(t)}});t.exports=i},34700:(t,e,i)=>{var o=i(83419),s=i(92595),n=i(84057),i=new o({Extends:n,initialize:function(t){n.call(this,{game:t,fragShader:s}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(t,e){var i=(t=this.getController(t)).samples;this.set1i("samples",i,e),this.set1f("intensity",t.intensity,e),this.set1f("decay",t.decay,e),this.set1f("power",t.power/i,e),this.set2f("lightPosition",t.x,t.y,e),this.set4fv("color",t.glcolor,e)}});t.exports=i},91157:(t,e,i)=>{var o=i(83419),s=i(72464),n=i(84057),i=new o({Extends:n,initialize:function(t){n.call(this,{game:t,fragShader:s}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(t,e,i,o){t=this.getController(t),this.setTime("time",e),this.set1f("speed",t.speed,e),this.set1f("lineWidth",t.lineWidth,e),this.set1f("gradient",t.gradient,e),this.setBoolean("reveal",t.reveal,e),i&&o&&this.set2f("resolution",i,o,e)},onDraw:function(t){this.set2f("resolution",t.width,t.height),this.bindAndDraw(t)}});t.exports=i},27797:(t,e,i)=>{var o=i(83419),s=i(39249),n=i(84057),i=new o({Extends:n,initialize:function(t){n.call(this,{game:t,fragShader:s}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(t,e){t=this.getController(t),this.set1f("radius",t.radius,e),this.set1f("strength",t.strength,e),this.set2f("position",t.x,t.y,e)}});t.exports=i},67603:(t,e,i)=>{var o=i(83419),s=i(2878),n=i(84057),i=new o({Extends:n,initialize:function(t){n.call(this,{game:t,fragShader:s}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(t,e){var i=(t=this.getController(t)).progress,o=t.wipeWidth,s=t.direction,n=t.axis;this.set4f("config",i,o,s,n,e),this.setBoolean("reveal",t.reveal,e)}});t.exports=i},58918:(t,e,i)=>{i={Barrel:i(54812),Bloom:i(67329),Blur:i(8861),Bokeh:i(51051),Circle:i(89428),ColorMatrix:i(88904),Displacement:i(63563),Glow:i(94045),Gradient:i(74088),Pixelate:i(99636),Shadow:i(34700),Shine:i(91157),Vignette:i(27797),Wipe:i(67603)};t.exports=i},96615:(t,e,i)=>{var o=i(36060),i=i(79291)(!1,{FX:i(58918),BitmapMaskPipeline:i(31302),Events:i(77085),FXPipeline:i(92651),LightPipeline:i(96569),MobilePipeline:i(56527),MultiPipeline:i(57516),PointLightPipeline:i(43439),PostFXPipeline:i(84057),PreFXPipeline:i(43558),RopePipeline:i(81041),SinglePipeline:i(12385),UtilityPipeline:i(7589)},o);t.exports=i},35407:t=>{t.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join("\n")},78908:t=>{t.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join("\n")},85191:t=>{t.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join("\n")},96293:t=>{t.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join("\n")},36682:t=>{t.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join("\n")},99155:t=>{t.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join("\n")},24400:t=>{t.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join("\n")},94328:t=>{t.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join("\n")},41514:t=>{t.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join("\n")},51078:t=>{t.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join("\n")},90610:t=>{t.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join("\n")},91899:t=>{t.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join("\n")},47838:t=>{t.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join("\n")},98656:t=>{t.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join("\n")},70463:t=>{t.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join("\n")},50831:t=>{t.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join("\n")},92595:t=>{t.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join("\n")},72464:t=>{t.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","\tvec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join("\n")},39249:t=>{t.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    \tcol = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join("\n")},2878:t=>{t.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join("\n")},31063:t=>{t.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join("\n")},48247:t=>{t.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join("\n")},41214:t=>{t.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join("\n")},39653:t=>{t.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join("\n")},62143:t=>{t.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join("\n")},47940:t=>{t.exports=["#define SHADER_NAME PHASER_MOBILE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform int uRoundPixels;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    if (uRoundPixels == 1)","    {","        gl_Position.xy = floor(((gl_Position.xy + 1.0) * 0.5 * uResolution) + 0.5) / uResolution * 2.0 - 1.0;","    }","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join("\n")},98840:t=>{t.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join("\n")},44667:t=>{t.exports=["#define SHADER_NAME PHASER_MULTI_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform int uRoundPixels;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    if (uRoundPixels == 1)","    {","        gl_Position.xy = floor(((gl_Position.xy + 1.0) * 0.5 * uResolution) + 0.5) / uResolution * 2.0 - 1.0;","    }","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join("\n")},4127:t=>{t.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join("\n")},89924:t=>{t.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join("\n")},27681:t=>{t.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join("\n")},49627:t=>{t.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join("\n")},45561:t=>{t.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join("\n")},60722:t=>{t.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform int uRoundPixels;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    if (uRoundPixels == 1)","    {","        gl_Position.xy = floor(((gl_Position.xy + 1.0) * 0.5 * uResolution) + 0.5) / uResolution * 2.0 - 1.0;","    }","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join("\n")},89350:(t,e,i)=>{t.exports={AddBlendFrag:i(35407),BitmapMaskFrag:i(78908),BitmapMaskVert:i(85191),ColorMatrixFrag:i(96293),CopyFrag:i(36682),FXBarrelFrag:i(99155),FXBloomFrag:i(24400),FXBlurHighFrag:i(94328),FXBlurLowFrag:i(41514),FXBlurMedFrag:i(51078),FXBokehFrag:i(90610),FXCircleFrag:i(91899),FXDisplacementFrag:i(47838),FXGlowFrag:i(98656),FXGradientFrag:i(70463),FXPixelateFrag:i(50831),FXShadowFrag:i(92595),FXShineFrag:i(72464),FXVignetteFrag:i(39249),FXWipeFrag:i(2878),LightFrag:i(31063),LinearBlendFrag:i(48247),MeshFrag:i(41214),MeshVert:i(39653),MobileFrag:i(62143),MobileVert:i(47940),MultiFrag:i(98840),MultiVert:i(44667),PointLightFrag:i(4127),PointLightVert:i(89924),PostFXFrag:i(27681),QuadVert:i(49627),SingleFrag:i(45561),SingleVert:i(60722)}},93567:(t,e,i)=>{i=new(i(83419))({initialize:function(t,e,i){this.webGLAttribLocation=-1,this.gl=t,this.program=e,this.name=i,this.createResource()},createResource:function(){var t;null!==this.program.webGLProgram?(t=this.gl).isContextLost()||(this.webGLAttribLocation=t.getAttribLocation(this.program.webGLProgram,this.name)):this.webGLAttribLocation=-1},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLAttribLocation=-1}});t.exports=i},26128:(t,e,i)=>{i=new(i(83419))({initialize:function(t,e,i,o){this.webGLBuffer=null,this.gl=t,this.initialDataOrSize=e,this.bufferType=i,this.bufferUsage=o,this.createResource()},createResource:function(){var t,e,i;null===this.initialDataOrSize||(t=this.gl).isContextLost()||(e=this.bufferType,i=t.createBuffer(),this.webGLBuffer=i,t.bindBuffer(e,this.webGLBuffer),t.bufferData(e,this.initialDataOrSize,this.bufferUsage),t.bindBuffer(e,null))},destroy:function(){var t=this.gl;t.isContextLost()||t.deleteBuffer(this.webGLBuffer),this.webGLBuffer=null,this.initialDataOrSize=null,this.gl=null}});t.exports=i},84387:(t,e,i)=>{var i=i(83419),o={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"},i=new i({initialize:function(t,e,i,o,s){this.webGLFramebuffer=null,this.gl=t,this.width=e,this.height=i,this.renderTexture=o,this.addDepthStencilBuffer=!!s,this.createResource()},createResource:function(){var t=this.gl;if(!t.isContextLost()){var e=this.renderTexture,i=t.createFramebuffer();if(this.webGLFramebuffer=i,t.bindFramebuffer(t.FRAMEBUFFER,i),e.isRenderTexture=!0,e.isAlphaPremultiplied=!1,t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.webGLTexture,0),(i=t.checkFramebufferStatus(t.FRAMEBUFFER))!==t.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer status: "+(o[i]||i));this.addDepthStencilBuffer&&(e=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,e),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)),t.bindFramebuffer(t.FRAMEBUFFER,null)}},destroy:function(){var t,e;null!==this.webGLFramebuffer&&((t=this.gl).isContextLost()||(t.bindFramebuffer(t.FRAMEBUFFER,this.webGLFramebuffer),null!==(e=t.getFramebufferAttachmentParameter(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME))&&(t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),t.deleteTexture(e)),null!==(e=t.getFramebufferAttachmentParameter(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME))&&t.deleteRenderbuffer(e),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(this.webGLFramebuffer)),this.renderTexture=null,this.webGLFramebuffer=null,this.gl=null)}});t.exports=i},1482:(t,e,i)=>{i=new(i(83419))({initialize:function(t,e,i){this.webGLProgram=null,this.gl=t,this.vertexSource=e,this.fragmentSource=i,this.createResource()},createResource:function(){var t=this.gl;if(!t.isContextLost()){var e=t.createProgram(),i=t.createShader(t.VERTEX_SHADER),o=t.createShader(t.FRAGMENT_SHADER),s=(t.shaderSource(i,this.vertexSource),t.shaderSource(o,this.fragmentSource),t.compileShader(i),t.compileShader(o),"Shader failed:\n");if(!t.getShaderParameter(i,t.COMPILE_STATUS))throw new Error("Vertex "+s+t.getShaderInfoLog(i));if(!t.getShaderParameter(o,t.COMPILE_STATUS))throw new Error("Fragment "+s+t.getShaderInfoLog(o));if(t.attachShader(e,i),t.attachShader(e,o),t.linkProgram(e),!t.getProgramParameter(e,t.LINK_STATUS))throw new Error("Link "+s+t.getProgramInfoLog(e));t.useProgram(e),this.webGLProgram=e}},destroy:function(){this.webGLProgram&&(this.gl.isContextLost()||this.gl.deleteProgram(this.webGLProgram),this.webGLProgram=null,this.gl=null)}});t.exports=i},82751:(t,e,i)=>{var o=i(83419),l=i(50030),s=new o({initialize:function(t,e,i,o,s,n,r,a,h,l,c,u,d){this.webGLTexture=null,this.isRenderTexture=!1,this.gl=t,this.mipLevel=e,this.minFilter=i,this.magFilter=o,this.wrapT=s,this.wrapS=n,this.format=r,this.pixels=a,this.width=h,this.height=l,this.pma=null==c||c,this.forceSize=!!u,this.flipY=!!d,this.__SPECTOR_Metadata={},this.createResource()},createResource:function(){var t=this.gl;t.isContextLost()||(this.pixels instanceof s?this.webGLTexture=this.pixels.webGLTexture:((t=t.createTexture()).__SPECTOR_Metadata=this.__SPECTOR_Metadata,this.webGLTexture=t,this._processTexture()))},update:function(t,e,i,o,s,n,r,a,h){0!==e&&0!==i&&(this.pixels=t,this.width=e,this.height=i,this.flipY=o,this.wrapS=s,this.wrapT=n,this.minFilter=r,this.magFilter=a,this.format=h,this.gl.isContextLost()||this._processTexture())},_processTexture:function(){var t=this.gl,e=(t.activeTexture(t.TEXTURE0),t.getParameter(t.TEXTURE_BINDING_2D)),i=(t.bindTexture(t.TEXTURE_2D,this.webGLTexture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,this.minFilter),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,this.magFilter),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.wrapS),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.wrapT),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.pma),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,this.flipY),this.pixels),o=this.mipLevel,s=this.width,n=this.height,r=this.format,a=!1;if(null==i)t.texImage2D(t.TEXTURE_2D,o,r,s,n,0,r,t.UNSIGNED_BYTE,null),a=l(s,n);else if(i.compressed)for(var s=i.width,n=i.height,a=i.generateMipmap,h=0;h<i.mipmaps.length;h++)t.compressedTexImage2D(t.TEXTURE_2D,h,i.internalFormat,i.mipmaps[h].width,i.mipmaps[h].height,0,i.mipmaps[h].data);else a=(i instanceof Uint8Array?t.texImage2D(t.TEXTURE_2D,o,r,s,n,0,r,t.UNSIGNED_BYTE,i):(this.forceSize||(s=i.width,n=i.height),t.texImage2D(t.TEXTURE_2D,o,r,r,t.UNSIGNED_BYTE,i)),l(s,n));a&&t.generateMipmap(t.TEXTURE_2D),e?t.bindTexture(t.TEXTURE_2D,e):t.bindTexture(t.TEXTURE_2D,null)},spectorMetadata:{get:function(){return this.__SPECTOR_Metadata},set:function(t){this.__SPECTOR_Metadata=t,this.gl.isContextLost()||(this.webGLTexture.__SPECTOR_Metadata=t)}},destroy:function(){null!==this.webGLTexture&&(this.gl.isContextLost()||this.pixels instanceof s||this.gl.deleteTexture(this.webGLTexture),this.pixels=null,this.webGLTexture=null,this.gl=null)}});t.exports=s},57183:(t,e,i)=>{i=new(i(83419))({initialize:function(t,e,i){this.webGLUniformLocation=null,this.gl=t,this.program=e,this.name=i,this.createResource()},createResource:function(){var t;null!==this.program.webGLProgram?(t=this.gl).isContextLost()||(this.webGLUniformLocation=t.getUniformLocation(this.program.webGLProgram,this.name)):this.webGLUniformLocation=null},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLUniformLocation=null}});t.exports=i},9503:(t,e,i)=>{i={WebGLAttribLocationWrapper:i(93567),WebGLBufferWrapper:i(26128),WebGLProgramWrapper:i(1482),WebGLTextureWrapper:i(82751),WebGLFramebufferWrapper:i(84387),WebGLUniformLocationWrapper:i(57183)};t.exports=i},76531:(t,e,i)=>{var h=i(13560),o=i(83419),s=i(50792),n=i(97480),r=i(8443),a=i(57811),l=i(74403),c=i(45818),u=i(29747),d=i(87841),p=i(86555),f=i(56583),b=i(26099),y=i(38058),i=new o({Extends:s,initialize:function(t){s.call(this),this.game=t,this.canvas,this.canvasBounds=new d,this.parent=null,this.parentIsWindow=!1,this.parentSize=new p,this.gameSize=new p,this.baseSize=new p,this.displaySize=new p,this.scaleMode=h.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new b(1,1),this.autoRound=!1,this.autoCenter=h.CENTER.NO_CENTER,this.orientation=h.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:u,windowResize:u,fullScreenChange:u,fullScreenError:u}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(r.BOOT,this.boot,this)},boot:function(){var t=this.game;this.canvas=t.canvas,this.fullscreen=t.device.fullscreen,this.scaleMode!==h.SCALE_MODE.RESIZE&&this.scaleMode!==h.SCALE_MODE.EXPAND&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===h.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),0<this.parentSize.width&&0<this.parentSize.height&&this.displaySize.setParent(this.parentSize),this.refresh()),t.events.on(r.PRE_STEP,this.step,this),t.events.once(r.READY,this.refresh,this),t.events.once(r.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(t){this.getParent(t),this.getParentBounds();var e,i,o=t.width,s=t.height,n=t.scaleMode,r=t.zoom,a=t.autoRound;"string"==typeof o&&(o="%"!==o.substr(-1)?parseInt(o,10):(0===(e=this.parentSize.width)&&(e=window.innerWidth),i=parseInt(o,10)/100,Math.floor(e*i))),"string"==typeof s&&(s="%"!==s.substr(-1)?parseInt(s,10):(0===(e=this.parentSize.height)&&(e=window.innerHeight),i=parseInt(s,10)/100,Math.floor(e*i))),this.scaleMode=n,this.autoRound=a,this.autoCenter=t.autoCenter,this.resizeInterval=t.resizeInterval,a&&(o=Math.floor(o),s=Math.floor(s)),this.gameSize.setSize(o,s),r===h.ZOOM.MAX_ZOOM&&(r=this.getMaxZoom()),1!==(this.zoom=r)&&(this._resetZoom=!0),this.baseSize.setSize(o,s),a&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),0<t.minWidth&&this.displaySize.setMin(t.minWidth*r,t.minHeight*r),0<t.maxWidth&&this.displaySize.setMax(t.maxWidth*r,t.maxHeight*r),this.displaySize.setSize(o,s),(0<t.snapWidth||0<t.snapHeight)&&this.displaySize.setSnap(t.snapWidth,t.snapHeight),this.orientation=c(o,s)},getParent:function(t){var e=t.parent;null!==e&&(this.parent=l(e),this.parentIsWindow=this.parent===document.body,t.expandParent&&t.scaleMode!==h.SCALE_MODE.NONE&&(e=this.parent.getBoundingClientRect(),!this.parentIsWindow&&0!==e.height||(document.documentElement.style.height="100%",document.body.style.height="100%",e=this.parent.getBoundingClientRect(),this.parentIsWindow)||0!==e.height||(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%")),t.fullscreenTarget)&&!this.fullscreenTarget&&(this.fullscreenTarget=l(t.fullscreenTarget))},getParentBounds:function(){if(this.parent){var t=this.parentSize,e=this.parent.getBoundingClientRect(),i=(this.parentIsWindow&&this.game.device.os.iOS&&(e.height=a(!0)),e.width),e=e.height;if(t.width!==i||t.height!==e)return t.setSize(i,e),!0;if(this.canvas){t=this.canvasBounds,i=this.canvas.getBoundingClientRect();if(i.x!==t.x||i.y!==t.y)return!0}}return!1},lockOrientation:function(t){var e=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return!!e&&e.call(screen,t)},setParentSize:function(t,e){return this.parentSize.setSize(t,e),this.refresh()},setGameSize:function(t,e){var i=this.autoRound,o=(i&&(t=Math.floor(t),e=Math.floor(e)),this.width),s=this.height;return this.gameSize.resize(t,e),this.baseSize.resize(t,e),i&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(t/e),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(o,s)},resize:function(t,e){var i=this.zoom,o=this.autoRound,s=(o&&(t=Math.floor(t),e=Math.floor(e)),this.width),n=this.height,r=(this.gameSize.resize(t,e),this.baseSize.resize(t,e),o&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(t*i,e*i),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.canvas.style),a=t*i,i=e*i;return o&&(a=Math.floor(a),i=Math.floor(i)),a===t&&i===e||(r.width=a+"px",r.height=i+"px"),this.refresh(s,n)},setZoom:function(t){return this.zoom=t,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},setSnap:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.displaySize.setSnap(t,e),this.refresh()},refresh:function(t,e){void 0===t&&(t=this.width),void 0===e&&(e=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var i,o=this.game.domContainer;return o&&(this.baseSize.setCSS(o),i=this.canvas.style,(o=o.style).transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",o.marginLeft=i.marginLeft,o.marginTop=i.marginTop),this.emit(n.RESIZE,this.gameSize,this.baseSize,this.displaySize,t,e),this},updateOrientation:function(){var t;this._checkOrientation&&(this._checkOrientation=!1,(t=c(this.width,this.height))!==this.orientation)&&(this.orientation=t,this.emit(n.ORIENTATION_CHANGE,t))},updateScale:function(){var t,e,i=this.canvas.style,o=this.gameSize.width,s=this.gameSize.height,n=this.zoom,r=this.autoRound;this.scaleMode===h.SCALE_MODE.NONE?(this.displaySize.setSize(o*n,s*n),t=this.displaySize.width,e=this.displaySize.height,r&&(t=Math.floor(t),e=Math.floor(e)),this._resetZoom&&(i.width=t+"px",i.height=e+"px",this._resetZoom=!1)):this.scaleMode===h.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),t=this.displaySize.width,e=this.displaySize.height,r&&(t=Math.floor(t),e=Math.floor(e)),this.canvas.width=t,this.canvas.height=e):this.scaleMode===h.SCALE_MODE.EXPAND?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),t=this.displaySize.width,e=this.displaySize.height,r&&(t=Math.floor(t),e=Math.floor(e)),i.width=t+"px",i.height=e+"px",(o=this.parentSize.width/this.gameSize.width)<(s=this.parentSize.height/this.gameSize.height)?this.baseSize.setSize(this.gameSize.width,this.parentSize.height/o):this.baseSize.setSize(this.displaySize.width/s,this.gameSize.height),t=this.baseSize.width,e=this.baseSize.height,r&&(t=Math.floor(t),e=Math.floor(e)),this.canvas.width=t,this.canvas.height=e):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),t=this.displaySize.width,e=this.displaySize.height,r&&(t=Math.floor(t),e=Math.floor(e)),i.width=t+"px",i.height=e+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var t=f(this.parentSize.width,this.gameSize.width,0,!0),e=f(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(t,e),1)},updateCenter:function(){var t,e,i,o=this.autoCenter;o!==h.CENTER.NO_CENTER&&(t=(i=this.canvas).style,e=(i=i.getBoundingClientRect()).width,i=i.height,e=Math.floor((this.parentSize.width-e)/2),i=Math.floor((this.parentSize.height-i)/2),o===h.CENTER.CENTER_HORIZONTALLY?i=0:o===h.CENTER.CENTER_VERTICALLY&&(e=0),t.marginLeft=e+"px",t.marginTop=i+"px")},updateBounds:function(){var t=this.canvasBounds,e=this.canvas.getBoundingClientRect();t.x=e.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),t.y=e.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),t.width=e.width,t.height=e.height},transformX:function(t){return(t-this.canvasBounds.left)*this.displayScale.x},transformY:function(t){return(t-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(t){void 0===t&&(t={navigationUI:"hide"});var e,i=this.fullscreen;i.available?i.active||(e=this.getFullscreenTarget(),i.keyboard?e[i.request](Element.ALLOW_KEYBOARD_INPUT):e[i.request](t)):this.emit(n.FULLSCREEN_UNSUPPORTED)},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(n.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(t){this.removeFullscreenTarget(),this.emit(n.FULLSCREEN_FAILED,t)},getFullscreenTarget:function(){var t;return this.fullscreenTarget||((t=document.createElement("div")).style.margin="0",t.style.padding="0",t.style.width="100%",t.style.height="100%",this.fullscreenTarget=t,this._createdFullscreenTarget=!0),this._createdFullscreenTarget&&(this.canvas.parentNode.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)),this.fullscreenTarget},removeFullscreenTarget:function(){var t,e;this._createdFullscreenTarget&&(t=this.fullscreenTarget)&&t.parentNode&&((e=t.parentNode).insertBefore(this.canvas,t),e.removeChild(t))},stopFullscreen:function(){var t=this.fullscreen;if(!t.available)return this.emit(n.FULLSCREEN_UNSUPPORTED),!1;t.active&&document[t.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(n.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(t){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(t)},startListeners:function(){var e=this,i=this.domlisteners;i.orientationChange=function(){e.updateBounds(),e._checkOrientation=!0,e.dirty=!0,e.refresh()},i.windowResize=function(){e.updateBounds(),e.dirty=!0},window.addEventListener("orientationchange",i.orientationChange,!1),window.addEventListener("resize",i.windowResize,!1),this.fullscreen.available&&(i.fullScreenChange=function(t){return e.onFullScreenChange(t)},i.fullScreenError=function(t){return e.onFullScreenError(t)},["webkit","moz",""].forEach(function(t){document.addEventListener(t+"fullscreenchange",i.fullScreenChange,!1),document.addEventListener(t+"fullscreenerror",i.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",i.fullScreenChange,!1),document.addEventListener("MSFullscreenError",i.fullScreenError,!1))},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(t,e){t instanceof y||(e=t,t=void 0),void 0===e&&(e=new d);var i=this.baseSize,o=this.parentSize,s=this.canvasBounds,n=this.displayScale,r=0<=s.x?0:-s.x*n.x,a=0<=s.y?0:-s.y*n.y,h=o.width>=s.width?i.width:i.width-(s.width-o.width)*n.x,i=o.height>=s.height?i.height:i.height-(s.height-o.height)*n.y;return e.setTo(r,a,h,i),t&&(e.width/=t.zoomX,e.height/=t.zoomY,e.centerX=t.centerX+t.scrollX,e.centerY=t.centerY+t.scrollY),e},step:function(t,e){this.parent&&(this._lastCheck+=e,this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0)},stopListeners:function(){var e=this.domlisteners;window.removeEventListener("orientationchange",e.orientationChange,!1),window.removeEventListener("resize",e.windowResize,!1),["webkit","moz",""].forEach(function(t){document.removeEventListener(t+"fullscreenchange",e.fullScreenChange,!1),document.removeEventListener(t+"fullscreenerror",e.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",e.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",e.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===h.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===h.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});t.exports=i},64743:t=>{t.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},39218:t=>{t.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},81050:t=>{t.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5,EXPAND:6}},80805:t=>{t.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},13560:(t,e,i)=>{i={CENTER:i(64743),ORIENTATION:i(39218),SCALE_MODE:i(81050),ZOOM:i(80805)};t.exports=i},56139:t=>{t.exports="enterfullscreen"},2336:t=>{t.exports="fullscreenfailed"},47412:t=>{t.exports="fullscreenunsupported"},51452:t=>{t.exports="leavefullscreen"},20666:t=>{t.exports="orientationchange"},47945:t=>{t.exports="resize"},97480:(t,e,i)=>{t.exports={ENTER_FULLSCREEN:i(56139),FULLSCREEN_FAILED:i(2336),FULLSCREEN_UNSUPPORTED:i(47412),LEAVE_FULLSCREEN:i(51452),ORIENTATION_CHANGE:i(20666),RESIZE:i(47945)}},93364:(t,e,i)=>{var o=i(79291),s=i(13560),i=o(!1,{Center:i(64743),Events:i(97480),Orientation:i(39218),ScaleManager:i(76531),ScaleModes:i(81050),Zoom:i(80805)},s.CENTER);i=o(!1,i,s.ORIENTATION),i=o(!1,i,s.SCALE_MODE),i=o(!1,i,s.ZOOM),t.exports=i},27397:(t,e,i)=>{var s=i(95540),n=i(35355);t.exports=function(t){var e=t.game.config.defaultPhysicsSystem,t=s(t.settings,"physics",!1);if(e||t){var i=[];if(e&&i.push(n(e+"Physics")),t)for(var o in t)o=n(o.concat("Physics")),-1===i.indexOf(o)&&i.push(o);return i}}},52106:(t,e,i)=>{var o=i(95540);t.exports=function(t){var e=t.plugins.getDefaultScenePlugins(),t=o(t.settings,"plugins",!1);return Array.isArray(t)?t:e||[]}},87033:t=>{t.exports={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"}},97482:(t,e,i)=>{var o=i(83419),s=i(2368),i=new o({initialize:function(t){this.sys=new s(this,t),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});t.exports=i},60903:(t,e,i)=>{var o=i(83419),r=i(89993),s=i(44594),n=i(8443),l=i(35154),a=i(54899),h=i(29747),c=i(97482),u=i(2368),i=new o({initialize:function(t,e){if(this.game=t,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++)this._pending.push({key:"default",scene:e[i],autoStart:0===i,data:{}})}t.events.once(n.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var t,e,i;for(this.systemScene=this.createSceneFromInstance("__SYSTEM",new c),this.game.events.emit(n.SYSTEM_READY,this.systemScene,this),t=0;t<this._pending.length;t++){var o,s=(e=this._pending[t]).key;(i=e.scene)instanceof c?o=this.createSceneFromInstance(s,i):"object"==typeof i?o=this.createSceneFromObject(s,i):"function"==typeof i&&(o=this.createSceneFromFunction(s,i)),s=o.sys.settings.key,this.keys[s]=o,this.scenes.push(o),this._data[s]&&(o.sys.settings.data=this._data[s].data,this._data[s].autoStart)&&(e.autoStart=!0),(e.autoStart||o.sys.settings.active)&&this._start.push(s)}for(this._pending.length=0,this._data={},this.isBooted=!0,t=0;t<this._start.length;t++)e=this._start[t],this.start(e);this._start.length=0}},processQueue:function(){var t,e,i=this._pending.length,o=this._queue.length;if(0!==i||0!==o){if(i){for(t=0;t<i;t++)e=this._pending[t],this.add(e.key,e.scene,e.autoStart,e.data);for(t=0;t<this._start.length;t++)e=this._start[t],this.start(e);this._start.length=0,this._pending.length=0}for(t=0;t<this._queue.length;t++)this[(e=this._queue[t]).op](e.keyA,e.keyB);this._queue.length=0}},add:function(t,e,i,o){return void 0===i&&(i=!1),void 0===o&&(o={}),this.isProcessing||!this.isBooted?(this._pending.push({key:t,scene:e,autoStart:i,data:o}),this.isBooted||(this._data[t]={data:o}),null):(t=this.getKey(t,e),e instanceof c?s=this.createSceneFromInstance(t,e):"object"==typeof e?(e.key=t,s=this.createSceneFromObject(t,e)):"function"==typeof e&&(s=this.createSceneFromFunction(t,e)),s.sys.settings.data=o,t=s.sys.settings.key,this.keys[t]=s,this.scenes.push(s),(i||s.sys.settings.active)&&(this._pending.length?this._start.push(t):this.start(t)),s);var s},remove:function(t){if(this.isProcessing)this._queue.push({op:"remove",keyA:t,keyB:null});else{t=this.getScene(t);if(!t||t.sys.isTransitioning())return this;var e=this.scenes.indexOf(t),i=t.sys.settings.key;-1<e&&(delete this.keys[i],this.scenes.splice(e,1),-1<this._start.indexOf(i)&&(e=this._start.indexOf(i),this._start.splice(e,1)),t.sys.destroy())}return this},bootScene:function(t){var e,i=t.sys,o=i.settings;i.sceneUpdate=h,t.init&&(t.init.call(t,o.data),o.status=r.INIT,o.isTransition)&&i.events.emit(s.TRANSITION_INIT,o.transitionFrom,o.transitionDuration),i.load&&(e=i.load).reset(),e&&t.preload?(t.preload.call(t),o.status=r.LOADING,e.once(a.COMPLETE,this.loadComplete,this),e.start()):this.create(t)},loadComplete:function(t){this.game.sound&&this.game.sound.onBlurPausedSounds&&this.game.sound.unlock(),this.create(t.scene)},payloadComplete:function(t){this.bootScene(t.scene)},update:function(t,e){this.processQueue(),this.isProcessing=!0;for(var i=this.scenes.length-1;0<=i;i--){var o=this.scenes[i].sys;o.settings.status>r.START&&o.settings.status<=r.RUNNING&&o.step(t,e),o.scenePlugin&&o.scenePlugin._target&&o.scenePlugin.step(t,e)}},render:function(t){for(var e=0;e<this.scenes.length;e++){var i=this.scenes[e].sys;i.settings.visible&&i.settings.status>=r.LOADING&&i.settings.status<r.SLEEPING&&i.render(t)}this.isProcessing=!1},create:function(t){var e=t.sys,i=e.settings;t.create&&(i.status=r.CREATING,t.create.call(t,i.data),i.status===r.DESTROYED)||(i.isTransition&&e.events.emit(s.TRANSITION_START,i.transitionFrom,i.transitionDuration),t.update&&(e.sceneUpdate=t.update),i.status=r.RUNNING,e.events.emit(s.CREATE,t))},createSceneFromFunction:function(t,e){e=new e;if(e instanceof c){var i=e.sys.settings.key;if(this.keys.hasOwnProperty(t=""!==i?i:t))throw new Error("Cannot add a Scene with duplicate key: "+t);return this.createSceneFromInstance(t,e)}return e.sys=new u(e),e.sys.settings.key=t,e.sys.init(this.game),e},createSceneFromInstance:function(t,e){return""===e.sys.settings.key&&(e.sys.settings.key=t),e.sys.init(this.game),e},createSceneFromObject:function(t,e){var i=new c(e),o=i.sys.settings.key;""!==o?t=o:i.sys.settings.key=t,i.sys.init(this.game);for(var s,n=["init","preload","create","update","render"],r=0;r<n.length;r++){var a=l(e,n[r],null);a&&(i[n[r]]=a)}if(e.hasOwnProperty("extend"))for(var h in e.extend)e.extend.hasOwnProperty(h)&&(s=e.extend[h],"data"===h&&i.hasOwnProperty("data")&&"object"==typeof s?i.data.merge(s):"sys"!==h&&(i[h]=s));return i},getKey:function(t,e){if(t=t||"default","function"!=typeof e&&(e instanceof c?t=e.sys.settings.key:"object"==typeof e&&e.hasOwnProperty("key")&&(t=e.key),this.keys.hasOwnProperty(t)))throw new Error("Cannot add a Scene with duplicate key: "+t);return t},getScenes:function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!1);for(var i=[],o=this.scenes,s=0;s<o.length;s++){var n=o[s];!n||t&&!n.sys.isActive()||i.push(n)}return e?i.reverse():i},getScene:function(t){if("string"==typeof t){if(this.keys[t])return this.keys[t]}else for(var e=0;e<this.scenes.length;e++)if(t===this.scenes[e])return t;return null},isActive:function(t){t=this.getScene(t);return t?t.sys.isActive():null},isPaused:function(t){t=this.getScene(t);return t?t.sys.isPaused():null},isVisible:function(t){t=this.getScene(t);return t?t.sys.isVisible():null},isSleeping:function(t){t=this.getScene(t);return t?t.sys.isSleeping():null},pause:function(t,e){t=this.getScene(t);return t&&t.sys.pause(e),this},resume:function(t,e){t=this.getScene(t);return t&&t.sys.resume(e),this},sleep:function(t,e){t=this.getScene(t);return t&&!t.sys.isTransitioning()&&t.sys.sleep(e),this},wake:function(t,e){t=this.getScene(t);return t&&t.sys.wake(e),this},run:function(t,e){var i=this.getScene(t);if(!i){for(var o=0;o<this._pending.length;o++)if(this._pending[o].key===t){this.queueOp("start",t,e);break}return this}i.sys.isSleeping()?i.sys.wake(e):i.sys.isPaused()?i.sys.resume(e):this.start(t,e)},start:function(t,e){if(this.isBooted){var i=this.getScene(t);if(i){var o,s=i.sys,n=s.settings.status;if(!(n>=r.START&&n<=r.CREATING)){if(n>=r.RUNNING&&n<=r.SLEEPING)s.shutdown(),s.sceneUpdate=h,s.start(e);else if(s.sceneUpdate=h,s.start(e),(o=s.load?s.load:o)&&s.settings.hasOwnProperty("pack")&&(o.reset(),o.addPack({payload:s.settings.pack})))return s.settings.status=r.LOADING,o.once(a.COMPLETE,this.payloadComplete,this),o.start(),this;this.bootScene(i)}}}else this._data[t]={autoStart:!0,data:e};return this},stop:function(t,e){var i,t=this.getScene(t);return t&&!t.sys.isTransitioning()&&t.sys.settings.status!==r.SHUTDOWN&&((i=t.sys.load)&&(i.off(a.COMPLETE,this.loadComplete,this),i.off(a.COMPLETE,this.payloadComplete,this)),t.sys.shutdown(e)),this},switch:function(t,e){var i=this.getScene(t),o=this.getScene(e);return i&&o&&i!==o&&(this.sleep(t),this.isSleeping(e)?this.wake(e):this.start(e)),this},getAt:function(t){return this.scenes[t]},getIndex:function(t){t=this.getScene(t);return this.scenes.indexOf(t)},bringToTop:function(t){var e;return this.isProcessing?this._queue.push({op:"bringToTop",keyA:t,keyB:null}):-1!==(e=this.getIndex(t))&&e<this.scenes.length&&(t=this.getScene(t),this.scenes.splice(e,1),this.scenes.push(t)),this},sendToBack:function(t){var e;return this.isProcessing?this._queue.push({op:"sendToBack",keyA:t,keyB:null}):-1!==(e=this.getIndex(t))&&0<e&&(t=this.getScene(t),this.scenes.splice(e,1),this.scenes.unshift(t)),this},moveDown:function(t){var e,i,o;return this.isProcessing?this._queue.push({op:"moveDown",keyA:t,keyB:null}):0<(e=this.getIndex(t))&&(i=e-1,t=this.getScene(t),o=this.getAt(i),this.scenes[e]=o,this.scenes[i]=t),this},moveUp:function(t){var e,i,o;return this.isProcessing?this._queue.push({op:"moveUp",keyA:t,keyB:null}):(e=this.getIndex(t))<this.scenes.length-1&&(i=e+1,t=this.getScene(t),o=this.getAt(i),this.scenes[e]=o,this.scenes[i]=t),this},moveAbove:function(t,e){var i;return t!==e&&(this.isProcessing?this._queue.push({op:"moveAbove",keyA:t,keyB:e}):(t=this.getIndex(t),e=this.getIndex(e),-1!==t&&-1!==e&&e<t&&(i=this.getAt(e),this.scenes.splice(e,1),this.scenes.splice(t+(t<e),0,i)))),this},moveBelow:function(t,e){var i;return t!==e&&(this.isProcessing?this._queue.push({op:"moveBelow",keyA:t,keyB:e}):(t=this.getIndex(t),e=this.getIndex(e),-1!==t&&-1!==e&&t<e&&(i=this.getAt(e),this.scenes.splice(e,1),0===t?this.scenes.unshift(i):this.scenes.splice(t-(e<t),0,i)))),this},queueOp:function(t,e,i){return this._queue.push({op:t,keyA:e,keyB:i}),this},swapPosition:function(t,e){var i;return t!==e&&(this.isProcessing?this._queue.push({op:"swapPosition",keyA:t,keyB:e}):(t=this.getIndex(t))!==(e=this.getIndex(e))&&-1!==t&&-1!==e&&(i=this.getAt(t),this.scenes[t]=this.scenes[e],this.scenes[e]=i)),this},dump:function(){for(var t=[],e=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],i=0;i<this.scenes.length;i++){var o=this.scenes[i].sys,s=!o.settings.visible||o.settings.status!==r.RUNNING&&o.settings.status!==r.PAUSED?"[-] ":"[*] ";s+=o.settings.key+" ("+e[o.settings.status]+")",t.push(s)}},destroy:function(){for(var t=0;t<this.scenes.length;t++)this.scenes[t].sys.destroy();this.systemScene.sys.destroy(),this.update=h,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});t.exports=i},52209:(t,e,i)=>{var o=i(45319),s=i(83419),r=i(44594),a=i(95540),i=i(37277),s=new s({initialize:function(t){this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.key=t.sys.settings.key,this.manager=t.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,t.sys.events.once(r.BOOT,this.boot,this),t.sys.events.on(r.START,this.pluginStart,this)},boot:function(){this.systems.events.once(r.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(r.SHUTDOWN,this.shutdown,this)},start:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",t,e),this},restart:function(t){var e=this.key;return this.manager.queueOp("stop",e),this.manager.queueOp("start",e,t),this},transition:function(t){var e,i,o,s=a(t=void 0===t?{}:t,"target",!1),n=this.manager.getScene(s);return!(!s||!this.checkValidTransition(n)||(e=a(t,"duration",1e3),this._elapsed=0,this._target=n,this._duration=e,this._willSleep=a(t,"sleep",!1),this._willRemove=a(t,"remove",!1),(o=a(t,"onUpdate",null))&&(this._onUpdate=o,this._onUpdateScope=a(t,"onUpdateScope",this.scene)),o=a(t,"allowInput",!1),this.settings.transitionAllowInput=o,(i=n.sys.settings).isTransition=!0,i.transitionFrom=this.scene,i.transitionDuration=e,i.transitionAllowInput=o,a(t,"moveAbove",!1)?this.manager.moveAbove(this.key,s):a(t,"moveBelow",!1)&&this.manager.moveBelow(this.key,s),n.sys.isSleeping()?n.sys.wake(a(t,"data")):this.manager.start(s,a(t,"data")),i=a(t,"onStart",null),o=a(t,"onStartScope",this.scene),i&&i.call(o,this.scene,n,e),this.systems.events.emit(r.TRANSITION_OUT,n,e),0))},checkValidTransition:function(t){return!(!t||t.sys.isActive()||t.sys.isTransitioning()||t===this.scene||this.systems.isTransitioning())},step:function(t,e){this._elapsed+=e,this.transitionProgress=o(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var t=this._target.sys,e=this._target.sys.settings;t.events.emit(r.TRANSITION_COMPLETE,this.scene),e.isTransition=!1,e.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(t,e,i,o){return this.manager.add(t,e,i,o)},launch:function(t,e){return t&&t!==this.key&&this.manager.queueOp("start",t,e),this},run:function(t,e){return t&&t!==this.key&&this.manager.queueOp("run",t,e),this},pause:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("pause",t,e),this},resume:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("resume",t,e),this},sleep:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("sleep",t,e),this},wake:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("wake",t,e),this},switch:function(t){return t!==this.key&&this.manager.queueOp("switch",this.key,t),this},stop:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("stop",t,e),this},setActive:function(t,e,i){void 0===e&&(e=this.key);e=this.manager.getScene(e);return e&&e.sys.setActive(t,i),this},setVisible:function(t,e){void 0===e&&(e=this.key);e=this.manager.getScene(e);return e&&e.sys.setVisible(t),this},isSleeping:function(t){return void 0===t&&(t=this.key),this.manager.isSleeping(t)},isActive:function(t){return void 0===t&&(t=this.key),this.manager.isActive(t)},isPaused:function(t){return void 0===t&&(t=this.key),this.manager.isPaused(t)},isVisible:function(t){return void 0===t&&(t=this.key),this.manager.isVisible(t)},swapPosition:function(t,e){return t!==(e=void 0===e?this.key:e)&&this.manager.swapPosition(t,e),this},moveAbove:function(t,e){return t!==(e=void 0===e?this.key:e)&&this.manager.moveAbove(t,e),this},moveBelow:function(t,e){return t!==(e=void 0===e?this.key:e)&&this.manager.moveBelow(t,e),this},remove:function(t){return void 0===t&&(t=this.key),this.manager.remove(t),this},moveUp:function(t){return void 0===t&&(t=this.key),this.manager.moveUp(t),this},moveDown:function(t){return void 0===t&&(t=this.key),this.manager.moveDown(t),this},bringToTop:function(t){return void 0===t&&(t=this.key),this.manager.bringToTop(t),this},sendToBack:function(t){return void 0===t&&(t=this.key),this.manager.sendToBack(t),this},get:function(t){return this.manager.getScene(t)},getStatus:function(t){t=this.manager.getScene(t);if(t)return t.sys.getStatus()},getIndex:function(t){return void 0===t&&(t=this.key),this.manager.getIndex(t)},shutdown:function(){var t=this.systems.events;t.off(r.SHUTDOWN,this.shutdown,this),t.off(r.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(r.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});i.register("ScenePlugin",s,"scenePlugin"),t.exports=s},55681:(t,e,i)=>{var o=i(89993),s=i(35154),n=i(46975),r=i(87033);t.exports={create:function(t){return"string"==typeof t?t={key:t}:void 0===t&&(t={}),{status:o.PENDING,key:s(t,"key",""),active:s(t,"active",!1),visible:s(t,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:s(t,"pack",!1),cameras:s(t,"cameras",null),map:s(t,"map",n(r,s(t,"mapAdd",{}))),physics:s(t,"physics",{}),loader:s(t,"loader",{}),plugins:s(t,"plugins",!1),input:s(t,"input",{})}}}},2368:(t,e,i)=>{var o=i(83419),s=i(89993),n=i(42363),r=i(44594),a=i(27397),h=i(52106),l=i(29747),c=i(55681),i=new o({initialize:function(t,e){this.scene=t,this.game,this.renderer,this.config=e,this.settings=c.create(e),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=l},init:function(t){this.settings.status=s.INIT,this.sceneUpdate=l,this.game=t,this.renderer=t.renderer,this.canvas=t.canvas,this.context=t.context;t=t.plugins;(this.plugins=t).addToScene(this,n.Global,[n.CoreScene,h(this),a(this)]),this.events.emit(r.BOOT,this),this.settings.isBooted=!0},step:function(t,e){var i=this.events;i.emit(r.PRE_UPDATE,t,e),i.emit(r.UPDATE,t,e),this.sceneUpdate.call(this.scene,t,e),i.emit(r.POST_UPDATE,t,e)},render:function(t){var e=this.displayList;e.depthSort(),this.events.emit(r.PRE_RENDER,t),this.cameras.render(t,e),this.events.emit(r.RENDER,t)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(t){var e=this.settings,i=this.getStatus();return i!==s.CREATING&&i!==s.RUNNING||!this.settings.active||(e.status=s.PAUSED,e.active=!1,this.events.emit(r.PAUSE,this,t)),this},resume:function(t){var e=this.events,i=this.settings;return this.settings.active||(i.status=s.RUNNING,i.active=!0,e.emit(r.RESUME,this,t)),this},sleep:function(t){var e=this.settings,i=this.getStatus();return i!==s.CREATING&&i!==s.RUNNING||(e.status=s.SLEEPING,e.active=!1,e.visible=!1,this.events.emit(r.SLEEP,this,t)),this},wake:function(t){var e=this.events,i=this.settings;return i.status=s.RUNNING,i.active=!0,i.visible=!0,e.emit(r.WAKE,this,t),i.isTransition&&e.emit(r.TRANSITION_WAKE,i.transitionFrom,i.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var t=this.settings.status;return t>s.PENDING&&t<=s.RUNNING},isSleeping:function(){return this.settings.status===s.SLEEPING},isActive:function(){return this.settings.status===s.RUNNING},isPaused:function(){return this.settings.status===s.PAUSED},isTransitioning:function(){return this.settings.isTransition||null!==this.scenePlugin._target},isTransitionOut:function(){return null!==this.scenePlugin._target&&0<this.scenePlugin._duration},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(t){return this.settings.visible=t,this},setActive:function(t,e){return t?this.resume(e):this.pause(e)},start:function(t){var e=this.events,i=this.settings;t&&(i.data=t),i.status=s.START,i.active=!0,i.visible=!0,e.emit(r.START,this),e.emit(r.READY,this,t)},shutdown:function(t){var e=this.events,i=this.settings;e.off(r.TRANSITION_INIT),e.off(r.TRANSITION_START),e.off(r.TRANSITION_COMPLETE),e.off(r.TRANSITION_OUT),i.status=s.SHUTDOWN,i.active=!1,i.visible=!1,e.emit(r.SHUTDOWN,this,t)},destroy:function(){var t=this.events,e=this.settings;e.status=s.DESTROYED,e.active=!1,e.visible=!1,t.emit(r.DESTROY,this),t.removeAllListeners();for(var i=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],o=0;o<i.length;o++)this[i[o]]=null}});t.exports=i},89993:t=>{t.exports={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9}},69830:t=>{t.exports="addedtoscene"},7919:t=>{t.exports="boot"},46763:t=>{t.exports="create"},11763:t=>{t.exports="destroy"},71555:t=>{t.exports="pause"},36735:t=>{t.exports="postupdate"},3809:t=>{t.exports="prerender"},90716:t=>{t.exports="preupdate"},58262:t=>{t.exports="ready"},91633:t=>{t.exports="removedfromscene"},10319:t=>{t.exports="render"},87132:t=>{t.exports="resume"},81961:t=>{t.exports="shutdown"},90194:t=>{t.exports="sleep"},6265:t=>{t.exports="start"},33178:t=>{t.exports="transitioncomplete"},43063:t=>{t.exports="transitioninit"},11259:t=>{t.exports="transitionout"},61611:t=>{t.exports="transitionstart"},45209:t=>{t.exports="transitionwake"},22966:t=>{t.exports="update"},21747:t=>{t.exports="wake"},44594:(t,e,i)=>{t.exports={ADDED_TO_SCENE:i(69830),BOOT:i(7919),CREATE:i(46763),DESTROY:i(11763),PAUSE:i(71555),POST_UPDATE:i(36735),PRE_RENDER:i(3809),PRE_UPDATE:i(90716),READY:i(58262),REMOVED_FROM_SCENE:i(91633),RENDER:i(10319),RESUME:i(87132),SHUTDOWN:i(81961),SLEEP:i(90194),START:i(6265),TRANSITION_COMPLETE:i(33178),TRANSITION_INIT:i(43063),TRANSITION_OUT:i(11259),TRANSITION_START:i(61611),TRANSITION_WAKE:i(45209),UPDATE:i(22966),WAKE:i(21747)}},62194:(t,e,i)=>{var o=i(89993),i=i(79291)(!1,{Events:i(44594),GetPhysicsPlugins:i(27397),GetScenePlugins:i(52106),SceneManager:i(60903),ScenePlugin:i(52209),Settings:i(55681),Systems:i(2368)},o);t.exports=i},30341:(t,e,i)=>{var o=i(83419),s=i(50792),n=i(14463),r=i(79291),i=i(29747),o=new o({Extends:s,initialize:function(t,e,i){s.call(this),this.manager=t,this.key=e,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=r(this.config,i),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(t){return!(!t||!t.name||"string"!=typeof t.name||this.markers[t.name]||(t=r(!0,{name:"",start:0,duration:this.totalDuration-(t.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},t),this.markers[t.name]=t,0))},updateMarker:function(t){return!(!t||!t.name||"string"!=typeof t.name||!this.markers[t.name]||(this.markers[t.name]=r(!0,this.markers[t.name],t),0))},removeMarker:function(t){var e=this.markers[t];return e?(this.markers[t]=null,e):null},play:function(t,e){if("object"==typeof(t=void 0===t?"":t)&&(e=t,t=""),"string"!=typeof t)return!1;if(t){if(!this.markers[t])return!1;this.currentMarker=this.markers[t],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}else this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;return this.resetConfig(),this.currentConfig=r(this.currentConfig,e),this.isPlaying=!0,!(this.isPaused=!1)},pause:function(){return!(this.isPaused||!this.isPlaying||(this.isPlaying=!1,this.isPaused=!0,0))},resume:function(){return!(!this.isPaused||this.isPlaying||(this.isPlaying=!0,this.isPaused=!1))},stop:function(){return!(!this.isPaused&&!this.isPlaying||(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),0))},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:i,calculateRate:function(){var t=this.currentConfig.detune+this.manager.detune,t=Math.pow(1.0005777895065548,t);this.totalRate=this.currentConfig.rate*this.manager.rate*t},destroy:function(){this.pendingRemove||(this.stop(),this.emit(n.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});t.exports=o},85034:(t,e,i)=>{var o=i(83419),r=i(41786),s=i(50792),n=i(14463),a=i(8443),h=i(46710),l=i(58731),c=i(29747),u=i(26099),i=new o({Extends:s,initialize:function(t){s.call(this),this.game=t,this.jsonCache=t.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new u,t.events.on(a.BLUR,this.onGameBlur,this),t.events.on(a.FOCUS,this.onGameFocus,this),t.events.on(a.PRE_STEP,this.update,this),t.events.once(a.DESTROY,this.destroy,this)},add:c,addAudioSprite:function(t,e){var i,o,s,n=this.add(t,e=void 0===e?{}:e);for(i in n.spritemap=this.jsonCache.get(t).spritemap,n.spritemap)n.spritemap.hasOwnProperty(i)&&(o=r(e),s=n.spritemap[i],o.loop=!!s.hasOwnProperty("loop")&&s.loop,n.addMarker({name:i,start:s.start,duration:s.end-s.start,config:o}));return n},get:function(t){return l(this.sounds,"key",t)},getAll:function(t){return t?h(this.sounds,"key",t):h(this.sounds)},getAllPlaying:function(){return h(this.sounds,"isPlaying",!0)},play:function(t,e){t=this.add(t);return t.once(n.COMPLETE,t.destroy,t),e?e.name?(t.addMarker(e),t.play(e.name)):t.play(e):t.play()},playAudioSprite:function(t,e,i){t=this.addAudioSprite(t);return t.once(n.COMPLETE,t.destroy,t),t.play(e,i)},remove:function(t){var e=this.sounds.indexOf(t);return-1!==e&&(t.destroy(),this.sounds.splice(e,1),!0)},removeAll:function(){this.sounds.forEach(function(t){t.destroy()}),this.sounds.length=0},removeByKey:function(t){for(var e=0,i=this.sounds.length-1;0<=i;i--){var o=this.sounds[i];o.key===t&&(o.destroy(),this.sounds.splice(i,1),e++)}return e},pauseAll:function(){this.forEachActiveSound(function(t){t.pause()}),this.emit(n.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(t){t.resume()}),this.emit(n.RESUME_ALL,this)},setListenerPosition:c,stopAll:function(){this.forEachActiveSound(function(t){t.stop()}),this.emit(n.STOP_ALL,this)},stopByKey:function(t){var e=0;return this.getAll(t).forEach(function(t){t.stop()&&e++}),e},unlock:c,onBlur:c,onFocus:c,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(e,i){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(n.UNLOCKED,this));for(var t=this.sounds.length-1;0<=t;t--)this.sounds[t].pendingRemove&&this.sounds.splice(t,1);this.sounds.forEach(function(t){t.update(e,i)})},destroy:function(){this.game.events.off(a.BLUR,this.onGameBlur,this),this.game.events.off(a.FOCUS,this.onGameFocus,this),this.game.events.off(a.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(i,o){var s=this;this.sounds.forEach(function(t,e){t&&!t.pendingRemove&&i.call(o||s,t,e,s.sounds)})},setRate:function(t){return this.rate=t,this},rate:{get:function(){return this._rate},set:function(t){this._rate=t,this.forEachActiveSound(function(t){t.calculateRate()}),this.emit(n.GLOBAL_RATE,this,t)}},setDetune:function(t){return this.detune=t,this},detune:{get:function(){return this._detune},set:function(t){this._detune=t,this.forEachActiveSound(function(t){t.calculateRate()}),this.emit(n.GLOBAL_DETUNE,this,t)}}});t.exports=i},14747:(t,e,i)=>{var o=i(33684),s=i(25960),n=i(57490);t.exports={create:function(t){var e=t.config.audio,i=t.device.audio;return new(e.noAudio||!i.webAudio&&!i.audioData?s:i.webAudio&&!e.disableWebAudio?n:o)(t)}}},19723:t=>{t.exports="complete"},98882:t=>{t.exports="decodedall"},57506:t=>{t.exports="decoded"},73146:t=>{t.exports="destroy"},11305:t=>{t.exports="detune"},40577:t=>{t.exports="detune"},30333:t=>{t.exports="mute"},20394:t=>{t.exports="rate"},21802:t=>{t.exports="volume"},1299:t=>{t.exports="looped"},99190:t=>{t.exports="loop"},97125:t=>{t.exports="mute"},89259:t=>{t.exports="pan"},79986:t=>{t.exports="pauseall"},17586:t=>{t.exports="pause"},19618:t=>{t.exports="play"},42306:t=>{t.exports="rate"},10387:t=>{t.exports="resumeall"},48959:t=>{t.exports="resume"},9960:t=>{t.exports="seek"},19180:t=>{t.exports="stopall"},98328:t=>{t.exports="stop"},50401:t=>{t.exports="unlocked"},52498:t=>{t.exports="volume"},14463:(t,e,i)=>{t.exports={COMPLETE:i(19723),DECODED:i(57506),DECODED_ALL:i(98882),DESTROY:i(73146),DETUNE:i(11305),GLOBAL_DETUNE:i(40577),GLOBAL_MUTE:i(30333),GLOBAL_RATE:i(20394),GLOBAL_VOLUME:i(21802),LOOP:i(99190),LOOPED:i(1299),MUTE:i(97125),PAN:i(89259),PAUSE_ALL:i(79986),PAUSE:i(17586),PLAY:i(19618),RATE:i(42306),RESUME_ALL:i(10387),RESUME:i(48959),SEEK:i(9960),STOP_ALL:i(19180),STOP:i(98328),UNLOCKED:i(50401),VOLUME:i(52498)}},64895:(t,e,i)=>{var o=i(30341),s=i(83419),n=i(14463),r=i(45319),i=new s({Extends:o,initialize:function(t,e,i){if(void 0===i&&(i={}),this.tags=t.game.cache.audio.get(e),!this.tags)throw new Error('No cached audio asset with key "'+e);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,o.call(this,t,e,i)},play:function(t,e){return!(this.manager.isLocked(this,"play",[t,e])||!o.prototype.play.call(this,t,e)||!this.pickAndPlayAudioTag()||(this.emit(n.PLAY,this),0))},pause:function(){return!(this.manager.isLocked(this,"pause")||0<this.startTime||!o.prototype.pause.call(this)||(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(n.PAUSE,this),0))},resume:function(){return!(this.manager.isLocked(this,"resume")||0<this.startTime||!o.prototype.resume.call(this)||!this.pickAndPlayAudioTag()||(this.emit(n.RESUME,this),0))},stop:function(){return!this.manager.isLocked(this,"stop")&&!!o.prototype.stop.call(this)&&(this.stopAndReleaseAudioTag(),this.emit(n.STOP,this),!0)},pickAndPlayAudioTag:function(){var t,e;return this.pickAudioTag()?(e=this.currentConfig.seek,t=this.currentConfig.delay,e=(this.currentMarker?this.currentMarker.start:0)+e,this.previousTime=e,this.audio.currentTime=e,this.applyConfig(),0===t?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+1e3*t,this.audio.paused||this.audio.pause()),this.resetConfig(),!0):(this.reset(),!1)},pickAudioTag:function(){if(!this.audio){for(var t=0;t<this.tags.length;t++){var e=this.tags[t];if("false"===e.dataset.used)return e.dataset.used="true",this.audio=e,!0}if(!this.manager.override)return!1;var i=[],o=(this.manager.forEachActiveSound(function(t){t.key===this.key&&t.audio&&i.push(t)},this),i.sort(function(t,e){return t.loop===e.loop?e.seek/e.duration-t.seek/t.duration:t.loop?1:-1}),i[0]);this.audio=o.audio,o.reset(),o.audio=null,o.startTime=0,o.previousTime=0}return!0},playCatchPromise:function(){var t=this.audio.play();t&&t.catch(function(t){})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){o.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(t){if(this.isPlaying)if(0<this.startTime)this.startTime<t-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,t-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());else{var t=this.currentMarker?this.currentMarker.start:0,e=t+this.duration,i=this.audio.currentTime;if(this.currentConfig.loop)i>=e-this.manager.loopEndOffset?(this.audio.currentTime=t+Math.max(0,i-e),i=this.audio.currentTime):i<t&&(this.audio.currentTime+=t,i=this.audio.currentTime),i<this.previousTime&&this.emit(n.LOOPED,this);else if(e<=i)return this.reset(),this.stopAndReleaseAudioTag(),void this.emit(n.COMPLETE,this);this.previousTime=i}},destroy:function(){o.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=r(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){o.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(t){this.currentConfig.mute=t,this.manager.isLocked(this,"mute",t)||(this.updateMute(),this.emit(n.MUTE,this,t))}},setMute:function(t){return this.mute=t,this},volume:{get:function(){return this.currentConfig.volume},set:function(t){this.currentConfig.volume=t,this.manager.isLocked(this,"volume",t)||(this.updateVolume(),this.emit(n.VOLUME,this,t))}},setVolume:function(t){return this.volume=t,this},rate:{get:function(){return this.currentConfig.rate},set:function(t){this.currentConfig.rate=t,this.manager.isLocked(this,n.RATE,t)||(this.calculateRate(),this.emit(n.RATE,this,t))}},setRate:function(t){return this.rate=t,this},detune:{get:function(){return this.currentConfig.detune},set:function(t){this.currentConfig.detune=t,this.manager.isLocked(this,n.DETUNE,t)||(this.calculateRate(),this.emit(n.DETUNE,this,t))}},setDetune:function(t){return this.detune=t,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(t){this.manager.isLocked(this,"seek",t)||0<this.startTime||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.isPlaying?(this.previousTime=t,this.audio.currentTime=t):this.isPaused&&(this.currentConfig.seek=t),this.emit(n.SEEK,this,t))}},setSeek:function(t){return this.seek=t,this},loop:{get:function(){return this.currentConfig.loop},set:function(t){this.currentConfig.loop=t,this.manager.isLocked(this,"loop",t)||(this.audio&&(this.audio.loop=t),this.emit(n.LOOP,this,t))}},setLoop:function(t){return this.loop=t,this},pan:{get:function(){return this.currentConfig.pan},set:function(t){this.currentConfig.pan=t,this.emit(n.PAN,this,t)}},setPan:function(t){return this.pan=t,this}});t.exports=i},33684:(t,e,i)=>{var o=i(85034),s=i(83419),r=i(14463),n=i(64895),i=new s({Extends:o,initialize:function(t){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,o.call(this,t)},add:function(t,e){t=new n(this,t,e);return this.sounds.push(t),t},unlock:function(){this.locked=!1;var e,i,o,n=this;this.game.cache.audio.entries.each(function(t,e){for(var i=0;i<e.length;i++)if("true"===e[i].dataset.locked)return!(n.locked=!0);return!0}),this.locked&&(e=!1,i=function(){e=!0},o=function(){var s,t;e?e=!1:(document.body.removeEventListener("touchmove",i),document.body.removeEventListener("touchend",o),s=[],n.game.cache.audio.entries.each(function(t,e){for(var i=0;i<e.length;i++){var o=e[i];"true"===o.dataset.locked&&s.push(o)}return!0}),0!==s.length&&((t=s[s.length-1]).oncanplaythrough=function(){t.oncanplaythrough=null,s.forEach(function(t){t.dataset.locked="false"}),n.unlocked=!0},s.forEach(function(t){t.load()})))},this.once(r.UNLOCKED,function(){for(this.forEachActiveSound(function(t){null===t.currentMarker&&0===t.duration&&(t.duration=t.tags[0].duration),t.totalDuration=t.tags[0].duration});this.lockedActionsQueue.length;){var t=this.lockedActionsQueue.shift();t.sound[t.prop].apply?t.sound[t.prop].apply(t.sound,t.value||[]):t.sound[t.prop]=t.value}},this),document.body.addEventListener("touchmove",i,!1),document.body.addEventListener("touchend",o,!1))},onBlur:function(){this.forEachActiveSound(function(t){t.isPlaying&&(this.onBlurPausedSounds.push(t),t.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(t){t.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){o.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(t,e,i){return"true"===t.tags[0].dataset.locked&&(this.lockedActionsQueue.push({sound:t,prop:e,value:i}),!0)},setMute:function(t){return this.mute=t,this},mute:{get:function(){return this._mute},set:function(t){this._mute=t,this.forEachActiveSound(function(t){t.updateMute()}),this.emit(r.GLOBAL_MUTE,this,t)}},setVolume:function(t){return this.volume=t,this},volume:{get:function(){return this._volume},set:function(t){this._volume=t,this.forEachActiveSound(function(t){t.updateVolume()}),this.emit(r.GLOBAL_VOLUME,this,t)}}});t.exports=i},23717:(t,e,i)=>{t.exports={SoundManagerCreator:i(14747),Events:i(14463),BaseSound:i(30341),BaseSoundManager:i(85034),WebAudioSound:i(71741),WebAudioSoundManager:i(57490),HTML5AudioSound:i(64895),HTML5AudioSoundManager:i(33684),NoAudioSound:i(4603),NoAudioSoundManager:i(25960)}},4603:(t,e,i)=>{function o(){return!1}function s(){return null}function n(){return this}var r=i(30341),a=i(83419),h=i(50792),l=i(79291),i=i(29747),a=new a({Extends:h,initialize:function(t,e,i){void 0===i&&(i={}),h.call(this),this.manager=t,this.key=e,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=l({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},i),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:o,updateMarker:o,removeMarker:s,play:o,pause:o,resume:o,stop:o,setMute:n,setVolume:n,setRate:n,setDetune:n,setSeek:n,setLoop:n,setPan:n,applyConfig:s,resetConfig:s,update:i,calculateRate:s,destroy:function(){r.prototype.destroy.call(this)}});t.exports=a},25960:(t,e,i)=>{var o=i(85034),s=i(83419),n=i(50792),r=i(4603),i=i(29747),s=new s({Extends:n,initialize:function(t){n.call(this),this.game=t,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(t,e){t=new r(this,t,e);return this.sounds.push(t),t},addAudioSprite:function(t,e){t=this.add(t,e);return t.spritemap={},t},get:function(t){return o.prototype.get.call(this,t)},getAll:function(t){return o.prototype.getAll.call(this,t)},play:function(t,e){return!1},playAudioSprite:function(t,e,i){return!1},remove:function(t){return o.prototype.remove.call(this,t)},removeAll:function(){return o.prototype.removeAll.call(this)},removeByKey:function(t){return o.prototype.removeByKey.call(this,t)},stopByKey:function(t){return o.prototype.stopByKey.call(this,t)},onBlur:i,onFocus:i,onGameBlur:i,onGameFocus:i,pauseAll:i,resumeAll:i,stopAll:i,update:i,setRate:i,setDetune:i,setMute:i,setVolume:i,unlock:i,forEachActiveSound:function(t,e){o.prototype.forEachActiveSound.call(this,t,e)},destroy:function(){o.prototype.destroy.call(this)}});t.exports=s},71741:(t,e,i)=>{var o=i(30341),s=i(83419),n=i(14463),r=i(95540),i=new s({Extends:o,initialize:function(t,e,i){if(void 0===i&&(i={}),this.audioBuffer=t.game.cache.audio.get(e),!this.audioBuffer)throw new Error('Audio key "'+e+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=t.context.createGain(),this.volumeNode=t.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),t.context.createPanner&&(this.spatialNode=t.context.createPanner(),this.volumeNode.connect(this.spatialNode)),(t.context.createStereoPanner?(this.pannerNode=t.context.createStereoPanner(),(t.context.createPanner?this.spatialNode:this.volumeNode).connect(this.pannerNode),this.pannerNode):t.context.createPanner?this.spatialNode:this.volumeNode).connect(t.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,o.call(this,t,e,i)},play:function(t,e){return!!o.prototype.play.call(this,t,e)&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(n.PLAY,this),!0)},pause:function(){return!(this.manager.context.currentTime<this.startTime||!o.prototype.pause.call(this)||(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(n.PAUSE,this),0))},resume:function(){return!(this.manager.context.currentTime<this.startTime||!o.prototype.resume.call(this)||(this.createAndStartBufferSource(),this.emit(n.RESUME,this),0))},stop:function(){return!!o.prototype.stop.call(this)&&(this.stopAndRemoveBufferSource(),this.emit(n.STOP,this),!0)},createAndStartBufferSource:function(){var t=this.currentConfig.seek,e=this.currentConfig.delay,e=this.manager.context.currentTime+e,i=(this.currentMarker?this.currentMarker.start:0)+t,o=this.duration-t;this.playTime=e-t,this.startTime=e,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,e),Math.max(0,i),Math.max(0,o)),this.resetConfig()},createAndStartLoopBufferSource:function(){var t=this.getLoopTime(),e=this.currentMarker?this.currentMarker.start:0,i=this.duration;this.loopTime=t,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,t),Math.max(0,e),Math.max(0,i))},createBufferSource:function(){var e=this,t=this.manager.context.createBufferSource();return t.buffer=this.audioBuffer,t.connect(this.muteNode),t.onended=function(t){t.target===e.source&&(e.currentConfig.loop?e.hasLooped=!0:e.hasEnded=!0)},t},stopAndRemoveBufferSource:function(){var t;this.source&&(t=this.source,this.source=null,t.stop(),t.disconnect()),this.playTime=0,this.startTime=0,this.hasEnded=!1,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var t,e=this.currentConfig.source;e&&this.manager.context.createPanner&&((t=this.spatialNode).panningModel=r(e,"panningModel","equalpower"),t.distanceModel=r(e,"distanceModel","inverse"),t.orientationX.value=r(e,"orientationX",0),t.orientationY.value=r(e,"orientationY",0),t.orientationZ.value=r(e,"orientationZ",-1),t.refDistance=r(e,"refDistance",1),t.maxDistance=r(e,"maxDistance",1e4),t.rolloffFactor=r(e,"rolloffFactor",1),t.coneInnerAngle=r(e,"coneInnerAngle",360),t.coneOuterAngle=r(e,"coneOuterAngle",0),t.coneOuterGain=r(e,"coneOuterGain",0),this.spatialSource=r(e,"follow",null),this.spatialSource||(t.positionX.value=r(e,"x",0),t.positionY.value=r(e,"y",0),t.positionZ.value=r(e,"z",0))),o.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(t){this.spatialNode&&(this.spatialNode.positionX.value=t)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(t){this.spatialNode&&(this.spatialNode.positionY.value=t)}},update:function(){var t,e;this.isPlaying&&this.spatialSource&&(t=r(this.spatialSource,"x",null),e=r(this.spatialSource,"y",null),t&&t!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=t),e)&&e!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=e),this.hasEnded?(o.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(n.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(n.LOOPED,this))},destroy:function(){this.pendingRemove||(o.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){o.prototype.calculateRate.call(this);var t=this.manager.context.currentTime;this.source&&"number"==typeof this.totalRate&&this.source.playbackRate.setValueAtTime(this.totalRate,t),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,t)-this.playTime,rate:this.totalRate}),this.loopSource)&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource())},getCurrentTime:function(){for(var t=0,e=0;e<this.rateUpdates.length;e++)t+=((e<this.rateUpdates.length-1?this.rateUpdates[e+1].time:this.manager.context.currentTime-this.playTime)-this.rateUpdates[e].time)*this.rateUpdates[e].rate;return t},getLoopTime:function(){for(var t=0,e=0;e<this.rateUpdates.length-1;e++)t+=(this.rateUpdates[e+1].time-this.rateUpdates[e].time)*this.rateUpdates[e].rate;var i=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+i.time+(this.duration-t)/i.rate},rate:{get:function(){return this.currentConfig.rate},set:function(t){this.currentConfig.rate=t,this.calculateRate(),this.emit(n.RATE,this,t)}},setRate:function(t){return this.rate=t,this},detune:{get:function(){return this.currentConfig.detune},set:function(t){this.currentConfig.detune=t,this.calculateRate(),this.emit(n.DETUNE,this,t)}},setDetune:function(t){return this.detune=t,this},mute:{get:function(){return 0===this.muteNode.gain.value},set:function(t){this.currentConfig.mute=t,this.muteNode.gain.setValueAtTime(t?0:1,0),this.emit(n.MUTE,this,t)}},setMute:function(t){return this.mute=t,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(t){this.currentConfig.volume=t,this.volumeNode.gain.setValueAtTime(t,0),this.emit(n.VOLUME,this,t)}},setVolume:function(t){return this.volume=t,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(t){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.currentConfig.seek=t,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(n.SEEK,this,t))}},setSeek:function(t){return this.seek=t,this},loop:{get:function(){return this.currentConfig.loop},set:function(t){this.currentConfig.loop=t,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),t)&&this.createAndStartLoopBufferSource(),this.emit(n.LOOP,this,t)}},setLoop:function(t){return this.loop=t,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(t){this.currentConfig.pan=t,this.pannerNode&&this.pannerNode.pan.setValueAtTime(t,this.manager.context.currentTime),this.emit(n.PAN,this,t)}},setPan:function(t){return this.pan=t,this}});t.exports=i},57490:(t,e,i)=>{var l=i(53134),n=i(85034),o=i(83419),c=i(14463),s=i(8443),r=i(71741),a=i(95540),i=new o({Extends:n,initialize:function(t){this.context=this.createAudioContext(t),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked="suspended"===this.context.state&&("ontouchstart"in window||"onclick"in window),n.call(this,t),this.locked&&t.isBooted?this.unlock():t.events.once(s.BOOT,this.unlock,this)},createAudioContext:function(t){t=t.config.audio;return t.context?(t.context.resume(),t.context):window.hasOwnProperty("AudioContext")?new AudioContext:window.hasOwnProperty("webkitAudioContext")?new window.webkitAudioContext:void 0},setAudioContext:function(t){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=t,this.masterMuteNode=t.createGain(),this.masterVolumeNode=t.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(t.destination),this.destination=this.masterMuteNode,this},add:function(t,e){t=new r(this,t,e);return this.sounds.push(t),t},decodeAudio:function(t,e){for(var i=Array.isArray(t)?t:[{key:t,data:e}],o=this.game.cache.audio,s=i.length,n=0;n<i.length;n++){var r=i[n],a=r.key,r=r.data,h=("string"==typeof r&&(r=l(r)),function(t,e){o.add(t,e),this.emit(c.DECODED,t),0==--s&&this.emit(c.DECODED_ALL)}.bind(this,a)),a=function(t,e){0==--s&&this.emit(c.DECODED_ALL)}.bind(this,a);this.context.decodeAudioData(r,h,a)}},setListenerPosition:function(t,e){return void 0===t&&(t=this.game.scale.width/2),void 0===e&&(e=this.game.scale.height/2),this.listenerPosition.set(t,e),this},unlock:function(){function e(){var t;i.context&&o&&(t=o.removeEventListener.bind(o),i.context.resume().then(function(){t("touchstart",e),t("touchend",e),t("click",e),t("keydown",e),i.unlocked=!0},function(){t("touchstart",e),t("touchend",e),t("click",e),t("keydown",e)}))}var i=this,o=document.body;o&&(o.addEventListener("touchstart",e,!1),o.addEventListener("touchend",e,!1),o.addEventListener("click",e,!1),o.addEventListener("keydown",e,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var t=this.context;!t||this.locked||"suspended"!==t.state&&"interrupted"!==t.state||t.resume()},update:function(t,e){var i,o,s=this.context.listener;s&&void 0!==s.positionX&&(i=a(this.listenerPosition,"x",null),o=a(this.listenerPosition,"y",null),i&&i!==this._spatialx&&(this._spatialx=s.positionX.value=i),o)&&o!==this._spatialy&&(this._spatialy=s.positionY.value=o),n.prototype.update.call(this,t,e),this.gameLostFocus||this.onFocus()},destroy:function(){var t;this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context?this.context.suspend():(t=this).context.close().then(function(){t.context=null}),n.prototype.destroy.call(this)},setMute:function(t){return this.mute=t,this},mute:{get:function(){return 0===this.masterMuteNode.gain.value},set:function(t){this.masterMuteNode.gain.setValueAtTime(t?0:1,0),this.emit(c.GLOBAL_MUTE,this,t)}},setVolume:function(t){return this.volume=t,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(t){this.masterVolumeNode.gain.setValueAtTime(t,0),this.emit(c.GLOBAL_VOLUME,this,t)}}});t.exports=i},73162:(t,e,i)=>{var s=i(37105),o=i(83419),n=i(29747),r=i(19186),i=new o({initialize:function(t){this.parent=t,this.list=[],this.position=0,this.addCallback=n,this.removeCallback=n,this._sortKey=""},add:function(t,e){return e?s.Add(this.list,t):s.Add(this.list,t,0,this.addCallback,this)},addAt:function(t,e,i){return i?s.AddAt(this.list,t,e):s.AddAt(this.list,t,e,0,this.addCallback,this)},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(i,t){return i&&r(this.list,t=void 0===t?function(t,e){return t[i]-e[i]}:t),this},getByName:function(t){return s.GetFirst(this.list,"name",t)},getRandom:function(t,e){return s.GetRandom(this.list,t,e)},getFirst:function(t,e,i,o){return s.GetFirst(this.list,t,e,i,o)},getAll:function(t,e,i,o){return s.GetAll(this.list,t,e,i,o)},count:function(t,e){return s.CountAllMatching(this.list,t,e)},swap:function(t,e){s.Swap(this.list,t,e)},moveTo:function(t,e){return s.MoveTo(this.list,t,e)},moveAbove:function(t,e){return s.MoveAbove(this.list,t,e)},moveBelow:function(t,e){return s.MoveBelow(this.list,t,e)},remove:function(t,e){return e?s.Remove(this.list,t):s.Remove(this.list,t,this.removeCallback,this)},removeAt:function(t,e){return e?s.RemoveAt(this.list,t):s.RemoveAt(this.list,t,this.removeCallback,this)},removeBetween:function(t,e,i){return i?s.RemoveBetween(this.list,t,e):s.RemoveBetween(this.list,t,e,this.removeCallback,this)},removeAll:function(t){for(var e=this.list.length;e--;)this.remove(this.list[e],t);return this},bringToTop:function(t){return s.BringToTop(this.list,t)},sendToBack:function(t){return s.SendToBack(this.list,t)},moveUp:function(t){return s.MoveUp(this.list,t),t},moveDown:function(t){return s.MoveDown(this.list,t),t},reverse:function(){return this.list.reverse(),this},shuffle:function(){return s.Shuffle(this.list),this},replace:function(t,e){return s.Replace(this.list,t,e)},exists:function(t){return-1<this.list.indexOf(t)},setAll:function(t,e,i,o){return s.SetAll(this.list,t,e,i,o),this},each:function(t,e){for(var i=[null],o=2;o<arguments.length;o++)i.push(arguments[o]);for(o=0;o<this.list.length;o++)i[0]=this.list[o],t.apply(e,i)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return(this.position=0)<this.list.length?this.list[0]:null}},last:{get:function(){return 0<this.list.length?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return 0<this.position?(this.position--,this.list[this.position]):null}}});t.exports=i},90330:(t,e,i)=>{i=new(i(83419))({initialize:function(t){this.entries={},this.size=0,this.setAll(t)},setAll:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.set(t[e][0],t[e][1]);return this},set:function(t,e){return this.has(t)||this.size++,this.entries[t]=e,this},get:function(t){if(this.has(t))return this.entries[t]},getArray:function(){var t,e=[],i=this.entries;for(t in i)e.push(i[t]);return e},has:function(t){return this.entries.hasOwnProperty(t)},delete:function(t){return this.has(t)&&(delete this.entries[t],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(t){delete this.entries[t]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var t,e=[],i=this.entries;for(t in i)e.push(i[t]);return e},dump:function(){var t=this.entries},each:function(t){var e,i=this.entries;for(e in i)if(!1===t(e,i[e]))break;return this},contains:function(t){var e,i=this.entries;for(e in i)if(i[e]===t)return!0;return!1},merge:function(t,e){void 0===e&&(e=!1);var i,o=this.entries,s=t.entries;for(i in s)o.hasOwnProperty(i)&&e?o[i]=s[i]:this.set(i,s[i]);return this}});t.exports=i},25774:(t,e,i)=>{var o=i(83419),s=i(50792),n=i(82348),i=new o({Extends:s,initialize:function(){s.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(t){return-1<this._active.indexOf(t)},isPending:function(t){return 0<this._toProcess&&-1<this._pending.indexOf(t)},isDestroying:function(t){return-1<this._destroy.indexOf(t)},add:function(t){return this.checkQueue&&this.isActive(t)&&!this.isDestroying(t)||this.isPending(t)||(this._pending.push(t),this._toProcess++),t},remove:function(t){var e,i;return this.isPending(t)?-1!==(i=(e=this._pending).indexOf(t))&&e.splice(i,1):this.isActive(t)&&(this._destroy.push(t),this._toProcess++),t},removeAll:function(){for(var t=this._active,e=this._destroy,i=t.length;i--;)e.push(t[i]),this._toProcess++;return this},update:function(){if(0===this._toProcess)return this._active;for(var t=this._destroy,e=this._active,i=0;i<t.length;i++){var o=t[i],s=e.indexOf(o);-1!==s&&(e.splice(s,1),this.emit(n.PROCESS_QUEUE_REMOVE,o))}for(t.length=0,t=this._pending,i=0;i<t.length;i++)o=t[i],(!this.checkQueue||this.checkQueue&&-1===e.indexOf(o))&&(e.push(o),this.emit(n.PROCESS_QUEUE_ADD,o));return t.length=0,this._toProcess=0,e},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});t.exports=i},59542:(t,e,i)=>{var a=i(43886);function o(t){if(!(this instanceof o))return new o(t);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}function p(t,e){f(t,0,t.children.length,e,t)}function f(t,e,i,o,s){(s=s||y(null)).minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var n,r=e;r<i;r++)n=t.children[r],c(s,t.leaf?o(n):n);return s}function c(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function n(t,e){return t.minX-e.minX}function r(t,e){return t.minY-e.minY}function b(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function l(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function y(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(t,e,i,o,s){for(var n,r=[e,i];r.length;)(i=r.pop())-(e=r.pop())<=o||(n=e+Math.ceil((i-e)/o/2)*o,a(t,n,e,i,s),r.push(e,n,n,i))}o.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],o=this.toBBox;if(l(t,e))for(var s,n,r,a,h=[];e;){for(s=0,n=e.children.length;s<n;s++)r=e.children[s],l(t,a=e.leaf?o(r):r)&&(e.leaf?i.push(r):d(t,a)?this._all(r,i):h.push(r));e=h.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(l(t,e))for(var o,s,n,r,a=[];e;){for(o=0,s=e.children.length;o<s;o++)if(n=e.children[o],l(t,r=e.leaf?i(n):n)){if(e.leaf||d(t,r))return!0;a.push(n)}e=a.pop()}return!1},load:function(t){if(t&&t.length)if(t.length<this._minEntries)for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);else{var o,s=this._build(t.slice(),0,t.length-1,0);this.data.children.length?this.data.height===s.height?this._splitRoot(this.data,s):(this.data.height<s.height&&(o=this.data,this.data=s,s=o),this._insert(s,this.data.height-s.height-1,!0)):this.data=s}return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=y([]),this},remove:function(t,e){if(t)for(var i,o,s,n,r=this.data,a=this.toBBox(t),h=[],l=[];r||h.length;){if(r||(r=h.pop(),o=h[h.length-1],i=l.pop(),n=!0),r.leaf&&-1!==(s=function(t,e,i){if(!i)return e.indexOf(t);for(var o=0;o<e.length;o++)if(i(t,e[o]))return o;return-1}(t,r.children,e)))return r.children.splice(s,1),h.push(r),this._condense(h),this;n||r.leaf||!d(r,a)?o?(i++,r=o.children[i],n=!1):r=null:(h.push(r),l.push(i),r=(o=r).children[i=0])}return this},toBBox:function(t){return{minX:t.left,minY:t.top,maxX:t.right,maxY:t.bottom}},compareMinX:function(t,e){return t.left-e.left},compareMinY:function(t,e){return t.top-e.top},toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,o){var s,n=i-e+1,r=this._maxEntries;if(n<=r)p(s=y(t.slice(e,i+1)),this.toBBox);else{o||(o=Math.ceil(Math.log(n)/Math.log(r)),r=Math.ceil(n/Math.pow(r,o-1))),(s=y([])).leaf=!1,s.height=o;var a,h,l,c,u=Math.ceil(n/r),d=u*Math.ceil(Math.sqrt(r));for(m(t,e,i,d,this.compareMinX),a=e;a<=i;a+=d)for(m(t,a,l=Math.min(a+d-1,i),u,this.compareMinY),h=a;h<=l;h+=u)c=Math.min(h+u-1,l),s.children.push(this._build(t,h,c,o-1));p(s,this.toBBox)}return s},_chooseSubtree:function(t,e,i,o){for(var s,n,r,a,h,l,c,u,d;o.push(e),!e.leaf&&o.length-1!==i;){for(l=c=1/0,s=0,n=e.children.length;s<n;s++)h=b(r=e.children[s]),u=t,d=r,(d=(Math.max(d.maxX,u.maxX)-Math.min(d.minX,u.minX))*(Math.max(d.maxY,u.maxY)-Math.min(d.minY,u.minY))-h)<c?(c=d,l=h<l?h:l,a=r):d===c&&h<l&&(l=h,a=r);e=a||e.children[0]}return e},_insert:function(t,e,i){var o=this.toBBox,i=i?t:o(t),s=[],o=this._chooseSubtree(i,this.data,e,s);for(o.children.push(t),c(o,i);0<=e&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(i,s,e)},_split:function(t,e){var i=t[e],o=i.children.length,s=this._minEntries,s=(this._chooseSplitAxis(i,s,o),this._chooseSplitIndex(i,s,o)),o=y(i.children.splice(s,i.children.length-s));o.height=i.height,o.leaf=i.leaf,p(i,this.toBBox),p(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(t,e){this.data=y([t,e]),this.data.height=t.height+1,this.data.leaf=!1,p(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){for(var o,s,n,r,a,h,l,c,u,d=n=1/0,p=e;p<=i-e;p++)u=o=f(t,0,p,this.toBBox),a=s=f(t,p,i,this.toBBox),0,h=Math.max(u.minX,a.minX),l=Math.max(u.minY,a.minY),c=Math.min(u.maxX,a.maxX),u=Math.min(u.maxY,a.maxY),a=Math.max(0,c-h)*Math.max(0,u-l),c=b(o)+b(s),a<d?(d=a,r=p,n=c<n?c:n):a===d&&c<n&&(n=c,r=p);return r},_chooseSplitAxis:function(t,e,i){var o=t.leaf?this.compareMinX:n,s=t.leaf?this.compareMinY:r;this._allDistMargin(t,e,i,o)<this._allDistMargin(t,e,i,s)&&t.children.sort(o)},_allDistMargin:function(t,e,i,o){t.children.sort(o);for(var s,n=this.toBBox,r=f(t,0,e,n),a=f(t,i-e,i,n),h=u(r)+u(a),l=e;l<i-e;l++)s=t.children[l],c(r,t.leaf?n(s):s),h+=u(r);for(l=i-e-1;e<=l;l--)s=t.children[l],c(a,t.leaf?n(s):s),h+=u(a);return h},_adjustParentBBoxes:function(t,e,i){for(var o=i;0<=o;o--)c(e[o],t)},_condense:function(t){for(var e,i=t.length-1;0<=i;i--)0===t[i].children.length?0<i?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():p(t[i],this.toBBox)}},t.exports=o},35072:(t,e,i)=>{var o=new(i(83419))({initialize:function(t){if(this.entries=[],Array.isArray(t))for(var e=0;e<t.length;e++)this.set(t[e])},set:function(t){return-1===this.entries.indexOf(t)&&this.entries.push(t),this},get:function(t,e){for(var i=0;i<this.entries.length;i++){var o=this.entries[i];if(o[t]===e)return o}},getArray:function(){return this.entries.slice(0)},delete:function(t){t=this.entries.indexOf(t);return-1<t&&this.entries.splice(t,1),this},dump:function(){for(var t=0;t<this.entries.length;t++)this.entries[t]},each:function(t,e){var i,o=this.entries.slice(),s=o.length;if(e)for(i=0;i<s&&!1!==t.call(e,o[i],i);i++);else for(i=0;i<s&&!1!==t(o[i],i);i++);return this},iterate:function(t,e){var i,o=this.entries.length;if(e)for(i=0;i<o&&!1!==t.call(e,this.entries[i],i);i++);else for(i=0;i<o&&!1!==t(this.entries[i],i);i++);return this},iterateLocal:function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var o=this.entries.length;for(i=0;i<o;i++){var s=this.entries[i];s[t].apply(s,e)}return this},clear:function(){return this.entries.length=0,this},contains:function(t){return-1<this.entries.indexOf(t)},union:function(t){var e=new o;return t.entries.forEach(function(t){e.set(t)}),this.entries.forEach(function(t){e.set(t)}),e},intersect:function(e){var i=new o;return this.entries.forEach(function(t){e.contains(t)&&i.set(t)}),i},difference:function(e){var i=new o;return this.entries.forEach(function(t){e.contains(t)||i.set(t)}),i},size:{get:function(){return this.entries.length},set:function(t){return t<this.entries.length?this.entries.length=t:this.entries.length}}});t.exports=o},86555:(t,e,i)=>{var o=i(45319),s=i(83419),n=i(56583),r=i(26099),a=new s({initialize:function(t,e,i,o){void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=0),void 0===o&&(o=null),this._width=t,this._height=e,this._parent=o,this.aspectMode=i,this.aspectRatio=0===e?1:t/e,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new r},setAspectMode:function(t){return this.aspectMode=t=void 0===t?0:t,this.setSize(this._width,this._height)},setSnap:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.snapTo.set(t,e),this.setSize(this._width,this._height)},setParent:function(t){return this._parent=t,this.setSize(this._width,this._height)},setMin:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.minWidth=o(t,0,this.maxWidth),this.minHeight=o(e,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(t,e){return void 0===t&&(t=Number.MAX_VALUE),void 0===e&&(e=t),this.maxWidth=o(t,this.minWidth,Number.MAX_VALUE),this.maxHeight=o(e,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(t,e){switch(void 0===t&&(t=0),void 0===e&&(e=t),this.aspectMode){case a.NONE:this._width=this.getNewWidth(n(t,this.snapTo.x)),this._height=this.getNewHeight(n(e,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height;break;case a.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(n(t,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case a.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(n(e,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case a.FIT:this.constrain(t,e,!0);break;case a.ENVELOP:this.constrain(t,e,!1)}return this},setAspectRatio:function(t){return this.aspectRatio=t,this.setSize(this._width,this._height)},resize:function(t,e){return this._width=this.getNewWidth(n(t,this.snapTo.x)),this._height=this.getNewHeight(n(e,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height,this},getNewWidth:function(t,e){return void 0===e&&(e=!0),t=o(t,this.minWidth,this.maxWidth),t=e&&this._parent&&t>this._parent.width?Math.max(this.minWidth,this._parent.width):t},getNewHeight:function(t,e){return void 0===e&&(e=!0),t=o(t,this.minHeight,this.maxHeight),t=e&&this._parent&&t>this._parent.height?Math.max(this.minHeight,this._parent.height):t},constrain:function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=!0),t=this.getNewWidth(t),e=this.getNewHeight(e);var o=this.snapTo,s=0===e?1:t/e;return i&&this.aspectRatio>s||!i&&this.aspectRatio<s?(e=(t=n(t,o.x))/this.aspectRatio,0<o.y&&(t=(e=n(e,o.y))*this.aspectRatio)):(i&&this.aspectRatio<s||!i&&this.aspectRatio>s)&&(t=(e=n(e,o.y))*this.aspectRatio,0<o.x)&&(e=(t=n(t,o.x))*(1/this.aspectRatio)),this._width=t,this._height=e,this},fitTo:function(t,e){return this.constrain(t,e,!0)},envelop:function(t,e){return this.constrain(t,e,!1)},setWidth:function(t){return this.setSize(t,this._height)},setHeight:function(t){return this.setSize(this._width,t)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(t){t&&t.style&&(t.style.width=this._width+"px",t.style.height=this._height+"px")},copy:function(t){return t.setAspectMode(this.aspectMode),t.aspectRatio=this.aspectRatio,t.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(t){this.setSize(t,this._height)}},height:{get:function(){return this._height},set:function(t){this.setSize(this._width,t)}}});a.NONE=0,a.WIDTH_CONTROLS_HEIGHT=1,a.HEIGHT_CONTROLS_WIDTH=2,a.FIT=3,a.ENVELOP=4,t.exports=a},15238:t=>{t.exports="add"},56187:t=>{t.exports="remove"},82348:(t,e,i)=>{t.exports={PROCESS_QUEUE_ADD:i(15238),PROCESS_QUEUE_REMOVE:i(56187)}},41392:(t,e,i)=>{t.exports={Events:i(82348),List:i(73162),Map:i(90330),ProcessQueue:i(25774),RTree:i(59542),Set:i(35072),Size:i(86555)}},57382:(t,e,i)=>{var o=i(83419),d=i(45319),p=i(40987),s=i(8054),n=i(50030),r=i(79237),i=new o({Extends:r,initialize:function(t,e,i,o,s){r.call(this,t,e,i,o,s),this.add("__BASE",0,0,0,o,s),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=o,this.height=s,this.imageData=this.context.getImageData(0,0,o,s),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===s.WEBGL&&this.refresh(),this},draw:function(t,e,i,o){return void 0===o&&(o=!0),this.context.drawImage(i,t,e),o&&this.update(),this},drawFrame:function(t,e,i,o,s){void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=!0);var n,r,a,t=this.manager.getFrame(t,e);return t&&(e=t.canvasData,n=t.cutWidth,r=t.cutHeight,a=t.source.resolution,this.context.drawImage(t.source.image,e.x,e.y,n,r,i,o,n/a,r/a),s)&&this.update(),this},setPixel:function(t,e,i,o,s,n){var r;return void 0===n&&(n=255),t=Math.abs(Math.floor(t)),e=Math.abs(Math.floor(e)),-1<this.getIndex(t,e)&&((r=this.context.getImageData(t,e,1,1)).data[0]=i,r.data[1]=o,r.data[2]=s,r.data[3]=n,this.context.putImageData(r,t,e)),this},putData:function(t,e,i,o,s,n,r){return void 0===n&&(n=t.width),void 0===r&&(r=t.height),this.context.putImageData(t,e,i,o=void 0===o?0:o,s=void 0===s?0:s,n,r),this},getData:function(t,e,i,o){return t=d(Math.floor(t),0,this.width-1),e=d(Math.floor(e),0,this.height-1),i=d(i,1,this.width-t),o=d(o,1,this.height-e),this.context.getImageData(t,e,i,o)},getPixel:function(t,e,i){i=i||new p;var o,s,n,t=this.getIndex(t,e);return-1<t&&(o=(e=this.data)[t+0],s=e[t+1],n=e[t+2],e=e[t+3],i.setTo(o,s,n,e)),i},getPixels:function(t,e,i,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.width),void 0===o&&(o=i),t=Math.abs(Math.round(t)),e=Math.abs(Math.round(e));for(var s=d(t,0,this.width),n=d(t+i,0,this.width),t=d(e,0,this.height),r=d(e+o,0,this.height),a=new p,h=[],l=t;l<r;l++){for(var c=[],u=s;u<n;u++)a=this.getPixel(u,l,a),c.push({x:u,y:l,color:a.color,alpha:a.alphaGL});h.push(c)}return h},getIndex:function(t,e){return t=Math.abs(Math.round(t)),e=Math.abs(Math.round(e)),t<this.width&&e<this.height?4*(t+e*this.width):-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(t,e,i,o,s){return void 0===i&&(i=this.width),void 0===o&&(o=this.height),void 0===s&&(s=!0),this.context.clearRect(t=void 0===t?0:t,e=void 0===e?0:e,i,o),s&&this.update(),this},setSize:function(t,e){return void 0===e&&(e=t),t===this.width&&e===this.height||(this.canvas.width=t,this.canvas.height=e,this._source.width=t,this._source.height=e,this._source.isPowerOf2=n(t,e),this.frames.__BASE.setSize(t,e,0,0),this.width=t,this.height=e,this.refresh()),this},destroy:function(){r.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});t.exports=i},81320:(t,e,i)=>{var c=i(10312),a=i(71911),h=i(27919),o=i(83419),l=i(8054),w=i(4327),b=i(95540),u=i(36060),d=i(32302),p=i(79237),f=i(70554),i=new o({Extends:p,initialize:function(t,e,i,o){void 0===i&&(i=256),void 0===o&&(o=256),this.type="DynamicTexture";var s=t.game.renderer,n=s&&s.type===l.CANVAS,r=n?h.create2D(this,i,o):[this];p.call(this,t,e,r,i,o),this.add("__BASE",0,0,0,i,o),this.renderer=s,this.width=-1,this.height=-1,this.isDrawing=!1,this.canvas=n?r:null,this.context=n?r.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new a(0,0,i,o).setScene(t.game.scene.systemScene,!1),this.renderTarget=n?null:new d(s,i,o,1,0,!1,!0,!0,!1),this.pipeline=n?null:s.pipelines.get(u.SINGLE_PIPELINE),this.setSize(i,o)},setSize:function(t,e){void 0===e&&(e=t);var i,o=this.get(),s=o.source;return t!==this.width||e!==this.height?(this.canvas&&(this.canvas.width=t,this.canvas.height=e),(i=this.renderTarget)&&(i.willResize(t,e)&&i.resize(t,e),i.texture!==s.glTexture&&this.renderer.deleteTexture(s.glTexture),this.setFromRenderTarget()),this.camera.setSize(t,e),s.width=t,s.height=e,o.setSize(t,e),this.width=t,this.height=e):(i=this.getSourceImage(),o.cutX+t>i.width&&(t=i.width-o.cutX),o.cutY+e>i.height&&(e=i.height-o.cutY),o.setSize(t,e,o.cutX,o.cutY)),this},setFromRenderTarget:function(){var t=this.get().source,e=this.renderTarget;return t.isRenderTexture=!0,t.isGLTexture=!0,t.glTexture=e.texture,this},setIsSpriteTexture:function(t){return this.isSpriteTexture=t,this},fill:function(t,e,i,o,s,n){var r,a,h,l=this.camera,c=this.renderer,u=(void 0===e&&(e=1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=this.width),void 0===n&&(n=this.height),t>>16&255),d=t>>8&255,t=255&t,p=this.renderTarget;return l.preRender(),p?(p.bind(!0),l=this.pipeline.manager.set(this.pipeline),r=c.width/p.width,a=c.height/p.height,h=p.height-(o+n),l.drawFillRect(i*r,h*a,s*r,n*a,f.getTintFromFloats(t/255,d/255,u/255,1),e),p.unbind(!0)):(l=this.context,c.setContext(l),l.globalCompositeOperation="source-over",l.fillStyle="rgba("+u+","+d+","+t+","+e+")",l.fillRect(i,o,s,n),c.setContext()),this.dirty=!0,this},clear:function(){var t,e;return this.dirty&&(t=this.context,(e=this.renderTarget)?e.clear():t&&(t.save(),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.width,this.height),t.restore()),this.dirty=!1),this},stamp:function(t,e,i,o,s){void 0===i&&(i=0),void 0===o&&(o=0);var n=b(s,"alpha",1),r=b(s,"tint",16777215),a=b(s,"angle",0),h=b(s,"rotation",0),l=b(s,"scale",1),c=b(s,"scaleX",l),l=b(s,"scaleY",l),u=b(s,"originX",.5),d=b(s,"originY",.5),p=b(s,"blendMode",0),f=b(s,"erase",!1),s=b(s,"skipBatch",!1),n=this.manager.resetStamp(n,r);return n.setAngle(0),0!==a?n.setAngle(a):0!==h&&n.setRotation(h),n.setScale(c,l),n.setTexture(t,e),n.setOrigin(u,d),n.setBlendMode(p),f&&(this._eraseMode=!0),s?this.batchGameObject(n,i,o):this.draw(n,i,o),f&&(this._eraseMode=!1),this},erase:function(t,e,i){return this._eraseMode=!0,this.draw(t,e,i),this._eraseMode=!1,this},draw:function(t,e,i,o,s){return this.beginDraw(),this.batchDraw(t,e,i,o,s),this.endDraw(),this},drawFrame:function(t,e,i,o,s,n){return this.beginDraw(),this.batchDrawFrame(t,e,i,o,s,n),this.endDraw(),this},repeat:function(t,e,i,o,s,n,r,a,h){if(void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=this.width),void 0===n&&(n=this.height),void 0===r&&(r=1),void 0===a&&(a=16777215),void 0===h&&(h=!1),e=t instanceof w?t:this.manager.getFrame(t,e)){var l=this.manager.resetStamp(r,a),c=(l.setFrame(e),l.setOrigin(0),e.width),u=e.height,d=(s=Math.floor(s),n=Math.floor(n),Math.ceil(s/c)),p=Math.ceil(n/u),f=d*c-s,b=p*u-n,y=(0<f&&(f=c-f),0<b&&(b=u-b),i<0&&(d+=Math.ceil(Math.abs(i)/c)),o<0&&(p+=Math.ceil(Math.abs(o)/u)),i),m=o,x=!1,g=this.manager.stampCrop.setTo(0,0,c,u);h||this.beginDraw();for(var v=0;v<p;v++){if(!(m+u<0)){for(var _=0;_<d;_++)x=!1,y+c<0||(y<0&&(x=!0,g.width=c+y,g.x=c-g.width),m<0&&(x=!0,g.height=u+m,g.y=u-g.height),0<f&&_===d-1&&(x=!0,g.width=f),0<b&&v===p-1&&(x=!0,g.height=b),x&&l.setCrop(g),this.batchGameObject(l,y,m),l.isCropped=!1,g.setTo(0,0,c,u)),y+=c;y=i}m+=u}h||this.endDraw()}return this},beginDraw:function(){var t,e,i;return this.isDrawing||(t=this.camera,e=this.renderer,i=this.renderTarget,t.preRender(),i?e.beginCapture(i.width,i.height):e.setContext(this.context),this.isDrawing=!0),this},batchDraw:function(t,e,i,o,s){return Array.isArray(t)||(t=[t]),this.batchList(t,e,i,o,s),this},batchDrawFrame:function(t,e,i,o,s,n){void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=1),void 0===n&&(n=16777215);t=this.manager.getFrame(t,e);return t&&(this.renderTarget?this.pipeline.batchTextureFrame(t,i,o,n,s,this.camera.matrix,null):this.batchTextureFrame(t,i,o,s,n)),this},endDraw:function(t){var e,i,o;return void 0===t&&(t=this._eraseMode),this.isDrawing&&(e=this.renderer,(i=this.renderTarget)?(o=e.endCapture(),e.pipelines.setUtility().blitFrame(o,i,1,!1,!1,t,this.isSpriteTexture),e.resetScissor(),e.resetViewport()):e.setContext(),this.dirty=!0,this.isDrawing=!1),this},batchList:function(t,e,i,o,s){var n=t.length;if(0!==n)for(var r=0;r<n;r++){var a=t[r];a&&a!==this&&(a.renderWebGL||a.renderCanvas?this.batchGameObject(a,e,i):a.isParent||a.list?this.batchGroup(a.getChildren(),e,i):"string"==typeof a?this.batchTextureFrameKey(a,null,e,i,o,s):a instanceof w?this.batchTextureFrame(a,e,i,o,s):Array.isArray(a)&&this.batchList(a,e,i,o,s))}},batchGroup:function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);for(var o=0;o<t.length;o++){var s=t[o];s.willRender(this.camera)&&this.batchGameObject(s,s.x+e,s.y+i)}},batchGameObject:function(t,e,i){void 0===e&&(e=t.x),void 0===i&&(i=t.y);var o,s=t.x,n=t.y,r=this.camera,a=this.renderer,h=this._eraseMode,l=t.mask;t.setPosition(e,i),this.canvas?(h&&(o=t.blendMode,t.blendMode=c.ERASE),l&&l.preRenderCanvas(a,t,r),t.renderCanvas(a,t,r,null),l&&l.postRenderCanvas(a,t,r),h&&(t.blendMode=o)):a&&(l&&l.preRenderWebGL(a,t,r),h||a.setBlendMode(t.blendMode),t.renderWebGL(a,t,r),l)&&l.postRenderWebGL(a,r,this.renderTarget),t.setPosition(s,n)},batchTextureFrameKey:function(t,e,i,o,s,n){t=this.manager.getFrame(t,e);t&&this.batchTextureFrame(t,i,o,s,n)},batchTextureFrame:function(t,e,i,o,s){void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=1),void 0===s&&(s=16777215);var n,r=this.camera.matrix;this.renderTarget?this.pipeline.batchTextureFrame(t,e,i,s,o,r,null):(s=this.context,n=t.canvasData,t=t.source.image,s.save(),s.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",s.globalAlpha=o,r.setToContext(s),0<n.width&&0<n.height&&s.drawImage(t,n.x,n.y,n.width,n.height,e,i,n.width,n.height),s.restore())},snapshotArea:function(t,e,i,o,s,n,r){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,s,!1,t,e,i,o,n,r):this.renderer.snapshotCanvas(this.canvas,s,!1,t,e,i,o,n,r),this},snapshot:function(t,e,i){return this.snapshotArea(0,0,this.width,this.height,t,e,i)},snapshotPixel:function(t,e,i){return this.snapshotArea(t,e,1,1,i,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(t,e,i,o){var s=this.manager.resetStamp();s.setTexture(this),s.setOrigin(0),s.renderWebGL(t,s,i,o)},renderCanvas:function(){},destroy:function(){var t=this.manager.stamp;t&&t.texture===this&&this.manager.resetStamp(),p.prototype.destroy.call(this),h.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.renderer=null}});t.exports=i},4327:(t,e,i)=>{var o=i(83419),v=i(45319),s=i(79291),n=new o({initialize:function(t,e,i,o,s,n,r){this.texture=t,this.name=e,this.source=t.source[i],this.sourceIndex=i,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0},is3Slice:!1,scale9:!1,scale9Borders:{x:0,y:0,w:0,h:0}},this.setSize(n,r,o,s)},setSize:function(t,e,i,o){void 0===o&&(o=0),this.cutX=i=void 0===i?0:i,this.cutY=o,this.cutWidth=t,this.cutHeight=e,this.width=t,this.height=e,this.halfWidth=Math.floor(.5*t),this.halfHeight=Math.floor(.5*e),this.centerX=Math.floor(t/2),this.centerY=Math.floor(e/2);var s=this.data,n=s.cut,n=(n.x=i,n.y=o,n.w=t,n.h=e,n.r=i+t,n.b=o+e,s.sourceSize.w=t,s.sourceSize.h=e,s.spriteSourceSize.w=t,s.spriteSourceSize.h=e,s.radius=.5*Math.sqrt(t*t+e*e),s.drawImage);return n.x=i,n.y=o,n.width=t,n.height=e,this.updateUVs()},setTrim:function(t,e,i,o,s,n){var r=this.data,a=r.spriteSourceSize;return r.trim=!0,r.sourceSize.w=t,r.sourceSize.h=e,a.x=i,a.y=o,a.w=s,a.h=n,a.r=i+s,a.b=o+n,this.x=i,this.y=o,this.width=s,this.height=n,this.halfWidth=.5*s,this.halfHeight=.5*n,this.centerX=Math.floor(s/2),this.centerY=Math.floor(n/2),this.updateUVs()},setScale9:function(t,e,i,o){var s=this.data;return s.scale9=!0,s.is3Slice=0===e&&o===this.height,s.scale9Borders.x=t,s.scale9Borders.y=e,s.scale9Borders.w=i,s.scale9Borders.h=o,this},setCropUVs:function(t,e,i,o,s,n,r){var a,h,l,c=this.cutX,u=this.cutY,d=this.cutWidth,p=this.cutHeight,f=this.realWidth,b=this.realHeight,y=c+(e=v(e,0,f)),m=u+(i=v(i,0,b)),f=o=v(o,0,f-e),b=s=v(s,0,b-i),x=this.data,x=(x.trim?(x=x.spriteSourceSize,h=e+(o=v(o,0,d-e)),l=i+(s=v(s,0,p-i)),x.r<e||x.b<i||x.x>h||x.y>l?b=f=m=y=0:(g=Math.max(x.x,e),a=Math.max(x.y,i),h=Math.min(x.r,h)-g,l=Math.min(x.b,l)-a,y=n?c+(d-(g-x.x)-h):c+(g-x.x),m=r?u+(p-(a-x.y)-l):u+(a-x.y),e=g,i=a,o=f=h,s=b=l)):(n&&(y=c+(d-e-o)),r&&(m=u+(p-i-s))),this.source.width),g=this.source.height;return t.u0=Math.max(0,y/x),t.v0=Math.max(0,m/g),t.u1=Math.min(1,(y+f)/x),t.v1=Math.min(1,(m+b)/g),t.x=e,t.y=i,t.cx=y,t.cy=m,t.cw=f,t.ch=b,t.width=o,t.height=s,t.flipX=n,t.flipY=r,t},updateCropUVs:function(t,e,i){return this.setCropUVs(t,t.x,t.y,t.width,t.height,e,i)},setUVs:function(t,e,i,o,s,n){var r=this.data.drawImage;return r.width=t,r.height=e,this.u0=i,this.v0=o,this.u1=s,this.v1=n,this},updateUVs:function(){var t=this.cutX,e=this.cutY,i=this.cutWidth,o=this.cutHeight,s=this.data.drawImage,s=(s.width=i,s.height=o,this.source.width),n=this.source.height;return this.u0=t/s,this.v0=e/n,this.u1=(t+i)/s,this.v1=(e+o)/n,this},updateUVsInverted:function(){var t=this.source.width,e=this.source.height;return this.u0=(this.cutX+this.cutHeight)/t,this.v0=this.cutY/e,this.u1=this.cutX/t,this.v1=(this.cutY+this.cutWidth)/e,this},clone:function(){var t=new n(this.texture,this.name,this.sourceIndex);return t.cutX=this.cutX,t.cutY=this.cutY,t.cutWidth=this.cutWidth,t.cutHeight=this.cutHeight,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t.halfWidth=this.halfWidth,t.halfHeight=this.halfHeight,t.centerX=this.centerX,t.centerY=this.centerY,t.rotated=this.rotated,t.data=s(!0,t.data,this.data),t.updateUVs(),t},destroy:function(){this.texture=null,this.source=null,this.customData=null,this.data=null},glTexture:{get:function(){return this.source.glTexture}},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},scale9:{get:function(){return this.data.scale9}},is3Slice:{get:function(){return this.data.is3Slice}},canvasData:{get:function(){return this.data.drawImage}}});t.exports=n},79237:(t,e,i)=>{var o=i(83419),r=i(4327),a=i(11876),i=new o({initialize:function(t,e,i,o,s){Array.isArray(i)||(i=[i]),this.manager=t,this.key=e,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE";for(var n=this.frameTotal=0;n<i.length;n++)this.source.push(new a(this,i[n],o,s))},add:function(t,e,i,o,s,n){return this.has(t)?null:(e=new r(this,t,e,i,o,s,n),this.frames[t]=e,"__BASE"===this.firstFrame&&(this.firstFrame=t),this.frameTotal++,e)},remove:function(t){return!!this.has(t)&&(this.get(t).destroy(),delete this.frames[t],!0)},has:function(t){return this.frames.hasOwnProperty(t)},get:function(t){return t=t||this.firstFrame,this.frames[t]||this.frames[this.firstFrame]},getTextureSourceIndex:function(t){for(var e=0;e<this.source.length;e++)if(this.source[e]===t)return e;return-1},getFramesFromTextureSource:function(t,e){void 0===e&&(e=!1);var i,o,s=[];for(i in this.frames)"__BASE"===i&&!e||(o=this.frames[i]).sourceIndex!==t||s.push(o);return s},getFrameBounds:function(t){for(var e=this.getFramesFromTextureSource(t=void 0===t?0:t),i=1/0,o=1/0,s=0,n=0,r=0;r<e.length;r++){var a=e[r];a.cutX<i&&(i=a.cutX),a.cutY<o&&(o=a.cutY),a.cutX+a.cutWidth>s&&(s=a.cutX+a.cutWidth),a.cutY+a.cutHeight>n&&(n=a.cutY+a.cutHeight)}return{x:i,y:o,width:s-i,height:n-o}},getFrameNames:function(t){void 0===t&&(t=!1);var e=Object.keys(this.frames);return t||-1!==(t=e.indexOf("__BASE"))&&e.splice(t,1),e},getSourceImage:function(t){null!=t&&1!==this.frameTotal||(t="__BASE");t=this.frames[t];return(t||this.frames.__BASE).source.image},getDataSourceImage:function(t){null!=t&&1!==this.frameTotal||(t="__BASE");t=this.frames[t],t=(t||this.frames.__BASE).sourceIndex;return this.dataSource[t].image},setDataSource:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=this.source[e];this.dataSource.push(new a(this,t[e],i.width,i.height))}},setFilter:function(t){for(var e=0;e<this.source.length;e++)this.source[e].setFilter(t);for(e=0;e<this.dataSource.length;e++)this.dataSource[e].setFilter(t)},destroy:function(){for(var t,e=this.source,i=this.dataSource,o=0;o<e.length;o++)e[o]&&e[o].destroy();for(o=0;o<i.length;o++)i[o]&&i[o].destroy();for(t in this.frames){var s=this.frames[t];s&&s.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});t.exports=i},17130:(t,e,i)=>{var a=i(27919),s=i(57382),o=i(83419),n=i(40987),r=i(8054),h=i(81320),l=i(50792),c=i(69442),u=i(4327),d=i(8443),p=i(99584),f=i(35154),b=i(88571),y=i(41212),m=i(61309),x=i(87841),g=i(79237),i=new o({Extends:l,initialize:function(t){l.call(this),this.game=t,this.name="TextureManager",this.list={},this._tempCanvas=a.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new x,this.silentWarnings=!1,t.events.once(d.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(c.LOAD,this.updatePending,this),this.on(c.ERROR,this.updatePending,this);var t=this.game.config;this.addBase64("__DEFAULT",t.defaultImage),this.addBase64("__MISSING",t.missingImage),this.addBase64("__WHITE",t.whiteImage),this.game.renderer&&this.game.renderer.gl&&this.addUint8Array("__NORMAL",new Uint8Array([127,127,255,255]),1,1),this.game.events.once(d.DESTROY,this.destroy,this),this.game.events.once(d.SYSTEM_READY,function(t){this.stamp=new b(t).setOrigin(0)},this)},updatePending:function(){this._pending--,0===this._pending&&(this.off(c.LOAD),this.off(c.ERROR),this.emit(c.READY))},checkKey:function(t){return!this.exists(t)||(this.silentWarnings,!1)},remove:function(t){if("string"==typeof t){if(!this.exists(t))return this.silentWarnings,this;t=this.get(t)}var e=t.key;return this.list.hasOwnProperty(e)&&(t.destroy(),this.emit(c.REMOVE,e),this.emit(c.REMOVE_KEY+e)),this},removeKey:function(t){return this.list.hasOwnProperty(t)&&delete this.list[t],this},addBase64:function(e,t){var i,o;return this.checkKey(e)&&(i=this,(o=new Image).onerror=function(){i.emit(c.ERROR,e)},o.onload=function(){var t=i.create(e,o);m.Image(t,0),i.emit(c.ADD,e,t),i.emit(c.ADD_KEY+e,t),i.emit(c.LOAD,e,t)},o.src=t),this},getBase64:function(t,e,i,o){void 0===i&&(i="image/png"),void 0===o&&(o=.92);var s,n,r="",t=this.getFrame(t,e);return t&&(t.source.isRenderTexture||t.source.isGLTexture)?this.silentWarnings:t&&(e=t.canvasData,n=(s=a.create2D(this,e.width,e.height)).getContext("2d",{willReadFrequently:!0}),0<e.width&&0<e.height&&n.drawImage(t.source.image,e.x,e.y,e.width,e.height,0,0,e.width,e.height),r=s.toDataURL(i,o),a.remove(s)),r},addImage:function(t,e,i){var o=null;return this.checkKey(t)&&(o=this.create(t,e),m.Image(o,0),i&&o.setDataSource(i),this.emit(c.ADD,t,o),this.emit(c.ADD_KEY+t,o)),o},addGLTexture:function(t,e){var i,o,s=null;return this.checkKey(t)&&(i=e.width,o=e.height,(s=this.create(t,e,i,o)).add("__BASE",0,0,0,i,o),this.emit(c.ADD,t,s),this.emit(c.ADD_KEY+t,s)),s},addCompressedTexture:function(t,e,i){var o=null;if(this.checkKey(t)){if((o=this.create(t,e)).add("__BASE",0,0,0,e.width,e.height),i){function s(t,e,i){Array.isArray(i.textures)||Array.isArray(i.frames)?m.JSONArray(t,e,i):m.JSONHash(t,e,i)}if(Array.isArray(i))for(var n=0;n<i.length;n++)s(o,n,i[n]);else s(o,0,i)}this.emit(c.ADD,t,o),this.emit(c.ADD_KEY+t,o)}return o},addRenderTexture:function(t,e){var i=null;return this.checkKey(t)&&((i=this.create(t,e)).add("__BASE",0,0,0,e.width,e.height),this.emit(c.ADD,t,i),this.emit(c.ADD_KEY+t,i)),i},generate:function(t,e){var i;return this.checkKey(t)?(i=a.create(this,1,1),e.canvas=i,p(e),this.addCanvas(t,i)):null},createCanvas:function(t,e,i){return void 0===e&&(e=256),void 0===i&&(i=256),this.checkKey(t)?(e=a.create(this,e,i,r.CANVAS,!0),this.addCanvas(t,e)):null},addCanvas:function(t,e,i){var o=null;return(i=void 0===i?!1:i)?o=new s(this,t,e,e.width,e.height):this.checkKey(t)&&(o=new s(this,t,e,e.width,e.height),this.list[t]=o,this.emit(c.ADD,t,o),this.emit(c.ADD_KEY+t,o)),o},addDynamicTexture:function(t,e,i){var o=null;return"string"!=typeof t||this.exists(t)?t=(o=t).key:o=new h(this,t,e,i),this.checkKey(t)?(this.list[t]=o,this.emit(c.ADD,t,o),this.emit(c.ADD_KEY+t,o)):o=null,o},addAtlas:function(t,e,i,o){return Array.isArray(i.textures)||Array.isArray(i.frames)?this.addAtlasJSONArray(t,e,i,o):this.addAtlasJSONHash(t,e,i,o)},addAtlasJSONArray:function(t,e,i,o){var s=null;if(e instanceof g?(t=e.key,s=e):this.checkKey(t)&&(s=this.create(t,e)),s){if(Array.isArray(i))for(var n=1===i.length,r=0;r<s.source.length;r++){var a=n?i[0]:i[r];m.JSONArray(s,r,a)}else m.JSONArray(s,0,i);o&&s.setDataSource(o),this.emit(c.ADD,t,s),this.emit(c.ADD_KEY+t,s)}return s},addAtlasJSONHash:function(t,e,i,o){var s=null;if(e instanceof g?(t=e.key,s=e):this.checkKey(t)&&(s=this.create(t,e)),s){if(Array.isArray(i))for(var n=0;n<i.length;n++)m.JSONHash(s,n,i[n]);else m.JSONHash(s,0,i);o&&s.setDataSource(o),this.emit(c.ADD,t,s),this.emit(c.ADD_KEY+t,s)}return s},addAtlasXML:function(t,e,i,o){var s=null;return e instanceof g?(t=e.key,s=e):this.checkKey(t)&&(s=this.create(t,e)),s&&(m.AtlasXML(s,0,i),o&&s.setDataSource(o),this.emit(c.ADD,t,s),this.emit(c.ADD_KEY+t,s)),s},addUnityAtlas:function(t,e,i,o){var s=null;return e instanceof g?(t=e.key,s=e):this.checkKey(t)&&(s=this.create(t,e)),s&&(m.UnityYAML(s,0,i),o&&s.setDataSource(o),this.emit(c.ADD,t,s),this.emit(c.ADD_KEY+t,s)),s},addSpriteSheet:function(t,e,i,o){var s,n=null;return e instanceof g?(t=e.key,n=e):this.checkKey(t)&&(n=this.create(t,e)),n&&(e=n.source[0].width,s=n.source[0].height,m.SpriteSheet(n,0,0,0,e,s,i),o&&n.setDataSource(o),this.emit(c.ADD,t,n),this.emit(c.ADD_KEY+t,n)),n},addSpriteSheetFromAtlas:function(t,e){if(!this.checkKey(t))return null;var i=f(e,"atlas",null),o=f(e,"frame",null);if(i&&o){i=this.get(i).get(o);if(i)return o=(o=i.source.image)||i.source.glTexture,o=this.create(t,o),i.trimmed?m.SpriteSheetFromAtlas(o,i,e):m.SpriteSheet(o,0,i.cutX,i.cutY,i.cutWidth,i.cutHeight,e),this.emit(c.ADD,t,o),this.emit(c.ADD_KEY+t,o),o}},addUint8Array:function(t,e,i,o){return this.checkKey(t)&&e.length/4==i*o?((e=this.create(t,e,i,o)).add("__BASE",0,0,0,i,o),this.emit(c.ADD,t,e),this.emit(c.ADD_KEY+t,e),e):null},create:function(t,e,i,o){var s=null;return this.checkKey(t)&&(s=new g(this,t,e,i,o),this.list[t]=s),s},exists:function(t){return this.list.hasOwnProperty(t)},get:function(t){return this.list[t=void 0===t?"__DEFAULT":t]||(t instanceof g?t:t instanceof u?t.texture:this.list.__MISSING)},cloneFrame:function(t,e){if(this.list[t])return this.list[t].get(e).clone()},getFrame:function(t,e){if(this.list[t])return this.list[t].get(e)},parseFrame:function(t){if(t)return"string"==typeof t?this.getFrame(t):Array.isArray(t)&&2===t.length?this.getFrame(t[0],t[1]):y(t)?this.getFrame(t.key,t.frame):t instanceof g?t.get():t instanceof u?t:void 0},getTextureKeys:function(){var t,e=[];for(t in this.list)"__DEFAULT"!==t&&"__MISSING"!==t&&"__WHITE"!==t&&"__NORMAL"!==t&&e.push(t);return e},getPixel:function(t,e,i,o){i=this.getFrame(i,o);if(i){t-=i.x,e-=i.y;var o=i.data.cut;if(t+=o.x,e+=o.y,t>=o.x&&t<o.r&&e>=o.y&&e<o.b)return(o=this._tempContext).clearRect(0,0,1,1),o.drawImage(i.source.image,t,e,1,1,0,0,1,1),i=o.getImageData(0,0,1,1),new n(i.data[0],i.data[1],i.data[2],i.data[3])}return null},getPixelAlpha:function(t,e,i,o){i=this.getFrame(i,o);if(i){t-=i.x,e-=i.y;var o=i.data.cut;if(t+=o.x,e+=o.y,t>=o.x&&t<o.r&&e>=o.y&&e<o.b)return(o=this._tempContext).clearRect(0,0,1,1),o.drawImage(i.source.image,t,e,1,1,0,0,1,1),o.getImageData(0,0,1,1).data[3]}return null},setTexture:function(t,e,i){return this.list[e]&&(t.texture=this.list[e],t.frame=t.texture.get(i)),t},renameTexture:function(t,e){var i=this.get(t);return!(!i||t===e||(i.key=e,this.list[e]=i,delete this.list[t],0))},each:function(t,e){for(var i,o=[null],s=1;s<arguments.length;s++)o.push(arguments[s]);for(i in this.list)o[0]=this.list[i],t.apply(e,o)},resetStamp:function(t,e){void 0===t&&(t=1),void 0===e&&(e=16777215);var i=this.stamp;return i.setCrop(),i.setPosition(0),i.setAngle(0),i.setScale(1),i.setAlpha(t),i.setTint(e),i.setTexture("__WHITE"),i},destroy:function(){for(var t in this.list)this.list[t].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,a.remove(this._tempCanvas)}});t.exports=i},11876:(t,e,i)=>{var o=i(27919),s=i(83419),r=i(50030),a=i(29795),h=i(82751),i=new s({initialize:function(t,e,i,o,s){void 0===s&&(s=!1);var n=t.manager.game;this.renderer=n.renderer,this.texture=t,this.source=e,this.image=e.compressed?null:e,this.compressionAlgorithm=e.compressed?e.format:null,this.resolution=1,this.width=i||e.naturalWidth||e.videoWidth||e.width||0,this.height=o||e.naturalHeight||e.videoHeight||e.height||0,this.scaleMode=a.DEFAULT,this.isCanvas=e instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&e instanceof HTMLVideoElement,this.isRenderTexture="RenderTexture"===e.type||"DynamicTexture"===e.type,this.isGLTexture=e instanceof h,this.isPowerOf2=r(this.width,this.height),this.glTexture=null,this.flipY=s,this.init(n)},init:function(t){var e,i,o,s,n,r,a=this.renderer;a&&(e=this.source,a.gl?(i=this.image,o=this.flipY,s=this.width,n=this.height,r=this.scaleMode,this.isCanvas?this.glTexture=a.createCanvasTexture(i,!1,o):this.isVideo?this.glTexture=a.createVideoTexture(i,!1,o):this.isRenderTexture?this.glTexture=a.createTextureFromSource(null,s,n,r):this.isGLTexture?this.glTexture=e:this.compressionAlgorithm?this.glTexture=a.createTextureFromSource(e,void 0,void 0,r):e instanceof Uint8Array?this.glTexture=a.createUint8ArrayTexture(e,s,n,r):this.glTexture=a.createTextureFromSource(i,s,n,r)):this.isRenderTexture&&(this.image=e.canvas)),t.config.antialias||this.setFilter(1)},setFilter:function(t){this.renderer&&this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,t),this.scaleMode=t},setFlipY:function(t){return(t=void 0===t?!0:t)!==this.flipY&&(this.flipY=t,this.update()),this},update:function(){var t=this.renderer,e=this.image,i=this.flipY,o=t.gl;o&&this.isCanvas?t.updateCanvasTexture(e,this.glTexture,i):o&&this.isVideo&&t.updateVideoTexture(e,this.glTexture,i)},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture),this.isCanvas&&o.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});t.exports=i},19673:t=>{t.exports={LINEAR:0,NEAREST:1}},44538:t=>{t.exports="addtexture"},63486:t=>{t.exports="addtexture-"},94851:t=>{t.exports="onerror"},29099:t=>{t.exports="onload"},8678:t=>{t.exports="ready"},86415:t=>{t.exports="removetexture"},30879:t=>{t.exports="removetexture-"},69442:(t,e,i)=>{t.exports={ADD:i(44538),ADD_KEY:i(63486),ERROR:i(94851),LOAD:i(29099),READY:i(8678),REMOVE:i(86415),REMOVE_KEY:i(30879)}},27458:(t,e,i)=>{var o=i(79291),s=i(19673),o=o(!1,{CanvasTexture:i(57382),DynamicTexture:i(81320),Events:i(69442),FilterMode:s,Frame:i(4327),Parsers:i(61309),Texture:i(79237),TextureManager:i(17130),TextureSource:i(11876)},s);t.exports=o},89905:t=>{t.exports=function(t,e,i){if(i.getElementsByTagName("TextureAtlas")){var o=t.source[e];t.add("__BASE",e,0,0,o.width,o.height);for(var s=i.getElementsByTagName("SubTexture"),n=0;n<s.length;n++){var r,a=s[n].attributes,h=a.name.value,l=parseInt(a.x.value,10),c=parseInt(a.y.value,10),u=parseInt(a.width.value,10),d=parseInt(a.height.value,10),h=t.add(h,e,l,c,u,d);a.frameX&&(l=Math.abs(parseInt(a.frameX.value,10)),c=Math.abs(parseInt(a.frameY.value,10)),r=parseInt(a.frameWidth.value,10),a=parseInt(a.frameHeight.value,10),h.setTrim(u,d,l,c,r,a))}return t}}},72893:t=>{t.exports=function(t,e){var i=t.source[e];return t.add("__BASE",e,0,0,i.width,i.height),t}},4832:t=>{t.exports=function(t,e){var i=t.source[e];return t.add("__BASE",e,0,0,i.width,i.height),t}},78566:(t,e,i)=>{var c=i(41786);t.exports=function(t,e,i){if(i.frames||i.textures){var o=t.source[e];t.add("__BASE",e,0,0,o.width,o.height);for(var s,n,r=(Array.isArray(i.textures)?i.textures[e]:i).frames,a=0;a<r.length;a++){var h,l=r[a];(s=t.add(l.filename,e,l.frame.x,l.frame.y,l.frame.w,l.frame.h))&&(l.trimmed&&s.setTrim(l.sourceSize.w,l.sourceSize.h,l.spriteSourceSize.x,l.spriteSourceSize.y,l.spriteSourceSize.w,l.spriteSourceSize.h),l.rotated&&(s.rotated=!0,s.updateUVsInverted()),(h=l.anchor||l.pivot)&&(s.customPivot=!0,s.pivotX=h.x,s.pivotY=h.y),l.scale9Borders&&s.setScale9(l.scale9Borders.x,l.scale9Borders.y,l.scale9Borders.w,l.scale9Borders.h),s.customData=c(l))}for(n in i)"frames"!==n&&(Array.isArray(i[n])?t.customData[n]=i[n].slice(0):t.customData[n]=i[n]);return t}}},39711:(t,e,i)=>{var c=i(41786);t.exports=function(t,e,i){if(i.frames){var o=t.source[e];t.add("__BASE",e,0,0,o.width,o.height);var s,n,r,a,h,l=i.frames;for(n in l)l.hasOwnProperty(n)&&(r=l[n],s=t.add(n,e,r.frame.x,r.frame.y,r.frame.w,r.frame.h))&&(r.trimmed&&s.setTrim(r.sourceSize.w,r.sourceSize.h,r.spriteSourceSize.x,r.spriteSourceSize.y,r.spriteSourceSize.w,r.spriteSourceSize.h),r.rotated&&(s.rotated=!0,s.updateUVsInverted()),(a=r.anchor||r.pivot)&&(s.customPivot=!0,s.pivotX=a.x,s.pivotY=a.y),r.scale9Borders&&s.setScale9(r.scale9Borders.x,r.scale9Borders.y,r.scale9Borders.w,r.scale9Borders.h),s.customData=c(r));for(h in i)"frames"!==h&&(Array.isArray(i[h])?t.customData[h]=i[h].slice(0):t.customData[h]=i[h]);return t}}},31403:t=>{t.exports=function(t){var e=[171,75,84,88,32,49,49,187,13,10,26,10],i=new Uint8Array(t,0,12);for(f=0;f<i.length;f++)if(i[f]!==e[f])return;var o=Uint32Array.BYTES_PER_ELEMENT,s=new DataView(t,12,13*o),n=67305985===s.getUint32(0,!0);if(0===s.getUint32(+o,n)){for(var r=s.getUint32(4*o,n),a=s.getUint32(6*o,n),h=s.getUint32(7*o,n),l=Math.max(1,s.getUint32(11*o,n)),s=s.getUint32(12*o,n),c=new Array(l),u=64+s,d=a,p=h,f=0;f<l;f++){var b=new Int32Array(t,u,1)[0];u+=4,c[f]={data:new Uint8Array(t,u,b),width:d,height:p},d=Math.max(1,d>>1),p=Math.max(1,p>>1),u+=b}return{mipmaps:c,width:a,height:h,internalFormat:r,compressed:!0,generateMipmap:!1}}}},82038:t=>{function i(t,e,i,o,s,n,r){return void 0===r&&(r=16),Math.floor((t+i)/s)*Math.floor((e+o)/n)*r}function e(t,e){return(t=Math.max(t,16))*Math.max(e,8)/4}function o(t,e){return(t=Math.max(t,8))*Math.max(e,8)/2}function s(t,e){return Math.ceil(t/4)*Math.ceil(e/4)*16}function n(t,e){return i(t,e,3,3,4,4,8)}function r(t,e){return i(t,e,3,3,4,4)}var f={0:{sizeFunc:e,glFormat:[35841]},1:{sizeFunc:e,glFormat:[35843]},2:{sizeFunc:o,glFormat:[35840]},3:{sizeFunc:o,glFormat:[35842]},6:{sizeFunc:n,glFormat:[36196]},7:{sizeFunc:n,glFormat:[33776,35916]},8:{sizeFunc:r,glFormat:[33777,35917]},9:{sizeFunc:r,glFormat:[33778,35918]},11:{sizeFunc:r,glFormat:[33779,35919]},14:{sizeFunc:s,glFormat:[36494,36495]},15:{sizeFunc:s,glFormat:[36492,36493]},22:{sizeFunc:n,glFormat:[37492,37493]},23:{sizeFunc:r,glFormat:[37496,37497]},24:{sizeFunc:n,glFormat:[37494,37495]},25:{sizeFunc:n,glFormat:[37488]},26:{sizeFunc:r,glFormat:[37490]},27:{sizeFunc:r,glFormat:[37808,37840]},28:{sizeFunc:function(t,e){return i(t,e,4,3,5,4)},glFormat:[37809,37841]},29:{sizeFunc:function(t,e){return i(t,e,4,4,5,5)},glFormat:[37810,37842]},30:{sizeFunc:function(t,e){return i(t,e,5,4,6,5)},glFormat:[37811,37843]},31:{sizeFunc:function(t,e){return i(t,e,5,5,6,6)},glFormat:[37812,37844]},32:{sizeFunc:function(t,e){return i(t,e,7,4,8,5)},glFormat:[37813,37845]},33:{sizeFunc:function(t,e){return i(t,e,7,5,8,6)},glFormat:[37814,37846]},34:{sizeFunc:function(t,e){return i(t,e,7,7,8,8)},glFormat:[37815,37847]},35:{sizeFunc:function(t,e){return i(t,e,9,4,10,5)},glFormat:[37816,37848]},36:{sizeFunc:function(t,e){return i(t,e,9,5,10,6)},glFormat:[37817,37849]},37:{sizeFunc:function(t,e){return i(t,e,9,7,10,8)},glFormat:[37818,37850]},38:{sizeFunc:function(t,e){return i(t,e,9,9,10,10)},glFormat:[37819,37851]},39:{sizeFunc:function(t,e){return i(t,e,11,9,12,10)},glFormat:[37820,37852]},40:{sizeFunc:function(t,e){return i(t,e,11,11,12,12)},glFormat:[37821,37853]}};t.exports=function(t){for(var e=new Uint32Array(t,0,13),i=55727696===e[0]?e[2]:e[3],o=e[4],o=f[i].glFormat[o],s=f[i].sizeFunc,n=e[11],i=e[7],r=e[6],e=52+e[12],a=new Uint8Array(t,e),h=new Array(n),l=0,c=i,u=r,d=0;d<n;d++){var p=s(c,u);h[d]={data:new Uint8Array(a.buffer,a.byteOffset+l,p),width:c,height:u},c=Math.max(1,c>>1),u=Math.max(1,u>>1),l+=p}return{mipmaps:h,width:i,height:r,internalFormat:o,compressed:!0,generateMipmap:!1}}},75549:(t,e,i)=>{var S=i(95540);t.exports=function(t,e,i,o,s,n,r){var a=S(r,"frameWidth",null),h=S(r,"frameHeight",a);if(null===a)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var l=t.source[e],c=(t.add("__BASE",e,0,0,l.width,l.height),S(r,"startFrame",0)),u=S(r,"endFrame",-1),d=S(r,"margin",0),p=S(r,"spacing",0),f=Math.floor((s-d+p)/(a+p))*Math.floor((n-d+p)/(h+p));(c=f<c||c<-f?0:c)<0&&(c=f+c),(-1===u||f<u||u<c)&&(u=f);for(var b=d,y=d,m=0,x=0,g=0,v=0;v<f;v++){var m=0,x=0,_=b+a,w=y+h;s<_&&(m=_-s),n<w&&(x=w-n),c<=v&&v<=u&&(t.add(g,e,i+b,o+y,a-m,h-x),g++),(b+=a+p)+a>s&&(b=d,y+=h+p)}return t}},47534:(t,e,i)=>{var k=i(95540);t.exports=function(t,e,i){var o=k(i,"frameWidth",null),s=k(i,"frameHeight",o);if(!o)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var n=t.source[0];t.add("__BASE",0,0,0,n.width,n.height);var n=k(i,"startFrame",0),I=k(i,"endFrame",-1),r=k(i,"margin",0),a=k(i,"spacing",0),h=e.cutX,l=e.cutY,i=e.cutWidth,c=e.cutHeight,u=e.realWidth,d=e.realHeight,p=Math.floor((u-r+a)/(o+a)),f=Math.floor((d-r+a)/(s+a)),b=p*f,y=e.x,m=o-y,x=o-(u-i-y),g=e.y,v=s-g,_=s-(d-c-g);(n=b<n||n<-b?0:n)<0&&(n=b+n);for(var w=r,S=r,A=0,C=0;C<f;C++){for(var T=0===C,P=C===f-1,B=0;B<p;B++){var E,M,D,O,R=0===B,L=B===p-1,F=t.add(A,0,h+w,l+S,o,s);(R||T||L||P)&&(E=R?y:0,M=T?g:0,O=D=0,R&&(D+=o-m),L&&(D+=o-x),T&&(O+=s-v),P&&(O+=s-_),O=s-O,F.cutWidth=D=o-D,F.cutHeight=O,F.setTrim(o,s,E,M,D,O)),w=w+a+(R?m:L?x:o),A++}w=r,S=S+a+(T?v:P?_:s)}return t}},86147:t=>{function f(t,e,i,o){var s=b-o.y-o.height;t.add(i,e,o.x,s,o.width,o.height)}var b;t.exports=function(t,e,i){var o=t.source[e];t.add("__BASE",e,0,0,o.width,o.height),b=o.height;for(var s=i.split("\n"),n=/^[ ]*(- )*(\w+)+[: ]+(.*)/,r="",a="",h={x:0,y:0,width:0,height:0},l=0;l<s.length;l++){var c=s[l].match(n);if(c){var u="- "===c[1],d=c[2],p=c[3];if(u&&(a!==r&&(f(t,e,a,h),r=a),h={x:0,y:0,width:0,height:0}),"name"!==d)switch(d){case"x":case"y":case"width":case"height":h[d]=parseInt(p,10)}else a=p}}return a!==r&&f(t,e,a,h),t}},55222:(t,e,i)=>{var r=i(50030);function o(t){for(var e=t.mipmaps,i=0;i<e.length;i++){var o=e[i].width,s=e[i].height;if((o<<i)%4!=0||(s<<i)%4!=0)return!1}return!0}function s(){return!0}function n(t){t=t.mipmaps[0];return!!r(t.width,t.height)||!1}function a(t){t=t.mipmaps[0];return t.width%4==0&&t.height%4==0||!1}var h={37488:s,37489:s,37490:s,37491:s,37492:s,37493:s,37494:s,37495:s,37496:s,37497:s,36196:s,37808:s,37809:s,37810:s,37811:s,37812:s,37813:s,37814:s,37815:s,37816:s,37817:s,37818:s,37819:s,37820:s,37821:s,37840:s,37841:s,37842:s,37843:s,37844:s,37845:s,37846:s,37847:s,37848:s,37849:s,37850:s,37851:s,37852:s,37853:s,36492:o,36493:o,36494:o,36495:o,36283:o,36284:o,36285:o,36286:o,35840:n,35841:n,35842:n,35843:n,33776:o,33777:o,33778:o,33779:o,35916:a,35917:a,35918:a,35919:a};t.exports=function(t){for(var e=t.mipmaps,i=1;i<e.length;i++){var o=e[i].width,s=e[i].height;if(!r(o,s))return!1}var n=h[t.internalFormat];return!n||n(t)}},61309:(t,e,i)=>{t.exports={AtlasXML:i(89905),Canvas:i(72893),Image:i(4832),JSONArray:i(78566),JSONHash:i(39711),KTXParser:i(31403),PVRParser:i(82038),SpriteSheet:i(75549),SpriteSheetFromAtlas:i(47534),UnityYAML:i(86147)}},80341:t=>{t.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},16536:(t,e,i)=>{i=new(i(83419))({initialize:function(t,e,i,o,s,n,r){(void 0===i||i<=0)&&(i=32),(void 0===o||o<=0)&&(o=32),void 0===s&&(s=0),void 0===n&&(n=0),this.name=t,this.firstgid=0|e,this.imageWidth=0|i,this.imageHeight=0|o,this.imageMargin=0|s,this.imageSpacing=0|n,this.properties=r||{},this.images=[],this.total=0},containsImageIndex:function(t){return t>=this.firstgid&&t<this.firstgid+this.total},addImage:function(t,e){return this.images.push({gid:t,image:e}),this.total++,this}});t.exports=i},27462:(t,e,i)=>{i=new(i(83419))({initialize:function(t){if(this.gids=[],void 0!==t)for(var e=0;e<t.length;++e)for(var i=t[e],o=0;o<i.total;++o)this.gids[i.firstgid+o]=i;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(t){this.gids=t?this._gids:void 0}},getTypeIncludingTile:function(t){if(void 0!==t.type&&""!==t.type)return t.type;if(this.gids&&void 0!==t.gid){var e=this.gids[t.gid];if(e){e=e.getTileData(t.gid);if(e)return e.type}}},setTextureAndFrame:function(t,e,i,o){var s;null===e&&this.gids&&void 0!==o.gid&&(s=this.gids[o.gid])&&(null===e&&void 0!==s.image&&(e=s.image.key),null===i&&(i=o.gid-s.firstgid),t.scene.textures.getFrame(e,i)||(i=e=null)),t.setTexture(e,i)},setPropertiesFromTiledObject:function(t,e){var i;void 0!==this.gids&&void 0!==e.gid&&void 0!==(i=this.gids[e.gid])&&this.setFromJSON(t,i.getTileProperties(e.gid)),this.setFromJSON(t,e.properties)},setFromJSON:function(t,e){if(e)if(Array.isArray(e))for(var i=0;i<e.length;i++){var o=e[i];void 0!==t[o.name]?t[o.name]=o.value:t.setData(o.name,o.value)}else for(var s in e)void 0!==t[s]?t[s]=e[s]:t.setData(s,e[s])}});t.exports=i},31989:(t,e,i)=>{var l=i(80341),c=i(87010),u=i(46177),d=i(49075);t.exports=function(t,e,i,o,s,n,r,a){void 0===i&&(i=32),void 0===o&&(o=32),void 0===s&&(s=10),void 0===n&&(n=10),void 0===a&&(a=!1);var h=null;return Array.isArray(r)?h=u(void 0!==e?e:"map",l.ARRAY_2D,r,i,o,a):void 0!==e&&(r=t.cache.tilemap.get(e))&&(h=u(e,r.format,r.data,i,o,a)),null===h&&(h=new c({tileWidth:i,tileHeight:o,width:s,height:n})),new d(t,h)}},23029:(t,e,i)=>{var o=i(83419),s=i(31401),n=i(91907),r=i(62644),a=i(93232),i=new o({Mixins:[s.AlphaSingle,s.Flip,s.Visible],initialize:function(t,e,i,o,s,n,r,a){this.layer=t,this.index=e,this.x=i,this.y=o,this.width=s,this.height=n,this.right,this.bottom,this.baseWidth=void 0!==r?r:s,this.baseHeight=void 0!==a?a:n,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,(this.collisionCallbackContext=this).tint=16777215,this.tintFill=!1,this.physics={}},containsPoint:function(t,e){return!(t<this.pixelX||e<this.pixelY||t>this.right||e>this.bottom)},copy:function(t){return this.index=t.index,this.alpha=t.alpha,this.properties=r(t.properties),this.visible=t.visible,this.setFlip(t.flipX,t.flipY),this.tint=t.tint,this.rotation=t.rotation,this.collideUp=t.collideUp,this.collideDown=t.collideDown,this.collideLeft=t.collideLeft,this.collideRight=t.collideRight,this.collisionCallback=t.collisionCallback,this.collisionCallbackContext=t.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(t){var e=this.tilemapLayer;return e?e.tileToWorldXY(this.x,this.y,void 0,t).x:this.x*this.baseWidth},getRight:function(t){var e=this.tilemapLayer;return e?this.getLeft(t)+this.width*e.scaleX:this.getLeft(t)+this.width},getTop:function(t){var e=this.tilemapLayer;return e?e.tileToWorldXY(this.x,this.y,void 0,t).y:this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(t){var e=this.tilemapLayer;return e?this.getTop(t)+this.height*e.scaleY:this.getTop(t)+this.height},getBounds:function(t,e){return(e=void 0===e?new a:e).x=this.getLeft(t),e.y=this.getTop(t),e.width=this.getRight(t)-e.x,e.height=this.getBottom(t)-e.y,e},getCenterX:function(t){return(this.getLeft(t)+this.getRight(t))/2},getCenterY:function(t){return(this.getTop(t)+this.getBottom(t))/2},intersects:function(t,e,i,o){return!(i<=this.pixelX||o<=this.pixelY||t>=this.right||e>=this.bottom)},isInteresting:function(t,e){return t&&e?this.canCollide||this.hasInterestingFace:t?this.collides:!!e&&this.hasInterestingFace},resetCollision:function(t){return void 0===t&&(t=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,t&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(t,e,i,o,s){return void 0===e&&(e=t),void 0===i&&(i=t),void 0===o&&(o=t),void 0===s&&(s=!0),this.collideLeft=t,this.collideRight=e,this.collideUp=i,this.collideDown=o,this.faceLeft=t,this.faceRight=e,this.faceTop=i,this.faceBottom=o,s&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},setCollisionCallback:function(t,e){return null===t?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=t,this.collisionCallbackContext=e),this},setSize:function(t,e,i,o){return void 0!==t&&(this.width=t),void 0!==e&&(this.height=e),void 0!==i&&(this.baseWidth=i),void 0!==o&&(this.baseHeight=o),this.updatePixelXY(),this},updatePixelXY:function(){var t,e,i,o=this.layer.orientation;return o===n.ORTHOGONAL?(this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight):o===n.ISOMETRIC?(this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5):o===n.STAGGERED?(this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2)):o===n.HEXAGONAL&&(o=this.layer.staggerAxis,e=this.layer.staggerIndex,i=this.layer.hexSideLength,"y"===o?(t=(this.baseHeight-i)/2+i,this.pixelX="odd"===e?this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*t):"x"===o&&(t=(this.baseWidth-i)/2+i,this.pixelX=this.x*t,this.pixelY="odd"===e?this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.y*this.baseHeight-this.x%2*(this.baseHeight/2))),this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||void 0!==this.collisionCallback}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var t=this.layer.tilemapLayer;if(t){t=t.gidMap[this.index];if(t)return t}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var t=this.tilemapLayer;return t?t.tilemap:null}}});t.exports=i},49075:(t,e,i)=>{var l=i(84101),o=i(83419),A=i(39506),c=i(80341),C=i(95540),d=i(14977),T=i(27462),P=i(91907),B=i(36305),s=i(19133),E=i(68287),p=i(23029),h=i(81086),f=i(20442),u=i(33629),i=new o({initialize:function(t,e){this.scene=t,this.tileWidth=e.tileWidth,this.tileHeight=e.tileHeight,this.width=e.width,this.height=e.height,this.orientation=e.orientation,this.renderOrder=e.renderOrder,this.format=e.format,this.version=e.version,this.properties=e.properties,this.widthInPixels=e.widthInPixels,this.heightInPixels=e.heightInPixels,this.imageCollections=e.imageCollections,this.images=e.images,this.layers=e.layers,this.tiles=e.tiles,this.tilesets=e.tilesets,this.objects=e.objects,this.currentLayerIndex=0,this.hexSideLength=e.hexSideLength;t=this.orientation;this._convert={WorldToTileXY:h.GetWorldToTileXYFunction(t),WorldToTileX:h.GetWorldToTileXFunction(t),WorldToTileY:h.GetWorldToTileYFunction(t),TileToWorldXY:h.GetTileToWorldXYFunction(t),TileToWorldX:h.GetTileToWorldXFunction(t),TileToWorldY:h.GetTileToWorldYFunction(t),GetTileCorners:h.GetTileCornersFunction(t)}},setRenderOrder:function(t){var e=["right-down","left-down","right-up","left-up"];return"number"==typeof t&&(t=e[t]),-1<e.indexOf(t)&&(this.renderOrder=t),this},addTilesetImage:function(t,e,i,o,s,n,r,a){var h;return void 0===t||!(h=this.scene.sys.textures).exists(e=null==e?t:e)||(h=h.get(e),null===(e=this.getTilesetIndex(t))&&this.format===c.TILED_JSON)?null:((e=this.tilesets[e])?(e.setTileSize(i,o),e.setSpacing(s,n),e.setImage(h)):(void 0===i&&(i=this.tileWidth),void 0===o&&(o=this.tileHeight),(e=new u(t,r=void 0===r?0:r,i,o,s=void 0===s?0:s,n=void 0===n?0:n,void 0,void 0,a=void 0===a?{x:0,y:0}:a)).setImage(h),this.tilesets.push(e),this.tiles=l(this)),e)},copy:function(t,e,i,o,s,n,r,a){return null!==(a=this.getLayer(a))?(h.Copy(t,e,i,o,s,n,r,a),this):null},createBlankLayer:function(t,e,i,o,s,n,r,a){if(void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=this.width),void 0===n&&(n=this.height),void 0===r&&(r=this.tileWidth),void 0===a&&(a=this.tileHeight),null!==this.getLayerIndex(t))return null;for(var h=new d({name:t,tileWidth:r,tileHeight:a,width:s,height:n,orientation:this.orientation}),l=0;l<n;l++){for(var c=[],u=0;u<s;u++)c.push(new p(h,-1,u,l,r,a,this.tileWidth,this.tileHeight));h.data.push(c)}this.layers.push(h),this.currentLayerIndex=this.layers.length-1;t=new f(this.scene,this,this.currentLayerIndex,e,i,o);return t.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(t),t},createLayer:function(t,e,i,o){t=this.getLayerIndex(t);if(null===t)return null;var s=this.layers[t];if(s.tilemapLayer)return null;this.currentLayerIndex=t,void 0===i&&(i=s.x),void 0===o&&(o=s.y);s=new f(this.scene,this,t,e,i,o);return s.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(s),s},createFromObjects:function(t,e,i){void 0===i&&(i=!0);var o=[],t=this.getObjectLayer(t);if(t){var s=new T(i?this.tilesets:void 0);Array.isArray(e)||(e=[e]);for(var n=t.objects,r=0;r<e.length;r++){var a=e[r],h=C(a,"id",null),l=C(a,"gid",null),c=C(a,"name",null),u=C(a,"type",null);s.enabled=!C(a,"ignoreTileset",null);for(var d=[],p=0;p<n.length;p++)_=n[p],(null===h&&null===l&&null===c&&null===u||null!==h&&_.id===h||null!==l&&_.gid===l||null!==c&&_.name===c||null!==u&&s.getTypeIncludingTile(_)===u)&&d.push(_);for(var f=C(a,"classType",E),b=C(a,"scene",this.scene),y=C(a,"container",null),m=C(a,"key",null),x=C(a,"frame",null),g=0;g<d.length;g++){var v,_=d[g],w=new f(b),S=(w.setName(_.name),w.setPosition(_.x,_.y),s.setTextureAndFrame(w,m,x,_),_.width&&(w.displayWidth=_.width),_.height&&(w.displayHeight=_.height),this.orientation===P.ISOMETRIC&&(S=this.tileWidth/this.tileHeight,S={x:w.x-w.y,y:(w.x+w.y)/S},w.x=S.x,w.y=S.y),{x:w.originX*_.width,y:(w.originY-(_.gid?1:0))*_.height});_.rotation&&(v=A(_.rotation),B(S,v),w.rotation=v),w.x+=S.x,w.y+=S.y,void 0===_.flippedHorizontal&&void 0===_.flippedVertical||w.setFlip(_.flippedHorizontal,_.flippedVertical),_.visible||(w.visible=!1),s.setPropertiesFromTiledObject(w,_),y?y.add(w):b.add.existing(w),o.push(w)}}}return o},createFromTiles:function(t,e,i,o,s,n){return null===(n=this.getLayer(n))?null:h.CreateFromTiles(t,e,i,o,s,n)},fill:function(t,e,i,o,s,n,r){return void 0===n&&(n=!0),null===(r=this.getLayer(r))?null:(h.Fill(t,e,i,o,s,n,r),this)},filterObjects:function(t,e,i){if("string"==typeof t)if(!(t=this.getObjectLayer(t)))return null;return t.objects.filter(e,i)},filterTiles:function(t,e,i,o,s,n,r,a){return null===(a=this.getLayer(a))?null:h.FilterTiles(t,e,i,o,s,n,r,a)},findByIndex:function(t,e,i,o){return null===(o=this.getLayer(o))?null:h.FindByIndex(t,e,i,o)},findObject:function(t,e,i){if("string"==typeof t)if(!(t=this.getObjectLayer(t)))return null;return t.objects.find(e,i)||null},findTile:function(t,e,i,o,s,n,r,a){return null===(a=this.getLayer(a))?null:h.FindTile(t,e,i,o,s,n,r,a)},forEachTile:function(t,e,i,o,s,n,r,a){return null===(a=this.getLayer(a))?null:(h.ForEachTile(t,e,i,o,s,n,r,a),this)},getImageIndex:function(t){return this.getIndex(this.images,t)},getImageLayerNames:function(){return this.images&&Array.isArray(this.images)?this.images.map(function(t){return t.name}):[]},getIndex:function(t,e){for(var i=0;i<t.length;i++)if(t[i].name===e)return i;return null},getLayer:function(t){t=this.getLayerIndex(t);return null!==t?this.layers[t]:null},getObjectLayer:function(t){t=this.getIndex(this.objects,t);return null!==t?this.objects[t]:null},getObjectLayerNames:function(){return this.objects&&Array.isArray(this.objects)?this.objects.map(function(t){return t.name}):[]},getLayerIndex:function(t){return void 0===t?this.currentLayerIndex:"string"==typeof t?this.getLayerIndexByName(t):"number"==typeof t&&t<this.layers.length?t:t instanceof f&&t.tilemap===this?t.layerIndex:null},getLayerIndexByName:function(t){return this.getIndex(this.layers,t)},getTileAt:function(t,e,i,o){return null===(o=this.getLayer(o))?null:h.GetTileAt(t,e,i,o)},getTileAtWorldXY:function(t,e,i,o,s){return null===(s=this.getLayer(s))?null:h.GetTileAtWorldXY(t,e,i,o,s)},getTileLayerNames:function(){return this.layers&&Array.isArray(this.layers)?this.layers.map(function(t){return t.name}):[]},getTilesWithin:function(t,e,i,o,s,n){return null===(n=this.getLayer(n))?null:h.GetTilesWithin(t,e,i,o,s,n)},getTilesWithinShape:function(t,e,i,o){return null===(o=this.getLayer(o))?null:h.GetTilesWithinShape(t,e,i,o)},getTilesWithinWorldXY:function(t,e,i,o,s,n,r){return null===(r=this.getLayer(r))?null:h.GetTilesWithinWorldXY(t,e,i,o,s,n,r)},getTileset:function(t){t=this.getIndex(this.tilesets,t);return null!==t?this.tilesets[t]:null},getTilesetIndex:function(t){return this.getIndex(this.tilesets,t)},hasTileAt:function(t,e,i){return null===(i=this.getLayer(i))?null:h.HasTileAt(t,e,i)},hasTileAtWorldXY:function(t,e,i,o){return null===(o=this.getLayer(o))?null:h.HasTileAtWorldXY(t,e,i,o)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(t){this.setLayer(t)}},putTileAt:function(t,e,i,o,s){return void 0===o&&(o=!0),null===(s=this.getLayer(s))?null:h.PutTileAt(t,e,i,o,s)},putTileAtWorldXY:function(t,e,i,o,s,n){return void 0===o&&(o=!0),null===(n=this.getLayer(n))?null:h.PutTileAtWorldXY(t,e,i,o,s,n)},putTilesAt:function(t,e,i,o,s){return void 0===o&&(o=!0),null===(s=this.getLayer(s))?null:(h.PutTilesAt(t,e,i,o,s),this)},randomize:function(t,e,i,o,s,n){return null===(n=this.getLayer(n))?null:(h.Randomize(t,e,i,o,s,n),this)},calculateFacesAt:function(t,e,i){return null===(i=this.getLayer(i))?null:(h.CalculateFacesAt(t,e,i),this)},calculateFacesWithin:function(t,e,i,o,s){return null===(s=this.getLayer(s))?null:(h.CalculateFacesWithin(t,e,i,o,s),this)},removeLayer:function(t){t=this.getLayerIndex(t);if(null===t)return null;s(this.layers,t);for(var e=t;e<this.layers.length;e++)this.layers[e].tilemapLayer&&this.layers[e].tilemapLayer.layerIndex--;return this.currentLayerIndex===t&&(this.currentLayerIndex=0),this},destroyLayer:function(t){var e=this.getLayerIndex(t);return null!==e?((t=this.layers[e]).tilemapLayer.destroy(),s(this.layers,e),this.currentLayerIndex===e&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var t=this.layers,e=0;e<t.length;e++)t[e].tilemapLayer&&t[e].tilemapLayer.destroy(!1);return t.length=0,this.currentLayerIndex=0,this},removeTile:function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=!0);var o=[];Array.isArray(t)||(t=[t]);for(var s=0;s<t.length;s++){var n=t[s];o.push(this.removeTileAt(n.x,n.y,!0,i,n.tilemapLayer)),-1<e&&this.putTileAt(e,n.x,n.y,i,n.tilemapLayer)}return o},removeTileAt:function(t,e,i,o,s){return void 0===i&&(i=!0),void 0===o&&(o=!0),null===(s=this.getLayer(s))?null:h.RemoveTileAt(t,e,i,o,s)},removeTileAtWorldXY:function(t,e,i,o,s,n){return void 0===i&&(i=!0),void 0===o&&(o=!0),null===(n=this.getLayer(n))?null:h.RemoveTileAtWorldXY(t,e,i,o,s,n)},renderDebug:function(t,e,i){return null===(i=this.getLayer(i))?null:(this.orientation===P.ORTHOGONAL&&h.RenderDebug(t,e,i),this)},renderDebugFull:function(t,e){for(var i=this.layers,o=0;o<i.length;o++)h.RenderDebug(t,e,i[o]);return this},replaceByIndex:function(t,e,i,o,s,n,r){return null===(r=this.getLayer(r))?null:(h.ReplaceByIndex(t,e,i,o,s,n,r),this)},setCollision:function(t,e,i,o,s){return void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===s&&(s=!0),null===(o=this.getLayer(o))?null:(h.SetCollision(t,e,i,o,s),this)},setCollisionBetween:function(t,e,i,o,s){return void 0===i&&(i=!0),void 0===o&&(o=!0),null===(s=this.getLayer(s))?null:(h.SetCollisionBetween(t,e,i,o,s),this)},setCollisionByProperty:function(t,e,i,o){return void 0===e&&(e=!0),void 0===i&&(i=!0),null===(o=this.getLayer(o))?null:(h.SetCollisionByProperty(t,e,i,o),this)},setCollisionByExclusion:function(t,e,i,o){return void 0===e&&(e=!0),void 0===i&&(i=!0),null===(o=this.getLayer(o))?null:(h.SetCollisionByExclusion(t,e,i,o),this)},setCollisionFromCollisionGroup:function(t,e,i){return void 0===t&&(t=!0),void 0===e&&(e=!0),null===(i=this.getLayer(i))?null:(h.SetCollisionFromCollisionGroup(t,e,i),this)},setTileIndexCallback:function(t,e,i,o){return null===(o=this.getLayer(o))?null:(h.SetTileIndexCallback(t,e,i,o),this)},setTileLocationCallback:function(t,e,i,o,s,n,r){return null===(r=this.getLayer(r))?null:(h.SetTileLocationCallback(t,e,i,o,s,n,r),this)},setLayer:function(t){t=this.getLayerIndex(t);return null!==t&&(this.currentLayerIndex=t),this},setBaseTileSize:function(t,e){this.tileWidth=t,this.tileHeight=e,this.widthInPixels=this.width*t,this.heightInPixels=this.height*e;for(var i=0;i<this.layers.length;i++){this.layers[i].baseTileWidth=t,this.layers[i].baseTileHeight=e;for(var o=this.layers[i].data,s=this.layers[i].width,n=this.layers[i].height,r=0;r<n;r++)for(var a=0;a<s;a++){var h=o[r][a];null!==h&&h.setSize(void 0,void 0,t,e)}}return this},setLayerTileSize:function(t,e,i){if(null!==(i=this.getLayer(i))){i.tileWidth=t,i.tileHeight=e;for(var o=i.data,s=i.width,n=i.height,r=0;r<n;r++)for(var a=0;a<s;a++){var h=o[r][a];null!==h&&h.setSize(t,e)}}return this},shuffle:function(t,e,i,o,s){return null===(s=this.getLayer(s))?null:(h.Shuffle(t,e,i,o,s),this)},swapByIndex:function(t,e,i,o,s,n,r){return null===(r=this.getLayer(r))?null:(h.SwapByIndex(t,e,i,o,s,n,r),this)},tileToWorldX:function(t,e,i){return null===(i=this.getLayer(i))?null:this._convert.TileToWorldX(t,e,i)},tileToWorldY:function(t,e,i){return null===(i=this.getLayer(i))?null:this._convert.TileToWorldY(t,e,i)},tileToWorldXY:function(t,e,i,o,s){return null===(s=this.getLayer(s))?null:this._convert.TileToWorldXY(t,e,i,o,s)},getTileCorners:function(t,e,i,o){return null===(o=this.getLayer(o))?null:this._convert.GetTileCorners(t,e,i,o)},weightedRandomize:function(t,e,i,o,s,n){return null===(n=this.getLayer(n))?null:(h.WeightedRandomize(e,i,o,s,t,n),this)},worldToTileX:function(t,e,i,o){return null===(o=this.getLayer(o))?null:this._convert.WorldToTileX(t,e,i,o)},worldToTileY:function(t,e,i,o){return null===(o=this.getLayer(o))?null:this._convert.WorldToTileY(t,e,i,o)},worldToTileXY:function(t,e,i,o,s,n){return null===(n=this.getLayer(n))?null:this._convert.WorldToTileXY(t,e,i,o,s,n)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}});t.exports=i},45939:(t,e,i)=>{var o=i(44603),s=i(31989);o.register("tilemap",function(t){t=void 0!==t?t:{};return s(this.scene,t.key,t.tileWidth,t.tileHeight,t.width,t.height,t.data,t.insertNull)})},46029:(t,e,i)=>{var o=i(39429),a=i(31989);o.register("tilemap",function(t,e,i,o,s,n,r){return a(this.scene,t=null===t?void 0:t,e=null===e?void 0:e,i=null===i?void 0:i,o=null===o?void 0:o,s=null===s?void 0:s,n,r)})},20442:(t,e,i)=>{var o=i(83419),s=i(78389),n=i(31401),r=i(95643),a=i(81086),h=i(19218),l=i(26099),i=new o({Extends:r,Mixins:[n.Alpha,n.BlendMode,n.ComputedSize,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.PostPipeline,n.Transform,n.Visible,n.ScrollFactor,s,h],initialize:function(t,e,i,o,s,n){r.call(this,t,"TilemapLayer"),this.isTilemap=!0,this.tilemap=e,this.layerIndex=i,this.layer=e.layers[i],(this.layer.tilemapLayer=this).tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=a.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new l,this.collisionCategory=1,this.collisionMask=1,this.setTilesets(o),this.setAlpha(this.layer.alpha),this.setPosition(s,n),this.setOrigin(0,0),this.setSize(e.tileWidth*this.layer.width,e.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(t){var e=[],i=[],o=this.tilemap;Array.isArray(t)||(t=[t]);for(var s=0;s<t.length;s++){var n=t[s];if(n="string"==typeof n?o.getTileset(n):n){i.push(n);for(var r=n.firstgid,a=0;a<n.total;a++)e[r+a]=n}}this.gidMap=e,this.tileset=i},setRenderOrder:function(t){return 0<=(t="string"==typeof t?["right-down","left-down","right-up","left-up"].indexOf(t):t)&&t<4&&(this._renderOrder=t),this},calculateFacesAt:function(t,e){return a.CalculateFacesAt(t,e,this.layer),this},calculateFacesWithin:function(t,e,i,o){return a.CalculateFacesWithin(t,e,i,o,this.layer),this},createFromTiles:function(t,e,i,o,s){return a.CreateFromTiles(t,e,i,o,s,this.layer)},cull:function(t){return this.cullCallback(this.layer,t,this.culledTiles,this._renderOrder)},copy:function(t,e,i,o,s,n,r){return a.Copy(t,e,i,o,s,n,r,this.layer),this},fill:function(t,e,i,o,s,n){return a.Fill(t,e,i,o,s,n,this.layer),this},filterTiles:function(t,e,i,o,s,n,r){return a.FilterTiles(t,e,i,o,s,n,r,this.layer)},findByIndex:function(t,e,i){return a.FindByIndex(t,e,i,this.layer)},findTile:function(t,e,i,o,s,n,r){return a.FindTile(t,e,i,o,s,n,r,this.layer)},forEachTile:function(t,e,i,o,s,n,r){return a.ForEachTile(t,e,i,o,s,n,r,this.layer),this},setTint:function(e,t,i,o,s,n){return void 0===e&&(e=16777215),this.forEachTile(function(t){t.tint=e,t.tintFill=!1},this,t,i,o,s,n)},setTintFill:function(e,t,i,o,s,n){return void 0===e&&(e=16777215),this.forEachTile(function(t){t.tint=e,t.tintFill=!0},this,t,i,o,s,n)},getTileAt:function(t,e,i){return a.GetTileAt(t,e,i,this.layer)},getTileAtWorldXY:function(t,e,i,o){return a.GetTileAtWorldXY(t,e,i,o,this.layer)},getIsoTileAtWorldXY:function(t,e,i,o,s){var n=this.tempVec;return a.IsometricWorldToTileXY(t,e,!0,n,s,this.layer,i=void 0===i?!0:i),this.getTileAt(n.x,n.y,o)},getTilesWithin:function(t,e,i,o,s){return a.GetTilesWithin(t,e,i,o,s,this.layer)},getTilesWithinShape:function(t,e,i){return a.GetTilesWithinShape(t,e,i,this.layer)},getTilesWithinWorldXY:function(t,e,i,o,s,n){return a.GetTilesWithinWorldXY(t,e,i,o,s,n,this.layer)},hasTileAt:function(t,e){return a.HasTileAt(t,e,this.layer)},hasTileAtWorldXY:function(t,e,i){return a.HasTileAtWorldXY(t,e,i,this.layer)},putTileAt:function(t,e,i,o){return a.PutTileAt(t,e,i,o,this.layer)},putTileAtWorldXY:function(t,e,i,o,s){return a.PutTileAtWorldXY(t,e,i,o,s,this.layer)},putTilesAt:function(t,e,i,o){return a.PutTilesAt(t,e,i,o,this.layer),this},randomize:function(t,e,i,o,s){return a.Randomize(t,e,i,o,s,this.layer),this},removeTileAt:function(t,e,i,o){return a.RemoveTileAt(t,e,i,o,this.layer)},removeTileAtWorldXY:function(t,e,i,o,s){return a.RemoveTileAtWorldXY(t,e,i,o,s,this.layer)},renderDebug:function(t,e){return a.RenderDebug(t,e,this.layer),this},replaceByIndex:function(t,e,i,o,s,n){return a.ReplaceByIndex(t,e,i,o,s,n,this.layer),this},setSkipCull:function(t){return this.skipCull=t=void 0===t?!0:t,this},setCullPadding:function(t,e){return void 0===e&&(e=1),this.cullPaddingX=t=void 0===t?1:t,this.cullPaddingY=e,this},setCollision:function(t,e,i,o){return a.SetCollision(t,e,i,this.layer,o),this},setCollisionBetween:function(t,e,i,o){return a.SetCollisionBetween(t,e,i,o,this.layer),this},setCollisionByProperty:function(t,e,i){return a.SetCollisionByProperty(t,e,i,this.layer),this},setCollisionByExclusion:function(t,e,i){return a.SetCollisionByExclusion(t,e,i,this.layer),this},setCollisionFromCollisionGroup:function(t,e){return a.SetCollisionFromCollisionGroup(t,e,this.layer),this},setTileIndexCallback:function(t,e,i){return a.SetTileIndexCallback(t,e,i,this.layer),this},setTileLocationCallback:function(t,e,i,o,s,n){return a.SetTileLocationCallback(t,e,i,o,s,n,this.layer),this},shuffle:function(t,e,i,o){return a.Shuffle(t,e,i,o,this.layer),this},swapByIndex:function(t,e,i,o,s,n){return a.SwapByIndex(t,e,i,o,s,n,this.layer),this},tileToWorldX:function(t,e){return this.tilemap.tileToWorldX(t,e,this)},tileToWorldY:function(t,e){return this.tilemap.tileToWorldY(t,e,this)},tileToWorldXY:function(t,e,i,o){return this.tilemap.tileToWorldXY(t,e,i,o,this)},getTileCorners:function(t,e,i){return this.tilemap.getTileCorners(t,e,i,this)},weightedRandomize:function(t,e,i,o,s){return a.WeightedRandomize(e,i,o,s,t,this.layer),this},worldToTileX:function(t,e,i){return this.tilemap.worldToTileX(t,e,i,this)},worldToTileY:function(t,e,i){return this.tilemap.worldToTileY(t,e,i,this)},worldToTileXY:function(t,e,i,o,s){return this.tilemap.worldToTileXY(t,e,i,o,s,this)},destroy:function(t){void 0===t&&(t=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),t&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],r.prototype.destroy.call(this))}});t.exports=i},16153:(t,e,i)=>{var i=i(61340),_=new i,w=new i,S=new i;t.exports=function(t,e,i,o){var s=e.cull(i),n=s.length,r=i.alpha*e.alpha;if(!(0===n||r<=0)){var a=_,h=w,l=S,c=(h.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),a.copyFrom(i.matrix),t.currentContext),u=e.gidMap;c.save(),(o?(a.multiplyWithOffset(o,-i.scrollX*e.scrollFactorX,-i.scrollY*e.scrollFactorY),h.e=e.x,h.f=e.y,a.multiply(h,l),l):(h.e-=i.scrollX*e.scrollFactorX,h.f-=i.scrollY*e.scrollFactorY,h)).copyToContext(c),(!t.antialias||1<e.scaleX||1<e.scaleY)&&(c.imageSmoothingEnabled=!1);for(var d=0;d<n;d++){var p,f,b,y,m,x,g=s[d],v=u[g.index];v&&(p=v.image.getSourceImage(),f=v.getTileTextureCoordinates(g.index),b=v.tileWidth,y=v.tileHeight,null!==f)&&0!==b&&0!==y&&(m=.5*b,x=.5*y,f.x+=v.tileOffset.x,f.y+=v.tileOffset.y,c.save(),c.translate(g.pixelX+m,g.pixelY+x),0!==g.rotation&&c.rotate(g.rotation),(g.flipX||g.flipY)&&c.scale(g.flipX?-1:1,g.flipY?-1:1),c.globalAlpha=r*g.alpha,c.drawImage(p,f.x,f.y,b,y,-m,-x,b,y),c.restore())}c.restore()}}},19218:(t,e,i)=>{i(29747);var o=i(99558),i=i(16153);t.exports={renderWebGL:o,renderCanvas:i}},99558:(t,e,i)=>{var M=i(70554);t.exports=function(t,e,i){var o=e.cull(i),s=o.length,n=i.alpha*e.alpha;if(!(0===s||n<=0)){var r=e.gidMap,a=t.pipelines.set(e.pipeline,e),h=M.getTintAppendFloatAlpha,l=e.scrollFactorX,c=e.scrollFactorY,u=e.x,d=e.y,p=e.scaleX,f=e.scaleY;t.pipelines.preBatch(e);for(var b=0;b<s;b++){var y,m,x,g,v,_,w,S,A,C,T,P,B=o[b],E=r[B.index];E&&(C=E.getTileTextureCoordinates(B.index),y=E.tileWidth,m=E.tileHeight,C)&&0!==y&&0!==m&&(x=.5*y,g=.5*m,v=E.glTexture,_=a.setTexture2D(v,e),w=y,S=m,A=C.x,C=C.y,T=E.tileOffset.x,E=E.tileOffset.y,P=h(B.tint,n*B.alpha),a.batchTexture(e,v,v.width,v.height,u+B.pixelX*p+(x*p-T),d+B.pixelY*f+(g*f-E),y,m,p,f,B.rotation,B.flipX,B.flipY,l,c,x,g,A,C,w,S,P,P,P,P,B.tintFill,0,0,i,null,!0,_,!0))}t.pipelines.postBatch(e)}}},33629:(t,e,i)=>{var o=i(83419),l=i(26099),i=new o({initialize:function(t,e,i,o,s,n,r,a,h){(void 0===i||i<=0)&&(i=32),(void 0===o||o<=0)&&(o=32),void 0===s&&(s=0),void 0===n&&(n=0),void 0===r&&(r={}),void 0===a&&(a={}),this.name=t,this.firstgid=e,this.tileWidth=i,this.tileHeight=o,this.tileMargin=s,this.tileSpacing=n,this.tileProperties=r,this.tileData=a,this.tileOffset=new l,void 0!==h&&this.tileOffset.set(h.x,h.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(t){return this.containsTileIndex(t)?this.tileProperties[t-this.firstgid]:null},getTileData:function(t){return this.containsTileIndex(t)?this.tileData[t-this.firstgid]:null},getTileCollisionGroup:function(t){t=this.getTileData(t);return t&&t.objectgroup?t.objectgroup:null},containsTileIndex:function(t){return t>=this.firstgid&&t<this.firstgid+this.total},getTileTextureCoordinates:function(t){return this.containsTileIndex(t)?this.texCoordinates[t-this.firstgid]:null},setImage:function(t){var e=(this.image=t).get(),t=t.getFrameBounds();return this.glTexture=e.source.glTexture,e.width>t.width||e.height>t.height?this.updateTileData(e.width,e.height):this.updateTileData(t.width,t.height,t.x,t.y),this},setTileSize:function(t,e){return void 0!==t&&(this.tileWidth=t),void 0!==e&&(this.tileHeight=e),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(t,e){return void 0!==t&&(this.tileMargin=t),void 0!==e&&(this.tileSpacing=e),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(t,e,i,o){void 0===i&&(i=0),void 0===o&&(o=0);e=(e-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),t=(t-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing),e=Math.floor(e),t=Math.floor(t);this.rows=e,this.columns=t,this.total=e*t,this.texCoordinates.length=0;for(var s=this.tileMargin+i,n=this.tileMargin+o,r=0;r<this.rows;r++){for(var a=0;a<this.columns;a++)this.texCoordinates.push({x:s,y:n}),s+=this.tileWidth+this.tileSpacing;s=this.tileMargin+i,n+=this.tileHeight+this.tileSpacing}return this}});t.exports=i},72023:(t,e,i)=>{var a=i(7423);t.exports=function(t,e,i){var o=a(t,e,!0,i),s=a(t,e-1,!0,i),n=a(t,e+1,!0,i),r=a(t-1,e,!0,i),t=a(t+1,e,!0,i),e=o&&o.collides;return e&&(o.faceTop=!0,o.faceBottom=!0,o.faceLeft=!0,o.faceRight=!0),s&&s.collides&&(e&&(o.faceTop=!1),s.faceBottom=!e),n&&n.collides&&(e&&(o.faceBottom=!1),n.faceTop=!e),r&&r.collides&&(e&&(o.faceLeft=!1),r.faceRight=!e),t&&t.collides&&(e&&(o.faceRight=!1),t.faceLeft=!e),o&&!o.collides&&o.resetFaces(),o}},42573:(t,e,i)=>{var d=i(7423),p=i(7386);t.exports=function(t,e,i,o,s){for(var n,r,a,h,l=p(t,e,i,o,null,s),c=0;c<l.length;c++){var u=l[c];u&&(u.collides?(n=d(u.x,u.y-1,!0,s),r=d(u.x,u.y+1,!0,s),a=d(u.x-1,u.y,!0,s),h=d(u.x+1,u.y,!0,s),u.faceTop=!n||!n.collides,u.faceBottom=!r||!r.collides,u.faceLeft=!a||!a.collides,u.faceRight=!h||!h.collides):u.resetFaces())}}},33528:(t,e,i)=>{var a=new(i(26099));t.exports=function(t,e,i,o){var s=i.tilemapLayer,n=s.cullPaddingX,r=s.cullPaddingY,t=s.tilemap.tileToWorldXY(t,e,a,o,s);return t.x>o.worldView.x+s.scaleX*i.tileWidth*(-n-.5)&&t.x<o.worldView.right+s.scaleX*i.tileWidth*(n-.5)&&t.y>o.worldView.y+s.scaleY*i.tileHeight*(-r-1)&&t.y<o.worldView.bottom+s.scaleY*i.tileHeight*(r-.5)}},1785:(t,e,i)=>{var y=i(42573),m=i(7386),x=i(62991),g=i(23029);t.exports=function(t,e,i,o,s,n,r,a){void 0===r&&(r=!0);var h=m(t,e,i,o,null,a),l=[];h.forEach(function(t){var e=new g(t.layer,t.index,t.x,t.y,t.width,t.height,t.baseWidth,t.baseHeight);e.copy(t),l.push(e)});for(var c=s-t,u=n-e,d=0;d<l.length;d++){var p=l[d],f=p.x+c,b=p.y+u;x(f,b,a)&&a.data[b][f]&&(p.x=f,p.y=b,p.updatePixelXY(),a.data[b][f]=p)}r&&y(s-1,n-1,i+2,o+2,a),h.length=0,l.length=0}},78419:(t,e,i)=>{var v=i(62644),_=i(7386),w=i(27987);t.exports=function(t,e,i,o,s,n){i=i||{},Array.isArray(t)||(t=[t]);var r=n.tilemapLayer;o=o||r.scene,s=s||o.cameras.main;for(var a=n.width,h=n.height,l=_(0,0,a,h,null,n),c=[],u=0;u<l.length;u++){var d=l[u],p=v(i);if(-1!==t.indexOf(d.index)){for(var f=r.tileToWorldXY(d.x,d.y,void 0,s,n),b=(p.x=f.x,p.y=f.y,g=x=void 0,p),y=d,m=["rotation","flipX","flipY","alpha","visible","tint"],x=0;x<m.length;x++){var g=m[x];b.hasOwnProperty(g)||(b[g]=y[g])}p.hasOwnProperty("origin")||(p.x+=.5*d.width,p.y+=.5*d.height),p.hasOwnProperty("useSpriteSheet")&&(p.key=d.tileset.image,p.frame=d.index-1),c.push(o.make.sprite(p))}}if(Array.isArray(e))for(u=0;u<t.length;u++)w(t[u],e[u],0,0,a,h,n);else if(null!==e)for(u=0;u<t.length;u++)w(t[u],e,0,0,a,h,n);return c}},19545:(t,e,i)=>{var o=i(87841),r=i(63448),a=i(56583),h=new o;t.exports=function(t,e){var i=t.tilemapLayer.tilemap,t=t.tilemapLayer,o=Math.floor(i.tileWidth*t.scaleX),i=Math.floor(i.tileHeight*t.scaleY),s=a(e.worldView.x-t.x,o,0,!0)-t.cullPaddingX,o=r(e.worldView.right-t.x,o,0,!0)+t.cullPaddingX,n=a(e.worldView.y-t.y,i,0,!0)-t.cullPaddingY,e=r(e.worldView.bottom-t.y,i,0,!0)+t.cullPaddingY;return h.setTo(s,n,o-s,e-n)}},30003:(t,e,i)=>{var n=i(19545),r=i(32483);t.exports=function(t,e,i,o){void 0===o&&(o=0),(i=void 0===i?[]:i).length=0;var s=t.tilemapLayer,e=n(t,e);return!s.skipCull&&1===s.scrollFactorX&&1===s.scrollFactorY||(e.left=0,e.right=t.width,e.top=0,e.bottom=t.height),r(t,e,o,i),i}},35137:(t,e,i)=>{var c=i(7386),u=i(42573),d=i(20576);t.exports=function(t,e,i,o,s,n,r){for(var a=-1!==r.collideIndexes.indexOf(t),h=c(e,i,o,s,null,r),l=0;l<h.length;l++)h[l].index=t,d(h[l],a);n&&u(e-1,i-1,o+2,s+2,r)}},40253:(t,e,i)=>{var h=i(7386);t.exports=function(t,e,i,o,s,n,r,a){return h(i,o,s,n,r,a).filter(t,e)}},52692:t=>{t.exports=function(t,e,i,o){void 0===e&&(e=0);var s,n,r,a=0;if(i=void 0===i?!1:i){for(n=o.height-1;0<=n;n--)for(s=o.width-1;0<=s;s--)if((r=o.data[n][s])&&r.index===t){if(a===e)return r;a+=1}}else for(n=0;n<o.height;n++)for(s=0;s<o.width;s++)if((r=o.data[n][s])&&r.index===t){if(a===e)return r;a+=1}return null}},66151:(t,e,i)=>{var h=i(7386);t.exports=function(t,e,i,o,s,n,r,a){return h(i,o,s,n,r,a).find(t,e)||null}},97560:(t,e,i)=>{var h=i(7386);t.exports=function(t,e,i,o,s,n,r,a){h(i,o,s,n,r,a).forEach(t,e)}},43305:(t,e,i)=>{var o=i(91907),s=i(30003),n=i(9474),r=i(14018),a=i(29747),h=i(54503);t.exports=function(t){return t===o.ORTHOGONAL?s:t===o.HEXAGONAL?n:t===o.STAGGERED?h:t===o.ISOMETRIC?r:a}},7423:(t,e,i)=>{var s=i(62991);t.exports=function(t,e,i,o){return void 0===i&&(i=!1),s(t,e,o)&&(o=o.data[e][t]||null)&&(-1!==o.index||i)?o:null}},60540:(t,e,i)=>{var n=i(7423),r=new(i(26099));t.exports=function(t,e,i,o,s){return s.tilemapLayer.worldToTileXY(t,e,!0,r,o),n(r.x,r.y,i,s)}},55826:(t,e,i)=>{var h=i(26099);t.exports=function(t,e,i,o){var s=o.baseTileWidth,n=o.baseTileHeight,o=o.tilemapLayer,r=0,a=0,i=(o&&(i=i||o.scene.cameras.main,r=o.x+i.scrollX*(1-o.scrollFactorX),a=o.y+i.scrollY*(1-o.scrollFactorY),s*=o.scaleX,n*=o.scaleY),r+t*s),o=a+e*n;return[new h(i,o),new h(i+s,o),new h(i+s,o+n),new h(i,o+n)]}},11758:(t,e,i)=>{var o=i(91907),s=i(27229),n=i(29747),r=i(55826);t.exports=function(t){return t===o.ORTHOGONAL?r:t===o.ISOMETRIC?n:t===o.HEXAGONAL?s:(o.STAGGERED,n)}},39167:(t,e,i)=>{var o=i(91907),s=i(29747),n=i(97281);t.exports=function(t){return t===o.ORTHOGONAL?n:s}},62e3:(t,e,i)=>{var o=i(91907),s=i(19951),n=i(14127),r=i(29747),a=i(97202),h=i(70326);t.exports=function(t){return t===o.ORTHOGONAL?h:t===o.ISOMETRIC?n:t===o.HEXAGONAL?s:t===o.STAGGERED?a:r}},5984:(t,e,i)=>{var o=i(91907),s=i(29747),n=i(28054),r=i(29650);t.exports=function(t){return t===o.ORTHOGONAL?r:t===o.STAGGERED?n:s}},7386:(t,e,i)=>{var p=i(95540);t.exports=function(t,e,i,o,s,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=n.width),void 0===o&&(o=n.height);var r=p(s=s||{},"isNotEmpty",!1),a=p(s,"isColliding",!1),h=p(s,"hasInterestingFace",!1);t<0&&(i+=t,t=0),e<0&&(o+=e,e=0),t+i>n.width&&(i=Math.max(n.width-t,0)),e+o>n.height&&(o=Math.max(n.height-e,0));for(var l=[],c=e;c<e+o;c++)for(var u=t;u<t+i;u++){var d=n.data[c][u];null===d||r&&-1===d.index||a&&!d.collides||h&&!d.hasInterestingFace||l.push(d)}return l}},91141:(t,e,i)=>{function f(t,e){return m.RectangleToTriangle(e,t)}var b=i(55738),y=i(7386),m=i(91865),x=i(29747),i=i(26099),g=new i,v=new i,_=new i;t.exports=function(t,e,i,o){if(void 0===t)return[];var s=x,n=(t instanceof b.Circle?s=m.CircleToRectangle:t instanceof b.Rectangle?s=m.RectangleToRectangle:t instanceof b.Triangle?s=f:t instanceof b.Line&&(s=m.LineToRectangle),o.tilemapLayer.worldToTileXY(t.left,t.top,!0,v,i),v.x),r=v.y,a=(o.tilemapLayer.worldToTileXY(t.right,t.bottom,!1,_,i),Math.ceil(_.x)),h=Math.ceil(_.y),a=Math.max(a-n,1),h=Math.max(h-r,1),l=y(n,r,a,h,e,o),n=o.tileWidth,r=o.tileHeight;o.tilemapLayer&&(n*=o.tilemapLayer.scaleX,r*=o.tilemapLayer.scaleY);for(var c=[],u=new b.Rectangle(0,0,n,r),d=0;d<l.length;d++){var p=l[d];o.tilemapLayer.tileToWorldXY(p.x,p.y,g,i),u.x=g.x,u.y=g.y,s(t,u)&&c.push(p)}return c}},96523:(t,e,i)=>{var c=i(7386),i=i(26099),u=new i,d=new i;t.exports=function(t,e,i,o,s,n,r){var a=r.tilemapLayer.tilemap._convert.WorldToTileXY,h=(a(t,e,!0,u,n,r),u.x),l=u.y,a=(a(t+i,e+o,!1,d,n,r),Math.ceil(d.x)),t=Math.ceil(d.y);return c(h,l,a-h,t-l,s,r)}},96113:(t,e,i)=>{var o=i(91907),s=i(20242),n=i(10095);t.exports=function(t){return t===o.ORTHOGONAL?n:s}},16926:(t,e,i)=>{var o=i(91907),s=i(86625),n=i(96897),r=i(29747),a=i(15108),h=i(85896);t.exports=function(t){return t===o.ORTHOGONAL?h:t===o.ISOMETRIC?n:t===o.HEXAGONAL?s:t===o.STAGGERED?a:r}},55762:(t,e,i)=>{var o=i(91907),s=i(20242),n=i(51900),r=i(63288);t.exports=function(t){return t===o.ORTHOGONAL?r:t===o.STAGGERED?n:s}},45091:(t,e,i)=>{var o=i(62991);t.exports=function(t,e,i){return!!o(t,e,i)&&null!==(i=i.data[e][t])&&-1<i.index}},24152:(t,e,i)=>{var s=i(45091),n=new(i(26099));t.exports=function(t,e,i,o){o.tilemapLayer.worldToTileXY(t,e,!0,n,i);t=n.x,e=n.y;return s(t,e,o)}},90454:(t,e,i)=>{var l=i(63448),c=i(56583);t.exports=function(t,e){var i,o,s,n=t.tilemapLayer.tilemap,r=t.tilemapLayer,a=Math.floor(n.tileWidth*r.scaleX),n=Math.floor(n.tileHeight*r.scaleY),h=t.hexSideLength;return a="y"===t.staggerAxis?(t=(n-h)/2+h,i=c(e.worldView.x-r.x,a,0,!0)-r.cullPaddingX,o=l(e.worldView.right-r.x,a,0,!0)+r.cullPaddingX,s=c(e.worldView.y-r.y,t,0,!0)-r.cullPaddingY,l(e.worldView.bottom-r.y,t,0,!0)+r.cullPaddingY):(i=c(e.worldView.x-r.x,t=(a-h)/2+h,0,!0)-r.cullPaddingX,o=l(e.worldView.right-r.x,t,0,!0)+r.cullPaddingX,s=c(e.worldView.y-r.y,n,0,!0)-r.cullPaddingY,l(e.worldView.bottom-r.y,n,0,!0)+r.cullPaddingY),{left:i,right:o,top:s,bottom:a}}},9474:(t,e,i)=>{var n=i(90454),r=i(32483);t.exports=function(t,e,i,o){void 0===o&&(o=0),(i=void 0===i?[]:i).length=0;var s=t.tilemapLayer,e=n(t,e);return s.skipCull&&1===s.scrollFactorX&&1===s.scrollFactorY&&(e.left=0,e.right=t.width,e.top=0,e.bottom=t.height),r(t,e,o,i),i}},27229:(t,e,i)=>{var p=i(19951),f=i(26099),b=new f;t.exports=function(t,e,i,o){var s=o.baseTileWidth,n=o.baseTileHeight,r=o.tilemapLayer;r&&(s*=r.scaleX,n*=r.scaleY);for(var a,h=p(t,e,b,i,o),l=[],r=.5773502691896257,c="y"===o.staggerAxis?(a=r*s,n/2):(a=s/2,r*n),u=0;u<6;u++){var d=2*Math.PI*(.5-u)/6;l.push(new f(h.x+a*Math.cos(d),h.y+c*Math.sin(d)))}return l}},19951:(t,e,i)=>{var d=i(26099);t.exports=function(t,e,i,o,s){i=i||new d;var n=s.baseTileWidth,r=s.baseTileHeight,a=s.tilemapLayer,h=0,l=0;a&&(o=o||a.scene.cameras.main,h=a.x+o.scrollX*(1-a.scrollFactorX),l=a.y+o.scrollY*(1-a.scrollFactorY),n*=a.scaleX,r*=a.scaleY);var c,u,o=n/2,a=r/2;return"y"===s.staggerAxis?(c=h+n*t+n,u=l+1.5*e*a+a,e%2==0&&("odd"===this.staggerIndex?c-=o:c+=o)):"x"===this.staggerAxis&&"odd"===this.staggerIndex&&(c=h+1.5*t*o+o,u=l+r*t+r,t%2==0)&&("odd"===this.staggerIndex?u-=a:u+=a),i.set(c,u)}},86625:(t,e,i)=>{var b=i(26099);t.exports=function(t,e,i,o,s,n){o=o||new b;var r=n.baseTileWidth,a=n.baseTileHeight,h=n.tilemapLayer;h&&(s=s||h.scene.cameras.main,t-=h.x+s.scrollX*(1-h.scrollFactorX),e-=h.y+s.scrollY*(1-h.scrollFactorY),r*=h.scaleX,a*=h.scaleY);var l,c,s=.5773502691896257,h=-.3333333333333333,u=.6666666666666666,d=r/2,p=a/2,r="y"===n.staggerAxis?(c=s*(f=(t-d)/(s*r))+h*(l=(e-p)/p),0*f+u*l):(c=h*(f=(t-d)/d)+s*(l=(e-p)/(s*a)),u*f+0*l),h=-c-r,t=Math.round(c),d=Math.round(r),e=Math.round(h),p=Math.abs(t-c),s=Math.abs(d-r),a=Math.abs(e-h),u=(s<p&&a<p?t=-d-e:a<s&&(d=-t-e),d),f="odd"===n.staggerIndex?u%2==0?d/2+t:d/2+t-.5:u%2==0?d/2+t:d/2+t+.5;return o.set(f,u)}},62991:t=>{t.exports=function(t,e,i){return 0<=t&&t<i.width&&0<=e&&e<i.height}},14018:(t,e,i)=>{var f=i(33528);t.exports=function(t,e,i,o){void 0===o&&(o=0),(i=void 0===i?[]:i).length=0;var s,n,r,a=t.tilemapLayer,h=t.data,l=t.width,c=t.height,u=a.skipCull,d=l,p=c;if(0===o)for(n=0;n<p;n++)for(s=0;s<d;s++)(r=h[n][s])&&-1!==r.index&&r.visible&&0!==r.alpha&&(u||f(s,n,t,e))&&i.push(r);else if(1===o)for(n=0;n<p;n++)for(s=d;0<=s;s--)(r=h[n][s])&&-1!==r.index&&r.visible&&0!==r.alpha&&(u||f(s,n,t,e))&&i.push(r);else if(2===o)for(n=p;0<=n;n--)for(s=0;s<d;s++)(r=h[n][s])&&-1!==r.index&&r.visible&&0!==r.alpha&&(u||f(s,n,t,e))&&i.push(r);else if(3===o)for(n=p;0<=n;n--)for(s=d;0<=s;s--)(r=h[n][s])&&-1!==r.index&&r.visible&&0!==r.alpha&&(u||f(s,n,t,e))&&i.push(r);return a.tilesDrawn=i.length,a.tilesTotal=l*c,i}},14127:(t,e,i)=>{var l=i(26099);t.exports=function(t,e,i,o,s){i=i||new l;var n=s.baseTileWidth,r=s.baseTileHeight,s=s.tilemapLayer,a=0,h=0;return s&&(o=o||s.scene.cameras.main,a=s.x+o.scrollX*(1-s.scrollFactorX),n*=s.scaleX,h=s.y+o.scrollY*(1-s.scrollFactorY),r*=s.scaleY),i.set(a+n/2*(t-e),h+(t+e)*(r/2))}},96897:(t,e,i)=>{var l=i(26099);t.exports=function(t,e,i,o,s,n,r){o=o||new l;var a=n.baseTileWidth,h=n.baseTileHeight,n=n.tilemapLayer,s=(n&&(s=s||n.scene.cameras.main,e-=n.y+s.scrollY*(1-n.scrollFactorY),h*=n.scaleY,t-=n.x+s.scrollX*(1-n.scrollFactorX),a*=n.scaleX),a/2),n=h/2,a=(r||(e-=h),.5*((t-=s)/s+e/n)),r=.5*(-t/s+e/n);return i&&(a=Math.floor(a),r=Math.floor(r)),o.set(a,r)}},71558:(t,e,i)=>{var l=i(23029),c=i(62991),u=i(72023),d=i(20576);t.exports=function(t,e,i,o,s){var n,r,a,h;return void 0===o&&(o=!0),c(e,i,s)?(n=(n=s.data[i][e])&&n.collides,t instanceof l?(null===s.data[i][e]&&(s.data[i][e]=new l(s,t.index,e,i,s.tileWidth,s.tileHeight)),s.data[i][e].copy(t)):(h=t,null===s.data[i][e]?s.data[i][e]=new l(s,h,e,i,s.tileWidth,s.tileHeight):s.data[i][e].index=h),r=s.data[i][e],a=-1!==s.collideIndexes.indexOf(r.index),-1===(h=t instanceof l?t.index:t)?(r.width=s.tileWidth,r.height=s.tileHeight):(h=(t=s.tilemapLayer.tilemap).tiles[h][2],t=t.tilesets[h],r.width=t.tileWidth,r.height=t.tileHeight),d(r,a),o&&n!==r.collides&&u(e,i,s),r):null}},26303:(t,e,i)=>{var r=i(71558),a=new(i(26099));t.exports=function(t,e,i,o,s,n){return n.tilemapLayer.worldToTileXY(e,i,!0,a,s,n),r(t,a.x,a.y,o,n)}},14051:(t,e,i)=>{var c=i(42573),u=i(71558);t.exports=function(t,e,i,o,s){if(void 0===o&&(o=!0),!Array.isArray(t))return null;for(var n=(t=Array.isArray(t[0])?t:[t]).length,r=t[0].length,a=0;a<n;a++)for(var h=0;h<r;h++){var l=t[a][h];u(l,e+h,i+a,!1,s)}o&&c(e-1,i-1,r+2,n+2,s)}},77389:(t,e,i)=>{var h=i(7386),l=i(26546);t.exports=function(t,e,i,o,s,n){var r,a=h(t,e,i,o,{},n);if(!s)for(s=[],r=0;r<a.length;r++)-1===s.indexOf(a[r].index)&&s.push(a[r].index);for(r=0;r<a.length;r++)a[r].index=l(s)}},63557:(t,e,i)=>{var r=i(23029),a=i(62991),h=i(72023);t.exports=function(t,e,i,o,s){var n;return void 0===i&&(i=!0),void 0===o&&(o=!0),a(t,e,s)&&(n=s.data[e][t])?(s.data[e][t]=i?null:new r(s,-1,t,e,s.tileWidth,s.tileHeight),o&&n&&n.collides&&h(t,e,s),n):null}},94178:(t,e,i)=>{var r=i(63557),a=new(i(26099));t.exports=function(t,e,i,o,s,n){return n.tilemapLayer.worldToTileXY(t,e,!0,a,s,n),r(a.x,a.y,i,o,n)}},15533:(t,e,i)=>{var f=i(7386),i=i(3956),b=new i(105,210,231,150),y=new i(243,134,48,200),m=new i(40,39,37,150);t.exports=function(t,e,i){var o=void 0!==(e=void 0===e?{}:e).tileColor?e.tileColor:b,s=void 0!==e.collidingTileColor?e.collidingTileColor:y,n=void 0!==e.faceColor?e.faceColor:m,r=f(0,0,i.width,i.height,null,i);t.translateCanvas(i.tilemapLayer.x,i.tilemapLayer.y),t.scaleCanvas(i.tilemapLayer.scaleX,i.tilemapLayer.scaleY);for(var a=0;a<r.length;a++){var h=r[a],l=h.width,c=h.height,u=h.pixelX,d=h.pixelY,p=h.collides?s:o;null!==p&&(t.fillStyle(p.color,p.alpha/255),t.fillRect(u,d,l,c)),u+=1,d+=1,l-=2,c-=2,null!==n&&(t.lineStyle(1,n.color,n.alpha/255),h.faceTop&&t.lineBetween(u,d,u+l,d),h.faceRight&&t.lineBetween(u+l,d,u+l,d+c),h.faceBottom&&t.lineBetween(u,d+c,u+l,d+c),h.faceLeft)&&t.lineBetween(u,d,u,d+c)}}},27987:(t,e,i)=>{var l=i(7386);t.exports=function(t,e,i,o,s,n,r){for(var a=l(i,o,s,n,null,r),h=0;h<a.length;h++)a[h]&&a[h].index===t&&(a[h].index=e)}},32483:t=>{t.exports=function(t,e,i,o){var s,n,r,a=t.data,h=t.width,l=t.height,t=t.tilemapLayer,c=Math.max(0,e.left),u=Math.min(h,e.right),d=Math.max(0,e.top),p=Math.min(l,e.bottom);if(0===i)for(n=d;n<p;n++)for(s=c;a[n]&&s<u;s++)(r=a[n][s])&&-1!==r.index&&r.visible&&0!==r.alpha&&o.push(r);else if(1===i)for(n=d;n<p;n++)for(s=u;a[n]&&c<=s;s--)(r=a[n][s])&&-1!==r.index&&r.visible&&0!==r.alpha&&o.push(r);else if(2===i)for(n=p;d<=n;n--)for(s=c;a[n]&&s<u;s++)(r=a[n][s])&&-1!==r.index&&r.visible&&0!==r.alpha&&o.push(r);else if(3===i)for(n=p;d<=n;n--)for(s=u;a[n]&&c<=s;s--)(r=a[n][s])&&-1!==r.index&&r.visible&&0!==r.alpha&&o.push(r);return t.tilesDrawn=o.length,t.tilesTotal=h*l,o}},57068:(t,e,i)=>{var l=i(20576),c=i(42573),u=i(9589);t.exports=function(t,e,i,o,s){void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===s&&(s=!0),Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++)u(t[n],e,o);if(s)for(var r=0;r<o.height;r++)for(var a=0;a<o.width;a++){var h=o.data[r][a];h&&-1!==t.indexOf(h.index)&&l(h,e)}i&&c(0,0,o.width,o.height,o)}},37266:(t,e,i)=>{var c=i(20576),u=i(42573),d=i(9589);t.exports=function(t,e,i,o,s,n){if(void 0===i&&(i=!0),void 0===o&&(o=!0),void 0===n&&(n=!0),!(e<t)){for(var r=t;r<=e;r++)d(r,i,s);if(n)for(var a=0;a<s.height;a++)for(var h=0;h<s.width;h++){var l=s.data[a][h];l&&l.index>=t&&l.index<=e&&c(l,i)}o&&u(0,0,s.width,s.height,s)}}},75661:(t,e,i)=>{var a=i(20576),h=i(42573),l=i(9589);t.exports=function(t,e,i,o){void 0===e&&(e=!0),void 0===i&&(i=!0),Array.isArray(t)||(t=[t]);for(var s=0;s<o.height;s++)for(var n=0;n<o.width;n++){var r=o.data[s][n];r&&-1===t.indexOf(r.index)&&(a(r,e),l(r.index,e,o))}i&&h(0,0,o.width,o.height,o)}},64740:(t,e,i)=>{var c=i(20576),u=i(42573),d=i(97022);t.exports=function(t,e,i,o){void 0===e&&(e=!0),void 0===i&&(i=!0);for(var s=0;s<o.height;s++)for(var n=0;n<o.width;n++){var r=o.data[s][n];if(r)for(var a in t)if(d(r.properties,a)){var h=t[a];Array.isArray(h)||(h=[h]);for(var l=0;l<h.length;l++)r.properties[a]===h[l]&&c(r,e)}}i&&u(0,0,o.width,o.height,o)}},63307:(t,e,i)=>{var a=i(20576),h=i(42573);t.exports=function(t,e,i){void 0===t&&(t=!0),void 0===e&&(e=!0);for(var o=0;o<i.height;o++)for(var s=0;s<i.width;s++){var n,r=i.data[o][s];r&&(n=r.getCollisionGroup())&&n.objects&&0<n.objects.length&&a(r,t)}e&&h(0,0,i.width,i.height,i)}},9589:t=>{t.exports=function(t,e,i){var o=i.collideIndexes.indexOf(t);e&&-1===o?i.collideIndexes.push(t):e||-1===o||i.collideIndexes.splice(o,1)}},20576:t=>{t.exports=function(t,e){e?t.setCollision(!0,!0,!0,!0,!1):t.resetCollision(!1)}},79583:t=>{t.exports=function(t,e,i,o){if("number"==typeof t)o.callbacks[t]=null!==e?{callback:e,callbackContext:i}:void 0;else for(var s=0,n=t.length;s<n;s++)o.callbacks[t[s]]=null!==e?{callback:e,callbackContext:i}:void 0}},93254:(t,e,i)=>{var l=i(7386);t.exports=function(t,e,i,o,s,n,r){for(var a=l(t,e,i,o,null,r),h=0;h<a.length;h++)a[h].setCollisionCallback(s,n)}},32903:(t,e,i)=>{var h=i(7386),l=i(33680);t.exports=function(t,e,i,o,s){var n=h(t,e,i,o,null,s),r=n.map(function(t){return t.index});l(r);for(var a=0;a<n.length;a++)n[a].index=r[a]}},61325:(t,e,i)=>{var s=i(63448),n=i(56583);t.exports=function(t,e){var i=t.tilemapLayer.tilemap,t=t.tilemapLayer,o=Math.floor(i.tileWidth*t.scaleX),i=Math.floor(i.tileHeight*t.scaleY);return{left:n(e.worldView.x-t.x,o,0,!0)-t.cullPaddingX,right:s(e.worldView.right-t.x,o,0,!0)+t.cullPaddingX,top:n(e.worldView.y-t.y,i/2,0,!0)-t.cullPaddingY,bottom:s(e.worldView.bottom-t.y,i/2,0,!0)+t.cullPaddingY}}},54503:(t,e,i)=>{var n=i(61325),r=i(32483);t.exports=function(t,e,i,o){void 0===o&&(o=0),(i=void 0===i?[]:i).length=0;var s=t.tilemapLayer,e=n(t,e);return s.skipCull&&1===s.scrollFactorX&&1===s.scrollFactorY&&(e.left=0,e.right=t.width,e.top=0,e.bottom=t.height),r(t,e,o,i),i}},97202:(t,e,i)=>{var l=i(26099);t.exports=function(t,e,i,o,s){i=i||new l;var n=s.baseTileWidth,r=s.baseTileHeight,s=s.tilemapLayer,a=0,h=0;return s&&(o=o||s.scene.cameras.main,a=s.x+o.scrollX*(1-s.scrollFactorX),n*=s.scaleX,h=s.y+o.scrollY*(1-s.scrollFactorY),r*=s.scaleY),i.set(a+t*n+e%2*(n/2),h+e*(r/2))}},28054:t=>{t.exports=function(t,e,i){var o=i.baseTileHeight,i=i.tilemapLayer,s=0;return i&&(void 0===e&&(e=i.scene.cameras.main),s=i.y+e.scrollY*(1-i.scrollFactorY),o*=i.scaleY),s+t*(o/2)+o}},15108:(t,e,i)=>{var h=i(26099);t.exports=function(t,e,i,o,s,n){o=o||new h;var r=n.baseTileWidth,a=n.baseTileHeight,n=n.tilemapLayer,s=(n&&(s=s||n.scene.cameras.main,e-=n.y+s.scrollY*(1-n.scrollFactorY),a*=n.scaleY,t-=n.x+s.scrollX*(1-n.scrollFactorX),r*=n.scaleX),i?Math.floor(e/(a/2)):e/(a/2)),n=i?Math.floor((t+s%2*.5*r)/r):(t+s%2*.5*r)/r;return o.set(n,s)}},51900:t=>{t.exports=function(t,e,i,o){var s=o.baseTileHeight,o=o.tilemapLayer;return o&&(i=i||o.scene.cameras.main,t-=o.y+i.scrollY*(1-o.scrollFactorY),s*=o.scaleY),e?Math.floor(t/(s/2)):t/(s/2)}},86560:(t,e,i)=>{var l=i(7386);t.exports=function(t,e,i,o,s,n,r){for(var a=l(i,o,s,n,null,r),h=0;h<a.length;h++)a[h]&&(a[h].index===t?a[h].index=e:a[h].index===e&&(a[h].index=t))}},97281:t=>{t.exports=function(t,e,i){var o=i.baseTileWidth,i=i.tilemapLayer,s=0;return i&&(e=e||i.scene.cameras.main,s=i.x+e.scrollX*(1-i.scrollFactorX),o*=i.scaleX),s+t*o}},70326:(t,e,i)=>{var n=i(97281),r=i(29650),a=i(26099);t.exports=function(t,e,i,o,s){return(i=i||new a(0,0)).x=n(t,o,s),i.y=r(e,o,s),i}},29650:t=>{t.exports=function(t,e,i){var o=i.baseTileHeight,i=i.tilemapLayer,s=0;return i&&(e=e||i.scene.cameras.main,s=i.y+e.scrollY*(1-i.scrollFactorY),o*=i.scaleY),s+t*o}},77366:(t,e,i)=>{var f=i(7386),b=i(75508);t.exports=function(t,e,i,o,s,n){if(s){for(var r=f(t,e,i,o,null,n),a=0,h=0;h<s.length;h++)a+=s[h].weight;if(!(a<=0))for(h=0;h<r.length;h++){for(var l=b.RND.frac()*a,c=0,u=-1,d=0;d<s.length;d++)if(l<=(c+=s[d].weight)){var p=s[d].index,u=Array.isArray(p)?p[Math.floor(b.RND.frac()*p.length)]:p;break}r[h].index=u}}}},10095:(t,e,i)=>{var s=i(85896),n=new(i(26099));t.exports=function(t,e,i,o){return s(t,0,e,n,i,o),n.x}},85896:(t,e,i)=>{var h=i(26099);t.exports=function(t,e,i,o,s,n){void 0===i&&(i=!0),o=o||new h;var r=n.baseTileWidth,a=n.baseTileHeight,n=n.tilemapLayer,s=(n&&(s=s||n.scene.cameras.main,t-=n.x+s.scrollX*(1-n.scrollFactorX),e-=n.y+s.scrollY*(1-n.scrollFactorY),r*=n.scaleX,a*=n.scaleY),t/r),n=e/a;return i&&(s=Math.floor(s),n=Math.floor(n)),o.set(s,n)}},63288:(t,e,i)=>{var s=i(85896),n=new(i(26099));t.exports=function(t,e,i,o){return s(0,t,e,n,i,o),n.y}},81086:(t,e,i)=>{t.exports={CalculateFacesAt:i(72023),CalculateFacesWithin:i(42573),CheckIsoBounds:i(33528),Copy:i(1785),CreateFromTiles:i(78419),CullBounds:i(19545),CullTiles:i(30003),Fill:i(35137),FilterTiles:i(40253),FindByIndex:i(52692),FindTile:i(66151),ForEachTile:i(97560),GetCullTilesFunction:i(43305),GetTileAt:i(7423),GetTileAtWorldXY:i(60540),GetTileCorners:i(55826),GetTileCornersFunction:i(11758),GetTilesWithin:i(7386),GetTilesWithinShape:i(91141),GetTilesWithinWorldXY:i(96523),GetTileToWorldXFunction:i(39167),GetTileToWorldXYFunction:i(62e3),GetTileToWorldYFunction:i(5984),GetWorldToTileXFunction:i(96113),GetWorldToTileXYFunction:i(16926),GetWorldToTileYFunction:i(55762),HasTileAt:i(45091),HasTileAtWorldXY:i(24152),HexagonalCullBounds:i(90454),HexagonalCullTiles:i(9474),HexagonalGetTileCorners:i(27229),HexagonalTileToWorldXY:i(19951),HexagonalWorldToTileXY:i(86625),IsInLayerBounds:i(62991),IsometricCullTiles:i(14018),IsometricTileToWorldXY:i(14127),IsometricWorldToTileXY:i(96897),PutTileAt:i(71558),PutTileAtWorldXY:i(26303),PutTilesAt:i(14051),Randomize:i(77389),RemoveTileAt:i(63557),RemoveTileAtWorldXY:i(94178),RenderDebug:i(15533),ReplaceByIndex:i(27987),RunCull:i(32483),SetCollision:i(57068),SetCollisionBetween:i(37266),SetCollisionByExclusion:i(75661),SetCollisionByProperty:i(64740),SetCollisionFromCollisionGroup:i(63307),SetLayerCollisionIndex:i(9589),SetTileCollision:i(20576),SetTileIndexCallback:i(79583),SetTileLocationCallback:i(93254),Shuffle:i(32903),StaggeredCullBounds:i(61325),StaggeredCullTiles:i(54503),StaggeredTileToWorldXY:i(97202),StaggeredTileToWorldY:i(28054),StaggeredWorldToTileXY:i(15108),StaggeredWorldToTileY:i(51900),SwapByIndex:i(86560),TileToWorldX:i(97281),TileToWorldXY:i(70326),TileToWorldY:i(29650),WeightedRandomize:i(77366),WorldToTileX:i(10095),WorldToTileXY:i(85896),WorldToTileY:i(63288)}},91907:t=>{t.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},21829:(t,e,i)=>{i={ORIENTATION:i(91907)};t.exports=i},62501:(t,e,i)=>{var o=i(79291),s=i(21829),o=o(!1,{Components:i(81086),Parsers:i(57442),Formats:i(80341),ImageCollection:i(16536),ParseToTilemap:i(31989),Tile:i(23029),Tilemap:i(49075),TilemapCreator:i(45939),TilemapFactory:i(46029),Tileset:i(33629),TilemapLayer:i(20442),Orientation:i(91907),LayerData:i(14977),MapData:i(87010),ObjectLayer:i(48700)},s.ORIENTATION);t.exports=o},14977:(t,e,i)=>{var o=i(83419),s=i(91907),n=i(95540),i=new o({initialize:function(t){this.name=n(t=void 0===t?{}:t,"name","layer"),this.id=n(t,"id",0),this.x=n(t,"x",0),this.y=n(t,"y",0),this.width=n(t,"width",0),this.height=n(t,"height",0),this.tileWidth=n(t,"tileWidth",0),this.tileHeight=n(t,"tileHeight",0),this.baseTileWidth=n(t,"baseTileWidth",this.tileWidth),this.baseTileHeight=n(t,"baseTileHeight",this.tileHeight),this.orientation=n(t,"orientation",s.ORTHOGONAL),this.widthInPixels=n(t,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=n(t,"heightInPixels",this.height*this.baseTileHeight),this.alpha=n(t,"alpha",1),this.visible=n(t,"visible",!0),this.properties=n(t,"properties",[]),this.indexes=n(t,"indexes",[]),this.collideIndexes=n(t,"collideIndexes",[]),this.callbacks=n(t,"callbacks",[]),this.bodies=n(t,"bodies",[]),this.data=n(t,"data",[]),this.tilemapLayer=n(t,"tilemapLayer",null),this.hexSideLength=n(t,"hexSideLength",0),this.staggerAxis=n(t,"staggerAxis","y"),this.staggerIndex=n(t,"staggerIndex","odd")}});t.exports=i},87010:(t,e,i)=>{var o=i(83419),s=i(91907),n=i(95540),i=new o({initialize:function(t){this.name=n(t=void 0===t?{}:t,"name","map"),this.width=n(t,"width",0),this.height=n(t,"height",0),this.infinite=n(t,"infinite",!1),this.tileWidth=n(t,"tileWidth",0),this.tileHeight=n(t,"tileHeight",0),this.widthInPixels=n(t,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=n(t,"heightInPixels",this.height*this.tileHeight),this.format=n(t,"format",null),this.orientation=n(t,"orientation",s.ORTHOGONAL),this.renderOrder=n(t,"renderOrder","right-down"),this.version=n(t,"version","1"),this.properties=n(t,"properties",{}),this.layers=n(t,"layers",[]),this.images=n(t,"images",[]),this.objects=n(t,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=n(t,"collision",{}),this.tilesets=n(t,"tilesets",[]),this.imageCollections=n(t,"imageCollections",[]),this.tiles=n(t,"tiles",[]),this.hexSideLength=n(t,"hexSideLength",0),this.staggerAxis=n(t,"staggerAxis","y"),this.staggerIndex=n(t,"staggerIndex","odd")}});t.exports=i},48700:(t,e,i)=>{var o=i(83419),s=i(95540),i=new o({initialize:function(t){this.name=s(t=void 0===t?{}:t,"name","object layer"),this.id=s(t,"id",0),this.opacity=s(t,"opacity",1),this.properties=s(t,"properties",{}),this.propertyTypes=s(t,"propertytypes",{}),this.type=s(t,"type","objectgroup"),this.visible=s(t,"visible",!0),this.objects=s(t,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});t.exports=i},6641:(t,e,i)=>{var o=i(91907);t.exports=function(t){return"isometric"===(t=t.toLowerCase())?o.ISOMETRIC:"staggered"===t?o.STAGGERED:"hexagonal"===t?o.HEXAGONAL:o.ORTHOGONAL}},46177:(t,e,i)=>{var a=i(80341),h=i(2342),l=i(82593),c=i(46594),u=i(87021);t.exports=function(t,e,i,o,s,n){var r;switch(e){case a.ARRAY_2D:r=h(t,i,o,s,n);break;case a.CSV:r=l(t,i,o,s,n);break;case a.TILED_JSON:r=c(t,i,n);break;case a.WELTMEISTER:r=u(t,i,n);break;default:r=null}return r}},2342:(t,e,i)=>{var p=i(80341),f=i(14977),b=i(87010),y=i(23029);t.exports=function(t,e,i,o,s){for(var n=new f({tileWidth:i,tileHeight:o}),t=new b({name:t,tileWidth:i,tileHeight:o,format:p.ARRAY_2D,layers:[n]}),r=[],a=e.length,h=0,l=0;l<e.length;l++){r[l]=[];for(var c=e[l],u=0;u<c.length;u++){var d=parseInt(c[u],10);isNaN(d)||-1===d?r[l][u]=s?null:new y(n,-1,u,l,i,o):r[l][u]=new y(n,d,u,l,i,o)}0===h&&(h=c.length)}return t.width=n.width=h,t.height=n.height=a,t.widthInPixels=n.widthInPixels=h*i,t.heightInPixels=n.heightInPixels=a*o,n.data=r,t}},82593:(t,e,i)=>{var n=i(80341),r=i(2342);t.exports=function(t,e,i,o,s){e=e.trim().split("\n").map(function(t){return t.split(",")}),t=r(t,e,i,o,s);return t.format=n.CSV,t}},6656:(t,e,i)=>{var u=i(14977),d=i(23029);t.exports=function(t,e){for(var i=[],o=0;o<t.layer.length;o++){for(var s=t.layer[o],n=new u({name:s.name,width:s.width,height:s.height,tileWidth:s.tilesize,tileHeight:s.tilesize,visible:1===s.visible}),r=[],a=[],h=0;h<s.data.length;h++){for(var l=0;l<s.data[h].length;l++){var c=s.data[h][l]-1,c=-1<c?new d(n,c,l,h,s.tilesize,s.tilesize):e?null:new d(n,-1,l,h,s.tilesize,s.tilesize);r.push(c)}a.push(r),r=[]}n.data=a,i.push(n)}return i}},96483:(t,e,i)=>{var r=i(33629);t.exports=function(t){for(var e=[],i=[],o=0;o<t.layer.length;o++){var s=t.layer[o],n=s.tilesetName;""!==n&&-1===i.indexOf(n)&&(i.push(n),e.push(new r(n,0,s.tilesize,s.tilesize,0,0)))}return e}},87021:(t,e,i)=>{var r=i(80341),a=i(87010),h=i(6656),l=i(96483);t.exports=function(t,e,i){if(0===e.layer.length)return null;for(var o=0,s=0,n=0;n<e.layer.length;n++)e.layer[n].width>o&&(o=e.layer[n].width),e.layer[n].height>s&&(s=e.layer[n].height);t=new a({width:o,height:s,name:t,tileWidth:e.layer[0].tilesize,tileHeight:e.layer[0].tilesize,format:r.WELTMEISTER});return t.layers=h(e,i),t.tilesets=l(e),t}},52833:(t,e,i)=>{t.exports={ParseTileLayers:i(6656),ParseTilesets:i(96483),ParseWeltmeister:i(87021)}},57442:(t,e,i)=>{t.exports={FromOrientationString:i(6641),Parse:i(46177),Parse2DArray:i(2342),ParseCSV:i(82593),Impact:i(52833),Tiled:i(96761)}},51233:(t,e,i)=>{var h=i(79291);t.exports=function(t){for(var e,i=0;i<t.layers.length;i++)for(var o,s=t.layers[i],n=0;n<s.data.length;n++)for(var r=s.data[n],a=0;a<r.length;a++)null===(e=r[a])||e.index<0||(o=t.tiles[e.index][2],o=t.tilesets[o],e.width=o.tileWidth,e.height=o.tileHeight,o.tileProperties&&o.tileProperties[e.index-o.firstgid]&&(e.properties=h(e.properties,o.tileProperties[e.index-o.firstgid])))}},41868:t=>{t.exports=function(t){for(var e=window.atob(t),i=e.length,o=new Array(i/4),s=0;s<i;s+=4)o[s/4]=(e.charCodeAt(s)|e.charCodeAt(s+1)<<8|e.charCodeAt(s+2)<<16|e.charCodeAt(s+3)<<24)>>>0;return o}},84101:(t,e,i)=>{var f=i(33629);t.exports=function(t){for(var e,i=[],o=0;o<t.imageCollections.length;o++)for(var s=t.imageCollections[o],n=s.images,r=0;r<n.length;r++){var a=n[r];(e=new f(a.image,a.gid,s.imageWidth,s.imageHeight,0,0)).updateTileData(s.imageWidth,s.imageHeight),t.tilesets.push(e)}for(o=0;o<t.tilesets.length;o++)for(var h=(e=t.tilesets[o]).tileMargin,l=e.tileMargin,c=0,u=0,d=0,p=e.firstgid;p<e.firstgid+e.total&&(i[p]=[h,l,o],h+=e.tileWidth+e.tileSpacing,++c!==e.total)&&(++u!==e.columns||(h=e.tileMargin,l+=e.tileHeight+e.tileSpacing,u=0,++d!==e.rows));p++);return i}},79677:(t,e,i)=>{var n=i(95540);t.exports=function(t,e,i){var o,s;return e?(o=e.x+n(e,"startx",0)*t.tilewidth+n(e,"offsetx",0),s=e.y+n(e,"starty",0)*t.tileheight+n(e,"offsety",0),{i:0,layers:e.layers,name:i.name+e.name+"/",opacity:i.opacity*e.opacity,visible:i.visible&&e.visible,x:i.x+o,y:i.y+s}):{i:0,layers:t.layers,name:"",opacity:1,visible:!0,x:0,y:0}}},29920:t=>{t.exports=function(t){var e=Boolean(2147483648&t),i=Boolean(1073741824&t),o=Boolean(536870912&t),s=(t&=536870911,0),n=!1;return e&&i&&o?(s=Math.PI/2,n=!0):e&&i&&!o?(s=Math.PI,n=!1):e&&!i&&o?(s=Math.PI/2,n=!1):!e||i||o?!e&&i&&o?(s=3*Math.PI/2,n=!1):e||!i||o?e||i||!o?e||i||o||(s=0,n=!1):(s=3*Math.PI/2,n=!0):(s=Math.PI,n=!0):n=!(s=0),{gid:t,flippedHorizontal:e,flippedVertical:i,flippedAntiDiagonal:o,rotation:s,flipped:n}}},12635:(t,e,i)=>{var a=i(95540),h=i(79677);t.exports=function(t){for(var e=[],i=[],o=h(t);o.i<o.layers.length||0<i.length;)if(o.i>=o.layers.length){if(i.length<1)break;o=i.pop()}else{var s,n,r=o.layers[o.i];o.i++,"imagelayer"===r.type?(n=a(r,"offsetx",0)+a(r,"startx",0),s=a(r,"offsety",0)+a(r,"starty",0),e.push({name:o.name+r.name,image:r.image,x:o.x+n+r.x,y:o.y+s+r.y,alpha:o.opacity*r.opacity,visible:o.visible&&r.visible,properties:a(r,"properties",{})})):"group"===r.type&&(n=h(t,r,o),i.push(o),o=n)}return e}},46594:(t,e,i)=>{var o=i(51233),s=i(84101),n=i(91907),r=i(62644),a=i(80341),h=i(6641),l=i(87010),c=i(12635),u=i(22611),d=i(28200),p=i(24619);t.exports=function(t,e,i){e=r(e),t=new l({width:e.width,height:e.height,name:t,tileWidth:e.tilewidth,tileHeight:e.tileheight,orientation:h(e.orientation),format:a.TILED_JSON,version:e.version,properties:e.properties,renderOrder:e.renderorder,infinite:e.infinite}),t.orientation===n.HEXAGONAL&&(t.hexSideLength=e.hexsidelength,t.staggerAxis=e.staggeraxis,t.staggerIndex=e.staggerindex),t.layers=d(e,i),t.images=c(e),i=p(e);return t.tilesets=i.tilesets,t.imageCollections=i.imageCollections,t.objects=u(e),t.tiles=s(t),o(t),t}},52205:(t,e,i)=>{function s(t){return{x:t.x,y:t.y}}var n=i(18254),r=i(29920),a=["id","name","type","rotation","properties","visible","x","y","width","height"];t.exports=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var o=n(t,a);return o.x+=e,o.y+=i,t.gid?(e=r(t.gid),o.gid=e.gid,o.flippedHorizontal=e.flippedHorizontal,o.flippedVertical=e.flippedVertical,o.flippedAntiDiagonal=e.flippedAntiDiagonal):t.polyline?o.polyline=t.polyline.map(s):t.polygon?o.polygon=t.polygon.map(s):t.ellipse?o.ellipse=t.ellipse:t.text?o.text=t.text:t.point?o.point=!0:o.rectangle=!0,o}},22611:(t,e,i)=>{var u=i(95540),d=i(52205),p=i(48700),f=i(79677);t.exports=function(t){for(var e=[],i=[],o=f(t);o.i<o.layers.length||0<i.length;)if(o.i>=o.layers.length){if(i.length<1)break;o=i.pop()}else{var s=o.layers[o.i];if(o.i++,s.opacity*=o.opacity,s.visible=o.visible&&s.visible,"objectgroup"===s.type){s.name=o.name+s.name;for(var n=o.x+u(s,"startx",0)+u(s,"offsetx",0),r=o.y+u(s,"starty",0)+u(s,"offsety",0),a=[],h=0;h<s.objects.length;h++){var l=d(s.objects[h],n,r);a.push(l)}var c=new p(s);c.objects=a,e.push(c)}else"group"===s.type&&(c=f(t,s,o),i.push(o),o=c)}return e}},28200:(t,e,i)=>{var M=i(41868),D=i(91907),O=i(79677),R=i(6641),L=i(95540),F=i(14977),I=i(29920),k=i(23029);t.exports=function(t,e){for(var i=L(t,"infinite",!1),o=[],s=[],n=O(t);n.i<n.layers.length||0<s.length;)if(n.i>=n.layers.length){if(s.length<1)break;n=s.pop()}else{var r,a=n.layers[n.i];if(n.i++,"tilelayer"===a.type){if(!a.compression){if(a.encoding&&"base64"===a.encoding){if(a.chunks)for(var h=0;h<a.chunks.length;h++)a.chunks[h].data=M(a.chunks[h].data);a.data&&(a.data=M(a.data)),delete a.encoding}var l,c,u,d,p=[],f=0;if(i){var b=L(a,"startx",0)+a.x,y=L(a,"starty",0)+a.y;(l=new F({name:n.name+a.name,id:a.id,x:n.x+L(a,"offsetx",0)+b*t.tilewidth,y:n.y+L(a,"offsety",0)+y*t.tileheight,width:a.width,height:a.height,tileWidth:t.tilewidth,tileHeight:t.tileheight,alpha:n.opacity*a.opacity,visible:n.visible&&a.visible,properties:L(a,"properties",[]),orientation:R(t.orientation)})).orientation===D.HEXAGONAL&&(l.hexSideLength=t.hexsidelength,l.staggerAxis=t.staggeraxis,l.staggerIndex=t.staggerindex);for(var m=0;m<a.height;m++){p[m]=[null];for(var x=0;x<a.width;x++)p[m][x]=null}for(m=0,E=a.chunks.length;m<E;m++)for(var g=a.chunks[m],v=g.x-b,_=g.y-y,w=0,S=0,A=g.data.length;S<A;S++){var C=f+v,T=w+_;0<(c=I(g.data[S])).gid?((u=new k(l,c.gid,C,T,t.tilewidth,t.tileheight)).rotation=c.rotation,u.flipX=c.flipped,p[T][C]=u):(d=e?null:new k(l,-1,C,T,t.tilewidth,t.tileheight),p[T][C]=d),++f===g.width&&(w++,f=0)}}else{(l=new F({name:n.name+a.name,id:a.id,x:n.x+L(a,"offsetx",0)+a.x,y:n.y+L(a,"offsety",0)+a.y,width:a.width,height:a.height,tileWidth:t.tilewidth,tileHeight:t.tileheight,alpha:n.opacity*a.opacity,visible:n.visible&&a.visible,properties:L(a,"properties",[]),orientation:R(t.orientation)})).orientation===D.HEXAGONAL&&(l.hexSideLength=t.hexsidelength,l.staggerAxis=t.staggeraxis,l.staggerIndex=t.staggerindex);for(var P=[],B=0,E=a.data.length;B<E;B++)0<(c=I(a.data[B])).gid?((u=new k(l,c.gid,f,p.length,t.tilewidth,t.tileheight)).rotation=c.rotation,u.flipX=c.flipped,P.push(u)):(d=e?null:new k(l,-1,f,p.length,t.tilewidth,t.tileheight),P.push(d)),++f===a.width&&(p.push(P),f=0,P=[])}l.data=p,o.push(l)}}else"group"===a.type&&(r=O(t,a,n),s.push(n),n=r)}return o}},24619:(t,e,i)=>{var v=i(33629),_=i(16536),w=i(52205),S=i(57880);t.exports=function(t){for(var e,i=[],o=[],s=null,n=0;n<t.tilesets.length;n++){var r=t.tilesets[n];if(!r.source)if(r.image){var a=new v(r.name,r.firstgid,r.tilewidth,r.tileheight,r.margin,r.spacing,void 0,void 0,r.tileoffset);if(1<t.version){var h=void 0,l=void 0;if(Array.isArray(r.tiles))for(var h=h||{},l=l||{},c=0;c<r.tiles.length;c++){var u,d,p=r.tiles[c];p.properties&&(u={},p.properties.forEach(function(t){u[t.name]=t.value}),l[p.id]=u),p.objectgroup&&((h[p.id]||(h[p.id]={})).objectgroup=p.objectgroup,p.objectgroup.objects)&&(d=p.objectgroup.objects.map(function(t){return w(t)}),h[p.id].objectgroup.objects=d),p.animation&&((h[p.id]||(h[p.id]={})).animation=p.animation),p.type&&((h[p.id]||(h[p.id]={})).type=p.type)}Array.isArray(r.wangsets)&&(l=l||{},S(r.wangsets,h=h||{})),h&&(a.tileData=h,a.tileProperties=l)}else if(r.tileproperties&&(a.tileProperties=r.tileproperties),r.tiles)for(e in a.tileData=r.tiles,a.tileData){var f=a.tileData[e].objectgroup;f&&f.objects&&(f=f.objects.map(function(t){return w(t)}),a.tileData[e].objectgroup.objects=f)}a.updateTileData(r.imagewidth,r.imageheight),i.push(a)}else{for(var b=new _(r.name,r.firstgid,r.tilewidth,r.tileheight,r.margin,r.spacing,r.properties),y=0,c=0;c<r.tiles.length;c++){var m=(p=r.tiles[c]).image,x=parseInt(p.id,10),g=r.firstgid+x;b.addImage(g,m),y=Math.max(x,y)}b.maxId=y,o.push(b)}s&&(s.lastgid=r.firstgid-1),s=r}return{tilesets:i,imageCollections:o}}},57880:t=>{t.exports=function(t,e){for(var i=0;i<t.length;i++){var o=t[i],s=i;if(o.name&&""!==o.name&&(s=o.name),Array.isArray(o.wangtiles)&&0<o.wangtiles.length){var n,r,a,h={},l={};if(Array.isArray(o.edgecolors))for(n=0;n<o.edgecolors.length;n++)a=1+n,""!==(r=o.edgecolors[n]).name&&(h[a]=r.name);if(Array.isArray(o.cornercolors))for(n=0;n<o.cornercolors.length;n++)a=1+n,""!==(r=o.cornercolors[n]).name&&(l[a]=r.name);if(Array.isArray(o.colors))for(n=0;n<o.colors.length;n++)a=1+n,""!==(r=o.colors[n]).name&&(h[a]=l[a]=r.name);for(var c=[h,l,h,l,h,l,h,l],u=0;u<o.wangtiles.length;u++){for(var d,p=o.wangtiles[u],f=(f=e[p.tileid]||(e[p.tileid]={})).wangid||(f.wangid={}),b=[],y=0;y<Math.min(c.length,p.wangid.length);y++)0!==(r=p.wangid[y])?(d=c[y][r],b.push(void 0===d?r:d)):b.push(void 0);f[s]=b}}}}},96761:(t,e,i)=>{t.exports={AssignTileProperties:i(51233),Base64Decode:i(41868),BuildTilesetIndex:i(84101),CreateGroupLayer:i(79677),ParseGID:i(29920),ParseImageLayers:i(12635),ParseJSONTiled:i(46594),ParseObject:i(52205),ParseObjectLayers:i(22611),ParseTileLayers:i(28200),ParseTilesets:i(24619)}},33385:(t,e,i)=>{var o=i(83419),s=i(37277),n=i(44594),r=i(94880),a=i(72905),i=new o({initialize:function(t){this.scene=t,this.systems=t.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],t.sys.events.once(n.BOOT,this.boot,this),t.sys.events.on(n.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(n.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var t=this.systems.events;t.on(n.PRE_UPDATE,this.preUpdate,this),t.on(n.UPDATE,this.update,this),t.once(n.SHUTDOWN,this.shutdown,this)},addEvent:function(t){var e;return t instanceof r?(this.removeEvent(e=t),e.elapsed=e.startAt,e.hasDispatched=!1,e.repeatCount=-1===e.repeat||e.loop?999999999999:e.repeat):e=new r(t),this._pendingInsertion.push(e),e},delayedCall:function(t,e,i,o){return this.addEvent({delay:t,callback:e,args:i,callbackScope:o})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=t[e];a(this._pendingRemoval,i),a(this._pendingInsertion,i),a(this._active,i)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var t=this._pendingRemoval.length,e=this._pendingInsertion.length;if(0!==t||0!==e){for(var i=0;i<t;i++){var o=this._pendingRemoval[i],s=this._active.indexOf(o);-1<s&&this._active.splice(s,1),o.destroy()}for(i=0;i<e;i++)o=this._pendingInsertion[i],this._active.push(o);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(t,e){if(this.now=t,!this.paused){e*=this.timeScale;for(var i=0;i<this._active.length;i++){var o=this._active[i];if(!o.paused&&(o.elapsed+=e*o.timeScale,o.elapsed>=o.delay)){var s=o.elapsed-o.delay;if(o.elapsed=o.delay,!o.hasDispatched&&o.callback&&(o.hasDispatched=!0,o.callback.apply(o.callbackScope,o.args)),0<o.repeatCount){if(o.repeatCount--,s>=o.delay)for(;s>=o.delay&&0<o.repeatCount;)o.callback&&o.callback.apply(o.callbackScope,o.args),s-=o.delay,o.repeatCount--;o.elapsed=s,o.hasDispatched=!1}else o.hasDispatched&&this._pendingRemoval.push(o)}}}},shutdown:function(){for(var t=0;t<this._pendingInsertion.length;t++)this._pendingInsertion[t].destroy();for(t=0;t<this._active.length;t++)this._active[t].destroy();for(t=0;t<this._pendingRemoval.length;t++)this._pendingRemoval[t].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var e=this.systems.events;e.off(n.PRE_UPDATE,this.preUpdate,this),e.off(n.UPDATE,this.update,this),e.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(n.START,this.start,this),this.scene=null,this.systems=null}});s.register("Clock",i,"time"),t.exports=i},96120:(t,e,i)=>{var o=i(83419),s=i(50792),n=i(39429),a=i(95540),r=i(44594),h=i(89809),l=new o({Extends:s,initialize:function(t,e){s.call(this),this.scene=t,this.systems=t.sys,this.elapsed=0,this.paused=!0,this.complete=!1,this.totalComplete=0,this.loop=0,this.iteration=0,this.events=[];t=this.systems.events;t.on(r.PRE_UPDATE,this.preUpdate,this),t.on(r.UPDATE,this.update,this),t.once(r.SHUTDOWN,this.destroy,this),e&&this.add(e)},preUpdate:function(t,e){this.paused||(this.elapsed+=e)},update:function(){if(!this.paused&&!this.complete){for(var t,e=this.events,i=!1,o=this.systems,s=0;s<e.length;s++){var n=e[s];if(!n.complete&&n.time<=this.elapsed&&(n.complete=!0,this.totalComplete++,t=n.target||this,!n.if||n.if.call(t,n))){if(n.once&&(i=!0),n.set&&n.target)for(var r in n.set)n.target[r]=n.set[r];this.iteration&&n.repeat++,n.loop&&n.repeat&&n.loop.call(t),n.tween&&o.tweens.add(n.tween),n.sound&&("string"==typeof n.sound?o.sound.play(n.sound):o.sound.play(n.sound.key,n.sound.config)),n.event&&this.emit(n.event,t),n.run&&n.run.call(t),n.stop&&this.stop()}}if(i)for(s=0;s<e.length;s++)e[s].complete&&e[s].once&&(e.splice(s,1),s--);this.totalComplete>=e.length&&(0!==this.loop&&(-1===this.loop||this.loop>this.iteration)?(this.iteration++,this.reset(!0)):this.complete=!0),this.complete&&this.emit(h.COMPLETE,this)}},play:function(t){return void 0===t&&(t=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,t&&this.reset(),this},pause:function(){return this.paused=!0,this},repeat:function(t){return this.loop=t=!1===(t=void 0!==t&&!0!==t?t:-1)?0:t,this},resume:function(){return this.paused=!1,this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(t){void 0===t&&(t=!1),this.elapsed=0,t||(this.iteration=0);for(var e=0;e<this.events.length;e++)this.events[e].complete=!1,t||(this.events[e].repeat=0);return this.play(!1)},add:function(t){Array.isArray(t)||(t=[t]);var e=this.events,i=0;0<e.length&&(i=e[e.length-1].time);for(var o=0;o<t.length;o++){var s=t[o],n=a(s,"at",0),r=a(s,"in",null),r=(null!==r&&(n=this.elapsed+r),a(s,"from",null));e.push({complete:!1,time:n=null!==r?i+r:n,repeat:0,if:a(s,"if",null),run:a(s,"run",null),loop:a(s,"loop",null),event:a(s,"event",null),target:a(s,"target",null),set:a(s,"set",null),tween:a(s,"tween",null),sound:a(s,"sound",null),once:a(s,"once",!1),stop:a(s,"stop",!1)}),i=n}return this.complete=!1,this},clear:function(){return this.events=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){return Math.min(this.totalComplete,this.events.length)/this.events.length},destroy:function(){var t=this.systems.events;t.off(r.PRE_UPDATE,this.preUpdate,this),t.off(r.UPDATE,this.update,this),t.off(r.SHUTDOWN,this.destroy,this),this.scene=null,this.systems=null,this.events=[]}});n.register("timeline",function(t){return new l(this.scene,t)}),t.exports=l},94880:(t,e,i)=>{var o=i(83419),s=i(95540),i=new o({initialize:function(t){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(t)},reset:function(t){if(this.delay=s(t,"delay",0),this.repeat=s(t,"repeat",0),this.loop=s(t,"loop",!1),this.callback=s(t,"callback",void 0),this.callbackScope=s(t,"callbackScope",this),this.args=s(t,"args",[]),this.timeScale=s(t,"timeScale",1),this.startAt=s(t,"startAt",0),this.paused=s(t,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=-1===this.repeat||this.loop?999999999999:this.repeat,0===this.delay&&(0<this.repeat||this.loop))throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){var t;return 0<this.repeat?(t=this.delay+this.delay*this.repeat,(this.elapsed+this.delay*(this.repeat-this.repeatCount))/t):this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return.001*this.elapsed},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return.001*this.getRemaining()},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return.001*this.getOverallRemaining()},remove:function(t){void 0===t&&(t=!1),this.elapsed=this.delay,this.hasDispatched=!t,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});t.exports=i},35945:t=>{t.exports="complete"},89809:(t,e,i)=>{t.exports={COMPLETE:i(35945)}},90291:(t,e,i)=>{t.exports={Clock:i(33385),Events:i(89809),Timeline:i(96120),TimerEvent:i(94880)}},40382:(t,e,i)=>{var o=i(72905),s=i(83419),a=i(43491),n=i(88032),r=i(37277),h=i(44594),l=i(93109),c=i(86081),u=i(8357),d=i(43960),p=i(26012),i=new s({initialize:function(t){this.scene=t,this.events=t.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(h.BOOT,this.boot,this),this.events.on(h.START,this.start,this)},boot:function(){this.events.once(h.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(h.UPDATE,this.update,this),this.events.once(h.SHUTDOWN,this.shutdown,this)},create:function(t){Array.isArray(t)||(t=[t]);for(var e=[],i=0;i<t.length;i++){var o=t[i];o instanceof c||o instanceof d?e.push(o):Array.isArray(o.tweens)?e.push(p(this,o)):e.push(u(this,o))}return 1===e.length?e[0]:e},add:function(t){var e=this.tweens;return t instanceof c||t instanceof d||(t=(Array.isArray(t.tweens)?p:u)(this,t)),e.push(t.reset()),t},addMultiple:function(t){for(var e,i=[],o=this.tweens,s=0;s<t.length;s++)(e=t[s])instanceof c||e instanceof d||(e=(Array.isArray(e.tweens)?p:u)(this,e)),o.push(e.reset()),i.push(e);return i},chain:function(t){t=p(this,t);return this.tweens.push(t.init()),t},getChainedTweens:function(t){return t.getChainedTweens()},has:function(t){return-1<this.tweens.indexOf(t)},existing:function(t){return this.has(t)||this.tweens.push(t.reset()),this},addCounter:function(t){t=n(this,t);return this.tweens.push(t.reset()),t},stagger:function(t,e){return l(t,e)},setLagSmooth:function(t,e){return void 0===e&&(e=0),this.maxLag=t=void 0===t?1e8:t,this.lagSkip=Math.min(e,this.maxLag),this},setFps:function(t){return this.gap=1e3/(t=void 0===t?240:t),this.nextTime=1e3*this.time+this.gap,this},getDelta:function(t){var e=Date.now()-this.prevTime,e=(e>this.maxLag&&(this.startTime+=e-this.lagSkip),this.prevTime+=e,this.prevTime-this.startTime),i=e-this.nextTime,o=e-1e3*this.time;return 0<i||t?(this.time=e/=1e3,this.nextTime+=i+(i>=this.gap?4:this.gap-i)):o=0,o},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(t){var e=this.getDelta(t=void 0===t?!1:t);if(!(e<=0)){this.processing=!0;for(var i=[],o=this.tweens,s=0;s<o.length;s++)(r=o[s]).update(e)&&i.push(r);var n=i.length;if(n&&0<o.length){for(s=0;s<n;s++){var r=i[s],a=o.indexOf(r);-1<a&&(r.isPendingRemove()||r.isDestroyed())&&(o.splice(a,1),r.destroy())}i.length=0}this.processing=!1}},remove:function(t){return this.processing?t.setPendingRemoveState():(o(this.tweens,t),t.setRemovedState()),this},reset:function(t){return this.existing(t),t.seek(),t.setActiveState(),this},makeActive:function(t){return this.existing(t),t.setActiveState(),this},each:function(e,i){for(var o=[null],t=1;t<arguments.length;t++)o.push(arguments[t]);return this.tweens.forEach(function(t){o[0]=t,e.apply(i,o)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(t){for(var e=[],i=this.tweens,o=(t=Array.isArray(t)?a(t):[t]).length,s=0;s<i.length;s++)for(var n=i[s],r=0;r<o;r++)!n.isDestroyed()&&n.hasTarget(t[r])&&e.push(n);return e},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(t){return this.timeScale=t,this},isTweening:function(t){for(var e,i=this.tweens,o=0;o<i.length;o++)if((e=i[o]).isPlaying()&&e.hasTarget(t))return!0;return!1},killAll:function(){for(var t=this.processing?this.getTweens():this.tweens,e=0;e<t.length;e++)t[e].destroy();return this.processing||(t.length=0),this},killTweensOf:function(t){for(var e=this.getTweensOf(t),i=0;i<e.length;i++)e[i].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(h.UPDATE,this.update,this),this.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(h.START,this.start,this),this.scene=null,this.events=null}});r.register("TweenManager",i,"tweens"),t.exports=i},57355:t=>{t.exports=function(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}},6113:(t,e,i)=>{var r=i(62640),a=i(35355);t.exports=function(t,e){var i,o,s,n=r.Power0;return"string"==typeof t?(r.hasOwnProperty(t)||(i="",t.indexOf(".")&&("in"===(o=(i=t.substring(t.indexOf(".")+1)).toLowerCase())?i="easeIn":"out"===o?i="easeOut":"inout"===o&&(i="easeInOut")),t=a(t.substring(0,t.indexOf(".")+1)+i),r.hasOwnProperty(t)))&&(n=r[t]):"function"==typeof t&&(n=t),e?((s=e.slice(0)).unshift(0),function(t){return s[0]=t,n.apply(this,s)}):n}},91389:(t,e,i)=>{var o=i(89318),s=i(77259),n={bezier:o,catmull:s,catmullrom:s,linear:i(28392)};t.exports=function(t){var e;return null===t?null:(e=n.linear,"string"==typeof t?n.hasOwnProperty(t)&&(e=n[t]):"function"==typeof t&&(e=t),e)}},55292:t=>{t.exports=function(r,a,t){var e=r.hasOwnProperty(a)?"function"==typeof r[a]?function(t,e,i,o,s,n){return r[a](t,e,i,o,s,n)}:function(){return r[a]}:"function"==typeof t?t:function(){return t};return e}},82985:(t,e,i)=>{var o=i(81076);t.exports=function(t){var e,i=[];if(t.hasOwnProperty("props"))for(e in t.props)"_"!==e.substring(0,1)&&i.push({key:e,value:t.props[e]});else for(e in t)-1===o.indexOf(e)&&"_"!==e.substring(0,1)&&i.push({key:e,value:t[e]});return i}},62329:(t,e,i)=>{var o=i(35154);t.exports=function(t){t=o(t,"targets",null);return t=null===t||("function"==typeof t&&(t=t.call()),Array.isArray(t))?t:[t]}},17777:(t,e,i)=>{var b=i(30976),y=i(99472);function m(t){return t.getActive&&"function"==typeof t.getActive}function x(t){return t.getStart&&"function"==typeof t.getStart}function g(t){return t.getEnd&&"function"==typeof t.getEnd}function v(t,e){var i,o=function(t,e,i){return i},s=function(t,e,i){return i},n=null,r=typeof e;if("number"==r)o=function(){return e};else if(Array.isArray(e))s=function(){return e[0]},o=function(){return e[e.length-1]};else if("string"==r){var a="random"===(p=e.toLowerCase()).substring(0,6),h="int"===p.substring(0,3);if(a||h){var h=p.indexOf("("),l=p.indexOf(")"),c=p.indexOf(",");if(!(h&&l&&c))throw new Error("invalid random() format");var u=parseFloat(p.substring(h+1,c)),d=parseFloat(p.substring(c+1,l)),o=a?function(){return y(u,d)}:function(){return b(u,d)}}else{var p=p[0],f=parseFloat(e.substr(2));switch(p){case"+":o=function(t,e,i){return i+f};break;case"-":o=function(t,e,i){return i-f};break;case"*":o=function(t,e,i){return i*f};break;case"/":o=function(t,e,i){return i/f};break;default:o=function(){return parseFloat(e)}}}}else"function"==r?o=e:"object"==r&&(x(h=e)||g(h)||m(h)?(m(e)&&(n=e.getActive),g(e)&&(o=e.getEnd),x(e)&&(s=e.getStart)):e.hasOwnProperty("value")?i=v(t,e.value):(c=e.hasOwnProperty("to"),l=e.hasOwnProperty("from"),a=e.hasOwnProperty("start"),c&&(l||a)&&(i=v(t,e.to),a&&(p=v(t,e.start),i.getActive=p.getEnd),l)&&(r=v(t,e.from),i.getStart=r.getEnd)));return i=i||{getActive:n,getEnd:o,getStart:s}}t.exports=v},88032:(t,e,i)=>{var b=i(70402),y=i(69902),m=i(23568),x=i(57355),g=i(6113),v=i(55292),_=i(35154),w=i(17777),S=i(269),A=i(86081);t.exports=function(t,e,i){if(e instanceof A)return e.parent=t,e;i=void 0===i?y:S(y,i);var o=_(e,"from",0),s=_(e,"to",1),n=[{value:o}],r=_(e,"delay",i.delay),a=_(e,"easeParams",i.easeParams),h=_(e,"ease",i.ease),s=w("value",s),l=new A(t,n),t=l.add(0,"value",s.getEnd,s.getStart,s.getActive,g(_(e,"ease",h),_(e,"easeParams",a)),v(e,"delay",r),_(e,"duration",i.duration),x(e,"yoyo",i.yoyo),_(e,"hold",i.hold),_(e,"repeat",i.repeat),_(e,"repeatDelay",i.repeatDelay),!1,!1);t.start=o,t.current=o,l.completeDelay=m(e,"completeDelay",0),l.loop=Math.round(m(e,"loop",0)),l.loopDelay=Math.round(m(e,"loopDelay",0)),l.paused=x(e,"paused",!1),l.persist=x(e,"persist",!1),l.callbackScope=_(e,"callbackScope",l);for(var c=b.TYPES,u=0;u<c.length;u++){var d,p=c[u],f=_(e,p,!1);f&&(d=_(e,p+"Params",[]),l.setCallback(p,f,d))}return l}},93109:(t,e,i)=>{var C=i(6113),T=i(35154),P=i(36383);t.exports=function(t,e){var r=T(e=void 0===e?{}:e,"start",0),i=T(e,"ease",null),o=T(e,"grid",null),a=T(e,"from",0),h="first"===a,l="center"===a,c="last"===a,u="number"==typeof a,d=Array.isArray(t),p=d?parseFloat(t[0]):parseFloat(t),f=d?parseFloat(t[1]):0,b=Math.max(p,f);if(d&&(r+=p),o){var y=o[0],m=o[1],s=0,n=0,x=[];c?(s=y-1,n=m-1):u?(s=a%y,n=Math.floor(a/y)):l&&(s=(y-1)/2,n=(m-1)/2);for(var g=P.MIN_SAFE_INTEGER,v=0;v<m;v++){x[v]=[];for(var _=0;_<y;_++){var w=s-_,S=n-v,w=Math.sqrt(w*w+S*S);g<w&&(g=w),x[v][_]=w}}}var A=i?C(i):null;return o?function(t,e,i,o){var s=0,n=o%y,o=Math.floor(o/y);return 0<=n&&n<y&&0<=o&&o<m&&(s=x[o][n]),(d?(o=f-p,A?s/g*o*A(s/g):s/g*o):A?s*p*A(s/g):s*p)+r}:function(t,e,i,o,s){var n;return s--,h?n=o:l?n=Math.abs(s/2-o):c?n=s-o:u&&(n=Math.abs(a-o)),(d?(o=l?(f-p)/s*(2*n):(f-p)/s*n,A?o*A(n/s):o):A?s*b*A(n/s):n*p)+r}}},8357:(t,e,i)=>{var P=i(70402),B=i(69902),E=i(23568),M=i(57355),D=i(6113),O=i(91389),R=i(55292),L=i(82985),F=i(62329),I=i(35154),k=i(17777),V=i(269),G=i(86081);t.exports=function(t,e,i){if(e instanceof G)return e.parent=t,e;i=void 0===i?B:V(B,i);var o=F(e);!o&&i.targets&&(o=i.targets);function s(t,e,i,o){var s,n;"texture"===i?(s=o,n=void 0,Array.isArray(o)?(s=o[0],n=o[1]):o.hasOwnProperty("value")?(s=o.value,Array.isArray(o.value)?(s=o.value[0],n=o.value[1]):"string"==typeof o.value&&(s=o.value)):"string"==typeof o&&(s=o),t.addFrame(e,s,n,R(o,"delay",r),I(o,"duration",a),I(o,"hold",c),I(o,"repeat",u),I(o,"repeatDelay",d),M(o,"flipX",f),M(o,"flipY",b))):(s=k(i,o),n=O(I(o,"interpolation",y)),t.add(e,i,s.getEnd,s.getStart,s.getActive,D(I(o,"ease",l),I(o,"easeParams",h)),R(o,"delay",r),I(o,"duration",a),M(o,"yoyo",p),I(o,"hold",c),I(o,"repeat",u),I(o,"repeatDelay",d),M(o,"flipX",f),M(o,"flipY",b),n,n?o:null))}for(var n=L(e),r=I(e,"delay",i.delay),a=I(e,"duration",i.duration),h=I(e,"easeParams",i.easeParams),l=I(e,"ease",i.ease),c=I(e,"hold",i.hold),u=I(e,"repeat",i.repeat),d=I(e,"repeatDelay",i.repeatDelay),p=M(e,"yoyo",i.yoyo),f=M(e,"flipX",i.flipX),b=M(e,"flipY",i.flipY),y=I(e,"interpolation",i.interpolation),m=new G(t,o),x=0;x<n.length;x++)for(var g=n[x].key,v=n[x].value,_=0;_<o.length;_++)"scale"!==g||o[_].hasOwnProperty("scale")?s(m,_,g,v):(s(m,_,"scaleX",v),s(m,_,"scaleY",v));m.completeDelay=E(e,"completeDelay",0),m.loop=Math.round(E(e,"loop",0)),m.loopDelay=Math.round(E(e,"loopDelay",0)),m.paused=M(e,"paused",!1),m.persist=M(e,"persist",!1),m.callbackScope=I(e,"callbackScope",m);for(var w=P.TYPES,S=0;S<w.length;S++){var A,C=w[S],T=I(e,C,!1);T&&(A=I(e,C+"Params",[]),m.setCallback(C,T,A))}return m}},26012:(t,e,i)=>{var u=i(70402),d=i(23568),p=i(57355),f=i(62329),b=i(35154),y=i(8357),m=i(43960);t.exports=function(t,e){if(e instanceof m)return e.parent=t,e;var i=new m(t),o=(i.startDelay=b(e,"delay",0),i.completeDelay=d(e,"completeDelay",0),i.loop=Math.round(d(e,"loop",b(e,"repeat",0))),i.loopDelay=Math.round(d(e,"loopDelay",b(e,"repeatDelay",0))),i.paused=p(e,"paused",!1),i.persist=p(e,"persist",!1),i.callbackScope=b(e,"callbackScope",i),u.TYPES);for(c=0;c<o.length;c++){var s,n=o[c],r=b(e,n,!1);r&&(s=b(e,n+"Params",[]),i.setCallback(n,r,s))}var a=b(e,"tweens",null);if(Array.isArray(a)){for(var h=[],t=f(e),l=t?{targets:t}:void 0,c=0;c<a.length;c++)h.push(y(i,a[c],l));i.add(h)}return i}},30231:(t,e,i)=>{t.exports={GetBoolean:i(57355),GetEaseFunction:i(6113),GetInterpolationFunction:i(91389),GetNewValue:i(55292),GetProps:i(82985),GetTargets:i(62329),GetValueOp:i(17777),NumberTweenBuilder:i(88032),StaggerBuilder:i(93109),TweenBuilder:i(8357)}},73685:t=>{t.exports="active"},98540:t=>{t.exports="complete"},67233:t=>{t.exports="loop"},2859:t=>{t.exports="pause"},98336:t=>{t.exports="repeat"},25764:t=>{t.exports="resume"},32193:t=>{t.exports="start"},84371:t=>{t.exports="stop"},70766:t=>{t.exports="update"},55659:t=>{t.exports="yoyo"},842:(t,e,i)=>{t.exports={TWEEN_ACTIVE:i(73685),TWEEN_COMPLETE:i(98540),TWEEN_LOOP:i(67233),TWEEN_PAUSE:i(2859),TWEEN_RESUME:i(25764),TWEEN_REPEAT:i(98336),TWEEN_START:i(32193),TWEEN_STOP:i(84371),TWEEN_UPDATE:i(70766),TWEEN_YOYO:i(55659)}},43066:(t,e,i)=>{i={States:i(86353),Builders:i(30231),Events:i(842),TweenManager:i(40382),Tween:i(86081),TweenData:i(48177),TweenFrameData:i(42220),BaseTween:i(70402),TweenChain:i(43960)};t.exports=i},70402:(t,e,i)=>{var o=i(83419),s=i(50792),n=i(842),r=i(86353),i=new o({Extends:s,initialize:function(t){s.call(this),this.parent=t,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=r.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(t){return this.timeScale=t,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(n.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(n.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(n.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(n.TWEEN_COMPLETE,"onComplete")},complete:function(t){return(t=void 0===t?0:t)?(this.setCompleteDelayState(),this.countdown=t):this.onCompleteHandler(),this},completeAfterLoop:function(t){return this.loopCounter>(t=void 0===t?0:t)&&(this.loopCounter=t),this},remove:function(){return this.parent&&this.parent.remove(this),this},stop:function(){return!this.parent||this.isRemoved()||this.isPendingRemove()||this.isDestroyed()||(this.dispatchEvent(n.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(t){this.countdown-=t,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(n.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(t){return this.countdown-=t,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(n.TWEEN_START,"onStart"),t=0),t},updateCompleteDelay:function(t){this.countdown-=t,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(t,e,i){return void 0===i&&(i=[]),this.callbacks.hasOwnProperty(t)&&(this.callbacks[t]={func:e,params:i}),this},setPendingState:function(){this.state=r.PENDING},setActiveState:function(){this.state=r.ACTIVE},setLoopDelayState:function(){this.state=r.LOOP_DELAY},setCompleteDelayState:function(){this.state=r.COMPLETE_DELAY},setStartDelayState:function(){this.state=r.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=r.PENDING_REMOVE},setRemovedState:function(){this.state=r.REMOVED},setFinishedState:function(){this.state=r.FINISHED},setDestroyedState:function(){this.state=r.DESTROYED},isPending:function(){return this.state===r.PENDING},isActive:function(){return this.state===r.ACTIVE},isLoopDelayed:function(){return this.state===r.LOOP_DELAY},isCompleteDelayed:function(){return this.state===r.COMPLETE_DELAY},isStartDelayed:function(){return this.state===r.START_DELAY},isPendingRemove:function(){return this.state===r.PENDING_REMOVE},isRemoved:function(){return this.state===r.REMOVED},isFinished:function(){return this.state===r.FINISHED},isDestroyed:function(){return this.state===r.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(t){t.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});i.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],t.exports=i},95042:(t,e,i)=>{var o=i(83419),l=i(842),n=i(86353),i=new o({initialize:function(t,e,i,o,s,n,r,a,h,l){this.tween=t,this.targetIndex=e,this.duration=o,this.totalDuration=0,this.delay=0,this.getDelay=i,this.yoyo=s,this.hold=n,this.repeat=r,this.repeatDelay=a,this.repeatCounter=0,this.flipX=h,this.flipY=l,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(t){void 0===t&&(t=this.current),this.tween.targets[this.targetIndex][this.key]=t},setCreatedState:function(){this.state=n.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=n.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=n.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=n.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=n.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=n.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=n.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=n.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===n.CREATED},isDelayed:function(){return this.state===n.DELAY},isPendingRender:function(){return this.state===n.PENDING_RENDER},isPlayingForward:function(){return this.state===n.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===n.PLAYING_BACKWARD},isHolding:function(){return this.state===n.HOLD_DELAY},isRepeating:function(){return this.state===n.REPEAT_DELAY},isComplete:function(){return this.state===n.COMPLETE},setStateFromEnd:function(t){this.yoyo?this.onRepeat(t,!0,!0):0<this.repeatCounter?this.onRepeat(t,!0,!1):this.setCompleteState()},setStateFromStart:function(t){0<this.repeatCounter?this.onRepeat(t,!1):this.setCompleteState()},reset:function(){var t=this.tween,e=t.totalTargets,i=this.targetIndex,o=t.targets[i],s=this.key,o=(this.progress=0,this.elapsed=0,this.delay=this.getDelay(o,s,0,i,e,t),this.repeatCounter=-1===this.repeat?n.MAX:this.repeat,this.setPendingRenderState(),this.duration+this.hold),s=(this.yoyo&&(o+=this.duration),o+this.repeatDelay);this.totalDuration=this.delay+o,-1===this.repeat?(this.totalDuration+=s*n.MAX,t.isInfinite=!0):0<this.repeat&&(this.totalDuration+=s*this.repeat),this.totalDuration>t.duration&&(t.duration=this.totalDuration),this.delay<t.startDelay&&(t.startDelay=this.delay),0<this.delay&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(t,e,i){var o=this.tween,s=o.totalTargets,n=this.targetIndex,r=o.targets[n],a=this.key,h="texture"!==a;this.elapsed=t,this.progress=t/this.duration,this.flipX&&r.toggleFlipX(),this.flipY&&r.toggleFlipY(),h&&(e||i)&&(this.start=this.getStartValue(r,a,this.start,n,s,o)),i?(this.setPlayingBackwardState(),this.dispatchEvent(l.TWEEN_YOYO,"onYoyo")):(this.repeatCounter--,h&&(this.end=this.getEndValue(r,a,this.start,n,s,o)),0<this.repeatDelay?(this.elapsed=this.repeatDelay-t,h&&(this.current=this.start,r[a]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(l.TWEEN_REPEAT,"onRepeat")))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});t.exports=i},69902:t=>{t.exports={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null}},81076:t=>{t.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]},86081:(t,e,i)=>{var o=i(70402),s=i(83419),n=i(842),r=i(44603),a=i(39429),h=i(36383),l=i(86353),y=i(48177),c=i(42220),i=new s({Extends:o,initialize:function(t,e){o.call(this,t),this.targets=e,this.totalTargets=e.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0},add:function(t,e,i,o,s,n,r,a,h,l,c,u,d,p,f,b){t=new y(this,t,e,i,o,s,n,r,a,h,l,c,u,d,p,f,b);return this.totalData=this.data.push(t),t},addFrame:function(t,e,i,o,s,n,r,a,h,l){t=new c(this,t,e,i,o,s,n,r,a,h,l);return this.totalData=this.data.push(t),t},getValue:function(t){void 0===t&&(t=0);var e=null;return e=this.data?this.data[t].current:e},hasTarget:function(t){return this.targets&&-1!==this.targets.indexOf(t)},updateTo:function(t,e,i){if(void 0===i&&(i=!1),"texture"!==t)for(var o=0;o<this.totalData;o++){var s=this.data[o];s.key===t&&(s.isPlayingForward()||s.isPlayingBackward())&&(s.end=e,i)&&(s.start=s.current)}return this},restart:function(){switch(this.state){case l.REMOVED:case l.FINISHED:this.seek(),this.parent.makeActive(this);break;case l.PENDING:case l.PENDING_REMOVE:this.parent.reset(this);break;case l.DESTROYED:break;default:this.seek()}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(0<this.loopCounter)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),0<this.loopDelay?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(n.TWEEN_LOOP,"onLoop"));else{if(!(0<this.completeDelay))return this.onCompleteHandler(),!0;this.countdown=this.completeDelay,this.setCompleteDelayState()}return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,o.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()||((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState()),this},seek:function(t,e,i){if(void 0===t&&(t=0),void 0===e&&(e=16.6),void 0===i&&(i=!1),!this.isDestroyed()){i||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(n.TWEEN_ACTIVE,"onActive");i=this.paused;if(this.paused=!1,0<t){for(var o=Math.floor(t/e),t=t-o*e,s=0;s<o;s++)this.update(e);0<t&&this.update(t)}this.paused=i,this.isSeeking=!1}return this},initTweenData:function(t){void 0===t&&(t=!1),this.duration=0,this.startDelay=h.MAX_SAFE_INTEGER;for(var e=this.data,i=0;i<this.totalData;i++)e[i].reset(t);this.duration=Math.max(this.duration,.01);var o=this.duration,s=this.completeDelay,n=this.loopCounter,r=this.loopDelay;this.totalDuration=0<n?o+s+(o+r)*n:o+s},reset:function(t){return void 0===t&&(t=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,-1===this.loop&&(this.isInfinite=!0,this.loopCounter=l.MAX),t||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(n.TWEEN_ACTIVE,"onActive")),this},update:function(t){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.paused||this.isFinished())return!1;if(t*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(t),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(t),!1;this.hasStarted||(this.startDelay-=t,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(n.TWEEN_START,"onStart"),t=0));var e=!1;if(this.isActive())for(var i=this.data,o=0;o<this.totalData;o++)i[o].update(t)&&(e=!0);this.elapsed+=t,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=t,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),e||this.nextState();var s=this.isPendingRemove();return s&&this.persist&&(this.setFinishedState(),s=!1),s},forward:function(t){return this.update(t),this},rewind:function(t){return this.update(-t),this},dispatchEvent:function(t,e){!this.isSeeking&&(this.emit(t,this,this.targets),t=this.callbacks[e])&&t.func.apply(this.callbackScope,[this,this.targets].concat(t.params))},destroy:function(){o.prototype.destroy.call(this),this.targets=null}});a.register("tween",function(t){return this.scene.sys.tweens.add(t)}),r.register("tween",function(t){return this.scene.sys.tweens.create(t)}),t.exports=i},43960:(t,e,i)=>{var o=i(72905),s=i(70402),n=i(83419),r=i(842),a=i(44603),h=i(39429),l=i(86353),i=new n({Extends:s,initialize:function(t){s.call(this,t),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=-1===this.loop?l.MAX:this.loop,this.setCurrentTween(0),0<this.startDelay&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this.dispatchEvent(r.TWEEN_ACTIVE,"onActive"),this},add:function(t){var e=this.parent.create(t);Array.isArray(e)||(e=[e]);for(var i=this.data,o=0;o<e.length;o++){var s=e[o];s.parent=this,i.push(s.reset())}return this.totalData=i.length,this},remove:function(t){return o(this.data,t),t.setRemovedState(),t===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(t){for(var e=this.data,i=0;i<this.totalData;i++)if(e[i].hasTarget(t))return!0;return!1},restart:function(){return this.isDestroyed()?this:(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(t){return t.seek(),t.setActiveState(),this},makeActive:function(t){return t.reset(),t.setActiveState(),this},nextState:function(){if(0<this.loopCounter)this.loopCounter--,this.resetTweens(),0<this.loopDelay?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(r.TWEEN_LOOP,"onLoop"));else{if(!(0<this.completeDelay))return this.onCompleteHandler(),!0;this.countdown=this.completeDelay,this.setCompleteDelayState()}return!1},play:function(){return this.isDestroyed()||((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,0<this.startDelay&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState()),this},resetTweens:function(){for(var t=this.data,e=this.totalData,i=0;i<e;i++)t[i].reset(!1);this.currentIndex=0,this.currentTween=t[0]},update:function(t){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.isFinished()||this.paused)return!1;t*=this.parent.timeScale,this.isLoopDelayed()?this.updateLoopCountdown(t):this.isCompleteDelayed()?this.updateCompleteDelay(t):this.isStartDelayed()&&(t=this.updateStartCountdown(t));var e=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(t)&&this.nextTween()&&this.nextState(),e=this.isPendingRemove())&&this.persist&&(this.setFinishedState(),e=!1),e},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData||(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(t){this.currentIndex=t,this.currentTween=this.data[t],this.currentTween.setActiveState(),this.currentTween.dispatchEvent(r.TWEEN_ACTIVE,"onActive")},dispatchEvent:function(t,e){this.emit(t,this);t=this.callbacks[e];t&&t.func.apply(this.callbackScope,[this].concat(t.params))},destroy:function(){s.prototype.destroy.call(this),this.currentTween=null}});h.register("tweenchain",function(t){return this.scene.sys.tweens.chain(t)}),a.register("tweenchain",function(t){return this.scene.sys.tweens.create(t)}),t.exports=i},48177:(t,e,i)=>{var m=i(95042),a=i(45319),o=i(83419),h=i(842),i=new o({Extends:m,initialize:function(t,e,i,o,s,n,r,a,h,l,c,u,d,p,f,b,y){m.call(this,t,e,a,h,l,c,u,d,p,f),this.key=i,this.getActiveValue=n,this.getEndValue=o,this.getStartValue=s,this.ease=r,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=b,this.interpolationData=y},reset:function(t){m.prototype.reset.call(this);var e=this.tween.targets[this.targetIndex],i=this.key;t&&(e[i]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(e[i]=this.getActiveValue(e,i,0))},update:function(t){var e,i=this.tween,o=i.totalTargets,s=this.targetIndex,n=i.targets[s],r=this.key;return n?(this.isCountdown&&(this.elapsed-=t,this.elapsed<=0)&&(t=this.elapsed=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(h.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0)),this.isPendingRender()?(this.start=this.getStartValue(n,r,n[r],s,o,i),this.end=this.getEndValue(n,r,this.start,s,o,i),this.current=this.start,n[r]=this.start,this.setPlayingForwardState(),!0):(s=this.isPlayingForward(),o=this.isPlayingBackward(),(s||o)&&(i=this.elapsed,o=0,e=!1,(i+=t)>=(t=this.duration)?(o=i-t,i=t,e=!0):i<0&&(i=0),t=a(i/t,0,1),this.elapsed=i,this.progress=t,this.previous=this.current,e?s?(this.current=this.end,n[r]=this.end,0<this.hold?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(o)):(this.current=this.start,n[r]=this.start,this.setStateFromStart(o)):(i=this.ease(t=s?t:1-t),this.interpolation?this.current=this.interpolation(this.interpolationData,i):this.current=this.start+(this.end-this.start)*i,n[r]=this.current),this.dispatchEvent(h.TWEEN_UPDATE,"onUpdate")),!this.isComplete())):(this.setCompleteState(),!1)},dispatchEvent:function(t,e){var i,o,s,n,r=this.tween;!r.isSeeking&&(i=r.targets[this.targetIndex],o=this.key,s=this.current,n=this.previous,r.emit(t,r,o,i,s,n),t=r.callbacks[e])&&t.func.apply(r.callbackScope,[r,i,o,s,n].concat(t.params))},destroy:function(){m.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});t.exports=i},42220:(t,e,i)=>{var u=i(95042),r=i(45319),o=i(83419),a=i(842),i=new o({Extends:u,initialize:function(t,e,i,o,s,n,r,a,h,l,c){u.call(this,t,e,s,n,!1,r,a,h,l,c),this.key="texture",this.startTexture=null,this.endTexture=i,this.startFrame=null,this.endFrame=o,this.yoyo=0!==a},reset:function(t){u.prototype.reset.call(this);var e=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=e.texture.key,this.startFrame=e.frame.name),t&&e.setTexture(this.startTexture,this.startFrame)},update:function(t){var e,i,o,s=this.tween,n=this.targetIndex,s=s.targets[n];return s?(this.isCountdown&&(this.elapsed-=t,this.elapsed<=0)&&(t=this.elapsed=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(a.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0)),this.isPendingRender()?(this.startTexture&&s.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0):(n=this.isPlayingForward(),e=this.isPlayingBackward(),(n||e)&&(e=this.elapsed,i=0,o=!1,(e+=t)>=(t=this.duration)?(i=e-t,e=t,o=!0):e<0&&(e=0),t=r(e/t,0,1),this.elapsed=e,this.progress=t,o&&(n?(s.setTexture(this.endTexture,this.endFrame),0<this.hold?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(i)):(s.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(i))),this.dispatchEvent(a.TWEEN_UPDATE,"onUpdate")),!this.isComplete())):(this.setCompleteState(),!1)},dispatchEvent:function(t,e){var i,o,s=this.tween;!s.isSeeking&&(i=s.targets[this.targetIndex],o=this.key,s.emit(t,s,o,i),t=s.callbacks[e])&&t.func.apply(s.callbackScope,[s,i,o].concat(t.params))},destroy:function(){u.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});t.exports=i},86353:t=>{t.exports={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999}},83419:t=>{function n(t,e,i,o){for(var s in e)if(e.hasOwnProperty(s)){n=e,r=s,n=(a=i)?n[r]:Object.getOwnPropertyDescriptor(n,r);a=!!((n=!a&&n.value&&"object"==typeof n.value?n.value:n)&&((r=n).get&&"function"==typeof r.get||r.set&&"function"==typeof r.set))&&(void 0===n.enumerable&&(n.enumerable=!0),void 0===n.configurable&&(n.configurable=!0),n);if(!1!==a){if(r=(o||t).prototype,n=s,(r=Object.getOwnPropertyDescriptor(r,n))&&!1===(r=r.value&&"object"==typeof r.value?r.value:r).configurable){if(h.ignoreFinals)continue;throw new Error("cannot override final property '"+s+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(t.prototype,s,a)}else t.prototype[s]=e[s]}var n,r,a}function r(t,e){if(e){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++)n(t,e[i].prototype||e[i])}}function h(t){var e,i,o;if((t=t||{}).initialize){if("function"!=typeof t.initialize)throw new Error("initialize must be a function");o=t.initialize,delete t.initialize}else o=t.Extends?(i=t.Extends,function(){i.apply(this,arguments)}):function(){};t.Extends?(o.prototype=Object.create(t.Extends.prototype),o.prototype.constructor=o,e=t.Extends,delete t.Extends):o.prototype.constructor=o;var s=null;return t.Mixins&&(s=t.Mixins,delete t.Mixins),r(o,s),n(o,t,!0,e),o}h.extend=n,h.mixin=r,h.ignoreFinals=!1,t.exports=h},29747:t=>{t.exports=function(){}},20242:t=>{t.exports=function(){return null}},71146:t=>{t.exports=function(t,e,i,o,s){if(void 0===s&&(s=t),0<i){var n=i-t.length;if(n<=0)return null}if(!Array.isArray(e))return-1===t.indexOf(e)?(t.push(e),o&&o.call(s,e),e):null;for(var r=e.length-1;0<=r;)-1!==t.indexOf(e[r])&&e.splice(r,1),r--;if(0===(r=e.length))return null;0<i&&n<r&&(e.splice(n),r=n);for(var a=0;a<r;a++){var h=e[a];t.push(h),o&&o.call(s,h)}return e}},51067:t=>{t.exports=function(t,e,i,o,s,n){if(void 0===i&&(i=0),void 0===n&&(n=t),0<o){var r=o-t.length;if(r<=0)return null}if(!Array.isArray(e))return-1===t.indexOf(e)?(t.splice(i,0,e),s&&s.call(n,e),e):null;for(var a=e.length-1;0<=a;)-1!==t.indexOf(e[a])&&e.pop(),a--;if(0===(a=e.length))return null;0<o&&r<a&&(e.splice(r),a=r);for(var h=a-1;0<=h;h--){var l=e[h];t.splice(i,0,l),s&&s.call(n,l)}return e}},66905:t=>{t.exports=function(t,e){var i=t.indexOf(e);return-1!==i&&i<t.length&&(t.splice(i,1),t.push(e)),e}},21612:(t,e,i)=>{var a=i(82011);t.exports=function(t,e,i,o,s){void 0===s&&(s=t.length);var n=0;if(a(t,o=void 0===o?0:o,s))for(var r=o;r<s;r++)t[r][e]===i&&n++;return n}},95428:t=>{t.exports=function(t,e,i){for(var o=[null],s=3;s<arguments.length;s++)o.push(arguments[s]);for(s=0;s<t.length;s++)o[0]=t[s],e.apply(i,o);return t}},36914:(t,e,i)=>{var a=i(82011);t.exports=function(t,e,i,o,s){if(void 0===s&&(s=t.length),a(t,o=void 0===o?0:o,s)){for(var n=[null],r=5;r<arguments.length;r++)n.push(arguments[r]);for(r=o;r<s;r++)n[0]=t[r],e.apply(i,n)}return t}},81957:t=>{t.exports=function(t,e,i){if(!e.length)return NaN;if(1===e.length)return e[0];var o,s,n=1;if(i){if(t<e[0][i])return e[0];for(;e[n][i]<t;)n++}else for(;e[n]<t;)n++;return n>e.length&&(n=e.length),i?(o=e[n-1][i],(s=e[n][i])-t<=t-o?e[n]:e[n-1]):(o=e[n-1],(s=e[n])-t<=t-o?s:o)}},43491:t=>{function o(t,e){void 0===e&&(e=[]);for(var i=0;i<t.length;i++)Array.isArray(t[i])?o(t[i],e):e.push(t[i]);return e}t.exports=o},46710:(t,e,i)=>{var h=i(82011);t.exports=function(t,e,i,o,s){void 0===s&&(s=t.length);var n=[];if(h(t,o=void 0===o?0:o,s))for(var r=o;r<s;r++){var a=t[r];(!e||void 0===i&&a.hasOwnProperty(e)||e&&void 0!==i&&a[e]===i)&&n.push(a)}return n}},58731:(t,e,i)=>{var a=i(82011);t.exports=function(t,e,i,o,s){if(void 0===s&&(s=t.length),a(t,o=void 0===o?0:o,s))for(var n=o;n<s;n++){var r=t[n];if(!e||void 0===i&&r.hasOwnProperty(e)||e&&void 0!==i&&r[e]===i)return r}return null}},26546:t=>{t.exports=function(t,e,i){void 0===i&&(i=t.length);e=(e=void 0===e?0:e)+Math.floor(Math.random()*i);return void 0===t[e]?null:t[e]}},85835:t=>{t.exports=function(t,e,i){if(e!==i){var o=t.indexOf(e),i=t.indexOf(i);if(o<0||i<0)throw new Error("Supplied items must be elements of the same array");i<o||(t.splice(o,1),i===t.length-1?t.push(e):t.splice(i,0,e))}return t}},83371:t=>{t.exports=function(t,e,i){if(e!==i){var o=t.indexOf(e),i=t.indexOf(i);if(o<0||i<0)throw new Error("Supplied items must be elements of the same array");o<i||(t.splice(o,1),0===i?t.unshift(e):t.splice(i,0,e))}return t}},70864:t=>{t.exports=function(t,e){var i,o,s=t.indexOf(e);return 0<s&&(i=t[s-1],o=t.indexOf(i),t[s]=i,t[o]=e),t}},69693:t=>{t.exports=function(t,e,i){var o=t.indexOf(e);if(-1===o||i<0||i>=t.length)throw new Error("Supplied index out of bounds");return o!==i&&(t.splice(o,1),t.splice(i,0,e)),e}},40853:t=>{t.exports=function(t,e){var i,o,s=t.indexOf(e);return-1!==s&&s<t.length-1&&(i=t[s+1],o=t.indexOf(i),t[s]=i,t[o]=e),t}},20283:t=>{t.exports=function(t,e,i,o){var s,n=[],r=!1;if((i||o)&&(r=!0,i=i||"",o=o||""),e<t)for(s=t;e<=s;s--)n.push(r?i+s.toString()+o:s);else for(s=t;s<=e;s++)n.push(r?i+s.toString()+o:s);return n}},593:(t,e,i)=>{var r=i(2284);t.exports=function(t,e,i){void 0===t&&(t=0),void 0===i&&(i=1),null===(e=void 0===e?null:e)&&(e=t,t=0);for(var o=[],s=Math.max(r((e-t)/(i||1)),0),n=0;n<s;n++)o.push(t),t+=i;return o}},43886:t=>{function p(t,e,i){var o=t[e];t[e]=t[i],t[i]=o}function f(t,e){return t<e?-1:e<t?1:0}function b(t,e,i,o,s){for(void 0===i&&(i=0),void 0===o&&(o=t.length-1),void 0===s&&(s=f);i<o;){600<o-i&&(n=o-i+1,l=e-i+1,a=Math.log(n),r=.5*Math.exp(2*a/3),a=.5*Math.sqrt(a*r*(n-r)/n)*(l-n/2<0?-1:1),h=Math.max(i,Math.floor(e-l*r/n+a)),l=Math.min(o,Math.floor(e+(n-l)*r/n+a)),b(t,e,h,l,s));var n,r,a,h,l,c=t[e],u=i,d=o;for(p(t,i,e),0<s(t[o],c)&&p(t,i,o);u<d;){for(p(t,u,d),u++,d--;s(t[u],c)<0;)u++;for(;0<s(t[d],c);)d--}0===s(t[i],c)?p(t,i,d):p(t,++d,o),d<=e&&(i=d+1),e<=d&&(o=d-1)}}t.exports=b},88492:(t,e,i)=>{var d=i(35154),p=i(33680);t.exports=function(t,e,i){var o=d(i,"max",0),s=d(i,"qty",1),n=d(i,"random",!1),r=d(i,"randomB",!1),a=d(i,"repeat",0),h=d(i,"yoyo",!1),l=[];r&&p(e),-1===a&&(a=0===o?0:(i=t.length*e.length*s,h&&(i*=2),Math.ceil(o/i)));for(var c=0;c<=a;c++){var u=function(t,e,i){for(var o=[],s=0;s<t.length;s++)for(var n=0;n<e.length;n++)for(var r=0;r<i;r++)o.push({a:t[s],b:e[n]});return o}(t,e,s);n&&p(u),l=l.concat(u),h&&(u.reverse(),l=l.concat(u))}return o&&l.splice(o),l}},72905:(t,e,i)=>{var h=i(19133);t.exports=function(t,e,i,o){var s;if(void 0===o&&(o=t),!Array.isArray(e))return-1!==(s=t.indexOf(e))?(h(t,s),i&&i.call(o,e),e):null;for(var n=e.length-1,r=[];0<=n;){var a=e[n];-1!==(s=t.indexOf(a))&&(h(t,s),r.push(a),i)&&i.call(o,a),n--}return r}},60248:(t,e,i)=>{var s=i(19133);t.exports=function(t,e,i,o){if(void 0===o&&(o=t),e<0||e>t.length-1)throw new Error("Index out of bounds");t=s(t,e);return i&&i.call(o,t),t}},81409:(t,e,i)=>{var h=i(82011);t.exports=function(t,e,i,o,s){if(void 0===i&&(i=t.length),void 0===s&&(s=t),h(t,e=void 0===e?0:e,i)){var n=t.splice(e,i-e);if(o)for(var r=0;r<n.length;r++){var a=n[r];o.call(s,a)}return n}return[]}},31856:(t,e,i)=>{var o=i(19133);t.exports=function(t,e,i){void 0===i&&(i=t.length);e=(e=void 0===e?0:e)+Math.floor(Math.random()*i);return o(t,e)}},42169:t=>{t.exports=function(t,e,i){var e=t.indexOf(e),o=t.indexOf(i);return-1!==e&&-1===o&&(t[e]=i,!0)}},86003:t=>{t.exports=function(t,e){void 0===e&&(e=1);for(var i=null,o=0;o<e;o++)i=t.shift(),t.push(i);return i}},49498:t=>{t.exports=function(t,e){void 0===e&&(e=1);for(var i=null,o=0;o<e;o++)i=t.pop(),t.unshift(i);return i}},82011:t=>{t.exports=function(t,e,i,o){t=t.length;if(e<0||t<e||i<=e||t<i){if(o)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},89545:t=>{t.exports=function(t,e){var i=t.indexOf(e);return-1!==i&&0<i&&(t.splice(i,1),t.unshift(e)),e}},17810:(t,e,i)=>{var a=i(82011);t.exports=function(t,e,i,o,s){if(void 0===s&&(s=t.length),a(t,o=void 0===o?0:o,s))for(var n=o;n<s;n++){var r=t[n];r.hasOwnProperty(e)&&(r[e]=i)}return t}},33680:t=>{t.exports=function(t){for(var e=t.length-1;0<e;e--){var i=Math.floor(Math.random()*(e+1)),o=t[e];t[e]=t[i],t[i]=o}return t}},90126:t=>{t.exports=function(t){var i=/\D/g;return t.sort(function(t,e){return parseInt(t.replace(i,""),10)-parseInt(e.replace(i,""),10)}),t}},19133:t=>{t.exports=function(t,e){if(!(e>=t.length)){for(var i=t.length-1,o=t[e],s=e;s<i;s++)t[s]=t[s+1];return t.length=i,o}}},19186:(t,e,i)=>{var o=i(82264);function s(t,e){return String(t).localeCompare(e)}function r(t,e,i,o){for(var s,n,r,a,h=t.length,l=0,c=2*i,u=0;u<h;u+=c)for(h<(n=(s=u+i)+i)&&(n=h),r=u,a=s=h<s?h:s;;)if(r<s&&a<n)e(t[r],t[a])<=0?o[l++]=t[r++]:o[l++]=t[a++];else if(r<s)o[l++]=t[r++];else{if(!(a<n))break;o[l++]=t[a++]}}t.exports=function(t,e){return void 0===e&&(e=s),!t||t.length<2?t:o.features.stableSort?t.sort(e):((e=function(t,e){var i=t.length;if(!(i<=1))for(var o=new Array(i),s=1;s<i;s*=2){r(t,e,s,o);var n=t;t=o,o=n}return t}(t,e))!==t&&r(e,null,t.length,t),t)}},25630:t=>{t.exports=function(t,e,i){if(e!==i){var o=t.indexOf(e),s=t.indexOf(i);if(o<0||s<0)throw new Error("Supplied items must be elements of the same array");t[o]=i,t[s]=e}return t}},37105:(t,e,i)=>{t.exports={Matrix:i(54915),Add:i(71146),AddAt:i(51067),BringToTop:i(66905),CountAllMatching:i(21612),Each:i(95428),EachInRange:i(36914),FindClosestInSorted:i(81957),Flatten:i(43491),GetAll:i(46710),GetFirst:i(58731),GetRandom:i(26546),MoveDown:i(70864),MoveTo:i(69693),MoveUp:i(40853),MoveAbove:i(85835),MoveBelow:i(83371),NumberArray:i(20283),NumberArrayStep:i(593),QuickSelect:i(43886),Range:i(88492),Remove:i(72905),RemoveAt:i(60248),RemoveBetween:i(81409),RemoveRandomElement:i(31856),Replace:i(42169),RotateLeft:i(86003),RotateRight:i(49498),SafeRange:i(82011),SendToBack:i(89545),SetAll:i(17810),Shuffle:i(33680),SortByDigits:i(90126),SpliceOne:i(19133),StableSort:i(19186),Swap:i(25630)}},86922:t=>{t.exports=function(t){if(!Array.isArray(t)||!Array.isArray(t[0]))return!1;for(var e=t[0].length,i=1;i<t.length;i++)if(t[i].length!==e)return!1;return!0}},63362:(t,e,i)=>{var r=i(41836),a=i(86922);t.exports=function(t){var e="";if(a(t))for(var i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++){var s=t[i][o].toString();e+="undefined"!==s?r(s,2):"?",o<t[i].length-1&&(e+=" |")}if(i<t.length-1){e+="\n";for(var n=0;n<t[i].length;n++)e+="---",n<t[i].length-1&&(e+="+");e+="\n"}}return e}},92598:t=>{t.exports=function(t){return t.reverse()}},21224:t=>{t.exports=function(t){for(var e=0;e<t.length;e++)t[e].reverse();return t}},98717:(t,e,i)=>{var o=i(37829);t.exports=function(t){return o(t,180)}},44657:(t,e,i)=>{var o=i(37829);t.exports=function(t,e){void 0===e&&(e=1);for(var i=0;i<e;i++)t=o(t,90);return t}},37829:(t,e,i)=>{var o=i(86922),s=i(2429);t.exports=function(t,e){if(void 0===e&&(e=90),!o(t))return null;if(90===(e="string"!=typeof e?(e%360+360)%360:e)||-270===e||"rotateLeft"===e)(t=s(t)).reverse();else if(-90===e||270===e||"rotateRight"===e)t.reverse(),t=s(t);else if(180===Math.abs(e)||"rotate180"===e){for(var i=0;i<t.length;i++)t[i].reverse();t.reverse()}return t}},92632:(t,e,i)=>{var o=i(37829);t.exports=function(t,e){void 0===e&&(e=1);for(var i=0;i<e;i++)t=o(t,-90);return t}},69512:(t,e,i)=>{var n=i(86003),r=i(49498);t.exports=function(t,e,i){if(void 0===e&&(e=0),0!==(i=void 0===i?0:i)&&(i<0?n(t,Math.abs(i)):r(t,i)),0!==e)for(var o=0;o<t.length;o++){var s=t[o];e<0?n(s,Math.abs(e)):r(s,e)}return t}},2429:t=>{t.exports=function(t){for(var e=t.length,i=t[0].length,o=new Array(i),s=0;s<i;s++){o[s]=new Array(e);for(var n=e-1;-1<n;n--)o[s][n]=t[n][s]}return o}},54915:(t,e,i)=>{t.exports={CheckMatrix:i(86922),MatrixToString:i(63362),ReverseColumns:i(92598),ReverseRows:i(21224),Rotate180:i(98717),RotateLeft:i(44657),RotateMatrix:i(37829),RotateRight:i(92632),Translate:i(69512),TransposeMatrix:i(2429)}},71334:t=>{var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";t.exports=function(t,e){for(var i=new Uint8Array(t),o=i.length,s=e?"data:"+e+";base64,":"",n=0;n<o;n+=3)s=(s=(s=(s+=r[i[n]>>2])+r[(3&i[n])<<4|i[n+1]>>4])+r[(15&i[n+1])<<2|i[n+2]>>6])+r[63&i[n+2]];return o%3==2?s=s.substring(0,s.length-1)+"=":o%3==1&&(s=s.substring(0,s.length-2)+"=="),s}},53134:t=>{for(var c=new Uint8Array(256),e=0;e<64;e++)c["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(e)]=e;t.exports=function(t){var e,i,o,s,n=(t=t.substr(t.indexOf(",")+1)).length,r=.75*n,a=0;"="===t[n-1]&&(r--,"="===t[n-2])&&r--;for(var r=new ArrayBuffer(r),h=new Uint8Array(r),l=0;l<n;l+=4)e=c[t.charCodeAt(l)],i=c[t.charCodeAt(l+1)],o=c[t.charCodeAt(l+2)],s=c[t.charCodeAt(l+3)],h[a++]=e<<2|i>>4,h[a++]=(15&i)<<4|o>>2,h[a++]=(3&o)<<6|63&s;return r}},65839:(t,e,i)=>{t.exports={ArrayBufferToBase64:i(71334),Base64ToArrayBuffer:i(53134)}},91799:(t,e,i)=>{t.exports={Array:i(37105),Base64:i(65839),Objects:i(1183),String:i(31749),NOOP:i(29747),NULL:i(20242)}},41786:t=>{t.exports=function(t){var e,i={};for(e in t)Array.isArray(t[e])?i[e]=t[e].slice(0):i[e]=t[e];return i}},62644:t=>{function s(t){var e,i,o;if("object"!=typeof t||null===t)return t;for(o in e=Array.isArray(t)?[]:{},t)i=t[o],e[o]=s(i);return e}t.exports=s},79291:(t,e,i)=>{function l(){var t,e,i,o,s,n=arguments[0]||{},r=1,a=arguments.length,h=!1;for("boolean"==typeof n&&(h=n,n=arguments[1]||{},r=2),a===r&&(n=this,--r);r<a;r++)if(null!=(t=arguments[r]))for(e in t)s=n[e],n!==(i=t[e])&&(h&&i&&(c(i)||(o=Array.isArray(i)))?(s=o?(o=!1,s&&Array.isArray(s)?s:[]):s&&c(s)?s:{},n[e]=l(h,s,i)):void 0!==i&&(n[e]=i));return n}var c=i(41212);t.exports=l},23568:(t,e,i)=>{var o=i(75508),s=i(35154);t.exports=function(t,e,i){t=s(t,e,null);if(null===t)return i;if(Array.isArray(t))return o.RND.pick(t);if("object"==typeof t){if(t.hasOwnProperty("randInt"))return o.RND.integerInRange(t.randInt[0],t.randInt[1]);if(t.hasOwnProperty("randFloat"))return o.RND.realInRange(t.randFloat[0],t.randFloat[1])}else if("function"==typeof t)return t(e);return t}},95540:t=>{t.exports=function(t,e,i){var o=typeof t;return t&&"number"!=o&&"string"!=o&&t.hasOwnProperty(e)&&void 0!==t[e]?t[e]:i}},82840:(t,e,i)=>{var n=i(35154),r=i(45319);t.exports=function(t,e,i,o,s){t=n(t,e,s=void 0===s?i:s);return r(t,i,o)}},35154:t=>{t.exports=function(t,e,i,o){if(!t&&!o||"number"==typeof t)return i;if(t&&t.hasOwnProperty(e))return t[e];if(o&&o.hasOwnProperty(e))return o[e];if(-1===e.indexOf("."))return i;for(var s=e.split("."),n=t,r=o,a=i,h=i,l=!0,c=!0,u=0;u<s.length;u++)n&&n.hasOwnProperty(s[u])?(a=n[s[u]],n=n[s[u]]):l=!1,r&&r.hasOwnProperty(s[u])?(h=r[s[u]],r=r[s[u]]):c=!1;return l?a:c?h:i}},69036:t=>{t.exports=function(t,e){for(var i=0;i<e.length;i++)if(!t.hasOwnProperty(e[i]))return!1;return!0}},1985:t=>{t.exports=function(t,e){for(var i=0;i<e.length;i++)if(t.hasOwnProperty(e[i]))return!0;return!1}},97022:t=>{t.exports=function(t,e){return t.hasOwnProperty(e)}},41212:t=>{t.exports=function(t){if(!t||"object"!=typeof t||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0}},46975:(t,e,i)=>{var s=i(41786);t.exports=function(t,e){var i,o=s(t);for(i in e)o.hasOwnProperty(i)||(o[i]=e[i]);return o}},269:(t,e,i)=>{var s=i(41786);t.exports=function(t,e){var i,o=s(t);for(i in e)o.hasOwnProperty(i)&&(o[i]=e[i]);return o}},18254:(t,e,i)=>{var n=i(97022);t.exports=function(t,e){for(var i={},o=0;o<e.length;o++){var s=e[o];n(t,s)&&(i[s]=t[s])}return i}},61622:t=>{t.exports=function(t,e,i){if(!t||"number"==typeof t)return!1;if(t.hasOwnProperty(e))t[e]=i;else{if(-1===e.indexOf("."))return!1;for(var o=e.split("."),s=t,n=t,r=0;r<o.length;r++){if(!s.hasOwnProperty(o[r]))return!1;s=(n=s)[o[r]]}n[o[o.length-1]]=i}return!0}},1183:(t,e,i)=>{t.exports={Clone:i(41786),DeepCopy:i(62644),Extend:i(79291),GetAdvancedValue:i(23568),GetFastValue:i(95540),GetMinMaxValue:i(82840),GetValue:i(35154),HasAll:i(69036),HasAny:i(1985),HasValue:i(97022),IsPlainObject:i(41212),Merge:i(46975),MergeRight:i(269),Pick:i(18254),SetValue:i(61622)}},27902:t=>{t.exports=function(t,i){return t.replace(/%([0-9]+)/g,function(t,e){return i[Number(e)-1]})}},41836:t=>{t.exports=function(t,e,i,o){void 0===i&&(i=" "),void 0===o&&(o=3);var s;if((e=void 0===e?0:e)+1>=(t=t.toString()).length)switch(o){case 1:t=new Array(e+1-t.length).join(i)+t;break;case 3:var n=Math.ceil((s=e-t.length)/2);t=new Array(s-n+1).join(i)+t+new Array(n+1).join(i);break;default:t+=new Array(e+1-t.length).join(i)}return t}},33628:t=>{t.exports=function(t,e){return 0===e?t.slice(1):t.slice(0,e-1)+t.slice(e)}},27671:t=>{t.exports=function(t){return t.split("").reverse().join("")}},45650:t=>{t.exports=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}},35355:t=>{t.exports=function(t){return t&&t[0].toUpperCase()+t.slice(1)}},31749:(t,e,i)=>{t.exports={Format:i(27902),Pad:i(41836),RemoveAt:i(33628),Reverse:i(27671),UppercaseFirst:i(35355),UUID:i(45650)}}},s={},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i(85454);function i(t){var e=s[t];return void 0!==e||(e=s[t]={exports:{}},o[t](e,e.exports,i)),e.exports}var o,s});var COMPILED=!1,goog=goog||{};goog.global=this,goog.global.CLOSURE_UNCOMPILED_DEFINES,goog.global.CLOSURE_DEFINES,goog.isDef=function(t){return void 0!==t},goog.exportPath_=function(t,e,i){var o,s=t.split("."),n=i||goog.global;s[0]in n||!n.execScript||n.execScript("var "+s[0]);for(;s.length&&(o=s.shift());)!s.length&&goog.isDef(e)?n[o]=e:n=n[o]||(n[o]={})},goog.define=function(t,e){COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,t)?e=goog.global.CLOSURE_UNCOMPILED_DEFINES[t]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,t)&&(e=goog.global.CLOSURE_DEFINES[t])),goog.exportPath_(t,e)},goog.DEBUG=!0,goog.define("goog.LOCALE","en"),goog.define("goog.TRUSTED_SITE",!0),goog.define("goog.STRICT_MODE_COMPATIBLE",!1),goog.provide=function(t){if(!COMPILED){if(goog.isProvided_(t))throw Error('Namespace "'+t+'" already declared.');delete goog.implicitNamespaces_[t];for(var e=t;(e=e.substring(0,e.lastIndexOf(".")))&&!goog.getObjectByName(e);)goog.implicitNamespaces_[e]=!0}goog.exportPath_(t)},goog.setTestOnly=function(t){if(COMPILED&&!goog.DEBUG)throw t=t||"",Error("Importing test-only code into non-debug environment"+(t?": "+t:"."))},goog.forwardDeclare=function(t){},COMPILED||(goog.isProvided_=function(t){return!goog.implicitNamespaces_[t]&&goog.isDefAndNotNull(goog.getObjectByName(t))},goog.implicitNamespaces_={}),goog.getObjectByName=function(t,e){for(var i,o=t.split("."),s=e||goog.global;i=o.shift();){if(!goog.isDefAndNotNull(s[i]))return null;s=s[i]}return s},goog.globalize=function(t,e){var i,o=e||goog.global;for(i in t)o[i]=t[i]},goog.addDependency=function(t,e,i){if(goog.DEPENDENCIES_ENABLED){for(var o,s,n=t.replace(/\\/g,"/"),r=goog.dependencies_,a=0;o=e[a];a++)(r.nameToPath[o]=n)in r.pathToNames||(r.pathToNames[n]={}),r.pathToNames[n][o]=!0;for(var h=0;s=i[h];h++)n in r.requires||(r.requires[n]={}),r.requires[n][s]=!0}},goog.define("goog.ENABLE_DEBUG_LOADER",!0),goog.require=function(t){if(!COMPILED&&!goog.isProvided_(t)){if(goog.ENABLE_DEBUG_LOADER){var e=goog.getPathFromDeps_(t);if(e)return goog.included_[e]=!0,void goog.writeScripts_()}e="goog.require could not find: "+t;throw goog.global.console&&goog.global.console.error(e),Error(e)}},goog.basePath="",goog.global.CLOSURE_BASE_PATH,goog.global.CLOSURE_NO_DEPS,goog.global.CLOSURE_IMPORT_SCRIPT,goog.nullFunction=function(){},goog.identityFunction=function(t,e){return t},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(t){t.getInstance=function(){return t.instance_||(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=t),t.instance_=new t)}},goog.instantiatedSingletons_=[],goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.DEPENDENCIES_ENABLED&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var t=goog.global.document;return void 0!==t&&"write"in t},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var t=goog.global.document.getElementsByTagName("script"),e=t.length-1;0<=e;--e){var i=t[e].src,o=i.lastIndexOf("?"),o=-1==o?i.length:o;if("base.js"==i.substr(o-7,7))return void(goog.basePath=i.substr(0,o-7))}},goog.importScript_=function(t){var e=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[t]&&e(t)&&(goog.dependencies_.written[t]=!0)},goog.writeScriptTag_=function(t){if(goog.inHtmlDocument_()){var e=goog.global.document;if("complete"!=e.readyState)return e.write('<script type="text/javascript" src="'+t+'"><\/script>'),!0;if(/\bdeps.js$/.test(t))return!1;throw Error('Cannot write "'+t+'" after document load')}return!1},goog.writeScripts_=function(){var t,o=[],s={},n=goog.dependencies_;for(t in goog.included_)n.written[t]||function t(e){if(!(e in n.written)){if(e in n.visited)return e in s||(s[e]=!0,o.push(e));if(n.visited[e]=!0,e in n.requires)for(var i in n.requires[e])if(!goog.isProvided_(i)){if(!(i in n.nameToPath))throw Error("Undefined nameToPath for "+i);t(n.nameToPath[i])}e in s||(s[e]=!0,o.push(e))}}(t);for(var e=0;e<o.length;e++){if(!o[e])throw Error("Undefined script input");goog.importScript_(goog.basePath+o[e])}},goog.getPathFromDeps_=function(t){return t in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[t]:null},goog.findBasePath_()),goog.typeOf=function(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var i=Object.prototype.toString.call(t);if("[object Window]"==i)return"object";if("[object Array]"==i||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==i||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e},goog.isNull=function(t){return null===t},goog.isDefAndNotNull=function(t){return null!=t},goog.isArray=function(t){return"array"==goog.typeOf(t)},goog.isArrayLike=function(t){var e=goog.typeOf(t);return"array"==e||"object"==e&&"number"==typeof t.length},goog.isDateLike=function(t){return goog.isObject(t)&&"function"==typeof t.getFullYear},goog.isString=function(t){return"string"==typeof t},goog.isBoolean=function(t){return"boolean"==typeof t},goog.isNumber=function(t){return"number"==typeof t},goog.isFunction=function(t){return"function"==goog.typeOf(t)},goog.isObject=function(t){var e=typeof t;return"object"==e&&null!=t||"function"==e},goog.getUid=function(t){return t[goog.UID_PROPERTY_]||(t[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(t){return!!t[goog.UID_PROPERTY_]},goog.removeUid=function(t){"removeAttribute"in t&&t.removeAttribute(goog.UID_PROPERTY_);try{delete t[goog.UID_PROPERTY_]}catch(t){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(t){var e=goog.typeOf(t);if("object"!=e&&"array"!=e)return t;if(t.clone)return t.clone();var i,o="array"==e?[]:{};for(i in t)o[i]=goog.cloneObject(t[i]);return o},goog.bindNative_=function(t,e,i){return t.call.apply(t.bind,arguments)},goog.bindJs_=function(e,i,t){var o;if(e)return 2<arguments.length?(o=Array.prototype.slice.call(arguments,2),function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,o),e.apply(i,t)}):function(){return e.apply(i,arguments)};throw new Error},goog.bind=function(t,e,i){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(e,t){var i=Array.prototype.slice.call(arguments,1);return function(){var t=i.slice();return t.push.apply(t,arguments),e.apply(this,t)}},goog.mixin=function(t,e){for(var i in e)t[i]=e[i]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(t){if(goog.global.execScript)goog.global.execScript(t,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");var e,i;null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),void 0!==goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_?goog.global.eval(t):((i=(e=goog.global.document).createElement("script")).type="text/javascript",i.defer=!1,i.appendChild(e.createTextNode(t)),e.body.appendChild(i),e.body.removeChild(i))}},goog.evalWorksForGlobals_=null,goog.cssNameMapping_,goog.cssNameMappingStyle_,goog.getCssName=function(t,e){function s(t){return goog.cssNameMapping_[t]||t}var i=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?s:function(t){for(var e=t.split("-"),i=[],o=0;o<e.length;o++)i.push(s(e[o]));return i.join("-")}:function(t){return t};return e?t+"-"+i(e):i(t)},goog.setCssNameMapping=function(t,e){goog.cssNameMapping_=t,goog.cssNameMappingStyle_=e},goog.global.CLOSURE_CSS_NAME_MAPPING,!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(t,i){return t=i?t.replace(/\{\$([^}]+)}/g,function(t,e){return e in i?i[e]:t}):t},goog.getMsgWithFallback=function(t,e){return t},goog.exportSymbol=function(t,e,i){goog.exportPath_(t,e,i)},goog.exportProperty=function(t,e,i){t[e]=i},goog.inherits=function(t,s){function e(){}e.prototype=s.prototype,t.superClass_=s.prototype,t.prototype=new e,(t.prototype.constructor=t).base=function(t,e,i){var o=Array.prototype.slice.call(arguments,2);return s.prototype[e].apply(t,o)}},goog.base=function(t,e,i){var o=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!o)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(o.superClass_)return o.superClass_.constructor.apply(t,Array.prototype.slice.call(arguments,1));for(var s=Array.prototype.slice.call(arguments,2),n=!1,r=t.constructor;r;r=r.superClass_&&r.superClass_.constructor)if(r.prototype[e]===o)n=!0;else if(n)return r.prototype[e].apply(t,s);if(t[e]===o)return t.constructor.prototype[e].apply(t,s);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(t){t.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.defineClass=function(t,e){var i=e.constructor,o=e.statics,i=(i&&i!=Object.prototype.constructor||(i=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),goog.defineClass.createSealingConstructor_(i,t));return t&&goog.inherits(i,t),delete e.constructor,delete e.statics,goog.defineClass.applyProperties_(i.prototype,e),null!=o&&(o instanceof Function?o(i):goog.defineClass.applyProperties_(i,o)),i},goog.defineClass.ClassDescriptor,goog.define("goog.defineClass.SEAL_CLASS_INSTANCES",goog.DEBUG),goog.defineClass.createSealingConstructor_=function(e,t){var i;return!(goog.defineClass.SEAL_CLASS_INSTANCES&&Object.seal instanceof Function)||t&&t.prototype&&t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]?e:i=function(){var t=e.apply(this,arguments)||this;return this.constructor===i&&Object.seal(t),t}},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],goog.defineClass.applyProperties_=function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);for(var o=0;o<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;o++)i=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[o],Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},goog.tagUnsealableClass=function(t){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.provide("box2d.b2Settings"),Object.defineProperty||(Object.defineProperty=function(t,e,i){Object.__defineGetter__&&("get"in i?t.__defineGetter__(e,i.get):"value"in i&&t.__defineGetter__(e,i.value)),Object.__defineSetter__&&("set"in i?t.__defineSetter__(e,i.set):"value"in i&&t.__defineSetter__(e,i.value))}),box2d.DEBUG=!1,box2d.ENABLE_ASSERTS=box2d.DEBUG,box2d.b2Assert=function(t,e,i){box2d.DEBUG},box2d.b2_maxFloat=1e37,box2d.b2_epsilon=1e-5,box2d.b2_epsilon_sq=box2d.b2_epsilon*box2d.b2_epsilon,box2d.b2_pi=Math.PI,box2d.b2_maxManifoldPoints=2,box2d.b2_maxPolygonVertices=8,box2d.b2_aabbExtension=.1,box2d.b2_aabbMultiplier=2,box2d.b2_linearSlop=.008,box2d.b2_angularSlop=2/180*box2d.b2_pi,box2d.b2_polygonRadius=2*box2d.b2_linearSlop,box2d.b2_maxSubSteps=8,box2d.b2_maxTOIContacts=32,box2d.b2_velocityThreshold=1,box2d.b2_maxLinearCorrection=.2,box2d.b2_maxAngularCorrection=8/180*box2d.b2_pi,box2d.b2_maxTranslation=2,box2d.b2_maxTranslationSquared=box2d.b2_maxTranslation*box2d.b2_maxTranslation,box2d.b2_maxRotation=.5*box2d.b2_pi,box2d.b2_maxRotationSquared=box2d.b2_maxRotation*box2d.b2_maxRotation,box2d.b2_baumgarte=.2,box2d.b2_toiBaumgarte=.75,box2d.b2_timeToSleep=.5,box2d.b2_linearSleepTolerance=.01,box2d.b2_angularSleepTolerance=2/180*box2d.b2_pi,box2d.b2Alloc=function(t){return null},box2d.b2Free=function(t){},box2d.b2Log=function(t){goog.global.console.log.apply(null,arguments)},box2d.b2Version=function(t,e,i){this.major=t||0,this.minor=e||0,this.revision=i||0},box2d.b2Version.prototype.major=0,box2d.b2Version.prototype.minor=0,box2d.b2Version.prototype.revision=0,box2d.b2Version.prototype.toString=function(){return this.major+"."+this.minor+"."+this.revision},box2d.b2_version=new box2d.b2Version(2,3,0),box2d.b2_changelist=278,box2d.b2ParseInt=function(t){return parseInt(t,10)},box2d.b2ParseUInt=function(t){return box2d.b2Abs(parseInt(t,10))},box2d.b2MakeArray=function(t,e){void 0===t&&(t=0);var i=new Array(t);if(void 0!==e)for(var o=0;o<t;++o)i[o]=e(o);return i},box2d.b2MakeNumberArray=function(t){return box2d.b2MakeArray(t,function(t){return 0})},goog.provide("box2d.b2Math"),goog.require("box2d.b2Settings"),box2d.b2_pi_over_180=box2d.b2_pi/180,box2d.b2_180_over_pi=180/box2d.b2_pi,box2d.b2_two_pi=2*box2d.b2_pi,box2d.b2Abs=function(t){return t<0?-t:t},box2d.b2Min=function(t,e){return t<e?t:e},box2d.b2Max=function(t,e){return e<t?t:e},box2d.b2Clamp=function(t,e,i){return t<e?e:i<t?i:t},box2d.b2Swap=function(t,e){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1);var i=t[0];t[0]=e[0],e[0]=i},box2d.b2IsValid=function(t){return isFinite(t)},box2d.b2Sq=function(t){return t*t},box2d.b2InvSqrt=function(t){return 1/Math.sqrt(t)},box2d.b2Sqrt=function(t){return Math.sqrt(t)},box2d.b2Pow=function(t,e){return Math.pow(t,e)},box2d.b2DegToRad=function(t){return t*box2d.b2_pi_over_180},box2d.b2RadToDeg=function(t){return t*box2d.b2_180_over_pi},box2d.b2Cos=function(t){return Math.cos(t)},box2d.b2Sin=function(t){return Math.sin(t)},box2d.b2Acos=function(t){return Math.acos(t)},box2d.b2Asin=function(t){return Math.asin(t)},box2d.b2Atan2=function(t,e){return Math.atan2(t,e)},box2d.b2NextPowerOfTwo=function(t){return 1+((t=(t=(t=(t|=t>>1&2147483647)|t>>2&1073741823)|t>>4&268435455)|t>>8&16777215)|t>>16&65535)},box2d.b2IsPowerOfTwo=function(t){return 0<t&&0==(t&t-1)},box2d.b2Random=function(){return 2*Math.random()-1},box2d.b2RandomRange=function(t,e){return(e-t)*Math.random()+t},box2d.b2Vec2=function(t,e){this.x=t||0,this.y=e||0},box2d.b2Vec2.prototype.x=0,box2d.b2Vec2.prototype.y=0,box2d.b2Vec2_zero=new box2d.b2Vec2,box2d.b2Vec2.ZERO=new box2d.b2Vec2,box2d.b2Vec2.UNITX=new box2d.b2Vec2(1,0),box2d.b2Vec2.UNITY=new box2d.b2Vec2(0,1),box2d.b2Vec2.s_t0=new box2d.b2Vec2,box2d.b2Vec2.s_t1=new box2d.b2Vec2,box2d.b2Vec2.s_t2=new box2d.b2Vec2,box2d.b2Vec2.s_t3=new box2d.b2Vec2,box2d.b2Vec2.MakeArray=function(t){return box2d.b2MakeArray(t,function(t){return new box2d.b2Vec2})},box2d.b2Vec2.prototype.Clone=function(){return new box2d.b2Vec2(this.x,this.y)},box2d.b2Vec2.prototype.SetZero=function(){return this.x=0,this.y=0,this},box2d.b2Vec2.prototype.SetXY=function(t,e){return this.x=t,this.y=e,this},box2d.b2Vec2.prototype.Copy=function(t){return this.x=t.x,this.y=t.y,this},box2d.b2Vec2.prototype.SelfAdd=function(t){return this.x+=t.x,this.y+=t.y,this},box2d.b2Vec2.prototype.SelfAddXY=function(t,e){return this.x+=t,this.y+=e,this},box2d.b2Vec2.prototype.SelfSub=function(t){return this.x-=t.x,this.y-=t.y,this},box2d.b2Vec2.prototype.SelfSubXY=function(t,e){return this.x-=t,this.y-=e,this},box2d.b2Vec2.prototype.SelfMul=function(t){return this.x*=t,this.y*=t,this},box2d.b2Vec2.prototype.SelfMulAdd=function(t,e){return this.x+=t*e.x,this.y+=t*e.y,this},box2d.b2Vec2.prototype.SelfMulSub=function(t,e){return this.x-=t*e.x,this.y-=t*e.y,this},box2d.b2Vec2.prototype.Dot=function(t){return this.x*t.x+this.y*t.y},box2d.b2Vec2.prototype.Cross=function(t){return this.x*t.y-this.y*t.x},box2d.b2Vec2.prototype.Length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},box2d.b2Vec2.prototype.GetLength=box2d.b2Vec2.prototype.Length,box2d.b2Vec2.prototype.LengthSquared=function(){var t=this.x,e=this.y;return t*t+e*e},box2d.b2Vec2.prototype.GetLengthSquared=box2d.b2Vec2.prototype.LengthSquared,box2d.b2Vec2.prototype.Normalize=function(){var t,e=this.GetLength();return e>=box2d.b2_epsilon&&(this.x*=t=1/e,this.y*=t),e},box2d.b2Vec2.prototype.SelfNormalize=function(){var t=this.GetLength();return t>=box2d.b2_epsilon&&(this.x*=t=1/t,this.y*=t),this},box2d.b2Vec2.prototype.SelfRotate=function(t,e){var i=this.x,o=this.y;return this.x=t*i-e*o,this.y=e*i+t*o,this},box2d.b2Vec2.prototype.SelfRotateRadians=function(t){return this.SelfRotate(Math.cos(t),Math.sin(t))},box2d.b2Vec2.prototype.SelfRotateDegrees=function(t){return this.SelfRotateRadians(box2d.b2DegToRad(t))},box2d.b2Vec2.prototype.IsValid=function(){return isFinite(this.x)&&isFinite(this.y)},box2d.b2Vec2.prototype.SelfCrossVS=function(t){var e=this.x;return this.x=t*this.y,this.y=-t*e,this},box2d.b2Vec2.prototype.SelfCrossSV=function(t){var e=this.x;return this.x=-t*this.y,this.y=t*e,this},box2d.b2Vec2.prototype.SelfMinV=function(t){return this.x=box2d.b2Min(this.x,t.x),this.y=box2d.b2Min(this.y,t.y),this},box2d.b2Vec2.prototype.SelfMaxV=function(t){return this.x=box2d.b2Max(this.x,t.x),this.y=box2d.b2Max(this.y,t.y),this},box2d.b2Vec2.prototype.SelfAbs=function(){return this.x=box2d.b2Abs(this.x),this.y=box2d.b2Abs(this.y),this},box2d.b2Vec2.prototype.SelfNeg=function(){return this.x=-this.x,this.y=-this.y,this},box2d.b2Vec2.prototype.SelfSkew=function(){var t=this.x;return this.x=-this.y,this.y=t,this},box2d.b2AbsV=function(t,e){return e.x=box2d.b2Abs(t.x),e.y=box2d.b2Abs(t.y),e},box2d.b2MinV=function(t,e,i){return i.x=box2d.b2Min(t.x,e.x),i.y=box2d.b2Min(t.y,e.y),i},box2d.b2MaxV=function(t,e,i){return i.x=box2d.b2Max(t.x,e.x),i.y=box2d.b2Max(t.y,e.y),i},box2d.b2ClampV=function(t,e,i,o){return o.x=box2d.b2Clamp(t.x,e.x,i.x),o.y=box2d.b2Clamp(t.y,e.y,i.y),o},box2d.b2RotateV=function(t,e,i,o){var s=t.x,t=t.y;return o.x=e*s-i*t,o.y=i*s+e*t,o},box2d.b2RotateRadiansV=function(t,e,i){return box2d.b2RotateV(t,Math.cos(e),Math.sin(e),i)},box2d.b2RotateDegreesV=function(t,e,i){return box2d.b2RotateRadiansV(t,box2d.b2DegToRad(e),i)},box2d.b2DotVV=function(t,e){return t.x*e.x+t.y*e.y},box2d.b2CrossVV=function(t,e){return t.x*e.y-t.y*e.x},box2d.b2CrossVS=function(t,e,i){var o=t.x;return i.x=e*t.y,i.y=-e*o,i},box2d.b2CrossVOne=function(t,e){var i=t.x;return e.x=t.y,e.y=-i,e},box2d.b2CrossSV=function(t,e,i){var o=e.x;return i.x=-t*e.y,i.y=t*o,i},box2d.b2CrossOneV=function(t,e){var i=t.x;return e.x=-t.y,e.y=i,e},box2d.b2AddVV=function(t,e,i){return i.x=t.x+e.x,i.y=t.y+e.y,i},box2d.b2SubVV=function(t,e,i){return i.x=t.x-e.x,i.y=t.y-e.y,i},box2d.b2MulSV=function(t,e,i){return i.x=e.x*t,i.y=e.y*t,i},box2d.b2AddVMulSV=function(t,e,i,o){return o.x=t.x+e*i.x,o.y=t.y+e*i.y,o},box2d.b2SubVMulSV=function(t,e,i,o){return o.x=t.x-e*i.x,o.y=t.y-e*i.y,o},box2d.b2AddVCrossSV=function(t,e,i,o){var s=i.x;return o.x=t.x-e*i.y,o.y=t.y+e*s,o},box2d.b2MidVV=function(t,e,i){return i.x=.5*(t.x+e.x),i.y=.5*(t.y+e.y),i},box2d.b2ExtVV=function(t,e,i){return i.x=.5*(e.x-t.x),i.y=.5*(e.y-t.y),i},box2d.b2IsEqualToV=function(t,e){return t.x===e.x&&t.y===e.y},box2d.b2DistanceVV=function(t,e){var i=t.x-e.x,t=t.y-e.y;return Math.sqrt(i*i+t*t)},box2d.b2DistanceSquaredVV=function(t,e){var i=t.x-e.x,t=t.y-e.y;return i*i+t*t},box2d.b2NegV=function(t,e){return e.x=-t.x,e.y=-t.y,e},box2d.b2Vec3=function(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0},box2d.b2Vec3.prototype.x=0,box2d.b2Vec3.prototype.y=0,box2d.b2Vec3.prototype.z=0,box2d.b2Vec3.ZERO=new box2d.b2Vec3,box2d.b2Vec3.s_t0=new box2d.b2Vec3,box2d.b2Vec3.prototype.Clone=function(){return new box2d.b2Vec3(this.x,this.y,this.z)},box2d.b2Vec3.prototype.SetZero=function(){return this.x=0,this.y=0,this.z=0,this},box2d.b2Vec3.prototype.SetXYZ=function(t,e,i){return this.x=t,this.y=e,this.z=i,this},box2d.b2Vec3.prototype.Copy=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},box2d.b2Vec3.prototype.SelfNeg=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},box2d.b2Vec3.prototype.SelfAdd=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},box2d.b2Vec3.prototype.SelfAddXYZ=function(t,e,i){return this.x+=t,this.y+=e,this.z+=i,this},box2d.b2Vec3.prototype.SelfSub=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},box2d.b2Vec3.prototype.SelfSubXYZ=function(t,e,i){return this.x-=t,this.y-=e,this.z-=i,this},box2d.b2Vec3.prototype.SelfMul=function(t){return this.x*=t,this.y*=t,this.z*=t,this},box2d.b2DotV3V3=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},box2d.b2CrossV3V3=function(t,e,i){var o=t.x,s=t.y,t=t.z,n=e.x,r=e.y,e=e.z;return i.x=s*e-t*r,i.y=t*n-o*e,i.z=o*r-s*n,i},box2d.b2Mat22=function(){this.ex=new box2d.b2Vec2(1,0),this.ey=new box2d.b2Vec2(0,1)},box2d.b2Mat22.prototype.ex=null,box2d.b2Mat22.prototype.ey=null,box2d.b2Mat22.IDENTITY=new box2d.b2Mat22,box2d.b2Mat22.prototype.Clone=function(){return(new box2d.b2Mat22).Copy(this)},box2d.b2Mat22.FromVV=function(t,e){return(new box2d.b2Mat22).SetVV(t,e)},box2d.b2Mat22.FromSSSS=function(t,e,i,o){return(new box2d.b2Mat22).SetSSSS(t,e,i,o)},box2d.b2Mat22.FromAngleRadians=function(t){return(new box2d.b2Mat22).SetAngleRadians(t)},box2d.b2Mat22.prototype.SetSSSS=function(t,e,i,o){return this.ex.SetXY(t,i),this.ey.SetXY(e,o),this},box2d.b2Mat22.prototype.SetVV=function(t,e){return this.ex.Copy(t),this.ey.Copy(e),this},box2d.b2Mat22.prototype.SetAngle=function(t){var e=Math.cos(t),t=Math.sin(t);return this.ex.SetXY(e,t),this.ey.SetXY(-t,e),this},box2d.b2Mat22.prototype.SetAngleRadians=box2d.b2Mat22.prototype.SetAngle,box2d.b2Mat22.prototype.SetAngleDegrees=function(t){return this.SetAngle(box2d.b2DegToRad(t))},box2d.b2Mat22.prototype.Copy=function(t){return this.ex.Copy(t.ex),this.ey.Copy(t.ey),this},box2d.b2Mat22.prototype.SetIdentity=function(){return this.ex.SetXY(1,0),this.ey.SetXY(0,1),this},box2d.b2Mat22.prototype.SetZero=function(){return this.ex.SetZero(),this.ey.SetZero(),this},box2d.b2Mat22.prototype.GetAngle=function(){return Math.atan2(this.ex.y,this.ex.x)},box2d.b2Mat22.prototype.GetAngleRadians=box2d.b2Mat22.prototype.GetAngle,box2d.b2Mat22.prototype.GetInverse=function(t){var e=this.ex.x,i=this.ey.x,o=this.ex.y,s=this.ey.y,n=e*s-i*o;return t.ex.x=(n=0!==n?1/n:n)*s,t.ey.x=-n*i,t.ex.y=-n*o,t.ey.y=n*e,t},box2d.b2Mat22.prototype.Solve=function(t,e,i){var o=this.ex.x,s=this.ey.x,n=this.ex.y,r=this.ey.y,a=o*r-s*n;return i.x=(a=0!==a?1/a:a)*(r*t-s*e),i.y=a*(o*e-n*t),i},box2d.b2Mat22.prototype.SelfAbs=function(){return this.ex.SelfAbs(),this.ey.SelfAbs(),this},box2d.b2Mat22.prototype.SelfInv=function(){return this.GetInverse(this)},box2d.b2Mat22.prototype.SelfAddM=function(t){return this.ex.SelfAdd(t.ex),this.ey.SelfAdd(t.ey),this},box2d.b2Mat22.prototype.SelfSubM=function(t){return this.ex.SelfSub(t.ex),this.ey.SelfSub(t.ey),this},box2d.b2AbsM=function(t,e){var i=t.ex,t=t.ey;return e.ex.x=box2d.b2Abs(i.x),e.ex.y=box2d.b2Abs(i.y),e.ey.x=box2d.b2Abs(t.x),e.ey.y=box2d.b2Abs(t.y),e},box2d.b2MulMV=function(t,e,i){var o=t.ex,t=t.ey,s=e.x,e=e.y;return i.x=o.x*s+t.x*e,i.y=o.y*s+t.y*e,i},box2d.b2MulTMV=function(t,e,i){var o=t.ex,t=t.ey,s=e.x,e=e.y;return i.x=o.x*s+o.y*e,i.y=t.x*s+t.y*e,i},box2d.b2AddMM=function(t,e,i){var o=t.ex,t=t.ey,s=e.ex,e=e.ey;return i.ex.x=o.x+s.x,i.ex.y=o.y+s.y,i.ey.x=t.x+e.x,i.ey.y=t.y+e.y,i},box2d.b2MulMM=function(t,e,i){var o=t.ex.x,s=t.ex.y,n=t.ey.x,t=t.ey.y,r=e.ex.x,a=e.ex.y,h=e.ey.x,e=e.ey.y;return i.ex.x=o*r+n*a,i.ex.y=s*r+t*a,i.ey.x=o*h+n*e,i.ey.y=s*h+t*e,i},box2d.b2MulTMM=function(t,e,i){var o=t.ex.x,s=t.ex.y,n=t.ey.x,t=t.ey.y,r=e.ex.x,a=e.ex.y,h=e.ey.x,e=e.ey.y;return i.ex.x=o*r+s*a,i.ex.y=n*r+t*a,i.ey.x=o*h+s*e,i.ey.y=n*h+t*e,i},box2d.b2Mat33=function(){this.ex=new box2d.b2Vec3(1,0,0),this.ey=new box2d.b2Vec3(0,1,0),this.ez=new box2d.b2Vec3(0,0,1)},box2d.b2Mat33.prototype.ex=null,box2d.b2Mat33.prototype.ey=null,box2d.b2Mat33.prototype.ez=null,box2d.b2Mat33.IDENTITY=new box2d.b2Mat33,box2d.b2Mat33.prototype.Clone=function(){return(new box2d.b2Mat33).Copy(this)},box2d.b2Mat33.prototype.SetVVV=function(t,e,i){return this.ex.Copy(t),this.ey.Copy(e),this.ez.Copy(i),this},box2d.b2Mat33.prototype.Copy=function(t){return this.ex.Copy(t.ex),this.ey.Copy(t.ey),this.ez.Copy(t.ez),this},box2d.b2Mat33.prototype.SetIdentity=function(){return this.ex.SetXYZ(1,0,0),this.ey.SetXYZ(0,1,0),this.ez.SetXYZ(0,0,1),this},box2d.b2Mat33.prototype.SetZero=function(){return this.ex.SetZero(),this.ey.SetZero(),this.ez.SetZero(),this},box2d.b2Mat33.prototype.SelfAddM=function(t){return this.ex.SelfAdd(t.ex),this.ey.SelfAdd(t.ey),this.ez.SelfAdd(t.ez),this},box2d.b2Mat33.prototype.Solve33=function(t,e,i,o){var s=this.ex.x,n=this.ex.y,r=this.ex.z,a=this.ey.x,h=this.ey.y,l=this.ey.z,c=this.ez.x,u=this.ez.y,d=this.ez.z,p=s*(h*d-l*u)+n*(l*c-a*d)+r*(a*u-h*c);return o.x=(p=0!==p?1/p:p)*(t*(h*d-l*u)+e*(l*c-a*d)+i*(a*u-h*c)),o.y=p*(s*(e*d-i*u)+n*(i*c-t*d)+r*(t*u-e*c)),o.z=p*(s*(h*i-l*e)+n*(l*t-a*i)+r*(a*e-h*t)),o},box2d.b2Mat33.prototype.Solve22=function(t,e,i){var o=this.ex.x,s=this.ey.x,n=this.ex.y,r=this.ey.y,a=o*r-s*n;return i.x=(a=0!==a?1/a:a)*(r*t-s*e),i.y=a*(o*e-n*t),i},box2d.b2Mat33.prototype.GetInverse22=function(t){var e=this.ex.x,i=this.ey.x,o=this.ex.y,s=this.ey.y,n=e*s-i*o;t.ex.x=(n=0!==n?1/n:n)*s,t.ey.x=-n*i,t.ex.z=0,t.ex.y=-n*o,t.ey.y=n*e,t.ey.z=0,t.ez.x=0,t.ez.y=0,t.ez.z=0},box2d.b2Mat33.prototype.GetSymInverse33=function(t){var e=box2d.b2DotV3V3(this.ex,box2d.b2CrossV3V3(this.ey,this.ez,box2d.b2Vec3.s_t0)),i=this.ex.x,o=this.ey.x,s=this.ez.x,n=this.ey.y,r=this.ez.y,a=this.ez.z;t.ex.x=(e=0!==e?1/e:e)*(n*a-r*r),t.ex.y=e*(s*r-o*a),t.ex.z=e*(o*r-s*n),t.ey.x=t.ex.y,t.ey.y=e*(i*a-s*s),t.ey.z=e*(s*o-i*r),t.ez.x=t.ex.z,t.ez.y=t.ey.z,t.ez.z=e*(i*n-o*o)},box2d.b2MulM33V3=function(t,e,i){var o=e.x,s=e.y,e=e.z;return i.x=t.ex.x*o+t.ey.x*s+t.ez.x*e,i.y=t.ex.y*o+t.ey.y*s+t.ez.y*e,i.z=t.ex.z*o+t.ey.z*s+t.ez.z*e,i},box2d.b2MulM33XYZ=function(t,e,i,o,s){return s.x=t.ex.x*e+t.ey.x*i+t.ez.x*o,s.y=t.ex.y*e+t.ey.y*i+t.ez.y*o,s.z=t.ex.z*e+t.ey.z*i+t.ez.z*o,s},box2d.b2MulM33V2=function(t,e,i){var o=e.x,e=e.y;return i.x=t.ex.x*o+t.ey.x*e,i.y=t.ex.y*o+t.ey.y*e,i},box2d.b2MulM33XY=function(t,e,i,o){return o.x=t.ex.x*e+t.ey.x*i,o.y=t.ex.y*e+t.ey.y*i,o},box2d.b2Rot=function(t){t&&(this.angle=t,this.s=Math.sin(t),this.c=Math.cos(t))},box2d.b2Rot.prototype.angle=0,box2d.b2Rot.prototype.s=0,box2d.b2Rot.prototype.c=1,box2d.b2Rot.IDENTITY=new box2d.b2Rot,box2d.b2Rot.prototype.Clone=function(){return(new box2d.b2Rot).Copy(this)},box2d.b2Rot.prototype.Copy=function(t){return this.angle=t.angle,this.s=t.s,this.c=t.c,this},box2d.b2Rot.prototype.SetAngle=function(t){return this.angle!==t&&(this.angle=t,this.s=Math.sin(t),this.c=Math.cos(t)),this},box2d.b2Rot.prototype.SetAngleRadians=box2d.b2Rot.prototype.SetAngle,box2d.b2Rot.prototype.SetAngleDegrees=function(t){return this.SetAngle(box2d.b2DegToRad(t))},box2d.b2Rot.prototype.SetIdentity=function(){return this.angle=0,this.s=0,this.c=1,this},box2d.b2Rot.prototype.GetAngle=function(){return this.angle},box2d.b2Rot.prototype.GetAngleRadians=box2d.b2Rot.prototype.GetAngle,box2d.b2Rot.prototype.GetAngleDegrees=function(){return box2d.b2RadToDeg(this.GetAngle())},box2d.b2Rot.prototype.GetXAxis=function(t){return t.x=this.c,t.y=this.s,t},box2d.b2Rot.prototype.GetYAxis=function(t){return t.x=-this.s,t.y=this.c,t},box2d.b2MulRR=function(t,e,i){var o=t.c,s=t.s,n=e.c,r=e.s;for(i.s=s*n+o*r,i.c=o*n-s*r,i.angle=t.angle+e.angle;i.angle<-box2d.b2_pi;)i.angle+=box2d.b2_two_pi;for(;i.angle>=box2d.b2_pi;)i.angle-=box2d.b2_two_pi;return i},box2d.b2MulTRR=function(t,e,i){var o=t.c,s=t.s,n=e.c,r=e.s;for(i.s=o*r-s*n,i.c=o*n+s*r,i.angle=t.angle-e.angle;i.angle<-box2d.b2_pi;)i.angle+=box2d.b2_two_pi;for(;i.angle>=box2d.b2_pi;)i.angle-=box2d.b2_two_pi;return i},box2d.b2MulRV=function(t,e,i){var o=t.c,t=t.s,s=e.x,e=e.y;return i.x=o*s-t*e,i.y=t*s+o*e,i},box2d.b2MulTRV=function(t,e,i){var o=t.c,t=t.s,s=e.x,e=e.y;return i.x=o*s+t*e,i.y=-t*s+o*e,i},box2d.b2Transform=function(){this.p=new box2d.b2Vec2,this.q=new box2d.b2Rot},box2d.b2Transform.prototype.p=null,box2d.b2Transform.prototype.q=null,box2d.b2Transform.IDENTITY=new box2d.b2Transform,box2d.b2Transform.prototype.Clone=function(){return(new box2d.b2Transform).Copy(this)},box2d.b2Transform.prototype.Copy=function(t){return this.p.Copy(t.p),this.q.Copy(t.q),this},box2d.b2Transform.prototype.SetIdentity=function(){return this.p.SetZero(),this.q.SetIdentity(),this},box2d.b2Transform.prototype.SetPositionRotation=function(t,e){return this.p.Copy(t),this.q.Copy(e),this},box2d.b2Transform.prototype.SetPositionAngleRadians=function(t,e){return this.p.Copy(t),this.q.SetAngleRadians(e),this},box2d.b2Transform.prototype.SetPosition=function(t){return this.p.Copy(t),this},box2d.b2Transform.prototype.SetPositionXY=function(t,e){return this.p.SetXY(t,e),this},box2d.b2Transform.prototype.SetRotation=function(t){return this.q.Copy(t),this},box2d.b2Transform.prototype.SetRotationAngleRadians=function(t){return this.q.SetAngleRadians(t),this},box2d.b2Transform.prototype.GetPosition=function(){return this.p},box2d.b2Transform.prototype.GetRotation=function(){return this.q},box2d.b2Transform.prototype.GetRotationAngle=function(){return this.q.GetAngle()},box2d.b2Transform.prototype.GetRotationAngleRadians=box2d.b2Transform.prototype.GetRotationAngle,box2d.b2Transform.prototype.GetAngle=function(){return this.q.GetAngle()},box2d.b2Transform.prototype.GetAngleRadians=box2d.b2Transform.prototype.GetAngle,box2d.b2MulXV=function(t,e,i){var o=t.q.c,s=t.q.s,n=e.x,e=e.y;return i.x=o*n-s*e+t.p.x,i.y=s*n+o*e+t.p.y,i},box2d.b2MulTXV=function(t,e,i){var o=t.q.c,s=t.q.s,n=e.x-t.p.x,e=e.y-t.p.y;return i.x=o*n+s*e,i.y=-s*n+o*e,i},box2d.b2MulXX=function(t,e,i){return box2d.b2MulRR(t.q,e.q,i.q),box2d.b2AddVV(box2d.b2MulRV(t.q,e.p,i.p),t.p,i.p),i},box2d.b2MulTXX=function(t,e,i){return box2d.b2MulTRR(t.q,e.q,i.q),box2d.b2MulTRV(t.q,box2d.b2SubVV(e.p,t.p,i.p),i.p),i},box2d.b2Sweep=function(){this.localCenter=new box2d.b2Vec2,this.c0=new box2d.b2Vec2,this.c=new box2d.b2Vec2},box2d.b2Sweep.prototype.localCenter=null,box2d.b2Sweep.prototype.c0=null,box2d.b2Sweep.prototype.c=null,box2d.b2Sweep.prototype.a0=0,box2d.b2Sweep.prototype.a=0,box2d.b2Sweep.prototype.alpha0=0,box2d.b2Sweep.prototype.Clone=function(){return(new box2d.b2Sweep).Copy(this)},box2d.b2Sweep.prototype.Copy=function(t){return this.localCenter.Copy(t.localCenter),this.c0.Copy(t.c0),this.c.Copy(t.c),this.a0=t.a0,this.a=t.a,this.alpha0=t.alpha0,this},box2d.b2Sweep.prototype.GetTransform=function(t,e){var i=1-e,i=(t.p.x=i*this.c0.x+e*this.c.x,t.p.y=i*this.c0.y+e*this.c.y,i*this.a0+e*this.a);return t.q.SetAngleRadians(i),t.p.SelfSub(box2d.b2MulRV(t.q,this.localCenter,box2d.b2Vec2.s_t0)),t},box2d.b2Sweep.prototype.Advance=function(t){box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.alpha0<1);var e=(t-this.alpha0)/(1-this.alpha0);this.c0.x+=e*(this.c.x-this.c0.x),this.c0.y+=e*(this.c.y-this.c0.y),this.a0+=e*(this.a-this.a0),this.alpha0=t},box2d.b2Sweep.prototype.Normalize=function(){var t=box2d.b2_two_pi*Math.floor(this.a0/box2d.b2_two_pi);this.a0-=t,this.a-=t},goog.provide("box2d.b2Controller"),goog.require("box2d.b2Settings"),box2d.b2ControllerEdge=function(){},box2d.b2ControllerEdge.prototype.controller=null,box2d.b2ControllerEdge.prototype.body=null,box2d.b2ControllerEdge.prototype.prevBody=null,box2d.b2ControllerEdge.prototype.nextBody=null,box2d.b2ControllerEdge.prototype.prevController=null,box2d.b2ControllerEdge.prototype.nextController=null,box2d.b2Controller=function(){},box2d.b2Controller.prototype.m_world=null,box2d.b2Controller.prototype.m_bodyList=null,box2d.b2Controller.prototype.m_bodyCount=0,box2d.b2Controller.prototype.m_prev=null,box2d.b2Controller.prototype.m_next=null,box2d.b2Controller.prototype.Step=function(t){},box2d.b2Controller.prototype.Draw=function(t){},box2d.b2Controller.prototype.GetNext=function(){return this.m_next},box2d.b2Controller.prototype.GetPrev=function(){return this.m_prev},box2d.b2Controller.prototype.GetWorld=function(){return this.m_world},box2d.b2Controller.prototype.GetBodyList=function(){return this.m_bodyList},box2d.b2Controller.prototype.AddBody=function(t){var e=new box2d.b2ControllerEdge;e.body=t,e.controller=this,e.nextBody=this.m_bodyList,e.prevBody=null,this.m_bodyList&&(this.m_bodyList.prevBody=e),this.m_bodyList=e,++this.m_bodyCount,e.nextController=t.m_controllerList,e.prevController=null,t.m_controllerList&&(t.m_controllerList.prevController=e),t.m_controllerList=e,++t.m_controllerCount},box2d.b2Controller.prototype.RemoveBody=function(t){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_bodyCount);for(var e=this.m_bodyList;e&&e.body!==t;)e=e.nextBody;box2d.ENABLE_ASSERTS&&box2d.b2Assert(null!==e),e.prevBody&&(e.prevBody.nextBody=e.nextBody),e.nextBody&&(e.nextBody.prevBody=e.prevBody),this.m_bodyList===e&&(this.m_bodyList=e.nextBody),--this.m_bodyCount,e.nextController&&(e.nextController.prevController=e.prevController),e.prevController&&(e.prevController.nextController=e.nextController),t.m_controllerList===e&&(t.m_controllerList=e.nextController),--t.m_controllerCount},box2d.b2Controller.prototype.Clear=function(){for(;this.m_bodyList;)this.RemoveBody(this.m_bodyList.body);this.m_bodyCount=0},goog.provide("box2d.b2ConstantAccelController"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Controller"),goog.require("box2d.b2Math"),box2d.b2ConstantAccelController=function(){goog.base(this),this.A=new box2d.b2Vec2(0,0)},goog.inherits(box2d.b2ConstantAccelController,box2d.b2Controller),box2d.b2ConstantAccelController.prototype.A=null,box2d.b2ConstantAccelController.prototype.Step=function(t){for(var e=box2d.b2MulSV(t.dt,this.A,box2d.b2ConstantAccelController.prototype.Step.s_dtA),i=this.m_bodyList;i;i=i.nextBody){var o=i.body;o.IsAwake()&&o.SetLinearVelocity(box2d.b2AddVV(o.GetLinearVelocity(),e,box2d.b2Vec2.s_t0))}},box2d.b2ConstantAccelController.prototype.Step.s_dtA=new box2d.b2Vec2,goog.provide("box2d.b2Joint"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Math"),box2d.b2JointType={e_unknownJoint:0,e_revoluteJoint:1,e_prismaticJoint:2,e_distanceJoint:3,e_pulleyJoint:4,e_mouseJoint:5,e_gearJoint:6,e_wheelJoint:7,e_weldJoint:8,e_frictionJoint:9,e_ropeJoint:10,e_motorJoint:11,e_areaJoint:12},goog.exportProperty(box2d.b2JointType,"e_unknownJoint",box2d.b2JointType.e_unknownJoint),goog.exportProperty(box2d.b2JointType,"e_revoluteJoint",box2d.b2JointType.e_revoluteJoint),goog.exportProperty(box2d.b2JointType,"e_prismaticJoint",box2d.b2JointType.e_prismaticJoint),goog.exportProperty(box2d.b2JointType,"e_distanceJoint",box2d.b2JointType.e_distanceJoint),goog.exportProperty(box2d.b2JointType,"e_pulleyJoint",box2d.b2JointType.e_pulleyJoint),goog.exportProperty(box2d.b2JointType,"e_mouseJoint",box2d.b2JointType.e_mouseJoint),goog.exportProperty(box2d.b2JointType,"e_gearJoint",box2d.b2JointType.e_gearJoint),goog.exportProperty(box2d.b2JointType,"e_wheelJoint",box2d.b2JointType.e_wheelJoint),goog.exportProperty(box2d.b2JointType,"e_weldJoint",box2d.b2JointType.e_weldJoint),goog.exportProperty(box2d.b2JointType,"e_frictionJoint",box2d.b2JointType.e_frictionJoint),goog.exportProperty(box2d.b2JointType,"e_ropeJoint",box2d.b2JointType.e_ropeJoint),goog.exportProperty(box2d.b2JointType,"e_motorJoint",box2d.b2JointType.e_motorJoint),goog.exportProperty(box2d.b2JointType,"e_areaJoint",box2d.b2JointType.e_areaJoint),box2d.b2LimitState={e_inactiveLimit:0,e_atLowerLimit:1,e_atUpperLimit:2,e_equalLimits:3},goog.exportProperty(box2d.b2LimitState,"e_inactiveLimit",box2d.b2LimitState.e_inactiveLimit),goog.exportProperty(box2d.b2LimitState,"e_atLowerLimit",box2d.b2LimitState.e_atLowerLimit),goog.exportProperty(box2d.b2LimitState,"e_atUpperLimit",box2d.b2LimitState.e_atUpperLimit),goog.exportProperty(box2d.b2LimitState,"e_equalLimits",box2d.b2LimitState.e_equalLimits),box2d.b2Jacobian=function(){this.linear=new box2d.b2Vec2},box2d.b2Jacobian.prototype.linear=null,box2d.b2Jacobian.prototype.angularA=0,box2d.b2Jacobian.prototype.angularB=0,box2d.b2Jacobian.prototype.SetZero=function(){return this.linear.SetZero(),this.angularA=0,this.angularB=0,this},box2d.b2Jacobian.prototype.Set=function(t,e,i){return this.linear.Copy(t),this.angularA=e,this.angularB=i,this},box2d.b2JointEdge=function(){},box2d.b2JointEdge.prototype.other=null,box2d.b2JointEdge.prototype.joint=null,box2d.b2JointEdge.prototype.prev=null,box2d.b2JointEdge.prototype.next=null,box2d.b2JointDef=function(t){this.type=t},box2d.b2JointDef.prototype.type=box2d.b2JointType.e_unknownJoint,box2d.b2JointDef.prototype.userData=null,box2d.b2JointDef.prototype.bodyA=null,box2d.b2JointDef.prototype.bodyB=null,box2d.b2JointDef.prototype.collideConnected=!1,box2d.b2Joint=function(t){box2d.ENABLE_ASSERTS&&box2d.b2Assert(t.bodyA!==t.bodyB),this.m_type=t.type,this.m_edgeA=new box2d.b2JointEdge,this.m_edgeB=new box2d.b2JointEdge,this.m_bodyA=t.bodyA,this.m_bodyB=t.bodyB,this.m_collideConnected=t.collideConnected,this.m_userData=t.userData},box2d.b2Joint.prototype.m_type=box2d.b2JointType.e_unknownJoint,box2d.b2Joint.prototype.m_prev=null,box2d.b2Joint.prototype.m_next=null,box2d.b2Joint.prototype.m_edgeA=null,box2d.b2Joint.prototype.m_edgeB=null,box2d.b2Joint.prototype.m_bodyA=null,box2d.b2Joint.prototype.m_bodyB=null,box2d.b2Joint.prototype.m_index=0,box2d.b2Joint.prototype.m_islandFlag=!1,box2d.b2Joint.prototype.m_collideConnected=!1,box2d.b2Joint.prototype.m_userData=null,box2d.b2Joint.prototype.GetAnchorA=function(t){return t.SetZero()},box2d.b2Joint.prototype.GetAnchorB=function(t){return t.SetZero()},box2d.b2Joint.prototype.GetReactionForce=function(t,e){return e.SetZero()},box2d.b2Joint.prototype.GetReactionTorque=function(t){return 0},box2d.b2Joint.prototype.InitVelocityConstraints=function(t){},box2d.b2Joint.prototype.SolveVelocityConstraints=function(t){},box2d.b2Joint.prototype.SolvePositionConstraints=function(t){return!1},box2d.b2Joint.prototype.GetType=function(){return this.m_type},box2d.b2Joint.prototype.GetBodyA=function(){return this.m_bodyA},box2d.b2Joint.prototype.GetBodyB=function(){return this.m_bodyB},box2d.b2Joint.prototype.GetNext=function(){return this.m_next},box2d.b2Joint.prototype.GetUserData=function(){return this.m_userData},box2d.b2Joint.prototype.SetUserData=function(t){this.m_userData=t},box2d.b2Joint.prototype.GetCollideConnected=function(){return this.m_collideConnected},box2d.b2Joint.prototype.Dump=function(){box2d.DEBUG&&box2d.b2Log("// Dump is not supported for this joint type.\n")},box2d.b2Joint.prototype.IsActive=function(){return this.m_bodyA.IsActive()&&this.m_bodyB.IsActive()},box2d.b2Joint.prototype.ShiftOrigin=function(t){},goog.provide("box2d.b2RevoluteJoint"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Joint"),goog.require("box2d.b2Math"),box2d.b2RevoluteJointDef=function(){goog.base(this,box2d.b2JointType.e_revoluteJoint),this.localAnchorA=new box2d.b2Vec2(0,0),this.localAnchorB=new box2d.b2Vec2(0,0)},goog.inherits(box2d.b2RevoluteJointDef,box2d.b2JointDef),box2d.b2RevoluteJointDef.prototype.localAnchorA=null,box2d.b2RevoluteJointDef.prototype.localAnchorB=null,box2d.b2RevoluteJointDef.prototype.referenceAngle=0,box2d.b2RevoluteJointDef.prototype.enableLimit=!1,box2d.b2RevoluteJointDef.prototype.lowerAngle=0,box2d.b2RevoluteJointDef.prototype.upperAngle=0,box2d.b2RevoluteJointDef.prototype.enableMotor=!1,box2d.b2RevoluteJointDef.prototype.motorSpeed=0,box2d.b2RevoluteJointDef.prototype.maxMotorTorque=0,box2d.b2RevoluteJointDef.prototype.Initialize=function(t,e,i){this.bodyA=t,this.bodyB=e,this.bodyA.GetLocalPoint(i,this.localAnchorA),this.bodyB.GetLocalPoint(i,this.localAnchorB),this.referenceAngle=this.bodyB.GetAngleRadians()-this.bodyA.GetAngleRadians()},box2d.b2RevoluteJoint=function(t){goog.base(this,t),this.m_localAnchorA=new box2d.b2Vec2,this.m_localAnchorB=new box2d.b2Vec2,this.m_impulse=new box2d.b2Vec3,this.m_rA=new box2d.b2Vec2,this.m_rB=new box2d.b2Vec2,this.m_localCenterA=new box2d.b2Vec2,this.m_localCenterB=new box2d.b2Vec2,this.m_mass=new box2d.b2Mat33,this.m_qA=new box2d.b2Rot,this.m_qB=new box2d.b2Rot,this.m_lalcA=new box2d.b2Vec2,this.m_lalcB=new box2d.b2Vec2,this.m_K=new box2d.b2Mat22,this.m_localAnchorA.Copy(t.localAnchorA),this.m_localAnchorB.Copy(t.localAnchorB),this.m_referenceAngle=t.referenceAngle,this.m_impulse.SetZero(),this.m_motorImpulse=0,this.m_lowerAngle=t.lowerAngle,this.m_upperAngle=t.upperAngle,this.m_maxMotorTorque=t.maxMotorTorque,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=box2d.b2LimitState.e_inactiveLimit},goog.inherits(box2d.b2RevoluteJoint,box2d.b2Joint),box2d.b2RevoluteJoint.prototype.m_localAnchorA=null,box2d.b2RevoluteJoint.prototype.m_localAnchorB=null,box2d.b2RevoluteJoint.prototype.m_impulse=null,box2d.b2RevoluteJoint.prototype.m_motorImpulse=0,box2d.b2RevoluteJoint.prototype.m_enableMotor=!1,box2d.b2RevoluteJoint.prototype.m_maxMotorTorque=0,box2d.b2RevoluteJoint.prototype.m_motorSpeed=0,box2d.b2RevoluteJoint.prototype.m_enableLimit=!1,box2d.b2RevoluteJoint.prototype.m_referenceAngle=0,box2d.b2RevoluteJoint.prototype.m_lowerAngle=0,box2d.b2RevoluteJoint.prototype.m_upperAngle=0,box2d.b2RevoluteJoint.prototype.m_indexA=0,box2d.b2RevoluteJoint.prototype.m_indexB=0,box2d.b2RevoluteJoint.prototype.m_rA=null,box2d.b2RevoluteJoint.prototype.m_rB=null,box2d.b2RevoluteJoint.prototype.m_localCenterA=null,box2d.b2RevoluteJoint.prototype.m_localCenterB=null,box2d.b2RevoluteJoint.prototype.m_invMassA=0,box2d.b2RevoluteJoint.prototype.m_invMassB=0,box2d.b2RevoluteJoint.prototype.m_invIA=0,box2d.b2RevoluteJoint.prototype.m_invIB=0,box2d.b2RevoluteJoint.prototype.m_mass=null,box2d.b2RevoluteJoint.prototype.m_motorMass=0,box2d.b2RevoluteJoint.prototype.m_limitState=box2d.b2LimitState.e_inactiveLimit,box2d.b2RevoluteJoint.prototype.m_qA=null,box2d.b2RevoluteJoint.prototype.m_qB=null,box2d.b2RevoluteJoint.prototype.m_lalcA=null,box2d.b2RevoluteJoint.prototype.m_lalcB=null,box2d.b2RevoluteJoint.prototype.m_K=null,box2d.b2RevoluteJoint.prototype.InitVelocityConstraints=function(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=t.positions[this.m_indexA].a,i=t.velocities[this.m_indexA].v,o=t.velocities[this.m_indexA].w,s=t.positions[this.m_indexB].a,n=t.velocities[this.m_indexB].v,r=t.velocities[this.m_indexB].w,a=this.m_qA.SetAngleRadians(e),h=this.m_qB.SetAngleRadians(s),a=(box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),box2d.b2MulRV(a,this.m_lalcA,this.m_rA),box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),box2d.b2MulRV(h,this.m_lalcB,this.m_rB),this.m_invMassA),h=this.m_invMassB,l=this.m_invIA,c=this.m_invIB,u=l+c===0;this.m_mass.ex.x=a+h+this.m_rA.y*this.m_rA.y*l+this.m_rB.y*this.m_rB.y*c,this.m_mass.ey.x=-this.m_rA.y*this.m_rA.x*l-this.m_rB.y*this.m_rB.x*c,this.m_mass.ez.x=-this.m_rA.y*l-this.m_rB.y*c,this.m_mass.ex.y=this.m_mass.ey.x,this.m_mass.ey.y=a+h+this.m_rA.x*this.m_rA.x*l+this.m_rB.x*this.m_rB.x*c,this.m_mass.ez.y=this.m_rA.x*l+this.m_rB.x*c,this.m_mass.ex.z=this.m_mass.ez.x,this.m_mass.ey.z=this.m_mass.ez.y,this.m_mass.ez.z=l+c,this.m_motorMass=l+c,0<this.m_motorMass&&(this.m_motorMass=1/this.m_motorMass),!1!==this.m_enableMotor&&!u||(this.m_motorImpulse=0),this.m_enableLimit&&!1==u?(u=s-e-this.m_referenceAngle,box2d.b2Abs(this.m_upperAngle-this.m_lowerAngle)<2*box2d.b2_angularSlop?this.m_limitState=box2d.b2LimitState.e_equalLimits:u<=this.m_lowerAngle?(this.m_limitState!==box2d.b2LimitState.e_atLowerLimit&&(this.m_impulse.z=0),this.m_limitState=box2d.b2LimitState.e_atLowerLimit):u>=this.m_upperAngle?(this.m_limitState!==box2d.b2LimitState.e_atUpperLimit&&(this.m_impulse.z=0),this.m_limitState=box2d.b2LimitState.e_atUpperLimit):(this.m_limitState=box2d.b2LimitState.e_inactiveLimit,this.m_impulse.z=0)):this.m_limitState=box2d.b2LimitState.e_inactiveLimit,t.step.warmStarting?(this.m_impulse.SelfMul(t.step.dtRatio),this.m_motorImpulse*=t.step.dtRatio,s=box2d.b2RevoluteJoint.prototype.InitVelocityConstraints.s_P.SetXY(this.m_impulse.x,this.m_impulse.y),i.SelfMulSub(a,s),o-=l*(box2d.b2CrossVV(this.m_rA,s)+this.m_motorImpulse+this.m_impulse.z),n.SelfMulAdd(h,s),r+=c*(box2d.b2CrossVV(this.m_rB,s)+this.m_motorImpulse+this.m_impulse.z)):(this.m_impulse.SetZero(),this.m_motorImpulse=0),t.velocities[this.m_indexA].w=o,t.velocities[this.m_indexB].w=r},box2d.b2RevoluteJoint.prototype.InitVelocityConstraints.s_P=new box2d.b2Vec2,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints=function(t){var e,i,o,s,n,r,a,h=t.velocities[this.m_indexA].v,l=t.velocities[this.m_indexA].w,c=t.velocities[this.m_indexB].v,u=t.velocities[this.m_indexB].w,d=this.m_invMassA,p=this.m_invMassB,f=this.m_invIA,b=this.m_invIB,y=f+b===0;this.m_enableMotor&&this.m_limitState!==box2d.b2LimitState.e_equalLimits&&!1==y&&(r=u-l-this.m_motorSpeed,a=-this.m_motorMass*r,n=this.m_motorImpulse,e=t.step.dt*this.m_maxMotorTorque,this.m_motorImpulse=box2d.b2Clamp(this.m_motorImpulse+a,-e,e),l-=f*(a=this.m_motorImpulse-n),u+=b*a),this.m_enableLimit&&this.m_limitState!==box2d.b2LimitState.e_inactiveLimit&&!1==y?(e=box2d.b2SubVV(box2d.b2AddVCrossSV(c,u,this.m_rB,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(h,l,this.m_rA,box2d.b2Vec2.s_t1),box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_Cdot1),a=this.m_mass.Solve33(e.x,e.y,u-l,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_impulse3).SelfNeg(),this.m_limitState===box2d.b2LimitState.e_equalLimits?this.m_impulse.SelfAdd(a):this.m_limitState===box2d.b2LimitState.e_atLowerLimit?this.m_impulse.z+a.z<0?(i=-e.x+this.m_impulse.z*this.m_mass.ez.x,o=-e.y+this.m_impulse.z*this.m_mass.ez.y,s=this.m_mass.Solve22(i,o,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_reduced),a.x=s.x,a.y=s.y,a.z=-this.m_impulse.z,this.m_impulse.x+=s.x,this.m_impulse.y+=s.y,this.m_impulse.z=0):this.m_impulse.SelfAdd(a):this.m_limitState===box2d.b2LimitState.e_atUpperLimit&&(0<this.m_impulse.z+a.z?(i=-e.x+this.m_impulse.z*this.m_mass.ez.x,o=-e.y+this.m_impulse.z*this.m_mass.ez.y,s=this.m_mass.Solve22(i,o,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_reduced),a.x=s.x,a.y=s.y,a.z=-this.m_impulse.z,this.m_impulse.x+=s.x,this.m_impulse.y+=s.y,this.m_impulse.z=0):this.m_impulse.SelfAdd(a)),n=box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_P.SetXY(a.x,a.y),h.SelfMulSub(d,n),l-=f*(box2d.b2CrossVV(this.m_rA,n)+a.z),c.SelfMulAdd(p,n),u+=b*(box2d.b2CrossVV(this.m_rB,n)+a.z)):(r=box2d.b2SubVV(box2d.b2AddVCrossSV(c,u,this.m_rB,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(h,l,this.m_rA,box2d.b2Vec2.s_t1),box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_Cdot),a=this.m_mass.Solve22(-r.x,-r.y,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_impulse2),this.m_impulse.x+=a.x,this.m_impulse.y+=a.y,h.SelfMulSub(d,a),l-=f*box2d.b2CrossVV(this.m_rA,a),c.SelfMulAdd(p,a),u+=b*box2d.b2CrossVV(this.m_rB,a)),t.velocities[this.m_indexA].w=l,t.velocities[this.m_indexB].w=u},box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_Cdot=new box2d.b2Vec2,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_Cdot1=new box2d.b2Vec2,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_impulse3=new box2d.b2Vec3,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_reduced=new box2d.b2Vec2,box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_impulse2=new box2d.b2Vec2,box2d.b2RevoluteJoint.prototype.SolvePositionConstraints=function(t){var e=t.positions[this.m_indexA].c,i=t.positions[this.m_indexA].a,o=t.positions[this.m_indexB].c,s=t.positions[this.m_indexB].a,n=this.m_qA.SetAngleRadians(i),r=this.m_qB.SetAngleRadians(s),a=0,h=this.m_invIA+this.m_invIB===0,h=(this.m_enableLimit&&this.m_limitState!==box2d.b2LimitState.e_inactiveLimit&&!1==h&&(h=s-i-this.m_referenceAngle,l=0,this.m_limitState===box2d.b2LimitState.e_equalLimits?(c=box2d.b2Clamp(h-this.m_lowerAngle,-box2d.b2_maxAngularCorrection,box2d.b2_maxAngularCorrection),l=-this.m_motorMass*c,a=box2d.b2Abs(c)):this.m_limitState===box2d.b2LimitState.e_atLowerLimit?(a=-(c=h-this.m_lowerAngle),c=box2d.b2Clamp(c+box2d.b2_angularSlop,-box2d.b2_maxAngularCorrection,0),l=-this.m_motorMass*c):this.m_limitState===box2d.b2LimitState.e_atUpperLimit&&(a=c=h-this.m_upperAngle,c=box2d.b2Clamp(c-box2d.b2_angularSlop,0,box2d.b2_maxAngularCorrection),l=-this.m_motorMass*c),i-=this.m_invIA*l,s+=this.m_invIB*l),n.SetAngleRadians(i),r.SetAngleRadians(s),box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),box2d.b2MulRV(n,this.m_lalcA,this.m_rA)),l=(box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),box2d.b2MulRV(r,this.m_lalcB,this.m_rB)),c=box2d.b2SubVV(box2d.b2AddVV(o,l,box2d.b2Vec2.s_t0),box2d.b2AddVV(e,h,box2d.b2Vec2.s_t1),box2d.b2RevoluteJoint.prototype.SolvePositionConstraints.s_C),n=c.GetLength(),r=this.m_invMassA,u=this.m_invMassB,d=this.m_invIA,p=this.m_invIB,f=this.m_K,f=(f.ex.x=r+u+d*h.y*h.y+p*l.y*l.y,f.ex.y=-d*h.x*h.y-p*l.x*l.y,f.ey.x=f.ex.y,f.ey.y=r+u+d*h.x*h.x+p*l.x*l.x,f.Solve(c.x,c.y,box2d.b2RevoluteJoint.prototype.SolvePositionConstraints.s_impulse).SelfNeg());return e.SelfMulSub(r,f),i-=d*box2d.b2CrossVV(h,f),o.SelfMulAdd(u,f),s+=p*box2d.b2CrossVV(l,f),t.positions[this.m_indexA].a=i,t.positions[this.m_indexB].a=s,n<=box2d.b2_linearSlop&&a<=box2d.b2_angularSlop},box2d.b2RevoluteJoint.prototype.SolvePositionConstraints.s_C=new box2d.b2Vec2,box2d.b2RevoluteJoint.prototype.SolvePositionConstraints.s_impulse=new box2d.b2Vec2,box2d.b2RevoluteJoint.prototype.GetAnchorA=function(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)},box2d.b2RevoluteJoint.prototype.GetAnchorB=function(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)},box2d.b2RevoluteJoint.prototype.GetReactionForce=function(t,e){return e.SetXY(t*this.m_impulse.x,t*this.m_impulse.y)},box2d.b2RevoluteJoint.prototype.GetReactionTorque=function(t){return t*this.m_impulse.z},box2d.b2RevoluteJoint.prototype.GetLocalAnchorA=function(t){return t.Copy(this.m_localAnchorA)},box2d.b2RevoluteJoint.prototype.GetLocalAnchorB=function(t){return t.Copy(this.m_localAnchorB)},box2d.b2RevoluteJoint.prototype.GetReferenceAngle=function(){return this.m_referenceAngle},box2d.b2RevoluteJoint.prototype.GetJointAngleRadians=function(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a-this.m_referenceAngle},box2d.b2RevoluteJoint.prototype.GetJointSpeed=function(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity},box2d.b2RevoluteJoint.prototype.IsMotorEnabled=function(){return this.m_enableMotor},box2d.b2RevoluteJoint.prototype.EnableMotor=function(t){this.m_enableMotor!==t&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=t)},box2d.b2RevoluteJoint.prototype.GetMotorTorque=function(t){return t*this.m_motorImpulse},box2d.b2RevoluteJoint.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},box2d.b2RevoluteJoint.prototype.SetMaxMotorTorque=function(t){this.m_maxMotorTorque=t},box2d.b2RevoluteJoint.prototype.GetMaxMotorTorque=function(){return this.m_maxMotorTorque},box2d.b2RevoluteJoint.prototype.IsLimitEnabled=function(){return this.m_enableLimit},box2d.b2RevoluteJoint.prototype.EnableLimit=function(t){t!==this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=t,this.m_impulse.z=0)},box2d.b2RevoluteJoint.prototype.GetLowerLimit=function(){return this.m_lowerAngle},box2d.b2RevoluteJoint.prototype.GetUpperLimit=function(){return this.m_upperAngle},box2d.b2RevoluteJoint.prototype.SetLimits=function(t,e){t===this.m_lowerAngle&&e===this.m_upperAngle||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_impulse.z=0,this.m_lowerAngle=t,this.m_upperAngle=e)},box2d.b2RevoluteJoint.prototype.SetMotorSpeed=function(t){this.m_motorSpeed!==t&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t)},box2d.b2RevoluteJoint.prototype.Dump=function(){var t,e;box2d.DEBUG&&(t=this.m_bodyA.m_islandIndex,e=this.m_bodyB.m_islandIndex,box2d.b2Log("  /*box2d.b2RevoluteJointDef*/ var jd = new box2d.b2RevoluteJointDef();\n"),box2d.b2Log("  jd.bodyA = bodies[%d];\n",t),box2d.b2Log("  jd.bodyB = bodies[%d];\n",e),box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),box2d.b2Log("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle),box2d.b2Log("  jd.enableLimit = %s;\n",this.m_enableLimit?"true":"false"),box2d.b2Log("  jd.lowerAngle = %.15f;\n",this.m_lowerAngle),box2d.b2Log("  jd.upperAngle = %.15f;\n",this.m_upperAngle),box2d.b2Log("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false"),box2d.b2Log("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed),box2d.b2Log("  jd.maxMotorTorque = %.15f;\n",this.m_maxMotorTorque),box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index))},goog.provide("box2d.b2PrismaticJoint"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Joint"),goog.require("box2d.b2Math"),box2d.b2PrismaticJointDef=function(){goog.base(this,box2d.b2JointType.e_prismaticJoint),this.localAnchorA=new box2d.b2Vec2,this.localAnchorB=new box2d.b2Vec2,this.localAxisA=new box2d.b2Vec2(1,0)},goog.inherits(box2d.b2PrismaticJointDef,box2d.b2JointDef),box2d.b2PrismaticJointDef.prototype.localAnchorA=null,box2d.b2PrismaticJointDef.prototype.localAnchorB=null,box2d.b2PrismaticJointDef.prototype.localAxisA=null,box2d.b2PrismaticJointDef.prototype.referenceAngle=0,box2d.b2PrismaticJointDef.prototype.enableLimit=!1,box2d.b2PrismaticJointDef.prototype.lowerTranslation=0,box2d.b2PrismaticJointDef.prototype.upperTranslation=0,box2d.b2PrismaticJointDef.prototype.enableMotor=!1,box2d.b2PrismaticJointDef.prototype.maxMotorForce=0,box2d.b2PrismaticJointDef.prototype.motorSpeed=0,box2d.b2PrismaticJointDef.prototype.Initialize=function(t,e,i,o){this.bodyA=t,this.bodyB=e,this.bodyA.GetLocalPoint(i,this.localAnchorA),this.bodyB.GetLocalPoint(i,this.localAnchorB),this.bodyA.GetLocalVector(o,this.localAxisA),this.referenceAngle=this.bodyB.GetAngleRadians()-this.bodyA.GetAngleRadians()},box2d.b2PrismaticJoint=function(t){goog.base(this,t),this.m_localAnchorA=t.localAnchorA.Clone(),this.m_localAnchorB=t.localAnchorB.Clone(),this.m_localXAxisA=t.localAxisA.Clone().SelfNormalize(),this.m_localYAxisA=box2d.b2CrossOneV(this.m_localXAxisA,new box2d.b2Vec2),this.m_referenceAngle=t.referenceAngle,this.m_impulse=new box2d.b2Vec3(0,0,0),this.m_lowerTranslation=t.lowerTranslation,this.m_upperTranslation=t.upperTranslation,this.m_maxMotorForce=t.maxMotorForce,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_localCenterA=new box2d.b2Vec2,this.m_localCenterB=new box2d.b2Vec2,this.m_axis=new box2d.b2Vec2(0,0),this.m_perp=new box2d.b2Vec2(0,0),this.m_K=new box2d.b2Mat33,this.m_K3=new box2d.b2Mat33,this.m_K2=new box2d.b2Mat22,this.m_qA=new box2d.b2Rot,this.m_qB=new box2d.b2Rot,this.m_lalcA=new box2d.b2Vec2,this.m_lalcB=new box2d.b2Vec2,this.m_rA=new box2d.b2Vec2,this.m_rB=new box2d.b2Vec2},goog.inherits(box2d.b2PrismaticJoint,box2d.b2Joint),box2d.b2PrismaticJoint.prototype.m_localAnchorA=null,box2d.b2PrismaticJoint.prototype.m_localAnchorB=null,box2d.b2PrismaticJoint.prototype.m_localXAxisA=null,box2d.b2PrismaticJoint.prototype.m_localYAxisA=null,box2d.b2PrismaticJoint.prototype.m_referenceAngle=0,box2d.b2PrismaticJoint.prototype.m_impulse=null,box2d.b2PrismaticJoint.prototype.m_motorImpulse=0,box2d.b2PrismaticJoint.prototype.m_lowerTranslation=0,box2d.b2PrismaticJoint.prototype.m_upperTranslation=0,box2d.b2PrismaticJoint.prototype.m_maxMotorForce=0,box2d.b2PrismaticJoint.prototype.m_motorSpeed=0,box2d.b2PrismaticJoint.prototype.m_enableLimit=!1,box2d.b2PrismaticJoint.prototype.m_enableMotor=!1,box2d.b2PrismaticJoint.prototype.m_limitState=box2d.b2LimitState.e_inactiveLimit,box2d.b2PrismaticJoint.prototype.m_indexA=0,box2d.b2PrismaticJoint.prototype.m_indexB=0,box2d.b2PrismaticJoint.prototype.m_localCenterA=null,box2d.b2PrismaticJoint.prototype.m_localCenterB=null,box2d.b2PrismaticJoint.prototype.m_invMassA=0,box2d.b2PrismaticJoint.prototype.m_invMassB=0,box2d.b2PrismaticJoint.prototype.m_invIA=0,box2d.b2PrismaticJoint.prototype.m_invIB=0,box2d.b2PrismaticJoint.prototype.m_axis=null,box2d.b2PrismaticJoint.prototype.m_perp=null,box2d.b2PrismaticJoint.prototype.m_s1=0,box2d.b2PrismaticJoint.prototype.m_s2=0,box2d.b2PrismaticJoint.prototype.m_a1=0,box2d.b2PrismaticJoint.prototype.m_a2=0,box2d.b2PrismaticJoint.prototype.m_K=null,box2d.b2PrismaticJoint.prototype.m_K3=null,box2d.b2PrismaticJoint.prototype.m_K2=null,box2d.b2PrismaticJoint.prototype.m_motorMass=0,box2d.b2PrismaticJoint.prototype.m_qA=null,box2d.b2PrismaticJoint.prototype.m_qB=null,box2d.b2PrismaticJoint.prototype.m_lalcA=null,box2d.b2PrismaticJoint.prototype.m_lalcB=null,box2d.b2PrismaticJoint.prototype.m_rA=null,box2d.b2PrismaticJoint.prototype.m_rB=null,box2d.b2PrismaticJoint.prototype.InitVelocityConstraints=function(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=t.positions[this.m_indexA].c,i=t.positions[this.m_indexA].a,o=t.velocities[this.m_indexA].v,s=t.velocities[this.m_indexA].w,n=t.positions[this.m_indexB].c,r=t.positions[this.m_indexB].a,a=t.velocities[this.m_indexB].v,h=t.velocities[this.m_indexB].w,i=this.m_qA.SetAngleRadians(i),r=this.m_qB.SetAngleRadians(r),l=(box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),box2d.b2MulRV(i,this.m_lalcA,this.m_rA)),r=(box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),box2d.b2MulRV(r,this.m_lalcB,this.m_rB)),n=box2d.b2AddVV(box2d.b2SubVV(n,e,box2d.b2Vec2.s_t0),box2d.b2SubVV(r,l,box2d.b2Vec2.s_t1),box2d.b2PrismaticJoint.prototype.InitVelocityConstraints.s_d),e=this.m_invMassA,c=this.m_invMassB,u=this.m_invIA,d=this.m_invIB;box2d.b2MulRV(i,this.m_localXAxisA,this.m_axis),this.m_a1=box2d.b2CrossVV(box2d.b2AddVV(n,l,box2d.b2Vec2.s_t0),this.m_axis),this.m_a2=box2d.b2CrossVV(r,this.m_axis),this.m_motorMass=e+c+u*this.m_a1*this.m_a1+d*this.m_a2*this.m_a2,0<this.m_motorMass&&(this.m_motorMass=1/this.m_motorMass),box2d.b2MulRV(i,this.m_localYAxisA,this.m_perp),this.m_s1=box2d.b2CrossVV(box2d.b2AddVV(n,l,box2d.b2Vec2.s_t0),this.m_perp),this.m_s2=box2d.b2CrossVV(r,this.m_perp),this.m_K.ex.x=e+c+u*this.m_s1*this.m_s1+d*this.m_s2*this.m_s2,this.m_K.ex.y=u*this.m_s1+d*this.m_s2,this.m_K.ex.z=u*this.m_s1*this.m_a1+d*this.m_s2*this.m_a2,this.m_K.ey.x=this.m_K.ex.y,this.m_K.ey.y=u+d,0===this.m_K.ey.y&&(this.m_K.ey.y=1),this.m_K.ey.z=u*this.m_a1+d*this.m_a2,this.m_K.ez.x=this.m_K.ex.z,this.m_K.ez.y=this.m_K.ey.z,this.m_K.ez.z=e+c+u*this.m_a1*this.m_a1+d*this.m_a2*this.m_a2,this.m_enableLimit?(i=box2d.b2DotVV(this.m_axis,n),box2d.b2Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*box2d.b2_linearSlop?this.m_limitState=box2d.b2LimitState.e_equalLimits:i<=this.m_lowerTranslation?this.m_limitState!==box2d.b2LimitState.e_atLowerLimit&&(this.m_limitState=box2d.b2LimitState.e_atLowerLimit,this.m_impulse.z=0):i>=this.m_upperTranslation?this.m_limitState!==box2d.b2LimitState.e_atUpperLimit&&(this.m_limitState=box2d.b2LimitState.e_atUpperLimit,this.m_impulse.z=0):(this.m_limitState=box2d.b2LimitState.e_inactiveLimit,this.m_impulse.z=0)):(this.m_limitState=box2d.b2LimitState.e_inactiveLimit,this.m_impulse.z=0),!1===this.m_enableMotor&&(this.m_motorImpulse=0),t.step.warmStarting?(this.m_impulse.SelfMul(t.step.dtRatio),this.m_motorImpulse*=t.step.dtRatio,l=box2d.b2AddVV(box2d.b2MulSV(this.m_impulse.x,this.m_perp,box2d.b2Vec2.s_t0),box2d.b2MulSV(this.m_motorImpulse+this.m_impulse.z,this.m_axis,box2d.b2Vec2.s_t1),box2d.b2PrismaticJoint.prototype.InitVelocityConstraints.s_P),r=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,n=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2,o.SelfMulSub(e,l),s-=u*r,a.SelfMulAdd(c,l),h+=d*n):(this.m_impulse.SetZero(),this.m_motorImpulse=0),t.velocities[this.m_indexA].w=s,t.velocities[this.m_indexB].w=h},box2d.b2PrismaticJoint.prototype.InitVelocityConstraints.s_d=new box2d.b2Vec2,box2d.b2PrismaticJoint.prototype.InitVelocityConstraints.s_P=new box2d.b2Vec2,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints=function(t){var e,i,o,s,n,r,a,h=t.velocities[this.m_indexA].v,l=t.velocities[this.m_indexA].w,c=t.velocities[this.m_indexB].v,u=t.velocities[this.m_indexB].w,d=this.m_invMassA,p=this.m_invMassB,f=this.m_invIA,b=this.m_invIB,y=(this.m_enableMotor&&this.m_limitState!==box2d.b2LimitState.e_equalLimits&&(a=box2d.b2DotVV(this.m_axis,box2d.b2SubVV(c,h,box2d.b2Vec2.s_t0))+this.m_a2*u-this.m_a1*l,a=this.m_motorMass*(this.m_motorSpeed-a),r=this.m_motorImpulse,n=t.step.dt*this.m_maxMotorForce,this.m_motorImpulse=box2d.b2Clamp(this.m_motorImpulse+a,-n,n),a=this.m_motorImpulse-r,n=box2d.b2MulSV(a,this.m_axis,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_P),r=a*this.m_a1,a=a*this.m_a2,h.SelfMulSub(d,n),l-=f*r,c.SelfMulAdd(p,n),u+=b*a),box2d.b2DotVV(this.m_perp,box2d.b2SubVV(c,h,box2d.b2Vec2.s_t0))+this.m_s2*u-this.m_s1*l),m=u-l;a=this.m_enableLimit&&this.m_limitState!==box2d.b2LimitState.e_inactiveLimit?(s=box2d.b2DotVV(this.m_axis,box2d.b2SubVV(c,h,box2d.b2Vec2.s_t0))+this.m_a2*u-this.m_a1*l,e=box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_f1.Copy(this.m_impulse),s=this.m_K.Solve33(-y,-m,-s,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_df3),this.m_impulse.SelfAdd(s),this.m_limitState===box2d.b2LimitState.e_atLowerLimit?this.m_impulse.z=box2d.b2Max(this.m_impulse.z,0):this.m_limitState===box2d.b2LimitState.e_atUpperLimit&&(this.m_impulse.z=box2d.b2Min(this.m_impulse.z,0)),o=-y-(this.m_impulse.z-e.z)*this.m_K.ez.x,i=-m-(this.m_impulse.z-e.z)*this.m_K.ez.y,(o=this.m_K.Solve22(o,i,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_f2r)).x+=e.x,o.y+=e.y,this.m_impulse.x=o.x,this.m_impulse.y=o.y,s.x=this.m_impulse.x-e.x,s.y=this.m_impulse.y-e.y,s.z=this.m_impulse.z-e.z,n=box2d.b2AddVV(box2d.b2MulSV(s.x,this.m_perp,box2d.b2Vec2.s_t0),box2d.b2MulSV(s.z,this.m_axis,box2d.b2Vec2.s_t1),box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_P),r=s.x*this.m_s1+s.y+s.z*this.m_a1,s.x*this.m_s2+s.y+s.z*this.m_a2):(s=this.m_K.Solve22(-y,-m,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_df2),this.m_impulse.x+=s.x,this.m_impulse.y+=s.y,n=box2d.b2MulSV(s.x,this.m_perp,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_P),r=s.x*this.m_s1+s.y,s.x*this.m_s2+s.y),h.SelfMulSub(d,n),l-=f*r,c.SelfMulAdd(p,n),u+=b*a,t.velocities[this.m_indexA].w=l,t.velocities[this.m_indexB].w=u},box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_f2r=new box2d.b2Vec2,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_f1=new box2d.b2Vec3,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_df3=new box2d.b2Vec3,box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_df2=new box2d.b2Vec2,box2d.b2PrismaticJoint.prototype.SolvePositionConstraints=function(t){var e,i,o,s=t.positions[this.m_indexA].c,n=t.positions[this.m_indexA].a,r=t.positions[this.m_indexB].c,a=t.positions[this.m_indexB].a,h=this.m_qA.SetAngleRadians(n),l=this.m_qB.SetAngleRadians(a),c=this.m_invMassA,u=this.m_invMassB,d=this.m_invIA,p=this.m_invIB,f=box2d.b2MulRV(h,this.m_lalcA,this.m_rA),l=box2d.b2MulRV(l,this.m_lalcB,this.m_rB),b=box2d.b2SubVV(box2d.b2AddVV(r,l,box2d.b2Vec2.s_t0),box2d.b2AddVV(s,f,box2d.b2Vec2.s_t1),box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_d),y=box2d.b2MulRV(h,this.m_localXAxisA,this.m_axis),m=box2d.b2CrossVV(box2d.b2AddVV(b,f,box2d.b2Vec2.s_t0),y),x=box2d.b2CrossVV(l,y),h=box2d.b2MulRV(h,this.m_localYAxisA,this.m_perp),f=box2d.b2CrossVV(box2d.b2AddVV(b,f,box2d.b2Vec2.s_t0),h),l=box2d.b2CrossVV(l,h),g=box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_impulse,v=box2d.b2DotVV(h,b),_=a-n-this.m_referenceAngle,w=box2d.b2Abs(v),S=box2d.b2Abs(_),A=!1,C=0,A=(this.m_enableLimit&&(b=box2d.b2DotVV(y,b),box2d.b2Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*box2d.b2_linearSlop?(C=box2d.b2Clamp(b,-box2d.b2_maxLinearCorrection,box2d.b2_maxLinearCorrection),w=box2d.b2Max(w,box2d.b2Abs(b)),A=!0):b<=this.m_lowerTranslation?(C=box2d.b2Clamp(b-this.m_lowerTranslation+box2d.b2_linearSlop,-box2d.b2_maxLinearCorrection,0),w=box2d.b2Max(w,this.m_lowerTranslation-b),A=!0):b>=this.m_upperTranslation&&(C=box2d.b2Clamp(b-this.m_upperTranslation-box2d.b2_linearSlop,0,box2d.b2_maxLinearCorrection),w=box2d.b2Max(w,b-this.m_upperTranslation),A=!0)),A?(0===(i=d+p)&&(i=1),b=d*m+p*x,A=c+u+d*m*m+p*x*x,(T=this.m_K3).ex.SetXYZ(c+u+d*f*f+p*l*l,e=d*f+p*l,o=d*f*m+p*l*x),T.ey.SetXYZ(e,i,b),T.ez.SetXYZ(o,b,A),g=T.Solve33(-v,-_,-C,g)):(0===(i=d+p)&&(i=1),(o=this.m_K2).ex.SetXY(c+u+d*f*f+p*l*l,e=d*f+p*l),o.ey.SetXY(e,i),b=o.Solve(-v,-_,box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_impulse1),g.x=b.x,g.y=b.y,g.z=0),box2d.b2AddVV(box2d.b2MulSV(g.x,h,box2d.b2Vec2.s_t0),box2d.b2MulSV(g.z,y,box2d.b2Vec2.s_t1),box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_P)),T=g.x*f+g.y+g.z*m,C=g.x*l+g.y+g.z*x;return s.SelfMulSub(c,A),n-=d*T,r.SelfMulAdd(u,A),a+=p*C,t.positions[this.m_indexA].a=n,t.positions[this.m_indexB].a=a,w<=box2d.b2_linearSlop&&S<=box2d.b2_angularSlop},box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_d=new box2d.b2Vec2,box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_impulse=new box2d.b2Vec3,box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_impulse1=new box2d.b2Vec2,box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_P=new box2d.b2Vec2,box2d.b2PrismaticJoint.prototype.GetAnchorA=function(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)},box2d.b2PrismaticJoint.prototype.GetAnchorB=function(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)},box2d.b2PrismaticJoint.prototype.GetReactionForce=function(t,e){return e.SetXY(t*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x),t*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y))},box2d.b2PrismaticJoint.prototype.GetReactionTorque=function(t){return t*this.m_impulse.y},box2d.b2PrismaticJoint.prototype.GetLocalAnchorA=function(t){return t.Copy(this.m_localAnchorA)},box2d.b2PrismaticJoint.prototype.GetLocalAnchorB=function(t){return t.Copy(this.m_localAnchorB)},box2d.b2PrismaticJoint.prototype.GetLocalAxisA=function(t){return t.Copy(this.m_localXAxisA)},box2d.b2PrismaticJoint.prototype.GetReferenceAngle=function(){return this.m_referenceAngle},box2d.b2PrismaticJoint.prototype.GetJointTranslation=function(){var t=this.m_bodyA.GetWorldPoint(this.m_localAnchorA,box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_pA),e=this.m_bodyB.GetWorldPoint(this.m_localAnchorB,box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_pB),e=box2d.b2SubVV(e,t,box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_d),t=this.m_bodyA.GetWorldVector(this.m_localXAxisA,box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_axis);return box2d.b2DotVV(e,t)},box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_pA=new box2d.b2Vec2,box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_pB=new box2d.b2Vec2,box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_d=new box2d.b2Vec2,box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_axis=new box2d.b2Vec2,box2d.b2PrismaticJoint.prototype.GetJointSpeed=function(){var t=this.m_bodyA,e=this.m_bodyB,i=(box2d.b2SubVV(this.m_localAnchorA,t.m_sweep.localCenter,this.m_lalcA),box2d.b2MulRV(t.m_xf.q,this.m_lalcA,this.m_rA)),o=(box2d.b2SubVV(this.m_localAnchorB,e.m_sweep.localCenter,this.m_lalcB),box2d.b2MulRV(e.m_xf.q,this.m_lalcB,this.m_rB)),s=box2d.b2AddVV(t.m_sweep.c,i,box2d.b2Vec2.s_t0),n=box2d.b2AddVV(e.m_sweep.c,o,box2d.b2Vec2.s_t1),n=box2d.b2SubVV(n,s,box2d.b2Vec2.s_t2),s=t.GetWorldVector(this.m_localXAxisA,this.m_axis),r=t.m_linearVelocity,a=e.m_linearVelocity,t=t.m_angularVelocity,e=e.m_angularVelocity;return box2d.b2DotVV(n,box2d.b2CrossSV(t,s,box2d.b2Vec2.s_t0))+box2d.b2DotVV(s,box2d.b2SubVV(box2d.b2AddVCrossSV(a,e,o,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(r,t,i,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t0))},box2d.b2PrismaticJoint.prototype.IsLimitEnabled=function(){return this.m_enableLimit},box2d.b2PrismaticJoint.prototype.EnableLimit=function(t){t!==this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=t,this.m_impulse.z=0)},box2d.b2PrismaticJoint.prototype.GetLowerLimit=function(){return this.m_lowerTranslation},box2d.b2PrismaticJoint.prototype.GetUpperLimit=function(){return this.m_upperTranslation},box2d.b2PrismaticJoint.prototype.SetLimits=function(t,e){t===this.m_lowerTranslation&&e===this.m_upperTranslation||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e,this.m_impulse.z=0)},box2d.b2PrismaticJoint.prototype.IsMotorEnabled=function(){return this.m_enableMotor},box2d.b2PrismaticJoint.prototype.EnableMotor=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=t},box2d.b2PrismaticJoint.prototype.SetMotorSpeed=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t},box2d.b2PrismaticJoint.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},box2d.b2PrismaticJoint.prototype.SetMaxMotorForce=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=t},box2d.b2PrismaticJoint.prototype.GetMaxMotorForce=function(){return this.m_maxMotorForce},box2d.b2PrismaticJoint.prototype.GetMotorForce=function(t){return t*this.m_motorImpulse},box2d.b2PrismaticJoint.prototype.Dump=function(){var t,e;box2d.DEBUG&&(t=this.m_bodyA.m_islandIndex,e=this.m_bodyB.m_islandIndex,box2d.b2Log("  /*box2d.b2PrismaticJointDef*/ var jd = new box2d.b2PrismaticJointDef();\n"),box2d.b2Log("  jd.bodyA = bodies[%d];\n",t),box2d.b2Log("  jd.bodyB = bodies[%d];\n",e),box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),box2d.b2Log("  jd.localAxisA.SetXY(%.15f, %.15f);\n",this.m_localXAxisA.x,this.m_localXAxisA.y),box2d.b2Log("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle),box2d.b2Log("  jd.enableLimit = %s;\n",this.m_enableLimit?"true":"false"),box2d.b2Log("  jd.lowerTranslation = %.15f;\n",this.m_lowerTranslation),box2d.b2Log("  jd.upperTranslation = %.15f;\n",this.m_upperTranslation),box2d.b2Log("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false"),box2d.b2Log("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed),box2d.b2Log("  jd.maxMotorForce = %.15f;\n",this.m_maxMotorForce),box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index))},goog.provide("box2d.b2GearJoint"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Joint"),goog.require("box2d.b2Math"),goog.require("box2d.b2RevoluteJoint"),goog.require("box2d.b2PrismaticJoint"),box2d.b2GearJointDef=function(){goog.base(this,box2d.b2JointType.e_gearJoint)},goog.inherits(box2d.b2GearJointDef,box2d.b2JointDef),box2d.b2GearJointDef.prototype.joint1=null,box2d.b2GearJointDef.prototype.joint2=null,box2d.b2GearJointDef.prototype.ratio=1,box2d.b2GearJoint=function(t){goog.base(this,t),this.m_joint1=t.joint1,this.m_joint2=t.joint2,this.m_localAnchorA=new box2d.b2Vec2,this.m_localAnchorB=new box2d.b2Vec2,this.m_localAnchorC=new box2d.b2Vec2,this.m_localAnchorD=new box2d.b2Vec2,this.m_localAxisC=new box2d.b2Vec2,this.m_localAxisD=new box2d.b2Vec2,this.m_lcA=new box2d.b2Vec2,this.m_lcB=new box2d.b2Vec2,this.m_lcC=new box2d.b2Vec2,this.m_lcD=new box2d.b2Vec2,this.m_JvAC=new box2d.b2Vec2,this.m_JvBD=new box2d.b2Vec2,this.m_qA=new box2d.b2Rot,this.m_qB=new box2d.b2Rot,this.m_qC=new box2d.b2Rot,this.m_qD=new box2d.b2Rot,this.m_lalcA=new box2d.b2Vec2,this.m_lalcB=new box2d.b2Vec2,this.m_lalcC=new box2d.b2Vec2,this.m_lalcD=new box2d.b2Vec2,this.m_typeA=this.m_joint1.GetType(),this.m_typeB=this.m_joint2.GetType(),box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_typeA===box2d.b2JointType.e_revoluteJoint||this.m_typeA===box2d.b2JointType.e_prismaticJoint),box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_typeB===box2d.b2JointType.e_revoluteJoint||this.m_typeB===box2d.b2JointType.e_prismaticJoint),this.m_bodyC=this.m_joint1.GetBodyA(),this.m_bodyA=this.m_joint1.GetBodyB();var e,i,o=this.m_bodyA.m_xf,s=this.m_bodyA.m_sweep.a,n=this.m_bodyC.m_xf,r=this.m_bodyC.m_sweep.a,n=(o=this.m_typeA===box2d.b2JointType.e_revoluteJoint?(i=t.joint1,this.m_localAnchorC.Copy(i.m_localAnchorA),this.m_localAnchorA.Copy(i.m_localAnchorB),this.m_referenceAngleA=i.m_referenceAngle,this.m_localAxisC.SetZero(),s-r-this.m_referenceAngleA):(e=t.joint1,this.m_localAnchorC.Copy(e.m_localAnchorA),this.m_localAnchorA.Copy(e.m_localAnchorB),this.m_referenceAngleA=e.m_referenceAngle,this.m_localAxisC.Copy(e.m_localXAxisA),s=this.m_localAnchorC,r=box2d.b2MulTRV(n.q,box2d.b2AddVV(box2d.b2MulRV(o.q,this.m_localAnchorA,box2d.b2Vec2.s_t0),box2d.b2SubVV(o.p,n.p,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),box2d.b2DotVV(box2d.b2SubVV(r,s,box2d.b2Vec2.s_t0),this.m_localAxisC)),this.m_bodyD=this.m_joint2.GetBodyA(),this.m_bodyB=this.m_joint2.GetBodyB(),this.m_bodyB.m_xf),r=this.m_bodyB.m_sweep.a,s=this.m_bodyD.m_xf,a=this.m_bodyD.m_sweep.a;a=this.m_typeB===box2d.b2JointType.e_revoluteJoint?(i=t.joint2,this.m_localAnchorD.Copy(i.m_localAnchorA),this.m_localAnchorB.Copy(i.m_localAnchorB),this.m_referenceAngleB=i.m_referenceAngle,this.m_localAxisD.SetZero(),r-a-this.m_referenceAngleB):(e=t.joint2,this.m_localAnchorD.Copy(e.m_localAnchorA),this.m_localAnchorB.Copy(e.m_localAnchorB),this.m_referenceAngleB=e.m_referenceAngle,this.m_localAxisD.Copy(e.m_localXAxisA),i=this.m_localAnchorD,r=box2d.b2MulTRV(s.q,box2d.b2AddVV(box2d.b2MulRV(n.q,this.m_localAnchorB,box2d.b2Vec2.s_t0),box2d.b2SubVV(n.p,s.p,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),box2d.b2DotVV(box2d.b2SubVV(r,i,box2d.b2Vec2.s_t0),this.m_localAxisD)),this.m_ratio=t.ratio,this.m_constant=o+this.m_ratio*a,this.m_impulse=0},goog.inherits(box2d.b2GearJoint,box2d.b2Joint),box2d.b2GearJoint.prototype.m_joint1=null,box2d.b2GearJoint.prototype.m_joint2=null,box2d.b2GearJoint.prototype.m_typeA=box2d.b2JointType.e_unknownJoint,box2d.b2GearJoint.prototype.m_typeB=box2d.b2JointType.e_unknownJoint,box2d.b2GearJoint.prototype.m_bodyC=null,box2d.b2GearJoint.prototype.m_bodyD=null,box2d.b2GearJoint.prototype.m_localAnchorA=null,box2d.b2GearJoint.prototype.m_localAnchorB=null,box2d.b2GearJoint.prototype.m_localAnchorC=null,box2d.b2GearJoint.prototype.m_localAnchorD=null,box2d.b2GearJoint.prototype.m_localAxisC=null,box2d.b2GearJoint.prototype.m_localAxisD=null,box2d.b2GearJoint.prototype.m_referenceAngleA=0,box2d.b2GearJoint.prototype.m_referenceAngleB=0,box2d.b2GearJoint.prototype.m_constant=0,box2d.b2GearJoint.prototype.m_ratio=0,box2d.b2GearJoint.prototype.m_impulse=0,box2d.b2GearJoint.prototype.m_indexA=0,box2d.b2GearJoint.prototype.m_indexB=0,box2d.b2GearJoint.prototype.m_indexC=0,box2d.b2GearJoint.prototype.m_indexD=0,box2d.b2GearJoint.prototype.m_lcA=null,box2d.b2GearJoint.prototype.m_lcB=null,box2d.b2GearJoint.prototype.m_lcC=null,box2d.b2GearJoint.prototype.m_lcD=null,box2d.b2GearJoint.prototype.m_mA=0,box2d.b2GearJoint.prototype.m_mB=0,box2d.b2GearJoint.prototype.m_mC=0,box2d.b2GearJoint.prototype.m_mD=0,box2d.b2GearJoint.prototype.m_iA=0,box2d.b2GearJoint.prototype.m_iB=0,box2d.b2GearJoint.prototype.m_iC=0,box2d.b2GearJoint.prototype.m_iD=0,box2d.b2GearJoint.prototype.m_JvAC=null,box2d.b2GearJoint.prototype.m_JvBD=null,box2d.b2GearJoint.prototype.m_JwA=0,box2d.b2GearJoint.prototype.m_JwB=0,box2d.b2GearJoint.prototype.m_JwC=0,box2d.b2GearJoint.prototype.m_JwD=0,box2d.b2GearJoint.prototype.m_mass=0,box2d.b2GearJoint.prototype.m_qA=null,box2d.b2GearJoint.prototype.m_qB=null,box2d.b2GearJoint.prototype.m_qC=null,box2d.b2GearJoint.prototype.m_qD=null,box2d.b2GearJoint.prototype.m_lalcA=null,box2d.b2GearJoint.prototype.m_lalcB=null,box2d.b2GearJoint.prototype.m_lalcC=null,box2d.b2GearJoint.prototype.m_lalcD=null,box2d.b2GearJoint.prototype.InitVelocityConstraints=function(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_indexC=this.m_bodyC.m_islandIndex,this.m_indexD=this.m_bodyD.m_islandIndex,this.m_lcA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_lcB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_lcC.Copy(this.m_bodyC.m_sweep.localCenter),this.m_lcD.Copy(this.m_bodyD.m_sweep.localCenter),this.m_mA=this.m_bodyA.m_invMass,this.m_mB=this.m_bodyB.m_invMass,this.m_mC=this.m_bodyC.m_invMass,this.m_mD=this.m_bodyD.m_invMass,this.m_iA=this.m_bodyA.m_invI,this.m_iB=this.m_bodyB.m_invI,this.m_iC=this.m_bodyC.m_invI,this.m_iD=this.m_bodyD.m_invI;var e,i=t.positions[this.m_indexA].a,o=t.velocities[this.m_indexA].v,s=t.velocities[this.m_indexA].w,n=t.positions[this.m_indexB].a,r=t.velocities[this.m_indexB].v,a=t.velocities[this.m_indexB].w,h=t.positions[this.m_indexC].a,l=t.velocities[this.m_indexC].v,c=t.velocities[this.m_indexC].w,u=t.positions[this.m_indexD].a,d=t.velocities[this.m_indexD].v,p=t.velocities[this.m_indexD].w,i=this.m_qA.SetAngleRadians(i),n=this.m_qB.SetAngleRadians(n),h=this.m_qC.SetAngleRadians(h),u=this.m_qD.SetAngleRadians(u);this.m_mass=0,this.m_typeA===box2d.b2JointType.e_revoluteJoint?(this.m_JvAC.SetZero(),this.m_JwA=1,this.m_JwC=1,this.m_mass+=this.m_iA+this.m_iC):(e=box2d.b2MulRV(h,this.m_localAxisC,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_u),box2d.b2SubVV(this.m_localAnchorC,this.m_lcC,this.m_lalcC),h=box2d.b2MulRV(h,this.m_lalcC,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rC),box2d.b2SubVV(this.m_localAnchorA,this.m_lcA,this.m_lalcA),i=box2d.b2MulRV(i,this.m_lalcA,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rA),this.m_JvAC.Copy(e),this.m_JwC=box2d.b2CrossVV(h,e),this.m_JwA=box2d.b2CrossVV(i,e),this.m_mass+=this.m_mC+this.m_mA+this.m_iC*this.m_JwC*this.m_JwC+this.m_iA*this.m_JwA*this.m_JwA),this.m_typeB===box2d.b2JointType.e_revoluteJoint?(this.m_JvBD.SetZero(),this.m_JwB=this.m_ratio,this.m_JwD=this.m_ratio,this.m_mass+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD)):(e=box2d.b2MulRV(u,this.m_localAxisD,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_u),box2d.b2SubVV(this.m_localAnchorD,this.m_lcD,this.m_lalcD),h=box2d.b2MulRV(u,this.m_lalcD,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rD),box2d.b2SubVV(this.m_localAnchorB,this.m_lcB,this.m_lalcB),i=box2d.b2MulRV(n,this.m_lalcB,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rB),box2d.b2MulSV(this.m_ratio,e,this.m_JvBD),this.m_JwD=this.m_ratio*box2d.b2CrossVV(h,e),this.m_JwB=this.m_ratio*box2d.b2CrossVV(i,e),this.m_mass+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*this.m_JwD*this.m_JwD+this.m_iB*this.m_JwB*this.m_JwB),this.m_mass=0<this.m_mass?1/this.m_mass:0,t.step.warmStarting?(o.SelfMulAdd(this.m_mA*this.m_impulse,this.m_JvAC),s+=this.m_iA*this.m_impulse*this.m_JwA,r.SelfMulAdd(this.m_mB*this.m_impulse,this.m_JvBD),a+=this.m_iB*this.m_impulse*this.m_JwB,l.SelfMulSub(this.m_mC*this.m_impulse,this.m_JvAC),c-=this.m_iC*this.m_impulse*this.m_JwC,d.SelfMulSub(this.m_mD*this.m_impulse,this.m_JvBD),p-=this.m_iD*this.m_impulse*this.m_JwD):this.m_impulse=0,t.velocities[this.m_indexA].w=s,t.velocities[this.m_indexB].w=a,t.velocities[this.m_indexC].w=c,t.velocities[this.m_indexD].w=p},box2d.b2GearJoint.prototype.InitVelocityConstraints.s_u=new box2d.b2Vec2,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rA=new box2d.b2Vec2,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rB=new box2d.b2Vec2,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rC=new box2d.b2Vec2,box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rD=new box2d.b2Vec2,box2d.b2GearJoint.prototype.SolveVelocityConstraints=function(t){var e=t.velocities[this.m_indexA].v,i=t.velocities[this.m_indexA].w,o=t.velocities[this.m_indexB].v,s=t.velocities[this.m_indexB].w,n=t.velocities[this.m_indexC].v,r=t.velocities[this.m_indexC].w,a=t.velocities[this.m_indexD].v,h=t.velocities[this.m_indexD].w,l=box2d.b2DotVV(this.m_JvAC,box2d.b2SubVV(e,n,box2d.b2Vec2.s_t0))+box2d.b2DotVV(this.m_JvBD,box2d.b2SubVV(o,a,box2d.b2Vec2.s_t0)),l=(l+=this.m_JwA*i-this.m_JwC*r+(this.m_JwB*s-this.m_JwD*h),-this.m_mass*l);this.m_impulse+=l,e.SelfMulAdd(this.m_mA*l,this.m_JvAC),i+=this.m_iA*l*this.m_JwA,o.SelfMulAdd(this.m_mB*l,this.m_JvBD),s+=this.m_iB*l*this.m_JwB,n.SelfMulSub(this.m_mC*l,this.m_JvAC),r-=this.m_iC*l*this.m_JwC,a.SelfMulSub(this.m_mD*l,this.m_JvBD),h-=this.m_iD*l*this.m_JwD,t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=s,t.velocities[this.m_indexC].w=r,t.velocities[this.m_indexD].w=h},box2d.b2GearJoint.prototype.SolvePositionConstraints=function(t){var e,i,o,s,n,r=t.positions[this.m_indexA].c,a=t.positions[this.m_indexA].a,h=t.positions[this.m_indexB].c,l=t.positions[this.m_indexB].a,c=t.positions[this.m_indexC].c,u=t.positions[this.m_indexC].a,d=t.positions[this.m_indexD].c,p=t.positions[this.m_indexD].a,f=this.m_qA.SetAngleRadians(a),b=this.m_qB.SetAngleRadians(l),y=this.m_qC.SetAngleRadians(u),m=this.m_qD.SetAngleRadians(p),x=this.m_JvAC,g=this.m_JvBD,v=0,m=(f=this.m_typeA===box2d.b2JointType.e_revoluteJoint?(x.SetZero(),o=e=1,v+=this.m_iA+this.m_iC,a-u-this.m_referenceAngleA):(n=box2d.b2MulRV(y,this.m_localAxisC,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_u),_=box2d.b2MulRV(y,this.m_lalcC,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rC),f=box2d.b2MulRV(f,this.m_lalcA,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rA),x.Copy(n),o=box2d.b2CrossVV(_,n),e=box2d.b2CrossVV(f,n),v+=this.m_mC+this.m_mA+this.m_iC*o*o+this.m_iA*e*e,_=this.m_lalcC,y=box2d.b2MulTRV(y,box2d.b2AddVV(f,box2d.b2SubVV(r,c,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),box2d.b2DotVV(box2d.b2SubVV(y,_,box2d.b2Vec2.s_t0),this.m_localAxisC)),n=this.m_typeB===box2d.b2JointType.e_revoluteJoint?(g.SetZero(),i=this.m_ratio,s=this.m_ratio,v+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD),l-p-this.m_referenceAngleB):(n=box2d.b2MulRV(m,this.m_localAxisD,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_u),y=box2d.b2MulRV(m,this.m_lalcD,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rD),_=box2d.b2MulRV(b,this.m_lalcB,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rB),box2d.b2MulSV(this.m_ratio,n,g),s=this.m_ratio*box2d.b2CrossVV(y,n),i=this.m_ratio*box2d.b2CrossVV(_,n),v+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*s*s+this.m_iB*i*i,b=this.m_lalcD,y=box2d.b2MulTRV(m,box2d.b2AddVV(_,box2d.b2SubVV(h,d,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),box2d.b2DotVV(box2d.b2SubVV(y,b,box2d.b2Vec2.s_t0),this.m_localAxisD)),f+this.m_ratio*n-this.m_constant),_=0<v?-m/v:0;return r.SelfMulAdd(this.m_mA*_,x),a+=this.m_iA*_*e,h.SelfMulAdd(this.m_mB*_,g),l+=this.m_iB*_*i,c.SelfMulSub(this.m_mC*_,x),u-=this.m_iC*_*o,d.SelfMulSub(this.m_mD*_,g),p-=this.m_iD*_*s,t.positions[this.m_indexA].a=a,t.positions[this.m_indexB].a=l,t.positions[this.m_indexC].a=u,t.positions[this.m_indexD].a=p,0<box2d.b2_linearSlop},box2d.b2GearJoint.prototype.SolvePositionConstraints.s_u=new box2d.b2Vec2,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rA=new box2d.b2Vec2,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rB=new box2d.b2Vec2,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rC=new box2d.b2Vec2,box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rD=new box2d.b2Vec2,box2d.b2GearJoint.prototype.GetAnchorA=function(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)},box2d.b2GearJoint.prototype.GetAnchorB=function(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)},box2d.b2GearJoint.prototype.GetReactionForce=function(t,e){return box2d.b2MulSV(t*this.m_impulse,this.m_JvAC,e)},box2d.b2GearJoint.prototype.GetReactionTorque=function(t){return t*this.m_impulse*this.m_JwA},box2d.b2GearJoint.prototype.GetJoint1=function(){return this.m_joint1},box2d.b2GearJoint.prototype.GetJoint2=function(){return this.m_joint2},box2d.b2GearJoint.prototype.GetRatio=function(){return this.m_ratio},box2d.b2GearJoint.prototype.SetRatio=function(t){box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(t)),this.m_ratio=t},box2d.b2GearJoint.prototype.Dump=function(){var t,e,i,o;box2d.DEBUG&&(t=this.m_bodyA.m_islandIndex,e=this.m_bodyB.m_islandIndex,i=this.m_joint1.m_index,o=this.m_joint2.m_index,box2d.b2Log("  /*box2d.b2GearJointDef*/ var jd = new box2d.b2GearJointDef();\n"),box2d.b2Log("  jd.bodyA = bodies[%d];\n",t),box2d.b2Log("  jd.bodyB = bodies[%d];\n",e),box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),box2d.b2Log("  jd.joint1 = joints[%d];\n",i),box2d.b2Log("  jd.joint2 = joints[%d];\n",o),box2d.b2Log("  jd.ratio = %.15f;\n",this.m_ratio),box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index))},goog.provide("box2d.b2Distance"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Math"),box2d.b2DistanceProxy=function(){this.m_buffer=box2d.b2Vec2.MakeArray(2)},box2d.b2DistanceProxy.prototype.m_buffer=null,box2d.b2DistanceProxy.prototype.m_vertices=null,box2d.b2DistanceProxy.prototype.m_count=0,box2d.b2DistanceProxy.prototype.m_radius=0,box2d.b2DistanceProxy.prototype.Reset=function(){return this.m_vertices=null,this.m_count=0,this.m_radius=0,this},box2d.b2DistanceProxy.prototype.SetShape=function(t,e){t.SetupDistanceProxy(this,e)},box2d.b2DistanceProxy.prototype.GetSupport=function(t){for(var e=0,i=box2d.b2DotVV(this.m_vertices[0],t),o=1;o<this.m_count;++o){var s=box2d.b2DotVV(this.m_vertices[o],t);i<s&&(e=o,i=s)}return e},box2d.b2DistanceProxy.prototype.GetSupportVertex=function(t,e){for(var i=0,o=box2d.b2DotVV(this.m_vertices[0],t),s=1;s<this.m_count;++s){var n=box2d.b2DotVV(this.m_vertices[s],t);o<n&&(i=s,o=n)}return e.Copy(this.m_vertices[i])},box2d.b2DistanceProxy.prototype.GetVertexCount=function(){return this.m_count},box2d.b2DistanceProxy.prototype.GetVertex=function(t){return box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=t&&t<this.m_count),this.m_vertices[t]},box2d.b2SimplexCache=function(){this.indexA=box2d.b2MakeNumberArray(3),this.indexB=box2d.b2MakeNumberArray(3)},box2d.b2SimplexCache.prototype.metric=0,box2d.b2SimplexCache.prototype.count=0,box2d.b2SimplexCache.prototype.indexA=null,box2d.b2SimplexCache.prototype.indexB=null,box2d.b2SimplexCache.prototype.Reset=function(){return this.metric=0,this.count=0,this},box2d.b2DistanceInput=function(){this.proxyA=new box2d.b2DistanceProxy,this.proxyB=new box2d.b2DistanceProxy,this.transformA=new box2d.b2Transform,this.transformB=new box2d.b2Transform},box2d.b2DistanceInput.prototype.proxyA=null,box2d.b2DistanceInput.prototype.proxyB=null,box2d.b2DistanceInput.prototype.transformA=null,box2d.b2DistanceInput.prototype.transformB=null,box2d.b2DistanceInput.prototype.useRadii=!1,box2d.b2DistanceInput.prototype.Reset=function(){return this.proxyA.Reset(),this.proxyB.Reset(),this.transformA.SetIdentity(),this.transformB.SetIdentity(),this.useRadii=!1,this},box2d.b2DistanceOutput=function(){this.pointA=new box2d.b2Vec2,this.pointB=new box2d.b2Vec2},box2d.b2DistanceOutput.prototype.pointA=null,box2d.b2DistanceOutput.prototype.pointB=null,box2d.b2DistanceOutput.prototype.distance=0,box2d.b2DistanceOutput.prototype.iterations=0,box2d.b2DistanceOutput.prototype.Reset=function(){return this.pointA.SetZero(),this.pointB.SetZero(),this.distance=0,this.iterations=0,this},box2d.b2_gjkCalls=0,box2d.b2_gjkIters=0,box2d.b2_gjkMaxIters=0,box2d.b2SimplexVertex=function(){this.wA=new box2d.b2Vec2,this.wB=new box2d.b2Vec2,this.w=new box2d.b2Vec2},box2d.b2SimplexVertex.prototype.wA=null,box2d.b2SimplexVertex.prototype.wB=null,box2d.b2SimplexVertex.prototype.w=null,box2d.b2SimplexVertex.prototype.a=0,box2d.b2SimplexVertex.prototype.indexA=0,box2d.b2SimplexVertex.prototype.indexB=0,box2d.b2SimplexVertex.prototype.Copy=function(t){return this.wA.Copy(t.wA),this.wB.Copy(t.wB),this.w.Copy(t.w),this.a=t.a,this.indexA=t.indexA,this.indexB=t.indexB,this},box2d.b2Simplex=function(){this.m_v1=new box2d.b2SimplexVertex,this.m_v2=new box2d.b2SimplexVertex,this.m_v3=new box2d.b2SimplexVertex,this.m_vertices=new Array(3),this.m_vertices[0]=this.m_v1,this.m_vertices[1]=this.m_v2,this.m_vertices[2]=this.m_v3},box2d.b2Simplex.prototype.m_v1=null,box2d.b2Simplex.prototype.m_v2=null,box2d.b2Simplex.prototype.m_v3=null,box2d.b2Simplex.prototype.m_vertices=null,box2d.b2Simplex.prototype.m_count=0,box2d.b2Simplex.prototype.ReadCache=function(t,e,i,o,s){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=t.count&&t.count<=3),this.m_count=t.count;for(var n,r,a=this.m_vertices,h=0;h<this.m_count;++h){(l=a[h]).indexA=t.indexA[h],l.indexB=t.indexB[h];var l,c=e.GetVertex(l.indexA),u=o.GetVertex(l.indexB);box2d.b2MulXV(i,c,l.wA),box2d.b2MulXV(s,u,l.wB),box2d.b2SubVV(l.wB,l.wA,l.w),l.a=0}1<this.m_count&&(n=t.metric,(r=this.GetMetric())<.5*n||2*n<r||r<box2d.b2_epsilon)&&(this.m_count=0),0===this.m_count&&((l=a[0]).indexA=0,l.indexB=0,c=e.GetVertex(0),u=o.GetVertex(0),box2d.b2MulXV(i,c,l.wA),box2d.b2MulXV(s,u,l.wB),box2d.b2SubVV(l.wB,l.wA,l.w),l.a=1,this.m_count=1)},box2d.b2Simplex.prototype.WriteCache=function(t){t.metric=this.GetMetric(),t.count=this.m_count;for(var e=this.m_vertices,i=0;i<this.m_count;++i)t.indexA[i]=e[i].indexA,t.indexB[i]=e[i].indexB},box2d.b2Simplex.prototype.GetSearchDirection=function(t){switch(this.m_count){case 1:return box2d.b2NegV(this.m_v1.w,t);case 2:var e=box2d.b2SubVV(this.m_v2.w,this.m_v1.w,t);return 0<box2d.b2CrossVV(e,box2d.b2NegV(this.m_v1.w,box2d.b2Vec2.s_t0))?box2d.b2CrossOneV(e,t):box2d.b2CrossVOne(e,t);default:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),t.SetZero()}},box2d.b2Simplex.prototype.GetClosestPoint=function(t){switch(this.m_count){case 0:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),t.SetZero();case 1:return t.Copy(this.m_v1.w);case 2:return t.SetXY(this.m_v1.a*this.m_v1.w.x+this.m_v2.a*this.m_v2.w.x,this.m_v1.a*this.m_v1.w.y+this.m_v2.a*this.m_v2.w.y);case 3:return t.SetZero();default:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),t.SetZero()}},box2d.b2Simplex.prototype.GetWitnessPoints=function(t,e){switch(this.m_count){case 0:box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1);break;case 1:t.Copy(this.m_v1.wA),e.Copy(this.m_v1.wB);break;case 2:t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x,t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y,e.x=this.m_v1.a*this.m_v1.wB.x+this.m_v2.a*this.m_v2.wB.x,e.y=this.m_v1.a*this.m_v1.wB.y+this.m_v2.a*this.m_v2.wB.y;break;case 3:e.x=t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x+this.m_v3.a*this.m_v3.wA.x,e.y=t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y+this.m_v3.a*this.m_v3.wA.y;break;default:box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1)}},box2d.b2Simplex.prototype.GetMetric=function(){switch(this.m_count){case 0:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),0;case 1:return 0;case 2:return box2d.b2DistanceVV(this.m_v1.w,this.m_v2.w);case 3:return box2d.b2CrossVV(box2d.b2SubVV(this.m_v2.w,this.m_v1.w,box2d.b2Vec2.s_t0),box2d.b2SubVV(this.m_v3.w,this.m_v1.w,box2d.b2Vec2.s_t1));default:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),0}},box2d.b2Simplex.prototype.Solve2=function(){var t=this.m_v1.w,e=this.m_v2.w,i=box2d.b2SubVV(e,t,box2d.b2Simplex.s_e12),t=-box2d.b2DotVV(t,i);t<=0?(this.m_v1.a=1,this.m_count=1):(e=box2d.b2DotVV(e,i))<=0?(this.m_v2.a=1,this.m_count=1,this.m_v1.Copy(this.m_v2)):(this.m_v1.a=e*(i=1/(e+t)),this.m_v2.a=t*i,this.m_count=2)},box2d.b2Simplex.prototype.Solve3=function(){var t=this.m_v1.w,e=this.m_v2.w,i=this.m_v3.w,o=box2d.b2SubVV(e,t,box2d.b2Simplex.s_e12),s=box2d.b2DotVV(t,o),n=box2d.b2DotVV(e,o),s=-s,r=box2d.b2SubVV(i,t,box2d.b2Simplex.s_e13),a=box2d.b2DotVV(t,r),h=box2d.b2DotVV(i,r),a=-a,l=box2d.b2SubVV(i,e,box2d.b2Simplex.s_e23),c=box2d.b2DotVV(e,l),l=box2d.b2DotVV(i,l),c=-c,o=box2d.b2CrossVV(o,r),r=o*box2d.b2CrossVV(e,i),i=o*box2d.b2CrossVV(i,t),o=o*box2d.b2CrossVV(t,e);s<=0&&a<=0?(this.m_v1.a=1,this.m_count=1):0<n&&0<s&&o<=0?(this.m_v1.a=n*(t=1/(n+s)),this.m_v2.a=s*t,this.m_count=2):0<h&&0<a&&i<=0?(this.m_v1.a=h*(e=1/(h+a)),this.m_v3.a=a*e,this.m_count=2,this.m_v2.Copy(this.m_v3)):n<=0&&c<=0?(this.m_v2.a=1,this.m_count=1,this.m_v1.Copy(this.m_v2)):h<=0&&l<=0?(this.m_v3.a=1,this.m_count=1,this.m_v1.Copy(this.m_v3)):0<l&&0<c&&r<=0?(this.m_v2.a=l*(s=1/(l+c)),this.m_v3.a=c*s,this.m_count=2,this.m_v1.Copy(this.m_v3)):(this.m_v1.a=r*(t=1/(r+i+o)),this.m_v2.a=i*t,this.m_v3.a=o*t,this.m_count=3)},box2d.b2Simplex.s_e12=new box2d.b2Vec2,box2d.b2Simplex.s_e13=new box2d.b2Vec2,box2d.b2Simplex.s_e23=new box2d.b2Vec2,box2d.b2Distance=function(t,e,i){++box2d.b2_gjkCalls;var o=i.proxyA,s=i.proxyB,n=i.transformA,r=i.transformB,a=box2d.b2Distance.s_simplex;a.ReadCache(e,o,n,s,r);for(var h,l=a.m_vertices,c=box2d.b2Distance.s_saveA,u=box2d.b2Distance.s_saveB,d=(box2d.b2_maxFloat,0);d<20;){for(var p=a.m_count,f=0;f<p;++f)c[f]=l[f].indexA,u[f]=l[f].indexB;switch(a.m_count){case 1:break;case 2:a.Solve2();break;case 3:a.Solve3();break;default:box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1)}if(3===a.m_count)break;(b=a.GetClosestPoint(box2d.b2Distance.s_p)).GetLengthSquared();var b,y=a.GetSearchDirection(box2d.b2Distance.s_d);if(y.GetLengthSquared()<box2d.b2_epsilon_sq)break;var m=l[a.m_count];m.indexA=o.GetSupport(box2d.b2MulTRV(n.q,box2d.b2NegV(y,box2d.b2Vec2.s_t0),box2d.b2Distance.s_supportA)),box2d.b2MulXV(n,o.GetVertex(m.indexA),m.wA),m.indexB=s.GetSupport(box2d.b2MulTRV(r.q,y,box2d.b2Distance.s_supportB)),box2d.b2MulXV(r,s.GetVertex(m.indexB),m.wB),box2d.b2SubVV(m.wB,m.wA,m.w),++d,++box2d.b2_gjkIters;for(var x=!1,f=0;f<p;++f)if(m.indexA===c[f]&&m.indexB===u[f]){x=!0;break}if(x)break;++a.m_count}box2d.b2_gjkMaxIters=box2d.b2Max(box2d.b2_gjkMaxIters,d),a.GetWitnessPoints(t.pointA,t.pointB),t.distance=box2d.b2DistanceVV(t.pointA,t.pointB),t.iterations=d,a.WriteCache(e),i.useRadii&&(e=o.m_radius,i=s.m_radius,t.distance>e+i&&t.distance>box2d.b2_epsilon?(t.distance-=e+i,(h=box2d.b2SubVV(t.pointB,t.pointA,box2d.b2Distance.s_normal)).Normalize(),t.pointA.SelfMulAdd(e,h),t.pointB.SelfMulSub(i,h)):(b=box2d.b2MidVV(t.pointA,t.pointB,box2d.b2Distance.s_p),t.pointA.Copy(b),t.pointB.Copy(b),t.distance=0))},box2d.b2Distance.s_simplex=new box2d.b2Simplex,box2d.b2Distance.s_saveA=box2d.b2MakeNumberArray(3),box2d.b2Distance.s_saveB=box2d.b2MakeNumberArray(3),box2d.b2Distance.s_p=new box2d.b2Vec2,box2d.b2Distance.s_d=new box2d.b2Vec2,box2d.b2Distance.s_normal=new box2d.b2Vec2,box2d.b2Distance.s_supportA=new box2d.b2Vec2,box2d.b2Distance.s_supportB=new box2d.b2Vec2,goog.provide("box2d.b2WeldJoint"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Joint"),goog.require("box2d.b2Math"),box2d.b2WeldJointDef=function(){goog.base(this,box2d.b2JointType.e_weldJoint),this.localAnchorA=new box2d.b2Vec2,this.localAnchorB=new box2d.b2Vec2},goog.inherits(box2d.b2WeldJointDef,box2d.b2JointDef),box2d.b2WeldJointDef.prototype.localAnchorA=null,box2d.b2WeldJointDef.prototype.localAnchorB=null,box2d.b2WeldJointDef.prototype.referenceAngle=0,box2d.b2WeldJointDef.prototype.frequencyHz=0,box2d.b2WeldJointDef.prototype.dampingRatio=0,box2d.b2WeldJointDef.prototype.Initialize=function(t,e,i){this.bodyA=t,this.bodyB=e,this.bodyA.GetLocalPoint(i,this.localAnchorA),this.bodyB.GetLocalPoint(i,this.localAnchorB),this.referenceAngle=this.bodyB.GetAngleRadians()-this.bodyA.GetAngleRadians()},box2d.b2WeldJoint=function(t){goog.base(this,t),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_localAnchorA=t.localAnchorA.Clone(),this.m_localAnchorB=t.localAnchorB.Clone(),this.m_referenceAngle=t.referenceAngle,this.m_impulse=new box2d.b2Vec3(0,0,0),this.m_rA=new box2d.b2Vec2,this.m_rB=new box2d.b2Vec2,this.m_localCenterA=new box2d.b2Vec2,this.m_localCenterB=new box2d.b2Vec2,this.m_mass=new box2d.b2Mat33,this.m_qA=new box2d.b2Rot,this.m_qB=new box2d.b2Rot,this.m_lalcA=new box2d.b2Vec2,this.m_lalcB=new box2d.b2Vec2,this.m_K=new box2d.b2Mat33},goog.inherits(box2d.b2WeldJoint,box2d.b2Joint),box2d.b2WeldJoint.prototype.m_frequencyHz=0,box2d.b2WeldJoint.prototype.m_dampingRatio=0,box2d.b2WeldJoint.prototype.m_bias=0,box2d.b2WeldJoint.prototype.m_localAnchorA=null,box2d.b2WeldJoint.prototype.m_localAnchorB=null,box2d.b2WeldJoint.prototype.m_referenceAngle=0,box2d.b2WeldJoint.prototype.m_gamma=0,box2d.b2WeldJoint.prototype.m_impulse=null,box2d.b2WeldJoint.prototype.m_indexA=0,box2d.b2WeldJoint.prototype.m_indexB=0,box2d.b2WeldJoint.prototype.m_rA=null,box2d.b2WeldJoint.prototype.m_rB=null,box2d.b2WeldJoint.prototype.m_localCenterA=null,box2d.b2WeldJoint.prototype.m_localCenterB=null,box2d.b2WeldJoint.prototype.m_invMassA=0;box2d.b2WeldJoint.prototype.m_invMassB=0,box2d.b2WeldJoint.prototype.m_invIA=0,box2d.b2WeldJoint.prototype.m_invIB=0,box2d.b2WeldJoint.prototype.m_mass=null,box2d.b2WeldJoint.prototype.m_qA=null,box2d.b2WeldJoint.prototype.m_qB=null,box2d.b2WeldJoint.prototype.m_lalcA=null,box2d.b2WeldJoint.prototype.m_lalcB=null,box2d.b2WeldJoint.prototype.m_K=null,box2d.b2WeldJoint.prototype.InitVelocityConstraints=function(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e,i,o,s,n=t.positions[this.m_indexA].a,r=t.velocities[this.m_indexA].v,a=t.velocities[this.m_indexA].w,h=t.positions[this.m_indexB].a,l=t.velocities[this.m_indexB].v,c=t.velocities[this.m_indexB].w,u=this.m_qA.SetAngleRadians(n),d=this.m_qB.SetAngleRadians(h),u=(box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),box2d.b2MulRV(u,this.m_lalcA,this.m_rA),box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),box2d.b2MulRV(d,this.m_lalcB,this.m_rB),this.m_invMassA),d=this.m_invMassB,p=this.m_invIA,f=this.m_invIB,b=this.m_K;b.ex.x=u+d+this.m_rA.y*this.m_rA.y*p+this.m_rB.y*this.m_rB.y*f,b.ey.x=-this.m_rA.y*this.m_rA.x*p-this.m_rB.y*this.m_rB.x*f,b.ez.x=-this.m_rA.y*p-this.m_rB.y*f,b.ex.y=b.ey.x,b.ey.y=u+d+this.m_rA.x*this.m_rA.x*p+this.m_rB.x*this.m_rB.x*f,b.ez.y=this.m_rA.x*p+this.m_rB.x*f,b.ex.z=b.ez.x,b.ey.z=b.ez.y,b.ez.z=p+f,0<this.m_frequencyHz?(b.GetInverse22(this.m_mass),s=0<(e=p+f)?1/e:0,h=h-n-this.m_referenceAngle,n=2*box2d.b2_pi*this.m_frequencyHz,i=2*s*this.m_dampingRatio*n,o=t.step.dt,this.m_gamma=o*(i+o*(i=s*n*n)),this.m_gamma=0!==this.m_gamma?1/this.m_gamma:0,this.m_bias=h*o*i*this.m_gamma,e+=this.m_gamma,this.m_mass.ez.z=0!==e?1/e:0):(b.GetSymInverse33(this.m_mass),this.m_gamma=0,this.m_bias=0),t.step.warmStarting?(this.m_impulse.SelfMul(t.step.dtRatio),s=box2d.b2WeldJoint.prototype.InitVelocityConstraints.s_P.SetXY(this.m_impulse.x,this.m_impulse.y),r.SelfMulSub(u,s),a-=p*(box2d.b2CrossVV(this.m_rA,s)+this.m_impulse.z),l.SelfMulAdd(d,s),c+=f*(box2d.b2CrossVV(this.m_rB,s)+this.m_impulse.z)):this.m_impulse.SetZero(),t.velocities[this.m_indexA].w=a,t.velocities[this.m_indexB].w=c},box2d.b2WeldJoint.prototype.InitVelocityConstraints.s_P=new box2d.b2Vec2,box2d.b2WeldJoint.prototype.SolveVelocityConstraints=function(t){var e,i,o,s=t.velocities[this.m_indexA].v,n=t.velocities[this.m_indexA].w,r=t.velocities[this.m_indexB].v,a=t.velocities[this.m_indexB].w,h=this.m_invMassA,l=this.m_invMassB,c=this.m_invIA,u=this.m_invIB;0<this.m_frequencyHz?(i=-this.m_mass.ez.z*((e=a-n)+this.m_bias+this.m_gamma*this.m_impulse.z),this.m_impulse.z+=i,n-=c*i,a+=u*i,i=box2d.b2SubVV(box2d.b2AddVCrossSV(r,a,this.m_rB,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(s,n,this.m_rA,box2d.b2Vec2.s_t1),box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_Cdot1),o=box2d.b2MulM33XY(this.m_mass,i.x,i.y,box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_impulse1).SelfNeg(),this.m_impulse.x+=o.x,this.m_impulse.y+=o.y,s.SelfMulSub(h,o=o),n-=c*box2d.b2CrossVV(this.m_rA,o),r.SelfMulAdd(l,o),a+=u*box2d.b2CrossVV(this.m_rB,o)):(i=box2d.b2SubVV(box2d.b2AddVCrossSV(r,a,this.m_rB,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(s,n,this.m_rA,box2d.b2Vec2.s_t1),box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_Cdot1),e=a-n,i=box2d.b2MulM33XYZ(this.m_mass,i.x,i.y,e,box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_impulse).SelfNeg(),this.m_impulse.SelfAdd(i),o=box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_P.SetXY(i.x,i.y),s.SelfMulSub(h,o),n-=c*(box2d.b2CrossVV(this.m_rA,o)+i.z),r.SelfMulAdd(l,o),a+=u*(box2d.b2CrossVV(this.m_rB,o)+i.z)),t.velocities[this.m_indexA].w=n,t.velocities[this.m_indexB].w=a},box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_Cdot1=new box2d.b2Vec2,box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_impulse1=new box2d.b2Vec2,box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_impulse=new box2d.b2Vec3,box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2,box2d.b2WeldJoint.prototype.SolvePositionConstraints=function(t){var e=t.positions[this.m_indexA].c,i=t.positions[this.m_indexA].a,o=t.positions[this.m_indexB].c,s=t.positions[this.m_indexB].a,n=this.m_qA.SetAngleRadians(i),r=this.m_qB.SetAngleRadians(s),a=this.m_invMassA,h=this.m_invMassB,l=this.m_invIA,c=this.m_invIB,n=(box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),box2d.b2MulRV(n,this.m_lalcA,this.m_rA));box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);var u,d,p,f,r=box2d.b2MulRV(r,this.m_lalcB,this.m_rB),b=this.m_K;return b.ex.x=a+h+n.y*n.y*l+r.y*r.y*c,b.ey.x=-n.y*n.x*l-r.y*r.x*c,b.ez.x=-n.y*l-r.y*c,b.ex.y=b.ey.x,b.ey.y=a+h+n.x*n.x*l+r.x*r.x*c,b.ez.y=n.x*l+r.x*c,b.ex.z=b.ez.x,b.ey.z=b.ez.y,b.ez.z=l+c,0<this.m_frequencyHz?(u=(p=box2d.b2SubVV(box2d.b2AddVV(o,r,box2d.b2Vec2.s_t0),box2d.b2AddVV(e,n,box2d.b2Vec2.s_t1),box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_C1)).GetLength(),d=0,f=b.Solve22(p.x,p.y,box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_P).SelfNeg(),e.SelfMulSub(a,f),i-=l*box2d.b2CrossVV(n,f),o.SelfMulAdd(h,f),s+=c*box2d.b2CrossVV(r,f)):(p=box2d.b2SubVV(box2d.b2AddVV(o,r,box2d.b2Vec2.s_t0),box2d.b2AddVV(e,n,box2d.b2Vec2.s_t1),box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_C1),r=s-i-this.m_referenceAngle,u=p.GetLength(),d=box2d.b2Abs(r),n=b.Solve33(p.x,p.y,r,box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_impulse).SelfNeg(),f=box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_P.SetXY(n.x,n.y),e.SelfMulSub(a,f),i-=l*(box2d.b2CrossVV(this.m_rA,f)+n.z),o.SelfMulAdd(h,f),s+=c*(box2d.b2CrossVV(this.m_rB,f)+n.z)),t.positions[this.m_indexA].a=i,t.positions[this.m_indexB].a=s,u<=box2d.b2_linearSlop&&d<=box2d.b2_angularSlop},box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_C1=new box2d.b2Vec2,box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_P=new box2d.b2Vec2,box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_impulse=new box2d.b2Vec3,box2d.b2WeldJoint.prototype.GetAnchorA=function(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)},box2d.b2WeldJoint.prototype.GetAnchorB=function(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)},box2d.b2WeldJoint.prototype.GetReactionForce=function(t,e){return e.SetXY(t*this.m_impulse.x,t*this.m_impulse.y)},box2d.b2WeldJoint.prototype.GetReactionTorque=function(t){return t*this.m_impulse.z},box2d.b2WeldJoint.prototype.GetLocalAnchorA=function(t){return t.Copy(this.m_localAnchorA)},box2d.b2WeldJoint.prototype.GetLocalAnchorB=function(t){return t.Copy(this.m_localAnchorB)},box2d.b2WeldJoint.prototype.GetReferenceAngle=function(){return this.m_referenceAngle},box2d.b2WeldJoint.prototype.SetFrequency=function(t){this.m_frequencyHz=t},box2d.b2WeldJoint.prototype.GetFrequency=function(){return this.m_frequencyHz},box2d.b2WeldJoint.prototype.SetDampingRatio=function(t){this.m_dampingRatio=t},box2d.b2WeldJoint.prototype.GetDampingRatio=function(){return this.m_dampingRatio},box2d.b2WeldJoint.prototype.Dump=function(){var t,e;box2d.DEBUG&&(t=this.m_bodyA.m_islandIndex,e=this.m_bodyB.m_islandIndex,box2d.b2Log("  /*box2d.b2WeldJointDef*/ var jd = new box2d.b2WeldJointDef();\n"),box2d.b2Log("  jd.bodyA = bodies[%d];\n",t),box2d.b2Log("  jd.bodyB = bodies[%d];\n",e),box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),box2d.b2Log("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle),box2d.b2Log("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz),box2d.b2Log("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio),box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index))},goog.provide("box2d.b2RopeJoint"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Joint"),goog.require("box2d.b2Math"),box2d.b2RopeJointDef=function(){goog.base(this,box2d.b2JointType.e_ropeJoint),this.localAnchorA=new box2d.b2Vec2(-1,0),this.localAnchorB=new box2d.b2Vec2(1,0)},goog.inherits(box2d.b2RopeJointDef,box2d.b2JointDef),box2d.b2RopeJointDef.prototype.localAnchorA=null,box2d.b2RopeJointDef.prototype.localAnchorB=null,box2d.b2RopeJointDef.prototype.maxLength=0,box2d.b2RopeJoint=function(t){goog.base(this,t),this.m_localAnchorA=t.localAnchorA.Clone(),this.m_localAnchorB=t.localAnchorB.Clone(),this.m_maxLength=t.maxLength,this.m_u=new box2d.b2Vec2,this.m_rA=new box2d.b2Vec2,this.m_rB=new box2d.b2Vec2,this.m_localCenterA=new box2d.b2Vec2,this.m_localCenterB=new box2d.b2Vec2,this.m_qA=new box2d.b2Rot,this.m_qB=new box2d.b2Rot,this.m_lalcA=new box2d.b2Vec2,this.m_lalcB=new box2d.b2Vec2},goog.inherits(box2d.b2RopeJoint,box2d.b2Joint),box2d.b2RopeJoint.prototype.m_localAnchorA=null,box2d.b2RopeJoint.prototype.m_localAnchorB=null,box2d.b2RopeJoint.prototype.m_maxLength=0,box2d.b2RopeJoint.prototype.m_length=0,box2d.b2RopeJoint.prototype.m_impulse=0,box2d.b2RopeJoint.prototype.m_indexA=0,box2d.b2RopeJoint.prototype.m_indexB=0,box2d.b2RopeJoint.prototype.m_u=null,box2d.b2RopeJoint.prototype.m_rA=null,box2d.b2RopeJoint.prototype.m_rB=null,box2d.b2RopeJoint.prototype.m_localCenterA=null,box2d.b2RopeJoint.prototype.m_localCenterB=null,box2d.b2RopeJoint.prototype.m_invMassA=0,box2d.b2RopeJoint.prototype.m_invMassB=0,box2d.b2RopeJoint.prototype.m_invIA=0,box2d.b2RopeJoint.prototype.m_invIB=0,box2d.b2RopeJoint.prototype.m_mass=0,box2d.b2RopeJoint.prototype.m_state=box2d.b2LimitState.e_inactiveLimit,box2d.b2RopeJoint.prototype.m_qA=null,box2d.b2RopeJoint.prototype.m_qB=null,box2d.b2RopeJoint.prototype.m_lalcA=null,box2d.b2RopeJoint.prototype.m_lalcB=null,box2d.b2RopeJoint.prototype.InitVelocityConstraints=function(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=t.positions[this.m_indexA].c,i=t.positions[this.m_indexA].a,o=t.velocities[this.m_indexA].v,s=t.velocities[this.m_indexA].w,n=t.positions[this.m_indexB].c,r=t.positions[this.m_indexB].a,a=t.velocities[this.m_indexB].v,h=t.velocities[this.m_indexB].w,i=this.m_qA.SetAngleRadians(i),r=this.m_qB.SetAngleRadians(r),i=(box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),box2d.b2MulRV(i,this.m_lalcA,this.m_rA),box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),box2d.b2MulRV(r,this.m_lalcB,this.m_rB),this.m_u.Copy(n).SelfAdd(this.m_rB).SelfSub(e).SelfSub(this.m_rA),this.m_length=this.m_u.GetLength(),this.m_length-this.m_maxLength);this.m_state=0<i?box2d.b2LimitState.e_atUpperLimit:box2d.b2LimitState.e_inactiveLimit,this.m_length>box2d.b2_linearSlop?(this.m_u.SelfMul(1/this.m_length),r=box2d.b2CrossVV(this.m_rA,this.m_u),n=box2d.b2CrossVV(this.m_rB,this.m_u),e=this.m_invMassA+this.m_invIA*r*r+this.m_invMassB+this.m_invIB*n*n,this.m_mass=0!==e?1/e:0,t.step.warmStarting?(this.m_impulse*=t.step.dtRatio,i=box2d.b2MulSV(this.m_impulse,this.m_u,box2d.b2RopeJoint.prototype.InitVelocityConstraints.s_P),o.SelfMulSub(this.m_invMassA,i),s-=this.m_invIA*box2d.b2CrossVV(this.m_rA,i),a.SelfMulAdd(this.m_invMassB,i),h+=this.m_invIB*box2d.b2CrossVV(this.m_rB,i)):this.m_impulse=0,t.velocities[this.m_indexA].w=s,t.velocities[this.m_indexB].w=h):(this.m_u.SetZero(),this.m_mass=0,this.m_impulse=0)},box2d.b2RopeJoint.prototype.InitVelocityConstraints.s_P=new box2d.b2Vec2,box2d.b2RopeJoint.prototype.SolveVelocityConstraints=function(t){var e=t.velocities[this.m_indexA].v,i=t.velocities[this.m_indexA].w,o=t.velocities[this.m_indexB].v,s=t.velocities[this.m_indexB].w,n=box2d.b2AddVCrossSV(e,i,this.m_rA,box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_vpA),r=box2d.b2AddVCrossSV(o,s,this.m_rB,box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_vpB),a=this.m_length-this.m_maxLength,r=box2d.b2DotVV(this.m_u,box2d.b2SubVV(r,n,box2d.b2Vec2.s_t0)),n=(a<0&&(r+=t.step.inv_dt*a),-this.m_mass*r),a=this.m_impulse,r=(this.m_impulse=box2d.b2Min(0,this.m_impulse+n),n=this.m_impulse-a,box2d.b2MulSV(n,this.m_u,box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_P));e.SelfMulSub(this.m_invMassA,r),i-=this.m_invIA*box2d.b2CrossVV(this.m_rA,r),o.SelfMulAdd(this.m_invMassB,r),s+=this.m_invIB*box2d.b2CrossVV(this.m_rB,r),t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=s},box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_vpA=new box2d.b2Vec2,box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_vpB=new box2d.b2Vec2,box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2,box2d.b2RopeJoint.prototype.SolvePositionConstraints=function(t){var e=t.positions[this.m_indexA].c,i=t.positions[this.m_indexA].a,o=t.positions[this.m_indexB].c,s=t.positions[this.m_indexB].a,n=this.m_qA.SetAngleRadians(i),r=this.m_qB.SetAngleRadians(s),n=(box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),box2d.b2MulRV(n,this.m_lalcA,this.m_rA)),r=(box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),box2d.b2MulRV(r,this.m_lalcB,this.m_rB)),a=this.m_u.Copy(o).SelfAdd(r).SelfSub(e).SelfSub(n),h=a.Normalize(),l=h-this.m_maxLength,l=box2d.b2Clamp(l,0,box2d.b2_maxLinearCorrection),l=-this.m_mass*l,l=box2d.b2MulSV(l,a,box2d.b2RopeJoint.prototype.SolvePositionConstraints.s_P);return e.SelfMulSub(this.m_invMassA,l),i-=this.m_invIA*box2d.b2CrossVV(n,l),o.SelfMulAdd(this.m_invMassB,l),s+=this.m_invIB*box2d.b2CrossVV(r,l),t.positions[this.m_indexA].a=i,t.positions[this.m_indexB].a=s,h-this.m_maxLength<box2d.b2_linearSlop},box2d.b2RopeJoint.prototype.SolvePositionConstraints.s_P=new box2d.b2Vec2,box2d.b2RopeJoint.prototype.GetAnchorA=function(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)},box2d.b2RopeJoint.prototype.GetAnchorB=function(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)},box2d.b2RopeJoint.prototype.GetReactionForce=function(t,e){return box2d.b2MulSV(t*this.m_impulse,this.m_u,e)},box2d.b2RopeJoint.prototype.GetReactionTorque=function(t){return 0},box2d.b2RopeJoint.prototype.GetLocalAnchorA=function(t){return t.Copy(this.m_localAnchorA)},box2d.b2RopeJoint.prototype.GetLocalAnchorB=function(t){return t.Copy(this.m_localAnchorB)},box2d.b2RopeJoint.prototype.SetMaxLength=function(t){this.m_maxLength=t},box2d.b2RopeJoint.prototype.GetMaxLength=function(){return this.m_maxLength},box2d.b2RopeJoint.prototype.GetLimitState=function(){return this.m_state},box2d.b2RopeJoint.prototype.Dump=function(){var t,e;box2d.DEBUG&&(t=this.m_bodyA.m_islandIndex,e=this.m_bodyB.m_islandIndex,box2d.b2Log("  /*box2d.b2RopeJointDef*/ var jd = new box2d.b2RopeJointDef();\n"),box2d.b2Log("  jd.bodyA = bodies[%d];\n",t),box2d.b2Log("  jd.bodyB = bodies[%d];\n",e),box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),box2d.b2Log("  jd.maxLength = %.15f;\n",this.m_maxLength),box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index))},goog.provide("box2d.b2GravityController"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Controller"),goog.require("box2d.b2Math"),box2d.b2GravityController=function(){goog.base(this)},goog.inherits(box2d.b2GravityController,box2d.b2Controller),box2d.b2GravityController.prototype.G=1,box2d.b2GravityController.prototype.invSqr=!0,box2d.b2GravityController.prototype.Step=function(t){if(this.invSqr)for(var e=this.m_bodyList;e;e=e.nextBody)for(var i=e.body,o=i.GetWorldCenter(),s=i.GetMass(),n=this.m_bodyList;n!==e;n=n.nextBody){var r=(h=n.body).GetWorldCenter(),a=h.GetMass();(u=(l=r.x-o.x)*l+(c=r.y-o.y)*c)<box2d.b2_epsilon||((d=box2d.b2GravityController.prototype.Step.s_f.SetXY(l,c)).SelfMul(this.G/u/box2d.b2Sqrt(u)*s*a),i.IsAwake()&&i.ApplyForce(d,o),h.IsAwake()&&h.ApplyForce(d.SelfMul(-1),r))}else for(e=this.m_bodyList;e;e=e.nextBody)for(o=(i=e.body).GetWorldCenter(),s=i.GetMass(),n=this.m_bodyList;n!==e;n=n.nextBody){var h,l,c,u,d,r=(h=n.body).GetWorldCenter(),a=h.GetMass();(u=(l=r.x-o.x)*l+(c=r.y-o.y)*c)<box2d.b2_epsilon||((d=box2d.b2GravityController.prototype.Step.s_f.SetXY(l,c)).SelfMul(this.G/u*s*a),i.IsAwake()&&i.ApplyForce(d,o),h.IsAwake()&&h.ApplyForce(d.SelfMul(-1),r))}},box2d.b2GravityController.prototype.Step.s_f=new box2d.b2Vec2,goog.provide("box2d.b2TimeStep"),goog.require("box2d.b2Settings"),box2d.b2Profile=function(){},box2d.b2Profile.prototype.step=0,box2d.b2Profile.prototype.collide=0,box2d.b2Profile.prototype.solve=0,box2d.b2Profile.prototype.solveInit=0,box2d.b2Profile.prototype.solveVelocity=0,box2d.b2Profile.prototype.solvePosition=0,box2d.b2Profile.prototype.broadphase=0,box2d.b2Profile.prototype.solveTOI=0,box2d.b2Profile.prototype.Reset=function(){return this.step=0,this.collide=0,this.solve=0,this.solveInit=0,this.solveVelocity=0,this.solvePosition=0,this.broadphase=0,this.solveTOI=0,this},box2d.b2TimeStep=function(){},box2d.b2TimeStep.prototype.dt=0,box2d.b2TimeStep.prototype.inv_dt=0,box2d.b2TimeStep.prototype.dtRatio=0,box2d.b2TimeStep.prototype.velocityIterations=0,box2d.b2TimeStep.prototype.positionIterations=0,box2d.b2TimeStep.prototype.warmStarting=!1,box2d.b2TimeStep.prototype.Copy=function(t){return this.dt=t.dt,this.inv_dt=t.inv_dt,this.dtRatio=t.dtRatio,this.positionIterations=t.positionIterations,this.velocityIterations=t.velocityIterations,this.warmStarting=t.warmStarting,this},box2d.b2Position=function(){this.c=new box2d.b2Vec2},box2d.b2Position.prototype.c=null,box2d.b2Position.prototype.a=0,box2d.b2Position.MakeArray=function(t){return box2d.b2MakeArray(t,function(t){return new box2d.b2Position})},box2d.b2Velocity=function(){this.v=new box2d.b2Vec2},box2d.b2Velocity.prototype.v=null,box2d.b2Velocity.prototype.w=0,box2d.b2Velocity.MakeArray=function(t){return box2d.b2MakeArray(t,function(t){return new box2d.b2Velocity})},box2d.b2SolverData=function(){this.step=new box2d.b2TimeStep},box2d.b2SolverData.prototype.step=null,box2d.b2SolverData.prototype.positions=null,box2d.b2SolverData.prototype.velocities=null,goog.provide("box2d.b2Collision"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Math"),goog.require("box2d.b2Distance"),box2d.b2ContactFeatureType={e_vertex:0,e_face:1},goog.exportProperty(box2d.b2ContactFeatureType,"e_vertex",box2d.b2ContactFeatureType.e_vertex),goog.exportProperty(box2d.b2ContactFeatureType,"e_face",box2d.b2ContactFeatureType.e_face),box2d.b2ContactFeature=function(t){this._id=t},box2d.b2ContactFeature.prototype._id=null,box2d.b2ContactFeature.prototype._indexA=0,box2d.b2ContactFeature.prototype._indexB=0,box2d.b2ContactFeature.prototype._typeA=0,box2d.b2ContactFeature.prototype._typeB=0,Object.defineProperty(box2d.b2ContactFeature.prototype,"indexA",{enumerable:!1,configurable:!0,get:function(){return this._indexA},set:function(t){this._indexA=t,this._id._key=4294967040&this._id._key|255&this._indexA}}),Object.defineProperty(box2d.b2ContactFeature.prototype,"indexB",{enumerable:!1,configurable:!0,get:function(){return this._indexB},set:function(t){this._indexB=t,this._id._key=4294902015&this._id._key|this._indexB<<8&65280}}),Object.defineProperty(box2d.b2ContactFeature.prototype,"typeA",{enumerable:!1,configurable:!0,get:function(){return this._typeA},set:function(t){this._typeA=t,this._id._key=4278255615&this._id._key|this._typeA<<16&16711680}}),Object.defineProperty(box2d.b2ContactFeature.prototype,"typeB",{enumerable:!1,configurable:!0,get:function(){return this._typeB},set:function(t){this._typeB=t,this._id._key=16777215&this._id._key|this._typeB<<24&4278190080}}),box2d.b2ContactID=function(){this.cf=new box2d.b2ContactFeature(this)},box2d.b2ContactID.prototype.cf=null,box2d.b2ContactID.prototype.key=0,box2d.b2ContactID.prototype.Copy=function(t){return this.key=t.key,this},box2d.b2ContactID.prototype.Clone=function(){return(new box2d.b2ContactID).Copy(this)},Object.defineProperty(box2d.b2ContactID.prototype,"key",{enumerable:!1,configurable:!0,get:function(){return this._key},set:function(t){this._key=t,this.cf._indexA=255&this._key,this.cf._indexB=this._key>>8&255,this.cf._typeA=this._key>>16&255,this.cf._typeB=this._key>>24&255}}),box2d.b2ManifoldPoint=function(){this.localPoint=new box2d.b2Vec2,this.id=new box2d.b2ContactID},box2d.b2ManifoldPoint.prototype.localPoint=null,box2d.b2ManifoldPoint.prototype.normalImpulse=0,box2d.b2ManifoldPoint.prototype.tangentImpulse=0,box2d.b2ManifoldPoint.prototype.id=null,box2d.b2ManifoldPoint.MakeArray=function(t){return box2d.b2MakeArray(t,function(t){return new box2d.b2ManifoldPoint})},box2d.b2ManifoldPoint.prototype.Reset=function(){this.localPoint.SetZero(),this.normalImpulse=0,this.tangentImpulse=0,this.id.key=0},box2d.b2ManifoldPoint.prototype.Copy=function(t){return this.localPoint.Copy(t.localPoint),this.normalImpulse=t.normalImpulse,this.tangentImpulse=t.tangentImpulse,this.id.Copy(t.id),this},box2d.b2ManifoldType={e_unknown:-1,e_circles:0,e_faceA:1,e_faceB:2},goog.exportProperty(box2d.b2ManifoldType,"e_unknown",box2d.b2ManifoldType.e_unknown),goog.exportProperty(box2d.b2ManifoldType,"e_circles",box2d.b2ManifoldType.e_circles),goog.exportProperty(box2d.b2ManifoldType,"e_faceA",box2d.b2ManifoldType.e_faceA),goog.exportProperty(box2d.b2ManifoldType,"e_faceB",box2d.b2ManifoldType.e_faceB),box2d.b2Manifold=function(){this.points=box2d.b2ManifoldPoint.MakeArray(box2d.b2_maxManifoldPoints),this.localNormal=new box2d.b2Vec2,this.localPoint=new box2d.b2Vec2,this.type=box2d.b2ManifoldType.e_unknown,this.pointCount=0},box2d.b2Manifold.prototype.points=null,box2d.b2Manifold.prototype.localNormal=null,box2d.b2Manifold.prototype.localPoint=null,box2d.b2Manifold.prototype.type=box2d.b2ManifoldType.e_unknown,box2d.b2Manifold.prototype.pointCount=0,box2d.b2Manifold.prototype.Reset=function(){for(var t=0,e=box2d.b2_maxManifoldPoints;t<e;++t)this.points[t].Reset();this.localNormal.SetZero(),this.localPoint.SetZero(),this.type=box2d.b2ManifoldType.e_unknown,this.pointCount=0},box2d.b2Manifold.prototype.Copy=function(t){this.pointCount=t.pointCount;for(var e=0,i=box2d.b2_maxManifoldPoints;e<i;++e)this.points[e].Copy(t.points[e]);return this.localNormal.Copy(t.localNormal),this.localPoint.Copy(t.localPoint),this.type=t.type,this},box2d.b2Manifold.prototype.Clone=function(){return(new box2d.b2Manifold).Copy(this)},box2d.b2WorldManifold=function(){this.normal=new box2d.b2Vec2,this.points=box2d.b2Vec2.MakeArray(box2d.b2_maxManifoldPoints),this.separations=box2d.b2MakeNumberArray(box2d.b2_maxManifoldPoints)},box2d.b2WorldManifold.prototype.normal=null,box2d.b2WorldManifold.prototype.points=null,box2d.b2WorldManifold.prototype.separations=null,box2d.b2WorldManifold.prototype.Initialize=function(t,e,i,o,s){if(0!==t.pointCount)switch(t.type){case box2d.b2ManifoldType.e_circles:this.normal.SetXY(1,0);var n=box2d.b2MulXV(e,t.localPoint,box2d.b2WorldManifold.prototype.Initialize.s_pointA),r=box2d.b2MulXV(o,t.points[0].localPoint,box2d.b2WorldManifold.prototype.Initialize.s_pointB),a=(box2d.b2DistanceSquaredVV(n,r)>box2d.b2_epsilon_sq&&box2d.b2SubVV(r,n,this.normal).SelfNormalize(),box2d.b2AddVMulSV(n,i,this.normal,box2d.b2WorldManifold.prototype.Initialize.s_cA)),h=box2d.b2SubVMulSV(r,s,this.normal,box2d.b2WorldManifold.prototype.Initialize.s_cB);box2d.b2MidVV(a,h,this.points[0]),this.separations[0]=box2d.b2DotVV(box2d.b2SubVV(h,a,box2d.b2Vec2.s_t0),this.normal);break;case box2d.b2ManifoldType.e_faceA:box2d.b2MulRV(e.q,t.localNormal,this.normal);for(var l=box2d.b2MulXV(e,t.localPoint,box2d.b2WorldManifold.prototype.Initialize.s_planePoint),c=0,u=t.pointCount;c<u;++c){var d=box2d.b2MulXV(o,t.points[c].localPoint,box2d.b2WorldManifold.prototype.Initialize.s_clipPoint),p=i-box2d.b2DotVV(box2d.b2SubVV(d,l,box2d.b2Vec2.s_t0),this.normal),a=box2d.b2AddVMulSV(d,p,this.normal,box2d.b2WorldManifold.prototype.Initialize.s_cA),h=box2d.b2SubVMulSV(d,s,this.normal,box2d.b2WorldManifold.prototype.Initialize.s_cB);box2d.b2MidVV(a,h,this.points[c]),this.separations[c]=box2d.b2DotVV(box2d.b2SubVV(h,a,box2d.b2Vec2.s_t0),this.normal)}break;case box2d.b2ManifoldType.e_faceB:box2d.b2MulRV(o.q,t.localNormal,this.normal);for(l=box2d.b2MulXV(o,t.localPoint,box2d.b2WorldManifold.prototype.Initialize.s_planePoint),c=0,u=t.pointCount;c<u;++c){d=box2d.b2MulXV(e,t.points[c].localPoint,box2d.b2WorldManifold.prototype.Initialize.s_clipPoint),p=s-box2d.b2DotVV(box2d.b2SubVV(d,l,box2d.b2Vec2.s_t0),this.normal),h=box2d.b2AddVMulSV(d,p,this.normal,box2d.b2WorldManifold.prototype.Initialize.s_cB),a=box2d.b2SubVMulSV(d,i,this.normal,box2d.b2WorldManifold.prototype.Initialize.s_cA);box2d.b2MidVV(a,h,this.points[c]),this.separations[c]=box2d.b2DotVV(box2d.b2SubVV(a,h,box2d.b2Vec2.s_t0),this.normal)}this.normal.SelfNeg()}},box2d.b2WorldManifold.prototype.Initialize.s_pointA=new box2d.b2Vec2,box2d.b2WorldManifold.prototype.Initialize.s_pointB=new box2d.b2Vec2,box2d.b2WorldManifold.prototype.Initialize.s_cA=new box2d.b2Vec2,box2d.b2WorldManifold.prototype.Initialize.s_cB=new box2d.b2Vec2,box2d.b2WorldManifold.prototype.Initialize.s_planePoint=new box2d.b2Vec2,box2d.b2WorldManifold.prototype.Initialize.s_clipPoint=new box2d.b2Vec2,box2d.b2PointState={b2_nullState:0,b2_addState:1,b2_persistState:2,b2_removeState:3},goog.exportProperty(box2d.b2PointState,"b2_nullState   ",box2d.b2PointState.b2_nullState),goog.exportProperty(box2d.b2PointState,"b2_addState    ",box2d.b2PointState.b2_addState),goog.exportProperty(box2d.b2PointState,"b2_persistState",box2d.b2PointState.b2_persistState),goog.exportProperty(box2d.b2PointState,"b2_removeState ",box2d.b2PointState.b2_removeState),box2d.b2GetPointStates=function(t,e,i,o){for(var s=0,n=i.pointCount;s<n;++s){var r=i.points[s].id.key;t[s]=box2d.b2PointState.b2_removeState;for(var a=0,h=o.pointCount;a<h;++a)if(o.points[a].id.key===r){t[s]=box2d.b2PointState.b2_persistState;break}}for(n=box2d.b2_maxManifoldPoints;s<n;++s)t[s]=box2d.b2PointState.b2_nullState;for(s=0,n=o.pointCount;s<n;++s){r=o.points[s].id.key;e[s]=box2d.b2PointState.b2_addState;for(a=0,h=i.pointCount;a<h;++a)if(i.points[a].id.key===r){e[s]=box2d.b2PointState.b2_persistState;break}}for(n=box2d.b2_maxManifoldPoints;s<n;++s)e[s]=box2d.b2PointState.b2_nullState},box2d.b2ClipVertex=function(){this.v=new box2d.b2Vec2,this.id=new box2d.b2ContactID},box2d.b2ClipVertex.prototype.v=null,box2d.b2ClipVertex.prototype.id=null,box2d.b2ClipVertex.MakeArray=function(t){return box2d.b2MakeArray(t,function(t){return new box2d.b2ClipVertex})},box2d.b2ClipVertex.prototype.Copy=function(t){return this.v.Copy(t.v),this.id.Copy(t.id),this},box2d.b2RayCastInput=function(){this.p1=new box2d.b2Vec2,this.p2=new box2d.b2Vec2,this.maxFraction=1},box2d.b2RayCastInput.prototype.p1=null,box2d.b2RayCastInput.prototype.p2=null,box2d.b2RayCastInput.prototype.maxFraction=1,box2d.b2RayCastInput.prototype.Copy=function(t){return this.p1.Copy(t.p1),this.p2.Copy(t.p2),this.maxFraction=t.maxFraction,this},box2d.b2RayCastOutput=function(){this.normal=new box2d.b2Vec2,this.fraction=0},box2d.b2RayCastOutput.prototype.normal=null,box2d.b2RayCastOutput.prototype.fraction=0,box2d.b2RayCastOutput.prototype.Copy=function(t){return this.normal.Copy(t.normal),this.fraction=t.fraction,this},box2d.b2AABB=function(){this.lowerBound=new box2d.b2Vec2,this.upperBound=new box2d.b2Vec2,this.m_out_center=new box2d.b2Vec2,this.m_out_extent=new box2d.b2Vec2},box2d.b2AABB.prototype.lowerBound=null,box2d.b2AABB.prototype.upperBound=null,box2d.b2AABB.prototype.m_out_center=null,box2d.b2AABB.prototype.m_out_extent=null,box2d.b2AABB.prototype.Copy=function(t){return this.lowerBound.Copy(t.lowerBound),this.upperBound.Copy(t.upperBound),this},box2d.b2AABB.prototype.IsValid=function(){var t=this.upperBound.x-this.lowerBound.x,e=this.upperBound.y-this.lowerBound.y,t=0<=t&&0<=e;return t&&this.lowerBound.IsValid()&&this.upperBound.IsValid()},box2d.b2AABB.prototype.GetCenter=function(){return box2d.b2MidVV(this.lowerBound,this.upperBound,this.m_out_center)},box2d.b2AABB.prototype.GetExtents=function(){return box2d.b2ExtVV(this.lowerBound,this.upperBound,this.m_out_extent)},box2d.b2AABB.prototype.GetPerimeter=function(){return 2*(this.upperBound.x-this.lowerBound.x+(this.upperBound.y-this.lowerBound.y))},box2d.b2AABB.prototype.Combine1=function(t){return this.lowerBound.x=box2d.b2Min(this.lowerBound.x,t.lowerBound.x),this.lowerBound.y=box2d.b2Min(this.lowerBound.y,t.lowerBound.y),this.upperBound.x=box2d.b2Max(this.upperBound.x,t.upperBound.x),this.upperBound.y=box2d.b2Max(this.upperBound.y,t.upperBound.y),this},box2d.b2AABB.prototype.Combine2=function(t,e){return this.lowerBound.x=box2d.b2Min(t.lowerBound.x,e.lowerBound.x),this.lowerBound.y=box2d.b2Min(t.lowerBound.y,e.lowerBound.y),this.upperBound.x=box2d.b2Max(t.upperBound.x,e.upperBound.x),this.upperBound.y=box2d.b2Max(t.upperBound.y,e.upperBound.y),this},box2d.b2AABB.Combine=function(t,e,i){return i.Combine2(t,e),i},box2d.b2AABB.prototype.Contains=function(t){return this.lowerBound.x<=t.lowerBound.x&&this.lowerBound.y<=t.lowerBound.y&&t.upperBound.x<=this.upperBound.x&&t.upperBound.y<=this.upperBound.y},box2d.b2AABB.prototype.RayCast=function(t,e){var i=-box2d.b2_maxFloat,o=box2d.b2_maxFloat,s=e.p1.x,n=e.p1.y,r=e.p2.x-e.p1.x,a=e.p2.y-e.p1.y,h=box2d.b2Abs(r),l=box2d.b2Abs(a),c=t.normal;if(h<box2d.b2_epsilon){if(s<this.lowerBound.x||this.upperBound.x<s)return!1}else{var u=1/r,d=(this.lowerBound.x-s)*u,p=-1;if((f=(this.upperBound.x-s)*u)<d&&(b=d,d=f,f=b,p=1),i<d&&(c.x=p,c.y=0,i=d),(o=box2d.b2Min(o,f))<i)return!1}if(l<box2d.b2_epsilon){if(n<this.lowerBound.y||this.upperBound.y<n)return!1}else{var f,b,u=1/a,d=(this.lowerBound.y-n)*u,p=-1;if((f=(this.upperBound.y-n)*u)<d&&(b=d,d=f,f=b,p=1),i<d&&(c.x=0,c.y=p,i=d),(o=box2d.b2Min(o,f))<i)return!1}return!(i<0||e.maxFraction<i||(t.fraction=i,0))},box2d.b2AABB.prototype.TestOverlap=function(t){var e=t.lowerBound.x-this.upperBound.x,i=t.lowerBound.y-this.upperBound.y,o=this.lowerBound.x-t.upperBound.x,t=this.lowerBound.y-t.upperBound.y;return!(0<e||0<i||0<o||0<t)},box2d.b2TestOverlapAABB=function(t,e){var i=e.lowerBound.x-t.upperBound.x,o=e.lowerBound.y-t.upperBound.y,s=t.lowerBound.x-e.upperBound.x,t=t.lowerBound.y-e.upperBound.y;return!(0<i||0<o||0<s||0<t)},box2d.b2ClipSegmentToLine=function(t,e,i,o,s){var n=0,r=e[0],e=e[1],a=box2d.b2DotVV(i,r.v)-o,i=box2d.b2DotVV(i,e.v)-o;return a<=0&&t[n++].Copy(r),i<=0&&t[n++].Copy(e),a*i<0&&((o=t[n].v).x=r.v.x+(a=a/(a-i))*(e.v.x-r.v.x),o.y=r.v.y+a*(e.v.y-r.v.y),(i=t[n].id).cf.indexA=s,i.cf.indexB=r.id.cf.indexB,i.cf.typeA=box2d.b2ContactFeatureType.e_vertex,i.cf.typeB=box2d.b2ContactFeatureType.e_face,++n),n},box2d.b2TestOverlapShape=function(t,e,i,o,s,n){var r=box2d.b2TestOverlapShape.s_input.Reset(),t=(r.proxyA.SetShape(t,e),r.proxyB.SetShape(i,o),r.transformA.Copy(s),r.transformB.Copy(n),r.useRadii=!0,box2d.b2TestOverlapShape.s_simplexCache.Reset()),e=(t.count=0,box2d.b2TestOverlapShape.s_output.Reset());return box2d.b2Distance(e,t,r),e.distance<10*box2d.b2_epsilon},box2d.b2TestOverlapShape.s_input=new box2d.b2DistanceInput,box2d.b2TestOverlapShape.s_simplexCache=new box2d.b2SimplexCache,box2d.b2TestOverlapShape.s_output=new box2d.b2DistanceOutput,goog.provide("box2d.b2Timer"),goog.require("box2d.b2Settings"),box2d.b2Timer=function(){this.m_start=(new Date).getTime()},box2d.b2Timer.prototype.m_start=0,box2d.b2Timer.prototype.Reset=function(){return this.m_start=(new Date).getTime(),this},box2d.b2Timer.prototype.GetMilliseconds=function(){return(new Date).getTime()-this.m_start},box2d.b2Counter=function(){},box2d.b2Counter.prototype.m_count=0,box2d.b2Counter.prototype.m_min_count=0,box2d.b2Counter.prototype.m_max_count=0,box2d.b2Counter.prototype.GetCount=function(){return this.m_count},box2d.b2Counter.prototype.GetMinCount=function(){return this.m_min_count},box2d.b2Counter.prototype.GetMaxCount=function(){return this.m_max_count},box2d.b2Counter.prototype.ResetCount=function(){var t=this.m_count;return this.m_count=0,t},box2d.b2Counter.prototype.ResetMinCount=function(){this.m_min_count=0},box2d.b2Counter.prototype.ResetMaxCount=function(){this.m_max_count=0},box2d.b2Counter.prototype.Increment=function(){this.m_count++,this.m_max_count<this.m_count&&(this.m_max_count=this.m_count)},box2d.b2Counter.prototype.Decrement=function(){this.m_count--,this.m_min_count>this.m_count&&(this.m_min_count=this.m_count)},goog.provide("box2d.b2TimeOfImpact"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Distance"),goog.require("box2d.b2Math"),goog.require("box2d.b2Timer"),box2d.b2_toiTime=0,box2d.b2_toiMaxTime=0,box2d.b2_toiCalls=0,box2d.b2_toiIters=0,box2d.b2_toiMaxIters=0,box2d.b2_toiRootIters=0,box2d.b2_toiMaxRootIters=0,box2d.b2TOIInput=function(){this.proxyA=new box2d.b2DistanceProxy,this.proxyB=new box2d.b2DistanceProxy,this.sweepA=new box2d.b2Sweep,this.sweepB=new box2d.b2Sweep},box2d.b2TOIInput.prototype.proxyA=null,box2d.b2TOIInput.prototype.proxyB=null,box2d.b2TOIInput.prototype.sweepA=null,box2d.b2TOIInput.prototype.sweepB=null,box2d.b2TOIInput.prototype.tMax=0,box2d.b2TOIOutputState={e_unknown:0,e_failed:1,e_overlapped:2,e_touching:3,e_separated:4},goog.exportProperty(box2d.b2TOIOutputState,"e_unknown",box2d.b2TOIOutputState.e_unknown),goog.exportProperty(box2d.b2TOIOutputState,"e_failed",box2d.b2TOIOutputState.e_failed),goog.exportProperty(box2d.b2TOIOutputState,"e_overlapped",box2d.b2TOIOutputState.e_overlapped),goog.exportProperty(box2d.b2TOIOutputState,"e_touching",box2d.b2TOIOutputState.e_touching),goog.exportProperty(box2d.b2TOIOutputState,"e_separated",box2d.b2TOIOutputState.e_separated),box2d.b2TOIOutput=function(){},box2d.b2TOIOutput.prototype.state=box2d.b2TOIOutputState.e_unknown,box2d.b2TOIOutput.prototype.t=0,box2d.b2SeparationFunctionType={e_unknown:-1,e_points:0,e_faceA:1,e_faceB:2},goog.exportProperty(box2d.b2SeparationFunctionType,"e_unknown",box2d.b2SeparationFunctionType.e_unknown),goog.exportProperty(box2d.b2SeparationFunctionType,"e_points",box2d.b2SeparationFunctionType.e_points),goog.exportProperty(box2d.b2SeparationFunctionType,"e_faceA",box2d.b2SeparationFunctionType.e_faceA),goog.exportProperty(box2d.b2SeparationFunctionType,"e_faceB",box2d.b2SeparationFunctionType.e_faceB),box2d.b2SeparationFunction=function(){this.m_sweepA=new box2d.b2Sweep,this.m_sweepB=new box2d.b2Sweep,this.m_localPoint=new box2d.b2Vec2,this.m_axis=new box2d.b2Vec2},box2d.b2SeparationFunction.prototype.m_proxyA=null,box2d.b2SeparationFunction.prototype.m_proxyB=null,box2d.b2SeparationFunction.prototype.m_sweepA=null,box2d.b2SeparationFunction.prototype.m_sweepB=null,box2d.b2SeparationFunction.prototype.m_type=box2d.b2SeparationFunctionType.e_unknown,box2d.b2SeparationFunction.prototype.m_localPoint=null,box2d.b2SeparationFunction.prototype.m_axis=null,box2d.b2SeparationFunction.prototype.Initialize=function(t,e,i,o,s,n){this.m_proxyA=e,this.m_proxyB=o;var r,a,h,l,c,u,e=t.count,o=(box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<e&&e<3),this.m_sweepA.Copy(i),this.m_sweepB.Copy(s),box2d.b2TimeOfImpact.s_xfA),i=box2d.b2TimeOfImpact.s_xfB;return this.m_sweepA.GetTransform(o,n),this.m_sweepB.GetTransform(i,n),1===e?(this.m_type=box2d.b2SeparationFunctionType.e_points,r=this.m_proxyA.GetVertex(t.indexA[0]),l=this.m_proxyB.GetVertex(t.indexB[0]),h=box2d.b2MulXV(o,r,box2d.b2TimeOfImpact.s_pointA),c=box2d.b2MulXV(i,l,box2d.b2TimeOfImpact.s_pointB),box2d.b2SubVV(c,h,this.m_axis),this.m_axis.Normalize()):(t.indexA[0]===t.indexA[1]?(this.m_type=box2d.b2SeparationFunctionType.e_faceB,s=this.m_proxyB.GetVertex(t.indexB[0]),n=this.m_proxyB.GetVertex(t.indexB[1]),box2d.b2CrossVOne(box2d.b2SubVV(n,s,box2d.b2Vec2.s_t0),this.m_axis).SelfNormalize(),a=box2d.b2MulRV(i.q,this.m_axis,box2d.b2TimeOfImpact.s_normal),box2d.b2MidVV(s,n,this.m_localPoint),c=box2d.b2MulXV(i,this.m_localPoint,box2d.b2TimeOfImpact.s_pointB),r=this.m_proxyA.GetVertex(t.indexA[0]),h=box2d.b2MulXV(o,r,box2d.b2TimeOfImpact.s_pointA),(u=box2d.b2DotVV(box2d.b2SubVV(h,c,box2d.b2Vec2.s_t0),a))<0&&(this.m_axis.SelfNeg(),u=-u)):(this.m_type=box2d.b2SeparationFunctionType.e_faceA,e=this.m_proxyA.GetVertex(t.indexA[0]),s=this.m_proxyA.GetVertex(t.indexA[1]),box2d.b2CrossVOne(box2d.b2SubVV(s,e,box2d.b2Vec2.s_t0),this.m_axis).SelfNormalize(),a=box2d.b2MulRV(o.q,this.m_axis,box2d.b2TimeOfImpact.s_normal),box2d.b2MidVV(e,s,this.m_localPoint),h=box2d.b2MulXV(o,this.m_localPoint,box2d.b2TimeOfImpact.s_pointA),l=this.m_proxyB.GetVertex(t.indexB[0]),c=box2d.b2MulXV(i,l,box2d.b2TimeOfImpact.s_pointB),(u=box2d.b2DotVV(box2d.b2SubVV(c,h,box2d.b2Vec2.s_t0),a))<0&&(this.m_axis.SelfNeg(),u=-u)),u)},box2d.b2SeparationFunction.prototype.FindMinSeparation=function(t,e,i){var o=box2d.b2TimeOfImpact.s_xfA,s=box2d.b2TimeOfImpact.s_xfB;switch(this.m_sweepA.GetTransform(o,i),this.m_sweepB.GetTransform(s,i),this.m_type){case box2d.b2SeparationFunctionType.e_points:var n=box2d.b2MulTRV(o.q,this.m_axis,box2d.b2TimeOfImpact.s_axisA),r=box2d.b2MulTRV(s.q,box2d.b2NegV(this.m_axis,box2d.b2Vec2.s_t0),box2d.b2TimeOfImpact.s_axisB),a=(t[0]=this.m_proxyA.GetSupport(n),e[0]=this.m_proxyB.GetSupport(r),this.m_proxyA.GetVertex(t[0])),h=this.m_proxyB.GetVertex(e[0]),l=box2d.b2MulXV(o,a,box2d.b2TimeOfImpact.s_pointA),c=box2d.b2MulXV(s,h,box2d.b2TimeOfImpact.s_pointB);return box2d.b2DotVV(box2d.b2SubVV(c,l,box2d.b2Vec2.s_t0),this.m_axis);case box2d.b2SeparationFunctionType.e_faceA:var u=box2d.b2MulRV(o.q,this.m_axis,box2d.b2TimeOfImpact.s_normal),l=box2d.b2MulXV(o,this.m_localPoint,box2d.b2TimeOfImpact.s_pointA),r=box2d.b2MulTRV(s.q,box2d.b2NegV(u,box2d.b2Vec2.s_t0),box2d.b2TimeOfImpact.s_axisB),h=(t[0]=-1,e[0]=this.m_proxyB.GetSupport(r),this.m_proxyB.GetVertex(e[0])),c=box2d.b2MulXV(s,h,box2d.b2TimeOfImpact.s_pointB);return box2d.b2DotVV(box2d.b2SubVV(c,l,box2d.b2Vec2.s_t0),u);case box2d.b2SeparationFunctionType.e_faceB:u=box2d.b2MulRV(s.q,this.m_axis,box2d.b2TimeOfImpact.s_normal),c=box2d.b2MulXV(s,this.m_localPoint,box2d.b2TimeOfImpact.s_pointB),n=box2d.b2MulTRV(o.q,box2d.b2NegV(u,box2d.b2Vec2.s_t0),box2d.b2TimeOfImpact.s_axisA),a=(e[0]=-1,t[0]=this.m_proxyA.GetSupport(n),this.m_proxyA.GetVertex(t[0])),l=box2d.b2MulXV(o,a,box2d.b2TimeOfImpact.s_pointA);return box2d.b2DotVV(box2d.b2SubVV(l,c,box2d.b2Vec2.s_t0),u);default:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),t[0]=-1,e[0]=-1,0}},box2d.b2SeparationFunction.prototype.Evaluate=function(t,e,i){var o=box2d.b2TimeOfImpact.s_xfA,s=box2d.b2TimeOfImpact.s_xfB;switch(this.m_sweepA.GetTransform(o,i),this.m_sweepB.GetTransform(s,i),this.m_type){case box2d.b2SeparationFunctionType.e_points:var n=this.m_proxyA.GetVertex(t),r=this.m_proxyB.GetVertex(e),a=box2d.b2MulXV(o,n,box2d.b2TimeOfImpact.s_pointA),h=box2d.b2MulXV(s,r,box2d.b2TimeOfImpact.s_pointB);return box2d.b2DotVV(box2d.b2SubVV(h,a,box2d.b2Vec2.s_t0),this.m_axis);case box2d.b2SeparationFunctionType.e_faceA:var l=box2d.b2MulRV(o.q,this.m_axis,box2d.b2TimeOfImpact.s_normal),a=box2d.b2MulXV(o,this.m_localPoint,box2d.b2TimeOfImpact.s_pointA),r=this.m_proxyB.GetVertex(e),h=box2d.b2MulXV(s,r,box2d.b2TimeOfImpact.s_pointB);return box2d.b2DotVV(box2d.b2SubVV(h,a,box2d.b2Vec2.s_t0),l);case box2d.b2SeparationFunctionType.e_faceB:l=box2d.b2MulRV(s.q,this.m_axis,box2d.b2TimeOfImpact.s_normal),h=box2d.b2MulXV(s,this.m_localPoint,box2d.b2TimeOfImpact.s_pointB),n=this.m_proxyA.GetVertex(t),a=box2d.b2MulXV(o,n,box2d.b2TimeOfImpact.s_pointA);return box2d.b2DotVV(box2d.b2SubVV(a,h,box2d.b2Vec2.s_t0),l);default:return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),0}},box2d.b2TimeOfImpact=function(t,e){var i=box2d.b2TimeOfImpact.s_timer.Reset(),o=(++box2d.b2_toiCalls,t.state=box2d.b2TOIOutputState.e_unknown,t.t=e.tMax,e.proxyA),s=e.proxyB,n=box2d.b2TimeOfImpact.s_sweepA.Copy(e.sweepA),r=box2d.b2TimeOfImpact.s_sweepB.Copy(e.sweepB),a=(n.Normalize(),r.Normalize(),e.tMax),h=o.m_radius+s.m_radius,l=box2d.b2Max(box2d.b2_linearSlop,h-3*box2d.b2_linearSlop),c=.25*box2d.b2_linearSlop,u=(box2d.ENABLE_ASSERTS&&box2d.b2Assert(c<l),0),d=0,p=box2d.b2TimeOfImpact.s_cache,f=(p.count=0,box2d.b2TimeOfImpact.s_distanceInput);for(f.proxyA=e.proxyA,f.proxyB=e.proxyB,f.useRadii=!1;;){var b=box2d.b2TimeOfImpact.s_xfA,y=box2d.b2TimeOfImpact.s_xfB,b=(n.GetTransform(b,u),r.GetTransform(y,u),f.transformA.Copy(b),f.transformB.Copy(y),box2d.b2TimeOfImpact.s_distanceOutput);if(box2d.b2Distance(b,p,f),b.distance<=0){t.state=box2d.b2TOIOutputState.e_overlapped,t.t=0;break}if(b.distance<l+c){t.state=box2d.b2TOIOutputState.e_touching,t.t=u;break}var m=box2d.b2TimeOfImpact.s_fcn;m.Initialize(p,o,n,s,r,u);for(var x=!1,g=a,v=0;;){var _=box2d.b2TimeOfImpact.s_indexA,w=box2d.b2TimeOfImpact.s_indexB,S=m.FindMinSeparation(_,w,g);if(l+c<S){t.state=box2d.b2TOIOutputState.e_separated,t.t=a,x=!0;break}if(l-c<S){u=g;break}var A=m.Evaluate(_[0],w[0],u);if(A<l-c){t.state=box2d.b2TOIOutputState.e_failed,t.t=u,x=!0;break}if(A<=l+c){t.state=box2d.b2TOIOutputState.e_touching,t.t=u,x=!0;break}for(var C=0,T=u,P=g;;){var B=1&C?T+(l-A)*(P-T)/(S-A):.5*(T+P),E=(++C,++box2d.b2_toiRootIters,m.Evaluate(_[0],w[0],B));if(box2d.b2Abs(E-l)<c){g=B;break}if(l<E?(T=B,A=E):(P=B,S=E),50===C)break}if(box2d.b2_toiMaxRootIters=box2d.b2Max(box2d.b2_toiMaxRootIters,C),++v===box2d.b2_maxPolygonVertices)break}if(++d,++box2d.b2_toiIters,x)break;if(20===d){t.state=box2d.b2TOIOutputState.e_failed,t.t=u;break}}box2d.b2_toiMaxIters=box2d.b2Max(box2d.b2_toiMaxIters,d);h=i.GetMilliseconds();box2d.b2_toiMaxTime=box2d.b2Max(box2d.b2_toiMaxTime,h),box2d.b2_toiTime+=h},box2d.b2TimeOfImpact.s_timer=new box2d.b2Timer,box2d.b2TimeOfImpact.s_cache=new box2d.b2SimplexCache,box2d.b2TimeOfImpact.s_distanceInput=new box2d.b2DistanceInput,box2d.b2TimeOfImpact.s_distanceOutput=new box2d.b2DistanceOutput,box2d.b2TimeOfImpact.s_xfA=new box2d.b2Transform,box2d.b2TimeOfImpact.s_xfB=new box2d.b2Transform,box2d.b2TimeOfImpact.s_indexA=box2d.b2MakeNumberArray(1),box2d.b2TimeOfImpact.s_indexB=box2d.b2MakeNumberArray(1),box2d.b2TimeOfImpact.s_fcn=new box2d.b2SeparationFunction,box2d.b2TimeOfImpact.s_sweepA=new box2d.b2Sweep,box2d.b2TimeOfImpact.s_sweepB=new box2d.b2Sweep,box2d.b2TimeOfImpact.s_pointA=new box2d.b2Vec2,box2d.b2TimeOfImpact.s_pointB=new box2d.b2Vec2,box2d.b2TimeOfImpact.s_normal=new box2d.b2Vec2,box2d.b2TimeOfImpact.s_axisA=new box2d.b2Vec2,box2d.b2TimeOfImpact.s_axisB=new box2d.b2Vec2,goog.provide("box2d.b2Contact"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Collision"),goog.require("box2d.b2TimeOfImpact"),box2d.b2MixFriction=function(t,e){return box2d.b2Sqrt(t*e)},box2d.b2MixRestitution=function(t,e){return e<t?t:e},box2d.b2ContactEdge=function(){},box2d.b2ContactEdge.prototype.other=null,box2d.b2ContactEdge.prototype.contact=null,box2d.b2ContactEdge.prototype.prev=null,box2d.b2ContactEdge.prototype.next=null,box2d.b2ContactFlag={e_none:0,e_islandFlag:1,e_touchingFlag:2,e_enabledFlag:4,e_filterFlag:8,e_bulletHitFlag:16,e_toiFlag:32},goog.exportProperty(box2d.b2ContactFlag,"e_none",box2d.b2ContactFlag.e_none),goog.exportProperty(box2d.b2ContactFlag,"e_islandFlag",box2d.b2ContactFlag.e_islandFlag),goog.exportProperty(box2d.b2ContactFlag,"e_touchingFlag",box2d.b2ContactFlag.e_touchingFlag),goog.exportProperty(box2d.b2ContactFlag,"e_enabledFlag",box2d.b2ContactFlag.e_enabledFlag),goog.exportProperty(box2d.b2ContactFlag,"e_filterFlag",box2d.b2ContactFlag.e_filterFlag),goog.exportProperty(box2d.b2ContactFlag,"e_bulletHitFlag",box2d.b2ContactFlag.e_bulletHitFlag),goog.exportProperty(box2d.b2ContactFlag,"e_toiFlag",box2d.b2ContactFlag.e_toiFlag),box2d.b2Contact=function(){this.m_nodeA=new box2d.b2ContactEdge,this.m_nodeB=new box2d.b2ContactEdge,this.m_manifold=new box2d.b2Manifold,this.m_oldManifold=new box2d.b2Manifold},box2d.b2Contact.prototype.m_flags=box2d.b2ContactFlag.e_none,box2d.b2Contact.prototype.m_prev=null,box2d.b2Contact.prototype.m_next=null,box2d.b2Contact.prototype.m_nodeA=null,box2d.b2Contact.prototype.m_nodeB=null,box2d.b2Contact.prototype.m_fixtureA=null,box2d.b2Contact.prototype.m_fixtureB=null,box2d.b2Contact.prototype.m_indexA=0,box2d.b2Contact.prototype.m_indexB=0,box2d.b2Contact.prototype.m_manifold=null,box2d.b2Contact.prototype.m_toiCount=0,box2d.b2Contact.prototype.m_toi=0,box2d.b2Contact.prototype.m_friction=0,box2d.b2Contact.prototype.m_restitution=0,box2d.b2Contact.prototype.m_tangentSpeed=0,box2d.b2Contact.prototype.m_oldManifold=null,box2d.b2Contact.prototype.GetManifold=function(){return this.m_manifold},box2d.b2Contact.prototype.GetWorldManifold=function(t){var e=this.m_fixtureA.GetBody(),i=this.m_fixtureB.GetBody(),o=this.m_fixtureA.GetShape(),s=this.m_fixtureB.GetShape();t.Initialize(this.m_manifold,e.GetTransform(),o.m_radius,i.GetTransform(),s.m_radius)},box2d.b2Contact.prototype.IsTouching=function(){return(this.m_flags&box2d.b2ContactFlag.e_touchingFlag)===box2d.b2ContactFlag.e_touchingFlag},box2d.b2Contact.prototype.SetEnabled=function(t){t?this.m_flags|=box2d.b2ContactFlag.e_enabledFlag:this.m_flags&=~box2d.b2ContactFlag.e_enabledFlag},box2d.b2Contact.prototype.IsEnabled=function(){return(this.m_flags&box2d.b2ContactFlag.e_enabledFlag)===box2d.b2ContactFlag.e_enabledFlag},box2d.b2Contact.prototype.GetNext=function(){return this.m_next},box2d.b2Contact.prototype.GetFixtureA=function(){return this.m_fixtureA},box2d.b2Contact.prototype.GetChildIndexA=function(){return this.m_indexA},box2d.b2Contact.prototype.GetFixtureB=function(){return this.m_fixtureB},box2d.b2Contact.prototype.GetChildIndexB=function(){return this.m_indexB},box2d.b2Contact.prototype.Evaluate=function(t,e,i){},box2d.b2Contact.prototype.FlagForFiltering=function(){this.m_flags|=box2d.b2ContactFlag.e_filterFlag},box2d.b2Contact.prototype.SetFriction=function(t){this.m_friction=t},box2d.b2Contact.prototype.GetFriction=function(){return this.m_friction},box2d.b2Contact.prototype.ResetFriction=function(){this.m_friction=box2d.b2MixFriction(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction)},box2d.b2Contact.prototype.SetRestitution=function(t){this.m_restitution=t},box2d.b2Contact.prototype.GetRestitution=function(){return this.m_restitution},box2d.b2Contact.prototype.ResetRestitution=function(){this.m_restitution=box2d.b2MixRestitution(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)},box2d.b2Contact.prototype.SetTangentSpeed=function(t){this.m_tangentSpeed=t},box2d.b2Contact.prototype.GetTangentSpeed=function(){return this.m_tangentSpeed},box2d.b2Contact.prototype.Reset=function(t,e,i,o){this.m_flags=box2d.b2ContactFlag.e_enabledFlag,this.m_fixtureA=t,this.m_fixtureB=i,this.m_indexA=e,this.m_indexB=o,this.m_manifold.pointCount=0,this.m_prev=null,this.m_next=null,this.m_nodeA.contact=null,this.m_nodeA.prev=null,this.m_nodeA.next=null,this.m_nodeA.other=null,this.m_nodeB.contact=null,this.m_nodeB.prev=null,this.m_nodeB.next=null,this.m_nodeB.other=null,this.m_toiCount=0,this.m_friction=box2d.b2MixFriction(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction),this.m_restitution=box2d.b2MixRestitution(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)},box2d.b2Contact.prototype.Update=function(t){var e=this.m_oldManifold,e=(this.m_oldManifold=this.m_manifold,this.m_manifold=e,this.m_flags|=box2d.b2ContactFlag.e_enabledFlag,!1),i=(this.m_flags&box2d.b2ContactFlag.e_touchingFlag)===box2d.b2ContactFlag.e_touchingFlag,o=this.m_fixtureA.IsSensor(),s=this.m_fixtureB.IsSensor(),o=o||s,s=this.m_fixtureA.GetBody(),n=this.m_fixtureB.GetBody(),r=s.GetTransform(),a=n.GetTransform();if(o){var h=this.m_fixtureA.GetShape(),l=this.m_fixtureB.GetShape(),e=box2d.b2TestOverlapShape(h,this.m_indexA,l,this.m_indexB,r,a);this.m_manifold.pointCount=0}else{this.Evaluate(this.m_manifold,r,a),e=0<this.m_manifold.pointCount;for(var c=0;c<this.m_manifold.pointCount;++c){var u=this.m_manifold.points[c];u.normalImpulse=0,u.tangentImpulse=0;for(var d=u.id,p=0;p<this.m_oldManifold.pointCount;++p){var f=this.m_oldManifold.points[p];if(f.id.key===d.key){u.normalImpulse=f.normalImpulse,u.tangentImpulse=f.tangentImpulse;break}}}e!==i&&(s.SetAwake(!0),n.SetAwake(!0))}e?this.m_flags|=box2d.b2ContactFlag.e_touchingFlag:this.m_flags&=~box2d.b2ContactFlag.e_touchingFlag,!1==i&&!0===e&&t&&t.BeginContact(this),!0==i&&!1===e&&t&&t.EndContact(this),!1===o&&e&&t&&t.PreSolve(this,this.m_oldManifold)},box2d.b2Contact.prototype.ComputeTOI=function(t,e){var i=box2d.b2Contact.prototype.ComputeTOI.s_input,t=(i.proxyA.SetShape(this.m_fixtureA.GetShape(),this.m_indexA),i.proxyB.SetShape(this.m_fixtureB.GetShape(),this.m_indexB),i.sweepA.Copy(t),i.sweepB.Copy(e),i.tMax=box2d.b2_linearSlop,box2d.b2Contact.prototype.ComputeTOI.s_output);return box2d.b2TimeOfImpact(t,i),t.t},box2d.b2Contact.prototype.ComputeTOI.s_input=new box2d.b2TOIInput,box2d.b2Contact.prototype.ComputeTOI.s_output=new box2d.b2TOIOutput,goog.provide("box2d.b2PolygonAndCircleContact"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Contact"),box2d.b2PolygonAndCircleContact=function(){goog.base(this)},goog.inherits(box2d.b2PolygonAndCircleContact,box2d.b2Contact),box2d.b2PolygonAndCircleContact.Create=function(t){return new box2d.b2PolygonAndCircleContact},box2d.b2PolygonAndCircleContact.Destroy=function(t,e){},box2d.b2PolygonAndCircleContact.prototype.Reset=function(t,e,i,o){goog.base(this,"Reset",t,e,i,o),box2d.ENABLE_ASSERTS&&box2d.b2Assert(t.GetType()===box2d.b2ShapeType.e_polygonShape),box2d.ENABLE_ASSERTS&&box2d.b2Assert(i.GetType()===box2d.b2ShapeType.e_circleShape)},box2d.b2PolygonAndCircleContact.prototype.Evaluate=function(t,e,i){var o=this.m_fixtureA.GetShape(),s=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(o instanceof box2d.b2PolygonShape),box2d.ENABLE_ASSERTS&&box2d.b2Assert(s instanceof box2d.b2CircleShape),box2d.b2CollidePolygonAndCircle(t,o instanceof box2d.b2PolygonShape?o:null,e,s instanceof box2d.b2CircleShape?s:null,i)},goog.provide("box2d.b2EdgeAndPolygonContact"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Contact"),box2d.b2EdgeAndPolygonContact=function(){goog.base(this)},goog.inherits(box2d.b2EdgeAndPolygonContact,box2d.b2Contact),box2d.b2EdgeAndPolygonContact.Create=function(t){return new box2d.b2EdgeAndPolygonContact},box2d.b2EdgeAndPolygonContact.Destroy=function(t,e){},box2d.b2EdgeAndPolygonContact.prototype.Reset=function(t,e,i,o){goog.base(this,"Reset",t,e,i,o),box2d.ENABLE_ASSERTS&&box2d.b2Assert(t.GetType()===box2d.b2ShapeType.e_edgeShape),box2d.ENABLE_ASSERTS&&box2d.b2Assert(i.GetType()===box2d.b2ShapeType.e_polygonShape)},box2d.b2EdgeAndPolygonContact.prototype.Evaluate=function(t,e,i){var o=this.m_fixtureA.GetShape(),s=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(o instanceof box2d.b2EdgeShape),box2d.ENABLE_ASSERTS&&box2d.b2Assert(s instanceof box2d.b2PolygonShape),box2d.b2CollideEdgeAndPolygon(t,o instanceof box2d.b2EdgeShape?o:null,e,s instanceof box2d.b2PolygonShape?s:null,i)},goog.provide("box2d.b2Shape"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Math"),goog.require("box2d.b2Distance"),box2d.b2MassData=function(){this.center=new box2d.b2Vec2(0,0)},box2d.b2MassData.prototype.mass=0,box2d.b2MassData.prototype.center=null,box2d.b2MassData.prototype.I=0,box2d.b2ShapeType={e_unknown:-1,e_circleShape:0,e_edgeShape:1,e_polygonShape:2,e_chainShape:3,e_shapeTypeCount:4},goog.exportProperty(box2d.b2ShapeType,"e_unknown",box2d.b2ShapeType.e_unknown),goog.exportProperty(box2d.b2ShapeType,"e_circleShape",box2d.b2ShapeType.e_circleShape),goog.exportProperty(box2d.b2ShapeType,"e_edgeShape",box2d.b2ShapeType.e_edgeShape),goog.exportProperty(box2d.b2ShapeType,"e_polygonShape",box2d.b2ShapeType.e_polygonShape),goog.exportProperty(box2d.b2ShapeType,"e_chainShape",box2d.b2ShapeType.e_chainShape),goog.exportProperty(box2d.b2ShapeType,"e_shapeTypeCount",box2d.b2ShapeType.e_shapeTypeCount),box2d.b2Shape=function(t,e){this.m_type=t,this.m_radius=e},box2d.b2Shape.prototype.m_type=box2d.b2ShapeType.e_unknown,box2d.b2Shape.prototype.m_radius=0,box2d.b2Shape.prototype.Clone=function(){return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),null},box2d.b2Shape.prototype.Copy=function(t){return box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_type===t.m_type),this.m_radius=t.m_radius,this},box2d.b2Shape.prototype.GetType=function(){return this.m_type},box2d.b2Shape.prototype.GetChildCount=function(){return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual"),0},box2d.b2Shape.prototype.TestPoint=function(t,e){return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual"),!1},box2d.b2Shape.prototype.RayCast=function(t,e,i,o){return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual"),!1},box2d.b2Shape.prototype.ComputeAABB=function(t,e,i){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual")},box2d.b2Shape.prototype.ComputeMass=function(t,e){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual")},box2d.b2Shape.prototype.SetupDistanceProxy=function(t,e){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual")},box2d.b2Shape.prototype.ComputeSubmergedArea=function(t,e,i,o){return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual"),0},box2d.b2Shape.prototype.Dump=function(){box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1,"pure virtual")},goog.provide("box2d.b2PolygonShape"),goog.require("box2d.b2Shape"),box2d.b2PolygonShape=function(){goog.base(this,box2d.b2ShapeType.e_polygonShape,box2d.b2_polygonRadius),this.m_centroid=new box2d.b2Vec2(0,0),this.m_vertices=box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices),this.m_normals=box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices)},goog.inherits(box2d.b2PolygonShape,box2d.b2Shape),box2d.b2PolygonShape.prototype.m_centroid=null,box2d.b2PolygonShape.prototype.m_vertices=null,box2d.b2PolygonShape.prototype.m_normals=null,box2d.b2PolygonShape.prototype.m_count=0,box2d.b2PolygonShape.prototype.Clone=function(){return(new box2d.b2PolygonShape).Copy(this)},box2d.b2PolygonShape.prototype.Copy=function(t){goog.base(this,"Copy",t),box2d.ENABLE_ASSERTS&&box2d.b2Assert(t instanceof box2d.b2PolygonShape),this.m_centroid.Copy(t.m_centroid),this.m_count=t.m_count;for(var e=0,i=this.m_count;e<i;++e)this.m_vertices[e].Copy(t.m_vertices[e]),this.m_normals[e].Copy(t.m_normals[e]);return this},box2d.b2PolygonShape.prototype.SetAsBox=function(t,e){return this.m_count=4,this.m_vertices[0].SetXY(-t,-e),this.m_vertices[1].SetXY(t,-e),this.m_vertices[2].SetXY(t,e),this.m_vertices[3].SetXY(-t,e),this.m_normals[0].SetXY(0,-1),this.m_normals[1].SetXY(1,0),this.m_normals[2].SetXY(0,1),this.m_normals[3].SetXY(-1,0),this.m_centroid.SetZero(),this},box2d.b2PolygonShape.prototype.SetAsOrientedBox=function(t,e,i,o){this.m_count=4,this.m_vertices[0].SetXY(-t,-e),this.m_vertices[1].SetXY(t,-e),this.m_vertices[2].SetXY(t,e),this.m_vertices[3].SetXY(-t,e),this.m_normals[0].SetXY(0,-1),this.m_normals[1].SetXY(1,0),this.m_normals[2].SetXY(0,1),this.m_normals[3].SetXY(-1,0),this.m_centroid.Copy(i);var s=new box2d.b2Transform;s.SetPosition(i),s.SetRotationAngleRadians(o);for(var n=0,r=this.m_count;n<r;++n)box2d.b2MulXV(s,this.m_vertices[n],this.m_vertices[n]),box2d.b2MulRV(s.q,this.m_normals[n],this.m_normals[n]);return this},box2d.b2PolygonShape.prototype.Set=function(t,e){if(void 0===e&&(e=t.length),box2d.ENABLE_ASSERTS&&box2d.b2Assert(3<=e&&e<=box2d.b2_maxPolygonVertices),e<3)return this.SetAsBox(1,1);for(var i=box2d.b2Min(e,box2d.b2_maxPolygonVertices),o=box2d.b2PolygonShape.prototype.Set.s_ps,s=0,n=0;n<i;++n){for(var r=t[n],a=!0,h=0;h<s;++h)if(box2d.b2DistanceSquaredVV(r,o[h])<.5*box2d.b2_linearSlop){a=!1;break}a&&o[s++].Copy(r)}if((i=s)<3)return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),this.SetAsBox(1,1);for(var l=0,c=o[0].x,n=1;n<i;++n){var u=o[n].x;(c<u||u===c&&o[n].y<o[l].y)&&(l=n,c=u)}for(var d=box2d.b2PolygonShape.prototype.Set.s_hull,p=0,f=l;;){d[p]=f;for(var b,y,m=0,h=1;h<i;++h)(m===f||(b=box2d.b2SubVV(o[m],o[d[p]],box2d.b2PolygonShape.prototype.Set.s_r),r=box2d.b2SubVV(o[h],o[d[p]],box2d.b2PolygonShape.prototype.Set.s_v),(y=box2d.b2CrossVV(b,r))<0&&(m=h),0===y&&r.GetLengthSquared()>b.GetLengthSquared()))&&(m=h);if(++p,(f=m)===l)break}this.m_count=p;for(n=0;n<p;++n)this.m_vertices[n].Copy(o[d[n]]);for(var n=0,x=p;n<x;++n){var g=this.m_vertices[n],v=this.m_vertices[(n+1)%x],v=box2d.b2SubVV(v,g,box2d.b2Vec2.s_t0);box2d.ENABLE_ASSERTS&&box2d.b2Assert(v.GetLengthSquared()>box2d.b2_epsilon_sq),box2d.b2CrossVOne(v,this.m_normals[n]).SelfNormalize()}return box2d.b2PolygonShape.ComputeCentroid(this.m_vertices,p,this.m_centroid),this},box2d.b2PolygonShape.prototype.Set.s_ps=box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices),box2d.b2PolygonShape.prototype.Set.s_hull=box2d.b2MakeNumberArray(box2d.b2_maxPolygonVertices),box2d.b2PolygonShape.prototype.Set.s_r=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.Set.s_v=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.SetAsVector=function(t,e){return this.Set(t,e),this},box2d.b2PolygonShape.prototype.SetAsArray=function(t,e){return this.Set(t,e),this},box2d.b2PolygonShape.prototype.GetChildCount=function(){return 1},box2d.b2PolygonShape.prototype.TestPoint=function(t,e){for(var i=box2d.b2MulTXV(t,e,box2d.b2PolygonShape.prototype.TestPoint.s_pLocal),o=0,s=this.m_count;o<s;++o)if(0<box2d.b2DotVV(this.m_normals[o],box2d.b2SubVV(i,this.m_vertices[o],box2d.b2Vec2.s_t0)))return!1;return!0},box2d.b2PolygonShape.prototype.TestPoint.s_pLocal=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.RayCast=function(t,e,i,o){for(var s=box2d.b2MulTXV(i,e.p1,box2d.b2PolygonShape.prototype.RayCast.s_p1),n=box2d.b2MulTXV(i,e.p2,box2d.b2PolygonShape.prototype.RayCast.s_p2),r=box2d.b2SubVV(n,s,box2d.b2PolygonShape.prototype.RayCast.s_d),a=0,h=e.maxFraction,l=-1,c=0,u=this.m_count;c<u;++c){var d=box2d.b2DotVV(this.m_normals[c],box2d.b2SubVV(this.m_vertices[c],s,box2d.b2Vec2.s_t0)),p=box2d.b2DotVV(this.m_normals[c],r);if(0===p){if(d<0)return!1}else p<0&&d<a*p?(a=d/p,l=c):0<p&&d<h*p&&(h=d/p);if(h<a)return!1}return box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=a&&a<=e.maxFraction),0<=l&&(t.fraction=a,box2d.b2MulRV(i.q,this.m_normals[l],t.normal),!0)},box2d.b2PolygonShape.prototype.RayCast.s_p1=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.RayCast.s_p2=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.RayCast.s_d=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.ComputeAABB=function(t,e,i){for(var o=box2d.b2MulXV(e,this.m_vertices[0],t.lowerBound),s=t.upperBound.Copy(o),n=0,r=this.m_count;n<r;++n){var a=box2d.b2MulXV(e,this.m_vertices[n],box2d.b2PolygonShape.prototype.ComputeAABB.s_v);box2d.b2MinV(a,o,o),box2d.b2MaxV(a,s,s)}t=this.m_radius;o.SelfSubXY(t,t),s.SelfAddXY(t,t)},box2d.b2PolygonShape.prototype.ComputeAABB.s_v=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.ComputeMass=function(t,e){box2d.ENABLE_ASSERTS&&box2d.b2Assert(3<=this.m_count);for(var i=box2d.b2PolygonShape.prototype.ComputeMass.s_center.SetZero(),o=0,s=0,n=box2d.b2PolygonShape.prototype.ComputeMass.s_s.SetZero(),r=0,a=this.m_count;r<a;++r)n.SelfAdd(this.m_vertices[r]);n.SelfMul(1/this.m_count);for(r=0,a=this.m_count;r<a;++r){var h=box2d.b2SubVV(this.m_vertices[r],n,box2d.b2PolygonShape.prototype.ComputeMass.s_e1),l=box2d.b2SubVV(this.m_vertices[(r+1)%a],n,box2d.b2PolygonShape.prototype.ComputeMass.s_e2),c=box2d.b2CrossVV(h,l),u=.5*c,u=(o+=u,i.SelfAdd(box2d.b2MulSV(1/3*u,box2d.b2AddVV(h,l,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t1)),h.x),h=h.y,d=l.x,l=l.y;s+=1/3*.25*c*(u*u+d*u+d*d+(h*h+l*h+l*l))}t.mass=e*o,box2d.ENABLE_ASSERTS&&box2d.b2Assert(o>box2d.b2_epsilon),i.SelfMul(1/o),box2d.b2AddVV(i,n,t.center),t.I=e*s,t.I+=t.mass*(box2d.b2DotVV(t.center,t.center)-box2d.b2DotVV(i,i))},box2d.b2PolygonShape.prototype.ComputeMass.s_center=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.ComputeMass.s_s=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.ComputeMass.s_e1=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.ComputeMass.s_e2=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.Validate=function(){for(var t=0;t<this.m_count;++t)for(var e=t,i=(t+1)%this.m_count,o=this.m_vertices[e],s=box2d.b2SubVV(this.m_vertices[i],o,box2d.b2PolygonShape.prototype.Validate.s_e),n=0;n<this.m_count;++n)if(n!==e&&n!==i){var r=box2d.b2SubVV(this.m_vertices[n],o,box2d.b2PolygonShape.prototype.Validate.s_v);if(box2d.b2CrossVV(s,r)<0)return!1}return!0},box2d.b2PolygonShape.prototype.Validate.s_e=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.Validate.s_v=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.SetupDistanceProxy=function(t,e){t.m_vertices=this.m_vertices,t.m_count=this.m_count,t.m_radius=this.m_radius},box2d.b2PolygonShape.prototype.ComputeSubmergedArea=function(t,e,i,o){for(var s,n=box2d.b2MulTRV(i.q,t,box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_normalL),r=e-box2d.b2DotVV(t,i.p),a=box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_depths,h=0,l=-1,c=-1,u=!1,d=0,p=this.m_count;d<p;++d){a[d]=box2d.b2DotVV(n,this.m_vertices[d])-r;var f=a[d]<-box2d.b2_epsilon;0<d&&(f?u||(l=d-1,h++):u&&(c=d-1,h++)),u=f}switch(h){case 0:return u?(s=box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_md,this.ComputeMass(s,1),box2d.b2MulXV(i,s.center,o),s.mass):0;case 1:-1===l?l=this.m_count-1:c=this.m_count-1}for(var e=(l+1)%this.m_count,b=(c+1)%this.m_count,t=(0-a[l])/(a[e]-a[l]),y=(0-a[c])/(a[b]-a[c]),m=box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_intoVec.SetXY(this.m_vertices[l].x*(1-t)+this.m_vertices[e].x*t,this.m_vertices[l].y*(1-t)+this.m_vertices[e].y*t),x=box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_outoVec.SetXY(this.m_vertices[c].x*(1-y)+this.m_vertices[b].x*y,this.m_vertices[c].y*(1-y)+this.m_vertices[b].y*y),g=0,v=box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_center.SetZero(),_=this.m_vertices[e],d=e;d!==b;){var w=(d=(d+1)%this.m_count)===b?x:this.m_vertices[d],S=.5*((_.x-m.x)*(w.y-m.y)-(_.y-m.y)*(w.x-m.x));g+=S,v.x+=S*(m.x+_.x+w.x)/3,v.y+=S*(m.y+_.y+w.y)/3,_=w}return v.SelfMul(1/g),box2d.b2MulXV(i,v,o),g},box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_normalL=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_depths=box2d.b2MakeNumberArray(box2d.b2_maxPolygonVertices),box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_md=new box2d.b2MassData,box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_intoVec=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_outoVec=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_center=new box2d.b2Vec2,box2d.b2PolygonShape.prototype.Dump=function(){box2d.b2Log("    /*box2d.b2PolygonShape*/ var shape = new box2d.b2PolygonShape();\n"),box2d.b2Log("    /*box2d.b2Vec2[]*/ var vs = box2d.b2Vec2.MakeArray(%d);\n",box2d.b2_maxPolygonVertices);for(var t=0;t<this.m_count;++t)box2d.b2Log("    vs[%d].SetXY(%.15f, %.15f);\n",t,this.m_vertices[t].x,this.m_vertices[t].y);box2d.b2Log("    shape.Set(vs, %d);\n",this.m_count)},box2d.b2PolygonShape.ComputeCentroid=function(t,e,i){box2d.ENABLE_ASSERTS&&box2d.b2Assert(3<=e);var o=i;o.SetZero();for(var s=0,n=box2d.b2PolygonShape.ComputeCentroid.s_pRef.SetZero(),r=0;r<e;++r){var a=n,h=t[r],l=t[(r+1)%e],c=box2d.b2SubVV(h,a,box2d.b2PolygonShape.ComputeCentroid.s_e1),u=box2d.b2SubVV(l,a,box2d.b2PolygonShape.ComputeCentroid.s_e2),c=.5*box2d.b2CrossVV(c,u);s+=c,o.x+=1/3*c*(a.x+h.x+l.x),o.y+=1/3*c*(a.y+h.y+l.y)}return box2d.ENABLE_ASSERTS&&box2d.b2Assert(s>box2d.b2_epsilon),o.SelfMul(1/s),o},box2d.b2PolygonShape.ComputeCentroid.s_pRef=new box2d.b2Vec2,box2d.b2PolygonShape.ComputeCentroid.s_e1=new box2d.b2Vec2,box2d.b2PolygonShape.ComputeCentroid.s_e2=new box2d.b2Vec2,goog.provide("box2d.b2CollideEdge"),goog.require("box2d.b2Collision"),box2d.b2CollideEdgeAndCircle=function(t,e,i,o,s){t.pointCount=0;var i=box2d.b2MulTXV(i,box2d.b2MulXV(s,o.m_p,box2d.b2Vec2.s_t0),box2d.b2CollideEdgeAndCircle.s_Q),s=e.m_vertex1,n=e.m_vertex2,r=box2d.b2SubVV(n,s,box2d.b2CollideEdgeAndCircle.s_e),a=box2d.b2DotVV(r,box2d.b2SubVV(n,i,box2d.b2Vec2.s_t0)),h=box2d.b2DotVV(r,box2d.b2SubVV(i,s,box2d.b2Vec2.s_t0)),l=e.m_radius+o.m_radius,c=box2d.b2CollideEdgeAndCircle.s_id;if(c.cf.indexB=0,c.cf.typeB=box2d.b2ContactFeatureType.e_vertex,h<=0){var u=s,d=box2d.b2SubVV(i,u,box2d.b2CollideEdgeAndCircle.s_d);if(!(l*l<box2d.b2DotVV(d,d))){if(e.m_hasVertex0){var p=e.m_vertex0,f=s,p=box2d.b2SubVV(f,p,box2d.b2CollideEdgeAndCircle.s_e1);if(0<box2d.b2DotVV(p,box2d.b2SubVV(f,i,box2d.b2Vec2.s_t0)))return}c.cf.indexA=0,c.cf.typeA=box2d.b2ContactFeatureType.e_vertex,t.pointCount=1,t.type=box2d.b2ManifoldType.e_circles,t.localNormal.SetZero(),t.localPoint.Copy(u),t.points[0].id.Copy(c),t.points[0].localPoint.Copy(o.m_p)}}else if(a<=0){u=n,d=box2d.b2SubVV(i,u,box2d.b2CollideEdgeAndCircle.s_d);if(!(l*l<box2d.b2DotVV(d,d))){if(e.m_hasVertex3){p=e.m_vertex3,f=n,e=box2d.b2SubVV(p,f,box2d.b2CollideEdgeAndCircle.s_e2);if(0<box2d.b2DotVV(e,box2d.b2SubVV(i,f,box2d.b2Vec2.s_t0)))return}c.cf.indexA=1,c.cf.typeA=box2d.b2ContactFeatureType.e_vertex,t.pointCount=1,t.type=box2d.b2ManifoldType.e_circles,t.localNormal.SetZero(),t.localPoint.Copy(u),t.points[0].id.Copy(c),t.points[0].localPoint.Copy(o.m_p)}}else{p=box2d.b2DotVV(r,r);box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<p);(u=box2d.b2CollideEdgeAndCircle.s_P).x=1/p*(a*s.x+h*n.x),u.y=1/p*(a*s.y+h*n.y);d=box2d.b2SubVV(i,u,box2d.b2CollideEdgeAndCircle.s_d);l*l<box2d.b2DotVV(d,d)||(e=box2d.b2CollideEdgeAndCircle.s_n.SetXY(-r.y,r.x),box2d.b2DotVV(e,box2d.b2SubVV(i,s,box2d.b2Vec2.s_t0))<0&&e.SetXY(-e.x,-e.y),e.Normalize(),c.cf.indexA=0,c.cf.typeA=box2d.b2ContactFeatureType.e_face,t.pointCount=1,t.type=box2d.b2ManifoldType.e_faceA,t.localNormal.Copy(e),t.localPoint.Copy(s),t.points[0].id.Copy(c),t.points[0].localPoint.Copy(o.m_p))}},box2d.b2CollideEdgeAndCircle.s_Q=new box2d.b2Vec2,box2d.b2CollideEdgeAndCircle.s_e=new box2d.b2Vec2,box2d.b2CollideEdgeAndCircle.s_d=new box2d.b2Vec2,box2d.b2CollideEdgeAndCircle.s_e1=new box2d.b2Vec2,box2d.b2CollideEdgeAndCircle.s_e2=new box2d.b2Vec2,box2d.b2CollideEdgeAndCircle.s_P=new box2d.b2Vec2,box2d.b2CollideEdgeAndCircle.s_n=new box2d.b2Vec2,box2d.b2CollideEdgeAndCircle.s_id=new box2d.b2ContactID,box2d.b2EPAxisType={e_unknown:0,e_edgeA:1,e_edgeB:2},goog.exportProperty(box2d.b2EPAxisType,"e_unknown",box2d.b2EPAxisType.e_unknown),goog.exportProperty(box2d.b2EPAxisType,"e_edgeA",box2d.b2EPAxisType.e_edgeA),goog.exportProperty(box2d.b2EPAxisType,"e_edgeB",box2d.b2EPAxisType.e_edgeB),box2d.b2EPAxis=function(){},box2d.b2EPAxis.prototype.type=box2d.b2EPAxisType.e_unknown,box2d.b2EPAxis.prototype.index=0,box2d.b2EPAxis.prototype.separation=0,box2d.b2TempPolygon=function(){this.vertices=box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices),this.normals=box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices),this.count=0},box2d.b2TempPolygon.prototype.vertices=null,box2d.b2TempPolygon.prototype.normals=null,box2d.b2TempPolygon.prototype.count=0,box2d.b2ReferenceFace=function(){this.i1=0,this.i2=0,this.v1=new box2d.b2Vec2,this.v2=new box2d.b2Vec2,this.normal=new box2d.b2Vec2,this.sideNormal1=new box2d.b2Vec2,this.sideOffset1=0,this.sideNormal2=new box2d.b2Vec2,this.sideOffset2=0},box2d.b2ReferenceFace.prototype.i1=0,box2d.b2ReferenceFace.prototype.i2=0,box2d.b2ReferenceFace.prototype.v1=null,box2d.b2ReferenceFace.prototype.v2=null,box2d.b2ReferenceFace.prototype.normal=null,box2d.b2ReferenceFace.prototype.sideNormal1=null,box2d.b2ReferenceFace.prototype.sideOffset1=0,box2d.b2ReferenceFace.prototype.sideNormal2=null,box2d.b2ReferenceFace.prototype.sideOffset2=0,box2d.b2EPColliderVertexType={e_isolated:0,e_concave:1,e_convex:2},goog.exportProperty(box2d.b2EPColliderVertexType,"e_isolated",box2d.b2EPColliderVertexType.e_isolated),goog.exportProperty(box2d.b2EPColliderVertexType,"e_concave",box2d.b2EPColliderVertexType.e_concave),goog.exportProperty(box2d.b2EPColliderVertexType,"e_convex",box2d.b2EPColliderVertexType.e_convex),box2d.b2EPCollider=function(){this.m_polygonB=new box2d.b2TempPolygon,this.m_xf=new box2d.b2Transform,this.m_centroidB=new box2d.b2Vec2,this.m_v0=new box2d.b2Vec2,this.m_v1=new box2d.b2Vec2,this.m_v2=new box2d.b2Vec2,this.m_v3=new box2d.b2Vec2,this.m_normal0=new box2d.b2Vec2,this.m_normal1=new box2d.b2Vec2,this.m_normal2=new box2d.b2Vec2,this.m_normal=new box2d.b2Vec2,this.m_type1=box2d.b2EPColliderVertexType.e_isolated,this.m_type2=box2d.b2EPColliderVertexType.e_isolated,this.m_lowerLimit=new box2d.b2Vec2,this.m_upperLimit=new box2d.b2Vec2,this.m_radius=0,this.m_front=!1},box2d.b2EPCollider.prototype.m_polygonB=null,box2d.b2EPCollider.prototype.m_xf=null,box2d.b2EPCollider.prototype.m_centroidB=null,box2d.b2EPCollider.prototype.m_v0=null,box2d.b2EPCollider.prototype.m_v1=null,box2d.b2EPCollider.prototype.m_v2=null,box2d.b2EPCollider.prototype.m_v3=null,box2d.b2EPCollider.prototype.m_normal0=null,box2d.b2EPCollider.prototype.m_normal1=null,box2d.b2EPCollider.prototype.m_normal2=null,box2d.b2EPCollider.prototype.m_normal=null,box2d.b2EPCollider.prototype.m_type1=box2d.b2EPColliderVertexType.e_isolated,box2d.b2EPCollider.prototype.m_type2=box2d.b2EPColliderVertexType.e_isolated,box2d.b2EPCollider.prototype.m_lowerLimit=null,box2d.b2EPCollider.prototype.m_upperLimit=null,box2d.b2EPCollider.prototype.m_radius=0,box2d.b2EPCollider.prototype.m_front=!1,box2d.b2EPCollider.prototype.Collide=function(t,e,i,o,s){box2d.b2MulTXX(i,s,this.m_xf),box2d.b2MulXV(this.m_xf,o.m_centroid,this.m_centroidB),this.m_v0.Copy(e.m_vertex0),this.m_v1.Copy(e.m_vertex1),this.m_v2.Copy(e.m_vertex2),this.m_v3.Copy(e.m_vertex3);var i=e.m_hasVertex0,s=e.m_hasVertex3,e=box2d.b2SubVV(this.m_v2,this.m_v1,box2d.b2EPCollider.s_edge1),n=(e.Normalize(),this.m_normal1.SetXY(e.y,-e.x),box2d.b2DotVV(this.m_normal1,box2d.b2SubVV(this.m_centroidB,this.m_v1,box2d.b2Vec2.s_t0))),r=0,a=0,h=!1,l=!1;i&&((d=box2d.b2SubVV(this.m_v1,this.m_v0,box2d.b2EPCollider.s_edge0)).Normalize(),this.m_normal0.SetXY(d.y,-d.x),h=0<=box2d.b2CrossVV(d,e),r=box2d.b2DotVV(this.m_normal0,box2d.b2SubVV(this.m_centroidB,this.m_v0,box2d.b2Vec2.s_t0))),s&&((d=box2d.b2SubVV(this.m_v3,this.m_v2,box2d.b2EPCollider.s_edge2)).Normalize(),this.m_normal2.SetXY(d.y,-d.x),l=0<box2d.b2CrossVV(e,d),a=box2d.b2DotVV(this.m_normal2,box2d.b2SubVV(this.m_centroidB,this.m_v2,box2d.b2Vec2.s_t0))),i&&s?h&&l?(this.m_front=0<=r||0<=n||0<=a,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg())):h?(this.m_front=0<=r||0<=n&&0<=a,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg())):l?(this.m_front=0<=a||0<=r&&0<=n,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal0).SelfNeg())):(this.m_front=0<=r&&0<=n&&0<=a,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),this.m_upperLimit.Copy(this.m_normal0).SelfNeg())):i?(h?(this.m_front=0<=r||0<=n,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1)),this.m_upperLimit.Copy(this.m_normal1)):(this.m_front=0<=r&&0<=n,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal0)))).SelfNeg():s?l?(this.m_front=0<=n||0<=a,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1))):(this.m_front=0<=n&&0<=a,(this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2))).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1)):(this.m_front=0<=n,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1))),this.m_polygonB.count=o.m_count;for(var c=0,u=o.m_count;c<u;++c)box2d.b2MulXV(this.m_xf,o.m_vertices[c],this.m_polygonB.vertices[c]),box2d.b2MulRV(this.m_xf.q,o.m_normals[c],this.m_polygonB.normals[c]);this.m_radius=2*box2d.b2_polygonRadius,t.pointCount=0;e=this.ComputeEdgeSeparation(box2d.b2EPCollider.s_edgeAxis);if(e.type!==box2d.b2EPAxisType.e_unknown&&!(e.separation>this.m_radius)){var d=this.ComputePolygonSeparation(box2d.b2EPCollider.s_polygonAxis);if(!(d.type!==box2d.b2EPAxisType.e_unknown&&d.separation>this.m_radius)){var p=d.type!==box2d.b2EPAxisType.e_unknown&&d.separation>.98*e.separation+.001?d:e,i=box2d.b2EPCollider.s_ie,f=box2d.b2EPCollider.s_rf;if(p.type===box2d.b2EPAxisType.e_edgeA){t.type=box2d.b2ManifoldType.e_faceA;for(var b=0,y=box2d.b2DotVV(this.m_normal,this.m_polygonB.normals[0]),c=1,u=this.m_polygonB.count;c<u;++c){var m=box2d.b2DotVV(this.m_normal,this.m_polygonB.normals[c]);m<y&&(y=m,b=c)}var x,g,h=b,r=(h+1)%this.m_polygonB.count;(x=i[0]).v.Copy(this.m_polygonB.vertices[h]),x.id.cf.indexA=0,x.id.cf.indexB=h,x.id.cf.typeA=box2d.b2ContactFeatureType.e_face,x.id.cf.typeB=box2d.b2ContactFeatureType.e_vertex,(g=i[1]).v.Copy(this.m_polygonB.vertices[r]),g.id.cf.indexA=0,g.id.cf.indexB=r,g.id.cf.typeA=box2d.b2ContactFeatureType.e_face,g.id.cf.typeB=box2d.b2ContactFeatureType.e_vertex,this.m_front?(f.i1=0,f.i2=1,f.v1.Copy(this.m_v1),f.v2.Copy(this.m_v2),f.normal.Copy(this.m_normal1)):(f.i1=1,f.i2=0,f.v1.Copy(this.m_v2),f.v2.Copy(this.m_v1),f.normal.Copy(this.m_normal1).SelfNeg())}else t.type=box2d.b2ManifoldType.e_faceB,(x=i[0]).v.Copy(this.m_v1),x.id.cf.indexA=0,x.id.cf.indexB=p.index,x.id.cf.typeA=box2d.b2ContactFeatureType.e_vertex,x.id.cf.typeB=box2d.b2ContactFeatureType.e_face,(g=i[1]).v.Copy(this.m_v2),g.id.cf.indexA=0,g.id.cf.indexB=p.index,g.id.cf.typeA=box2d.b2ContactFeatureType.e_vertex,g.id.cf.typeB=box2d.b2ContactFeatureType.e_face,f.i1=p.index,f.i2=(f.i1+1)%this.m_polygonB.count,f.v1.Copy(this.m_polygonB.vertices[f.i1]),f.v2.Copy(this.m_polygonB.vertices[f.i2]),f.normal.Copy(this.m_polygonB.normals[f.i1]);f.sideNormal1.SetXY(f.normal.y,-f.normal.x),f.sideNormal2.Copy(f.sideNormal1).SelfNeg(),f.sideOffset1=box2d.b2DotVV(f.sideNormal1,f.v1),f.sideOffset2=box2d.b2DotVV(f.sideNormal2,f.v2);var s=box2d.b2EPCollider.s_clipPoints1,v=box2d.b2EPCollider.s_clipPoints2;if(!(box2d.b2ClipSegmentToLine(s,i,f.sideNormal1,f.sideOffset1,f.i1)<box2d.b2_maxManifoldPoints||box2d.b2ClipSegmentToLine(v,s,f.sideNormal2,f.sideOffset2,f.i2)<box2d.b2_maxManifoldPoints)){p.type===box2d.b2EPAxisType.e_edgeA?(t.localNormal.Copy(f.normal),t.localPoint.Copy(f.v1)):(t.localNormal.Copy(o.m_normals[f.i1]),t.localPoint.Copy(o.m_vertices[f.i1]));for(var _,w=0,c=0,u=box2d.b2_maxManifoldPoints;c<u;++c)box2d.b2DotVV(f.normal,box2d.b2SubVV(v[c].v,f.v1,box2d.b2Vec2.s_t0))<=this.m_radius&&(_=t.points[w],p.type===box2d.b2EPAxisType.e_edgeA?(box2d.b2MulTXV(this.m_xf,v[c].v,_.localPoint),_.id=v[c].id):(_.localPoint.Copy(v[c].v),_.id.cf.typeA=v[c].id.cf.typeB,_.id.cf.typeB=v[c].id.cf.typeA,_.id.cf.indexA=v[c].id.cf.indexB,_.id.cf.indexB=v[c].id.cf.indexA),++w);t.pointCount=w}}}},box2d.b2EPCollider.s_edge1=new box2d.b2Vec2,box2d.b2EPCollider.s_edge0=new box2d.b2Vec2,box2d.b2EPCollider.s_edge2=new box2d.b2Vec2,box2d.b2EPCollider.s_ie=box2d.b2ClipVertex.MakeArray(2),box2d.b2EPCollider.s_rf=new box2d.b2ReferenceFace,box2d.b2EPCollider.s_clipPoints1=box2d.b2ClipVertex.MakeArray(2),box2d.b2EPCollider.s_clipPoints2=box2d.b2ClipVertex.MakeArray(2),box2d.b2EPCollider.s_edgeAxis=new box2d.b2EPAxis,box2d.b2EPCollider.s_polygonAxis=new box2d.b2EPAxis,box2d.b2EPCollider.prototype.ComputeEdgeSeparation=function(t){var e=t;e.type=box2d.b2EPAxisType.e_edgeA,e.index=this.m_front?0:1,e.separation=box2d.b2_maxFloat;for(var i=0,o=this.m_polygonB.count;i<o;++i){var s=box2d.b2DotVV(this.m_normal,box2d.b2SubVV(this.m_polygonB.vertices[i],this.m_v1,box2d.b2Vec2.s_t0));s<e.separation&&(e.separation=s)}return e},box2d.b2EPCollider.prototype.ComputePolygonSeparation=function(t){var e=t;e.type=box2d.b2EPAxisType.e_unknown,e.index=-1,e.separation=-box2d.b2_maxFloat;for(var i=box2d.b2EPCollider.s_perp.SetXY(-this.m_normal.y,this.m_normal.x),o=0,s=this.m_polygonB.count;o<s;++o){var n=box2d.b2NegV(this.m_polygonB.normals[o],box2d.b2EPCollider.s_n),r=box2d.b2DotVV(n,box2d.b2SubVV(this.m_polygonB.vertices[o],this.m_v1,box2d.b2Vec2.s_t0)),a=box2d.b2DotVV(n,box2d.b2SubVV(this.m_polygonB.vertices[o],this.m_v2,box2d.b2Vec2.s_t0)),r=box2d.b2Min(r,a);if(r>this.m_radius)return e.type=box2d.b2EPAxisType.e_edgeB,e.index=o,e.separation=r,e;if(0<=box2d.b2DotVV(n,i)){if(box2d.b2DotVV(box2d.b2SubVV(n,this.m_upperLimit,box2d.b2Vec2.s_t0),this.m_normal)<-box2d.b2_angularSlop)continue}else if(box2d.b2DotVV(box2d.b2SubVV(n,this.m_lowerLimit,box2d.b2Vec2.s_t0),this.m_normal)<-box2d.b2_angularSlop)continue;r>e.separation&&(e.type=box2d.b2EPAxisType.e_edgeB,e.index=o,e.separation=r)}return e},box2d.b2EPCollider.s_n=new box2d.b2Vec2,box2d.b2EPCollider.s_perp=new box2d.b2Vec2,box2d.b2CollideEdgeAndPolygon=function(t,e,i,o,s){box2d.b2CollideEdgeAndPolygon.s_collider.Collide(t,e,i,o,s)},box2d.b2CollideEdgeAndPolygon.s_collider=new box2d.b2EPCollider,goog.provide("box2d.b2EdgeShape"),goog.require("box2d.b2Shape"),box2d.b2EdgeShape=function(){goog.base(this,box2d.b2ShapeType.e_edgeShape,box2d.b2_polygonRadius),this.m_vertex1=new box2d.b2Vec2,this.m_vertex2=new box2d.b2Vec2,this.m_vertex0=new box2d.b2Vec2,this.m_vertex3=new box2d.b2Vec2},goog.inherits(box2d.b2EdgeShape,box2d.b2Shape),box2d.b2EdgeShape.prototype.m_vertex1=null,box2d.b2EdgeShape.prototype.m_vertex2=null,box2d.b2EdgeShape.prototype.m_vertex0=null,box2d.b2EdgeShape.prototype.m_vertex3=null,box2d.b2EdgeShape.prototype.m_hasVertex0=!1,box2d.b2EdgeShape.prototype.m_hasVertex3=!1,box2d.b2EdgeShape.prototype.Set=function(t,e){return this.m_vertex1.Copy(t),this.m_vertex2.Copy(e),this.m_hasVertex0=!1,this.m_hasVertex3=!1,this},box2d.b2EdgeShape.prototype.SetAsEdge=box2d.b2EdgeShape.prototype.Set,box2d.b2EdgeShape.prototype.Clone=function(){return(new box2d.b2EdgeShape).Copy(this)},box2d.b2EdgeShape.prototype.Copy=function(t){return goog.base(this,"Copy",t),box2d.ENABLE_ASSERTS&&box2d.b2Assert(t instanceof box2d.b2EdgeShape),this.m_vertex1.Copy(t.m_vertex1),this.m_vertex2.Copy(t.m_vertex2),this.m_vertex0.Copy(t.m_vertex0),this.m_vertex3.Copy(t.m_vertex3),this.m_hasVertex0=t.m_hasVertex0,this.m_hasVertex3=t.m_hasVertex3,this},box2d.b2EdgeShape.prototype.GetChildCount=function(){return 1},box2d.b2EdgeShape.prototype.TestPoint=function(t,e){return!1},box2d.b2EdgeShape.prototype.RayCast=function(t,e,i,o){var s=box2d.b2MulTXV(i,e.p1,box2d.b2EdgeShape.prototype.RayCast.s_p1),n=box2d.b2MulTXV(i,e.p2,box2d.b2EdgeShape.prototype.RayCast.s_p2),n=box2d.b2SubVV(n,s,box2d.b2EdgeShape.prototype.RayCast.s_d),r=this.m_vertex1,a=this.m_vertex2,h=box2d.b2SubVV(a,r,box2d.b2EdgeShape.prototype.RayCast.s_e),h=t.normal.SetXY(h.y,-h.x).SelfNormalize(),l=box2d.b2DotVV(h,box2d.b2SubVV(r,s,box2d.b2Vec2.s_t0)),h=box2d.b2DotVV(h,n);return 0!==h&&!((h=l/h)<0||e.maxFraction<h||(e=box2d.b2AddVMulSV(s,h,n,box2d.b2EdgeShape.prototype.RayCast.s_q),s=box2d.b2SubVV(a,r,box2d.b2EdgeShape.prototype.RayCast.s_r),0===(n=box2d.b2DotVV(s,s)))||(a=box2d.b2DotVV(box2d.b2SubVV(e,r,box2d.b2Vec2.s_t0),s)/n)<0||1<a||(t.fraction=h,box2d.b2MulRV(i.q,t.normal,t.normal),0<l&&t.normal.SelfNeg(),0))},box2d.b2EdgeShape.prototype.RayCast.s_p1=new box2d.b2Vec2,box2d.b2EdgeShape.prototype.RayCast.s_p2=new box2d.b2Vec2,box2d.b2EdgeShape.prototype.RayCast.s_d=new box2d.b2Vec2,box2d.b2EdgeShape.prototype.RayCast.s_e=new box2d.b2Vec2,box2d.b2EdgeShape.prototype.RayCast.s_q=new box2d.b2Vec2,box2d.b2EdgeShape.prototype.RayCast.s_r=new box2d.b2Vec2,box2d.b2EdgeShape.prototype.ComputeAABB=function(t,e,i){var o=box2d.b2MulXV(e,this.m_vertex1,box2d.b2EdgeShape.prototype.ComputeAABB.s_v1),e=box2d.b2MulXV(e,this.m_vertex2,box2d.b2EdgeShape.prototype.ComputeAABB.s_v2),o=(box2d.b2MinV(o,e,t.lowerBound),box2d.b2MaxV(o,e,t.upperBound),this.m_radius);t.lowerBound.SelfSubXY(o,o),t.upperBound.SelfAddXY(o,o)},box2d.b2EdgeShape.prototype.ComputeAABB.s_v1=new box2d.b2Vec2,box2d.b2EdgeShape.prototype.ComputeAABB.s_v2=new box2d.b2Vec2,box2d.b2EdgeShape.prototype.ComputeMass=function(t,e){t.mass=0,box2d.b2MidVV(this.m_vertex1,this.m_vertex2,t.center),t.I=0},box2d.b2EdgeShape.prototype.SetupDistanceProxy=function(t,e){t.m_vertices=new Array(2),t.m_vertices[0]=this.m_vertex1,t.m_vertices[1]=this.m_vertex2,t.m_count=2,t.m_radius=this.m_radius},box2d.b2EdgeShape.prototype.ComputeSubmergedArea=function(t,e,i,o){return o.SetZero(),0},box2d.b2EdgeShape.prototype.Dump=function(){box2d.b2Log("    /*box2d.b2EdgeShape*/ var shape = new box2d.b2EdgeShape();\n"),box2d.b2Log("    shape.m_radius = %.15f;\n",this.m_radius),box2d.b2Log("    shape.m_vertex0.SetXY(%.15f, %.15f);\n",this.m_vertex0.x,this.m_vertex0.y),box2d.b2Log("    shape.m_vertex1.SetXY(%.15f, %.15f);\n",this.m_vertex1.x,this.m_vertex1.y),box2d.b2Log("    shape.m_vertex2.SetXY(%.15f, %.15f);\n",this.m_vertex2.x,this.m_vertex2.y),box2d.b2Log("    shape.m_vertex3.SetXY(%.15f, %.15f);\n",this.m_vertex3.x,this.m_vertex3.y),box2d.b2Log("    shape.m_hasVertex0 = %s;\n",this.m_hasVertex0),box2d.b2Log("    shape.m_hasVertex3 = %s;\n",this.m_hasVertex3)},goog.provide("box2d.b2ChainShape"),goog.require("box2d.b2Shape"),goog.require("box2d.b2EdgeShape"),box2d.b2ChainShape=function(){goog.base(this,box2d.b2ShapeType.e_chainShape,box2d.b2_polygonRadius),this.m_prevVertex=new box2d.b2Vec2,this.m_nextVertex=new box2d.b2Vec2},goog.inherits(box2d.b2ChainShape,box2d.b2Shape),box2d.b2ChainShape.prototype.m_vertices=null,box2d.b2ChainShape.prototype.m_count=0,box2d.b2ChainShape.prototype.m_prevVertex=null,box2d.b2ChainShape.prototype.m_nextVertex=null,box2d.b2ChainShape.prototype.m_hasPrevVertex=!1,box2d.b2ChainShape.prototype.m_hasNextVertex=!1,box2d.b2ChainShape.prototype.CreateLoop=function(t,e){if(e=e||t.length,box2d.ENABLE_ASSERTS&&box2d.b2Assert(null===this.m_vertices&&0===this.m_count),box2d.ENABLE_ASSERTS&&box2d.b2Assert(3<=e),box2d.ENABLE_ASSERTS)for(var i=1;i<e;++i){var o=t[i-1],s=t[i];box2d.b2Assert(box2d.b2DistanceSquaredVV(o,s)>box2d.b2_linearSlop*box2d.b2_linearSlop)}this.m_count=e+1,this.m_vertices=box2d.b2Vec2.MakeArray(this.m_count);for(i=0;i<e;++i)this.m_vertices[i].Copy(t[i]);return this.m_vertices[e].Copy(this.m_vertices[0]),this.m_prevVertex.Copy(this.m_vertices[this.m_count-2]),this.m_nextVertex.Copy(this.m_vertices[1]),this.m_hasPrevVertex=!0,this.m_hasNextVertex=!0,this},box2d.b2ChainShape.prototype.CreateChain=function(t,e){if(e=e||t.length,box2d.ENABLE_ASSERTS&&box2d.b2Assert(null===this.m_vertices&&0===this.m_count),box2d.ENABLE_ASSERTS&&box2d.b2Assert(2<=e),box2d.ENABLE_ASSERTS)for(var i=1;i<e;++i){var o=t[i-1],s=t[i];box2d.b2Assert(box2d.b2DistanceSquaredVV(o,s)>box2d.b2_linearSlop*box2d.b2_linearSlop)}this.m_count=e,this.m_vertices=box2d.b2Vec2.MakeArray(e);for(i=0;i<e;++i)this.m_vertices[i].Copy(t[i]);return this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1,this.m_prevVertex.SetZero(),this.m_nextVertex.SetZero(),this},box2d.b2ChainShape.prototype.SetPrevVertex=function(t){return this.m_prevVertex.Copy(t),this.m_hasPrevVertex=!0,this},box2d.b2ChainShape.prototype.SetNextVertex=function(t){return this.m_nextVertex.Copy(t),this.m_hasNextVertex=!0,this},box2d.b2ChainShape.prototype.Clone=function(){return(new box2d.b2ChainShape).Copy(this)},box2d.b2ChainShape.prototype.Copy=function(t){return goog.base(this,"Copy",t),box2d.ENABLE_ASSERTS&&box2d.b2Assert(t instanceof box2d.b2ChainShape),this.CreateChain(t.m_vertices,t.m_count),this.m_prevVertex.Copy(t.m_prevVertex),this.m_nextVertex.Copy(t.m_nextVertex),this.m_hasPrevVertex=t.m_hasPrevVertex,this.m_hasNextVertex=t.m_hasNextVertex,this},box2d.b2ChainShape.prototype.GetChildCount=function(){return this.m_count-1},box2d.b2ChainShape.prototype.GetChildEdge=function(t,e){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=e&&e<this.m_count-1),t.m_type=box2d.b2ShapeType.e_edgeShape,t.m_radius=this.m_radius,t.m_vertex1.Copy(this.m_vertices[e]),t.m_vertex2.Copy(this.m_vertices[e+1]),0<e?(t.m_vertex0.Copy(this.m_vertices[e-1]),t.m_hasVertex0=!0):(t.m_vertex0.Copy(this.m_prevVertex),t.m_hasVertex0=this.m_hasPrevVertex),e<this.m_count-2?(t.m_vertex3.Copy(this.m_vertices[e+2]),t.m_hasVertex3=!0):(t.m_vertex3.Copy(this.m_nextVertex),t.m_hasVertex3=this.m_hasNextVertex)},box2d.b2ChainShape.prototype.TestPoint=function(t,e){return!1},box2d.b2ChainShape.prototype.RayCast=function(t,e,i,o){box2d.ENABLE_ASSERTS&&box2d.b2Assert(o<this.m_count);var s=box2d.b2ChainShape.s_edgeShape;return s.m_vertex1.Copy(this.m_vertices[o]),s.m_vertex2.Copy(this.m_vertices[(o+1)%this.m_count]),s.RayCast(t,e,i,0)},box2d.b2ChainShape.s_edgeShape=new box2d.b2EdgeShape,box2d.b2ChainShape.prototype.ComputeAABB=function(t,e,i){box2d.ENABLE_ASSERTS&&box2d.b2Assert(i<this.m_count);var o=this.m_vertices[i],i=this.m_vertices[(i+1)%this.m_count],o=box2d.b2MulXV(e,o,box2d.b2ChainShape.prototype.ComputeAABB.s_v1),e=box2d.b2MulXV(e,i,box2d.b2ChainShape.prototype.ComputeAABB.s_v2);box2d.b2MinV(o,e,t.lowerBound),box2d.b2MaxV(o,e,t.upperBound)},box2d.b2ChainShape.prototype.ComputeAABB.s_v1=new box2d.b2Vec2,box2d.b2ChainShape.prototype.ComputeAABB.s_v2=new box2d.b2Vec2,box2d.b2ChainShape.prototype.ComputeMass=function(t,e){t.mass=0,t.center.SetZero(),t.I=0},box2d.b2ChainShape.prototype.SetupDistanceProxy=function(t,e){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=e&&e<this.m_count),t.m_buffer[0].Copy(this.m_vertices[e]),e+1<this.m_count?t.m_buffer[1].Copy(this.m_vertices[e+1]):t.m_buffer[1].Copy(this.m_vertices[0]),t.m_vertices=t.m_buffer,t.m_count=2,t.m_radius=this.m_radius},box2d.b2ChainShape.prototype.ComputeSubmergedArea=function(t,e,i,o){return o.SetZero(),0},box2d.b2ChainShape.prototype.Dump=function(){box2d.b2Log("    /*box2d.b2ChainShape*/ var shape = new box2d.b2ChainShape();\n"),box2d.b2Log("    /*box2d.b2Vec2[]*/ var vs = box2d.b2Vec2.MakeArray(%d);\n",box2d.b2_maxPolygonVertices);for(var t=0;t<this.m_count;++t)box2d.b2Log("    vs[%d].SetXY(%.15f, %.15f);\n",t,this.m_vertices[t].x,this.m_vertices[t].y);box2d.b2Log("    shape.CreateChain(vs, %d);\n",this.m_count),box2d.b2Log("    shape.m_prevVertex.SetXY(%.15f, %.15f);\n",this.m_prevVertex.x,this.m_prevVertex.y),box2d.b2Log("    shape.m_nextVertex.SetXY(%.15f, %.15f);\n",this.m_nextVertex.x,this.m_nextVertex.y),box2d.b2Log("    shape.m_hasPrevVertex = %s;\n",this.m_hasPrevVertex?"true":"false"),box2d.b2Log("    shape.m_hasNextVertex = %s;\n",this.m_hasNextVertex?"true":"false")},goog.provide("box2d.b2ChainAndPolygonContact"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Contact"),goog.require("box2d.b2CollideEdge"),goog.require("box2d.b2ChainShape"),goog.require("box2d.b2PolygonShape"),box2d.b2ChainAndPolygonContact=function(){goog.base(this)},goog.inherits(box2d.b2ChainAndPolygonContact,box2d.b2Contact),box2d.b2ChainAndPolygonContact.Create=function(t){return new box2d.b2ChainAndPolygonContact},box2d.b2ChainAndPolygonContact.Destroy=function(t,e){},box2d.b2ChainAndPolygonContact.prototype.Reset=function(t,e,i,o){goog.base(this,"Reset",t,e,i,o),box2d.ENABLE_ASSERTS&&box2d.b2Assert(t.GetType()===box2d.b2ShapeType.e_chainShape),box2d.ENABLE_ASSERTS&&box2d.b2Assert(i.GetType()===box2d.b2ShapeType.e_polygonShape)},box2d.b2ChainAndPolygonContact.prototype.Evaluate=function(t,e,i){var o=this.m_fixtureA.GetShape(),s=this.m_fixtureB.GetShape(),o=(box2d.ENABLE_ASSERTS&&box2d.b2Assert(o instanceof box2d.b2ChainShape),box2d.ENABLE_ASSERTS&&box2d.b2Assert(s instanceof box2d.b2PolygonShape),o instanceof box2d.b2ChainShape?o:null),n=box2d.b2ChainAndPolygonContact.prototype.Evaluate.s_edge;o.GetChildEdge(n,this.m_indexA),box2d.b2CollideEdgeAndPolygon(t,n,e,s instanceof box2d.b2PolygonShape?s:null,i)},box2d.b2ChainAndPolygonContact.prototype.Evaluate.s_edge=new box2d.b2EdgeShape,goog.provide("box2d.b2CollidePolygon"),goog.require("box2d.b2Collision"),box2d.b2FindMaxSeparation=function(t,e,i,o,s){for(var n=e.m_count,r=o.m_count,a=e.m_normals,h=e.m_vertices,l=o.m_vertices,c=box2d.b2MulTXX(s,i,box2d.b2FindMaxSeparation.s_xf),u=0,d=-box2d.b2_maxFloat,p=0;p<n;++p){for(var f=box2d.b2MulRV(c.q,a[p],box2d.b2FindMaxSeparation.s_n),b=box2d.b2MulXV(c,h[p],box2d.b2FindMaxSeparation.s_v1),y=box2d.b2_maxFloat,m=0;m<r;++m){var x=box2d.b2DotVV(f,box2d.b2SubVV(l[m],b,box2d.b2Vec2.s_t0));x<y&&(y=x)}d<y&&(d=y,u=p)}return t[0]=u,d},box2d.b2FindMaxSeparation.s_xf=new box2d.b2Transform,box2d.b2FindMaxSeparation.s_n=new box2d.b2Vec2,box2d.b2FindMaxSeparation.s_v1=new box2d.b2Vec2,box2d.b2FindIncidentEdge=function(t,e,i,o,s,n){var r=e.m_count,e=e.m_normals,a=s.m_count,h=s.m_vertices,l=s.m_normals;box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=o&&o<r);for(var c=box2d.b2MulTRV(n.q,box2d.b2MulRV(i.q,e[o],box2d.b2Vec2.s_t0),box2d.b2FindIncidentEdge.s_normal1),u=0,d=box2d.b2_maxFloat,p=0;p<a;++p){var f=box2d.b2DotVV(c,l[p]);f<d&&(d=f,u=p)}s=u,r=(s+1)%a,i=t[0],box2d.b2MulXV(n,h[s],i.v),e=i.id.cf,e.indexA=o,e.indexB=s,e.typeA=box2d.b2ContactFeatureType.e_face,e.typeB=box2d.b2ContactFeatureType.e_vertex,i=t[1],box2d.b2MulXV(n,h[r],i.v),s=i.id.cf;s.indexA=o,s.indexB=r,s.typeA=box2d.b2ContactFeatureType.e_face,s.typeB=box2d.b2ContactFeatureType.e_vertex},box2d.b2FindIncidentEdge.s_normal1=new box2d.b2Vec2,box2d.b2CollidePolygons=function(t,e,i,o,s){t.pointCount=0;var n=e.m_radius+o.m_radius,r=box2d.b2CollidePolygons.s_edgeA,a=(r[0]=0,box2d.b2FindMaxSeparation(r,e,i,o,s));if(!(n<a)){var h=box2d.b2CollidePolygons.s_edgeB,l=(h[0]=0,box2d.b2FindMaxSeparation(h,o,s,e,i));if(!(n<l)){var c,u=0,d=0,d=.98*a+.001<l?(f=o,p=e,m=s,c=i,u=h[0],t.type=box2d.b2ManifoldType.e_faceB,1):(f=e,p=o,m=i,c=s,u=r[0],t.type=box2d.b2ManifoldType.e_faceA,0),a=box2d.b2CollidePolygons.s_incidentEdge,l=(box2d.b2FindIncidentEdge(a,f,m,u,p,c),f.m_count),h=f.m_vertices,e=u,o=(u+1)%l,i=h[e],s=h[o],r=box2d.b2SubVV(s,i,box2d.b2CollidePolygons.s_localTangent),p=(r.Normalize(),box2d.b2CrossVOne(r,box2d.b2CollidePolygons.s_localNormal)),f=box2d.b2MidVV(i,s,box2d.b2CollidePolygons.s_planePoint),u=box2d.b2MulRV(m.q,r,box2d.b2CollidePolygons.s_tangent),b=box2d.b2CrossVOne(u,box2d.b2CollidePolygons.s_normal),l=box2d.b2MulXV(m,i,box2d.b2CollidePolygons.s_v11),h=box2d.b2MulXV(m,s,box2d.b2CollidePolygons.s_v12),y=box2d.b2DotVV(b,l),r=-box2d.b2DotVV(u,l)+n,i=box2d.b2DotVV(u,h)+n,m=box2d.b2CollidePolygons.s_clipPoints1,x=box2d.b2CollidePolygons.s_clipPoints2,s=box2d.b2NegV(u,box2d.b2CollidePolygons.s_ntangent);if(!(box2d.b2ClipSegmentToLine(m,a,s,r,e)<2||box2d.b2ClipSegmentToLine(x,m,u,i,o)<2)){t.localNormal.Copy(p),t.localPoint.Copy(f);for(var g=0,v=0;v<box2d.b2_maxManifoldPoints;++v){var _,w=x[v];box2d.b2DotVV(b,w.v)-y<=n&&(_=t.points[g],box2d.b2MulTXV(c,w.v,_.localPoint),_.id.Copy(w.id),d&&(w=_.id.cf,_.id.cf.indexA=w.indexB,_.id.cf.indexB=w.indexA,_.id.cf.typeA=w.typeB,_.id.cf.typeB=w.typeA),++g)}t.pointCount=g}}}},box2d.b2CollidePolygons.s_incidentEdge=box2d.b2ClipVertex.MakeArray(2),box2d.b2CollidePolygons.s_clipPoints1=box2d.b2ClipVertex.MakeArray(2),box2d.b2CollidePolygons.s_clipPoints2=box2d.b2ClipVertex.MakeArray(2),box2d.b2CollidePolygons.s_edgeA=box2d.b2MakeNumberArray(1),box2d.b2CollidePolygons.s_edgeB=box2d.b2MakeNumberArray(1),box2d.b2CollidePolygons.s_localTangent=new box2d.b2Vec2,box2d.b2CollidePolygons.s_localNormal=new box2d.b2Vec2,box2d.b2CollidePolygons.s_planePoint=new box2d.b2Vec2,box2d.b2CollidePolygons.s_normal=new box2d.b2Vec2,box2d.b2CollidePolygons.s_tangent=new box2d.b2Vec2,box2d.b2CollidePolygons.s_ntangent=new box2d.b2Vec2,box2d.b2CollidePolygons.s_v11=new box2d.b2Vec2,box2d.b2CollidePolygons.s_v12=new box2d.b2Vec2,goog.provide("box2d.b2PolygonContact"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Contact"),goog.require("box2d.b2CollidePolygon"),box2d.b2PolygonContact=function(){goog.base(this)},goog.inherits(box2d.b2PolygonContact,box2d.b2Contact),box2d.b2PolygonContact.Create=function(t){return new box2d.b2PolygonContact},box2d.b2PolygonContact.Destroy=function(t,e){},box2d.b2PolygonContact.prototype.Reset=function(t,e,i,o){goog.base(this,"Reset",t,e,i,o)},box2d.b2PolygonContact.prototype.Evaluate=function(t,e,i){var o=this.m_fixtureA.GetShape(),s=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(o instanceof box2d.b2PolygonShape),box2d.ENABLE_ASSERTS&&box2d.b2Assert(s instanceof box2d.b2PolygonShape),box2d.b2CollidePolygons(t,o instanceof box2d.b2PolygonShape?o:null,e,s instanceof box2d.b2PolygonShape?s:null,i)},goog.provide("box2d.b2CollideCircle"),goog.require("box2d.b2Collision"),box2d.b2CollideCircles=function(t,e,i,o,s){t.pointCount=0;i=box2d.b2MulXV(i,e.m_p,box2d.b2CollideCircles.s_pA),s=box2d.b2MulXV(s,o.m_p,box2d.b2CollideCircles.s_pB),i=box2d.b2DistanceSquaredVV(i,s),s=e.m_radius+o.m_radius;s*s<i||(t.type=box2d.b2ManifoldType.e_circles,t.localPoint.Copy(e.m_p),t.localNormal.SetZero(),t.pointCount=1,t.points[0].localPoint.Copy(o.m_p),t.points[0].id.key=0)},box2d.b2CollideCircles.s_pA=new box2d.b2Vec2,box2d.b2CollideCircles.s_pB=new box2d.b2Vec2,box2d.b2CollidePolygonAndCircle=function(t,e,i,o,s){t.pointCount=0;for(var s=box2d.b2MulXV(s,o.m_p,box2d.b2CollidePolygonAndCircle.s_c),n=box2d.b2MulTXV(i,s,box2d.b2CollidePolygonAndCircle.s_cLocal),r=0,a=-box2d.b2_maxFloat,h=e.m_radius+o.m_radius,l=e.m_count,c=e.m_vertices,u=e.m_normals,d=0;d<l;++d){var p=box2d.b2DotVV(u[d],box2d.b2SubVV(n,c[d],box2d.b2Vec2.s_t0));if(h<p)return;a<p&&(a=p,r=d)}var f,b,i=r,s=c[i],e=c[(i+1)%l];a<box2d.b2_epsilon?(t.pointCount=1,t.type=box2d.b2ManifoldType.e_faceA,t.localNormal.Copy(u[r]),box2d.b2MidVV(s,e,t.localPoint),t.points[0].localPoint.Copy(o.m_p),t.points[0].id.key=0):(b=box2d.b2DotVV(box2d.b2SubVV(n,s,box2d.b2Vec2.s_t0),box2d.b2SubVV(e,s,box2d.b2Vec2.s_t1)),f=box2d.b2DotVV(box2d.b2SubVV(n,e,box2d.b2Vec2.s_t0),box2d.b2SubVV(s,e,box2d.b2Vec2.s_t1)),b<=0?box2d.b2DistanceSquaredVV(n,s)>h*h||(t.pointCount=1,t.type=box2d.b2ManifoldType.e_faceA,box2d.b2SubVV(n,s,t.localNormal).SelfNormalize(),t.localPoint.Copy(s),t.points[0].localPoint.Copy(o.m_p),t.points[0].id.key=0):f<=0?box2d.b2DistanceSquaredVV(n,e)>h*h||(t.pointCount=1,t.type=box2d.b2ManifoldType.e_faceA,box2d.b2SubVV(n,e,t.localNormal).SelfNormalize(),t.localPoint.Copy(e),t.points[0].localPoint.Copy(o.m_p),t.points[0].id.key=0):(b=box2d.b2MidVV(s,e,box2d.b2CollidePolygonAndCircle.s_faceCenter),(a=box2d.b2DotVV(box2d.b2SubVV(n,b,box2d.b2Vec2.s_t1),u[i]))>h||(t.pointCount=1,t.type=box2d.b2ManifoldType.e_faceA,t.localNormal.Copy(u[i]).SelfNormalize(),t.localPoint.Copy(b),t.points[0].localPoint.Copy(o.m_p),t.points[0].id.key=0)))},box2d.b2CollidePolygonAndCircle.s_c=new box2d.b2Vec2,box2d.b2CollidePolygonAndCircle.s_cLocal=new box2d.b2Vec2,box2d.b2CollidePolygonAndCircle.s_faceCenter=new box2d.b2Vec2,goog.provide("box2d.b2CircleContact"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Contact"),goog.require("box2d.b2CollideCircle"),box2d.b2CircleContact=function(){goog.base(this)},goog.inherits(box2d.b2CircleContact,box2d.b2Contact),box2d.b2CircleContact.Create=function(t){return new box2d.b2CircleContact},box2d.b2CircleContact.Destroy=function(t,e){},box2d.b2CircleContact.prototype.Reset=function(t,e,i,o){goog.base(this,"Reset",t,e,i,o)},box2d.b2CircleContact.prototype.Evaluate=function(t,e,i){var o=this.m_fixtureA.GetShape(),s=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(o instanceof box2d.b2CircleShape),box2d.ENABLE_ASSERTS&&box2d.b2Assert(s instanceof box2d.b2CircleShape),box2d.b2CollideCircles(t,o instanceof box2d.b2CircleShape?o:null,e,s instanceof box2d.b2CircleShape?s:null,i)},goog.provide("box2d.b2ChainAndCircleContact"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Contact"),goog.require("box2d.b2CollideEdge"),box2d.b2ChainAndCircleContact=function(){goog.base(this)},goog.inherits(box2d.b2ChainAndCircleContact,box2d.b2Contact),box2d.b2ChainAndCircleContact.Create=function(t){return new box2d.b2ChainAndCircleContact},box2d.b2ChainAndCircleContact.Destroy=function(t,e){},box2d.b2ChainAndCircleContact.prototype.Reset=function(t,e,i,o){goog.base(this,"Reset",t,e,i,o),box2d.ENABLE_ASSERTS&&box2d.b2Assert(t.GetType()===box2d.b2ShapeType.e_chainShape),box2d.ENABLE_ASSERTS&&box2d.b2Assert(i.GetType()===box2d.b2ShapeType.e_circleShape)},box2d.b2ChainAndCircleContact.prototype.Evaluate=function(t,e,i){var o=this.m_fixtureA.GetShape(),s=this.m_fixtureB.GetShape(),o=(box2d.ENABLE_ASSERTS&&box2d.b2Assert(o instanceof box2d.b2ChainShape),box2d.ENABLE_ASSERTS&&box2d.b2Assert(s instanceof box2d.b2CircleShape),o instanceof box2d.b2ChainShape?o:null),n=box2d.b2ChainAndCircleContact.prototype.Evaluate.s_edge;o.GetChildEdge(n,this.m_indexA),box2d.b2CollideEdgeAndCircle(t,n,e,s instanceof box2d.b2CircleShape?s:null,i)},box2d.b2ChainAndCircleContact.prototype.Evaluate.s_edge=new box2d.b2EdgeShape,goog.provide("box2d.b2EdgeAndCircleContact"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Contact"),goog.require("box2d.b2CollideEdge"),box2d.b2EdgeAndCircleContact=function(){goog.base(this)},goog.inherits(box2d.b2EdgeAndCircleContact,box2d.b2Contact),box2d.b2EdgeAndCircleContact.Create=function(t){return new box2d.b2EdgeAndCircleContact},box2d.b2EdgeAndCircleContact.Destroy=function(t,e){},box2d.b2EdgeAndCircleContact.prototype.Reset=function(t,e,i,o){goog.base(this,"Reset",t,e,i,o),box2d.ENABLE_ASSERTS&&box2d.b2Assert(t.GetType()===box2d.b2ShapeType.e_edgeShape),box2d.ENABLE_ASSERTS&&box2d.b2Assert(i.GetType()===box2d.b2ShapeType.e_circleShape)},box2d.b2EdgeAndCircleContact.prototype.Evaluate=function(t,e,i){var o=this.m_fixtureA.GetShape(),s=this.m_fixtureB.GetShape();box2d.ENABLE_ASSERTS&&box2d.b2Assert(o instanceof box2d.b2EdgeShape),box2d.ENABLE_ASSERTS&&box2d.b2Assert(s instanceof box2d.b2CircleShape),box2d.b2CollideEdgeAndCircle(t,o instanceof box2d.b2EdgeShape?o:null,e,s instanceof box2d.b2CircleShape?s:null,i)},goog.provide("box2d.b2ContactSolver"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Math"),goog.require("box2d.b2Collision"),goog.require("box2d.b2CircleContact"),goog.require("box2d.b2PolygonAndCircleContact"),goog.require("box2d.b2PolygonContact"),goog.require("box2d.b2EdgeAndCircleContact"),goog.require("box2d.b2EdgeAndPolygonContact"),goog.require("box2d.b2ChainAndCircleContact"),goog.require("box2d.b2ChainAndPolygonContact"),box2d.b2VelocityConstraintPoint=function(){this.rA=new box2d.b2Vec2,this.rB=new box2d.b2Vec2},box2d.b2VelocityConstraintPoint.prototype.rA=null,box2d.b2VelocityConstraintPoint.prototype.rB=null,box2d.b2VelocityConstraintPoint.prototype.normalImpulse=0,box2d.b2VelocityConstraintPoint.prototype.tangentImpulse=0,box2d.b2VelocityConstraintPoint.prototype.normalMass=0,box2d.b2VelocityConstraintPoint.prototype.tangentMass=0,box2d.b2VelocityConstraintPoint.prototype.velocityBias=0,box2d.b2VelocityConstraintPoint.MakeArray=function(t){return box2d.b2MakeArray(t,function(t){return new box2d.b2VelocityConstraintPoint})},box2d.b2ContactVelocityConstraint=function(){this.points=box2d.b2VelocityConstraintPoint.MakeArray(box2d.b2_maxManifoldPoints),this.normal=new box2d.b2Vec2,this.tangent=new box2d.b2Vec2,this.normalMass=new box2d.b2Mat22,this.K=new box2d.b2Mat22},box2d.b2ContactVelocityConstraint.prototype.points=null,box2d.b2ContactVelocityConstraint.prototype.normal=null,box2d.b2ContactVelocityConstraint.prototype.tangent=null,box2d.b2ContactVelocityConstraint.prototype.normalMass=null,box2d.b2ContactVelocityConstraint.prototype.K=null,box2d.b2ContactVelocityConstraint.prototype.indexA=0,box2d.b2ContactVelocityConstraint.prototype.indexB=0,box2d.b2ContactVelocityConstraint.prototype.invMassA=0,box2d.b2ContactVelocityConstraint.prototype.invMassB=0,box2d.b2ContactVelocityConstraint.prototype.invIA=0,box2d.b2ContactVelocityConstraint.prototype.invIB=0,box2d.b2ContactVelocityConstraint.prototype.friction=0,box2d.b2ContactVelocityConstraint.prototype.restitution=0,box2d.b2ContactVelocityConstraint.prototype.tangentSpeed=0,box2d.b2ContactVelocityConstraint.prototype.pointCount=0,box2d.b2ContactVelocityConstraint.prototype.contactIndex=0,box2d.b2ContactVelocityConstraint.MakeArray=function(t){return box2d.b2MakeArray(t,function(t){return new box2d.b2ContactVelocityConstraint})},box2d.b2ContactPositionConstraint=function(){this.localPoints=box2d.b2Vec2.MakeArray(box2d.b2_maxManifoldPoints),this.localNormal=new box2d.b2Vec2,this.localPoint=new box2d.b2Vec2,this.localCenterA=new box2d.b2Vec2,this.localCenterB=new box2d.b2Vec2},box2d.b2ContactPositionConstraint.prototype.localPoints=null,box2d.b2ContactPositionConstraint.prototype.localNormal=null,box2d.b2ContactPositionConstraint.prototype.localPoint=null,box2d.b2ContactPositionConstraint.prototype.indexA=0,box2d.b2ContactPositionConstraint.prototype.indexB=0,box2d.b2ContactPositionConstraint.prototype.invMassA=0,box2d.b2ContactPositionConstraint.prototype.invMassB=0,box2d.b2ContactPositionConstraint.prototype.localCenterA=null,box2d.b2ContactPositionConstraint.prototype.localCenterB=null,box2d.b2ContactPositionConstraint.prototype.invIA=0,box2d.b2ContactPositionConstraint.prototype.invIB=0,box2d.b2ContactPositionConstraint.prototype.type=box2d.b2ManifoldType.e_unknown,box2d.b2ContactPositionConstraint.prototype.radiusA=0,box2d.b2ContactPositionConstraint.prototype.radiusB=0,box2d.b2ContactPositionConstraint.prototype.pointCount=0,box2d.b2ContactPositionConstraint.MakeArray=function(t){return box2d.b2MakeArray(t,function(t){return new box2d.b2ContactPositionConstraint})},box2d.b2ContactSolverDef=function(){this.step=new box2d.b2TimeStep},box2d.b2ContactSolverDef.prototype.step=null,box2d.b2ContactSolverDef.prototype.contacts=null,box2d.b2ContactSolverDef.prototype.count=0,box2d.b2ContactSolverDef.prototype.positions=null,box2d.b2ContactSolverDef.prototype.velocities=null,box2d.b2ContactSolverDef.prototype.allocator=null,box2d.b2ContactSolver=function(){this.m_step=new box2d.b2TimeStep,this.m_positionConstraints=box2d.b2ContactPositionConstraint.MakeArray(1024),this.m_velocityConstraints=box2d.b2ContactVelocityConstraint.MakeArray(1024)},box2d.b2ContactSolver.prototype.m_step=null,box2d.b2ContactSolver.prototype.m_positions=null,box2d.b2ContactSolver.prototype.m_velocities=null,box2d.b2ContactSolver.prototype.m_allocator=null,box2d.b2ContactSolver.prototype.m_positionConstraints=null,box2d.b2ContactSolver.prototype.m_velocityConstraints=null,box2d.b2ContactSolver.prototype.m_contacts=null,box2d.b2ContactSolver.prototype.m_count=0,box2d.b2ContactSolver.prototype.Initialize=function(t){if(this.m_step.Copy(t.step),this.m_allocator=t.allocator,this.m_count=t.count,this.m_positionConstraints.length<this.m_count){var e=box2d.b2Max(2*this.m_positionConstraints.length,this.m_count);for(box2d.DEBUG&&window.console.log("box2d.b2ContactSolver.m_positionConstraints: "+e);this.m_positionConstraints.length<e;)this.m_positionConstraints[this.m_positionConstraints.length]=new box2d.b2ContactPositionConstraint}if(this.m_velocityConstraints.length<this.m_count){e=box2d.b2Max(2*this.m_velocityConstraints.length,this.m_count);for(box2d.DEBUG&&window.console.log("box2d.b2ContactSolver.m_velocityConstraints: "+e);this.m_velocityConstraints.length<e;)this.m_velocityConstraints[this.m_velocityConstraints.length]=new box2d.b2ContactVelocityConstraint}var i,o,s,n,r,a,h,l,c,u,d,p,f,b,y;for(this.m_positions=t.positions,this.m_velocities=t.velocities,this.m_contacts=t.contacts,i=0,o=this.m_count;i<o;++i)for(l=(r=this.m_contacts[i]).m_fixtureA,c=r.m_fixtureB,a=l.GetShape(),h=c.GetShape(),a=a.m_radius,h=h.m_radius,l=l.GetBody(),c=c.GetBody(),d=(u=r.GetManifold()).pointCount,box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<d),(p=this.m_velocityConstraints[i]).friction=r.m_friction,p.restitution=r.m_restitution,p.tangentSpeed=r.m_tangentSpeed,p.indexA=l.m_islandIndex,p.indexB=c.m_islandIndex,p.invMassA=l.m_invMass,p.invMassB=c.m_invMass,p.invIA=l.m_invI,p.invIB=c.m_invI,p.contactIndex=i,p.pointCount=d,p.K.SetZero(),p.normalMass.SetZero(),(f=this.m_positionConstraints[i]).indexA=l.m_islandIndex,f.indexB=c.m_islandIndex,f.invMassA=l.m_invMass,f.invMassB=c.m_invMass,f.localCenterA.Copy(l.m_sweep.localCenter),f.localCenterB.Copy(c.m_sweep.localCenter),f.invIA=l.m_invI,f.invIB=c.m_invI,f.localNormal.Copy(u.localNormal),f.localPoint.Copy(u.localPoint),f.pointCount=d,f.radiusA=a,f.radiusB=h,f.type=u.type,s=0,n=d;s<n;++s)b=u.points[s],y=p.points[s],this.m_step.warmStarting?(y.normalImpulse=this.m_step.dtRatio*b.normalImpulse,y.tangentImpulse=this.m_step.dtRatio*b.tangentImpulse):(y.normalImpulse=0,y.tangentImpulse=0),y.rA.SetZero(),y.rB.SetZero(),y.normalMass=0,y.tangentMass=0,y.velocityBias=0,f.localPoints[s].Copy(b.localPoint);return this},box2d.b2ContactSolver.prototype.InitializeVelocityConstraints=function(){for(var t,e,i,o,s,n,r,a,h,l,c,u,d,p,f,b,y,m,x,g,v,_,w,S,A=box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_xfA,C=box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_xfB,T=box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_worldManifold,P=0,B=this.m_count;P<B;++P){for(i=this.m_velocityConstraints[P],v=(_=this.m_positionConstraints[P]).radiusA,w=_.radiusB,g=this.m_contacts[i.contactIndex].GetManifold(),m=i.indexA,S=i.indexB,o=i.invMassA,s=i.invMassB,n=i.invIA,r=i.invIB,x=_.localCenterA,_=_.localCenterB,a=this.m_positions[m].c,y=this.m_positions[m].a,h=this.m_velocities[m].v,l=this.m_velocities[m].w,c=this.m_positions[S].c,m=this.m_positions[S].a,u=this.m_velocities[S].v,d=this.m_velocities[S].w,box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<g.pointCount),A.q.SetAngleRadians(y),C.q.SetAngleRadians(m),box2d.b2SubVV(a,box2d.b2MulRV(A.q,x,box2d.b2Vec2.s_t0),A.p),box2d.b2SubVV(c,box2d.b2MulRV(C.q,_,box2d.b2Vec2.s_t0),C.p),T.Initialize(g,A,v,C,w),i.normal.Copy(T.normal),box2d.b2CrossVOne(i.normal,i.tangent),t=0,e=i.pointCount;t<e;++t)p=i.points[t],box2d.b2SubVV(T.points[t],a,p.rA),box2d.b2SubVV(T.points[t],c,p.rB),f=box2d.b2CrossVV(p.rA,i.normal),b=box2d.b2CrossVV(p.rB,i.normal),p.normalMass=0<(f=o+s+n*f*f+r*b*b)?1/f:0,b=i.tangent,f=box2d.b2CrossVV(p.rA,b),b=box2d.b2CrossVV(p.rB,b),p.tangentMass=0<(f=o+s+n*f*f+r*b*b)?1/f:0,p.velocityBias=0,(b=box2d.b2DotVV(i.normal,box2d.b2SubVV(box2d.b2AddVCrossSV(u,d,p.rB,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(h,l,p.rA,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t0)))<-box2d.b2_velocityThreshold&&(p.velocityBias+=-i.restitution*b);2===i.pointCount&&(S=i.points[0],y=i.points[1],(_=o+s+n*(m=box2d.b2CrossVV(S.rA,i.normal))*m+r*(x=box2d.b2CrossVV(S.rB,i.normal))*x)*_<1e3*(_*(w=o+s+n*(g=box2d.b2CrossVV(y.rA,i.normal))*g+r*(v=box2d.b2CrossVV(y.rB,i.normal))*v)-(S=o+s+n*m*g+r*x*v)*S)?(i.K.ex.SetXY(_,S),i.K.ey.SetXY(S,w),i.K.GetInverse(i.normalMass)):i.pointCount=1)}},box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_xfA=new box2d.b2Transform,box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_xfB=new box2d.b2Transform,box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_worldManifold=new box2d.b2WorldManifold,box2d.b2ContactSolver.prototype.WarmStart=function(){for(var t,e,i,o,s,n,r,a,h,l,c,u,d,p,f,b,y,m=box2d.b2ContactSolver.prototype.WarmStart.s_P,x=0,g=this.m_count;x<g;++x){for(o=(i=this.m_velocityConstraints[x]).indexA,s=i.indexB,n=i.invMassA,r=i.invIA,a=i.invMassB,h=i.invIB,l=i.pointCount,c=this.m_velocities[o].v,u=this.m_velocities[o].w,d=this.m_velocities[s].v,p=this.m_velocities[s].w,f=i.normal,b=i.tangent,t=0,e=l;t<e;++t)y=i.points[t],box2d.b2AddVV(box2d.b2MulSV(y.normalImpulse,f,box2d.b2Vec2.s_t0),box2d.b2MulSV(y.tangentImpulse,b,box2d.b2Vec2.s_t1),m),u-=r*box2d.b2CrossVV(y.rA,m),c.SelfMulSub(n,m),p+=h*box2d.b2CrossVV(y.rB,m),d.SelfMulAdd(a,m);this.m_velocities[o].w=u,this.m_velocities[s].w=p}},box2d.b2ContactSolver.prototype.WarmStart.s_P=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolveVelocityConstraints=function(){for(var t,e,i,o,s,n,r,a,h,l,c,u,d,p,f,b,y,m,x,g,v,_,w,S,A,C=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv,T=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv1,I=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv2,P=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P,B=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_a,E=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_b,M=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_x,D=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_d,O=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P1,R=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P2,L=box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P1P2,F=0,k=this.m_count;F<k;++F){for(o=(i=this.m_velocityConstraints[F]).indexA,s=i.indexB,n=i.invMassA,r=i.invIA,a=i.invMassB,h=i.invIB,m=i.pointCount,l=this.m_velocities[o].v,c=this.m_velocities[o].w,u=this.m_velocities[s].v,d=this.m_velocities[s].w,p=i.normal,f=i.tangent,b=i.friction,box2d.ENABLE_ASSERTS&&box2d.b2Assert(1===m||2===m),t=0,e=m;t<e;++t)y=i.points[t],box2d.b2SubVV(box2d.b2AddVCrossSV(u,d,y.rB,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(l,c,y.rA,box2d.b2Vec2.s_t1),C),g=box2d.b2DotVV(C,f)-i.tangentSpeed,x=y.tangentMass*-g,g=b*y.normalImpulse,x=(v=box2d.b2Clamp(y.tangentImpulse+x,-g,g))-y.tangentImpulse,y.tangentImpulse=v,box2d.b2MulSV(x,f,P),l.SelfMulSub(n,P),c-=r*box2d.b2CrossVV(y.rA,P),u.SelfMulAdd(a,P),d+=h*box2d.b2CrossVV(y.rB,P);if(1===i.pointCount)y=i.points[0],box2d.b2SubVV(box2d.b2AddVCrossSV(u,d,y.rB,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(l,c,y.rA,box2d.b2Vec2.s_t1),C),m=box2d.b2DotVV(C,p),x=-y.normalMass*(m-y.velocityBias),x=(v=box2d.b2Max(y.normalImpulse+x,0))-y.normalImpulse,y.normalImpulse=v,box2d.b2MulSV(x,p,P),l.SelfMulSub(n,P),c-=r*box2d.b2CrossVV(y.rA,P),u.SelfMulAdd(a,P),d+=h*box2d.b2CrossVV(y.rB,P);else for(_=i.points[0],w=i.points[1],B.SetXY(_.normalImpulse,w.normalImpulse),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=B.x&&0<=B.y),box2d.b2SubVV(box2d.b2AddVCrossSV(u,d,_.rB,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(l,c,_.rA,box2d.b2Vec2.s_t1),T),box2d.b2SubVV(box2d.b2AddVCrossSV(u,d,w.rB,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(l,c,w.rA,box2d.b2Vec2.s_t1),I),S=box2d.b2DotVV(T,p),A=box2d.b2DotVV(I,p),E.x=S-_.velocityBias,E.y=A-w.velocityBias,E.SelfSub(box2d.b2MulMV(i.K,B,box2d.b2Vec2.s_t0));;){if(box2d.b2MulMV(i.normalMass,E,M).SelfNeg(),0<=M.x&&0<=M.y){box2d.b2SubVV(M,B,D),box2d.b2MulSV(D.x,p,O),box2d.b2MulSV(D.y,p,R),box2d.b2AddVV(O,R,L),l.SelfMulSub(n,L),c-=r*(box2d.b2CrossVV(_.rA,O)+box2d.b2CrossVV(w.rA,R)),u.SelfMulAdd(a,L),d+=h*(box2d.b2CrossVV(_.rB,O)+box2d.b2CrossVV(w.rB,R)),_.normalImpulse=M.x,w.normalImpulse=M.y;break}if(M.x=-_.normalMass*E.x,M.y=0,A=i.K.ex.y*M.x+E.y,0<=M.x&&0<=A){box2d.b2SubVV(M,B,D),box2d.b2MulSV(D.x,p,O),box2d.b2MulSV(D.y,p,R),box2d.b2AddVV(O,R,L),l.SelfMulSub(n,L),c-=r*(box2d.b2CrossVV(_.rA,O)+box2d.b2CrossVV(w.rA,R)),u.SelfMulAdd(a,L),d+=h*(box2d.b2CrossVV(_.rB,O)+box2d.b2CrossVV(w.rB,R)),_.normalImpulse=M.x,w.normalImpulse=M.y;break}if(M.x=0,M.y=-w.normalMass*E.y,S=i.K.ey.x*M.y+E.x,0<=M.y&&0<=S){box2d.b2SubVV(M,B,D),box2d.b2MulSV(D.x,p,O),box2d.b2MulSV(D.y,p,R),box2d.b2AddVV(O,R,L),l.SelfMulSub(n,L),c-=r*(box2d.b2CrossVV(_.rA,O)+box2d.b2CrossVV(w.rA,R)),u.SelfMulAdd(a,L),d+=h*(box2d.b2CrossVV(_.rB,O)+box2d.b2CrossVV(w.rB,R)),_.normalImpulse=M.x,w.normalImpulse=M.y;break}if(M.x=0,M.y=0,S=E.x,A=E.y,0<=S&&0<=A){box2d.b2SubVV(M,B,D),box2d.b2MulSV(D.x,p,O),box2d.b2MulSV(D.y,p,R),box2d.b2AddVV(O,R,L),l.SelfMulSub(n,L),c-=r*(box2d.b2CrossVV(_.rA,O)+box2d.b2CrossVV(w.rA,R)),u.SelfMulAdd(a,L),d+=h*(box2d.b2CrossVV(_.rB,O)+box2d.b2CrossVV(w.rB,R)),_.normalImpulse=M.x,w.normalImpulse=M.y;break}break}this.m_velocities[o].w=c,this.m_velocities[s].w=d}},box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv1=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv2=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_a=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_b=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_x=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_d=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P1=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P2=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P1P2=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.StoreImpulses=function(){for(var t,e,i,o,s=0,n=this.m_count;s<n;++s)for(i=this.m_velocityConstraints[s],o=this.m_contacts[i.contactIndex].GetManifold(),t=0,e=i.pointCount;t<e;++t)o.points[t].normalImpulse=i.points[t].normalImpulse,o.points[t].tangentImpulse=i.points[t].tangentImpulse},box2d.b2PositionSolverManifold=function(){this.normal=new box2d.b2Vec2,this.point=new box2d.b2Vec2},box2d.b2PositionSolverManifold.prototype.normal=null,box2d.b2PositionSolverManifold.prototype.point=null,box2d.b2PositionSolverManifold.prototype.separation=0,box2d.b2PositionSolverManifold.prototype.Initialize=function(t,e,i,o){var s=box2d.b2PositionSolverManifold.prototype.Initialize.s_pointA,n=box2d.b2PositionSolverManifold.prototype.Initialize.s_pointB,r=box2d.b2PositionSolverManifold.prototype.Initialize.s_planePoint,a=box2d.b2PositionSolverManifold.prototype.Initialize.s_clipPoint;switch(box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<t.pointCount),t.type){case box2d.b2ManifoldType.e_circles:box2d.b2MulXV(e,t.localPoint,s),box2d.b2MulXV(i,t.localPoints[0],n),box2d.b2SubVV(n,s,this.normal).SelfNormalize(),box2d.b2MidVV(s,n,this.point),this.separation=box2d.b2DotVV(box2d.b2SubVV(n,s,box2d.b2Vec2.s_t0),this.normal)-t.radiusA-t.radiusB;break;case box2d.b2ManifoldType.e_faceA:box2d.b2MulRV(e.q,t.localNormal,this.normal),box2d.b2MulXV(e,t.localPoint,r),box2d.b2MulXV(i,t.localPoints[o],a),this.separation=box2d.b2DotVV(box2d.b2SubVV(a,r,box2d.b2Vec2.s_t0),this.normal)-t.radiusA-t.radiusB,this.point.Copy(a);break;case box2d.b2ManifoldType.e_faceB:box2d.b2MulRV(i.q,t.localNormal,this.normal),box2d.b2MulXV(i,t.localPoint,r),box2d.b2MulXV(e,t.localPoints[o],a),this.separation=box2d.b2DotVV(box2d.b2SubVV(a,r,box2d.b2Vec2.s_t0),this.normal)-t.radiusA-t.radiusB,this.point.Copy(a),this.normal.SelfNeg()}},box2d.b2PositionSolverManifold.prototype.Initialize.s_pointA=new box2d.b2Vec2,box2d.b2PositionSolverManifold.prototype.Initialize.s_pointB=new box2d.b2Vec2,box2d.b2PositionSolverManifold.prototype.Initialize.s_planePoint=new box2d.b2Vec2,box2d.b2PositionSolverManifold.prototype.Initialize.s_clipPoint=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolvePositionConstraints=function(){for(var t,e,i,o,s,n,r,a,h,l,c,u,d,p,f,b,y,m,x,g=box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_xfA,v=box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_xfB,_=box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_psm,w=box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_rA,S=box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_rB,A=box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_P,C=0,T=0,P=this.m_count;T<P;++T){for(o=(i=this.m_positionConstraints[T]).indexA,s=i.indexB,n=i.localCenterA,r=i.invMassA,a=i.invIA,h=i.localCenterB,l=i.invMassB,c=i.invIB,u=i.pointCount,d=this.m_positions[o].c,p=this.m_positions[o].a,f=this.m_positions[s].c,b=this.m_positions[s].a,t=0,e=u;t<e;++t)g.q.SetAngleRadians(p),v.q.SetAngleRadians(b),box2d.b2SubVV(d,box2d.b2MulRV(g.q,n,box2d.b2Vec2.s_t0),g.p),box2d.b2SubVV(f,box2d.b2MulRV(v.q,h,box2d.b2Vec2.s_t0),v.p),_.Initialize(i,g,v,t),y=_.normal,m=_.point,x=_.separation,box2d.b2SubVV(m,d,w),box2d.b2SubVV(m,f,S),C=box2d.b2Min(C,x),m=box2d.b2Clamp(box2d.b2_baumgarte*(x+box2d.b2_linearSlop),-box2d.b2_maxLinearCorrection,0),x=r+l+a*(x=box2d.b2CrossVV(w,y))*x+c*(x=box2d.b2CrossVV(S,y))*x,box2d.b2MulSV(0<x?-m/x:0,y,A),d.SelfMulSub(r,A),p-=a*box2d.b2CrossVV(w,A),f.SelfMulAdd(l,A),b+=c*box2d.b2CrossVV(S,A);this.m_positions[o].a=p,this.m_positions[s].a=b}return C>-3*box2d.b2_linearSlop},box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_xfA=new box2d.b2Transform,box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_xfB=new box2d.b2Transform,box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_psm=new box2d.b2PositionSolverManifold,box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_rA=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_rB=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_P=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints=function(t,e){for(var i,o,s,n,r,a,h,l,c,u,d,p,f,b,y,m,x,g,v,_=box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_xfA,w=box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_xfB,S=box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_psm,A=box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_rA,C=box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_rB,T=box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_P,P=0,B=0,E=this.m_count;B<E;++B){for(n=(s=this.m_positionConstraints[B]).indexA,r=s.indexB,a=s.localCenterA,h=s.localCenterB,l=s.pointCount,u=c=0,n!==t&&n!==e||(c=s.invMassA,u=s.invIA),p=d=0,r!==t&&r!==e||(d=s.invMassB,p=s.invIB),f=this.m_positions[n].c,b=this.m_positions[n].a,y=this.m_positions[r].c,m=this.m_positions[r].a,i=0,o=l;i<o;++i)_.q.SetAngleRadians(b),w.q.SetAngleRadians(m),box2d.b2SubVV(f,box2d.b2MulRV(_.q,a,box2d.b2Vec2.s_t0),_.p),box2d.b2SubVV(y,box2d.b2MulRV(w.q,h,box2d.b2Vec2.s_t0),w.p),S.Initialize(s,_,w,i),x=S.normal,g=S.point,v=S.separation,box2d.b2SubVV(g,f,A),box2d.b2SubVV(g,y,C),P=box2d.b2Min(P,v),g=box2d.b2Clamp(box2d.b2_toiBaumgarte*(v+box2d.b2_linearSlop),-box2d.b2_maxLinearCorrection,0),v=c+d+u*(v=box2d.b2CrossVV(A,x))*v+p*(v=box2d.b2CrossVV(C,x))*v,box2d.b2MulSV(0<v?-g/v:0,x,T),f.SelfMulSub(c,T),b-=u*box2d.b2CrossVV(A,T),y.SelfMulAdd(d,T),m+=p*box2d.b2CrossVV(C,T);this.m_positions[n].a=b,this.m_positions[r].a=m}return P>=-1.5*box2d.b2_linearSlop},box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_xfA=new box2d.b2Transform,box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_xfB=new box2d.b2Transform,box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_psm=new box2d.b2PositionSolverManifold,box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_rA=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_rB=new box2d.b2Vec2,box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_P=new box2d.b2Vec2,goog.provide("box2d.b2WorldCallbacks"),goog.require("box2d.b2Settings"),box2d.b2DestructionListener=function(){},box2d.b2DestructionListener.prototype.SayGoodbyeJoint=function(t){},box2d.b2DestructionListener.prototype.SayGoodbyeFixture=function(t){},box2d.b2ContactFilter=function(){},box2d.b2ContactFilter.prototype.ShouldCollide=function(t,e){t=t.GetFilterData(),e=e.GetFilterData();return t.groupIndex===e.groupIndex&&0!==t.groupIndex?0<t.groupIndex:0!=(t.maskBits&e.categoryBits)&&0!=(t.categoryBits&e.maskBits)},box2d.b2ContactFilter.b2_defaultFilter=new box2d.b2ContactFilter,box2d.b2ContactImpulse=function(){this.normalImpulses=box2d.b2MakeNumberArray(box2d.b2_maxManifoldPoints),this.tangentImpulses=box2d.b2MakeNumberArray(box2d.b2_maxManifoldPoints)},box2d.b2ContactImpulse.prototype.normalImpulses=null,box2d.b2ContactImpulse.prototype.tangentImpulses=null,box2d.b2ContactImpulse.prototype.count=0,box2d.b2ContactListener=function(){};box2d.b2ContactListener.prototype.BeginContact=function(t){},box2d.b2ContactListener.prototype.EndContact=function(t){},box2d.b2ContactListener.prototype.PreSolve=function(t,e){},box2d.b2ContactListener.prototype.PostSolve=function(t,e){},box2d.b2ContactListener.b2_defaultListener=new box2d.b2ContactListener,box2d.b2QueryCallback=function(){},box2d.b2QueryCallback.prototype.ReportFixture=function(t){return!0},box2d.b2RayCastCallback=function(){},box2d.b2RayCastCallback.prototype.ReportFixture=function(t,e,i,o){return o},goog.provide("box2d.b2Island"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Timer"),goog.require("box2d.b2TimeStep"),goog.require("box2d.b2WorldCallbacks"),goog.require("box2d.b2ContactSolver"),box2d.b2Island=function(){this.m_bodies=new Array(1024),this.m_contacts=new Array(1024),this.m_joints=new Array(1024),this.m_positions=box2d.b2Position.MakeArray(1024),this.m_velocities=box2d.b2Velocity.MakeArray(1024)},box2d.b2Island.prototype.m_allocator=null,box2d.b2Island.prototype.m_listener=null,box2d.b2Island.prototype.m_bodies=null,box2d.b2Island.prototype.m_contacts=null,box2d.b2Island.prototype.m_joints=null,box2d.b2Island.prototype.m_positions=null,box2d.b2Island.prototype.m_velocities=null,box2d.b2Island.prototype.m_bodyCount=0,box2d.b2Island.prototype.m_jointCount=0,box2d.b2Island.prototype.m_contactCount=0,box2d.b2Island.prototype.m_bodyCapacity=0,box2d.b2Island.prototype.m_contactCapacity=0,box2d.b2Island.prototype.m_jointCapacity=0,box2d.b2Island.prototype.Initialize=function(t,e,i,o,s){for(this.m_bodyCapacity=t,this.m_contactCapacity=e,this.m_jointCapacity=i,this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0,this.m_allocator=o,this.m_listener=s;this.m_bodies.length<t;)this.m_bodies[this.m_bodies.length]=null;for(;this.m_contacts.length<e;)this.m_contacts[this.m_contacts.length]=null;for(;this.m_joints.length<i;)this.m_joints[this.m_joints.length]=null;if(this.m_positions.length<t){var n=box2d.b2Max(2*this.m_positions.length,t);for(box2d.DEBUG&&window.console.log("box2d.b2Island.m_positions: "+n);this.m_positions.length<n;)this.m_positions[this.m_positions.length]=new box2d.b2Position}if(this.m_velocities.length<t){n=box2d.b2Max(2*this.m_velocities.length,t);for(box2d.DEBUG&&window.console.log("box2d.b2Island.m_velocities: "+n);this.m_velocities.length<n;)this.m_velocities[this.m_velocities.length]=new box2d.b2Velocity}},box2d.b2Island.prototype.Clear=function(){this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0},box2d.b2Island.prototype.AddBody=function(t){box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_bodyCount<this.m_bodyCapacity),t.m_islandIndex=this.m_bodyCount,this.m_bodies[this.m_bodyCount++]=t},box2d.b2Island.prototype.AddContact=function(t){box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_contactCount<this.m_contactCapacity),this.m_contacts[this.m_contactCount++]=t},box2d.b2Island.prototype.AddJoint=function(t){box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_jointCount<this.m_jointCapacity),this.m_joints[this.m_jointCount++]=t},box2d.b2Island.prototype.Solve=function(t,e,i,o){for(var s=box2d.b2Island.s_timer.Reset(),n=e.dt,r=0;r<this.m_bodyCount;++r){var a=this.m_bodies[r],h=this.m_positions[r].c.Copy(a.m_sweep.c),l=a.m_sweep.a,c=this.m_velocities[r].v.Copy(a.m_linearVelocity),u=a.m_angularVelocity;a.m_sweep.c0.Copy(a.m_sweep.c),a.m_sweep.a0=a.m_sweep.a,a.m_type===box2d.b2BodyType.b2_dynamicBody&&(c.x+=n*(a.m_gravityScale*i.x+a.m_invMass*a.m_force.x),c.y+=n*(a.m_gravityScale*i.y+a.m_invMass*a.m_force.y),u+=n*a.m_invI*a.m_torque,c.SelfMul(1/(1+n*a.m_linearDamping)),u*=1/(1+n*a.m_angularDamping)),this.m_positions[r].a=l,this.m_velocities[r].w=u}s.Reset();var d=box2d.b2Island.s_solverData,p=(d.step.Copy(e),d.positions=this.m_positions,d.velocities=this.m_velocities,box2d.b2Island.s_contactSolverDef),f=(p.step.Copy(e),p.contacts=this.m_contacts,p.count=this.m_contactCount,p.positions=this.m_positions,p.velocities=this.m_velocities,p.allocator=this.m_allocator,box2d.b2Island.s_contactSolver.Initialize(p));f.InitializeVelocityConstraints(),e.warmStarting&&f.WarmStart();for(r=0;r<this.m_jointCount;++r)this.m_joints[r].InitVelocityConstraints(d);t.solveInit=s.GetMilliseconds(),s.Reset();for(r=0;r<e.velocityIterations;++r){for(var b=0;b<this.m_jointCount;++b)this.m_joints[b].SolveVelocityConstraints(d);f.SolveVelocityConstraints()}f.StoreImpulses(),t.solveVelocity=s.GetMilliseconds();for(r=0;r<this.m_bodyCount;++r){var y,h=this.m_positions[r].c,l=this.m_positions[r].a,c=this.m_velocities[r].v,u=this.m_velocities[r].w,m=box2d.b2MulSV(n,c,box2d.b2Island.s_translation),m=(box2d.b2DotVV(m,m)>box2d.b2_maxTranslationSquared&&(y=box2d.b2_maxTranslation/m.GetLength(),c.SelfMul(y)),n*u);m*m>box2d.b2_maxRotationSquared&&(u*=y=box2d.b2_maxRotation/box2d.b2Abs(m)),h.x+=n*c.x,h.y+=n*c.y,l+=n*u,this.m_positions[r].a=l,this.m_velocities[r].w=u}s.Reset();for(var x=!1,r=0;r<e.positionIterations;++r){for(var g=f.SolvePositionConstraints(),v=!0,b=0;b<this.m_jointCount;++b)var _=this.m_joints[b].SolvePositionConstraints(d),v=v&&_;if(g&&v){x=!0;break}}for(r=0;r<this.m_bodyCount;++r){var w=this.m_bodies[r];w.m_sweep.c.Copy(this.m_positions[r].c),w.m_sweep.a=this.m_positions[r].a,w.m_linearVelocity.Copy(this.m_velocities[r].v),w.m_angularVelocity=this.m_velocities[r].w,w.SynchronizeTransform()}if(t.solvePosition=s.GetMilliseconds(),this.Report(f.m_velocityConstraints),o){for(var S=box2d.b2_maxFloat,A=box2d.b2_linearSleepTolerance*box2d.b2_linearSleepTolerance,C=box2d.b2_angularSleepTolerance*box2d.b2_angularSleepTolerance,r=0;r<this.m_bodyCount;++r)(a=this.m_bodies[r]).GetType()!==box2d.b2BodyType.b2_staticBody&&(S=0==(a.m_flags&box2d.b2BodyFlag.e_autoSleepFlag)||a.m_angularVelocity*a.m_angularVelocity>C||box2d.b2DotVV(a.m_linearVelocity,a.m_linearVelocity)>A?a.m_sleepTime=0:(a.m_sleepTime+=n,box2d.b2Min(S,a.m_sleepTime)));if(S>=box2d.b2_timeToSleep&&x)for(r=0;r<this.m_bodyCount;++r)(a=this.m_bodies[r]).SetAwake(!1)}},box2d.b2Island.prototype.SolveTOI=function(t,e,i){box2d.ENABLE_ASSERTS&&box2d.b2Assert(e<this.m_bodyCount),box2d.ENABLE_ASSERTS&&box2d.b2Assert(i<this.m_bodyCount);for(var o=0;o<this.m_bodyCount;++o){var s=this.m_bodies[o];this.m_positions[o].c.Copy(s.m_sweep.c),this.m_positions[o].a=s.m_sweep.a,this.m_velocities[o].v.Copy(s.m_linearVelocity),this.m_velocities[o].w=s.m_angularVelocity}var n=box2d.b2Island.s_contactSolverDef;n.contacts=this.m_contacts,n.count=this.m_contactCount,n.allocator=this.m_allocator,n.step.Copy(t),n.positions=this.m_positions,n.velocities=this.m_velocities;for(var r=box2d.b2Island.s_contactSolver.Initialize(n),o=0;o<t.positionIterations&&!r.SolveTOIPositionConstraints(e,i);++o);this.m_bodies[e].m_sweep.c0.Copy(this.m_positions[e].c),this.m_bodies[e].m_sweep.a0=this.m_positions[e].a,this.m_bodies[i].m_sweep.c0.Copy(this.m_positions[i].c),this.m_bodies[i].m_sweep.a0=this.m_positions[i].a,r.InitializeVelocityConstraints();for(o=0;o<t.velocityIterations;++o)r.SolveVelocityConstraints();for(var a=t.dt,o=0;o<this.m_bodyCount;++o){var h,l=this.m_positions[o].c,c=this.m_positions[o].a,u=this.m_velocities[o].v,d=this.m_velocities[o].w,p=box2d.b2MulSV(a,u,box2d.b2Island.s_translation),p=(box2d.b2DotVV(p,p)>box2d.b2_maxTranslationSquared&&(h=box2d.b2_maxTranslation/p.GetLength(),u.SelfMul(h)),a*d),p=(p*p>box2d.b2_maxRotationSquared&&(d*=h=box2d.b2_maxRotation/box2d.b2Abs(p)),l.SelfMulAdd(a,u),c+=a*d,this.m_positions[o].a=c,this.m_velocities[o].w=d,this.m_bodies[o]);p.m_sweep.c.Copy(l),p.m_sweep.a=c,p.m_linearVelocity.Copy(u),p.m_angularVelocity=d,p.SynchronizeTransform()}this.Report(r.m_velocityConstraints)},box2d.b2Island.prototype.Report=function(t){if(null!==this.m_listener)for(var e=0;e<this.m_contactCount;++e){var i=this.m_contacts[e];if(i){var o=t[e],s=box2d.b2Island.s_impulse;s.count=o.pointCount;for(var n=0;n<o.pointCount;++n)s.normalImpulses[n]=o.points[n].normalImpulse,s.tangentImpulses[n]=o.points[n].tangentImpulse;this.m_listener.PostSolve(i,s)}}},box2d.b2Island.s_timer=new box2d.b2Timer,box2d.b2Island.s_solverData=new box2d.b2SolverData,box2d.b2Island.s_contactSolverDef=new box2d.b2ContactSolverDef,box2d.b2Island.s_contactSolver=new box2d.b2ContactSolver,box2d.b2Island.s_translation=new box2d.b2Vec2,box2d.b2Island.s_impulse=new box2d.b2ContactImpulse,goog.provide("box2d.b2ContactFactory"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Contact"),box2d.b2ContactRegister=function(){},box2d.b2ContactRegister.prototype.createFcn=null,box2d.b2ContactRegister.prototype.destroyFcn=null,box2d.b2ContactRegister.prototype.primary=!1,box2d.b2ContactFactory=function(t){this.m_allocator=t,this.InitializeRegisters()},box2d.b2ContactFactory.prototype.m_allocator=null,box2d.b2ContactFactory.prototype.AddType=function(e,t,i,o){function s(t){return 0<r.length?r.pop():e(t)}function n(t,e){r.push(t)}var r=box2d.b2MakeArray(256,function(t){return e()});this.m_registers[i][o].pool=r,this.m_registers[i][o].createFcn=s,this.m_registers[i][o].destroyFcn=n,this.m_registers[i][o].primary=!0,i!==o&&(this.m_registers[o][i].pool=r,this.m_registers[o][i].createFcn=s,this.m_registers[o][i].destroyFcn=n,this.m_registers[o][i].primary=!1)},box2d.b2ContactFactory.prototype.InitializeRegisters=function(){this.m_registers=new Array(box2d.b2ShapeType.e_shapeTypeCount);for(var t=0;t<box2d.b2ShapeType.e_shapeTypeCount;t++){this.m_registers[t]=new Array(box2d.b2ShapeType.e_shapeTypeCount);for(var e=0;e<box2d.b2ShapeType.e_shapeTypeCount;e++)this.m_registers[t][e]=new box2d.b2ContactRegister}this.AddType(box2d.b2CircleContact.Create,box2d.b2CircleContact.Destroy,box2d.b2ShapeType.e_circleShape,box2d.b2ShapeType.e_circleShape),this.AddType(box2d.b2PolygonAndCircleContact.Create,box2d.b2PolygonAndCircleContact.Destroy,box2d.b2ShapeType.e_polygonShape,box2d.b2ShapeType.e_circleShape),this.AddType(box2d.b2PolygonContact.Create,box2d.b2PolygonContact.Destroy,box2d.b2ShapeType.e_polygonShape,box2d.b2ShapeType.e_polygonShape),this.AddType(box2d.b2EdgeAndCircleContact.Create,box2d.b2EdgeAndCircleContact.Destroy,box2d.b2ShapeType.e_edgeShape,box2d.b2ShapeType.e_circleShape),this.AddType(box2d.b2EdgeAndPolygonContact.Create,box2d.b2EdgeAndPolygonContact.Destroy,box2d.b2ShapeType.e_edgeShape,box2d.b2ShapeType.e_polygonShape),this.AddType(box2d.b2ChainAndCircleContact.Create,box2d.b2ChainAndCircleContact.Destroy,box2d.b2ShapeType.e_chainShape,box2d.b2ShapeType.e_circleShape),this.AddType(box2d.b2ChainAndPolygonContact.Create,box2d.b2ChainAndPolygonContact.Destroy,box2d.b2ShapeType.e_chainShape,box2d.b2ShapeType.e_polygonShape)},box2d.b2ContactFactory.prototype.Create=function(t,e,i,o){var s,n=t.GetType(),r=i.GetType(),n=(box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=n&&n<box2d.b2ShapeType.e_shapeTypeCount),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=r&&r<box2d.b2ShapeType.e_shapeTypeCount),this.m_registers[n][r]),r=n.createFcn;return null!==r?(n.primary?(s=r(this.m_allocator)).Reset(t,e,i,o):(s=r(this.m_allocator)).Reset(i,o,t,e),s):null},box2d.b2ContactFactory.prototype.Destroy=function(t){var e=t.m_fixtureA,i=t.m_fixtureB,e=(0<t.m_manifold.pointCount&&!1===e.IsSensor()&&!1===i.IsSensor()&&(e.GetBody().SetAwake(!0),i.GetBody().SetAwake(!0)),e.GetType()),i=i.GetType();box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=e&&i<box2d.b2ShapeType.e_shapeTypeCount),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=e&&i<box2d.b2ShapeType.e_shapeTypeCount),(0,this.m_registers[e][i].destroyFcn)(t,this.m_allocator)},goog.provide("box2d.b2GrowableStack"),goog.require("box2d.b2Settings"),box2d.b2GrowableStack=function(t){this.m_stack=new Array(t)},box2d.b2GrowableStack.prototype.m_stack=null,box2d.b2GrowableStack.prototype.m_count=0,box2d.b2GrowableStack.prototype.Reset=function(){return this.m_count=0,this},box2d.b2GrowableStack.prototype.Push=function(t){this.m_stack[this.m_count]=t,++this.m_count},box2d.b2GrowableStack.prototype.Pop=function(){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_count),--this.m_count;var t=this.m_stack[this.m_count];return this.m_stack[this.m_count]=null,t},box2d.b2GrowableStack.prototype.GetCount=function(){return this.m_count},goog.provide("box2d.b2DynamicTree"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Collision"),goog.require("box2d.b2GrowableStack"),box2d.b2TreeNode=function(t){this.m_id=t||0,this.aabb=new box2d.b2AABB},box2d.b2TreeNode.prototype.m_id=0,box2d.b2TreeNode.prototype.aabb=null,box2d.b2TreeNode.prototype.userData=null,box2d.b2TreeNode.prototype.parent=null,box2d.b2TreeNode.prototype.child1=null,box2d.b2TreeNode.prototype.child2=null,box2d.b2TreeNode.prototype.height=0,box2d.b2TreeNode.prototype.IsLeaf=function(){return null===this.child1},box2d.b2DynamicTree=function(){},box2d.b2DynamicTree.prototype.m_root=null,box2d.b2DynamicTree.prototype.m_freeList=null,box2d.b2DynamicTree.prototype.m_path=0,box2d.b2DynamicTree.prototype.m_insertionCount=0,box2d.b2DynamicTree.s_stack=new box2d.b2GrowableStack(256),box2d.b2DynamicTree.s_r=new box2d.b2Vec2,box2d.b2DynamicTree.s_v=new box2d.b2Vec2,box2d.b2DynamicTree.s_abs_v=new box2d.b2Vec2,box2d.b2DynamicTree.s_segmentAABB=new box2d.b2AABB,box2d.b2DynamicTree.s_subInput=new box2d.b2RayCastInput,box2d.b2DynamicTree.s_combinedAABB=new box2d.b2AABB,box2d.b2DynamicTree.s_aabb=new box2d.b2AABB,box2d.b2DynamicTree.prototype.GetUserData=function(t){return box2d.ENABLE_ASSERTS&&box2d.b2Assert(null!==t),t.userData},box2d.b2DynamicTree.prototype.GetFatAABB=function(t){return box2d.ENABLE_ASSERTS&&box2d.b2Assert(null!==t),t.aabb},box2d.b2DynamicTree.prototype.Query=function(t,e){if(null!==this.m_root){var i=box2d.b2DynamicTree.s_stack.Reset();for(i.Push(this.m_root);0<i.GetCount();){var o=i.Pop();if(null!==o&&o.aabb.TestOverlap(e))if(o.IsLeaf()){if(!1===t(o))return}else i.Push(o.child1),i.Push(o.child2)}}},box2d.b2DynamicTree.prototype.RayCast=function(t,e){if(null!==this.m_root){var i=e.p1,o=e.p2,s=box2d.b2SubVV(o,i,box2d.b2DynamicTree.s_r),n=(box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<s.GetLengthSquared()),s.Normalize(),box2d.b2CrossOneV(s,box2d.b2DynamicTree.s_v)),r=box2d.b2AbsV(n,box2d.b2DynamicTree.s_abs_v),a=e.maxFraction,h=box2d.b2DynamicTree.s_segmentAABB,l=i.x+a*(o.x-i.x),c=i.y+a*(o.y-i.y),u=(h.lowerBound.x=box2d.b2Min(i.x,l),h.lowerBound.y=box2d.b2Min(i.y,c),h.upperBound.x=box2d.b2Max(i.x,l),h.upperBound.y=box2d.b2Max(i.y,c),box2d.b2DynamicTree.s_stack.Reset());for(u.Push(this.m_root);0<u.GetCount();){var d=u.Pop();if(null!==d&&!1!==box2d.b2TestOverlapAABB(d.aabb,h)){var p=d.aabb.GetCenter(),f=d.aabb.GetExtents();if(!(0<box2d.b2Abs(box2d.b2DotVV(n,box2d.b2SubVV(i,p,box2d.b2Vec2.s_t0)))-box2d.b2DotVV(r,f)))if(d.IsLeaf()){p=box2d.b2DynamicTree.s_subInput,f=(p.p1.Copy(e.p1),p.p2.Copy(e.p2),p.maxFraction=a,t(p,d));if(0===f)return;0<f&&(l=i.x+(a=f)*(o.x-i.x),c=i.y+a*(o.y-i.y),h.lowerBound.x=box2d.b2Min(i.x,l),h.lowerBound.y=box2d.b2Min(i.y,c),h.upperBound.x=box2d.b2Max(i.x,l),h.upperBound.y=box2d.b2Max(i.y,c))}else u.Push(d.child1),u.Push(d.child2)}}}},box2d.b2DynamicTree.prototype.AllocateNode=function(){var t;return this.m_freeList?(t=this.m_freeList,this.m_freeList=t.parent,t.parent=null,t.child1=null,t.child2=null,t.height=0,t.userData=null,t):new box2d.b2TreeNode(box2d.b2DynamicTree.prototype.s_node_id++)},box2d.b2DynamicTree.prototype.s_node_id=0,box2d.b2DynamicTree.prototype.FreeNode=function(t){t.parent=this.m_freeList,t.height=-1,this.m_freeList=t},box2d.b2DynamicTree.prototype.CreateProxy=function(t,e){var i=this.AllocateNode(),o=box2d.b2_aabbExtension,s=box2d.b2_aabbExtension;return i.aabb.lowerBound.x=t.lowerBound.x-o,i.aabb.lowerBound.y=t.lowerBound.y-s,i.aabb.upperBound.x=t.upperBound.x+o,i.aabb.upperBound.y=t.upperBound.y+s,i.userData=e,i.height=0,this.InsertLeaf(i),i},box2d.b2DynamicTree.prototype.DestroyProxy=function(t){box2d.ENABLE_ASSERTS&&box2d.b2Assert(t.IsLeaf()),this.RemoveLeaf(t),this.FreeNode(t)},box2d.b2DynamicTree.prototype.MoveProxy=function(t,e,i){if(box2d.ENABLE_ASSERTS&&box2d.b2Assert(t.IsLeaf()),t.aabb.Contains(e))return!1;this.RemoveLeaf(t);var o=box2d.b2_aabbExtension+box2d.b2_aabbMultiplier*(0<i.x?i.x:-i.x),i=box2d.b2_aabbExtension+box2d.b2_aabbMultiplier*(0<i.y?i.y:-i.y);return t.aabb.lowerBound.x=e.lowerBound.x-o,t.aabb.lowerBound.y=e.lowerBound.y-i,t.aabb.upperBound.x=e.upperBound.x+o,t.aabb.upperBound.y=e.upperBound.y+i,this.InsertLeaf(t),!0},box2d.b2DynamicTree.prototype.InsertLeaf=function(t){if(++this.m_insertionCount,null===this.m_root)this.m_root=t,this.m_root.parent=null;else{for(var e=t.aabb,i=(e.GetCenter(),this.m_root);!1===i.IsLeaf();){var o=i.child1,s=i.child2,n=i.aabb.GetPerimeter(),r=box2d.b2DynamicTree.s_combinedAABB;r.Combine2(i.aabb,e);var a,r=r.GetPerimeter(),h=2*r,r=2*(r-n),n=box2d.b2DynamicTree.s_aabb,l=o.IsLeaf()?(n.Combine2(e,o.aabb),n.GetPerimeter()+r):(n.Combine2(e,o.aabb),a=o.aabb.GetPerimeter(),n.GetPerimeter()-a+r),n=s.IsLeaf()?(n.Combine2(e,s.aabb),n.GetPerimeter()+r):(n.Combine2(e,s.aabb),a=s.aabb.GetPerimeter(),n.GetPerimeter()-a+r);if(h<l&&h<n)break;i=l<n?o:s}var c=i,u=c.parent,d=this.AllocateNode();for(d.parent=u,d.userData=null,d.aabb.Combine2(e,c.aabb),d.height=c.height+1,u?(u.child1===c?u.child1=d:u.child2=d,d.child1=c,d.child2=t,c.parent=d,t.parent=d):(d.child1=c,d.child2=t,c.parent=d,t.parent=d,this.m_root=d),i=t.parent;null!==i;)o=(i=this.Balance(i)).child1,s=i.child2,box2d.ENABLE_ASSERTS&&box2d.b2Assert(null!==o),box2d.ENABLE_ASSERTS&&box2d.b2Assert(null!==s),i.height=1+box2d.b2Max(o.height,s.height),i.aabb.Combine2(o.aabb,s.aabb),i=i.parent}},box2d.b2DynamicTree.prototype.RemoveLeaf=function(t){if(t===this.m_root)this.m_root=null;else{var e=t.parent,i=e.parent,t=e.child1===t?e.child2:e.child1;if(i){i.child1===e?i.child1=t:i.child2=t,t.parent=i,this.FreeNode(e);for(var o=i;o;){var s=(o=this.Balance(o)).child1,n=o.child2;o.aabb.Combine2(s.aabb,n.aabb),o.height=1+box2d.b2Max(s.height,n.height),o=o.parent}}else(this.m_root=t).parent=null,this.FreeNode(e)}},box2d.b2DynamicTree.prototype.Balance=function(t){var e,i,o,s,n;return box2d.ENABLE_ASSERTS&&box2d.b2Assert(null!==t),t.IsLeaf()||t.height<2?t:(e=t.child1,1<(o=(i=t.child2).height-e.height)?(s=i.child1,n=i.child2,i.child1=t,i.parent=t.parent,null!==(t.parent=i).parent?i.parent.child1===t?i.parent.child1=i:(box2d.ENABLE_ASSERTS&&box2d.b2Assert(i.parent.child2===t),i.parent.child2=i):this.m_root=i,s.height>n.height?(i.child2=s,((t.child2=n).parent=t).aabb.Combine2(e.aabb,n.aabb),i.aabb.Combine2(t.aabb,s.aabb),t.height=1+box2d.b2Max(e.height,n.height),i.height=1+box2d.b2Max(t.height,s.height)):(i.child2=n,((t.child2=s).parent=t).aabb.Combine2(e.aabb,s.aabb),i.aabb.Combine2(t.aabb,n.aabb),t.height=1+box2d.b2Max(e.height,s.height),i.height=1+box2d.b2Max(t.height,n.height)),i):o<-1?(s=e.child1,n=e.child2,e.child1=t,e.parent=t.parent,null!==(t.parent=e).parent?e.parent.child1===t?e.parent.child1=e:(box2d.ENABLE_ASSERTS&&box2d.b2Assert(e.parent.child2===t),e.parent.child2=e):this.m_root=e,s.height>n.height?(e.child2=s,((t.child1=n).parent=t).aabb.Combine2(i.aabb,n.aabb),e.aabb.Combine2(t.aabb,s.aabb),t.height=1+box2d.b2Max(i.height,n.height),e.height=1+box2d.b2Max(t.height,s.height)):(e.child2=n,((t.child1=s).parent=t).aabb.Combine2(i.aabb,s.aabb),e.aabb.Combine2(t.aabb,n.aabb),t.height=1+box2d.b2Max(i.height,s.height),e.height=1+box2d.b2Max(t.height,n.height)),e):t)},box2d.b2DynamicTree.prototype.GetHeight=function(){return null===this.m_root?0:this.m_root.height},box2d.b2DynamicTree.prototype.GetAreaRatio=function(){var t,i;return null===this.m_root?0:(t=this.m_root.aabb.GetPerimeter(),(i=function(t){var e;return null===t||t.IsLeaf()?0:(e=t.aabb.GetPerimeter(),(e+=i(t.child1))+i(t.child2))})(this.m_root)/t)},box2d.b2DynamicTree.prototype.ComputeHeightNode=function(t){var e;return t.IsLeaf()?0:(e=this.ComputeHeightNode(t.child1),t=this.ComputeHeightNode(t.child2),1+box2d.b2Max(e,t))},box2d.b2DynamicTree.prototype.ComputeHeight=function(){return this.ComputeHeightNode(this.m_root)},box2d.b2DynamicTree.prototype.ValidateStructure=function(t){var e,i,o;null!==t&&(t===this.m_root&&box2d.ENABLE_ASSERTS&&box2d.b2Assert(null===t.parent),i=(e=t).child1,o=e.child2,e.IsLeaf()?(box2d.ENABLE_ASSERTS&&box2d.b2Assert(null===i),box2d.ENABLE_ASSERTS&&box2d.b2Assert(null===o),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0===e.height)):(box2d.ENABLE_ASSERTS&&box2d.b2Assert(i.parent===t),box2d.ENABLE_ASSERTS&&box2d.b2Assert(o.parent===t),this.ValidateStructure(i),this.ValidateStructure(o)))},box2d.b2DynamicTree.prototype.ValidateMetrics=function(t){var e,i,o,s;null!==t&&(e=(t=t).child1,i=t.child2,t.IsLeaf()?(box2d.ENABLE_ASSERTS&&box2d.b2Assert(null===e),box2d.ENABLE_ASSERTS&&box2d.b2Assert(null===i),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0===t.height)):(o=e.height,s=i.height,o=1+box2d.b2Max(o,s),box2d.ENABLE_ASSERTS&&box2d.b2Assert(t.height===o),(s=box2d.b2DynamicTree.s_aabb).Combine2(e.aabb,i.aabb),box2d.ENABLE_ASSERTS&&box2d.b2Assert(s.lowerBound===t.aabb.lowerBound),box2d.ENABLE_ASSERTS&&box2d.b2Assert(s.upperBound===t.aabb.upperBound),this.ValidateMetrics(e),this.ValidateMetrics(i)))},box2d.b2DynamicTree.prototype.Validate=function(){this.ValidateStructure(this.m_root),this.ValidateMetrics(this.m_root);for(var t=this.m_freeList;null!==t;)t=t.parent,0;box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.GetHeight()===this.ComputeHeight())},box2d.b2DynamicTree.prototype.GetMaxBalance=function(){if(null===(e=this.m_root))return 0;if(e.height<=1)return 0;box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1===e.IsLeaf());var t=e.child1,e=e.child2,e=box2d.b2Abs(e.height-t.height);return box2d.b2Max(0,e)},box2d.b2DynamicTree.prototype.RebuildBottomUp=function(){this.Validate()},box2d.b2DynamicTree.prototype.ShiftOrigin=function(t){function s(t,e){var i,o;null===t||t.height<=1||(box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1===t.IsLeaf()),i=t.child1,o=t.child2,s(i,e),s(o,e),t.aabb.lowerBound.SelfSub(e),t.aabb.upperBound.SelfSub(e))}s(this.m_root,t)},goog.provide("box2d.b2BroadPhase"),goog.require("box2d.b2Settings"),goog.require("box2d.b2DynamicTree"),box2d.b2Pair=function(){},box2d.b2Pair.prototype.proxyA=null,box2d.b2Pair.prototype.proxyB=null,box2d.b2BroadPhase=function(){this.m_tree=new box2d.b2DynamicTree,this.m_moveBuffer=new Array,this.m_pairBuffer=new Array},box2d.b2BroadPhase.prototype.m_tree=null,box2d.b2BroadPhase.prototype.m_proxyCount=0,box2d.b2BroadPhase.prototype.m_moveCount=0,box2d.b2BroadPhase.prototype.m_moveBuffer=null,box2d.b2BroadPhase.prototype.m_pairCount=0,box2d.b2BroadPhase.prototype.m_pairBuffer=null,box2d.b2BroadPhase.prototype.CreateProxy=function(t,e){t=this.m_tree.CreateProxy(t,e);return++this.m_proxyCount,this.BufferMove(t),t},box2d.b2BroadPhase.prototype.DestroyProxy=function(t){this.UnBufferMove(t),--this.m_proxyCount,this.m_tree.DestroyProxy(t)},box2d.b2BroadPhase.prototype.MoveProxy=function(t,e,i){this.m_tree.MoveProxy(t,e,i)&&this.BufferMove(t)},box2d.b2BroadPhase.prototype.TouchProxy=function(t){this.BufferMove(t)},box2d.b2BroadPhase.prototype.GetFatAABB=function(t){return this.m_tree.GetFatAABB(t)},box2d.b2BroadPhase.prototype.GetUserData=function(t){return this.m_tree.GetUserData(t)},box2d.b2BroadPhase.prototype.TestOverlap=function(t,e){t=this.m_tree.GetFatAABB(t),e=this.m_tree.GetFatAABB(e);return box2d.b2TestOverlapAABB(t,e)},box2d.b2BroadPhase.prototype.GetProxyCount=function(){return this.m_proxyCount},box2d.b2BroadPhase.prototype.GetTreeHeight=function(){return this.m_tree.GetHeight()},box2d.b2BroadPhase.prototype.GetTreeBalance=function(){return this.m_tree.GetMaxBalance()},box2d.b2BroadPhase.prototype.GetTreeQuality=function(){return this.m_tree.GetAreaRatio()},box2d.b2BroadPhase.prototype.ShiftOrigin=function(t){this.m_tree.ShiftOrigin(t)},box2d.b2BroadPhase.prototype.UpdatePairs=function(t){for(var e=this.m_pairCount=0;e<this.m_moveCount;++e){var i,o,s=this.m_moveBuffer[e];null!==s&&(o=(i=this).m_tree.GetFatAABB(s),this.m_tree.Query(function(t){var e;return t.m_id!==s.m_id&&(i.m_pairCount===i.m_pairBuffer.length&&(i.m_pairBuffer[i.m_pairCount]=new box2d.b2Pair),e=i.m_pairBuffer[i.m_pairCount],t.m_id<s.m_id?(e.proxyA=t,e.proxyB=s):(e.proxyA=s,e.proxyB=t),++i.m_pairCount),!0},o))}this.m_moveCount=0,this.m_pairBuffer.length=this.m_pairCount,this.m_pairBuffer.sort(box2d.b2PairLessThan);for(e=0;e<this.m_pairCount;){var n=this.m_pairBuffer[e],r=this.m_tree.GetUserData(n.proxyA),a=this.m_tree.GetUserData(n.proxyB);for(t.AddPair(r,a),++e;e<this.m_pairCount;){var h=this.m_pairBuffer[e];if(h.proxyA.m_id!==n.proxyA.m_id||h.proxyB.m_id!==n.proxyB.m_id)break;++e}}},box2d.b2BroadPhase.prototype.Query=function(t,e){this.m_tree.Query(t,e)},box2d.b2BroadPhase.prototype.RayCast=function(t,e){this.m_tree.RayCast(t,e)},box2d.b2BroadPhase.prototype.BufferMove=function(t){this.m_moveBuffer[this.m_moveCount]=t,++this.m_moveCount},box2d.b2BroadPhase.prototype.UnBufferMove=function(t){t=this.m_moveBuffer.indexOf(t);this.m_moveBuffer[t]=null},box2d.b2PairLessThan=function(t,e){return t.proxyA.m_id===e.proxyA.m_id?t.proxyB.m_id-e.proxyB.m_id:t.proxyA.m_id-e.proxyA.m_id},goog.provide("box2d.b2ContactManager"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Math"),goog.require("box2d.b2Collision"),goog.require("box2d.b2BroadPhase"),goog.require("box2d.b2ContactFactory"),box2d.b2ContactManager=function(){this.m_broadPhase=new box2d.b2BroadPhase,this.m_contactFactory=new box2d.b2ContactFactory(this.m_allocator)},box2d.b2ContactManager.prototype.m_broadPhase=null,box2d.b2ContactManager.prototype.m_contactList=null,box2d.b2ContactManager.prototype.m_contactCount=0,box2d.b2ContactManager.prototype.m_contactFilter=box2d.b2ContactFilter.b2_defaultFilter,box2d.b2ContactManager.prototype.m_contactListener=box2d.b2ContactListener.b2_defaultListener,box2d.b2ContactManager.prototype.m_allocator=null,box2d.b2ContactManager.prototype.m_contactFactory=null,box2d.b2ContactManager.prototype.Destroy=function(t){var e=t.GetFixtureA(),i=t.GetFixtureB(),e=e.GetBody(),i=i.GetBody();this.m_contactListener&&t.IsTouching()&&this.m_contactListener.EndContact(t),t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t===this.m_contactList&&(this.m_contactList=t.m_next),t.m_nodeA.prev&&(t.m_nodeA.prev.next=t.m_nodeA.next),t.m_nodeA.next&&(t.m_nodeA.next.prev=t.m_nodeA.prev),t.m_nodeA===e.m_contactList&&(e.m_contactList=t.m_nodeA.next),t.m_nodeB.prev&&(t.m_nodeB.prev.next=t.m_nodeB.next),t.m_nodeB.next&&(t.m_nodeB.next.prev=t.m_nodeB.prev),t.m_nodeB===i.m_contactList&&(i.m_contactList=t.m_nodeB.next),this.m_contactFactory.Destroy(t),--this.m_contactCount},box2d.b2ContactManager.prototype.Collide=function(){for(var t,e=this.m_contactList;e;){var i=e.GetFixtureA(),o=e.GetFixtureB(),s=e.GetChildIndexA(),n=e.GetChildIndexB(),r=i.GetBody(),a=o.GetBody();if(e.m_flags&box2d.b2ContactFlag.e_filterFlag){if(!1===a.ShouldCollide(r)){e=(t=e).m_next,this.Destroy(t);continue}if(this.m_contactFilter&&!1===this.m_contactFilter.ShouldCollide(i,o)){e=(t=e).m_next,this.Destroy(t);continue}e.m_flags&=~box2d.b2ContactFlag.e_filterFlag}var h,r=r.IsAwake()&&r.m_type!==box2d.b2BodyType.b2_staticBody,a=a.IsAwake()&&a.m_type!==box2d.b2BodyType.b2_staticBody;!1!==r||!1!==a?(r=i.m_proxies[s].proxy,a=o.m_proxies[n].proxy,!1!==(h=r&&a?this.m_broadPhase.TestOverlap(r,a):h)?(e.Update(this.m_contactListener),e=e.m_next):(e=(t=e).m_next,this.Destroy(t))):e=e.m_next}},box2d.b2ContactManager.prototype.FindNewContacts=function(){this.m_broadPhase.UpdatePairs(this)},box2d.b2ContactManager.prototype.AddPair=function(t,e){box2d.ENABLE_ASSERTS&&box2d.b2Assert(t instanceof box2d.b2FixtureProxy),box2d.ENABLE_ASSERTS&&box2d.b2Assert(e instanceof box2d.b2FixtureProxy);var i=t.fixture,o=e.fixture,s=t.childIndex,n=e.childIndex,r=i.GetBody(),t=o.GetBody();if(r!==t&&r&&t){for(var a=t.GetContactList();a;){if(a.other===r){var h=a.contact.GetFixtureA(),l=a.contact.GetFixtureB(),c=a.contact.GetChildIndexA(),u=a.contact.GetChildIndexB();if(h===i&&l===o&&c===s&&u===n)return;if(h===o&&l===i&&c===n&&u===s)return}a=a.next}!1===t.ShouldCollide(r)||this.m_contactFilter&&!1===this.m_contactFilter.ShouldCollide(i,o)||null!==(e=this.m_contactFactory.Create(i,s,o,n))&&(i=e.GetFixtureA(),o=e.GetFixtureB(),s=e.GetChildIndexA(),n=e.GetChildIndexB(),r=i.m_body,t=o.m_body,e.m_prev=null,e.m_next=this.m_contactList,null!==this.m_contactList&&(this.m_contactList.m_prev=e),((this.m_contactList=e).m_nodeA.contact=e).m_nodeA.other=t,e.m_nodeA.prev=null,e.m_nodeA.next=r.m_contactList,null!==r.m_contactList&&(r.m_contactList.prev=e.m_nodeA),r.m_contactList=e.m_nodeA,(e.m_nodeB.contact=e).m_nodeB.other=r,e.m_nodeB.prev=null,e.m_nodeB.next=t.m_contactList,null!==t.m_contactList&&(t.m_contactList.prev=e.m_nodeB),t.m_contactList=e.m_nodeB,!1===i.IsSensor()&&!1===o.IsSensor()&&(r.SetAwake(!0),t.SetAwake(!0)),++this.m_contactCount)}},goog.provide("box2d.b2JointFactory"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Math"),goog.require("box2d.b2Joint"),box2d.b2JointFactory.Create=function(t,e){var i=null;switch(t.type){case box2d.b2JointType.e_distanceJoint:i=new box2d.b2DistanceJoint(t instanceof box2d.b2DistanceJointDef?t:null);break;case box2d.b2JointType.e_mouseJoint:i=new box2d.b2MouseJoint(t instanceof box2d.b2MouseJointDef?t:null);break;case box2d.b2JointType.e_prismaticJoint:i=new box2d.b2PrismaticJoint(t instanceof box2d.b2PrismaticJointDef?t:null);break;case box2d.b2JointType.e_revoluteJoint:i=new box2d.b2RevoluteJoint(t instanceof box2d.b2RevoluteJointDef?t:null);break;case box2d.b2JointType.e_pulleyJoint:i=new box2d.b2PulleyJoint(t instanceof box2d.b2PulleyJointDef?t:null);break;case box2d.b2JointType.e_gearJoint:i=new box2d.b2GearJoint(t instanceof box2d.b2GearJointDef?t:null);break;case box2d.b2JointType.e_wheelJoint:i=new box2d.b2WheelJoint(t instanceof box2d.b2WheelJointDef?t:null);break;case box2d.b2JointType.e_weldJoint:i=new box2d.b2WeldJoint(t instanceof box2d.b2WeldJointDef?t:null);break;case box2d.b2JointType.e_frictionJoint:i=new box2d.b2FrictionJoint(t instanceof box2d.b2FrictionJointDef?t:null);break;case box2d.b2JointType.e_ropeJoint:i=new box2d.b2RopeJoint(t instanceof box2d.b2RopeJointDef?t:null);break;case box2d.b2JointType.e_motorJoint:i=new box2d.b2MotorJoint(t instanceof box2d.b2MotorJointDef?t:null);break;case box2d.b2JointType.e_areaJoint:i=new box2d.b2AreaJoint(t instanceof box2d.b2AreaJointDef?t:null);break;default:box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1)}return i},box2d.b2JointFactory.Destroy=function(t,e){},goog.provide("box2d.b2Draw"),goog.require("box2d.b2Settings"),box2d.b2Color=function(t,e,i){this.r=t,this.g=e,this.b=i},box2d.b2Color.prototype.r=.5,box2d.b2Color.prototype.g=.5,box2d.b2Color.prototype.b=.5,box2d.b2Color.prototype.SetRGB=function(t,e,i){return this.r=t,this.g=e,this.b=i,this},box2d.b2Color.prototype.MakeStyleString=function(t){var e=Math.round(Math.max(0,Math.min(255,255*this.r))),i=Math.round(Math.max(0,Math.min(255,255*this.g))),o=Math.round(Math.max(0,Math.min(255,255*this.b))),t=void 0===t?1:Math.max(0,Math.min(1,t));return box2d.b2Color.MakeStyleString(e,i,o,t)},box2d.b2Color.MakeStyleString=function(t,e,i,o){return o<1?"rgba("+t+","+e+","+i+","+o+")":"rgb("+t+","+e+","+i+")"},box2d.b2Color.RED=new box2d.b2Color(1,0,0),box2d.b2Color.GREEN=new box2d.b2Color(0,1,0),box2d.b2Color.BLUE=new box2d.b2Color(0,0,1),box2d.b2DrawFlags={e_none:0,e_shapeBit:1,e_jointBit:2,e_aabbBit:4,e_pairBit:8,e_centerOfMassBit:16,e_controllerBit:32,e_all:63},goog.exportProperty(box2d.b2DrawFlags,"e_none",box2d.b2DrawFlags.e_none),goog.exportProperty(box2d.b2DrawFlags,"e_shapeBit",box2d.b2DrawFlags.e_shapeBit),goog.exportProperty(box2d.b2DrawFlags,"e_jointBit",box2d.b2DrawFlags.e_jointBit),goog.exportProperty(box2d.b2DrawFlags,"e_aabbBit",box2d.b2DrawFlags.e_aabbBit),goog.exportProperty(box2d.b2DrawFlags,"e_pairBit",box2d.b2DrawFlags.e_pairBit),goog.exportProperty(box2d.b2DrawFlags,"e_centerOfMassBit",box2d.b2DrawFlags.e_centerOfMassBit),goog.exportProperty(box2d.b2DrawFlags,"e_controllerBit",box2d.b2DrawFlags.e_controllerBit),goog.exportProperty(box2d.b2DrawFlags,"e_all",box2d.b2DrawFlags.e_all),box2d.b2Draw=function(){},box2d.b2Draw.prototype.m_drawFlags=box2d.b2DrawFlags.e_none,box2d.b2Draw.prototype.SetFlags=function(t){this.m_drawFlags=t},box2d.b2Draw.prototype.GetFlags=function(){return this.m_drawFlags},box2d.b2Draw.prototype.AppendFlags=function(t){this.m_drawFlags|=t},box2d.b2Draw.prototype.ClearFlags=function(t){this.m_drawFlags&=~t},box2d.b2Draw.prototype.PushTransform=function(t){},box2d.b2Draw.prototype.PopTransform=function(t){},box2d.b2Draw.prototype.DrawPolygon=function(t,e,i){},box2d.b2Draw.prototype.DrawSolidPolygon=function(t,e,i){},box2d.b2Draw.prototype.DrawCircle=function(t,e,i){},box2d.b2Draw.prototype.DrawSolidCircle=function(t,e,i,o){},box2d.b2Draw.prototype.DrawSegment=function(t,e,i){},box2d.b2Draw.prototype.DrawTransform=function(t){},goog.provide("box2d.b2Fixture"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Collision"),goog.require("box2d.b2Shape"),box2d.b2Filter=function(){},box2d.b2Filter.prototype.categoryBits=1,box2d.b2Filter.prototype.maskBits=65535,box2d.b2Filter.prototype.groupIndex=0,box2d.b2Filter.prototype.Clone=function(){return(new box2d.b2Filter).Copy(this)},box2d.b2Filter.prototype.Copy=function(t){return box2d.ENABLE_ASSERTS&&box2d.b2Assert(this!==t),this.categoryBits=t.categoryBits,this.maskBits=t.maskBits,this.groupIndex=t.groupIndex,this},box2d.b2FixtureDef=function(){this.filter=new box2d.b2Filter},box2d.b2FixtureDef.prototype.shape=null,box2d.b2FixtureDef.prototype.userData=null,box2d.b2FixtureDef.prototype.friction=.2,box2d.b2FixtureDef.prototype.restitution=0,box2d.b2FixtureDef.prototype.density=0,box2d.b2FixtureDef.prototype.isSensor=!1,box2d.b2FixtureDef.prototype.filter=null,box2d.b2FixtureProxy=function(){this.aabb=new box2d.b2AABB},box2d.b2FixtureProxy.prototype.aabb=null,box2d.b2FixtureProxy.prototype.fixture=null,box2d.b2FixtureProxy.prototype.childIndex=0,box2d.b2FixtureProxy.prototype.proxy=null,box2d.b2FixtureProxy.MakeArray=function(t){return box2d.b2MakeArray(t,function(t){return new box2d.b2FixtureProxy})},box2d.b2Fixture=function(){this.m_proxyCount=0,this.m_filter=new box2d.b2Filter},box2d.b2Fixture.prototype.m_density=0,box2d.b2Fixture.prototype.m_next=null,box2d.b2Fixture.prototype.m_body=null,box2d.b2Fixture.prototype.m_shape=null,box2d.b2Fixture.prototype.m_friction=0,box2d.b2Fixture.prototype.m_restitution=0,box2d.b2Fixture.prototype.m_proxies=null,box2d.b2Fixture.prototype.m_proxyCount=0,box2d.b2Fixture.prototype.m_filter=null,box2d.b2Fixture.prototype.m_isSensor=!1,box2d.b2Fixture.prototype.m_userData=null,box2d.b2Fixture.prototype.GetType=function(){return this.m_shape.GetType()},box2d.b2Fixture.prototype.GetShape=function(){return this.m_shape},box2d.b2Fixture.prototype.IsSensor=function(){return this.m_isSensor},box2d.b2Fixture.prototype.GetFilterData=function(){return this.m_filter},box2d.b2Fixture.prototype.GetUserData=function(){return this.m_userData},box2d.b2Fixture.prototype.SetUserData=function(t){this.m_userData=t},box2d.b2Fixture.prototype.GetBody=function(){return this.m_body},box2d.b2Fixture.prototype.GetNext=function(){return this.m_next},box2d.b2Fixture.prototype.SetDensity=function(t){this.m_density=t},box2d.b2Fixture.prototype.GetDensity=function(){return this.m_density},box2d.b2Fixture.prototype.GetFriction=function(){return this.m_friction},box2d.b2Fixture.prototype.SetFriction=function(t){this.m_friction=t},box2d.b2Fixture.prototype.GetRestitution=function(){return this.m_restitution},box2d.b2Fixture.prototype.SetRestitution=function(t){this.m_restitution=t},box2d.b2Fixture.prototype.TestPoint=function(t){return this.m_shape.TestPoint(this.m_body.GetTransform(),t)},box2d.b2Fixture.prototype.RayCast=function(t,e,i){return this.m_shape.RayCast(t,e,this.m_body.GetTransform(),i)},box2d.b2Fixture.prototype.GetMassData=function(t){return t=t||new box2d.b2MassData,this.m_shape.ComputeMass(t,this.m_density),t},box2d.b2Fixture.prototype.GetAABB=function(t){return box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<=t&&t<this.m_proxyCount),this.m_proxies[t].aabb},box2d.b2Fixture.prototype.Create=function(t,e){this.m_userData=e.userData,this.m_friction=e.friction,this.m_restitution=e.restitution,this.m_body=t,this.m_next=null,this.m_filter.Copy(e.filter),this.m_isSensor=e.isSensor,this.m_shape=e.shape.Clone(),this.m_proxies=box2d.b2FixtureProxy.MakeArray(this.m_shape.GetChildCount()),this.m_proxyCount=0,this.m_density=e.density},box2d.b2Fixture.prototype.Destroy=function(){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0===this.m_proxyCount),this.m_shape=null},box2d.b2Fixture.prototype.CreateProxies=function(t,e){box2d.ENABLE_ASSERTS&&box2d.b2Assert(0===this.m_proxyCount),this.m_proxyCount=this.m_shape.GetChildCount();for(var i=0;i<this.m_proxyCount;++i){var o=this.m_proxies[i];this.m_shape.ComputeAABB(o.aabb,e,i),o.proxy=t.CreateProxy(o.aabb,o),o.fixture=this,o.childIndex=i}},box2d.b2Fixture.prototype.DestroyProxies=function(t){for(var e=0;e<this.m_proxyCount;++e){var i=this.m_proxies[e];t.DestroyProxy(i.proxy),i.proxy=null}this.m_proxyCount=0},box2d.b2Fixture.prototype.Synchronize=function(t,e,i){if(0!==this.m_proxyCount)for(var o=0;o<this.m_proxyCount;++o){var s=this.m_proxies[o],n=box2d.b2Fixture.prototype.Synchronize.s_aabb1,r=box2d.b2Fixture.prototype.Synchronize.s_aabb2,n=(this.m_shape.ComputeAABB(n,e,o),this.m_shape.ComputeAABB(r,i,o),s.aabb.Combine2(n,r),box2d.b2SubVV(i.p,e.p,box2d.b2Fixture.prototype.Synchronize.s_displacement));t.MoveProxy(s.proxy,s.aabb,n)}},box2d.b2Fixture.prototype.Synchronize.s_aabb1=new box2d.b2AABB,box2d.b2Fixture.prototype.Synchronize.s_aabb2=new box2d.b2AABB,box2d.b2Fixture.prototype.Synchronize.s_displacement=new box2d.b2Vec2,box2d.b2Fixture.prototype.SetFilterData=function(t){this.m_filter.Copy(t),this.Refilter()},box2d.b2Fixture.prototype.Refilter=function(){if(!this.m_body){for(var t=this.m_body.GetContactList();t;){var e=t.contact,i=e.GetFixtureA(),o=e.GetFixtureB();i!==this&&o!==this||e.FlagForFiltering(),t=t.next}var s=this.m_body.GetWorld();if(null!==s)for(var n=s.m_contactManager.m_broadPhase,r=0;r<this.m_proxyCount;++r)n.TouchProxy(this.m_proxies[r].proxy)}},box2d.b2Fixture.prototype.SetSensor=function(t){t!==this.m_isSensor&&(this.m_body.SetAwake(!0),this.m_isSensor=t)},box2d.b2Fixture.prototype.Dump=function(t){box2d.DEBUG&&(box2d.b2Log("    /*box2d.b2FixtureDef*/ var fd = new box2d.b2FixtureDef();\n"),box2d.b2Log("    fd.friction = %.15f;\n",this.m_friction),box2d.b2Log("    fd.restitution = %.15f;\n",this.m_restitution),box2d.b2Log("    fd.density = %.15f;\n",this.m_density),box2d.b2Log("    fd.isSensor = %s;\n",this.m_isSensor?"true":"false"),box2d.b2Log("    fd.filter.categoryBits = %d;\n",this.m_filter.categoryBits),box2d.b2Log("    fd.filter.maskBits = %d;\n",this.m_filter.maskBits),box2d.b2Log("    fd.filter.groupIndex = %d;\n",this.m_filter.groupIndex),this.m_shape.Dump(),box2d.b2Log("\n"),box2d.b2Log("    fd.shape = shape;\n"),box2d.b2Log("\n"),box2d.b2Log("    bodies[%d].CreateFixture(fd);\n",t))},goog.provide("box2d.b2Body"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Math"),goog.require("box2d.b2Fixture"),box2d.b2BodyType={b2_unknown:-1,b2_staticBody:0,b2_kinematicBody:1,b2_dynamicBody:2,b2_bulletBody:3},goog.exportProperty(box2d.b2BodyType,"b2_unknown",box2d.b2BodyType.b2_unknown),goog.exportProperty(box2d.b2BodyType,"b2_staticBody",box2d.b2BodyType.b2_staticBody),goog.exportProperty(box2d.b2BodyType,"b2_kinematicBody",box2d.b2BodyType.b2_kinematicBody),goog.exportProperty(box2d.b2BodyType,"b2_dynamicBody",box2d.b2BodyType.b2_dynamicBody),goog.exportProperty(box2d.b2BodyType,"b2_bulletBody",box2d.b2BodyType.b2_bulletBody),box2d.b2BodyDef=function(){this.position=new box2d.b2Vec2(0,0),this.linearVelocity=new box2d.b2Vec2(0,0)},box2d.b2BodyDef.prototype.type=box2d.b2BodyType.b2_staticBody,box2d.b2BodyDef.prototype.position=null,box2d.b2BodyDef.prototype.angle=0,box2d.b2BodyDef.prototype.linearVelocity=null,box2d.b2BodyDef.prototype.angularVelocity=0,box2d.b2BodyDef.prototype.linearDamping=0,box2d.b2BodyDef.prototype.angularDamping=0,box2d.b2BodyDef.prototype.allowSleep=!0,box2d.b2BodyDef.prototype.awake=!0,box2d.b2BodyDef.prototype.fixedRotation=!1,box2d.b2BodyDef.prototype.bullet=!1,box2d.b2BodyDef.prototype.active=!0,box2d.b2BodyDef.prototype.userData=null,box2d.b2BodyDef.prototype.gravityScale=1,box2d.b2BodyFlag={e_none:0,e_islandFlag:1,e_awakeFlag:2,e_autoSleepFlag:4,e_bulletFlag:8,e_fixedRotationFlag:16,e_activeFlag:32,e_toiFlag:64},goog.exportProperty(box2d.b2BodyFlag,"e_none",box2d.b2BodyFlag.e_none),goog.exportProperty(box2d.b2BodyFlag,"e_islandFlag",box2d.b2BodyFlag.e_islandFlag),goog.exportProperty(box2d.b2BodyFlag,"e_awakeFlag",box2d.b2BodyFlag.e_awakeFlag),goog.exportProperty(box2d.b2BodyFlag,"e_autoSleepFlag",box2d.b2BodyFlag.e_autoSleepFlag),goog.exportProperty(box2d.b2BodyFlag,"e_bulletFlag",box2d.b2BodyFlag.e_bulletFlag),goog.exportProperty(box2d.b2BodyFlag,"e_fixedRotationFlag",box2d.b2BodyFlag.e_fixedRotationFlag),goog.exportProperty(box2d.b2BodyFlag,"e_activeFlag",box2d.b2BodyFlag.e_activeFlag),goog.exportProperty(box2d.b2BodyFlag,"e_toiFlag",box2d.b2BodyFlag.e_toiFlag),box2d.b2Body=function(t,e){this.m_xf=new box2d.b2Transform,this.m_out_xf=new box2d.b2Transform,this.m_sweep=new box2d.b2Sweep,this.m_out_sweep=new box2d.b2Sweep,this.m_linearVelocity=new box2d.b2Vec2,this.m_out_linearVelocity=new box2d.b2Vec2,this.m_force=new box2d.b2Vec2,box2d.ENABLE_ASSERTS&&box2d.b2Assert(t.position.IsValid()),box2d.ENABLE_ASSERTS&&box2d.b2Assert(t.linearVelocity.IsValid()),box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(t.angle)),box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(t.angularVelocity)),box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(t.gravityScale)&&0<=t.gravityScale),box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(t.angularDamping)&&0<=t.angularDamping),box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(t.linearDamping)&&0<=t.linearDamping),this.m_flags=box2d.b2BodyFlag.e_none,t.bullet&&(this.m_flags|=box2d.b2BodyFlag.e_bulletFlag),t.fixedRotation&&(this.m_flags|=box2d.b2BodyFlag.e_fixedRotationFlag),t.allowSleep&&(this.m_flags|=box2d.b2BodyFlag.e_autoSleepFlag),t.awake&&(this.m_flags|=box2d.b2BodyFlag.e_awakeFlag),t.active&&(this.m_flags|=box2d.b2BodyFlag.e_activeFlag),this.m_world=e,this.m_xf.p.Copy(t.position),this.m_xf.q.SetAngleRadians(t.angle),this.m_sweep.localCenter.SetZero(),this.m_sweep.c0.Copy(this.m_xf.p),this.m_sweep.c.Copy(this.m_xf.p),this.m_sweep.a0=t.angle,this.m_sweep.a=t.angle,this.m_sweep.alpha0=0,this.m_linearVelocity.Copy(t.linearVelocity),this.m_angularVelocity=t.angularVelocity,this.m_linearDamping=t.linearDamping,this.m_angularDamping=t.angularDamping,this.m_gravityScale=t.gravityScale,this.m_force.SetZero(),this.m_torque=0,this.m_sleepTime=0,this.m_type=t.type,t.type===box2d.b2BodyType.b2_dynamicBody?(this.m_mass=1,this.m_invMass=1):(this.m_mass=0,this.m_invMass=0),this.m_I=0,this.m_invI=0,this.m_userData=t.userData,this.m_fixtureList=null,this.m_fixtureCount=0,this.m_controllerList=null,this.m_controllerCount=0},box2d.b2Body.prototype.m_flags=box2d.b2BodyFlag.e_none,box2d.b2Body.prototype.m_islandIndex=0,box2d.b2Body.prototype.m_world=null,box2d.b2Body.prototype.m_xf=null,box2d.b2Body.prototype.m_out_xf=null,box2d.b2Body.prototype.m_sweep=null,box2d.b2Body.prototype.m_out_sweep=null,box2d.b2Body.prototype.m_jointList=null,box2d.b2Body.prototype.m_contactList=null,box2d.b2Body.prototype.m_prev=null,box2d.b2Body.prototype.m_next=null,box2d.b2Body.prototype.m_linearVelocity=null,box2d.b2Body.prototype.m_out_linearVelocity=null,box2d.b2Body.prototype.m_angularVelocity=0,box2d.b2Body.prototype.m_linearDamping=0,box2d.b2Body.prototype.m_angularDamping=0,box2d.b2Body.prototype.m_gravityScale=1,box2d.b2Body.prototype.m_force=null,box2d.b2Body.prototype.m_torque=0,box2d.b2Body.prototype.m_sleepTime=0,box2d.b2Body.prototype.m_type=box2d.b2BodyType.b2_staticBody,box2d.b2Body.prototype.m_mass=1,box2d.b2Body.prototype.m_invMass=1,box2d.b2Body.prototype.m_I=0,box2d.b2Body.prototype.m_invI=0,box2d.b2Body.prototype.m_userData=null,box2d.b2Body.prototype.m_fixtureList=null,box2d.b2Body.prototype.m_fixtureCount=0,box2d.b2Body.prototype.m_controllerList=null,box2d.b2Body.prototype.m_controllerCount=0,box2d.b2Body.prototype.CreateFixture=function(t){var e;return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1===this.m_world.IsLocked()),!0===this.m_world.IsLocked()?null:((e=new box2d.b2Fixture).Create(this,t),this.m_flags&box2d.b2BodyFlag.e_activeFlag&&(t=this.m_world.m_contactManager.m_broadPhase,e.CreateProxies(t,this.m_xf)),e.m_next=this.m_fixtureList,this.m_fixtureList=e,++this.m_fixtureCount,e.m_body=this,0<e.m_density&&this.ResetMassData(),this.m_world.m_flags|=box2d.b2WorldFlag.e_newFixture,e)},box2d.b2Body.prototype.CreateFixture2=function(t,e){void 0===e&&(e=0);var i=box2d.b2Body.prototype.CreateFixture2.s_def;return i.shape=t,i.density=e,this.CreateFixture(i)},box2d.b2Body.prototype.CreateFixture2.s_def=new box2d.b2FixtureDef,box2d.b2Body.prototype.DestroyFixture=function(t){if(box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1===this.m_world.IsLocked()),!0!==this.m_world.IsLocked()){box2d.ENABLE_ASSERTS&&box2d.b2Assert(t.m_body===this),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_fixtureCount);for(var e=this.m_fixtureList,i=null,o=!1;null!==e;){if(e===t){i?i.m_next=t.m_next:this.m_fixtureList=t.m_next,o=!0;break}e=(i=e).m_next}box2d.ENABLE_ASSERTS&&box2d.b2Assert(o);for(var s,n=this.m_contactList;n;){var r=n.contact,n=n.next,a=r.GetFixtureA(),h=r.GetFixtureB();t!==a&&t!==h||this.m_world.m_contactManager.Destroy(r)}this.m_flags&box2d.b2BodyFlag.e_activeFlag&&(s=this.m_world.m_contactManager.m_broadPhase,t.DestroyProxies(s)),t.Destroy(),t.m_body=null,t.m_next=null,--this.m_fixtureCount,this.ResetMassData()}},box2d.b2Body.prototype.SetTransformVecRadians=function(t,e){this.SetTransformXYRadians(t.x,t.y,e)},box2d.b2Body.prototype.SetTransformXYRadians=function(t,e,i){if(box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1===this.m_world.IsLocked()),!0!==this.m_world.IsLocked()&&(this.m_xf.p.x!==t||this.m_xf.p.y!==e||this.m_xf.q.GetAngleRadians()!==i)){this.m_xf.q.SetAngleRadians(i),this.m_xf.p.SetXY(t,e),box2d.b2MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.a=i,this.m_sweep.c0.Copy(this.m_sweep.c),this.m_sweep.a0=i;for(var o=this.m_world.m_contactManager.m_broadPhase,s=this.m_fixtureList;s;s=s.m_next)s.Synchronize(o,this.m_xf,this.m_xf)}},box2d.b2Body.prototype.SetTransform=function(t){this.SetTransformVecRadians(t.p,t.GetAngleRadians())},box2d.b2Body.prototype.GetTransform=function(t){return(t=t||this.m_out_xf).Copy(this.m_xf)},box2d.b2Body.prototype.GetPosition=function(t){return(t=t||this.m_out_xf.p).Copy(this.m_xf.p)},box2d.b2Body.prototype.SetPosition=function(t){this.SetTransformVecRadians(t,this.GetAngleRadians())},box2d.b2Body.prototype.SetPositionXY=function(t,e){this.SetTransformXYRadians(t,e,this.GetAngleRadians())},box2d.b2Body.prototype.GetAngle=function(){return this.m_sweep.a},box2d.b2Body.prototype.GetAngleRadians=box2d.b2Body.prototype.GetAngle,box2d.b2Body.prototype.GetAngleDegrees=function(){return box2d.b2RadToDeg(this.GetAngle())},box2d.b2Body.prototype.SetAngle=function(t){this.SetTransformVecRadians(this.GetPosition(),t)},box2d.b2Body.prototype.SetAngleRadians=box2d.b2Body.prototype.SetAngle,box2d.b2Body.prototype.SetAngleDegrees=function(t){this.SetAngle(box2d.b2DegToRad(t))},box2d.b2Body.prototype.GetWorldCenter=function(t){return(t=t||this.m_out_sweep.c).Copy(this.m_sweep.c)},box2d.b2Body.prototype.GetLocalCenter=function(t){return(t=t||this.m_out_sweep.localCenter).Copy(this.m_sweep.localCenter)},box2d.b2Body.prototype.SetLinearVelocity=function(t){this.m_type!==box2d.b2BodyType.b2_staticBody&&(0<box2d.b2DotVV(t,t)&&this.SetAwake(!0),this.m_linearVelocity.Copy(t))},box2d.b2Body.prototype.GetLinearVelocity=function(t){return(t=t||this.m_out_linearVelocity).Copy(this.m_linearVelocity)},box2d.b2Body.prototype.SetAngularVelocity=function(t){this.m_type!==box2d.b2BodyType.b2_staticBody&&(0<t*t&&this.SetAwake(!0),this.m_angularVelocity=t)},box2d.b2Body.prototype.GetAngularVelocity=function(){return this.m_angularVelocity},box2d.b2Body.prototype.GetDefinition=function(t){return t.type=this.GetType(),t.allowSleep=(this.m_flags&box2d.b2BodyFlag.e_autoSleepFlag)===box2d.b2BodyFlag.e_autoSleepFlag,t.angle=this.GetAngleRadians(),t.angularDamping=this.m_angularDamping,t.gravityScale=this.m_gravityScale,t.angularVelocity=this.m_angularVelocity,t.fixedRotation=(this.m_flags&box2d.b2BodyFlag.e_fixedRotationFlag)===box2d.b2BodyFlag.e_fixedRotationFlag,t.bullet=(this.m_flags&box2d.b2BodyFlag.e_bulletFlag)===box2d.b2BodyFlag.e_bulletFlag,t.awake=(this.m_flags&box2d.b2BodyFlag.e_awakeFlag)===box2d.b2BodyFlag.e_awakeFlag,t.linearDamping=this.m_linearDamping,t.linearVelocity.Copy(this.GetLinearVelocity()),t.position.Copy(this.GetPosition()),t.userData=this.GetUserData(),t},box2d.b2Body.prototype.ApplyForce=function(t,e,i){i=i||!0,this.m_type===box2d.b2BodyType.b2_dynamicBody&&(i&&0==(this.m_flags&box2d.b2BodyFlag.e_awakeFlag)&&this.SetAwake(!0),this.m_flags&box2d.b2BodyFlag.e_awakeFlag)&&(this.m_force.x+=t.x,this.m_force.y+=t.y,this.m_torque+=(e.x-this.m_sweep.c.x)*t.y-(e.y-this.m_sweep.c.y)*t.x)},box2d.b2Body.prototype.ApplyForceToCenter=function(t,e){e=e||!0,this.m_type===box2d.b2BodyType.b2_dynamicBody&&(e&&0==(this.m_flags&box2d.b2BodyFlag.e_awakeFlag)&&this.SetAwake(!0),this.m_flags&box2d.b2BodyFlag.e_awakeFlag)&&(this.m_force.x+=t.x,this.m_force.y+=t.y)},box2d.b2Body.prototype.ApplyTorque=function(t,e){e=e||!0,this.m_type===box2d.b2BodyType.b2_dynamicBody&&(e&&0==(this.m_flags&box2d.b2BodyFlag.e_awakeFlag)&&this.SetAwake(!0),this.m_flags&box2d.b2BodyFlag.e_awakeFlag)&&(this.m_torque+=t)},box2d.b2Body.prototype.ApplyLinearImpulse=function(t,e,i){i=i||!0,this.m_type===box2d.b2BodyType.b2_dynamicBody&&(i&&0==(this.m_flags&box2d.b2BodyFlag.e_awakeFlag)&&this.SetAwake(!0),this.m_flags&box2d.b2BodyFlag.e_awakeFlag)&&(this.m_linearVelocity.x+=this.m_invMass*t.x,this.m_linearVelocity.y+=this.m_invMass*t.y,this.m_angularVelocity+=this.m_invI*((e.x-this.m_sweep.c.x)*t.y-(e.y-this.m_sweep.c.y)*t.x))},box2d.b2Body.prototype.ApplyAngularImpulse=function(t,e){e=e||!0,this.m_type===box2d.b2BodyType.b2_dynamicBody&&(e&&0==(this.m_flags&box2d.b2BodyFlag.e_awakeFlag)&&this.SetAwake(!0),this.m_flags&box2d.b2BodyFlag.e_awakeFlag)&&(this.m_angularVelocity+=this.m_invI*t)},box2d.b2Body.prototype.GetMass=function(){return this.m_mass},box2d.b2Body.prototype.GetInertia=function(){return this.m_I+this.m_mass*box2d.b2DotVV(this.m_sweep.localCenter,this.m_sweep.localCenter)},box2d.b2Body.prototype.GetMassData=function(t){return t.mass=this.m_mass,t.I=this.m_I+this.m_mass*box2d.b2DotVV(this.m_sweep.localCenter,this.m_sweep.localCenter),t.center.Copy(this.m_sweep.localCenter),t},box2d.b2Body.prototype.SetMassData=function(t){var e;box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1===this.m_world.IsLocked()),!0!==this.m_world.IsLocked()&&this.m_type===box2d.b2BodyType.b2_dynamicBody&&(this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=t.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,0<t.I&&0==(this.m_flags&box2d.b2BodyFlag.e_fixedRotationFlag)&&(this.m_I=t.I-this.m_mass*box2d.b2DotVV(t.center,t.center),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_I),this.m_invI=1/this.m_I),e=box2d.b2Body.prototype.SetMassData.s_oldCenter.Copy(this.m_sweep.c),this.m_sweep.localCenter.Copy(t.center),box2d.b2MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.c0.Copy(this.m_sweep.c),box2d.b2AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,box2d.b2SubVV(this.m_sweep.c,e,box2d.b2Vec2.s_t0),this.m_linearVelocity))},box2d.b2Body.prototype.SetMassData.s_oldCenter=new box2d.b2Vec2,box2d.b2Body.prototype.ResetMassData=function(){if(this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_sweep.localCenter.SetZero(),this.m_type===box2d.b2BodyType.b2_staticBody||this.m_type===box2d.b2BodyType.b2_kinematicBody)this.m_sweep.c0.Copy(this.m_xf.p),this.m_sweep.c.Copy(this.m_xf.p),this.m_sweep.a0=this.m_sweep.a;else{box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.m_type===box2d.b2BodyType.b2_dynamicBody);for(var t,e=box2d.b2Body.prototype.ResetMassData.s_localCenter.SetZero(),i=this.m_fixtureList;i;i=i.m_next)0!==i.m_density&&(t=i.GetMassData(box2d.b2Body.prototype.ResetMassData.s_massData),this.m_mass+=t.mass,e.x+=t.center.x*t.mass,e.y+=t.center.y*t.mass,this.m_I+=t.I);0<this.m_mass?(this.m_invMass=1/this.m_mass,e.x*=this.m_invMass,e.y*=this.m_invMass):(this.m_mass=1,this.m_invMass=1),0<this.m_I&&0==(this.m_flags&box2d.b2BodyFlag.e_fixedRotationFlag)?(this.m_I-=this.m_mass*box2d.b2DotVV(e,e),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_I),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0);var o=box2d.b2Body.prototype.ResetMassData.s_oldCenter.Copy(this.m_sweep.c);this.m_sweep.localCenter.Copy(e),box2d.b2MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.c0.Copy(this.m_sweep.c),box2d.b2AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,box2d.b2SubVV(this.m_sweep.c,o,box2d.b2Vec2.s_t0),this.m_linearVelocity)}},box2d.b2Body.prototype.ResetMassData.s_localCenter=new box2d.b2Vec2,box2d.b2Body.prototype.ResetMassData.s_oldCenter=new box2d.b2Vec2,box2d.b2Body.prototype.ResetMassData.s_massData=new box2d.b2MassData,box2d.b2Body.prototype.GetWorldPoint=function(t,e){return box2d.b2MulXV(this.m_xf,t,e)},box2d.b2Body.prototype.GetWorldVector=function(t,e){return box2d.b2MulRV(this.m_xf.q,t,e)},box2d.b2Body.prototype.GetLocalPoint=function(t,e){return box2d.b2MulTXV(this.m_xf,t,e)},box2d.b2Body.prototype.GetLocalVector=function(t,e){return box2d.b2MulTRV(this.m_xf.q,t,e)},box2d.b2Body.prototype.GetLinearVelocityFromWorldPoint=function(t,e){return box2d.b2AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,box2d.b2SubVV(t,this.m_sweep.c,box2d.b2Vec2.s_t0),e)},box2d.b2Body.prototype.GetLinearVelocityFromLocalPoint=function(t,e){return this.GetLinearVelocityFromWorldPoint(this.GetWorldPoint(t,e),e)},box2d.b2Body.prototype.GetLinearDamping=function(){return this.m_linearDamping},box2d.b2Body.prototype.SetLinearDamping=function(t){this.m_linearDamping=t},box2d.b2Body.prototype.GetAngularDamping=function(){return this.m_angularDamping},box2d.b2Body.prototype.SetAngularDamping=function(t){this.m_angularDamping=t},box2d.b2Body.prototype.GetGravityScale=function(){return this.m_gravityScale},box2d.b2Body.prototype.SetGravityScale=function(t){this.m_gravityScale=t},box2d.b2Body.prototype.SetType=function(t){if(box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1===this.m_world.IsLocked()),!0!==this.m_world.IsLocked()&&this.m_type!==t){this.m_type=t,this.ResetMassData(),this.m_type===box2d.b2BodyType.b2_staticBody&&(this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_sweep.a0=this.m_sweep.a,this.m_sweep.c0.Copy(this.m_sweep.c),this.SynchronizeFixtures()),this.SetAwake(!0),this.m_force.SetZero(),this.m_torque=0;for(var e=this.m_contactList;e;){var i=e,e=e.next;this.m_world.m_contactManager.Destroy(i.contact)}this.m_contactList=null;for(var o=this.m_world.m_contactManager.m_broadPhase,s=this.m_fixtureList;s;s=s.m_next)for(var n=s.m_proxyCount,r=0;r<n;++r)o.TouchProxy(s.m_proxies[r].proxy)}},box2d.b2Body.prototype.GetType=function(){return this.m_type},box2d.b2Body.prototype.SetBullet=function(t){t?this.m_flags|=box2d.b2BodyFlag.e_bulletFlag:this.m_flags&=~box2d.b2BodyFlag.e_bulletFlag},box2d.b2Body.prototype.IsBullet=function(){return(this.m_flags&box2d.b2BodyFlag.e_bulletFlag)===box2d.b2BodyFlag.e_bulletFlag},box2d.b2Body.prototype.SetSleepingAllowed=function(t){t?this.m_flags|=box2d.b2BodyFlag.e_autoSleepFlag:(this.m_flags&=~box2d.b2BodyFlag.e_autoSleepFlag,this.SetAwake(!0))},box2d.b2Body.prototype.IsSleepingAllowed=function(){return(this.m_flags&box2d.b2BodyFlag.e_autoSleepFlag)===box2d.b2BodyFlag.e_autoSleepFlag},box2d.b2Body.prototype.SetAwake=function(t){t?0==(this.m_flags&box2d.b2BodyFlag.e_awakeFlag)&&(this.m_flags|=box2d.b2BodyFlag.e_awakeFlag,this.m_sleepTime=0):(this.m_flags&=~box2d.b2BodyFlag.e_awakeFlag,this.m_sleepTime=0,this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_force.SetZero(),this.m_torque=0)},box2d.b2Body.prototype.IsAwake=function(){return(this.m_flags&box2d.b2BodyFlag.e_awakeFlag)===box2d.b2BodyFlag.e_awakeFlag},box2d.b2Body.prototype.SetActive=function(t){if(box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1===this.m_world.IsLocked()),t!==this.IsActive())if(t){this.m_flags|=box2d.b2BodyFlag.e_activeFlag;for(var e=this.m_world.m_contactManager.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.CreateProxies(e,this.m_xf)}else{this.m_flags&=~box2d.b2BodyFlag.e_activeFlag;for(e=this.m_world.m_contactManager.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.DestroyProxies(e);for(var o=this.m_contactList;o;){var s=o,o=o.next;this.m_world.m_contactManager.Destroy(s.contact)}this.m_contactList=null}},box2d.b2Body.prototype.IsActive=function(){return(this.m_flags&box2d.b2BodyFlag.e_activeFlag)===box2d.b2BodyFlag.e_activeFlag},box2d.b2Body.prototype.SetFixedRotation=function(t){(this.m_flags&box2d.b2BodyFlag.e_fixedRotationFlag)===box2d.b2BodyFlag.e_fixedRotationFlag!==t&&(t?this.m_flags|=box2d.b2BodyFlag.e_fixedRotationFlag:this.m_flags&=~box2d.b2BodyFlag.e_fixedRotationFlag,this.m_angularVelocity=0,this.ResetMassData())},box2d.b2Body.prototype.IsFixedRotation=function(){return(this.m_flags&box2d.b2BodyFlag.e_fixedRotationFlag)===box2d.b2BodyFlag.e_fixedRotationFlag},box2d.b2Body.prototype.GetFixtureList=function(){return this.m_fixtureList},box2d.b2Body.prototype.GetJointList=function(){return this.m_jointList},box2d.b2Body.prototype.GetContactList=function(){return this.m_contactList},box2d.b2Body.prototype.GetNext=function(){return this.m_next},box2d.b2Body.prototype.GetUserData=function(){return this.m_userData},box2d.b2Body.prototype.SetUserData=function(t){this.m_userData=t},box2d.b2Body.prototype.GetWorld=function(){return this.m_world},box2d.b2Body.prototype.SynchronizeFixtures=function(){var t=box2d.b2Body.prototype.SynchronizeFixtures.s_xf1;t.q.SetAngleRadians(this.m_sweep.a0),box2d.b2MulRV(t.q,this.m_sweep.localCenter,t.p),box2d.b2SubVV(this.m_sweep.c0,t.p,t.p);for(var e=this.m_world.m_contactManager.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.Synchronize(e,t,this.m_xf)},box2d.b2Body.prototype.SynchronizeFixtures.s_xf1=new box2d.b2Transform,box2d.b2Body.prototype.SynchronizeTransform=function(){this.m_xf.q.SetAngleRadians(this.m_sweep.a),box2d.b2MulRV(this.m_xf.q,this.m_sweep.localCenter,this.m_xf.p),box2d.b2SubVV(this.m_sweep.c,this.m_xf.p,this.m_xf.p)},box2d.b2Body.prototype.ShouldCollide=function(t){if(this.m_type!==box2d.b2BodyType.b2_dynamicBody&&t.m_type!==box2d.b2BodyType.b2_dynamicBody)return!1;for(var e=this.m_jointList;e;e=e.next)if(e.other===t&&!1===e.joint.m_collideConnected)return!1;return!0},box2d.b2Body.prototype.Advance=function(t){this.m_sweep.Advance(t),this.m_sweep.c.Copy(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.m_xf.q.SetAngleRadians(this.m_sweep.a),box2d.b2MulRV(this.m_xf.q,this.m_sweep.localCenter,this.m_xf.p),box2d.b2SubVV(this.m_sweep.c,this.m_xf.p,this.m_xf.p)},box2d.b2Body.prototype.Dump=function(){if(box2d.DEBUG){var t=this.m_islandIndex,e=(box2d.b2Log("if (true)\n"),box2d.b2Log("{\n"),box2d.b2Log("  /*box2d.b2BodyDef*/ var bd = new box2d.b2BodyDef();\n"),"");switch(this.m_type){case box2d.b2BodyType.b2_staticBody:e="box2d.b2BodyType.b2_staticBody";break;case box2d.b2BodyType.b2_kinematicBody:e="box2d.b2BodyType.b2_kinematicBody";break;case box2d.b2BodyType.b2_dynamicBody:e="box2d.b2BodyType.b2_dynamicBody";break;default:box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1)}box2d.b2Log("  bd.type = %s;\n",e),box2d.b2Log("  bd.position.SetXY(%.15f, %.15f);\n",this.m_xf.p.x,this.m_xf.p.y),box2d.b2Log("  bd.angle = %.15f;\n",this.m_sweep.a),box2d.b2Log("  bd.linearVelocity.SetXY(%.15f, %.15f);\n",this.m_linearVelocity.x,this.m_linearVelocity.y),box2d.b2Log("  bd.angularVelocity = %.15f;\n",this.m_angularVelocity),box2d.b2Log("  bd.linearDamping = %.15f;\n",this.m_linearDamping),box2d.b2Log("  bd.angularDamping = %.15f;\n",this.m_angularDamping),box2d.b2Log("  bd.allowSleep = %s;\n",this.m_flags&box2d.b2BodyFlag.e_autoSleepFlag?"true":"false"),box2d.b2Log("  bd.awake = %s;\n",this.m_flags&box2d.b2BodyFlag.e_awakeFlag?"true":"false"),box2d.b2Log("  bd.fixedRotation = %s;\n",this.m_flags&box2d.b2BodyFlag.e_fixedRotationFlag?"true":"false"),box2d.b2Log("  bd.bullet = %s;\n",this.m_flags&box2d.b2BodyFlag.e_bulletFlag?"true":"false"),box2d.b2Log("  bd.active = %s;\n",this.m_flags&box2d.b2BodyFlag.e_activeFlag?"true":"false"),box2d.b2Log("  bd.gravityScale = %.15f;\n",this.m_gravityScale),box2d.b2Log("\n"),box2d.b2Log("  bodies[%d] = this.m_world.CreateBody(bd);\n",this.m_islandIndex),box2d.b2Log("\n");for(var i=this.m_fixtureList;i;i=i.m_next)box2d.b2Log("  if (true)\n"),box2d.b2Log("  {\n"),i.Dump(t),box2d.b2Log("  }\n");box2d.b2Log("}\n")}},box2d.b2Body.prototype.GetControllerList=function(){return this.m_controllerList},box2d.b2Body.prototype.GetControllerCount=function(){return this.m_controllerCount},goog.provide("box2d.b2World"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Draw"),goog.require("box2d.b2ContactManager"),goog.require("box2d.b2ContactSolver"),goog.require("box2d.b2Island"),goog.require("box2d.b2Body"),goog.require("box2d.b2Math"),goog.require("box2d.b2Collision"),goog.require("box2d.b2TimeStep"),goog.require("box2d.b2WorldCallbacks"),goog.require("box2d.b2JointFactory"),box2d.b2WorldFlag={e_none:0,e_newFixture:1,e_locked:2,e_clearForces:4},goog.exportProperty(box2d.b2WorldFlag,"e_none",box2d.b2WorldFlag.e_none),goog.exportProperty(box2d.b2WorldFlag,"e_newFixture",box2d.b2WorldFlag.e_newFixture),goog.exportProperty(box2d.b2WorldFlag,"e_locked",box2d.b2WorldFlag.e_locked),goog.exportProperty(box2d.b2WorldFlag,"e_clearForces",box2d.b2WorldFlag.e_clearForces),box2d.b2World=function(t){this.m_flags=box2d.b2WorldFlag.e_clearForces,this.m_contactManager=new box2d.b2ContactManager,this.m_gravity=t.Clone(),this.m_out_gravity=new box2d.b2Vec2,this.m_allowSleep=!0,this.m_destructionListener=null,this.m_debugDraw=null,this.m_warmStarting=!0,this.m_continuousPhysics=!0,this.m_subStepping=!1,this.m_stepComplete=!0,this.m_profile=new box2d.b2Profile,this.m_island=new box2d.b2Island,this.s_stack=new Array},box2d.b2World.prototype.m_flags=box2d.b2WorldFlag.e_none,box2d.b2World.prototype.m_contactManager=null,box2d.b2World.prototype.m_bodyList=null,box2d.b2World.prototype.m_jointList=null,box2d.b2World.prototype.m_bodyCount=0,box2d.b2World.prototype.m_jointCount=0,box2d.b2World.prototype.m_gravity=null,box2d.b2World.prototype.m_out_gravity=null,box2d.b2World.prototype.m_allowSleep=!0,box2d.b2World.prototype.m_destructionListener=null,box2d.b2World.prototype.m_debugDraw=null,box2d.b2World.prototype.m_inv_dt0=0,box2d.b2World.prototype.m_warmStarting=!0,box2d.b2World.prototype.m_continuousPhysics=!0,box2d.b2World.prototype.m_subStepping=!1,box2d.b2World.prototype.m_stepComplete=!0,box2d.b2World.prototype.m_profile=null,box2d.b2World.prototype.m_island=null,box2d.b2World.prototype.s_stack=null,box2d.b2World.prototype.m_controllerList=null,box2d.b2World.prototype.m_controllerCount=0,box2d.b2World.prototype.SetAllowSleeping=function(t){if(t!==this.m_allowSleep&&(this.m_allowSleep=t,!1===this.m_allowSleep))for(var e=this.m_bodyList;e;e=e.m_next)e.SetAwake(!0)},box2d.b2World.prototype.GetAllowSleeping=function(){return this.m_allowSleep},box2d.b2World.prototype.SetWarmStarting=function(t){this.m_warmStarting=t},box2d.b2World.prototype.GetWarmStarting=function(){return this.m_warmStarting},box2d.b2World.prototype.SetContinuousPhysics=function(t){this.m_continuousPhysics=t},box2d.b2World.prototype.GetContinuousPhysics=function(){return this.m_continuousPhysics},box2d.b2World.prototype.SetSubStepping=function(t){this.m_subStepping=t},box2d.b2World.prototype.GetSubStepping=function(){return this.m_subStepping},box2d.b2World.prototype.GetBodyList=function(){return this.m_bodyList},box2d.b2World.prototype.GetJointList=function(){return this.m_jointList},box2d.b2World.prototype.GetContactList=function(){return this.m_contactManager.m_contactList},box2d.b2World.prototype.GetBodyCount=function(){return this.m_bodyCount},box2d.b2World.prototype.GetJointCount=function(){return this.m_jointCount},box2d.b2World.prototype.GetContactCount=function(){return this.m_contactManager.m_contactCount},box2d.b2World.prototype.SetGravity=function(t,e){if(e=e||!0,(this.m_gravity.x!==t.x||this.m_gravity.y!==t.y)&&(this.m_gravity.Copy(t),e))for(var i=this.m_bodyList;i;i=i.m_next)i.SetAwake(!0)},box2d.b2World.prototype.GetGravity=function(t){return(t=t||this.m_out_gravity).Copy(this.m_gravity)},box2d.b2World.prototype.IsLocked=function(){return 0<(this.m_flags&box2d.b2WorldFlag.e_locked)},box2d.b2World.prototype.SetAutoClearForces=function(t){t?this.m_flags|=box2d.b2WorldFlag.e_clearForces:this.m_flags&=~box2d.b2WorldFlag.e_clearForces},box2d.b2World.prototype.GetAutoClearForces=function(){return(this.m_flags&box2d.b2WorldFlag.e_clearForces)===box2d.b2WorldFlag.e_clearForces},box2d.b2World.prototype.GetContactManager=function(){return this.m_contactManager},box2d.b2World.prototype.GetProfile=function(){return this.m_profile},box2d.b2World.prototype.SetDestructionListener=function(t){this.m_destructionListener=t},box2d.b2World.prototype.SetContactFilter=function(t){this.m_contactManager.m_contactFilter=t},box2d.b2World.prototype.SetContactListener=function(t){this.m_contactManager.m_contactListener=t},box2d.b2World.prototype.SetDebugDraw=function(t){this.m_debugDraw=t},box2d.b2World.prototype.CreateBody=function(t){return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1===this.IsLocked()),this.IsLocked()?null:((t=new box2d.b2Body(t,this)).m_prev=null,t.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=t),this.m_bodyList=t,++this.m_bodyCount,t)},box2d.b2World.prototype.DestroyBody=function(t){if(box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_bodyCount),box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1===this.IsLocked()),!this.IsLocked()){for(var e=t.m_jointList;e;){var i=e,e=e.next;this.m_destructionListener&&this.m_destructionListener.SayGoodbyeJoint(i.joint),this.DestroyJoint(i.joint),t.m_jointList=e}t.m_jointList=null;for(var o=t.m_controllerList;o;){var s=o,o=o.nextController;s.controller.RemoveBody(t)}for(var n=t.m_contactList;n;){var r=n,n=n.next;this.m_contactManager.Destroy(r.contact)}t.m_contactList=null;for(var a=t.m_fixtureList;a;){var h=a,a=a.m_next;this.m_destructionListener&&this.m_destructionListener.SayGoodbyeFixture(h),h.DestroyProxies(this.m_contactManager.m_broadPhase),h.Destroy(),t.m_fixtureList=a,--t.m_fixtureCount}t.m_fixtureList=null,t.m_fixtureCount=0,t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t===this.m_bodyList&&(this.m_bodyList=t.m_next),--this.m_bodyCount}},box2d.b2World.prototype.CreateJoint=function(t){if(box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1===this.IsLocked()),this.IsLocked())return null;var e=box2d.b2JointFactory.Create(t,null),i=(e.m_prev=null,e.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=e),this.m_jointList=e,++this.m_jointCount,(e.m_edgeA.joint=e).m_edgeA.other=e.m_bodyB,e.m_edgeA.prev=null,e.m_edgeA.next=e.m_bodyA.m_jointList,e.m_bodyA.m_jointList&&(e.m_bodyA.m_jointList.prev=e.m_edgeA),e.m_bodyA.m_jointList=e.m_edgeA,(e.m_edgeB.joint=e).m_edgeB.other=e.m_bodyA,e.m_edgeB.prev=null,e.m_edgeB.next=e.m_bodyB.m_jointList,e.m_bodyB.m_jointList&&(e.m_bodyB.m_jointList.prev=e.m_edgeB),e.m_bodyB.m_jointList=e.m_edgeB,t.bodyA),o=t.bodyB;if(!1===t.collideConnected)for(var s=o.GetContactList();s;)s.other===i&&s.contact.FlagForFiltering(),s=s.next;return e},box2d.b2World.prototype.DestroyJoint=function(t){if(box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1===this.IsLocked()),!this.IsLocked()){var e=t.m_collideConnected,i=(t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t===this.m_jointList&&(this.m_jointList=t.m_next),t.m_bodyA),o=t.m_bodyB;if(i.SetAwake(!0),o.SetAwake(!0),t.m_edgeA.prev&&(t.m_edgeA.prev.next=t.m_edgeA.next),t.m_edgeA.next&&(t.m_edgeA.next.prev=t.m_edgeA.prev),t.m_edgeA===i.m_jointList&&(i.m_jointList=t.m_edgeA.next),t.m_edgeA.prev=null,t.m_edgeA.next=null,t.m_edgeB.prev&&(t.m_edgeB.prev.next=t.m_edgeB.next),t.m_edgeB.next&&(t.m_edgeB.next.prev=t.m_edgeB.prev),t.m_edgeB===o.m_jointList&&(o.m_jointList=t.m_edgeB.next),t.m_edgeB.prev=null,t.m_edgeB.next=null,box2d.b2JointFactory.Destroy(t,null),box2d.ENABLE_ASSERTS&&box2d.b2Assert(0<this.m_jointCount),--this.m_jointCount,!1===e)for(var s=o.GetContactList();s;)s.other===i&&s.contact.FlagForFiltering(),s=s.next}},box2d.b2World.prototype.Solve=function(t){for(var e=this.m_controllerList;e;e=e.m_next)e.Step(t);this.m_profile.solveInit=0,this.m_profile.solveVelocity=0,this.m_profile.solvePosition=0;var i=this.m_island;i.Initialize(this.m_bodyCount,this.m_contactManager.m_contactCount,this.m_jointCount,null,this.m_contactManager.m_contactListener);for(var o=this.m_bodyList;o;o=o.m_next)o.m_flags&=~box2d.b2BodyFlag.e_islandFlag;for(var s=this.m_contactManager.m_contactList;s;s=s.m_next)s.m_flags&=~box2d.b2ContactFlag.e_islandFlag;for(var n=this.m_jointList;n;n=n.m_next)n.m_islandFlag=!1;for(var r=this.m_bodyCount,a=this.s_stack,h=this.m_bodyList;h;h=h.m_next)if(!(h.m_flags&box2d.b2BodyFlag.e_islandFlag)&&!1!==h.IsAwake()&&!1!==h.IsActive()&&h.GetType()!==box2d.b2BodyType.b2_staticBody){i.Clear();var l=0;for((a[l++]=h).m_flags|=box2d.b2BodyFlag.e_islandFlag;0<l;){o=a[--l];if(box2d.ENABLE_ASSERTS&&box2d.b2Assert(!0===o.IsActive()),i.AddBody(o),o.SetAwake(!0),o.GetType()!==box2d.b2BodyType.b2_staticBody){for(var c=o.m_contactList;c;c=c.next){var u,d,p=c.contact;p.m_flags&box2d.b2ContactFlag.e_islandFlag||!1===p.IsEnabled()||!1===p.IsTouching()||(u=p.m_fixtureA.m_isSensor,d=p.m_fixtureB.m_isSensor,u)||d||(i.AddContact(p),p.m_flags|=box2d.b2ContactFlag.e_islandFlag,(f=c.other).m_flags&box2d.b2BodyFlag.e_islandFlag)||(box2d.ENABLE_ASSERTS&&box2d.b2Assert(l<r),(a[l++]=f).m_flags|=box2d.b2BodyFlag.e_islandFlag)}for(var f,b=o.m_jointList;b;b=b.next)!0!==b.joint.m_islandFlag&&!1!==(f=b.other).IsActive()&&(i.AddJoint(b.joint),b.joint.m_islandFlag=!0,f.m_flags&box2d.b2BodyFlag.e_islandFlag||(box2d.ENABLE_ASSERTS&&box2d.b2Assert(l<r),(a[l++]=f).m_flags|=box2d.b2BodyFlag.e_islandFlag))}}var y=new box2d.b2Profile;i.Solve(y,t,this.m_gravity,this.m_allowSleep),this.m_profile.solveInit+=y.solveInit,this.m_profile.solveVelocity+=y.solveVelocity,this.m_profile.solvePosition+=y.solvePosition;for(var m=0;m<i.m_bodyCount;++m)(o=i.m_bodies[m]).GetType()===box2d.b2BodyType.b2_staticBody&&(o.m_flags&=~box2d.b2BodyFlag.e_islandFlag)}for(m=0;m<a.length&&a[m];++m)a[m]=null;for(var x=new box2d.b2Timer,o=this.m_bodyList;o;o=o.m_next)0!=(o.m_flags&box2d.b2BodyFlag.e_islandFlag)&&o.GetType()!==box2d.b2BodyType.b2_staticBody&&o.SynchronizeFixtures();this.m_contactManager.FindNewContacts(),this.m_profile.broadphase=x.GetMilliseconds()},box2d.b2World.prototype.SolveTOI=function(t){var e=this.m_island;if(e.Initialize(2*box2d.b2_maxTOIContacts,box2d.b2_maxTOIContacts,0,null,this.m_contactManager.m_contactListener),this.m_stepComplete){for(var i=this.m_bodyList;i;i=i.m_next)i.m_flags&=~box2d.b2BodyFlag.e_islandFlag,i.m_sweep.alpha0=0;for(var o=this.m_contactManager.m_contactList;o;o=o.m_next)o.m_flags&=~(box2d.b2ContactFlag.e_toiFlag|box2d.b2ContactFlag.e_islandFlag),o.m_toiCount=0,o.m_toi=1}for(;;){for(var s=null,n=1,o=this.m_contactManager.m_contactList;o;o=o.m_next)if(!1!==o.IsEnabled()&&!(o.m_toiCount>box2d.b2_maxSubSteps)){var r=1;if(o.m_flags&box2d.b2ContactFlag.e_toiFlag)r=o.m_toi;else{var a=o.GetFixtureA(),h=o.GetFixtureB();if(a.IsSensor()||h.IsSensor())continue;var l=a.GetBody(),c=h.GetBody(),u=l.m_type,d=c.m_type,p=(box2d.ENABLE_ASSERTS&&box2d.b2Assert(u===box2d.b2BodyType.b2_dynamicBody||d===box2d.b2BodyType.b2_dynamicBody),l.IsAwake()&&u!==box2d.b2BodyType.b2_staticBody),f=c.IsAwake()&&d!==box2d.b2BodyType.b2_staticBody;if(!1===p&&!1===f)continue;p=l.IsBullet()||u!==box2d.b2BodyType.b2_dynamicBody,f=c.IsBullet()||d!==box2d.b2BodyType.b2_dynamicBody;if(!1===p&&!1===f)continue;u=l.m_sweep.alpha0,d=(l.m_sweep.alpha0<c.m_sweep.alpha0?(u=c.m_sweep.alpha0,l.m_sweep.Advance(u)):c.m_sweep.alpha0<l.m_sweep.alpha0&&(u=l.m_sweep.alpha0,c.m_sweep.Advance(u)),box2d.ENABLE_ASSERTS&&box2d.b2Assert(u<1),o.GetChildIndexA()),p=o.GetChildIndexB(),f=box2d.b2World.prototype.SolveTOI.s_toi_input,d=(f.proxyA.SetShape(a.GetShape(),d),f.proxyB.SetShape(h.GetShape(),p),f.sweepA.Copy(l.m_sweep),f.sweepB.Copy(c.m_sweep),f.tMax=1,box2d.b2World.prototype.SolveTOI.s_toi_output),p=(box2d.b2TimeOfImpact(d,f),d.t),r=d.state===box2d.b2TOIOutputState.e_touching?box2d.b2Min(u+(1-u)*p,1):1;o.m_toi=r,o.m_flags|=box2d.b2ContactFlag.e_toiFlag}r<n&&(s=o,n=r)}if(null===s||1-10*box2d.b2_epsilon<n){this.m_stepComplete=!0;break}var a=s.GetFixtureA(),h=s.GetFixtureB(),l=a.GetBody(),c=h.GetBody(),b=box2d.b2World.prototype.SolveTOI.s_backup1.Copy(l.m_sweep),y=box2d.b2World.prototype.SolveTOI.s_backup2.Copy(c.m_sweep);if(l.Advance(n),c.Advance(n),s.Update(this.m_contactManager.m_contactListener),s.m_flags&=~box2d.b2ContactFlag.e_toiFlag,++s.m_toiCount,!1!==s.IsEnabled()&&!1!==s.IsTouching()){l.SetAwake(!0),c.SetAwake(!0),e.Clear(),e.AddBody(l),e.AddBody(c),e.AddContact(s),l.m_flags|=box2d.b2BodyFlag.e_islandFlag,c.m_flags|=box2d.b2BodyFlag.e_islandFlag,s.m_flags|=box2d.b2ContactFlag.e_islandFlag;for(var m=0;m<2;++m)if((A=0===m?l:c).m_type===box2d.b2BodyType.b2_dynamicBody)for(var x=A.m_contactList;x&&e.m_bodyCount!==e.m_bodyCapacity&&e.m_contactCount!==e.m_contactCapacity;x=x.next){var g,v,_,w=x.contact;w.m_flags&box2d.b2ContactFlag.e_islandFlag||(g=x.other).m_type===box2d.b2BodyType.b2_dynamicBody&&!1===A.IsBullet()&&!1===g.IsBullet()||(_=w.m_fixtureA.m_isSensor,v=w.m_fixtureB.m_isSensor,_)||v||(_=box2d.b2World.prototype.SolveTOI.s_backup.Copy(g.m_sweep),0==(g.m_flags&box2d.b2BodyFlag.e_islandFlag)&&g.Advance(n),w.Update(this.m_contactManager.m_contactListener),!1!==w.IsEnabled()&&!1!==w.IsTouching()?(w.m_flags|=box2d.b2ContactFlag.e_islandFlag,e.AddContact(w),g.m_flags&box2d.b2BodyFlag.e_islandFlag||(g.m_flags|=box2d.b2BodyFlag.e_islandFlag,g.m_type!==box2d.b2BodyType.b2_staticBody&&g.SetAwake(!0),e.AddBody(g))):(g.m_sweep.Copy(_),g.SynchronizeTransform()))}var S=box2d.b2World.prototype.SolveTOI.s_subStep;S.dt=(1-n)*t.dt,S.inv_dt=1/S.dt,S.dtRatio=1,S.positionIterations=20,S.velocityIterations=t.velocityIterations,S.warmStarting=!1,e.SolveTOI(S,l.m_islandIndex,c.m_islandIndex);for(var A,m=0;m<e.m_bodyCount;++m)if((A=e.m_bodies[m]).m_flags&=~box2d.b2BodyFlag.e_islandFlag,A.m_type===box2d.b2BodyType.b2_dynamicBody){A.SynchronizeFixtures();for(x=A.m_contactList;x;x=x.next)x.contact.m_flags&=~(box2d.b2ContactFlag.e_toiFlag|box2d.b2ContactFlag.e_islandFlag)}if(this.m_contactManager.FindNewContacts(),this.m_subStepping){this.m_stepComplete=!1;break}}else s.SetEnabled(!1),l.m_sweep.Copy(b),c.m_sweep.Copy(y),l.SynchronizeTransform(),c.SynchronizeTransform()}},box2d.b2World.prototype.SolveTOI.s_subStep=new box2d.b2TimeStep,box2d.b2World.prototype.SolveTOI.s_backup=new box2d.b2Sweep,box2d.b2World.prototype.SolveTOI.s_backup1=new box2d.b2Sweep,box2d.b2World.prototype.SolveTOI.s_backup2=new box2d.b2Sweep,box2d.b2World.prototype.SolveTOI.s_toi_input=new box2d.b2TOIInput,box2d.b2World.prototype.SolveTOI.s_toi_output=new box2d.b2TOIOutput,box2d.b2World.prototype.Step=function(t,e,i){var o=new box2d.b2Timer,s=(this.m_flags&box2d.b2WorldFlag.e_newFixture&&(this.m_contactManager.FindNewContacts(),this.m_flags&=~box2d.b2WorldFlag.e_newFixture),this.m_flags|=box2d.b2WorldFlag.e_locked,box2d.b2World.prototype.Step.s_step),e=(s.dt=t,s.velocityIterations=e,s.positionIterations=i,s.inv_dt=0<t?1/t:0,s.dtRatio=this.m_inv_dt0*t,s.warmStarting=this.m_warmStarting,new box2d.b2Timer);this.m_contactManager.Collide(),this.m_profile.collide=e.GetMilliseconds(),this.m_stepComplete&&0<s.dt&&(e=new box2d.b2Timer,this.Solve(s),this.m_profile.solve=e.GetMilliseconds()),this.m_continuousPhysics&&0<s.dt&&(e=new box2d.b2Timer,this.SolveTOI(s),this.m_profile.solveTOI=e.GetMilliseconds()),0<s.dt&&(this.m_inv_dt0=s.inv_dt),this.m_flags&box2d.b2WorldFlag.e_clearForces&&this.ClearForces(),this.m_flags&=~box2d.b2WorldFlag.e_locked,this.m_profile.step=o.GetMilliseconds()},box2d.b2World.prototype.Step.s_step=new box2d.b2TimeStep,box2d.b2World.prototype.ClearForces=function(){for(var t=this.m_bodyList;t;t=t.m_next)t.m_force.SetZero(),t.m_torque=0,t.parent.update()},box2d.b2World.prototype.QueryAABB=function(i,t){var o=this.m_contactManager.m_broadPhase;o.Query(function(t){var t=o.GetUserData(t),e=(box2d.ENABLE_ASSERTS&&box2d.b2Assert(t instanceof box2d.b2FixtureProxy),t.fixture);return t.childIndex,i instanceof box2d.b2QueryCallback?i.ReportFixture(e):i(e)},t)},box2d.b2World.prototype.QueryShape=function(i,o,s){var n=this.m_contactManager.m_broadPhase,t=box2d.b2World.prototype.QueryShape.s_aabb;o.ComputeAABB(t,s,0),n.Query(function(t){var t=n.GetUserData(t),e=(box2d.ENABLE_ASSERTS&&box2d.b2Assert(t instanceof box2d.b2FixtureProxy),t.fixture);return t.childIndex,!box2d.b2TestOverlapShape(o,0,e.GetShape(),0,s,e.GetBody().GetTransform())||(i instanceof box2d.b2QueryCallback?i.ReportFixture(e):i(e))},t)},box2d.b2World.prototype.QueryShape.s_aabb=new box2d.b2AABB,box2d.b2World.prototype.QueryPoint=function(i,o){var s=this.m_contactManager.m_broadPhase,t=box2d.b2World.prototype.QueryPoint.s_aabb;t.lowerBound.SetXY(o.x-box2d.b2_linearSlop,o.y-box2d.b2_linearSlop),t.upperBound.SetXY(o.x+box2d.b2_linearSlop,o.y+box2d.b2_linearSlop),s.Query(function(t){var t=s.GetUserData(t),e=(box2d.ENABLE_ASSERTS&&box2d.b2Assert(t instanceof box2d.b2FixtureProxy),t.fixture);return t.childIndex,!e.TestPoint(o)||(i instanceof box2d.b2QueryCallback?i.ReportFixture(e):i(e))},t)},box2d.b2World.prototype.QueryPoint.s_aabb=new box2d.b2AABB,box2d.b2World.prototype.RayCast=function(n,r,a){var h=this.m_contactManager.m_broadPhase,t=box2d.b2World.prototype.RayCast.s_input;t.maxFraction=1,t.p1.Copy(r),t.p2.Copy(a),h.RayCast(function(t,e){var i,e=h.GetUserData(e),o=(box2d.ENABLE_ASSERTS&&box2d.b2Assert(e instanceof box2d.b2FixtureProxy),e.fixture),e=e.childIndex,s=box2d.b2World.prototype.RayCast.s_output;return o.RayCast(s,t,e)?(e=s.fraction,(i=box2d.b2World.prototype.RayCast.s_point).SetXY((1-e)*r.x+e*a.x,(1-e)*r.y+e*a.y),n instanceof box2d.b2RayCastCallback?n.ReportFixture(o,i,s.normal,e):n(o,i,s.normal,e)):t.maxFraction},t)},box2d.b2World.prototype.RayCast.s_input=new box2d.b2RayCastInput,box2d.b2World.prototype.RayCast.s_output=new box2d.b2RayCastOutput,box2d.b2World.prototype.RayCast.s_point=new box2d.b2Vec2,box2d.b2World.prototype.RayCastOne=function(t,e){var s=null,n=1;return this.RayCast(function(t,e,i,o){return o<n&&(n=o,s=t),n},t,e),s},box2d.b2World.prototype.RayCastAll=function(t,e,s){return s.length=0,this.RayCast(function(t,e,i,o){return s.push(t),1},t,e),s},box2d.b2World.prototype.DrawShape=function(t,e){var i=t.GetShape();switch(i.m_type){case box2d.b2ShapeType.e_circleShape:var o=i instanceof box2d.b2CircleShape?i:null,s=o.m_p,o=o.m_radius,n=box2d.b2Vec2.UNITX;this.m_debugDraw.DrawSolidCircle(s,o,n,e);break;case box2d.b2ShapeType.e_edgeShape:var s=i instanceof box2d.b2EdgeShape?i:null,r=s.m_vertex1,a=s.m_vertex2;this.m_debugDraw.DrawSegment(r,a,e);break;case box2d.b2ShapeType.e_chainShape:for(var o=i instanceof box2d.b2ChainShape?i:null,h=o.m_count,r=(c=o.m_vertices)[0],l=0;l<h;++l){a=c[l];this.m_debugDraw.DrawSegment(r,a,e),this.m_debugDraw.DrawCircle(a,.05,e),r=a}break;case box2d.b2ShapeType.e_polygonShape:var n=i instanceof box2d.b2PolygonShape?i:null,s=n.m_count,c=n.m_vertices;this.m_debugDraw.DrawSolidPolygon(c,s,e)}},box2d.b2World.prototype.DrawJoint=function(t){var e=t.GetBodyA(),i=t.GetBodyB(),e=e.m_xf,i=i.m_xf,o=e.p,s=i.p,n=t.GetAnchorA(box2d.b2World.prototype.DrawJoint.s_p1),r=t.GetAnchorB(box2d.b2World.prototype.DrawJoint.s_p2),a=box2d.b2World.prototype.DrawJoint.s_color.SetRGB(.5,.8,.8);switch(t.m_type){case box2d.b2JointType.e_distanceJoint:this.m_debugDraw.DrawSegment(n,r,a);break;case box2d.b2JointType.e_pulleyJoint:var h=t instanceof box2d.b2PulleyJoint?t:null,l=h.GetGroundAnchorA(box2d.b2World.prototype.DrawJoint.s_s1),h=h.GetGroundAnchorB(box2d.b2World.prototype.DrawJoint.s_s2);this.m_debugDraw.DrawSegment(l,n,a),this.m_debugDraw.DrawSegment(h,r,a),this.m_debugDraw.DrawSegment(l,h,a);break;case box2d.b2JointType.e_mouseJoint:this.m_debugDraw.DrawSegment(n,r,a);break;default:this.m_debugDraw.DrawSegment(o,n,a),this.m_debugDraw.DrawSegment(n,r,a),this.m_debugDraw.DrawSegment(s,r,a)}},box2d.b2World.prototype.DrawJoint.s_p1=new box2d.b2Vec2,box2d.b2World.prototype.DrawJoint.s_p2=new box2d.b2Vec2,box2d.b2World.prototype.DrawJoint.s_color=new box2d.b2Color(.5,.8,.8),box2d.b2World.prototype.DrawJoint.s_s1=new box2d.b2Vec2,box2d.b2World.prototype.DrawJoint.s_s2=new box2d.b2Vec2,box2d.b2World.prototype.DrawDebugData=function(){if(null!==this.m_debugDraw){var t=this.m_debugDraw.GetFlags(),e=box2d.b2World.prototype.DrawDebugData.s_color.SetRGB(0,0,0);if(t&box2d.b2DrawFlags.e_shapeBit)for(var i=this.m_bodyList;i;i=i.m_next){var o=i.m_xf;this.m_debugDraw.PushTransform(o);for(var s=i.GetFixtureList();s;s=s.m_next)!1===i.IsActive()?e.SetRGB(.5,.5,.3):i.GetType()===box2d.b2BodyType.b2_staticBody?e.SetRGB(.5,.9,.5):i.GetType()===box2d.b2BodyType.b2_kinematicBody?e.SetRGB(.5,.5,.9):!1===i.IsAwake()?e.SetRGB(.6,.6,.6):e.SetRGB(.9,.7,.7),this.DrawShape(s,e);this.m_debugDraw.PopTransform(o)}if(t&box2d.b2DrawFlags.e_jointBit)for(var n=this.m_jointList;n;n=n.m_next)this.DrawJoint(n);if(t&box2d.b2DrawFlags.e_aabbBit){e.SetRGB(.9,.3,.9);for(var r=this.m_contactManager.m_broadPhase,a=box2d.b2World.prototype.DrawDebugData.s_vs,i=this.m_bodyList;i;i=i.m_next)if(!1!==i.IsActive())for(s=i.GetFixtureList();s;s=s.m_next)for(var h=0;h<s.m_proxyCount;++h){var l=s.m_proxies[h],l=r.GetFatAABB(l.proxy);a[0].SetXY(l.lowerBound.x,l.lowerBound.y),a[1].SetXY(l.upperBound.x,l.lowerBound.y),a[2].SetXY(l.upperBound.x,l.upperBound.y),a[3].SetXY(l.lowerBound.x,l.upperBound.y),this.m_debugDraw.DrawPolygon(a,4,e)}}if(t&box2d.b2DrawFlags.e_centerOfMassBit)for(i=this.m_bodyList;i;i=i.m_next)(o=box2d.b2World.prototype.DrawDebugData.s_xf).q.Copy(i.m_xf.q),o.p.Copy(i.GetWorldCenter()),this.m_debugDraw.DrawTransform(o);if(t&box2d.b2DrawFlags.e_controllerBit)for(var c=this.m_controllerList;c;c=c.m_next)c.Draw(this.m_debugDraw)}},box2d.b2World.prototype.DrawDebugData.s_color=new box2d.b2Color(0,0,0),box2d.b2World.prototype.DrawDebugData.s_vs=box2d.b2Vec2.MakeArray(4),box2d.b2World.prototype.DrawDebugData.s_xf=new box2d.b2Transform,box2d.b2World.prototype.SetBroadPhase=function(t){var e=this.m_contactManager.m_broadPhase;this.m_contactManager.m_broadPhase=t;for(var i=this.m_bodyList;i;i=i.m_next)for(var o=i.m_fixtureList;o;o=o.m_next)o.m_proxy=t.CreateProxy(e.GetFatAABB(o.m_proxy),o)},box2d.b2World.prototype.GetProxyCount=function(){return this.m_contactManager.m_broadPhase.GetProxyCount()},box2d.b2World.prototype.GetTreeHeight=function(){return this.m_contactManager.m_broadPhase.GetTreeHeight()},box2d.b2World.prototype.GetTreeBalance=function(){return this.m_contactManager.m_broadPhase.GetTreeBalance()},box2d.b2World.prototype.GetTreeQuality=function(){return this.m_contactManager.m_broadPhase.GetTreeQuality()},box2d.b2World.prototype.ShiftOrigin=function(t){if(box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1===this.IsLocked()),!this.IsLocked()){for(var e=this.m_bodyList;e;e=e.m_next)e.m_xf.p.SelfSub(t),e.m_sweep.c0.SelfSub(t),e.m_sweep.c.SelfSub(t);for(var i=this.m_jointList;i;i=i.m_next)i.ShiftOrigin(t);this.m_contactManager.m_broadPhase.ShiftOrigin(t)}},box2d.b2World.prototype.Dump=function(){if(box2d.DEBUG&&(this.m_flags&box2d.b2WorldFlag.e_locked)!==box2d.b2WorldFlag.e_locked){box2d.b2Log("/** @type {box2d.b2Vec2} */ var g = new box2d.b2Vec2(%.15f, %.15f);\n",this.m_gravity.x,this.m_gravity.y),box2d.b2Log("this.m_world.SetGravity(g);\n"),box2d.b2Log("/** @type {Array.<box2d.b2Body>} */ var bodies = new Array(%d);\n",this.m_bodyCount),box2d.b2Log("/** @type {Array.<box2d.b2Joint>} */ var joints = new Array(%d);\n",this.m_jointCount);for(var t=0,e=this.m_bodyList;e;e=e.m_next)e.m_islandIndex=t,e.Dump(),++t;for(var t=0,i=this.m_jointList;i;i=i.m_next)i.m_index=t,++t;for(i=this.m_jointList;i;i=i.m_next)i.m_type!==box2d.b2JointType.e_gearJoint&&(box2d.b2Log("if (true)\n"),box2d.b2Log("{\n"),i.Dump(),box2d.b2Log("}\n"));for(i=this.m_jointList;i;i=i.m_next)i.m_type===box2d.b2JointType.e_gearJoint&&(box2d.b2Log("if (true)\n"),box2d.b2Log("{\n"),i.Dump(),box2d.b2Log("}\n"))}},box2d.b2World.prototype.AddController=function(t){return box2d.ENABLE_ASSERTS&&box2d.b2Assert(null===t.m_world,"Controller can only be a member of one world"),t.m_world=this,t.m_next=this.m_controllerList,t.m_prev=null,this.m_controllerList&&(this.m_controllerList.m_prev=t),this.m_controllerList=t,++this.m_controllerCount,t},box2d.b2World.prototype.RemoveController=function(t){box2d.ENABLE_ASSERTS&&box2d.b2Assert(t.m_world===this,"Controller is not a member of this world"),t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),this.m_controllerList===t&&(this.m_controllerList=t.m_next),--this.m_controllerCount,t.m_prev=null,t.m_next=null,t.m_world=null},goog.provide("box2d.b2AreaJoint"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Joint"),goog.require("box2d.b2Math"),box2d.b2AreaJointDef=function(){goog.base(this,box2d.b2JointType.e_areaJoint),this.bodies=new Array},goog.inherits(box2d.b2AreaJointDef,box2d.b2JointDef),box2d.b2AreaJointDef.prototype.world=null,box2d.b2AreaJointDef.prototype.bodies=null,box2d.b2AreaJointDef.prototype.frequencyHz=0,box2d.b2AreaJointDef.prototype.dampingRatio=0,box2d.b2AreaJointDef.prototype.AddBody=function(t){this.bodies.push(t),1===this.bodies.length?this.bodyA=t:2===this.bodies.length&&(this.bodyB=t)},box2d.b2AreaJoint=function(t){goog.base(this,t),box2d.ENABLE_ASSERTS&&box2d.b2Assert(3<=t.bodies.length,"You cannot create an area joint with less than three bodies."),this.m_bodies=t.bodies,this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_targetLengths=box2d.b2MakeNumberArray(t.bodies.length),this.m_normals=box2d.b2Vec2.MakeArray(t.bodies.length),this.m_joints=new Array(t.bodies.length),this.m_deltas=box2d.b2Vec2.MakeArray(t.bodies.length),this.m_delta=new box2d.b2Vec2;var e=new box2d.b2DistanceJointDef;e.frequencyHz=t.frequencyHz,e.dampingRatio=t.dampingRatio;for(var i=this.m_targetArea=0,o=this.m_bodies.length;i<o;++i){var s=this.m_bodies[i],n=this.m_bodies[(i+1)%o],r=s.GetWorldCenter(),a=n.GetWorldCenter();this.m_targetLengths[i]=box2d.b2DistanceVV(r,a),this.m_targetArea+=box2d.b2CrossVV(r,a),e.Initialize(s,n,r,a),this.m_joints[i]=t.world.CreateJoint(e)}this.m_targetArea*=.5},goog.inherits(box2d.b2AreaJoint,box2d.b2Joint),box2d.b2AreaJoint.prototype.m_bodies=null,box2d.b2AreaJoint.prototype.m_frequencyHz=0,box2d.b2AreaJoint.prototype.m_dampingRatio=0,box2d.b2AreaJoint.prototype.m_impulse=0,box2d.b2AreaJoint.prototype.m_targetLengths=null,box2d.b2AreaJoint.prototype.m_targetArea=0,box2d.b2AreaJoint.prototype.m_normals=null,box2d.b2AreaJoint.prototype.m_joints=null,box2d.b2AreaJoint.prototype.m_deltas=null,box2d.b2AreaJoint.prototype.m_delta=null,box2d.b2AreaJoint.prototype.GetAnchorA=function(t){return t.SetZero()},box2d.b2AreaJoint.prototype.GetAnchorB=function(t){return t.SetZero()},box2d.b2AreaJoint.prototype.GetReactionForce=function(t,e){return e.SetZero()},box2d.b2AreaJoint.prototype.GetReactionTorque=function(t){return 0},box2d.b2AreaJoint.prototype.SetFrequency=function(t){this.m_frequencyHz=t;for(var e=0,i=this.m_joints.length;e<i;++e)this.m_joints[e].SetFrequency(t)},box2d.b2AreaJoint.prototype.GetFrequency=function(){return this.m_frequencyHz},box2d.b2AreaJoint.prototype.SetDampingRatio=function(t){this.m_dampingRatio=t;for(var e=0,i=this.m_joints.length;e<i;++e)this.m_joints[e].SetDampingRatio(t)},box2d.b2AreaJoint.prototype.GetDampingRatio=function(){return this.m_dampingRatio},box2d.b2AreaJoint.prototype.Dump=function(){box2d.DEBUG&&box2d.b2Log("Area joint dumping is not supported.\n")},box2d.b2AreaJoint.prototype.InitVelocityConstraints=function(t){for(var e=0,i=this.m_bodies.length;e<i;++e){var o=this.m_bodies[(e+i-1)%i],s=this.m_bodies[(e+1)%i],o=t.positions[o.m_islandIndex].c,s=t.positions[s.m_islandIndex].c,n=this.m_deltas[e];box2d.b2SubVV(s,o,n)}if(t.step.warmStarting){this.m_impulse*=t.step.dtRatio;for(e=0,i=this.m_bodies.length;e<i;++e){var r=this.m_bodies[e],a=t.velocities[r.m_islandIndex].v,n=this.m_deltas[e];a.x+=r.m_invMass*n.y*.5*this.m_impulse,a.y+=r.m_invMass*-n.x*.5*this.m_impulse}}else this.m_impulse=0},box2d.b2AreaJoint.prototype.SolveVelocityConstraints=function(t){for(var e=0,i=0,o=0,s=this.m_bodies.length;o<s;++o){var n=this.m_bodies[o],r=t.velocities[n.m_islandIndex].v;e+=(h=this.m_deltas[o]).GetLengthSquared()/n.GetMass(),i+=box2d.b2CrossVV(r,h)}var a=-2*i/e;this.m_impulse+=a;for(o=0,s=this.m_bodies.length;o<s;++o){var n=this.m_bodies[o],r=t.velocities[n.m_islandIndex].v,h=this.m_deltas[o];r.x+=n.m_invMass*h.y*.5*a,r.y+=n.m_invMass*-h.x*.5*a}},box2d.b2AreaJoint.prototype.SolvePositionConstraints=function(t){for(var e=0,i=0,o=0,s=this.m_bodies.length;o<s;++o){var n=this.m_bodies[o],r=this.m_bodies[(o+1)%s],a=t.positions[n.m_islandIndex].c,r=t.positions[r.m_islandIndex].c,h=(u=box2d.b2SubVV(r,a,this.m_delta)).GetLength();h<box2d.b2_epsilon&&(h=1),this.m_normals[o].x=u.y/h,this.m_normals[o].y=-u.x/h,e+=h,i+=box2d.b2CrossVV(a,r)}for(var l=.5*(this.m_targetArea-(i*=.5))/e,c=!0,o=0,s=this.m_bodies.length;o<s;++o){var u,n=this.m_bodies[o],a=t.positions[n.m_islandIndex].c,d=((u=box2d.b2AddVV(this.m_normals[o],this.m_normals[(o+1)%s],this.m_delta)).SelfMul(l),u.GetLengthSquared());d>box2d.b2Sq(box2d.b2_maxLinearCorrection)&&u.SelfMul(box2d.b2_maxLinearCorrection/box2d.b2Sqrt(d)),d>box2d.b2Sq(box2d.b2_linearSlop)&&(c=!1),a.x+=u.x,a.y+=u.y}return c},goog.provide("box2d.b2BuoyancyController"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Controller"),goog.require("box2d.b2Math"),goog.require("box2d.b2WorldCallbacks"),box2d.b2BuoyancyController=function(){goog.base(this),this.normal=new box2d.b2Vec2(0,1),this.velocity=new box2d.b2Vec2(0,0),this.gravity=new box2d.b2Vec2(0,0)},goog.inherits(box2d.b2BuoyancyController,box2d.b2Controller),box2d.b2BuoyancyController.prototype.normal=null,box2d.b2BuoyancyController.prototype.offset=0,box2d.b2BuoyancyController.prototype.density=0,box2d.b2BuoyancyController.prototype.velocity=null,box2d.b2BuoyancyController.prototype.linearDrag=0,box2d.b2BuoyancyController.prototype.angularDrag=0,box2d.b2BuoyancyController.prototype.useDensity=!1,box2d.b2BuoyancyController.prototype.useWorldGravity=!0,box2d.b2BuoyancyController.prototype.gravity=null,box2d.b2BuoyancyController.prototype.Step=function(t){if(this.m_bodyList){this.useWorldGravity&&this.gravity.Copy(this.GetWorld().GetGravity());for(var e=this.m_bodyList;e;e=e.nextBody){var i=e.body;if(!1!==i.IsAwake()){for(var o,s=new box2d.b2Vec2,n=new box2d.b2Vec2,r=0,a=0,h=i.GetFixtureList();h;h=h.m_next){var l,c=new box2d.b2Vec2,u=h.GetShape().ComputeSubmergedArea(this.normal,this.offset,i.GetTransform(),c);r+=u,s.x+=u*c.x,s.y+=u*c.y;a+=u*(l=this.useDensity?h.GetDensity():1),n.x+=u*c.x*l,n.y+=u*c.y*l}s.x/=r,s.y/=r,n.x/=a,n.y/=a,r<box2d.b2_epsilon||((o=box2d.b2NegV(this.gravity,new box2d.b2Vec2)).SelfMul(this.density*r),i.ApplyForce(o,n),(o=i.GetLinearVelocityFromWorldPoint(s,new box2d.b2Vec2)).SelfSub(this.velocity),o.SelfMul(-this.linearDrag*r),i.ApplyForce(o,s),i.ApplyTorque(-i.GetInertia()/i.GetMass()*r*i.GetAngularVelocity()*this.angularDrag))}}}},box2d.b2BuoyancyController.prototype.Draw=function(t){var e=new box2d.b2Vec2,i=new box2d.b2Vec2,o=(e.x=this.normal.x*this.offset+100*this.normal.y,e.y=this.normal.y*this.offset-100*this.normal.x,i.x=this.normal.x*this.offset-100*this.normal.y,i.y=this.normal.y*this.offset+100*this.normal.x,new box2d.b2Color(0,0,.8));t.DrawSegment(e,i,o)},goog.provide("box2d.b2TensorDampingController"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Controller"),goog.require("box2d.b2Math"),box2d.b2TensorDampingController=function(){goog.base(this),this.T=new box2d.b2Mat22,this.maxTimestep=0},goog.inherits(box2d.b2TensorDampingController,box2d.b2Controller),box2d.b2TensorDampingController.prototype.T=new box2d.b2Mat22,box2d.b2TensorDampingController.prototype.maxTimestep=0,box2d.b2TensorDampingController.prototype.Step=function(t){var e=t.dt;if(!(e<=box2d.b2_epsilon)){e>this.maxTimestep&&0<this.maxTimestep&&(e=this.maxTimestep);for(var i=this.m_bodyList;i;i=i.nextBody){var o,s=i.body;s.IsAwake()&&(o=s.GetWorldVector(box2d.b2MulMV(this.T,s.GetLocalVector(s.GetLinearVelocity(),box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t1),box2d.b2TensorDampingController.prototype.Step.s_damping),s.SetLinearVelocity(box2d.b2AddVV(s.GetLinearVelocity(),box2d.b2MulSV(e,o,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t1)))}}},box2d.b2TensorDampingController.prototype.Step.s_damping=new box2d.b2Vec2,box2d.b2TensorDampingController.prototype.SetAxisAligned=function(t,e){this.T.ex.x=-t,this.T.ex.y=0,this.T.ey.x=0,this.T.ey.y=-e,this.maxTimestep=0<t||0<e?1/box2d.b2Max(t,e):0},goog.provide("box2d.b2DistanceJoint"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Joint"),goog.require("box2d.b2Math"),box2d.b2DistanceJointDef=function(){goog.base(this,box2d.b2JointType.e_distanceJoint),this.localAnchorA=new box2d.b2Vec2,this.localAnchorB=new box2d.b2Vec2},goog.inherits(box2d.b2DistanceJointDef,box2d.b2JointDef),box2d.b2DistanceJointDef.prototype.localAnchorA=null,box2d.b2DistanceJointDef.prototype.localAnchorB=null,box2d.b2DistanceJointDef.prototype.length=1,box2d.b2DistanceJointDef.prototype.frequencyHz=0,box2d.b2DistanceJointDef.prototype.dampingRatio=0,box2d.b2DistanceJointDef.prototype.Initialize=function(t,e,i,o){this.bodyA=t,this.bodyB=e,this.bodyA.GetLocalPoint(i,this.localAnchorA),this.bodyB.GetLocalPoint(o,this.localAnchorB),this.length=box2d.b2DistanceVV(i,o),this.frequencyHz=0,this.dampingRatio=0},box2d.b2DistanceJoint=function(t){goog.base(this,t),this.m_u=new box2d.b2Vec2,this.m_rA=new box2d.b2Vec2,this.m_rB=new box2d.b2Vec2,this.m_localCenterA=new box2d.b2Vec2,this.m_localCenterB=new box2d.b2Vec2,this.m_qA=new box2d.b2Rot,this.m_qB=new box2d.b2Rot,this.m_lalcA=new box2d.b2Vec2,this.m_lalcB=new box2d.b2Vec2,this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_localAnchorA=t.localAnchorA.Clone(),this.m_localAnchorB=t.localAnchorB.Clone(),this.m_length=t.length},goog.inherits(box2d.b2DistanceJoint,box2d.b2Joint),box2d.b2DistanceJoint.prototype.m_frequencyHz=0,box2d.b2DistanceJoint.prototype.m_dampingRatio=0,box2d.b2DistanceJoint.prototype.m_bias=0,box2d.b2DistanceJoint.prototype.m_localAnchorA=null,box2d.b2DistanceJoint.prototype.m_localAnchorB=null,box2d.b2DistanceJoint.prototype.m_gamma=0,box2d.b2DistanceJoint.prototype.m_impulse=0,box2d.b2DistanceJoint.prototype.m_length=0,box2d.b2DistanceJoint.prototype.m_indexA=0,box2d.b2DistanceJoint.prototype.m_indexB=0,box2d.b2DistanceJoint.prototype.m_u=null,box2d.b2DistanceJoint.prototype.m_rA=null,box2d.b2DistanceJoint.prototype.m_rB=null,box2d.b2DistanceJoint.prototype.m_localCenterA=null,box2d.b2DistanceJoint.prototype.m_localCenterB=null,box2d.b2DistanceJoint.prototype.m_invMassA=0,box2d.b2DistanceJoint.prototype.m_invMassB=0,box2d.b2DistanceJoint.prototype.m_invIA=0,box2d.b2DistanceJoint.prototype.m_invIB=0,box2d.b2DistanceJoint.prototype.m_mass=0,box2d.b2DistanceJoint.prototype.m_qA=null,box2d.b2DistanceJoint.prototype.m_qB=null,box2d.b2DistanceJoint.prototype.m_lalcA=null,box2d.b2DistanceJoint.prototype.m_lalcB=null,box2d.b2DistanceJoint.prototype.GetAnchorA=function(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)},box2d.b2DistanceJoint.prototype.GetAnchorB=function(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)},box2d.b2DistanceJoint.prototype.GetReactionForce=function(t,e){return e.SetXY(t*this.m_impulse*this.m_u.x,t*this.m_impulse*this.m_u.y)},box2d.b2DistanceJoint.prototype.GetReactionTorque=function(t){return 0},box2d.b2DistanceJoint.prototype.GetLocalAnchorA=function(t){return t.Copy(this.m_localAnchorA)},box2d.b2DistanceJoint.prototype.GetLocalAnchorB=function(t){return t.Copy(this.m_localAnchorB)},box2d.b2DistanceJoint.prototype.SetLength=function(t){this.m_length=t},box2d.b2DistanceJoint.prototype.GetLength=function(){return this.m_length},box2d.b2DistanceJoint.prototype.SetFrequency=function(t){this.m_frequencyHz=t},box2d.b2DistanceJoint.prototype.GetFrequency=function(){return this.m_frequencyHz},box2d.b2DistanceJoint.prototype.SetDampingRatio=function(t){this.m_dampingRatio=t},box2d.b2DistanceJoint.prototype.GetDampingRatio=function(){return this.m_dampingRatio},box2d.b2DistanceJoint.prototype.Dump=function(){var t,e;box2d.DEBUG&&(t=this.m_bodyA.m_islandIndex,e=this.m_bodyB.m_islandIndex,box2d.b2Log("  /*box2d.b2DistanceJointDef*/ var jd = new box2d.b2DistanceJointDef();\n"),box2d.b2Log("  jd.bodyA = bodies[%d];\n",t),box2d.b2Log("  jd.bodyB = bodies[%d];\n",e),box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),box2d.b2Log("  jd.length = %.15f;\n",this.m_length),box2d.b2Log("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz),box2d.b2Log("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio),box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index))},box2d.b2DistanceJoint.prototype.InitVelocityConstraints=function(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e,i=t.positions[this.m_indexA].c,o=t.positions[this.m_indexA].a,s=t.velocities[this.m_indexA].v,n=t.velocities[this.m_indexA].w,r=t.positions[this.m_indexB].c,a=t.positions[this.m_indexB].a,h=t.velocities[this.m_indexB].v,l=t.velocities[this.m_indexB].w,o=this.m_qA.SetAngleRadians(o),a=this.m_qB.SetAngleRadians(a),o=(box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),box2d.b2MulRV(o,this.m_lalcA,this.m_rA),box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),box2d.b2MulRV(a,this.m_lalcB,this.m_rB),this.m_u.x=r.x+this.m_rB.x-i.x-this.m_rA.x,this.m_u.y=r.y+this.m_rB.y-i.y-this.m_rA.y,this.m_u.GetLength()),a=(o>box2d.b2_linearSlop?this.m_u.SelfMul(1/o):this.m_u.SetZero(),box2d.b2CrossVV(this.m_rA,this.m_u)),r=box2d.b2CrossVV(this.m_rB,this.m_u),i=this.m_invMassA+this.m_invIA*a*a+this.m_invMassB+this.m_invIB*r*r;this.m_mass=0!==i?1/i:0,0<this.m_frequencyHz?(a=o-this.m_length,r=2*box2d.b2_pi*this.m_frequencyHz,o=2*this.m_mass*this.m_dampingRatio*r,r=this.m_mass*r*r,e=t.step.dt,this.m_gamma=e*(o+e*r),this.m_gamma=0!==this.m_gamma?1/this.m_gamma:0,this.m_bias=a*e*r*this.m_gamma,i+=this.m_gamma,this.m_mass=0!==i?1/i:0):(this.m_gamma=0,this.m_bias=0),t.step.warmStarting?(this.m_impulse*=t.step.dtRatio,o=box2d.b2MulSV(this.m_impulse,this.m_u,box2d.b2DistanceJoint.prototype.InitVelocityConstraints.s_P),s.SelfMulSub(this.m_invMassA,o),n-=this.m_invIA*box2d.b2CrossVV(this.m_rA,o),h.SelfMulAdd(this.m_invMassB,o),l+=this.m_invIB*box2d.b2CrossVV(this.m_rB,o)):this.m_impulse=0,t.velocities[this.m_indexA].w=n,t.velocities[this.m_indexB].w=l},box2d.b2DistanceJoint.prototype.InitVelocityConstraints.s_P=new box2d.b2Vec2,box2d.b2DistanceJoint.prototype.SolveVelocityConstraints=function(t){var e=t.velocities[this.m_indexA].v,i=t.velocities[this.m_indexA].w,o=t.velocities[this.m_indexB].v,s=t.velocities[this.m_indexB].w,n=box2d.b2AddVCrossSV(e,i,this.m_rA,box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_vpA),r=box2d.b2AddVCrossSV(o,s,this.m_rB,box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_vpB),r=box2d.b2DotVV(this.m_u,box2d.b2SubVV(r,n,box2d.b2Vec2.s_t0)),n=-this.m_mass*(r+this.m_bias+this.m_gamma*this.m_impulse),r=(this.m_impulse+=n,box2d.b2MulSV(n,this.m_u,box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_P));e.SelfMulSub(this.m_invMassA,r),i-=this.m_invIA*box2d.b2CrossVV(this.m_rA,r),o.SelfMulAdd(this.m_invMassB,r),s+=this.m_invIB*box2d.b2CrossVV(this.m_rB,r),t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=s},box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_vpA=new box2d.b2Vec2,box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_vpB=new box2d.b2Vec2,box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2,box2d.b2DistanceJoint.prototype.SolvePositionConstraints=function(t){if(0<this.m_frequencyHz)return!0;var e=t.positions[this.m_indexA].c,i=t.positions[this.m_indexA].a,o=t.positions[this.m_indexB].c,s=t.positions[this.m_indexB].a,n=(this.m_qA.SetAngleRadians(i),this.m_qB.SetAngleRadians(s),box2d.b2MulRV(this.m_qA,this.m_lalcA,this.m_rA)),r=box2d.b2MulRV(this.m_qB,this.m_lalcB,this.m_rB),a=this.m_u;a.x=o.x+r.x-e.x-n.x,a.y=o.y+r.y-e.y-n.y;var h=this.m_u.Normalize()-this.m_length,h=box2d.b2Clamp(h,-box2d.b2_maxLinearCorrection,box2d.b2_maxLinearCorrection),l=-this.m_mass*h,l=box2d.b2MulSV(l,a,box2d.b2DistanceJoint.prototype.SolvePositionConstraints.s_P);return e.SelfMulSub(this.m_invMassA,l),i-=this.m_invIA*box2d.b2CrossVV(n,l),o.SelfMulAdd(this.m_invMassB,l),s+=this.m_invIB*box2d.b2CrossVV(r,l),t.positions[this.m_indexA].a=i,t.positions[this.m_indexB].a=s,box2d.b2Abs(h)<box2d.b2_linearSlop},box2d.b2DistanceJoint.prototype.SolvePositionConstraints.s_P=new box2d.b2Vec2,goog.provide("box2d.b2FrictionJoint"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Joint"),goog.require("box2d.b2Math"),box2d.b2FrictionJointDef=function(){goog.base(this,box2d.b2JointType.e_frictionJoint),this.localAnchorA=new box2d.b2Vec2,this.localAnchorB=new box2d.b2Vec2},goog.inherits(box2d.b2FrictionJointDef,box2d.b2JointDef),box2d.b2FrictionJointDef.prototype.localAnchorA=null,box2d.b2FrictionJointDef.prototype.localAnchorB=null,box2d.b2FrictionJointDef.prototype.maxForce=0,box2d.b2FrictionJointDef.prototype.maxTorque=0,box2d.b2FrictionJointDef.prototype.Initialize=function(t,e,i){this.bodyA=t,this.bodyB=e,this.bodyA.GetLocalPoint(i,this.localAnchorA),this.bodyB.GetLocalPoint(i,this.localAnchorB)},box2d.b2FrictionJoint=function(t){goog.base(this,t),this.m_localAnchorA=t.localAnchorA.Clone(),this.m_localAnchorB=t.localAnchorB.Clone(),this.m_linearImpulse=(new box2d.b2Vec2).SetZero(),this.m_maxForce=t.maxForce,this.m_maxTorque=t.maxTorque,this.m_rA=new box2d.b2Vec2,this.m_rB=new box2d.b2Vec2,this.m_localCenterA=new box2d.b2Vec2,this.m_localCenterB=new box2d.b2Vec2,this.m_linearMass=(new box2d.b2Mat22).SetZero(),this.m_qA=new box2d.b2Rot,this.m_qB=new box2d.b2Rot,this.m_lalcA=new box2d.b2Vec2,this.m_lalcB=new box2d.b2Vec2,this.m_K=new box2d.b2Mat22},goog.inherits(box2d.b2FrictionJoint,box2d.b2Joint),box2d.b2FrictionJoint.prototype.m_localAnchorA=null,box2d.b2FrictionJoint.prototype.m_localAnchorB=null,box2d.b2FrictionJoint.prototype.m_linearImpulse=null,box2d.b2FrictionJoint.prototype.m_angularImpulse=0,box2d.b2FrictionJoint.prototype.m_maxForce=0,box2d.b2FrictionJoint.prototype.m_maxTorque=0,box2d.b2FrictionJoint.prototype.m_indexA=0,box2d.b2FrictionJoint.prototype.m_indexB=0,box2d.b2FrictionJoint.prototype.m_rA=null,box2d.b2FrictionJoint.prototype.m_rB=null,box2d.b2FrictionJoint.prototype.m_localCenterA=null,box2d.b2FrictionJoint.prototype.m_localCenterB=null,box2d.b2FrictionJoint.prototype.m_invMassA=0,box2d.b2FrictionJoint.prototype.m_invMassB=0,box2d.b2FrictionJoint.prototype.m_invIA=0,box2d.b2FrictionJoint.prototype.m_invIB=0,box2d.b2FrictionJoint.prototype.m_linearMass=null,box2d.b2FrictionJoint.prototype.m_angularMass=0,box2d.b2FrictionJoint.prototype.m_qA=null,box2d.b2FrictionJoint.prototype.m_qB=null,box2d.b2FrictionJoint.prototype.m_lalcA=null,box2d.b2FrictionJoint.prototype.m_lalcB=null,box2d.b2FrictionJoint.prototype.m_K=null,box2d.b2FrictionJoint.prototype.InitVelocityConstraints=function(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=t.positions[this.m_indexA].a,i=t.velocities[this.m_indexA].v,o=t.velocities[this.m_indexA].w,s=t.positions[this.m_indexB].a,n=t.velocities[this.m_indexB].v,r=t.velocities[this.m_indexB].w,e=this.m_qA.SetAngleRadians(e),s=this.m_qB.SetAngleRadians(s),e=(box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),box2d.b2MulRV(e,this.m_lalcA,this.m_rA)),s=(box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),box2d.b2MulRV(s,this.m_lalcB,this.m_rB)),a=this.m_invMassA,h=this.m_invMassB,l=this.m_invIA,c=this.m_invIB,u=this.m_K;u.ex.x=a+h+l*e.y*e.y+c*s.y*s.y,u.ex.y=-l*e.x*e.y-c*s.x*s.y,u.ey.x=u.ex.y,u.ey.y=a+h+l*e.x*e.x+c*s.x*s.x,u.GetInverse(this.m_linearMass),this.m_angularMass=l+c,0<this.m_angularMass&&(this.m_angularMass=1/this.m_angularMass),t.step.warmStarting?(this.m_linearImpulse.SelfMul(t.step.dtRatio),this.m_angularImpulse*=t.step.dtRatio,e=this.m_linearImpulse,i.SelfMulSub(a,e),o-=l*(box2d.b2CrossVV(this.m_rA,e)+this.m_angularImpulse),n.SelfMulAdd(h,e),r+=c*(box2d.b2CrossVV(this.m_rB,e)+this.m_angularImpulse)):(this.m_linearImpulse.SetZero(),this.m_angularImpulse=0),t.velocities[this.m_indexA].w=o,t.velocities[this.m_indexB].w=r},box2d.b2FrictionJoint.prototype.SolveVelocityConstraints=function(t){var e=t.velocities[this.m_indexA].v,i=t.velocities[this.m_indexA].w,o=t.velocities[this.m_indexB].v,s=t.velocities[this.m_indexB].w,n=this.m_invMassA,r=this.m_invMassB,a=this.m_invIA,h=this.m_invIB,l=t.step.dt,c=-this.m_angularMass*(s-i),u=this.m_angularImpulse,d=l*this.m_maxTorque,u=(this.m_angularImpulse=box2d.b2Clamp(this.m_angularImpulse+c,-d,d),i-=a*(c=this.m_angularImpulse-u),s+=h*c,box2d.b2SubVV(box2d.b2AddVCrossSV(o,s,this.m_rB,box2d.b2Vec2.s_t0),box2d.b2AddVCrossSV(e,i,this.m_rA,box2d.b2Vec2.s_t1),box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_Cdot)),c=box2d.b2MulMV(this.m_linearMass,u,box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_impulseV).SelfNeg(),u=box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_oldImpulseV.Copy(this.m_linearImpulse),d=(this.m_linearImpulse.SelfAdd(c),l*this.m_maxForce);this.m_linearImpulse.GetLengthSquared()>d*d&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.SelfMul(d)),box2d.b2SubVV(this.m_linearImpulse,u,c),e.SelfMulSub(n,c),i-=a*box2d.b2CrossVV(this.m_rA,c),o.SelfMulAdd(r,c),s+=h*box2d.b2CrossVV(this.m_rB,c),t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=s},box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_Cdot=new box2d.b2Vec2,box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_impulseV=new box2d.b2Vec2,box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_oldImpulseV=new box2d.b2Vec2,box2d.b2FrictionJoint.prototype.SolvePositionConstraints=function(t){return!0},box2d.b2FrictionJoint.prototype.GetAnchorA=function(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)},box2d.b2FrictionJoint.prototype.GetAnchorB=function(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)},box2d.b2FrictionJoint.prototype.GetReactionForce=function(t,e){return e.SetXY(t*this.m_linearImpulse.x,t*this.m_linearImpulse.y)},box2d.b2FrictionJoint.prototype.GetReactionTorque=function(t){return t*this.m_angularImpulse},box2d.b2FrictionJoint.prototype.GetLocalAnchorA=function(t){return t.Copy(this.m_localAnchorA)},box2d.b2FrictionJoint.prototype.GetLocalAnchorB=function(t){return t.Copy(this.m_localAnchorB)},box2d.b2FrictionJoint.prototype.SetMaxForce=function(t){this.m_maxForce=t},box2d.b2FrictionJoint.prototype.GetMaxForce=function(){return this.m_maxForce},box2d.b2FrictionJoint.prototype.SetMaxTorque=function(t){this.m_maxTorque=t},box2d.b2FrictionJoint.prototype.GetMaxTorque=function(){return this.m_maxTorque},box2d.b2FrictionJoint.prototype.Dump=function(){var t,e;box2d.DEBUG&&(t=this.m_bodyA.m_islandIndex,e=this.m_bodyB.m_islandIndex,box2d.b2Log("  /*box2d.b2FrictionJointDef*/ var jd = new box2d.b2FrictionJointDef();\n"),box2d.b2Log("  jd.bodyA = bodies[%d];\n",t),box2d.b2Log("  jd.bodyB = bodies[%d];\n",e),box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),box2d.b2Log("  jd.maxForce = %.15f;\n",this.m_maxForce),box2d.b2Log("  jd.maxTorque = %.15f;\n",this.m_maxTorque),box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index))},goog.provide("box2d.b2MouseJoint"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Joint"),goog.require("box2d.b2Math"),box2d.b2MouseJointDef=function(){goog.base(this,box2d.b2JointType.e_mouseJoint),this.target=new box2d.b2Vec2},goog.inherits(box2d.b2MouseJointDef,box2d.b2JointDef),box2d.b2MouseJointDef.prototype.target=null,box2d.b2MouseJointDef.prototype.maxForce=0,box2d.b2MouseJointDef.prototype.frequencyHz=5,box2d.b2MouseJointDef.prototype.dampingRatio=.7,box2d.b2MouseJoint=function(t){goog.base(this,t),this.m_localAnchorB=new box2d.b2Vec2,this.m_targetA=new box2d.b2Vec2,this.m_impulse=new box2d.b2Vec2,this.m_rB=new box2d.b2Vec2,this.m_localCenterB=new box2d.b2Vec2,this.m_mass=new box2d.b2Mat22,this.m_C=new box2d.b2Vec2,this.m_qB=new box2d.b2Rot,this.m_lalcB=new box2d.b2Vec2,this.m_K=new box2d.b2Mat22,box2d.ENABLE_ASSERTS&&box2d.b2Assert(t.target.IsValid()),box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(t.maxForce)&&0<=t.maxForce),box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(t.frequencyHz)&&0<=t.frequencyHz),box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(t.dampingRatio)&&0<=t.dampingRatio),this.m_targetA.Copy(t.target),box2d.b2MulTXV(this.m_bodyB.GetTransform(),this.m_targetA,this.m_localAnchorB),this.m_maxForce=t.maxForce,this.m_impulse.SetZero(),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_beta=0,this.m_gamma=0},goog.inherits(box2d.b2MouseJoint,box2d.b2Joint),box2d.b2MouseJoint.prototype.m_localAnchorB=null,box2d.b2MouseJoint.prototype.m_targetA=null,box2d.b2MouseJoint.prototype.m_frequencyHz=0,box2d.b2MouseJoint.prototype.m_dampingRatio=0,box2d.b2MouseJoint.prototype.m_beta=0,box2d.b2MouseJoint.prototype.m_impulse=null,box2d.b2MouseJoint.prototype.m_maxForce=0,box2d.b2MouseJoint.prototype.m_gamma=0,box2d.b2MouseJoint.prototype.m_indexA=0,box2d.b2MouseJoint.prototype.m_indexB=0,box2d.b2MouseJoint.prototype.m_rB=null,box2d.b2MouseJoint.prototype.m_localCenterB=null,box2d.b2MouseJoint.prototype.m_invMassB=0,box2d.b2MouseJoint.prototype.m_invIB=0,box2d.b2MouseJoint.prototype.m_mass=null,box2d.b2MouseJoint.prototype.m_C=null,box2d.b2MouseJoint.prototype.m_qB=null,box2d.b2MouseJoint.prototype.m_lalcB=null,box2d.b2MouseJoint.prototype.m_K=null,box2d.b2MouseJoint.prototype.SetTarget=function(t){!1===this.m_bodyB.IsAwake()&&this.m_bodyB.SetAwake(!0),this.m_targetA.Copy(t)},box2d.b2MouseJoint.prototype.GetTarget=function(t){return t.Copy(this.m_targetA)},box2d.b2MouseJoint.prototype.SetMaxForce=function(t){this.m_maxForce=t},box2d.b2MouseJoint.prototype.GetMaxForce=function(){return this.m_maxForce},box2d.b2MouseJoint.prototype.SetFrequency=function(t){this.m_frequencyHz=t},box2d.b2MouseJoint.prototype.GetFrequency=function(){return this.m_frequencyHz},box2d.b2MouseJoint.prototype.SetDampingRatio=function(t){this.m_dampingRatio=t},box2d.b2MouseJoint.prototype.GetDampingRatio=function(){return this.m_dampingRatio},box2d.b2MouseJoint.prototype.InitVelocityConstraints=function(t){this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIB=this.m_bodyB.m_invI;var e=t.positions[this.m_indexB].c,i=t.positions[this.m_indexB].a,o=t.velocities[this.m_indexB].v,s=t.velocities[this.m_indexB].w,i=this.m_qB.SetAngleRadians(i),n=this.m_bodyB.GetMass(),r=2*box2d.b2_pi*this.m_frequencyHz,a=2*n*this.m_dampingRatio*r,n=n*(r*r),r=t.step.dt,a=(box2d.ENABLE_ASSERTS&&box2d.b2Assert(a+r*n>box2d.b2_epsilon),this.m_gamma=r*(a+r*n),0!==this.m_gamma&&(this.m_gamma=1/this.m_gamma),this.m_beta=r*n*this.m_gamma,box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),box2d.b2MulRV(i,this.m_lalcB,this.m_rB),this.m_K);a.ex.x=this.m_invMassB+this.m_invIB*this.m_rB.y*this.m_rB.y+this.m_gamma,a.ex.y=-this.m_invIB*this.m_rB.x*this.m_rB.y,a.ey.x=a.ex.y,a.ey.y=this.m_invMassB+this.m_invIB*this.m_rB.x*this.m_rB.x+this.m_gamma,a.GetInverse(this.m_mass),this.m_C.x=e.x+this.m_rB.x-this.m_targetA.x,this.m_C.y=e.y+this.m_rB.y-this.m_targetA.y,this.m_C.SelfMul(this.m_beta),s*=.98,t.step.warmStarting?(this.m_impulse.SelfMul(t.step.dtRatio),o.x+=this.m_invMassB*this.m_impulse.x,o.y+=this.m_invMassB*this.m_impulse.y,s+=this.m_invIB*box2d.b2CrossVV(this.m_rB,this.m_impulse)):this.m_impulse.SetZero(),t.velocities[this.m_indexB].w=s},box2d.b2MouseJoint.prototype.SolveVelocityConstraints=function(t){var e=t.velocities[this.m_indexB].v,i=t.velocities[this.m_indexB].w,o=box2d.b2AddVCrossSV(e,i,this.m_rB,box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_Cdot),o=box2d.b2MulMV(this.m_mass,box2d.b2AddVV(o,box2d.b2AddVV(this.m_C,box2d.b2MulSV(this.m_gamma,this.m_impulse,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0).SelfNeg(),box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_impulse),s=box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_oldImpulse.Copy(this.m_impulse),n=(this.m_impulse.SelfAdd(o),t.step.dt*this.m_maxForce);this.m_impulse.GetLengthSquared()>n*n&&this.m_impulse.SelfMul(n/this.m_impulse.GetLength()),box2d.b2SubVV(this.m_impulse,s,o),e.SelfMulAdd(this.m_invMassB,o),i+=this.m_invIB*box2d.b2CrossVV(this.m_rB,o),t.velocities[this.m_indexB].w=i},box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_Cdot=new box2d.b2Vec2,box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_impulse=new box2d.b2Vec2,box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_oldImpulse=new box2d.b2Vec2,box2d.b2MouseJoint.prototype.SolvePositionConstraints=function(t){return!0},box2d.b2MouseJoint.prototype.GetAnchorA=function(t){return t.Copy(this.m_targetA)},box2d.b2MouseJoint.prototype.GetAnchorB=function(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)},box2d.b2MouseJoint.prototype.GetReactionForce=function(t,e){return box2d.b2MulSV(t,this.m_impulse,e)},box2d.b2MouseJoint.prototype.GetReactionTorque=function(t){return 0},box2d.b2MouseJoint.prototype.Dump=function(){box2d.DEBUG&&box2d.b2Log("Mouse joint dumping is not supported.\n")},box2d.b2MouseJoint.prototype.ShiftOrigin=function(t){this.m_targetA.SelfSub(t)},goog.provide("box2d.b2ConstantForceController"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Controller"),goog.require("box2d.b2Math"),box2d.b2ConstantForceController=function(){goog.base(this),this.F=new box2d.b2Vec2(0,0)},goog.inherits(box2d.b2ConstantForceController,box2d.b2Controller),box2d.b2ConstantAccelController.prototype.F=null,box2d.b2ConstantForceController.prototype.Step=function(t){for(var e=this.m_bodyList;e;e=e.nextBody){var i=e.body;i.IsAwake()&&i.ApplyForce(this.F,i.GetWorldCenter())}},goog.provide("box2d.b2PulleyJoint"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Joint"),goog.require("box2d.b2Math"),box2d.b2_minPulleyLength=2,box2d.b2PulleyJointDef=function(){goog.base(this,box2d.b2JointType.e_pulleyJoint),this.collideConnected=!0,this.groundAnchorA=new box2d.b2Vec2(-1,1),this.groundAnchorB=new box2d.b2Vec2(1,1),this.localAnchorA=new box2d.b2Vec2(-1,0),this.localAnchorB=new box2d.b2Vec2(1,0)},goog.inherits(box2d.b2PulleyJointDef,box2d.b2JointDef),box2d.b2PulleyJointDef.prototype.groundAnchorA=null,box2d.b2PulleyJointDef.prototype.groundAnchorB=null,box2d.b2PulleyJointDef.prototype.localAnchorA=null,box2d.b2PulleyJointDef.prototype.localAnchorB=null,box2d.b2PulleyJointDef.prototype.lengthA=0,box2d.b2PulleyJointDef.prototype.lengthB=0,box2d.b2PulleyJointDef.prototype.ratio=1,box2d.b2PulleyJointDef.prototype.Initialize=function(t,e,i,o,s,n,r){this.bodyA=t,this.bodyB=e,this.groundAnchorA.Copy(i),this.groundAnchorB.Copy(o),this.bodyA.GetLocalPoint(s,this.localAnchorA),this.bodyB.GetLocalPoint(n,this.localAnchorB),this.lengthA=box2d.b2DistanceVV(s,i),this.lengthB=box2d.b2DistanceVV(n,o),this.ratio=r,box2d.ENABLE_ASSERTS&&box2d.b2Assert(this.ratio>box2d.b2_epsilon)},box2d.b2PulleyJoint=function(t){goog.base(this,t),this.m_groundAnchorA=new box2d.b2Vec2,this.m_groundAnchorB=new box2d.b2Vec2,this.m_localAnchorA=new box2d.b2Vec2,this.m_localAnchorB=new box2d.b2Vec2,this.m_uA=new box2d.b2Vec2,this.m_uB=new box2d.b2Vec2,this.m_rA=new box2d.b2Vec2,this.m_rB=new box2d.b2Vec2,this.m_localCenterA=new box2d.b2Vec2,this.m_localCenterB=new box2d.b2Vec2,this.m_qA=new box2d.b2Rot,this.m_qB=new box2d.b2Rot,this.m_lalcA=new box2d.b2Vec2,this.m_lalcB=new box2d.b2Vec2,this.m_groundAnchorA.Copy(t.groundAnchorA),this.m_groundAnchorB.Copy(t.groundAnchorB),this.m_localAnchorA.Copy(t.localAnchorA),this.m_localAnchorB.Copy(t.localAnchorB),this.m_lengthA=t.lengthA,this.m_lengthB=t.lengthB,box2d.ENABLE_ASSERTS&&box2d.b2Assert(0!==t.ratio),this.m_ratio=t.ratio,this.m_constant=t.lengthA+this.m_ratio*t.lengthB,this.m_impulse=0},goog.inherits(box2d.b2PulleyJoint,box2d.b2Joint),box2d.b2PulleyJoint.prototype.m_groundAnchorA=null,box2d.b2PulleyJoint.prototype.m_groundAnchorB=null,box2d.b2PulleyJoint.prototype.m_lengthA=0,box2d.b2PulleyJoint.prototype.m_lengthB=0,box2d.b2PulleyJoint.prototype.m_localAnchorA=null,box2d.b2PulleyJoint.prototype.m_localAnchorB=null,box2d.b2PulleyJoint.prototype.m_constant=0,box2d.b2PulleyJoint.prototype.m_ratio=0,box2d.b2PulleyJoint.prototype.m_impulse=0,box2d.b2PulleyJoint.prototype.m_indexA=0,box2d.b2PulleyJoint.prototype.m_indexB=0,box2d.b2PulleyJoint.prototype.m_uA=null,box2d.b2PulleyJoint.prototype.m_uB=null,box2d.b2PulleyJoint.prototype.m_rA=null,box2d.b2PulleyJoint.prototype.m_rB=null,box2d.b2PulleyJoint.prototype.m_localCenterA=null,box2d.b2PulleyJoint.prototype.m_localCenterB=null,box2d.b2PulleyJoint.prototype.m_invMassA=0,box2d.b2PulleyJoint.prototype.m_invMassB=0,box2d.b2PulleyJoint.prototype.m_invIA=0,box2d.b2PulleyJoint.prototype.m_invIB=0,box2d.b2PulleyJoint.prototype.m_mass=0,box2d.b2PulleyJoint.prototype.m_qA=null,box2d.b2PulleyJoint.prototype.m_qB=null,box2d.b2PulleyJoint.prototype.m_lalcA=null,box2d.b2PulleyJoint.prototype.m_lalcB=null;box2d.b2PulleyJoint.prototype.InitVelocityConstraints=function(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=t.positions[this.m_indexA].c,i=t.positions[this.m_indexA].a,o=t.velocities[this.m_indexA].v,s=t.velocities[this.m_indexA].w,n=t.positions[this.m_indexB].c,r=t.positions[this.m_indexB].a,a=t.velocities[this.m_indexB].v,h=t.velocities[this.m_indexB].w,i=this.m_qA.SetAngleRadians(i),r=this.m_qB.SetAngleRadians(r),i=(box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),box2d.b2MulRV(i,this.m_lalcA,this.m_rA),box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),box2d.b2MulRV(r,this.m_lalcB,this.m_rB),this.m_uA.Copy(e).SelfAdd(this.m_rA).SelfSub(this.m_groundAnchorA),this.m_uB.Copy(n).SelfAdd(this.m_rB).SelfSub(this.m_groundAnchorB),this.m_uA.GetLength()),r=this.m_uB.GetLength(),e=(i>10*box2d.b2_linearSlop?this.m_uA.SelfMul(1/i):this.m_uA.SetZero(),r>10*box2d.b2_linearSlop?this.m_uB.SelfMul(1/r):this.m_uB.SetZero(),box2d.b2CrossVV(this.m_rA,this.m_uA)),n=box2d.b2CrossVV(this.m_rB,this.m_uB),i=this.m_invMassA+this.m_invIA*e*e,r=this.m_invMassB+this.m_invIB*n*n;this.m_mass=i+this.m_ratio*this.m_ratio*r,0<this.m_mass&&(this.m_mass=1/this.m_mass),t.step.warmStarting?(this.m_impulse*=t.step.dtRatio,e=box2d.b2MulSV(-this.m_impulse,this.m_uA,box2d.b2PulleyJoint.prototype.InitVelocityConstraints.s_PA),n=box2d.b2MulSV(-this.m_ratio*this.m_impulse,this.m_uB,box2d.b2PulleyJoint.prototype.InitVelocityConstraints.s_PB),o.SelfMulAdd(this.m_invMassA,e),s+=this.m_invIA*box2d.b2CrossVV(this.m_rA,e),a.SelfMulAdd(this.m_invMassB,n),h+=this.m_invIB*box2d.b2CrossVV(this.m_rB,n)):this.m_impulse=0,t.velocities[this.m_indexA].w=s,t.velocities[this.m_indexB].w=h},box2d.b2PulleyJoint.prototype.InitVelocityConstraints.s_PA=new box2d.b2Vec2,box2d.b2PulleyJoint.prototype.InitVelocityConstraints.s_PB=new box2d.b2Vec2,box2d.b2PulleyJoint.prototype.SolveVelocityConstraints=function(t){var e=t.velocities[this.m_indexA].v,i=t.velocities[this.m_indexA].w,o=t.velocities[this.m_indexB].v,s=t.velocities[this.m_indexB].w,n=box2d.b2AddVCrossSV(e,i,this.m_rA,box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_vpA),r=box2d.b2AddVCrossSV(o,s,this.m_rB,box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_vpB),n=-box2d.b2DotVV(this.m_uA,n)-this.m_ratio*box2d.b2DotVV(this.m_uB,r),r=-this.m_mass*n,n=(this.m_impulse+=r,box2d.b2MulSV(-r,this.m_uA,box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_PA)),r=box2d.b2MulSV(-this.m_ratio*r,this.m_uB,box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_PB);e.SelfMulAdd(this.m_invMassA,n),i+=this.m_invIA*box2d.b2CrossVV(this.m_rA,n),o.SelfMulAdd(this.m_invMassB,r),s+=this.m_invIB*box2d.b2CrossVV(this.m_rB,r),t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=s},box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_vpA=new box2d.b2Vec2,box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_vpB=new box2d.b2Vec2,box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_PA=new box2d.b2Vec2,box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_PB=new box2d.b2Vec2,box2d.b2PulleyJoint.prototype.SolvePositionConstraints=function(t){var e=t.positions[this.m_indexA].c,i=t.positions[this.m_indexA].a,o=t.positions[this.m_indexB].c,s=t.positions[this.m_indexB].a,n=this.m_qA.SetAngleRadians(i),r=this.m_qB.SetAngleRadians(s),n=(box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),box2d.b2MulRV(n,this.m_lalcA,this.m_rA)),r=(box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),box2d.b2MulRV(r,this.m_lalcB,this.m_rB)),a=this.m_uA.Copy(e).SelfAdd(n).SelfSub(this.m_groundAnchorA),h=this.m_uB.Copy(o).SelfAdd(r).SelfSub(this.m_groundAnchorB),l=a.GetLength(),c=h.GetLength(),u=(l>10*box2d.b2_linearSlop?a.SelfMul(1/l):a.SetZero(),c>10*box2d.b2_linearSlop?h.SelfMul(1/c):h.SetZero(),box2d.b2CrossVV(n,a)),d=box2d.b2CrossVV(r,h),u=this.m_invMassA+this.m_invIA*u*u,d=this.m_invMassB+this.m_invIB*d*d,u=u+this.m_ratio*this.m_ratio*d,d=(0<u&&(u=1/u),this.m_constant-l-this.m_ratio*c),l=box2d.b2Abs(d),c=-u*d,u=box2d.b2MulSV(-c,a,box2d.b2PulleyJoint.prototype.SolvePositionConstraints.s_PA),d=box2d.b2MulSV(-this.m_ratio*c,h,box2d.b2PulleyJoint.prototype.SolvePositionConstraints.s_PB);return e.SelfMulAdd(this.m_invMassA,u),i+=this.m_invIA*box2d.b2CrossVV(n,u),o.SelfMulAdd(this.m_invMassB,d),s+=this.m_invIB*box2d.b2CrossVV(r,d),t.positions[this.m_indexA].a=i,t.positions[this.m_indexB].a=s,l<box2d.b2_linearSlop},box2d.b2PulleyJoint.prototype.SolvePositionConstraints.s_PA=new box2d.b2Vec2,box2d.b2PulleyJoint.prototype.SolvePositionConstraints.s_PB=new box2d.b2Vec2,box2d.b2PulleyJoint.prototype.GetAnchorA=function(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)},box2d.b2PulleyJoint.prototype.GetAnchorB=function(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)},box2d.b2PulleyJoint.prototype.GetReactionForce=function(t,e){return e.SetXY(t*this.m_impulse*this.m_uB.x,t*this.m_impulse*this.m_uB.y)},box2d.b2PulleyJoint.prototype.GetReactionTorque=function(t){return 0},box2d.b2PulleyJoint.prototype.GetGroundAnchorA=function(t){return t.Copy(this.m_groundAnchorA)},box2d.b2PulleyJoint.prototype.GetGroundAnchorB=function(t){return t.Copy(this.m_groundAnchorB)},box2d.b2PulleyJoint.prototype.GetLengthA=function(){return this.m_lengthA},box2d.b2PulleyJoint.prototype.GetLengthB=function(){return this.m_lengthB},box2d.b2PulleyJoint.prototype.GetRatio=function(){return this.m_ratio},box2d.b2PulleyJoint.prototype.GetCurrentLengthA=function(){var t=this.m_bodyA.GetWorldPoint(this.m_localAnchorA,box2d.b2PulleyJoint.prototype.GetCurrentLengthA.s_p),e=this.m_groundAnchorA;return box2d.b2DistanceVV(t,e)},box2d.b2PulleyJoint.prototype.GetCurrentLengthA.s_p=new box2d.b2Vec2,box2d.b2PulleyJoint.prototype.GetCurrentLengthB=function(){var t=this.m_bodyB.GetWorldPoint(this.m_localAnchorB,box2d.b2PulleyJoint.prototype.GetCurrentLengthB.s_p),e=this.m_groundAnchorB;return box2d.b2DistanceVV(t,e)},box2d.b2PulleyJoint.prototype.GetCurrentLengthB.s_p=new box2d.b2Vec2,box2d.b2PulleyJoint.prototype.Dump=function(){var t,e;box2d.DEBUG&&(t=this.m_bodyA.m_islandIndex,e=this.m_bodyB.m_islandIndex,box2d.b2Log("  /*box2d.b2PulleyJointDef*/ var jd = new box2d.b2PulleyJointDef();\n"),box2d.b2Log("  jd.bodyA = bodies[%d];\n",t),box2d.b2Log("  jd.bodyB = bodies[%d];\n",e),box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),box2d.b2Log("  jd.groundAnchorA.SetXY(%.15f, %.15f);\n",this.m_groundAnchorA.x,this.m_groundAnchorA.y),box2d.b2Log("  jd.groundAnchorB.SetXY(%.15f, %.15f);\n",this.m_groundAnchorB.x,this.m_groundAnchorB.y),box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),box2d.b2Log("  jd.lengthA = %.15f;\n",this.m_lengthA),box2d.b2Log("  jd.lengthB = %.15f;\n",this.m_lengthB),box2d.b2Log("  jd.ratio = %.15f;\n",this.m_ratio),box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index))},box2d.b2PulleyJoint.prototype.ShiftOrigin=function(t){this.m_groundAnchorA.SelfSub(t),this.m_groundAnchorB.SelfSub(t)},goog.provide("box2d.b2CircleShape"),goog.require("box2d.b2Shape"),box2d.b2CircleShape=function(t){goog.base(this,box2d.b2ShapeType.e_circleShape,t||0),this.m_p=new box2d.b2Vec2},goog.inherits(box2d.b2CircleShape,box2d.b2Shape),box2d.b2CircleShape.prototype.m_p=null,box2d.b2CircleShape.prototype.Clone=function(){return(new box2d.b2CircleShape).Copy(this)},box2d.b2CircleShape.prototype.Copy=function(t){return goog.base(this,"Copy",t),box2d.ENABLE_ASSERTS&&box2d.b2Assert(t instanceof box2d.b2CircleShape),this.m_p.Copy(t.m_p),this},box2d.b2CircleShape.prototype.GetChildCount=function(){return 1},box2d.b2CircleShape.prototype.TestPoint=function(t,e){t=box2d.b2MulXV(t,this.m_p,box2d.b2CircleShape.prototype.TestPoint.s_center),e=box2d.b2SubVV(e,t,box2d.b2CircleShape.prototype.TestPoint.s_d);return box2d.b2DotVV(e,e)<=box2d.b2Sq(this.m_radius)},box2d.b2CircleShape.prototype.TestPoint.s_center=new box2d.b2Vec2,box2d.b2CircleShape.prototype.TestPoint.s_d=new box2d.b2Vec2,box2d.b2CircleShape.prototype.RayCast=function(t,e,i,o){var i=box2d.b2MulXV(i,this.m_p,box2d.b2CircleShape.prototype.RayCast.s_position),i=box2d.b2SubVV(e.p1,i,box2d.b2CircleShape.prototype.RayCast.s_s),s=box2d.b2DotVV(i,i)-box2d.b2Sq(this.m_radius),n=box2d.b2SubVV(e.p2,e.p1,box2d.b2CircleShape.prototype.RayCast.s_r),r=box2d.b2DotVV(i,n),a=box2d.b2DotVV(n,n),s=r*r-a*s;return!(s<0||a<box2d.b2_epsilon)&&0<=(r=-(r+box2d.b2Sqrt(s)))&&r<=e.maxFraction*a&&(t.fraction=r/=a,box2d.b2AddVMulSV(i,r,n,t.normal).SelfNormalize(),!0)},box2d.b2CircleShape.prototype.RayCast.s_position=new box2d.b2Vec2,box2d.b2CircleShape.prototype.RayCast.s_s=new box2d.b2Vec2,box2d.b2CircleShape.prototype.RayCast.s_r=new box2d.b2Vec2,box2d.b2CircleShape.prototype.ComputeAABB=function(t,e,i){e=box2d.b2MulXV(e,this.m_p,box2d.b2CircleShape.prototype.ComputeAABB.s_p);t.lowerBound.SetXY(e.x-this.m_radius,e.y-this.m_radius),t.upperBound.SetXY(e.x+this.m_radius,e.y+this.m_radius)},box2d.b2CircleShape.prototype.ComputeAABB.s_p=new box2d.b2Vec2,box2d.b2CircleShape.prototype.ComputeMass=function(t,e){var i=box2d.b2Sq(this.m_radius);t.mass=e*box2d.b2_pi*i,t.center.Copy(this.m_p),t.I=t.mass*(.5*i+box2d.b2DotVV(this.m_p,this.m_p))},box2d.b2CircleShape.prototype.SetupDistanceProxy=function(t,e){t.m_vertices=new Array(1,!0),t.m_vertices[0]=this.m_p,t.m_count=1,t.m_radius=this.m_radius},box2d.b2CircleShape.prototype.ComputeSubmergedArea=function(t,e,i,o){var s,n,i=box2d.b2MulXV(i,this.m_p,new box2d.b2Vec2),e=-(box2d.b2DotVV(t,i)-e);return e<-this.m_radius+box2d.b2_epsilon?0:e>this.m_radius?(o.Copy(i),box2d.b2_pi*this.m_radius*this.m_radius):(s=e*e,e=(n=this.m_radius*this.m_radius)*(box2d.b2Asin(e/this.m_radius)+box2d.b2_pi/2)+e*box2d.b2Sqrt(n-s),n=-2/3*box2d.b2Pow(n-s,1.5)/e,o.x=i.x+t.x*n,o.y=i.y+t.y*n,e)},box2d.b2CircleShape.prototype.Dump=function(){box2d.b2Log("    /*box2d.b2CircleShape*/ var shape = new box2d.b2CircleShape();\n"),box2d.b2Log("    shape.m_radius = %.15f;\n",this.m_radius),box2d.b2Log("    shape.m_p.SetXY(%.15f, %.15f);\n",this.m_p.x,this.m_p.y)},goog.provide("box2d.b2Rope"),goog.require("box2d.b2Math"),goog.require("box2d.b2Draw"),box2d.b2RopeDef=function(){this.vertices=new Array,this.masses=new Array,this.gravity=new box2d.b2Vec2},box2d.b2RopeDef.prototype.vertices=null,box2d.b2RopeDef.prototype.count=0,box2d.b2RopeDef.prototype.masses=null,box2d.b2RopeDef.prototype.gravity=null,box2d.b2RopeDef.prototype.damping=.1,box2d.b2RopeDef.prototype.k2=.9,box2d.b2RopeDef.prototype.k3=.1,box2d.b2Rope=function(){this.m_gravity=new box2d.b2Vec2},box2d.b2Rope.prototype.m_count=0,box2d.b2Rope.prototype.m_ps=null,box2d.b2Rope.prototype.m_p0s=null,box2d.b2Rope.prototype.m_vs=null,box2d.b2Rope.prototype.m_ims=null,box2d.b2Rope.prototype.m_Ls=null,box2d.b2Rope.prototype.m_as=null,box2d.b2Rope.prototype.m_gravity=null,box2d.b2Rope.prototype.m_damping=0,box2d.b2Rope.prototype.m_k2=1,box2d.b2Rope.prototype.m_k3=.1,box2d.b2Rope.prototype.GetVertexCount=function(){return this.m_count},box2d.b2Rope.prototype.GetVertices=function(){return this.m_ps},box2d.b2Rope.prototype.Initialize=function(t){box2d.ENABLE_ASSERTS&&box2d.b2Assert(3<=t.count),this.m_count=t.count,this.m_ps=box2d.b2Vec2.MakeArray(this.m_count),this.m_p0s=box2d.b2Vec2.MakeArray(this.m_count),this.m_vs=box2d.b2Vec2.MakeArray(this.m_count),this.m_ims=box2d.b2MakeNumberArray(this.m_count);for(var e=0;e<this.m_count;++e){this.m_ps[e].Copy(t.vertices[e]),this.m_p0s[e].Copy(t.vertices[e]),this.m_vs[e].SetZero();var i=t.masses[e];this.m_ims[e]=0<i?1/i:0}var o=this.m_count-1,s=this.m_count-2;this.m_Ls=box2d.b2MakeNumberArray(o),this.m_as=box2d.b2MakeNumberArray(s);for(e=0;e<o;++e){var n=this.m_ps[e],r=this.m_ps[e+1];this.m_Ls[e]=box2d.b2DistanceVV(n,r)}for(e=0;e<s;++e){var n=this.m_ps[e],r=this.m_ps[e+1],a=this.m_ps[e+2],h=box2d.b2SubVV(r,n,box2d.b2Vec2.s_t0),a=box2d.b2SubVV(a,r,box2d.b2Vec2.s_t1),l=box2d.b2CrossVV(h,a),h=box2d.b2DotVV(h,a);this.m_as[e]=box2d.b2Atan2(l,h)}this.m_gravity.Copy(t.gravity),this.m_damping=t.damping,this.m_k2=t.k2,this.m_k3=t.k3},box2d.b2Rope.prototype.Step=function(t,e){if(0!==t){for(var i=Math.exp(-t*this.m_damping),o=0;o<this.m_count;++o)this.m_p0s[o].Copy(this.m_ps[o]),0<this.m_ims[o]&&this.m_vs[o].SelfMulAdd(t,this.m_gravity),this.m_vs[o].SelfMul(i),this.m_ps[o].SelfMulAdd(t,this.m_vs[o]);for(o=0;o<e;++o)this.SolveC2(),this.SolveC3(),this.SolveC2();for(var s=1/t,o=0;o<this.m_count;++o)box2d.b2MulSV(s,box2d.b2SubVV(this.m_ps[o],this.m_p0s[o],box2d.b2Vec2.s_t0),this.m_vs[o])}},box2d.b2Rope.prototype.SolveC2=function(){for(var t=this.m_count-1,e=0;e<t;++e){var i,o=this.m_ps[e],s=this.m_ps[e+1],n=box2d.b2SubVV(s,o,box2d.b2Rope.s_d),r=n.Normalize(),a=this.m_ims[e],h=this.m_ims[e+1];a+h!==0&&(i=h/(a+h),o.SelfMulSub(this.m_k2*(a/(a+h))*(this.m_Ls[e]-r),n),s.SelfMulAdd(this.m_k2*i*(this.m_Ls[e]-r),n))}},box2d.b2Rope.s_d=new box2d.b2Vec2,box2d.b2Rope.prototype.SetAngleRadians=function(t){for(var e=this.m_count-2,i=0;i<e;++i)this.m_as[i]=t},box2d.b2Rope.prototype.SolveC3=function(){for(var t=this.m_count-2,e=0;e<t;++e){var i=this.m_ps[e],o=this.m_ps[e+1],s=this.m_ps[e+2],n=this.m_ims[e],r=this.m_ims[e+1],a=this.m_ims[e+2],h=box2d.b2SubVV(o,i,box2d.b2Rope.s_d1),l=box2d.b2SubVV(s,o,box2d.b2Rope.s_d2),c=h.GetLengthSquared(),u=l.GetLengthSquared();if(c*u!=0){var d=box2d.b2CrossVV(h,l),p=box2d.b2DotVV(h,l),f=box2d.b2Atan2(d,p),d=box2d.b2MulSV(-1/c,h.SelfSkew(),box2d.b2Rope.s_Jd1),p=box2d.b2MulSV(1/u,l.SelfSkew(),box2d.b2Rope.s_Jd2),c=box2d.b2NegV(d,box2d.b2Rope.s_J1),h=box2d.b2SubVV(d,p,box2d.b2Rope.s_J2),u=p;if(0!=(l=n*box2d.b2DotVV(c,c)+r*box2d.b2DotVV(h,h)+a*box2d.b2DotVV(u,u))){for(var l=1/l,b=f-this.m_as[e];b>box2d.b2_pi;)b=(f-=2*box2d.b2_pi)-this.m_as[e];for(;b<-box2d.b2_pi;)b=(f+=2*box2d.b2_pi)-this.m_as[e];d=-this.m_k3*l*b;i.SelfMulAdd(n*d,c),o.SelfMulAdd(r*d,h),s.SelfMulAdd(a*d,u)}}}},box2d.b2Rope.s_d1=new box2d.b2Vec2,box2d.b2Rope.s_d2=new box2d.b2Vec2,box2d.b2Rope.s_Jd1=new box2d.b2Vec2,box2d.b2Rope.s_Jd2=new box2d.b2Vec2,box2d.b2Rope.s_J1=new box2d.b2Vec2,box2d.b2Rope.s_J2=new box2d.b2Vec2,box2d.b2Rope.prototype.Draw=function(t){for(var e=new box2d.b2Color(.4,.5,.7),i=0;i<this.m_count-1;++i)t.DrawSegment(this.m_ps[i],this.m_ps[i+1],e)},goog.provide("box2d.b2WheelJoint"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Math"),box2d.b2WheelJointDef=function(){goog.base(this,box2d.b2JointType.e_wheelJoint),this.localAnchorA=new box2d.b2Vec2(0,0),this.localAnchorB=new box2d.b2Vec2(0,0),this.localAxisA=new box2d.b2Vec2(1,0)},goog.inherits(box2d.b2WheelJointDef,box2d.b2JointDef),box2d.b2WheelJointDef.prototype.localAnchorA=null,box2d.b2WheelJointDef.prototype.localAnchorB=null,box2d.b2WheelJointDef.prototype.localAxisA=null,box2d.b2WheelJointDef.prototype.enableMotor=!1,box2d.b2WheelJointDef.prototype.maxMotorTorque=0,box2d.b2WheelJointDef.prototype.motorSpeed=0,box2d.b2WheelJointDef.prototype.frequencyHz=2,box2d.b2WheelJointDef.prototype.dampingRatio=.7,box2d.b2WheelJointDef.prototype.Initialize=function(t,e,i,o){this.bodyA=t,this.bodyB=e,this.bodyA.GetLocalPoint(i,this.localAnchorA),this.bodyB.GetLocalPoint(i,this.localAnchorB),this.bodyA.GetLocalVector(o,this.localAxisA)},box2d.b2WheelJoint=function(t){goog.base(this,t),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_localAnchorA=t.localAnchorA.Clone(),this.m_localAnchorB=t.localAnchorB.Clone(),this.m_localXAxisA=t.localAxisA.Clone(),this.m_localYAxisA=box2d.b2CrossOneV(this.m_localXAxisA,new box2d.b2Vec2),this.m_maxMotorTorque=t.maxMotorTorque,this.m_motorSpeed=t.motorSpeed,this.m_enableMotor=t.enableMotor,this.m_localCenterA=new box2d.b2Vec2,this.m_localCenterB=new box2d.b2Vec2,this.m_ax=new box2d.b2Vec2,this.m_ay=new box2d.b2Vec2,this.m_qA=new box2d.b2Rot,this.m_qB=new box2d.b2Rot,this.m_lalcA=new box2d.b2Vec2,this.m_lalcB=new box2d.b2Vec2,this.m_rA=new box2d.b2Vec2,this.m_rB=new box2d.b2Vec2,this.m_ax.SetZero(),this.m_ay.SetZero()},goog.inherits(box2d.b2WheelJoint,box2d.b2Joint),box2d.b2WheelJoint.prototype.m_frequencyHz=0,box2d.b2WheelJoint.prototype.m_dampingRatio=0,box2d.b2WheelJoint.prototype.m_localAnchorA=null,box2d.b2WheelJoint.prototype.m_localAnchorB=null,box2d.b2WheelJoint.prototype.m_localXAxisA=null,box2d.b2WheelJoint.prototype.m_localYAxisA=null,box2d.b2WheelJoint.prototype.m_impulse=0,box2d.b2WheelJoint.prototype.m_motorImpulse=0,box2d.b2WheelJoint.prototype.m_springImpulse=0,box2d.b2WheelJoint.prototype.m_maxMotorTorque=0,box2d.b2WheelJoint.prototype.m_motorSpeed=0,box2d.b2WheelJoint.prototype.m_enableMotor=!1,box2d.b2WheelJoint.prototype.m_indexA=0,box2d.b2WheelJoint.prototype.m_indexB=0,box2d.b2WheelJoint.prototype.m_localCenterA=null,box2d.b2WheelJoint.prototype.m_localCenterB=null,box2d.b2WheelJoint.prototype.m_invMassA=0,box2d.b2WheelJoint.prototype.m_invMassB=0,box2d.b2WheelJoint.prototype.m_invIA=0,box2d.b2WheelJoint.prototype.m_invIB=0,box2d.b2WheelJoint.prototype.m_ax=null,box2d.b2WheelJoint.prototype.m_ay=null,box2d.b2WheelJoint.prototype.m_sAx=0,box2d.b2WheelJoint.prototype.m_sBx=0,box2d.b2WheelJoint.prototype.m_sAy=0,box2d.b2WheelJoint.prototype.m_sBy=0,box2d.b2WheelJoint.prototype.m_mass=0,box2d.b2WheelJoint.prototype.m_motorMass=0,box2d.b2WheelJoint.prototype.m_springMass=0,box2d.b2WheelJoint.prototype.m_bias=0,box2d.b2WheelJoint.prototype.m_gamma=0,box2d.b2WheelJoint.prototype.m_qA=null,box2d.b2WheelJoint.prototype.m_qB=null,box2d.b2WheelJoint.prototype.m_lalcA=null,box2d.b2WheelJoint.prototype.m_lalcB=null,box2d.b2WheelJoint.prototype.m_rA=null,box2d.b2WheelJoint.prototype.m_rB=null,box2d.b2WheelJoint.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},box2d.b2WheelJoint.prototype.GetMaxMotorTorque=function(){return this.m_maxMotorTorque},box2d.b2WheelJoint.prototype.SetSpringFrequencyHz=function(t){this.m_frequencyHz=t},box2d.b2WheelJoint.prototype.GetSpringFrequencyHz=function(){return this.m_frequencyHz},box2d.b2WheelJoint.prototype.SetSpringDampingRatio=function(t){this.m_dampingRatio=t},box2d.b2WheelJoint.prototype.GetSpringDampingRatio=function(){return this.m_dampingRatio},box2d.b2WheelJoint.prototype.InitVelocityConstraints=function(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_invMassA,i=this.m_invMassB,o=this.m_invIA,s=this.m_invIB,n=t.positions[this.m_indexA].c,r=t.positions[this.m_indexA].a,a=t.velocities[this.m_indexA].v,h=t.velocities[this.m_indexA].w,l=t.positions[this.m_indexB].c,c=t.positions[this.m_indexB].a,u=t.velocities[this.m_indexB].v,d=t.velocities[this.m_indexB].w,r=this.m_qA.SetAngleRadians(r),c=this.m_qB.SetAngleRadians(c),p=(box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),box2d.b2MulRV(r,this.m_lalcA,this.m_rA)),c=(box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),box2d.b2MulRV(c,this.m_lalcB,this.m_rB)),l=box2d.b2SubVV(box2d.b2AddVV(l,c,box2d.b2Vec2.s_t0),box2d.b2AddVV(n,p,box2d.b2Vec2.s_t1),box2d.b2WheelJoint.prototype.InitVelocityConstraints.s_d);box2d.b2MulRV(r,this.m_localYAxisA,this.m_ay),this.m_sAy=box2d.b2CrossVV(box2d.b2AddVV(l,p,box2d.b2Vec2.s_t0),this.m_ay),this.m_sBy=box2d.b2CrossVV(c,this.m_ay),this.m_mass=e+i+o*this.m_sAy*this.m_sAy+s*this.m_sBy*this.m_sBy,0<this.m_mass&&(this.m_mass=1/this.m_mass),this.m_springMass=0,this.m_bias=0,(this.m_gamma=0)<this.m_frequencyHz?(box2d.b2MulRV(r,this.m_localXAxisA,this.m_ax),this.m_sAx=box2d.b2CrossVV(box2d.b2AddVV(l,p,box2d.b2Vec2.s_t0),this.m_ax),this.m_sBx=box2d.b2CrossVV(c,this.m_ax),0<(n=e+i+o*this.m_sAx*this.m_sAx+s*this.m_sBx*this.m_sBx)&&(this.m_springMass=1/n,r=box2d.b2DotVV(l,this.m_ax),p=2*box2d.b2_pi*this.m_frequencyHz,c=2*this.m_springMass*this.m_dampingRatio*p,e=this.m_springMass*p*p,i=t.step.dt,this.m_gamma=i*(c+i*e),0<this.m_gamma&&(this.m_gamma=1/this.m_gamma),this.m_bias=r*i*e*this.m_gamma,this.m_springMass=n+this.m_gamma,0<this.m_springMass)&&(this.m_springMass=1/this.m_springMass)):this.m_springImpulse=0,this.m_enableMotor?(this.m_motorMass=o+s,0<this.m_motorMass&&(this.m_motorMass=1/this.m_motorMass)):(this.m_motorMass=0,this.m_motorImpulse=0),t.step.warmStarting?(this.m_impulse*=t.step.dtRatio,this.m_springImpulse*=t.step.dtRatio,this.m_motorImpulse*=t.step.dtRatio,l=box2d.b2AddVV(box2d.b2MulSV(this.m_impulse,this.m_ay,box2d.b2Vec2.s_t0),box2d.b2MulSV(this.m_springImpulse,this.m_ax,box2d.b2Vec2.s_t1),box2d.b2WheelJoint.prototype.InitVelocityConstraints.s_P),p=this.m_impulse*this.m_sAy+this.m_springImpulse*this.m_sAx+this.m_motorImpulse,c=this.m_impulse*this.m_sBy+this.m_springImpulse*this.m_sBx+this.m_motorImpulse,a.SelfMulSub(this.m_invMassA,l),h-=this.m_invIA*p,u.SelfMulAdd(this.m_invMassB,l),d+=this.m_invIB*c):(this.m_impulse=0,this.m_springImpulse=0,this.m_motorImpulse=0),t.velocities[this.m_indexA].w=h,t.velocities[this.m_indexB].w=d},box2d.b2WheelJoint.prototype.InitVelocityConstraints.s_d=new box2d.b2Vec2,box2d.b2WheelJoint.prototype.InitVelocityConstraints.s_P=new box2d.b2Vec2,box2d.b2WheelJoint.prototype.SolveVelocityConstraints=function(t){var e=this.m_invMassA,i=this.m_invMassB,o=this.m_invIA,s=this.m_invIB,n=t.velocities[this.m_indexA].v,r=t.velocities[this.m_indexA].w,a=t.velocities[this.m_indexB].v,h=t.velocities[this.m_indexB].w,l=box2d.b2DotVV(this.m_ax,box2d.b2SubVV(a,n,box2d.b2Vec2.s_t0))+this.m_sBx*h-this.m_sAx*r,c=-this.m_springMass*(l+this.m_bias+this.m_gamma*this.m_springImpulse),u=(this.m_springImpulse+=c,box2d.b2MulSV(c,this.m_ax,box2d.b2WheelJoint.prototype.SolveVelocityConstraints.s_P)),d=c*this.m_sAx,p=c*this.m_sBx,l=(n.SelfMulSub(e,u),r-=o*d,a.SelfMulAdd(i,u),(h+=s*p)-r-this.m_motorSpeed),c=-this.m_motorMass*l,f=this.m_motorImpulse,b=t.step.dt*this.m_maxMotorTorque,l=(this.m_motorImpulse=box2d.b2Clamp(this.m_motorImpulse+c,-b,b),r-=o*(c=this.m_motorImpulse-f),h+=s*c,box2d.b2DotVV(this.m_ay,box2d.b2SubVV(a,n,box2d.b2Vec2.s_t0))+this.m_sBy*h-this.m_sAy*r),c=-this.m_mass*l,u=(this.m_impulse+=c,box2d.b2MulSV(c,this.m_ay,box2d.b2WheelJoint.prototype.SolveVelocityConstraints.s_P)),d=c*this.m_sAy,p=c*this.m_sBy;n.SelfMulSub(e,u),r-=o*d,a.SelfMulAdd(i,u),h+=s*p,t.velocities[this.m_indexA].w=r,t.velocities[this.m_indexB].w=h},box2d.b2WheelJoint.prototype.SolveVelocityConstraints.s_P=new box2d.b2Vec2,box2d.b2WheelJoint.prototype.SolvePositionConstraints=function(t){var e=t.positions[this.m_indexA].c,i=t.positions[this.m_indexA].a,o=t.positions[this.m_indexB].c,s=t.positions[this.m_indexB].a,n=this.m_qA.SetAngleRadians(i),r=this.m_qB.SetAngleRadians(s),a=(box2d.b2SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),box2d.b2MulRV(n,this.m_lalcA,this.m_rA));box2d.b2SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);var r=box2d.b2MulRV(r,this.m_lalcB,this.m_rB),h=box2d.b2AddVV(box2d.b2SubVV(o,e,box2d.b2Vec2.s_t0),box2d.b2SubVV(r,a,box2d.b2Vec2.s_t1),box2d.b2WheelJoint.prototype.SolvePositionConstraints.s_d),n=box2d.b2MulRV(n,this.m_localYAxisA,this.m_ay),a=box2d.b2CrossVV(box2d.b2AddVV(h,a,box2d.b2Vec2.s_t0),n),r=box2d.b2CrossVV(r,n),h=box2d.b2DotVV(h,this.m_ay),l=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_sAy*this.m_sAy+this.m_invIB*this.m_sBy*this.m_sBy,l=0!==l?-h/l:0,n=box2d.b2MulSV(l,n,box2d.b2WheelJoint.prototype.SolvePositionConstraints.s_P),a=l*a,l=l*r;return e.SelfMulSub(this.m_invMassA,n),i-=this.m_invIA*a,o.SelfMulAdd(this.m_invMassB,n),s+=this.m_invIB*l,t.positions[this.m_indexA].a=i,t.positions[this.m_indexB].a=s,box2d.b2Abs(h)<=box2d.b2_linearSlop},box2d.b2WheelJoint.prototype.SolvePositionConstraints.s_d=new box2d.b2Vec2,box2d.b2WheelJoint.prototype.SolvePositionConstraints.s_P=new box2d.b2Vec2,box2d.b2WheelJoint.prototype.GetDefinition=function(t){return box2d.ENABLE_ASSERTS&&box2d.b2Assert(!1),t},box2d.b2WheelJoint.prototype.GetAnchorA=function(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)},box2d.b2WheelJoint.prototype.GetAnchorB=function(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)},box2d.b2WheelJoint.prototype.GetReactionForce=function(t,e){return e.x=t*(this.m_impulse*this.m_ay.x+this.m_springImpulse*this.m_ax.x),e.y=t*(this.m_impulse*this.m_ay.y+this.m_springImpulse*this.m_ax.y),e},box2d.b2WheelJoint.prototype.GetReactionTorque=function(t){return t*this.m_motorImpulse},box2d.b2WheelJoint.prototype.GetLocalAnchorA=function(t){return t.Copy(this.m_localAnchorA)},box2d.b2WheelJoint.prototype.GetLocalAnchorB=function(t){return t.Copy(this.m_localAnchorB)},box2d.b2WheelJoint.prototype.GetLocalAxisA=function(t){return t.Copy(this.m_localXAxisA)},box2d.b2WheelJoint.prototype.GetJointTranslation=function(){var t=this.m_bodyA,e=this.m_bodyB,i=t.GetWorldPoint(this.m_localAnchorA,new box2d.b2Vec2),e=e.GetWorldPoint(this.m_localAnchorB,new box2d.b2Vec2),e=box2d.b2SubVV(e,i,new box2d.b2Vec2),i=t.GetWorldVector(this.m_localXAxisA,new box2d.b2Vec2);return box2d.b2DotVV(e,i)},box2d.b2WheelJoint.prototype.GetJointSpeed=function(){var t=this.m_bodyA.m_angularVelocity;return this.m_bodyB.m_angularVelocity-t},box2d.b2WheelJoint.prototype.IsMotorEnabled=function(){return this.m_enableMotor},box2d.b2WheelJoint.prototype.EnableMotor=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=t},box2d.b2WheelJoint.prototype.SetMotorSpeed=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t},box2d.b2WheelJoint.prototype.SetMaxMotorTorque=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorTorque=t},box2d.b2WheelJoint.prototype.GetMotorTorque=function(t){return t*this.m_motorImpulse},box2d.b2WheelJoint.prototype.Dump=function(){var t,e;box2d.DEBUG&&(t=this.m_bodyA.m_islandIndex,e=this.m_bodyB.m_islandIndex,box2d.b2Log("  /*box2d.b2WheelJointDef*/ var jd = new box2d.b2WheelJointDef();\n"),box2d.b2Log("  jd.bodyA = bodies[%d];\n",t),box2d.b2Log("  jd.bodyB = bodies[%d];\n",e),box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),box2d.b2Log("  jd.localAxisA.Set(%.15f, %.15f);\n",this.m_localXAxisA.x,this.m_localXAxisA.y),box2d.b2Log("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false"),box2d.b2Log("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed),box2d.b2Log("  jd.maxMotorTorque = %.15f;\n",this.m_maxMotorTorque),box2d.b2Log("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz),box2d.b2Log("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio),box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index))},goog.provide("box2d.b2MotorJoint"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Math"),box2d.b2MotorJointDef=function(){goog.base(this,box2d.b2JointType.e_motorJoint),this.linearOffset=new box2d.b2Vec2(0,0)},goog.inherits(box2d.b2MotorJointDef,box2d.b2JointDef),box2d.b2MotorJointDef.prototype.linearOffset=null,box2d.b2MotorJointDef.prototype.angularOffset=0,box2d.b2MotorJointDef.prototype.maxForce=1,box2d.b2MotorJointDef.prototype.maxTorque=1,box2d.b2MotorJointDef.prototype.correctionFactor=.3,box2d.b2MotorJointDef.prototype.Initialize=function(t,e){this.bodyA=t,this.bodyB=e,this.bodyA.GetLocalPoint(this.bodyB.GetPosition(),this.linearOffset);t=this.bodyA.GetAngleRadians(),e=this.bodyB.GetAngleRadians();this.angularOffset=e-t},box2d.b2MotorJoint=function(t){goog.base(this,t),this.m_linearOffset=t.linearOffset.Clone(),this.m_linearImpulse=new box2d.b2Vec2(0,0),this.m_maxForce=t.maxForce,this.m_maxTorque=t.maxTorque,this.m_correctionFactor=t.correctionFactor,this.m_rA=new box2d.b2Vec2(0,0),this.m_rB=new box2d.b2Vec2(0,0),this.m_localCenterA=new box2d.b2Vec2(0,0),this.m_localCenterB=new box2d.b2Vec2(0,0),this.m_linearError=new box2d.b2Vec2(0,0),this.m_linearMass=new box2d.b2Mat22,this.m_qA=new box2d.b2Rot,this.m_qB=new box2d.b2Rot,this.m_K=new box2d.b2Mat22},goog.inherits(box2d.b2MotorJoint,box2d.b2Joint),box2d.b2MotorJoint.prototype.m_linearOffset=null,box2d.b2MotorJoint.prototype.m_angularOffset=0,box2d.b2MotorJoint.prototype.m_linearImpulse=null,box2d.b2MotorJoint.prototype.m_angularImpulse=0,box2d.b2MotorJoint.prototype.m_maxForce=0,box2d.b2MotorJoint.prototype.m_maxTorque=0,box2d.b2MotorJoint.prototype.m_correctionFactor=.3,box2d.b2MotorJoint.prototype.m_indexA=0,box2d.b2MotorJoint.prototype.m_indexB=0,box2d.b2MotorJoint.prototype.m_rA=null,box2d.b2MotorJoint.prototype.m_rB=null,box2d.b2MotorJoint.prototype.m_localCenterA=null,box2d.b2MotorJoint.prototype.m_localCenterB=null,box2d.b2MotorJoint.prototype.m_linearError=null,box2d.b2MotorJoint.prototype.m_angularError=0,box2d.b2MotorJoint.prototype.m_invMassA=0,box2d.b2MotorJoint.prototype.m_invMassB=0,box2d.b2MotorJoint.prototype.m_invIA=0,box2d.b2MotorJoint.prototype.m_invIB=0,box2d.b2MotorJoint.prototype.m_linearMass=null,box2d.b2MotorJoint.prototype.m_angularMass=0,box2d.b2MotorJoint.prototype.m_qA=null,box2d.b2MotorJoint.prototype.m_qB=null,box2d.b2MotorJoint.prototype.m_K=null,box2d.b2MotorJoint.prototype.GetAnchorA=function(t){return this.m_bodyA.GetPosition(t)},box2d.b2MotorJoint.prototype.GetAnchorB=function(t){return this.m_bodyB.GetPosition(t)},box2d.b2MotorJoint.prototype.GetReactionForce=function(t,e){return box2d.b2MulSV(t,this.m_linearImpulse,e)},box2d.b2MotorJoint.prototype.GetReactionTorque=function(t){return t*this.m_angularImpulse},box2d.b2MotorJoint.prototype.SetCorrectionFactor=function(t){box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(t)&&0<=t&&t<=1),this._correctionFactor=t},box2d.b2MotorJoint.prototype.GetCorrectionFactor=function(){return this.m_correctionFactor},box2d.b2MotorJoint.prototype.SetLinearOffset=function(t){box2d.b2IsEqualToV(t,this.m_linearOffset)||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_linearOffset.Copy(t))},box2d.b2MotorJoint.prototype.GetLinearOffset=function(t){return t.Copy(this.m_linearOffset)},box2d.b2MotorJoint.prototype.SetAngularOffset=function(t){t!==this.m_angularOffset&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_angularOffset=t)},box2d.b2MotorJoint.prototype.GetAngularOffset=function(){return this.m_angularOffset},box2d.b2MotorJoint.prototype.SetMaxForce=function(t){box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(t)&&0<=t),this.m_maxForce=t},box2d.b2MotorJoint.prototype.GetMaxForce=function(){return this.m_maxForce},box2d.b2MotorJoint.prototype.SetMaxTorque=function(t){box2d.ENABLE_ASSERTS&&box2d.b2Assert(box2d.b2IsValid(t)&&0<=t),this.m_maxTorque=t},box2d.b2MotorJoint.prototype.GetMaxTorque=function(){return this.m_maxTorque},box2d.b2MotorJoint.prototype.InitVelocityConstraints=function(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=t.positions[this.m_indexA].c,i=t.positions[this.m_indexA].a,o=t.velocities[this.m_indexA].v,s=t.velocities[this.m_indexA].w,n=t.positions[this.m_indexB].c,r=t.positions[this.m_indexB].a,a=t.velocities[this.m_indexB].v,h=t.velocities[this.m_indexB].w,l=this.m_qA.SetAngleRadians(i),c=this.m_qB.SetAngleRadians(r),u=box2d.b2MulRV(l,box2d.b2NegV(this.m_localCenterA,box2d.b2Vec2.s_t0),this.m_rA),c=box2d.b2MulRV(c,box2d.b2NegV(this.m_localCenterB,box2d.b2Vec2.s_t0),this.m_rB),d=this.m_invMassA,p=this.m_invMassB,f=this.m_invIA,b=this.m_invIB,y=this.m_K;y.ex.x=d+p+f*u.y*u.y+b*c.y*c.y,y.ex.y=-f*u.x*u.y-b*c.x*c.y,y.ey.x=y.ex.y,y.ey.y=d+p+f*u.x*u.x+b*c.x*c.x,y.GetInverse(this.m_linearMass),this.m_angularMass=f+b,0<this.m_angularMass&&(this.m_angularMass=1/this.m_angularMass),box2d.b2SubVV(box2d.b2SubVV(box2d.b2AddVV(n,c,box2d.b2Vec2.s_t0),box2d.b2AddVV(e,u,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t2),box2d.b2MulRV(l,this.m_linearOffset,box2d.b2Vec2.s_t3),this.m_linearError),this.m_angularError=r-i-this.m_angularOffset,t.step.warmStarting?(this.m_linearImpulse.SelfMul(t.step.dtRatio),this.m_angularImpulse*=t.step.dtRatio,y=this.m_linearImpulse,o.SelfMulSub(d,y),s-=f*(box2d.b2CrossVV(u,y)+this.m_angularImpulse),a.SelfMulAdd(p,y),h+=b*(box2d.b2CrossVV(c,y)+this.m_angularImpulse)):(this.m_linearImpulse.SetZero(),this.m_angularImpulse=0),t.velocities[this.m_indexA].w=s,t.velocities[this.m_indexB].w=h},box2d.b2MotorJoint.prototype.SolveVelocityConstraints=function(t){var e=t.velocities[this.m_indexA].v,i=t.velocities[this.m_indexA].w,o=t.velocities[this.m_indexB].v,s=t.velocities[this.m_indexB].w,n=this.m_invMassA,r=this.m_invMassB,a=this.m_invIA,h=this.m_invIB,l=t.step.dt,c=t.step.inv_dt,u=s-i+c*this.m_correctionFactor*this.m_angularError,d=-this.m_angularMass*u,p=this.m_angularImpulse,f=l*this.m_maxTorque,b=(this.m_angularImpulse=box2d.b2Clamp(this.m_angularImpulse+d,-f,f),i-=a*(d=this.m_angularImpulse-p),s+=h*d,this.m_rA),y=this.m_rB,u=box2d.b2AddVV(box2d.b2SubVV(box2d.b2AddVV(o,box2d.b2CrossSV(s,y,box2d.b2Vec2.s_t0),box2d.b2Vec2.s_t0),box2d.b2AddVV(e,box2d.b2CrossSV(i,b,box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t1),box2d.b2Vec2.s_t2),box2d.b2MulSV(c*this.m_correctionFactor,this.m_linearError,box2d.b2Vec2.s_t3),box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_Cdot),d=box2d.b2MulMV(this.m_linearMass,u,box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_impulse).SelfNeg(),p=box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_oldImpulse.Copy(this.m_linearImpulse),f=(this.m_linearImpulse.SelfAdd(d),l*this.m_maxForce);this.m_linearImpulse.GetLengthSquared()>f*f&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.SelfMul(f)),box2d.b2SubVV(this.m_linearImpulse,p,d),e.SelfMulSub(n,d),i-=a*box2d.b2CrossVV(b,d),o.SelfMulAdd(r,d),s+=h*box2d.b2CrossVV(y,d),t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=s},box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_Cdot=new box2d.b2Vec2,box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_impulse=new box2d.b2Vec2,box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_oldImpulse=new box2d.b2Vec2,box2d.b2MotorJoint.prototype.SolvePositionConstraints=function(t){return!0},box2d.b2MotorJoint.prototype.Dump=function(){var t,e;box2d.DEBUG&&(t=this.m_bodyA.m_islandIndex,e=this.m_bodyB.m_islandIndex,box2d.b2Log("  /*box2d.b2MotorJointDef*/ var jd = new box2d.b2MotorJointDef();\n"),box2d.b2Log("  jd.bodyA = bodies[%d];\n",t),box2d.b2Log("  jd.bodyB = bodies[%d];\n",e),box2d.b2Log("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),box2d.b2Log("  jd.linearOffset.SetXY(%.15f, %.15f);\n",this.m_linearOffset.x,this.m_linearOffset.y),box2d.b2Log("  jd.angularOffset = %.15f;\n",this.m_angularOffset),box2d.b2Log("  jd.maxForce = %.15f;\n",this.m_maxForce),box2d.b2Log("  jd.maxTorque = %.15f;\n",this.m_maxTorque),box2d.b2Log("  jd.correctionFactor = %.15f;\n",this.m_correctionFactor),box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index))},goog.provide("box2d"),goog.require("box2d.b2Settings"),goog.require("box2d.b2Draw"),goog.require("box2d.b2Timer"),goog.require("box2d.b2CircleShape"),goog.require("box2d.b2EdgeShape"),goog.require("box2d.b2ChainShape"),goog.require("box2d.b2PolygonShape"),goog.require("box2d.b2BroadPhase"),goog.require("box2d.b2Distance"),goog.require("box2d.b2DynamicTree"),goog.require("box2d.b2TimeOfImpact"),goog.require("box2d.b2Body"),goog.require("box2d.b2Fixture"),goog.require("box2d.b2WorldCallbacks"),goog.require("box2d.b2TimeStep"),goog.require("box2d.b2World"),goog.require("box2d.b2Contact"),goog.require("box2d.b2AreaJoint"),goog.require("box2d.b2DistanceJoint"),goog.require("box2d.b2FrictionJoint"),goog.require("box2d.b2GearJoint"),goog.require("box2d.b2MotorJoint"),goog.require("box2d.b2MouseJoint"),goog.require("box2d.b2PrismaticJoint"),goog.require("box2d.b2PulleyJoint"),goog.require("box2d.b2RevoluteJoint"),goog.require("box2d.b2RopeJoint"),goog.require("box2d.b2WeldJoint"),goog.require("box2d.b2WheelJoint"),goog.require("box2d.b2Rope"),goog.require("box2d.b2BuoyancyController"),goog.require("box2d.b2ConstantAccelController"),goog.require("box2d.b2ConstantForceController"),goog.require("box2d.b2GravityController"),goog.require("box2d.b2TensorDampingController"),Box2DPhysics=function(t,e){void 0===t&&(t=new box2d.b2Vec2(0,-9.8)),void 0===e&&(e=new Box2DPhysics.DefaultContactListener),this.world=new box2d.b2World(t),this.world.SetContactListener(e),this.version="BOX2D v1.0.2_004 - for Phaser 3 edited by (Evgeniy Zamyatin a.k.a. Jon DevoS)",this.ptmRatio=50,this.world,this.debugDraw,this.nextBodyId=0,this.nextFixtureId=0,this.friction=.2,this.restitution=0,this.density=1,this.frameRate=1/60,this.velocityIterations=8,this.positionIterations=3,this.paused=!1,this.mouseJoint=null,this.walls=null,this.toRemove=[],this.drawDebug=!1,this.debugGraphics,this.groundBody=null},Box2DPhysics.worldBoundsFilterCategory=32768,Box2DPhysics.prototype={destroy:function(){this.clearWorld(),this.toRemove=[],this.toRemove=null,this.debugGraphics=null,this.walls=null,this.world=null,this.debugDraw=null,this.groundBody=null,this.mouseJoint=null},clearWorld:function(){for(var t=this.getBodies();0<t.length;){var e=t.shift();this.world.DestroyBody(e.parent),e.parent.destroyInternal()}},getGroundBody:function(){return this.groundBody||(this.groundBody=this.createBody(0,0,0)),this.groundBody},getNextBodyId:function(){var t=this.nextBodyId;return this.nextBodyId+=1,t},getNextFixtureId:function(){var t=this.nextFixtureId;return this.nextFixtureId+=1,t},removeBodyNextStep:function(t){this.toRemove.push(t)},setBounds:function(t,e,i,o,s,n,r,a){void 0===s&&(s=!0),void 0===n&&(n=!0),void 0===r&&(r=!0),void 0===a&&(a=!0);var h=new box2d.b2PolygonShape,l=new box2d.b2FixtureDef,c=(l.shape=h,l.filter.categoryBits=Box2DPhysics.worldBoundsFilterCategory,l.filter.maskBits=65535,this.pxm(100)),u=2*c,i=this.pxm(i)/2,o=this.pxm(o)/2;this.walls=this.createBody(t,e,0),!0===s&&(h.SetAsOrientedBox(c,o+u,new box2d.b2Vec2(i+c,0),0),this.walls.data.CreateFixture(l).id=this.getNextFixtureId()),!0===n&&(h.SetAsOrientedBox(c,o+u,new box2d.b2Vec2(-i-c,0),0),this.walls.data.CreateFixture(l).id=this.getNextFixtureId()),!0===r&&(h.SetAsOrientedBox(i+u,c,new box2d.b2Vec2(0,o+c),0),this.walls.data.CreateFixture(l).id=this.getNextFixtureId()),a&&(h.SetAsOrientedBox(i+u,c,new box2d.b2Vec2(0,-o-c),0),this.walls.data.CreateFixture(l).id=this.getNextFixtureId())},pause:function(){this.paused=!0},resume:function(){this.paused=!1},preUpdate:function(){for(var t=this.toRemove.length;t--;)this.removeBody(this.toRemove[t]);this.toRemove.length=0},update:function(){this.paused||this.world.Step(this.frameRate,this.velocityIterations,this.positionIterations)},postUpdate:function(){this.drawDebug&&this.debugGraphics&&(this.clearContext(),this.renderDebugDraw(this.debugGraphics))},clearContext:function(){this.debugGraphics.clear()},createBody:function(t,e,i){return new Box2DPhysics.Body(this,t,e,i)},createCircle:function(t,e,i,o,s,n){t=this.createBody(t,e,i);return t.addCircle(o,s,n),t},createRectangle:function(t,e,i,o,s,n,r,a){t=this.createBody(t,e,i);return t.addRectangle(o,s,n,r,a),t},createPolygon:function(t,e,i,o,s,n){t=this.createBody(t,e,o);return t.addPolygon(i,s,n),t},removeBody:function(t){this.world.DestroyBody(t.data),t.destroyInternal()},getBodies:function(){for(var t=[],e=this.world.GetBodyList();e;e=e.GetNext())t.push(e);return t},toJSON:function(){return this.world.toJSON()},mpx:function(t){return t*this.ptmRatio},pxm:function(t){return t/this.ptmRatio},renderDebugDraw:function(t){this.debugDraw.start(t),this.world.DrawDebugData(),this.debugDraw.stop()},getFixturesAtPoint:function(t,e,i,o){void 0===i&&(i=!1),void 0===o&&(o=!1);var t=this.pxm(-t),e=this.pxm(-e),s=new box2d.b2Vec2(t,e),t=new box2d.b2AABB,e=new box2d.b2Vec2,n=(e.SetXY(.001,.001),box2d.b2SubVV(s,e,t.lowerBound),box2d.b2AddVV(s,e,t.upperBound),[]);return this.world.QueryAABB(function(t){return!(!o||t.GetBody().GetType()===box2d.b2BodyType.b2_dynamicBody)||!t.TestPoint(s)||(n.push(t),!i)},t),n},getBodiesAtPoint:function(t,e,i,o){var s=this.getFixturesAtPoint(t,e,i=void 0===i?!1:i,o=void 0===o?!1:o);if(s.length<1)return s;for(var n=[],r=0;r<s.length;r++)n.push(s[r].GetBody().parent);return n.filter(function(t,e){return n.indexOf(t)===e}),n},mouseDragStart:function(t,e){this.mouseDragEnd();var i=this.getFixturesAtPoint(t,e,!0,!0);i.length<1||(t=this.pxm(-t),e=this.pxm(-e),t=new box2d.b2Vec2(t,e),(e=new box2d.b2MouseJointDef).bodyA=this.mouseJointBody,e.bodyB=i[0].GetBody(),e.target.Copy(t),e.maxForce=1e3*e.bodyB.GetMass(),this.mouseJoint=this.world.CreateJoint(e),e.bodyB.SetAwake(!0))},mouseDragMove:function(t,e){this.mouseJoint&&(t=this.pxm(-t),e=this.pxm(-e),t=new box2d.b2Vec2(t,e),this.mouseJoint.SetTarget(t))},mouseDragEnd:function(){this.mouseJoint&&(this.world.DestroyJoint(this.mouseJoint),this.mouseJoint=null)},distanceJoint:function(t,e,i,o,s,n,r,a,h){void 0===s&&(s=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===a&&(a=0),void 0===h&&(h=0),o=this.pxm(-(o=void 0===o?0:o)),s=this.pxm(-s),n=this.pxm(-n),r=this.pxm(-r);var l=new box2d.b2DistanceJointDef;return l.bodyA=t.data,l.bodyB=e.data,l.localAnchorA.SetXY(o,s),l.localAnchorB.SetXY(n,r),i=null==i?(t=new box2d.b2Vec2,e=new box2d.b2Vec2,l.bodyA.GetWorldPoint(l.localAnchorA,t),l.bodyB.GetWorldPoint(l.localAnchorB,e),t.SelfSub(e),t.Length()):this.pxm(i),l.length=i,l.frequencyHz=a,l.dampingRatio=h,this.world.CreateJoint(l)},ropeJoint:function(t,e,i,o,s,n,r){void 0===s&&(s=0),void 0===n&&(n=0),void 0===r&&(r=0),o=this.pxm(-(o=void 0===o?0:o)),s=this.pxm(-s),n=this.pxm(-n),r=this.pxm(-r);var a=new box2d.b2RopeJointDef;return a.bodyA=t.data,a.bodyB=e.data,a.localAnchorA.SetXY(o,s),a.localAnchorB.SetXY(n,r),i=null==i?(t=new box2d.b2Vec2,e=new box2d.b2Vec2,a.bodyA.GetWorldPoint(a.localAnchorA,t),a.bodyB.GetWorldPoint(a.localAnchorB,e),t.SelfSub(e),t.Length()):this.pxm(i),a.maxLength=i,this.world.CreateJoint(a)},revoluteJoint:function(t,e,i,o,s,n,r,a,h,l,c,u){void 0===o&&(o=0),void 0===s&&(s=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===a&&(a=0),void 0===h&&(h=!1),void 0===l&&(l=0),void 0===c&&(c=0),void 0===u&&(u=!1),i=this.pxm(-(i=void 0===i?0:i)),o=this.pxm(-o),s=this.pxm(-s),n=this.pxm(-n);var d=new box2d.b2RevoluteJointDef;return d.bodyA=t.data,d.bodyB=e.data,d.localAnchorA.SetXY(i,o),d.localAnchorB.SetXY(s,n),d.motorSpeed=Phaser.Math.DegToRad(-r),d.maxMotorTorque=a,d.enableMotor=h,d.lowerAngle=Phaser.Math.DegToRad(l),d.upperAngle=Phaser.Math.DegToRad(c),d.enableLimit=u,this.world.CreateJoint(d)},prismaticJoint:function(t,e,i,o,s,n,r,a,h,l,c,u,d,p,f){void 0===i&&(i=1),void 0===o&&(o=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===a&&(a=0),void 0===h&&(h=0),void 0===l&&(l=0),void 0===u&&(u=0),void 0===d&&(d=0),void 0===p&&(p=!1),void 0===c&&(c=!1),void 0===f&&(f=0),i*=-1,o*=-1,s=this.pxm(-(s=void 0===s?0:s)),n=this.pxm(-n),r=this.pxm(-r),a=this.pxm(-a),h=this.pxm(h),u=this.pxm(u),d=this.pxm(d);var b=new box2d.b2PrismaticJointDef;return b.bodyA=t.data,b.bodyB=e.data,b.localAxisA.SetXY(i,o),b.localAnchorA.SetXY(s,n),b.localAnchorB.SetXY(r,a),b.motorSpeed=h,b.maxMotorForce=l,b.enableMotor=c,b.lowerTranslation=u,b.upperTranslation=d,b.enableLimit=p,b.referenceAngle=Phaser.Math.DegToRad(-f),this.world.CreateJoint(b)},frictionJoint:function(t,e,i,o,s,n,r,a){void 0===n&&(n=0),void 0===r&&(r=0),void 0===a&&(a=0),void 0===i&&(i=0),void 0===o&&(o=0),s=this.pxm(-(s=void 0===s?0:s)),n=this.pxm(-n),r=this.pxm(-r),a=this.pxm(-a);var h=new box2d.b2FrictionJointDef;return h.bodyA=t.data,h.bodyB=e.data,h.localAnchorA.SetXY(s,n),h.localAnchorB.SetXY(r,a),h.maxForce=i,h.maxTorque=o,this.world.CreateJoint(h)},weldJoint:function(t,e,i,o,s,n,r,a){void 0===o&&(o=0),void 0===s&&(s=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===a&&(a=0),i=this.pxm(-(i=void 0===i?0:i)),o=this.pxm(-o),s=this.pxm(-s),n=this.pxm(-n);var h=new box2d.b2WeldJointDef;return h.bodyA=t.data,h.bodyB=e.data,h.localAnchorA.SetXY(i,o),h.localAnchorB.SetXY(s,n),h.frequencyHz=r,h.dampingRatio=a,this.world.CreateJoint(h)},motorJoint:function(t,e,i,o,s,n,r,a){void 0===r&&(r=0),void 0===a&&(a=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=1),n=this.pxm(-(n=void 0===n?0:n)),r=this.pxm(-r);var h=new box2d.b2MotorJointDef;return h.bodyA=t.data,h.bodyB=e.data,h.linearOffset.SetXY(n,r),h.maxForce=i,h.maxTorque=o,h.angularOffset=Phaser.Math.DegToRad(-a),h.correctionFactor=s,this.world.CreateJoint(h)},wheelJoint:function(t,e,i,o,s,n,r,a,h,l,c,u,d){void 0===r&&(r=0),void 0===a&&(a=1),void 0===o&&(o=0),void 0===s&&(s=0),void 0===n&&(n=0),void 0===c&&(c=0),void 0===u&&(u=0),void 0===d&&(d=!1),void 0===h&&(h=0),void 0===l&&(l=0),r*=-1,a*=-1,i=this.pxm(-(i=void 0===i?0:i)),o=this.pxm(-o),s=this.pxm(-s),n=this.pxm(-n);var p=new box2d.b2WheelJointDef;return p.bodyA=t.data,p.bodyB=e.data,p.localAxisA.SetXY(r,a),p.localAnchorA.SetXY(i,o),p.localAnchorB.SetXY(s,n),p.motorSpeed=Phaser.Math.DegToRad(-c),p.maxMotorTorque=u,p.enableMotor=d,p.frequencyHz=h,p.dampingRatio=l,this.world.CreateJoint(p)},pulleyJoint:function(t,e,i,o,s,n,r,a,h,l,c,u,d){void 0===o&&(o=0),void 0===s&&(s=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===a&&(a=0),void 0===h&&(h=0),void 0===l&&(l=0),void 0===c&&(c=1),void 0===u&&(u=100),void 0===d&&(d=100),i=this.pxm(-(i=void 0===i?0:i)),o=this.pxm(-o),s=this.pxm(-s),n=this.pxm(-n),r=this.pxm(-r),a=this.pxm(-a),h=this.pxm(-h),l=this.pxm(-l),u=this.pxm(u),d=this.pxm(d);var p=new box2d.b2PulleyJointDef;return p.bodyA=t.data,p.bodyB=e.data,p.localAnchorA.SetXY(i,o),p.localAnchorB.SetXY(s,n),p.groundAnchorA.SetXY(r,a),p.groundAnchorB.SetXY(h,l),p.lengthA=u,p.lengthB=d,p.ratio=c,this.world.CreateJoint(p)},gearJoint:function(t,e,i){void 0===i&&(i=1);var o=new box2d.b2GearJointDef;return o.joint1=t,o.joint2=e,o.ratio=-i,o.bodyA=t.GetBodyA(),o.bodyB=e.GetBodyB(),this.world.CreateJoint(o)},raycast:function(t,e,i,o,s,n,r){void 0===s&&(s=!0),void 0===n&&(r=n=null),t=this.pxm(-t),e=this.pxm(-e),i=this.pxm(-i),o=this.pxm(-o);var t=new box2d.b2Vec2(t,e),e=new box2d.b2Vec2(i,o),a=[],h=new Box2DPhysics.RayCastCallback(this,s,n,r);this.world.RayCast(h,t,e);for(var l=0;l<h.hits.length;l++){var c=h.hits[l];c.point={x:this.mpx(-c.point.x),y:this.mpx(-c.point.y)},c.normal={x:-c.normal.x,y:-c.normal.y},a.push(c)}return a},queryAABB:function(t,e,i,o){t=this.pxm(-t),e=this.pxm(-e),i=this.pxm(i),o=this.pxm(o);var s=new box2d.b2AABB,i=(s.lowerBound.SetXY(t-i,e-o),s.upperBound.SetXY(t,e),new Box2DPhysics.QueryCallback(this));return this.world.QueryAABB(i,s),i.hits},queryFixture:function(t){var e=new Box2DPhysics.QueryCallback(this);return this.world.QueryShape(e,t.GetShape(),t.GetBody().GetTransform()),e.hits},setPTMRatio:function(t){this.ptmRatio=t,this.debugDraw&&this.debugGraphics&&(this.debugDraw=new Box2DPhysics.DefaultDebugDraw(this.ptmRatio),this.world.SetDebugDraw(this.debugDraw))},toggleDebug:function(){this.drawDebug=!this.drawDebug,!1===this.drawDebug&&this.clearContext()},createDebugGraphics:function(t){this.debugGraphics||(this.debugGraphics=t.add.graphics(),this.debugGraphics.depth=1e4,this.debugDraw)||(this.debugDraw=new Box2DPhysics.DefaultDebugDraw(this.ptmRatio),this.world.SetDebugDraw(this.debugDraw))}},Box2DPhysics.RayCastCallback=function(t,e,i,o){this.world=t,this.closestHitOnly=e,this.filterFunction=i,this.filterFunctionContext=o,this.hits=[]},goog.inherits(Box2DPhysics.RayCastCallback,box2d.b2RayCastCallback),Box2DPhysics.RayCastCallback.prototype.ReportFixture=function(t,e,i,o){if(null!==this.filterFunction){var s={x:this.world.mpx(-e.x),y:this.world.mpx(-e.y)},n={x:-i.x,y:-i.y},r=t.GetBody().parent;if(!this.filterFunction.call(this.filterFunctionContext,r,t,s,n))return-1}this.closestHitOnly&&(this.hits=[]);r={};return r.body=t.GetBody().parent,r.fixture=t,r.point={x:e.x,y:e.y},r.normal={x:i.x,y:i.y},this.hits.push(r),this.closestHitOnly?o:1},Box2DPhysics.QueryCallback=function(t){this.world=t,this.hits=[]},goog.inherits(Box2DPhysics.QueryCallback,box2d.b2QueryCallback),Box2DPhysics.QueryCallback.prototype.ReportFixture=function(t){var e={};return e.body=t.GetBody().parent,e.fixture=t,this.hits.push(e),!0},Box2DPhysics.Body=function(t,e,i,o){void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=2),this.world=t,this.id=this.world.getNextBodyId(),this.bodyDef=new box2d.b2BodyDef,this.bodyDef.position.SetXY(-this.world.pxm(e),-this.world.pxm(i)),0===o?this.bodyDef.type=box2d.b2BodyType.b2_staticBody:1===o?this.bodyDef.type=box2d.b2BodyType.b2_kinematicBody:2===o?this.bodyDef.type=box2d.b2BodyType.b2_dynamicBody:3===o&&(this.bodyDef.type=box2d.b2BodyType.b2_bulletBody),this.data=this.world.world.CreateBody(this.bodyDef),this.data.world=this.world.world,(this.data.parent=this).velocity=new Box2DPhysics.PointProxy(this.world,this.data,this.data.GetLinearVelocity,this.data.SetLinearVelocity),this._contactCallbacks={},this._contactCallbackContext={},this._presolveCallbacks={},this._presolveCallbackContext={},this._postsolveCallbacks={},this._postsolveCallbackContext={}},Box2DPhysics.Body.prototype={update:function(){},setContactCallback:function(t,e,i){var o=-1;t&&(o=t.id),void 0===e?(delete this._contactCallbacks[o],delete this._contactCallbackContext[o]):(this._contactCallbacks[o]=e,this._contactCallbackContext[o]=i)},setPresolveCallback:function(t,e,i){var o=-1;t&&(o=t.id),void 0===e?(delete this._presolveCallbacks[o],delete this._presolveCallbackContext[o]):(this._presolveCallbacks[o]=e,this._presolveCallbackContext[o]=i)},setPostsolveCallback:function(t,e,i){var o=-1;t&&(o=t.id),void 0===e?(delete this._postsolveCallbacks[o],delete this._postsolveCallbackContext[o]):(this._postsolveCallbacks[o]=e,this._postsolveCallbackContext[o]=i)},setCollisionCategory:function(t,e){if(void 0===e)for(var i=this.data.GetFixtureList();i;i=i.GetNext())i.GetFilterData().categoryBits=t;else e.GetFilterData().categoryBits=t},setCollisionMask:function(t,e){if(void 0===e)for(var i=this.data.GetFixtureList();i;i=i.GetNext())i.GetFilterData().maskBits=t;else e.GetFilterData().maskBits=t},applyForce:function(t,e){this.data.ApplyForce(new box2d.b2Vec2(-t,-e),this.data.GetWorldCenter(),!0)},setZeroAngularVelocity:function(){this.data.SetAngularVelocity(0)},setZeroVelocity:function(){this.data.SetLinearVelocity(box2d.b2Vec2.ZERO)},setZeroDamping:function(){this.data.SetLinearDamping(0),this.data.SetAngularDamping(0)},toLocalPoint:function(t,e){return t.x=this.world.pxm(-e.x),t.y=this.world.pxm(-e.y),this.data.GetLocalPoint(t,t),t.x=this.world.mpx(-t.x),t.y=this.world.mpx(-t.y),t},toWorldPoint:function(t,e){return t.x=this.world.pxm(-e.x),t.y=this.world.pxm(-e.y),this.data.GetWorldPoint(t,t),t.x=this.world.mpx(-t.x),t.y=this.world.mpx(-t.y),t},toLocalVector:function(t,e){return t.x=this.world.pxm(-e.x),t.y=this.world.pxm(-e.y),this.data.GetLocalVector(t,t),t.x=this.world.mpx(-t.x),t.y=this.world.mpx(-t.y),t},toWorldVector:function(t,e){t.x=this.world.pxm(-e.x),t.y=this.world.pxm(-e.y),this.data.GetWorldVector(t,t),t.x=this.world.mpx(-t.x),t.y=this.world.mpx(-t.y)},rotateLeft:function(t){this.data.SetAngularVelocity(this.world.pxm(-t))},rotateRight:function(t){this.data.SetAngularVelocity(this.world.pxm(t))},moveForward:function(t){var t=this.world.pxm(t),e=new box2d.b2Vec2;this.toWorldVector(e,{x:0,y:t}),this.data.SetLinearVelocity(e)},moveBackward:function(t){var t=this.world.pxm(-t),e=new box2d.b2Vec2;this.toWorldVector(e,{x:0,y:t}),this.data.SetLinearVelocity(e)},thrust:function(t){var t=this.world.pxm(t)*this.data.GetMass(),e=new box2d.b2Vec2;this.toWorldVector(e,{x:0,y:t}),this.data.ApplyForce(e,this.data.GetWorldCenter(),!0)},reverse:function(t){var t=-this.world.pxm(t)*this.data.GetMass(),e=new box2d.b2Vec2;this.toWorldVector(e,{x:0,y:t}),this.data.ApplyForce(e,this.data.GetWorldCenter(),!0)},moveLeft:function(t){this.velocity.x=-t},moveRight:function(t){this.velocity.x=t},moveUp:function(t){this.velocity.y=-t},moveDown:function(t){this.velocity.y=t},kill:function(){this.data.SetActive(!1)},reset:function(t,e){this.data.SetPositionXY(this.world.pxm(-t),this.world.pxm(-e)),this.data.SetActive(!0)},removeFromWorld:function(){this.world.removeBodyNextStep(this)},destroy:function(){this.removeFromWorld()},destroyInternal:function(){this._bodyCallbacks={},this._bodyCallbackContext={},this._categoryCallbacks={},this._categoryCallbackContext={},this.world=null},clearFixtures:function(){for(var t=[],e=this.data.GetFixtureList();e;e=e.GetNext())t.push(e);for(var i=t.length;i--;)this.data.DestroyFixture(t[i])},addCircle:function(t,e,i){void 0===t&&(t=32),void 0===e&&(e=0),void 0===i&&(i=0);t=new box2d.b2CircleShape(this.world.pxm(t)),t.m_p.SetXY(this.world.pxm(-e),this.world.pxm(-i)),e=new box2d.b2FixtureDef,e.shape=t,e.friction=this.world.friction,e.restitution=this.world.restitution,e.density=this.world.density,i=this.data.CreateFixture(e);return i.id=this.world.getNextFixtureId(),i},addRectangle:function(t,e,i,o,s){void 0===e&&(e=16),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),t=this.world.pxm(t=void 0===t?16:t),e=this.world.pxm(e);var n=new box2d.b2PolygonShape,t=(n.SetAsOrientedBox(.5*t,.5*e,new box2d.b2Vec2(this.world.pxm(-i),this.world.pxm(-o)),s),new box2d.b2FixtureDef),e=(t.shape=n,t.friction=this.world.friction,t.restitution=this.world.restitution,t.density=this.world.density,this.data.CreateFixture(t));return e.id=this.world.getNextFixtureId(),e},addEdge:function(t,e,i,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=0);var s=new box2d.b2EdgeShape,t=(s.Set(new box2d.b2Vec2(this.world.pxm(-t),this.world.pxm(-e)),new box2d.b2Vec2(this.world.pxm(-i),this.world.pxm(-o))),new box2d.b2FixtureDef),e=(t.shape=s,t.friction=this.world.friction,t.restitution=this.world.restitution,t.density=this.world.density,this.data.CreateFixture(t));return e.id=this.world.getNextFixtureId(),e},addChain:function(t,e,i,o){if(void 0===t)return null;if(t.length<4)return null;void 0===e&&(e=0),void 0===i&&(i=(t.length-e)/2);for(var s=[],n=e;n<e+i;n++)s.push(new box2d.b2Vec2(this.world.pxm(-t[2*n]),this.world.pxm(-t[2*n+1])));var r=new box2d.b2ChainShape,o=(o?r.CreateLoop(s,s.length):r.CreateChain(s,s.length),new box2d.b2FixtureDef),r=(o.shape=r,o.friction=this.world.friction,o.restitution=this.world.restitution,o.density=this.world.density,this.data.CreateFixture(o));return r.id=this.world.getNextFixtureId(),r},addLoop:function(t,e,i){return this.addChain(t,e,i,!0)},addPolygon:function(t,e,i){if(void 0===t)return null;if(t.length<6)return null;void 0===e&&(e=0),void 0===i&&(i=(t.length-e)/2);for(var o=[],s=e;s<e+i;s++)o.push({x:this.world.pxm(-t[2*s]),y:this.world.pxm(-t[2*s+1])});var n=new Box2DPhysics.Polygon;n.setFromXYObjects(o);for(var r=n.decompose(o),a=null,s=0;s<r.length;s++){var h=new box2d.b2PolygonShape,l=(h.Set(r[s],r[s].length),new box2d.b2FixtureDef);l.shape=h,l.friction=this.world.friction,l.restitution=this.world.restitution,l.density=this.world.density,(a=this.data.CreateFixture(l)).id=this.world.getNextFixtureId()}return a},removeFixture:function(t){return t.GetBody()==this.data&&(this.data.DestroyFixture(t),!0)},setCircle:function(t,e,i){return this.clearFixtures(),this.addCircle(t,e,i)},setRectangle:function(t,e,i,o,s){return this.clearFixtures(),this.addRectangle(t,e,i,o,s)},setEdge:function(t,e,i,o){return this.clearFixtures(),this.addEdge(t,e,i,o)},setChain:function(t,e,i,o){return this.clearFixtures(),this.addChain(t,e,i,o)},setLoop:function(t,e,i){return this.setChain(t,e,i,!0)},setPolygon:function(t,e,i){return this.clearFixtures(),this.addPolygon(t,e,i)},containsPoint:function(t,e){for(var t=this.world.pxm(-t),e=this.world.pxm(-e),i=new box2d.b2Vec2(t,e),o=this.data.GetFixtureList();o;o=o.GetNext())if(o.TestPoint(i))return!0;return!1},setBodyType:function(t){var e=this.data.GetType();0===t&&e!==box2d.b2BodyType.b2_staticBody?this.data.SetType(box2d.b2BodyType.b2_staticBody):1===t&&this.data.GetType()!==box2d.b2BodyType.b2_kinematicBody?this.data.SetType(box2d.b2BodyType.b2_kinematicBody):2===t&&e!==box2d.b2BodyType.b2_dynamicBody&&this.data.SetType(box2d.b2BodyType.b2_dynamicBody)},setXY:function(t,e){this.data.SetPositionXY(this.world.pxm(-t),this.world.pxm(-e))}},Box2DPhysics.Body.prototype.constructor=Box2DPhysics.Body,Object.defineProperty(Box2DPhysics.Body.prototype,"static",{get:function(){return this.data.GetType()===box2d.b2BodyType.b2_staticBody},set:function(t){t&&this.data.GetType()!==box2d.b2BodyType.b2_staticBody?this.data.SetType(box2d.b2BodyType.b2_staticBody):t||this.data.GetType()!==box2d.b2BodyType.b2_staticBody||this.data.SetType(box2d.b2BodyType.b2_dynamicBody)}}),Object.defineProperty(Box2DPhysics.Body.prototype,"dynamic",{get:function(){return this.data.GetType()===box2d.b2BodyType.b2_dynamicBody},set:function(t){t&&this.data.GetType()!==box2d.b2BodyType.b2_dynamicBody?this.data.SetType(box2d.b2BodyType.b2_dynamicBody):t||this.data.GetType()!==box2d.b2BodyType.b2_dynamicBody||this.data.SetType(box2d.b2BodyType.b2_staticBody)}}),Object.defineProperty(Box2DPhysics.Body.prototype,"kinematic",{get:function(){return this.data.GetType()===box2d.b2BodyType.b2_kinematicBody},set:function(t){t&&this.data.GetType()!==box2d.b2BodyType.b2_kinematicBody?this.data.SetType(box2d.b2BodyType.b2_kinematicBody):t||this.data.GetType()!==box2d.b2BodyType.b2_kinematicBody||this.data.SetType(box2d.b2BodyType.b2_staticBody)}}),Object.defineProperty(Box2DPhysics.Body.prototype,"angle",{get:function(){return Phaser.Math.Wrap(Phaser.Math.RadToDeg(this.data.GetAngle()),-180,180)},set:function(t){this.data.SetAngle(Phaser.Math.DegToRad(Phaser.Math.Wrap(t,-180,180)))}}),Object.defineProperty(Box2DPhysics.Body.prototype,"linearDamping",{get:function(){return this.data.GetLinearDamping()},set:function(t){this.data.SetLinearDamping(t)}}),Object.defineProperty(Box2DPhysics.Body.prototype,"angularDamping",{get:function(){return this.data.GetAngularDamping()},set:function(t){this.data.SetAngularDamping(t)}}),Object.defineProperty(Box2DPhysics.Body.prototype,"angularVelocity",{get:function(){return this.data.GetAngularVelocity()},set:function(t){this.data.SetAngularVelocity(t)}}),Object.defineProperty(Box2DPhysics.Body.prototype,"fixedRotation",{get:function(){return this.data.IsFixedRotation()},set:function(t){this.data.SetFixedRotation(t)}}),Object.defineProperty(Box2DPhysics.Body.prototype,"gravityScale",{get:function(){return this.data.GetGravityScale()},set:function(t){this.data.SetGravityScale(t)}}),Object.defineProperty(Box2DPhysics.Body.prototype,"friction",{get:function(){var t=this.data.GetFixtureList();return t?t.GetFriction():0},set:function(t){for(var e=this.data.GetFixtureList();e;e=e.GetNext())e.SetFriction(t),e.Refilter()}}),Object.defineProperty(Box2DPhysics.Body.prototype,"restitution",{get:function(){var t=this.data.GetFixtureList();return t?t.GetRestitution():0},set:function(t){for(var e=this.data.GetFixtureList();e;e=e.GetNext())e.SetRestitution(t),e.Refilter()}}),Object.defineProperty(Box2DPhysics.Body.prototype,"density",{get:function(){var t=this.data.GetFixtureList();return t?t.GetDensity():0},set:function(t){for(var e=this.data.GetFixtureList();e;e=e.GetNext())e.SetDensity(t),e.Refilter()}}),Object.defineProperty(Box2DPhysics.Body.prototype,"sensor",{get:function(){var t=this.data.GetFixtureList();return t?t.IsSensor():0},set:function(t){for(var e=this.data.GetFixtureList();e;e=e.GetNext())e.SetSensor(t),e.Refilter()}}),Object.defineProperty(Box2DPhysics.Body.prototype,"bullet",{get:function(){return this.data.IsBullet()},set:function(t){this.data.SetBullet(t)}}),Object.defineProperty(Box2DPhysics.Body.prototype,"mass",{get:function(){return this.data.GetMass()},set:function(t){if(0===t)this.data.SetType(box2d.b2BodyType.b2_staticBody);else{this.data.GetType()!==box2d.b2BodyType.b2_dynamicBody&&this.data.SetType(box2d.b2BodyType.b2_dynamicBody);for(var e=t/this.data.GetMass(),i=this.data.GetFixtureList();i;i=i.GetNext()){var o=i.GetDensity();i.SetDensity(o*e)}this.data.ResetMassData()}}}),Object.defineProperty(Box2DPhysics.Body.prototype,"rotation",{get:function(){return this.data.GetAngle()},set:function(t){this.data.SetAngle(t)}}),Object.defineProperty(Box2DPhysics.Body.prototype,"x",{get:function(){return this.world.mpx(-this.data.GetPosition().x)},set:function(t){this.data.SetPositionXY(this.world.pxm(-t),this.data.GetPosition().y)}}),Object.defineProperty(Box2DPhysics.Body.prototype,"y",{get:function(){return this.world.mpx(-this.data.GetPosition().y)},set:function(t){this.data.SetPositionXY(this.data.GetPosition().x,this.world.pxm(-t))}}),Object.defineProperty(Box2DPhysics.Body.prototype,"active",{get:function(){return this.data.IsActive()},set:function(t){this.data.SetActive(t)}}),Object.defineProperty(Box2DPhysics.Body.prototype,"collideWorldBounds",{get:function(){for(var t=this.data.GetFixtureList();t;t=t.GetNext())if(t.GetFilterData().maskBits&Box2DPhysics.worldBoundsFilterCategory)return!0;return!1},set:function(t){for(var e=this.data.GetFixtureList();e;e=e.GetNext()){var i=e.GetFilterData();t?i.maskBits|=Box2DPhysics.worldBoundsFilterCategory:i.maskBits&=~Box2DPhysics.worldBoundsFilterCategory}}}),Box2DPhysics.PointProxy=function(t,e,i,o){this.world=t,this.object=e,this.gettor=i,this.settor=o},Box2DPhysics.PointProxy.prototype={add:function(t,e){var i=this.gettor.call(this.object);i.x+=this.world.pxm(-t),i.y+=this.world.pxm(-e),this.settor.call(this.object,i)},set:function(t,e){var i=this.gettor.call(this.object);i.x=this.world.pxm(-t),i.y=this.world.pxm(-e),this.settor.call(this.object,i)},multiply:function(t,e){var i=this.gettor.call(this.object);i.x*=t,i.y*=e,this.settor.call(this.object,i)},length:function(){return Math.sqrt(this.lengthSquared())},lengthSquared:function(){var t=this.gettor.call(this.object),e=this.world.mpx(-t.x),t=this.world.mpx(-t.y);return e*e+t*t}},Box2DPhysics.PointProxy.prototype.constructor=Box2DPhysics.PointProxy,Object.defineProperty(Box2DPhysics.PointProxy.prototype,"x",{get:function(){return this.world.mpx(-this.gettor.call(this.object).x)},set:function(t){var e=this.gettor.call(this.object);e.x=this.world.pxm(-t),this.settor.call(this.object,e)}}),Object.defineProperty(Box2DPhysics.PointProxy.prototype,"y",{get:function(){return this.world.mpx(-this.gettor.call(this.object).y)},set:function(t){var e=this.gettor.call(this.object);e.y=this.world.pxm(-t),this.settor.call(this.object,e)}}),Box2DPhysics.DefaultDebugDraw=function(t){this.context=null,this.pixelsPerMeter=t,this.lineWidth=1/this.pixelsPerMeter,this.flags=box2d.b2DrawFlags.e_shapeBit},Box2DPhysics.DefaultDebugDraw.prototype.color=new box2d.b2Color(1,1,1),Box2DPhysics.DefaultDebugDraw.prototype.rgbToHex=function(t){return(255*t.r<<16)+(255*t.g<<8)+255*t.b},Box2DPhysics.DefaultDebugDraw.prototype.SetFlags=function(t){this.flags=t},Box2DPhysics.DefaultDebugDraw.prototype.GetFlags=function(){return this.flags},Box2DPhysics.DefaultDebugDraw.prototype.start=function(t){this.context=t,this.context.save(),this.context.scaleCanvas(-this.pixelsPerMeter,-this.pixelsPerMeter)},Box2DPhysics.DefaultDebugDraw.prototype.stop=function(){this.context.restore()},Box2DPhysics.DefaultDebugDraw.prototype.PushTransform=function(t){var e=this.context;e.save(),e.translateCanvas(t.p.x,t.p.y),e.rotateCanvas(t.q.GetAngleRadians())},Box2DPhysics.DefaultDebugDraw.prototype.PopTransform=function(){this.context.restore()},Box2DPhysics.DefaultDebugDraw.prototype.DrawPolygon=function(t,e,i){if(e){var o=this.context;o.lineStyle(this.lineWidth,this.rgbToHex(i)),o.beginPath(),o.moveTo(t[0].x,t[0].y);for(var s=1;s<e;s++)o.lineTo(t[s].x,t[s].y);o.closePath(),o.stroke()}},Box2DPhysics.DefaultDebugDraw.prototype.DrawSolidPolygon=function(t,e,i){if(e){var o=this.context,i=this.rgbToHex(i);o.lineStyle(this.lineWidth,i),o.fillStyle(i,.5),o.beginPath(),o.moveTo(t[0].x,t[0].y);for(var s=1;s<e;s++)o.lineTo(t[s].x,t[s].y);o.closePath(),o.fillPath(),o.strokePath()}},Box2DPhysics.DefaultDebugDraw.prototype.DrawCircle=function(t,e,i){var o;e&&((o=this.context).beginPath(),o.arc(t.x,t.y,e,0,2*Math.PI,!0),o.lineStyle(this.lineWidth,this.rgbToHex(i)),o.stroke())},Box2DPhysics.DefaultDebugDraw.prototype.DrawSolidCircle=function(t,e,i,o){var s;e&&(s=this.context,o=this.rgbToHex(o),s.lineStyle(this.lineWidth,o),s.fillStyle(o,.5),o=t.x,t=t.y,s.beginPath(),s.arc(o,t,e,0,2*Math.PI,!0),s.moveTo(o,t),s.lineTo(o+i.x*e,t+i.y*e),s.fillPath(),s.strokePath())},Box2DPhysics.DefaultDebugDraw.prototype.DrawSegment=function(t,e,i){var o=this.context;o.beginPath(),o.moveTo(t.x,t.y),o.lineTo(e.x,e.y),o.lineStyle(this.lineWidth,this.rgbToHex(i)),o.stroke()},Box2DPhysics.DefaultDebugDraw.prototype.DrawTransform=function(t){var e=this.context;this.PushTransform(t),e.beginPath(),e.moveTo(0,0),e.lineTo(1,0),e.lineStyle(this.lineWidth,this.rgbToHex(box2d.b2Color.RED)),e.stroke(),e.beginPath(),e.moveTo(0,0),e.lineTo(0,1),e.lineStyle(this.lineWidth,this.rgbToHex(box2d.b2Color.GREEN)),e.stroke(),this.PopTransform(t)},Box2DPhysics.DefaultDebugDraw.prototype.DrawPoint=function(t,e,i){var o=this.context,i=(o.fillStyle(this.rgbToHex(i),.5),e/2);o.fillRect(t.x-i,t.y-i,e,e)},Box2DPhysics.DefaultDebugDraw.prototype.DrawAABB=function(t,e){var i=this.context,e=(i.lineStyle(this.lineWidth,this.rgbToHex(e)),t.lowerBound.x),o=t.lowerBound.y,s=t.upperBound.x-t.lowerBound.x,t=t.upperBound.y-t.lowerBound.y;i.strokeRect(e,o,s,t)},Object.defineProperty(Box2DPhysics.DefaultDebugDraw.prototype,"shapes",{get:function(){return this.flags&box2d.b2DrawFlags.e_shapeBit},set:function(t){t?this.flags|=box2d.b2DrawFlags.e_shapeBit:this.flags&=~box2d.b2DrawFlags.e_shapeBit}}),Object.defineProperty(Box2DPhysics.DefaultDebugDraw.prototype,"joints",{get:function(){return this.flags&box2d.b2DrawFlags.e_jointBit},set:function(t){t?this.flags|=box2d.b2DrawFlags.e_jointBit:this.flags&=~box2d.b2DrawFlags.e_jointBit}}),Object.defineProperty(Box2DPhysics.DefaultDebugDraw.prototype,"aabbs",{get:function(){return this.flags&box2d.b2DrawFlags.e_aabbBit},set:function(t){t?this.flags|=box2d.b2DrawFlags.e_aabbBit:this.flags&=~box2d.b2DrawFlags.e_aabbBit}}),Object.defineProperty(Box2DPhysics.DefaultDebugDraw.prototype,"pairs",{get:function(){return this.flags&box2d.b2DrawFlags.e_pairBit},set:function(t){t?this.flags|=box2d.b2DrawFlags.e_pairBit:this.flags&=~box2d.b2DrawFlags.e_pairBit}}),Object.defineProperty(Box2DPhysics.DefaultDebugDraw.prototype,"centerOfMass",{get:function(){return this.flags&box2d.b2DrawFlags.e_centerOfMassBit},set:function(t){t?this.flags|=box2d.b2DrawFlags.e_centerOfMassBit:this.flags&=~box2d.b2DrawFlags.e_centerOfMassBit}}),Box2DPhysics.DefaultContactListener=function(){},Box2DPhysics.DefaultContactListener.prototype.BeginContact=function(t){this.handleContactBeginOrEnd(t,!0)},Box2DPhysics.DefaultContactListener.prototype.EndContact=function(t){this.handleContactBeginOrEnd(t,!1)},Box2DPhysics.DefaultContactListener.prototype.handleContactBeginOrEnd=function(t,e){var i,o=t.GetFixtureA(),s=t.GetFixtureB(),n=o.GetBody(),r=s.GetBody(),n=n.parent,r=r.parent;void 0!==n&&void 0!==r&&(n._contactCallbacks&&(n._contactCallbacks[-1]?n._contactCallbacks[-1].call(n._contactCallbackContext[-1],n,r,o,s,e,t):(i=r.id,n._contactCallbacks[i]&&n._contactCallbacks[i].call(n._contactCallbackContext[i],n,r,o,s,e,t))),r._contactCallbacks)&&(r._contactCallbacks[-1]?r._contactCallbacks[-1].call(r._contactCallbackContext[-1],r,n,s,o,e,t):(i=n.id,r._contactCallbacks[i]&&r._contactCallbacks[i].call(r._contactCallbackContext[i],r,n,s,o,e,t)))},Box2DPhysics.DefaultContactListener.prototype.PreSolve=function(t,e){var i,o=t.GetFixtureA(),s=t.GetFixtureB(),n=o.GetBody(),r=s.GetBody(),n=n.parent,r=r.parent;void 0!==n&&void 0!==r&&(n._presolveCallbacks&&(n._presolveCallbacks[-1]?n._presolveCallbacks[-1].call(n._presolveCallbackContext[-1],n,r,o,s,t,e):(i=r.id,n._presolveCallbacks[i]&&n._presolveCallbacks[i].call(n._presolveCallbackContext[i],n,r,o,s,t,e))),r._presolveCallbacks)&&(r._presolveCallbacks[-1]?r._presolveCallbacks[-1].call(r._presolveCallbackContext[-1],r,n,s,o,t,e):(i=n.id,r._presolveCallbacks[i]&&r._presolveCallbacks[i].call(r._presolveCallbackContext[i],r,n,s,o,t,e)))},Box2DPhysics.DefaultContactListener.prototype.PostSolve=function(t,e){var i,o=t.GetFixtureA(),s=t.GetFixtureB(),n=o.GetBody(),r=s.GetBody(),n=n.parent,r=r.parent;void 0!==n&&void 0!==r&&(n._postsolveCallbacks&&(n._postsolveCallbacks[-1]?n._postsolveCallbacks[-1].call(n._postsolveCallbackContext[-1],n,r,o,s,t,e):(i=r.id,n._postsolveCallbacks[i]&&n._postsolveCallbacks[i].call(n._postsolveCallbackContext[i],n,r,o,s,t,e))),r._postsolveCallbacks)&&(r._postsolveCallbacks[-1]?r._postsolveCallbacks[-1].call(r._postsolveCallbackContext[-1],r,n,s,o,t,e):(i=n.id,r._postsolveCallbacks[i]&&r._postsolveCallbacks[i].call(r._postsolveCallbackContext[i],r,n,s,o,t,e)))},Box2DPhysics.Polygon=function(){this.vertices=[]},Box2DPhysics.Polygon.prototype.setFromFlatXYCoords=function(t){this.vertices=[];for(var e=0;e<t.length/2;e++)this.vertices.push({x:t[2*e],y:t[2*e+1]})},Box2DPhysics.Polygon.prototype.setFromXYObjects=function(t){this.vertices=t.concat()},Box2DPhysics.Polygon.prototype.addVertex=function(t){this.vertices.push(t)},Box2DPhysics.Polygon.prototype.at=function(t){var e=this.vertices.length;return this.vertices[t<0?t%e+e:t%e]},Box2DPhysics.Polygon.prototype.indicesAreAdjacent=function(t,e){return(t%=this.vertices.length)==(e%=this.vertices.length)||(t=Math.abs(t-e))<2||t==this.vertices.length-1},Box2DPhysics.Polygon.prototype.areaInTriangle=function(t,e,i){return t=this.at(t),e=this.at(e),i=this.at(i),.5*((e.x-t.x)*(i.y-t.y)-(i.x-t.x)*(e.y-t.y))},Box2DPhysics.Polygon.prototype.left=function(t,e,i){return 0<this.areaInTriangle(t,e,i)},Box2DPhysics.Polygon.prototype.leftOn=function(t,e,i){return 0<=this.areaInTriangle(t,e,i)},Box2DPhysics.Polygon.prototype.right=function(t,e,i){return this.areaInTriangle(t,e,i)<0},Box2DPhysics.Polygon.prototype.rightOn=function(t,e,i){return this.areaInTriangle(t,e,i)<=0},Box2DPhysics.Polygon.sqdist=function(t,e){var i=e.x-t.x,e=e.y-t.y;return i*i+e*e},Box2DPhysics.Polygon.prototype.makeCCW=function(){for(var t=0,e=1,i=this.vertices.length;e<i;e++)(this.at(e).y<this.at(t).y||this.at(e).y===this.at(t).y&&this.at(e).x>this.at(t).x)&&(t=e);return!this.left(t-1,t,t+1)&&(this.vertices.reverse(),!0)},Box2DPhysics.Polygon.prototype.isConvex=function(){for(var t=!1,e=!1,i=0,o=this.vertices.length;i<o;i++){var s=i;0<this.areaInTriangle(this.vertices[s],this.vertices[(i+1)%o],this.vertices[(i+2)%o])?t=!0:e=!0}return e^t},Box2DPhysics.Polygon.prototype.isReflex=function(t){return this.right(t-1,t,t+1)},Box2DPhysics.Polygon.areVecsEqual=function(t,e){return t.x==e.x&&t.y==e.y},Box2DPhysics.Polygon.linesCross=function(t,e,i,o){var s,n,r;return Box2DPhysics.Polygon.areVecsEqual(e,i)||Box2DPhysics.Polygon.areVecsEqual(t,i)||Box2DPhysics.Polygon.areVecsEqual(e,o)||Box2DPhysics.Polygon.areVecsEqual(t,o)||(s={},box2d.b2SubVV(e,t,s),box2d.b2CrossVS(s,1,s),r=box2d.b2DotVV(s,t),n=box2d.b2DotVV(s,i),s=box2d.b2DotVV(s,o),r<n&&r<s)||n<r&&s<r||(s={},box2d.b2SubVV(o,i,s),box2d.b2CrossVS(s,1,s),n=box2d.b2DotVV(s,i),r=box2d.b2DotVV(s,t),o=box2d.b2DotVV(s,e),n<r&&n<o)||r<n&&o<n?null:{x:t.x+(i=(n-r)/(o-r))*(e.x-t.x),y:t.y+i*(e.y-t.y)}},Box2DPhysics.Polygon.prototype.canSee=function(t,e){if(this.indicesAreAdjacent(t,e))return!1;if(this.leftOn(t+1,t,e)&&this.rightOn(t-1,t,e))return!1;for(var i=0;i<this.vertices.length;++i)if((i+1)%this.vertices.length!=t&&i!=t&&this.leftOn(t,e,i+1)&&this.rightOn(t,e,i)&&Box2DPhysics.Polygon.linesCross(this.at(t),this.at(e),this.at(i),this.at(i+1)))return!1;return!0},Box2DPhysics.Polygon.prototype.subPolygon=function(t,e){var i=new Box2DPhysics.Polygon;if(t<e)for(var o=t;o<e+1;o++)i.addVertex(this.at(o));else{for(o=t;o<this.vertices.length;o++)i.addVertex(this.at(o));for(o=0;o<e+1;o++)i.addVertex(this.at(o))}return i},Box2DPhysics.Polygon.prototype.decomposeOptimal=function(t){if(1<(t=void 0===t?0:t))return this.vertices;this.makeCCW();for(var e,i=[],o=[],s=Number.MAX_VALUE,n=0;n<this.vertices.length;n++)if(this.isReflex(n))for(var r=0;r<this.vertices.length;r++)this.canSee(n,r)&&(o=this.subPolygon(n,r).decompose(t+1),e=this.subPolygon(r,n).decompose(t+1),o.length+e.length<s)&&(s=(i=o.concat(e)).length);return 0===i.length&&i.push(this.vertices),i},Box2DPhysics.Polygon.prototype.decompose=function(t){void 0===t&&(t=0),this.makeCCW();for(var e,i,o,s=[],n=Number.MAX_VALUE,r=!1,a=0;a<this.vertices.length;a++)if(this.isReflex(a))for(var h,l,r=!0,c=this.at(a),u=0;u<this.vertices.length;u++)this.canSee(a,u)&&(l=(h=(l=this.at(u)).x-c.x)*h*((h=l.y-c.y)*h))<n&&(e=a,i=u,n=l);return!r&&8<this.vertices.length&&(e=0,i=Math.floor(this.vertices.length/2),r=!0),r&&(o=this.subPolygon(e,i).decompose(t+1),t=this.subPolygon(i,e).decompose(t+1),s=o.concat(t)),0===s.length&&s.push(this.vertices),s},!function(i){var o={};function s(t){var e;return(o[t]||(e=o[t]={i:t,l:!1,exports:{}},i[t].call(e.exports,e,e.exports,s),e.l=!0,e)).exports}s.m=i,s.c=o,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(i,o,function(t){return e[t]}.bind(null,o));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=78)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Jsons=e.Fonts=e.Sounds=e.Atlases=e.Constants=e.Images=void 0;var o=i(79),s=(Object.defineProperty(e,"Images",{enumerable:!0,get:function(){return o.Images}}),i(80)),n=(Object.defineProperty(e,"Constants",{enumerable:!0,get:function(){return s.Constants}}),i(46)),r=(Object.defineProperty(e,"Atlases",{enumerable:!0,get:function(){return n.Atlases}}),i(83)),a=(Object.defineProperty(e,"Sounds",{enumerable:!0,get:function(){return r.Sounds}}),i(84)),h=(Object.defineProperty(e,"Fonts",{enumerable:!0,get:function(){return a.Fonts}}),i(85));Object.defineProperty(e,"Jsons",{enumerable:!0,get:function(){return h.Jsons}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JDTextInputGraphics=e.JDTextInput=e.JDTextTranslated=e.JDTextFit=e.JDText=e.JDImageSkew=e.JDImagePivot=e.JDBmpdTextStroke=e.JDBmpdTextTranslated=e.JDBmpdTextFit=e.JDBmpdText=e.JDImageAnimDelay=e.JDImageAnimAdobe=e.JDImageAnim=e.JDImage=e.JDGraphics=e.JDContainer=e.JDSprite=void 0;var o=i(92),s=(Object.defineProperty(e,"JDSprite",{enumerable:!0,get:function(){return o.JDSprite}}),i(93)),n=(Object.defineProperty(e,"JDContainer",{enumerable:!0,get:function(){return s.JDContainer}}),i(49)),r=(Object.defineProperty(e,"JDGraphics",{enumerable:!0,get:function(){return n.JDGraphics}}),i(35)),a=(Object.defineProperty(e,"JDImage",{enumerable:!0,get:function(){return r.JDImage}}),i(36)),h=(Object.defineProperty(e,"JDImageAnim",{enumerable:!0,get:function(){return a.JDImageAnim}}),i(94)),l=(Object.defineProperty(e,"JDImageAnimAdobe",{enumerable:!0,get:function(){return h.JDImageAnimAdobe}}),i(95)),c=(Object.defineProperty(e,"JDImageAnimDelay",{enumerable:!0,get:function(){return l.JDImageAnimDelay}}),i(37)),u=(Object.defineProperty(e,"JDBmpdText",{enumerable:!0,get:function(){return c.JDBmpdText}}),i(50)),d=(Object.defineProperty(e,"JDBmpdTextFit",{enumerable:!0,get:function(){return u.JDBmpdTextFit}}),i(96)),p=(Object.defineProperty(e,"JDBmpdTextTranslated",{enumerable:!0,get:function(){return d.JDBmpdTextTranslated}}),i(97)),f=(Object.defineProperty(e,"JDBmpdTextStroke",{enumerable:!0,get:function(){return p.JDBmpdTextStroke}}),i(51)),b=(Object.defineProperty(e,"JDImagePivot",{enumerable:!0,get:function(){return f.JDImagePivot}}),i(103)),y=(Object.defineProperty(e,"JDImageSkew",{enumerable:!0,get:function(){return b.JDImageSkew}}),i(38)),m=(Object.defineProperty(e,"JDText",{enumerable:!0,get:function(){return y.JDText}}),i(54)),x=(Object.defineProperty(e,"JDTextFit",{enumerable:!0,get:function(){return m.JDTextFit}}),i(104)),g=(Object.defineProperty(e,"JDTextTranslated",{enumerable:!0,get:function(){return x.JDTextTranslated}}),i(39)),v=(Object.defineProperty(e,"JDTextInput",{enumerable:!0,get:function(){return g.JDTextInput}}),i(56));Object.defineProperty(e,"JDTextInputGraphics",{enumerable:!0,get:function(){return v.JDTextInputGraphics}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AchievementManager=e.LevelManager=e.SkinsManager=e.GameData=e.TexturesEdit=e.SoundManager=e.SaveData=e.Localization=void 0;var o=i(28),s=(Object.defineProperty(e,"Localization",{enumerable:!0,get:function(){return o.Localization}}),i(19)),n=(Object.defineProperty(e,"SaveData",{enumerable:!0,get:function(){return s.SaveData}}),i(18)),r=(Object.defineProperty(e,"SoundManager",{enumerable:!0,get:function(){return n.SoundManager}}),i(88)),a=(Object.defineProperty(e,"TexturesEdit",{enumerable:!0,get:function(){return r.TexturesEdit}}),i(3)),h=(Object.defineProperty(e,"GameData",{enumerable:!0,get:function(){return a.GameData}}),i(89)),l=(Object.defineProperty(e,"SkinsManager",{enumerable:!0,get:function(){return h.SkinsManager}}),i(47)),c=(Object.defineProperty(e,"LevelManager",{enumerable:!0,get:function(){return l.LevelManager}}),i(15));Object.defineProperty(e,"AchievementManager",{enumerable:!0,get:function(){return c.AchievementManager}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameData=e.GameConfig=e.ITEM_ID=void 0;var o,s=i(2),n=i(0),r=i(47),i=((i=e.ITEM_ID||(e.ITEM_ID={})).player="player",i.blockBasic="b_basic",i.blockCircular="b_circular",i.blockBumps="b_bumps",i.blockSlope="b_slope",i.blockSlopeDouble="b_slopeDouble",i.blockHill="b_Hill",i.blockHill2="b_Hill2",i.blockAngle="b_Angle",i.blockRoad02="b_Road02",i.blockRoadHalfCircle="b_RoadHalfCircle",i.blockTilt="b_tilt",i.blockRoadPiece03="b_roadPiece03",i.blockRoadPiece04="b_roadPiece04",i.blockRoadPiece05="b_roadPiece05",i.blockRoadPiece06="b_roadPiece06",i.blockRoadPiece08="b_roadPiece08",i.blockRoadPiece09="b_roadPiece09",i.blockRoadPiece10="b_roadPiece10",i.blockFalling="b_falling",i.blockHorizontal="b_horizontal",i.blockVertical="b_vertical",i.blockSpeed="b_speed",i.blockBounce="b_bounce",i.blockInvis="b_invis",i.blockInvisMoving="b_invisMoving",i.blockInvisVertical="b_invisVertical",i.blockInvisHorizontal="b_invisHorizontal",i.blockMoving="b_moving",i.blockPush="b_push",i.blockAppearing="b_appearing",i.blockSpikes="b_spikes",i.blockDissapear="b_dissapear",i.blockTNT="b_TNT",i.blockIce="b_ice",i.blockGlass="b_glass",i.obstacleBuzzsaw="o_buzzsaw",i.obstacleBuzzsawOnStick="o_buzzsawOnStick",i.obstacleBuzzsawOnStickHard="o_buzzsawOnStickHard",i.obstacleBuzzsawEnlarging="o_buzzsawEnlarging",i.obstacleBuzzsawBouncing="o_buzzsawBouncing",i.obstacleBuzzsawHorizontal="o_buzzsawHorizontal",i.obstacleBuzzsawVertical="o_buzzsawVertical",i.obstacleBuzzsawMoving="o_buzzsawMoving",i.obstacleClassicLaserStatic="o_classicLaserStatic",i.obstacleClassicLaser="o_classicLaser",i.obstacleQuadrant="o_quadrant",i.obstacleReaper="o_reaper",i.obstacleSwingingSpikes="o_swingingSpikes",i.obstacleSpikes="o_spikes",i.obstacleFallingSpike="o_fallingSpike",i.obstacleShurikanDispenser="o_shurikanDispenser",i.obstacleLaserPoint="o_laserPoint",i.obstacleMissileLauncher="o_missileLauncher",i.obstacleArcSpike="o_arcSpikes",i.itemTrigger="i_trigger",i.itemFadeText="i_fadeText",i.itemFadeArrow="i_fadeArrow",i.itemCheckPoint="i_checkPoint",i.itemZoomZone="i_zoomZone",i.itemFinish="i_finish",i.itemWindBlaster="i_windBlaster",i.itemSign="i_sign",i.miscHazardStrips="m_hazardStrips",i.miscBarrel="m_barrel",i.miscWoodPlank="m_woodPlank",(i=o=e.GameConfig||(e.GameConfig={})).particleLimit="parLimit",i.worldGravity="wgrav",i.groundFriction="gfric",i.cameraZoomMin="czmin",i.camearZoomMax="czmax",i.playerBrakeCoef="pbcoef",i.playerWheelFriction="pwfric",i.playerWheelMass="pwmass",i.playerWheelAccelerationTorgue="pwat",i.playerWheelMaxTorgue="pwmt",i.playerMass="pmass",i.playerAmortFrequency="pafr",i.playerAmortDamping="padamp",i.playerSpeed="pspeed",i.playerTilt="ptilt",i.blockFallingTimeShake="bfts",i.blockInvisibleRangeDissapears="bird",i.blockSpeedSpeed="bsspeed",i.blockAppearingApper="bappeara",i.blockAppearingDisapper="bappeard",i.blockSpikeVelocity="bsvel",i.blockPushMass="bpmass",i.blockTiltMassCoef="btmc",i.blockHalfCircleMassCoef="bhcmc",i.blockTntExplosionPower="btntep",i.blockTntExplosionRadius="btnter",i.blockTntShakeCameraTime="btntsct",i.blockTntShakeCameraPower="btntscp",i.blockFallingRespawnTime="bfrt",i.blockIceFriction="bifric",i.blockGlassSpeedBroke="bgsb",i.blockGlassSpeedDamping="bgsd",i.blockBouncePower="bbpower",i.itemFadeDistance="ifd",i.classicLaserBulletLifeTime="clblt",i.classicLaserBulletSpeed="clbs",i.classicLaserFireDistance="clfd",i.fallingSpikeSpeed="fssp",i.fallingSpikeDelay="fsdel",i.fallingSpikeMaxDis="fsmd",i.shurikanDispenserChargeTime="sdct",i.shurikanDispenserDistanceAttack="sdda",i.windBlasterPower="wbpow",i.missileLauncherFireTime="mlft",i.missileLauncherFireDistance="mlfd",i.missileSpeed="missp",i.missileLifeTime="mislt",i.missileFollowSpeed="misfs",i.miscDynamicFricton="mdfric",a.initBalance=function(t){s.SkinsManager.init(t.skins)},a.initData=function(t){this.data=t,this.data.config||(this.data.config=this.getDefaultConfig()),!0===n.Constants.IS_MOBILE?(this.parallax=!1,this.particleLimit=0):this.particleLimit=this.getConfigParam(o.particleLimit),r.LevelManager.init(this.data.levels),this.cameraZoomMin=this.getConfigParam(o.cameraZoomMin),this.cameraZoomMax=this.getConfigParam(o.camearZoomMax)},a.getData=function(){return this.data},a.getConfig=function(){return this.data.config},a.getConfigParam=function(t){return this.data.config[t]},a.getDefaultConfig=function(){var t={};return t[o.particleLimit]=30,t[o.worldGravity]=9.8,t[o.groundFriction]=.5,t[o.cameraZoomMin]=.8,t[o.camearZoomMax]=1.2,t[o.playerBrakeCoef]=.99,t[o.playerWheelFriction]=1,t[o.playerWheelMass]=1,t[o.playerWheelAccelerationTorgue]=1e3,t[o.playerWheelMaxTorgue]=2e3,t[o.playerMass]=10,t[o.playerSpeed]=700,t[o.playerTilt]=3,t[o.playerAmortFrequency]=5,t[o.playerAmortDamping]=.1,t[o.blockInvisibleRangeDissapears]=400,t[o.blockSpeedSpeed]=50,t[o.blockAppearingApper]=.3,t[o.blockAppearingDisapper]=.3,t[o.blockSpikeVelocity]=.3,t[o.blockPushMass]=3.8,t[o.blockTiltMassCoef]=1,t[o.blockHalfCircleMassCoef]=.5,t[o.blockTntExplosionPower]=50,t[o.blockTntExplosionRadius]=200,t[o.blockTntShakeCameraTime]=30,t[o.blockTntShakeCameraPower]=5,t[o.blockFallingTimeShake]=30,t[o.blockFallingRespawnTime]=0,t[o.blockIceFriction]=.3,t[o.blockGlassSpeedBroke]=500,t[o.blockGlassSpeedDamping]=30,t[o.blockBouncePower]=20,t[o.itemFadeDistance]=500,t[o.classicLaserBulletSpeed]=500,t[o.classicLaserBulletLifeTime]=300,t[o.classicLaserFireDistance]=300,t[o.fallingSpikeSpeed]=.5,t[o.fallingSpikeDelay]=10,t[o.fallingSpikeMaxDis]=350,t[o.shurikanDispenserChargeTime]=70,t[o.shurikanDispenserDistanceAttack]=250,t[o.windBlasterPower]=50,t[o.missileLauncherFireTime]=80,t[o.missileLauncherFireDistance]=400,t[o.missileSpeed]=125,t[o.missileLifeTime]=150,t[o.missileFollowSpeed]=1,t[o.miscDynamicFricton]=.4,t},a.GAME_DATA_NAME="game_data",a.BUZZSAW_SIZE=100,a.BASIC_BLOCK_WIDTH=100,a.BASIC_BLOCK_HEIGHT=100,a.FRAME_SEC=60,a.TIME_FOR_BACKFLIP=30,a.TIME_FOR_FRONTFLIP=60,a.coinsForAD=50,a.smoothCameraZoomCoef=30,a.smoothCameraAnchorCoef=30,a.parallax=!0,a);function a(){}e.GameData=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tools=e.GetSymbolsForBMPDText=e.AlignTo=void 0;var o=i(86),s=(Object.defineProperty(e,"AlignTo",{enumerable:!0,get:function(){return o.AlignTo}}),i(87)),n=(Object.defineProperty(e,"GetSymbolsForBMPDText",{enumerable:!0,get:function(){return s.GetSymbolsForBMPDText}}),i(32));Object.defineProperty(e,"Tools",{enumerable:!0,get:function(){return n.Tools}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BodyObj=e.Box2DWorld=e.Box2DTools=void 0;var o=i(119),s=(Object.defineProperty(e,"Box2DTools",{enumerable:!0,get:function(){return o.Box2DTools}}),i(6)),n=(Object.defineProperty(e,"Box2DWorld",{enumerable:!0,get:function(){return s.Box2DWorld}}),i(60));Object.defineProperty(e,"BodyObj",{enumerable:!0,get:function(){return n.BodyObj}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Box2DWorld=e.Box2DBodyType=void 0;var r,o=i(2),s=i(3),a=i(1),n=i(60),i=((i=r=e.Box2DBodyType||(e.Box2DBodyType={}))[i.static=0]="static",i[i.kinematic=1]="kinematic",i[i.dynamic=2]="dynamic",h.init=function(){this.world=new Box2DPhysics(new box2d.b2Vec2(0,-o.GameData.getConfigParam(s.GameConfig.worldGravity)))},h.initDebug=function(t,e){function i(){o.world.postUpdate(),e&&(o.world.debugGraphics.x=e.x,o.world.debugGraphics.y=e.y,o.world.debugGraphics.scale=e.scaleX)}var o=this;this.world.createDebugGraphics(t),this.world.debugDraw.joints=!0;t.game.events.on(Phaser.Core.Events.POST_STEP,i),this.world.debugGraphics.once(Phaser.GameObjects.Events.DESTROY,function(){t.game.events.off(Phaser.Core.Events.POST_STEP,i)}),t.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.Q).on("up",function(){o.world.toggleDebug()})},h.getBody=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=r.dynamic),new Box2DPhysics.Body(this.world,t,e,i)},h.getBodyObj=function(t,e,i,o){return void 0===o&&(o=r.dynamic),new n.BodyObj(this.world,t,e=void 0===e?0:e,i=void 0===i?0:i,o)},h.getBodyImage=function(t,e,i,o,s,n){void 0===n&&(n=r.dynamic);e=new a.JDImage(t.scene,o=void 0===o?0:o,s=void 0===s?0:s,e,i);return t.add(e),this.getBodyObj(e,o,s,n)},h.destroyBody=function(t){this.world.update(),this.world.removeBody(t)},h.update=function(){this.world.update()},h.destroy=function(){this.world.destroy(),this.world=null},h);function h(){}e.Box2DWorld=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockBase=void 0,i(5)),a=i(6),h=i(22),l=i(8),i=(s=h.Entity,n(c,s),c.prototype.init=function(){s.prototype.init.call(this),this.initBody()},c.prototype.initBody=function(t){void 0===t&&(t=a.Box2DBodyType.static),this.body=r.Box2DWorld.getBody(0,0,t),this.body.data.SetUserData({id:"block",link:this})},c.prototype.spawn=function(t){s.prototype.spawn.call(this,t),this.createBodyFixture()},c.prototype.createBodyFixture=function(){this.body.setCollisionCategory(l.BodyCollisionFilter.ROAD)},c.prototype.updateBody=function(t,e){this.body.x=t,this.body.y=e,this.updateView(t,e)},c.prototype.reset=function(){this.updateBody(this.spawnData.x,this.spawnData.y),s.prototype.reset.call(this)},c.prototype.remove=function(){r.Box2DWorld.destroyBody(this.body),s.prototype.remove.call(this)},c.prototype.destroy=function(){s.prototype.destroy.call(this),this.body=null},c);function c(){return null!==s&&s.apply(this,arguments)||this}e.BlockBase=i},function(t,e,i){"use strict";function o(){}Object.defineProperty(e,"__esModule",{value:!0}),e.BodyCollisionFilter=void 0,o.DEFAULT=1,o.ROAD=2,o.PLAYER=4,o.MISC_DYNAMIC=8,o.DELAULT_MASK=65535,e.BodyCollisionFilter=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CustomResize=void 0;var o=i(0);function s(){}s.boot=function(){this.orientationDiv=document.getElementById(o.Constants.DIV_ID_ORIENTATION),Phaser.Scale.ScaleManager.prototype.boot=function(){var t;this.canvas=this.game.canvas,this.fullscreen=this.game.device.fullscreen,this.game.events.on(Phaser.Core.Events.PRE_STEP,this.step,this),this.game.events.once(Phaser.Core.Events.DESTROY,this.destroy,this),window.addEventListener("resize",function(){clearTimeout(t),t=setTimeout(function(){s.resize(window.innerWidth,window.innerHeight)},300)}),this.startListeners()},Phaser.Scale.ScaleManager.prototype.step=function(t,e){this.parent&&(this._lastCheck+=e,this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&s.resize(this.parentSize.width,this.parentSize.height),this.dirty=!1,this._lastCheck=0)},Phaser.Scale.ScaleManager.prototype.getParentBounds=function(){var t,e;return!(!this.parent||(t=s.getWindowWidth(),e=s.getWindowHeight(),this.parentSize.width===t&&this.parentSize.height===e)||(this.parentSize.setSize(t,e),0))},Phaser.Scale.ScaleManager.prototype.updateScale=function(){var t=this.parentSize.width,e=(this.gameSize.width===s.maxDisplayW&&(t=s.maxDisplayW/s.scaleFactor),this.parentSize.height),t=(this.gameSize.height===s.maxDisplayH&&(e=s.maxDisplayH/s.scaleFactor),this.displaySize.resize(t,e),this.canvas.style);t.width=this.displaySize.width+"px",t.height=this.displaySize.height+"px",this.getParentBounds(),this.updateCenter()}},s.init=function(t){this.game=t},s.setSize=function(t,e,i,o,s){void 0===s&&(s=1),this.GW=t,this.GH=e,this.GHW=Math.floor(this.GW/2),this.GHH=Math.floor(this.GH/2),this.quality=s,this.GMW=this.GMW_ORI=i,this.GMH=this.GMH_ORI=o,this.GW>this.GH?this.ORIENTATION_LANDSCAPE=!0:this.ORIENTATION_LANDSCAPE=!1,this.OW=(this.GMW-this.GW)/2,this.OH=(this.GMH-this.GH)/2,this.minDisplayW=Math.floor(t*s),this.minDisplayH=Math.floor(e*s),this.scaleFactorLess=this.minDisplayH/this.GH,this.scaleFactorMore=this.GH/this.minDisplayH,this.maxDisplayW=i*this.scaleFactorLess,this.maxDisplayH=o*this.scaleFactorLess},s.setCameraMinViewWidth=function(t){this.minCameraViewWidth=t=void 0===t?0:t;t=this.getCameraScale(this.GW);this.GMW=this.GMW_ORI,this.GMH=this.GMH_ORI,this.GW>this.GH?this.GMW/=t:this.GMH/=t,this.OW=(this.GMW-this.GW)/2,this.OH=(this.GMH-this.GH)/2},s.refresh=function(){this.resize(this.getWindowWidth(),this.getWindowHeight())},s.getCameraScale=function(t){var e=1;return e=t<this.minCameraViewWidth?t/this.minCameraViewWidth:e},s.resize=function(t,e){this.scaleFactor=1/(e/this.minDisplayH);var i=Math.ceil(t*this.scaleFactor);i<this.minDisplayW&&(this.scaleFactor=1/(t/this.minDisplayW),i=Math.ceil(t*this.scaleFactor)),this.currDisplayW=i,this.currDisplayH=Math.ceil(e*this.scaleFactor),this.currDisplayW>this.maxDisplayW&&(this.currDisplayW=this.maxDisplayW),this.currDisplayHalfW=this.currDisplayW/2,this.currDisplayH>this.maxDisplayH&&(this.currDisplayH=this.maxDisplayH),this.currDisplayHalfH=this.currDisplayH/2,this.cameraZoom=this.getCameraScale(this.currDisplayW/this.quality),this.CAMERA_SHIFT_X=(this.currDisplayW-this.GW)/2,this.CAMERA_SHIFT_Y=(this.currDisplayH-this.GH)/2,this.SHIFT_X=(this.currDisplayW/this.cameraZoom-this.minDisplayW)/2*this.scaleFactorMore,this.SHIFT_Y=(this.currDisplayH/this.cameraZoom-this.minDisplayH)/2*this.scaleFactorMore,this.IS_LANDSCAPE=window.innerWidth>window.innerHeight,this.nativeResize(this.game.scale,this.currDisplayW,this.currDisplayH),!1===this.game.device.os.desktop&&this.orientationDiv&&(this.IS_LANDSCAPE===this.ORIENTATION_LANDSCAPE?this.orientationDiv.style.display="none":this.orientationDiv.style.display="block",window.scroll(0,0))},s.nativeResize=function(t,e,i){var o=t.width,s=t.height;t.gameSize.resize(e,i),t.baseSize.resize(e,i),t.canvas.width=t.baseSize.width,t.canvas.height=t.baseSize.height,t.refresh(o,s)},s.getCurrentWidth=function(){return this.currDisplayW/this.quality/this.cameraZoom},s.getCurrentHeight=function(){return this.currDisplayH/this.quality/this.cameraZoom},s.getActivePointerX=function(t){return t.input.activePointer.worldX},s.getActivePointerY=function(t){return t.input.activePointer.worldY},s.getWindowWidth=function(){return window.innerWidth},s.getWindowHeight=function(){return window.innerHeight},s.resizeCamera=function(t){t.zoom=this.scaleFactorLess*this.cameraZoom,t.setScroll(-this.CAMERA_SHIFT_X,-this.CAMERA_SHIFT_Y)},s.cameraZoom=1,s.minCameraViewWidth=0,s.quality=1,s.scaleFactor=1,s.CAMERA_SHIFT_X=0,s.CAMERA_SHIFT_Y=0,s.SHIFT_X=0,s.SHIFT_Y=0,e.CustomResize=s},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockPolygon=void 0,s=i(7).BlockBase,n(r,s),r.prototype.spawn=function(t){s.prototype.spawn.call(this,t),this.view.setScale(t.scaleX,t.scaleY),this.view.angle=t.angle,this.body.angle=this.spawnData.angle},r.prototype.createBodyFixture=function(){this.createPolygon(null)},r.prototype.createPolygon=function(t){for(var e=0;e<t.length;e+=2)t[e]*=this.spawnData.scaleX,t[e+1]*=this.spawnData.scaleY;this.body.setPolygon(t),s.prototype.createBodyFixture.call(this)},r);function r(){return null!==s&&s.apply(this,arguments)||this}e.BlockPolygon=i},function(t,e,i){"use strict";var o;Object.defineProperty(e,"__esModule",{value:!0}),e.JDTextFitParam=e.JDTextType=e.Bool3=void 0,(o=e.Bool3||(e.Bool3={}))[o.none=0]="none",o[o.false=1]="false",o[o.true=2]="true",(o=e.JDTextType||(e.JDTextType={}))[o.text=0]="text",o[o.fit=1]="fit",o[o.translated=2]="translated",(o=e.JDTextFitParam||(e.JDTextFitParam={}))[o.size=0]="size",o[o.wordWrap=1]="wordWrap",o[o.both=2]="both"},function(t,e,i){"use strict";var s=this&&this.__awaiter||function(t,r,a,h){return new(a=a||Promise)(function(i,e){function o(t){try{n(h.next(t))}catch(t){e(t)}}function s(t){try{n(h.throw(t))}catch(t){e(t)}}function n(t){var e;t.done?i(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(o,s)}n((h=h.apply(t,r||[])).next())})},n=this&&this.__generator||function(o,s){var n,r,a,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},l={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function t(i){return function(t){var e=[i,t];if(n)throw new TypeError("Generator is already executing.");for(;h=l&&e[l=0]?0:h;)try{if(n=1,r&&(a=2&e[0]?r.return:e[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,e[1])).done)return a;switch(r=0,(e=a?[2&e[0],a.value]:e)[0]){case 0:case 1:a=e;break;case 4:return h.label++,{value:e[1],done:!1};case 5:h.label++,r=e[1],e=[0];continue;case 7:e=h.ops.pop(),h.trys.pop();continue;default:if(!((a=0<(a=h.trys).length&&a[a.length-1])||6!==e[0]&&2!==e[0])){h=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3]))h.label=e[1];else if(6===e[0]&&h.label<a[1])h.label=a[1],a=e;else{if(!(a&&h.label<a[2])){a[2]&&h.ops.pop(),h.trys.pop();continue}h.label=a[2],h.ops.push(e)}}e=s.call(o,h)}catch(t){e=[6,t],r=0}finally{n=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},r=(Object.defineProperty(e,"__esModule",{value:!0}),e.AzerionSDK=void 0,i(0)),a=i(81),h=i(82);function o(){}o.init=function(e,i,o){return void 0===o&&(o=!0),s(this,void 0,Promise,function(){return n(this,function(t){switch(t.label){case 0:return document.addEventListener("contextmenu",function(t){return t.preventDefault()}),!0===o&&(window.addEventListener("keydown",function(t){t.preventDefault()}),window.addEventListener("keyup",function(t){t.preventDefault()})),window._azerionIntegrationSDK.init(),[4,window._azerionIntegrationSDK.onLoadStart()];case 1:return t.sent(),h.PauseHandler.getInstance(e),i(),!0===r.Constants.IS_EDITOR&&(r.Constants.IS_ENABLE_AD=!1),!1!==r.Constants.USE_SPLASH_LOADER&&window._azerionIntegration.splashEnabled||(h.PauseHandler.getInstance(e),i(),a.LoaderHelper.hide()),[2]}})})},o.addListeners=function(){window._azerionIntegrationSDK.addListeners(function(){o.adPlaying=!0,h.PauseHandler.getInstance().pause()},function(){o.adPlaying=!1,h.PauseHandler.getInstance().resume()})},o.onLoadProgress=function(t){!0!==r.Constants.USE_SPLASH_LOADER&&!window._azerionIntegration.splashEnabled||window._azerionIntegrationSDK.onLoadProgress(100*t)},o.onLoadComplete=function(e){return s(this,void 0,Promise,function(){return n(this,function(t){switch(t.label){case 0:return[4,window._azerionIntegrationSDK.onLoadComplete()];case 1:return t.sent(),window._azerionIntegrationSDK.preloadAd("rewarded"),!1===r.Constants.IS_ENABLE_AD?(a.LoaderHelper.hide(),e(),[2,Promise.resolve()]):[4,window._azerionIntegrationSDK.showInterstitialAd()];case 2:return t.sent(),e(),[2]}})})},o.showInterstitialAd=function(){return s(this,void 0,Promise,function(){return n(this,function(t){switch(t.label){case 0:return!1!==r.Constants.IS_ENABLE_AD?[3,1]:(a.LoaderHelper.hide(),[2,Promise.resolve()]);case 1:return[4,window._azerionIntegrationSDK.showInterstitialAd()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},o.showRewardedAd=function(t,i,e){return s(this,void 0,Promise,function(){var e;return n(this,function(t){switch(t.label){case 0:return!1!==r.Constants.IS_ENABLE_AD?[3,1]:(a.LoaderHelper.hide(),i(!0),[2]);case 1:return e=!(o.adPlaying=!0),[4,window._azerionIntegrationSDK.showRewardedAd()];case 2:e=t.sent(),o.adPlaying=!1,i(e),t.label=3;case 3:return[2]}})})},o.isBloodFree=function(){return h5branding.Hosts.isBloodFree()},o.isAdPlaying=function(){return o.adPlaying},o.analyticsSendEvent=function(t){window.gdsdk&&window.gdsdk.sendEvent({eventName:"track-milestone",data:{milestoneDescription:t}})},o.adPlaying=!1,e.AzerionSDK=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ButtonText=e.ButtonContainerFrame=e.ButtonFrame=e.ButtonSound=e.ButtonScaleImage=e.ButtonImage=e.ButtonScale=e.ButtonContainer=e.BaseButton=void 0;var o=i(30),s=(Object.defineProperty(e,"BaseButton",{enumerable:!0,get:function(){return o.BaseButton}}),i(34)),n=(Object.defineProperty(e,"ButtonContainer",{enumerable:!0,get:function(){return s.ButtonContainer}}),i(107)),r=(Object.defineProperty(e,"ButtonScale",{enumerable:!0,get:function(){return n.ButtonScale}}),i(40)),a=(Object.defineProperty(e,"ButtonImage",{enumerable:!0,get:function(){return r.ButtonImage}}),i(57)),h=(Object.defineProperty(e,"ButtonScaleImage",{enumerable:!0,get:function(){return a.ButtonScaleImage}}),i(108)),l=(Object.defineProperty(e,"ButtonSound",{enumerable:!0,get:function(){return h.ButtonSound}}),i(109)),c=(Object.defineProperty(e,"ButtonFrame",{enumerable:!0,get:function(){return l.ButtonFrame}}),i(110)),u=(Object.defineProperty(e,"ButtonContainerFrame",{enumerable:!0,get:function(){return c.ButtonContainerFrame}}),i(111));Object.defineProperty(e,"ButtonText",{enumerable:!0,get:function(){return u.ButtonText}})},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.ObstacleBase=void 0,s=i(22).Entity,n(r,s),r);function r(){return null!==s&&s.apply(this,arguments)||this}e.ObstacleBase=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AchievementManager=e.AchievesType=void 0;var o,s=i(16),n=i(3),r=i(28),a=i(19),i=((i=o=e.AchievesType||(e.AchievesType={})).death="death",i.playHour="playhour",i.levelfalse="levelfalse",i.leveltrue="leveltrue",i.skins="skins",i.starsfalse="starsfalse",i.starstrue="starstrue",i.glassBlock="glassBlock",i.tntBlock="tntBlock",i.earnCoins="earnCoins",i.finishLevelsWithoutDying="finishNoDeath",i.landOnHead="landOnHead",i.backFlip="backflip",i.frontFlip="frontflip",i.beatRecord="beatRecord",i.checkpoints="checkpoints",h.init=function(t){this.game=t,this.data=a.SaveData.getItem(s.SaveTypes.achievement),this.data||(this.data={}),this.achieveData=new Array,this.achieveList=new Array,this.createAchieve(o.levelfalse,15),this.createAchieve(o.levelfalse,30),this.createAchieve(o.leveltrue,10),this.createAchieve(o.leveltrue,20),this.createAchieve(o.starsfalse,50),this.createAchieve(o.starsfalse,100),this.createAchieve(o.starsfalse,150),this.createAchieve(o.death,100),this.createAchieve(o.death,300),this.createAchieve(o.glassBlock,50),this.createAchieve(o.tntBlock,100),this.createAchieve(o.playHour,3600*n.GameData.FRAME_SEC),this.createAchieve(o.earnCoins,1e4),this.createAchieve(o.finishLevelsWithoutDying,10),this.createAchieve(o.landOnHead,20),this.createAchieve(o.backFlip,300),this.createAchieve(o.frontFlip,100),this.createAchieve(o.beatRecord,10),this.createAchieve(o.checkpoints,100),this.createAchieve(o.skins,11),this.save()},h.createAchieve=function(t,e){var i=this.achieveData.length,t={id:i,resource:t,amount:e};this.achieveData.push(t),this.data["open"+i]||this.achieveList.push(t)},h.getAchiveCount=function(t){t=this.data[t];return void 0===t?0:t},h.getAchiveAmount=function(t){return this.achieveData[t].amount},h.getAchieveProgress=function(t){var e=this.getAchiveAmount(t),t=this.getAchiveCount(this.achieveData[t].resource);return e<t?1:t/e},h.checkOpen=function(){var t=this.achieveList.length;if(0!==t){for(var e=-1,i=0;i<t;i++)this.getAchiveCount(this.achieveList[i].resource)>=this.achieveList[i].amount&&(this.openAchieve("achieve",this.achieveList[i].id),e=i);0<=e&&this.achieveList.splice(e,1)}},h.openAchieve=function(t,e){this.game.events.emit(this.EVENT_ACHIEVEMENT_COMPLETE,t,e),this.data["open"+e]=1},h.saveAchive=function(t,e){void 0===e&&(e=1),this.data[t]=this.getAchiveCount(t)+e,this.checkOpen(),this.save()},h.isAchieveCompleted=function(t){return!this.achieveList[t]},h.getTotalAchieves=function(){return this.achieveData.length},h.save=function(){a.SaveData.setItem(s.SaveTypes.achievement,this.data)},h.getDescription=function(t){return 0===t||1===t?r.Localization.getText("medalDes0").replace("<x>",""+this.getAchiveAmount(t)):2===t||3===t?r.Localization.getText("medalDes1").replace("<x>",""+this.getAchiveAmount(t)):4===t||5===t||6===t?r.Localization.getText("medalDes2").replace("<x>",""+this.getAchiveAmount(t)):7===t||8===t?r.Localization.getText("medalDes3").replace("<x>",""+this.getAchiveAmount(t)):9===t?r.Localization.getText("medalDes4").replace("<x>",""+this.getAchiveAmount(t)):10===t?r.Localization.getText("medalDes5").replace("<x>",""+this.getAchiveAmount(t)):11===t?r.Localization.getText("medalDes6"):12===t?r.Localization.getText("medalDes7").replace("<x>",""+this.getAchiveAmount(t)):13===t?r.Localization.getText("medalDes8").replace("<x>",""+this.getAchiveAmount(t)):14===t?r.Localization.getText("medalDes9").replace("<x>",""+this.getAchiveAmount(t)):15===t?r.Localization.getText("medalDes10").replace("<x>",""+this.getAchiveAmount(t)):16===t?r.Localization.getText("medalDes11").replace("<x>",""+this.getAchiveAmount(t)):17===t?r.Localization.getText("medalDes12").replace("<x>",""+this.getAchiveAmount(t)):18===t?r.Localization.getText("medalDes13").replace("<x>",""+this.getAchiveAmount(t)):19===t?r.Localization.getText("medalDes14"):"not found achievement description id = "+t},h.EVENT_ACHIEVEMENT_COMPLETE="event_achievement_complete",h);function h(){}e.AchievementManager=i},function(t,e,i){"use strict";var o;Object.defineProperty(e,"__esModule",{value:!0}),e.RewardType=e.SaveTypes=void 0,(o=e.SaveTypes||(e.SaveTypes={})).languange="lng",o.coins="c",o.currSkin="cs",o.skinsOpened="so",o.levels="lvls",o.achievement="achives",(o=e.RewardType||(e.RewardType={}))[o.coins=0]="coins",o[o.ad=1]="ad"},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.ItemBase=void 0,s=i(22).Entity,n(r,s),r);function r(){return null!==s&&s.apply(this,arguments)||this}e.ItemBase=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SoundManager=e.SoundType=void 0;var n,o=i(0),r=i(19),i=((i=n=e.SoundType||(e.SoundType={})).Music="mus",i.SFX="sfx",s.init=function(t){this.soundManager=t.sound,0!==r.SaveData.getItemNumber(n.Music)&&(this.enabMusic=!1),0!==r.SaveData.getItemNumber(n.SFX)&&(this.enabSFX=!1),this.sfxMarkers=t.cache.json.get("sfx").spritemap,this.music=this.soundManager.add(o.Sounds.SFX);for(var e=1;e<=5;e++)this.music.addMarker(this.getMarker("music_"+e))},s.playRandomMusic=function(){this.currMusicID+=1,5<this.currMusicID&&(this.currMusicID=1),this.playMusic("music_"+this.currMusicID)},s.getMarker=function(t,e){var i=this.sfxMarkers[t];return{name:t,start:i.start,duration:i.end-i.start,config:e}},s.getSound=function(t){return this.soundManager.add(t)},s.getAudioSprite=function(){return this.soundManager.addAudioSprite(o.Sounds.SFX)},s.playMusic=function(t,e,i){void 0===i&&(i=!0),this.musicVolume=e=void 0===e?.3:e,this.musicName=t,this.music?(this.music.volume=this.musicVolume,!0===this.enabMusic&&(this.music.key===t?!0===this.music.isPaused&&!1===i?this.music.resume():!1===this.music.isPlaying&&this.music.play(t,{volume:this.musicVolume,loop:!0}):(this.music.stop(),!0===this.enabMusic&&this.music.play(t,{volume:this.musicVolume,loop:!0})))):!0===this.enabMusic&&this.music.play(t,{volume:this.musicVolume,loop:!0})},s.pauseMusic=function(){this.music&&this.music.pause()},s.resumeMusic=function(t){!0===(t=void 0===t?!0:t)&&!1===this.enabMusic||!this.music||!0===this.music.isPlaying||(!0===this.music.isPaused?this.music.resume():this.music.play(this.musicName,{volume:this.musicVolume,loop:!0}))},s.stopMusic=function(){this.music&&this.music.stop()},s.getSfxLoop=function(t,e){t+=e=void 0===e?"":e;return this.sfxLoop[t]||(this.sfxLoop[t]=this.getAudioSprite()),this.sfxLoop[t]},s.playSFX=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=!1),!1!==this.enabSFX?!0===i?this.getSfxLoop(t,"").play(t,{volume:e,loop:!0}):this.soundManager.play(o.Sounds.SFX,this.getMarker(t,{volume:e})):!0===i&&this.getSfxLoop(t)},s.stopSFXLoop=function(t){void 0!==this.sfxLoop[t]&&this.sfxLoop[t].stop()},s.pauseAll=function(){this.music.pause();for(var t=0,e=Object.keys(this.sfxLoop);t<e.length;t++){var i=e[t];this.sfxLoop[i].pause()}},s.resumeAll=function(){if(!0===this.enabMusic&&this.music.resume(),!0===this.enabSFX)for(var t=0,e=Object.keys(this.sfxLoop);t<e.length;t++){var i=e[t];this.sfxLoop[i].resume()}},s.stopAllSFXLoop=function(){for(var t=0,e=Object.keys(this.sfxLoop);t<e.length;t++){var i=e[t];this.sfxLoop[i].stop()}},s.changeEnabledMusic=function(){!0===this.enabMusic?(this.pauseMusic(),r.SaveData.setItem(n.Music,1)):(this.resumeMusic(!1),r.SaveData.setItem(n.Music,0)),this.enabMusic=!this.enabMusic},s.changeEnabledSFX=function(){if(!0===this.enabSFX){for(var t=0,e=Object.keys(this.sfxLoop);t<e.length;t++){var i=e[t];!0===this.sfxLoop[i].isPlaying&&this.sfxLoop[i].pause()}r.SaveData.setItem(n.SFX,1)}else{for(var o=0,s=Object.keys(this.sfxLoop);o<s.length;o++)i=s[o],!0===this.sfxLoop[i].isPaused&&this.sfxLoop[i].resume();r.SaveData.setItem(n.SFX,0)}this.enabSFX=!this.enabSFX},s.setEnabled=function(t){t===n.Music?this.changeEnabledMusic():t===n.SFX&&this.changeEnabledSFX()},s.getEnabled=function(t){return t===n.Music?this.enabMusic:t===n.SFX?this.enabSFX:void 0},s.getEnableForSave=function(t){return!0===this.getEnabled(t)?0:1},s.reset=function(){for(var t=0,e=Object.keys(this.sfxLoop);t<e.length;t++){var i=e[t];this.sfxLoop[i].destroy()}this.sfxLoop={},this.resumeMusic()},s.enabMusic=!0,s.enabSFX=!0,s.music=null,s.sfxLoop={},s.currMusicID=3,s);function s(){}e.SoundManager=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SaveData=void 0;var o=i(0),s=i(4),n=i(18);function r(){}r.init=function(t){try{this.loadProgress(localStorage.getItem(o.Constants.STORAGE_KEY))}catch(t){this.loadProgress(null)}t()},r.existItem=function(t){return void 0!==this.getItem(t)},r.getItem=function(t){t=this.data[t];return void 0===t?null:t},r.getItemNumber=function(t){return this.getItem(t)||0},r.setItem=function(t,e){this.data[t]=e,this.saveProgress()},r.setItemNoSave=function(t,e){this.data[t]=e},r.setItemBiggerNumber=function(t,e){var i=this.getItemNumber(t);return i<e?(this.setItem(t,e),e):i},r.setItemAddToNumber=function(t,e){e=this.getItemNumber(t)+e;return this.setItem(t,e),e},r.calcItemNumber=function(t,e,i){for(var o=0,s=e;s<i;s++)o+=this.getItemNumber(t+s);return o},r.deleteItem=function(t){delete this.data[t],this.saveProgress()},r.loadProgress=function(t){t?(this.data=JSON.parse(t),s.Tools.getStringSize(t)):this.firstLoad()},r.saveProgress=function(){try{localStorage.setItem(o.Constants.STORAGE_KEY,JSON.stringify(this.data))}catch(t){}},r.firstLoad=function(){this.data={},this.setDefaultData()},r.setDefaultData=function(){this.data[n.SoundType.Music]=n.SoundManager.getEnableForSave(n.SoundType.Music),this.data[n.SoundType.SFX]=n.SoundManager.getEnableForSave(n.SoundType.SFX),this.saveProgress()},e.SaveData=r},function(t,e,i){"use strict";var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.PopUpManager=e.PopUpList=void 0;var n,r,a=i(112),i=i(1),h=((h=n=e.PopUpList||(e.PopUpList={}))[h.Pause=0]="Pause",h[h.Settings=1]="Settings",h[h.Language=2]="Language",h[h.RewardAD=3]="RewardAD",h[h.Victory=4]="Victory",r=i.JDContainer,s(l,r),l.prototype.getPanel=function(t){switch(t){case n.Pause:return new a.PopUpPause(this);case n.Settings:return new a.PopUpSettings(this);case n.Language:return new a.PopUpLanguage(this);case n.RewardAD:return new a.PopUpRewardAD(this);case n.Victory:return new a.PopUpVictory(this);default:return null}},l.prototype.addPanel=function(t,e){var i=this.getPanel(t);i.init(e),i.resize(),this.add(i),this.stock[t]=i},l.prototype.isExist=function(t){return!!this.stock[t]},l.prototype.isPanelOpen=function(){return 0<this.activeList.length},l.prototype.open=function(t,e){!1===this.isExist(t)&&this.addPanel(t,e),0<this.activeList.length&&this.hide(this.activeList[this.activeList.length-1]),this.visible=!0,this.activeList.push(t),this.show(t),this.scene.events.emit(l.EVENT_PANEL_OPENED,t)},l.prototype.show=function(t){this.stock[t].show()},l.prototype.hide=function(t){this.stock[t].hide()},l.prototype.close=function(){var t;0!==this.activeList.length&&(t=this.activeList.pop(),delete this.stock[t],this.scene.events.emit(l.EVENT_PANEL_CLOSED,t),0!==(t=this.activeList.length)?this.show(this.activeList[t-1]):this.hideThis())},l.prototype.hideThis=function(){this.visible=!1},l.prototype.update=function(){if(!1!==this.visible)for(var t=0;t<this.activeList.length;t++)this.stock[this.activeList[t]].update()},l.prototype.resize=function(){for(var t=0,e=Object.keys(this.stock);t<e.length;t++){var i=e[t];this.stock[i].resize()}},l.prototype.destroy=function(){r.prototype.destroy.call(this),this.stock=null,this.activeList=null},l.EVENT_PANEL_OPENED="even_panel_opened",l.EVENT_PANEL_CLOSED="even_panel_closed",l);function l(t){t=r.call(this,t)||this;return t.stock={},t.activeList=[],t.hideThis(),t}e.PopUpManager=h},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__awaiter||function(t,r,a,h){return new(a=a||Promise)(function(i,e){function o(t){try{n(h.next(t))}catch(t){e(t)}}function s(t){try{n(h.throw(t))}catch(t){e(t)}}function n(t){var e;t.done?i(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(o,s)}n((h=h.apply(t,r||[])).next())})},a=this&&this.__generator||function(o,s){var n,r,a,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},l={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function t(i){return function(t){var e=[i,t];if(n)throw new TypeError("Generator is already executing.");for(;h=l&&e[l=0]?0:h;)try{if(n=1,r&&(a=2&e[0]?r.return:e[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,e[1])).done)return a;switch(r=0,(e=a?[2&e[0],a.value]:e)[0]){case 0:case 1:a=e;break;case 4:return h.label++,{value:e[1],done:!1};case 5:h.label++,r=e[1],e=[0];continue;case 7:e=h.ops.pop(),h.trys.pop();continue;default:if(!((a=0<(a=h.trys).length&&a[a.length-1])||6!==e[0]&&2!==e[0])){h=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3]))h.label=e[1];else if(6===e[0]&&h.label<a[1])h.label=a[1],a=e;else{if(!(a&&h.label<a[2])){a[2]&&h.ops.pop(),h.trys.pop();continue}h.label=a[2],h.ops.push(e)}}e=s.call(o,h)}catch(t){e=[6,t],r=0}finally{n=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},h=(Object.defineProperty(e,"__esModule",{value:!0}),e.PopUpBase=void 0,i(12)),i=(s=i(1).JDContainer,n(l,s),l.prototype.init=function(t){},l.prototype.show=function(){this.visible=!0},l.prototype.hide=function(){this.visible=!1},l.prototype.close=function(){this.panelManager.close(),this.destroy()},l.prototype.closeAD=function(){return r(this,void 0,Promise,function(){return a(this,function(t){switch(t.label){case 0:return[4,h.AzerionSDK.showInterstitialAd()];case 1:return t.sent(),this.close(),[2]}})})},l.prototype.resize=function(){},l.prototype.update=function(){},l.prototype.destroy=function(){s.prototype.destroy.call(this),this.scene=null,this.panelManager=null},l);function l(t){var e=s.call(this,t.scene)||this;return e.showBlack=!0,e.panelManager=t,e}e.PopUpBase=i},function(t,e,i){"use strict";function o(t,e){this.world=t,this.init(),this.initView(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Entity=void 0,o.prototype.init=function(){},o.prototype.initView=function(t){},o.prototype.spawn=function(t){this.spawnData=t},o.prototype.start=function(){this.reset()},o.prototype.update=function(){},o.prototype.trigger=function(t){},o.prototype.reset=function(){},o.prototype.restartLevel=function(){this.reset()},o.prototype.remove=function(){this.view&&this.view.destroy(),this.destroy()},o.prototype.updateView=function(t,e){this.view.x=t,this.view.y=e},o.prototype.alive=function(){return!0},o.prototype.getInteractive=function(){return this.view},o.prototype.getView=function(){return this.view},o.prototype.setDebug=function(t){},o.prototype.destroy=function(){this.world=null,this.spawnData=null,this.view=null},e.Entity=o},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ObstacleBuzzsaw=void 0,i(0)),a=i(1),h=i(5),l=i(6),c=i(3),u=i(8),i=(s=i(14).ObstacleBase,n(d,s),d.prototype.initView=function(t){s.prototype.initView.call(this,t),this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"obstacleBuzzsaw"),t.add(this.view),this.initBody(),this.body.data.SetUserData({id:c.ITEM_ID.obstacleBuzzsaw})},d.prototype.initBody=function(t){void 0===t&&(t=l.Box2DBodyType.static),this.body=h.Box2DWorld.getBody(0,0,t)},d.prototype.spawn=function(t){s.prototype.spawn.call(this,t),this.createBodyFixture(this.spawnData.scale),this.view.scale=t.scale/3,this.view.rotation=0},d.prototype.reset=function(){s.prototype.reset.call(this),this.updateBody(this.spawnData.x,this.spawnData.y)},d.prototype.createBodyFixture=function(t){this.body.setCircle(c.GameData.BUZZSAW_SIZE*t/2-2*t),this.body.setCollisionCategory(u.BodyCollisionFilter.DEFAULT)},d.prototype.updateBody=function(t,e){this.body.x=t,this.body.y=e,this.updateView(t,e)},d.prototype.update=function(){s.prototype.update.call(this),this.view.rotation+=.05,this.world.caclBuzzsawDis(this.view.x,this.view.y)},d.prototype.remove=function(){h.Box2DWorld.destroyBody(this.body),s.prototype.remove.call(this)},d.prototype.destroy=function(){s.prototype.destroy.call(this),this.body=null,this.view=null},d);function d(){return null!==s&&s.apply(this,arguments)||this}e.ObstacleBuzzsaw=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BasicView=void 0,i(29)),a=i(20),i=(s=i(27).BasicScene,n(h,s),h.prototype.init=function(){s.prototype.init.call(this),this.popUpManager=new a.PopUpManager(this),this.popUpManager.depth=5,this.add.existing(this.popUpManager),this.achievementPanel=new r.AchievementPanel(this),this.achievementPanel.depth=6,this.add.existing(this.achievementPanel)},h.prototype.resize=function(){s.prototype.resize.call(this),this.achievementPanel.resize(),this.popUpManager.resize()},h.prototype.update=function(){this.achievementPanel.update(),this.popUpManager.update()},h.prototype.destroy=function(){s.prototype.destroy.call(this),this.popUpManager=null,this.achievementPanel=null},h);function h(){return null!==s&&s.apply(this,arguments)||this}e.BasicView=i},function(I,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObstacleClassicLaserStatic=t.ObstacleBuzzsawOnStickHard=t.ObstacleBuzzsawOnStick=t.ObstacleBuzzsawMoving=t.ObstacleBuzzsawVertical=t.ObstacleBuzzsawHorizontal=t.ObstacleBuzzsawBouncing=t.ObstacleBuzzsawEnlarging=t.ObstacleBuzzsaw=t.ObstacleBase=t.BlockGlass=t.BlockIce=t.BlockTNT=t.BlockDissapear=t.BlockSpikes=t.BlockAppearing=t.BlockPush=t.BlockMoving=t.BlockInvisHorizontal=t.BlockInvisVertical=t.BlockInvisMoving=t.BlockInvis=t.BlockHorizontal=t.BlockVertical=t.BlockBounce=t.BlockSpeed=t.BlockFalling=t.BlockRoadPiece10=t.BlockRoadPiece09=t.BlockRoadPiece08=t.BlockRoadPiece06=t.BlockRoadPiece05=t.BlockRoadPiece04=t.BlockRoadPiece03=t.BlockTilt=t.BlockRoadHalfCircle=t.BlockRoad02=t.BlockAngle=t.BlockHill2=t.BlockHill=t.BlockSlopeDouble=t.BlockSlope=t.BlockBumps=t.BlockCircular=t.BlockPolygon=t.BlockBasic=t.BlockBase=t.FakePlayer=t.Player=t.Entity=void 0,t.PanelLevel=t.ParticleConfetti=t.FlipText=t.DeathCounter=t.StartTimer=t.Timer=t.ParticleManager=t.BodyCollisionFilter=t.InputManager=t.ButtonControl=t.World=t.MiscWoodPlank=t.MiscBarrel=t.MiscHazardStrips=t.MiscMissileLauncherBullet=t.MiscClassicLaserBullet=t.MiscBase=t.ItemSign=t.ItemWindBlaster=t.ItemFinish=t.ItemZoomZone=t.ItemCheckPoint=t.ItemFadeArrow=t.ItemFadeText=t.ItemTrigger=t.ItemBase=t.ObstacleArcSpike=t.ObstacleMissileLauncher=t.ObstacleHighSpikes=t.ObstacleLaserPoint=t.ObstacleShurikanDispenser=t.ObstacleFallingSpikeFactory=t.ObstacleFallingSpike=t.ObstacleSpikes=t.ObstacleSwingingSpikes=t.ObstacleReaper=t.ObstacleQuadrant=t.ObstacleClassicLaser=void 0;var i=e(22),o=(Object.defineProperty(t,"Entity",{enumerable:!0,get:function(){return i.Entity}}),e(41)),s=(Object.defineProperty(t,"Player",{enumerable:!0,get:function(){return o.Player}}),e(131)),n=(Object.defineProperty(t,"FakePlayer",{enumerable:!0,get:function(){return s.FakePlayer}}),e(7)),r=(Object.defineProperty(t,"BlockBase",{enumerable:!0,get:function(){return n.BlockBase}}),e(132)),a=(Object.defineProperty(t,"BlockBasic",{enumerable:!0,get:function(){return r.BlockBasic}}),e(10)),h=(Object.defineProperty(t,"BlockPolygon",{enumerable:!0,get:function(){return a.BlockPolygon}}),e(133)),l=(Object.defineProperty(t,"BlockCircular",{enumerable:!0,get:function(){return h.BlockCircular}}),e(134)),c=(Object.defineProperty(t,"BlockBumps",{enumerable:!0,get:function(){return l.BlockBumps}}),e(135)),u=(Object.defineProperty(t,"BlockSlope",{enumerable:!0,get:function(){return c.BlockSlope}}),e(136)),d=(Object.defineProperty(t,"BlockSlopeDouble",{enumerable:!0,get:function(){return u.BlockSlopeDouble}}),e(137)),p=(Object.defineProperty(t,"BlockHill",{enumerable:!0,get:function(){return d.BlockHill}}),e(138)),f=(Object.defineProperty(t,"BlockHill2",{enumerable:!0,get:function(){return p.BlockHill2}}),e(139)),b=(Object.defineProperty(t,"BlockAngle",{enumerable:!0,get:function(){return f.BlockAngle}}),e(140)),y=(Object.defineProperty(t,"BlockRoad02",{enumerable:!0,get:function(){return b.BlockRoad02}}),e(141)),m=(Object.defineProperty(t,"BlockRoadHalfCircle",{enumerable:!0,get:function(){return y.BlockRoadHalfCircle}}),e(142)),x=(Object.defineProperty(t,"BlockTilt",{enumerable:!0,get:function(){return m.BlockTilt}}),e(143)),g=(Object.defineProperty(t,"BlockRoadPiece03",{enumerable:!0,get:function(){return x.BlockRoadPiece03}}),e(144)),v=(Object.defineProperty(t,"BlockRoadPiece04",{enumerable:!0,get:function(){return g.BlockRoadPiece04}}),e(145)),_=(Object.defineProperty(t,"BlockRoadPiece05",{enumerable:!0,get:function(){return v.BlockRoadPiece05}}),e(146)),w=(Object.defineProperty(t,"BlockRoadPiece06",{enumerable:!0,get:function(){return _.BlockRoadPiece06}}),e(147)),S=(Object.defineProperty(t,"BlockRoadPiece08",{enumerable:!0,get:function(){return w.BlockRoadPiece08}}),e(148)),A=(Object.defineProperty(t,"BlockRoadPiece09",{enumerable:!0,get:function(){return S.BlockRoadPiece09}}),e(149)),C=(Object.defineProperty(t,"BlockRoadPiece10",{enumerable:!0,get:function(){return A.BlockRoadPiece10}}),e(150)),T=(Object.defineProperty(t,"BlockFalling",{enumerable:!0,get:function(){return C.BlockFalling}}),e(151)),P=(Object.defineProperty(t,"BlockSpeed",{enumerable:!0,get:function(){return T.BlockSpeed}}),e(152)),B=(Object.defineProperty(t,"BlockBounce",{enumerable:!0,get:function(){return P.BlockBounce}}),e(65)),E=(Object.defineProperty(t,"BlockVertical",{enumerable:!0,get:function(){return B.BlockVertical}}),e(66)),M=(Object.defineProperty(t,"BlockHorizontal",{enumerable:!0,get:function(){return E.BlockHorizontal}}),e(153)),D=(Object.defineProperty(t,"BlockInvis",{enumerable:!0,get:function(){return M.BlockInvis}}),e(154)),O=(Object.defineProperty(t,"BlockInvisMoving",{enumerable:!0,get:function(){return D.BlockInvisMoving}}),e(155)),R=(Object.defineProperty(t,"BlockInvisVertical",{enumerable:!0,get:function(){return O.BlockInvisVertical}}),e(156)),L=(Object.defineProperty(t,"BlockInvisHorizontal",{enumerable:!0,get:function(){return R.BlockInvisHorizontal}}),e(67)),F=(Object.defineProperty(t,"BlockMoving",{enumerable:!0,get:function(){return L.BlockMoving}}),e(157)),k=(Object.defineProperty(t,"BlockPush",{enumerable:!0,get:function(){return F.BlockPush}}),e(158)),V=(Object.defineProperty(t,"BlockAppearing",{enumerable:!0,get:function(){return k.BlockAppearing}}),e(159)),G=(Object.defineProperty(t,"BlockSpikes",{enumerable:!0,get:function(){return V.BlockSpikes}}),e(160)),z=(Object.defineProperty(t,"BlockDissapear",{enumerable:!0,get:function(){return G.BlockDissapear}}),e(161)),N=(Object.defineProperty(t,"BlockTNT",{enumerable:!0,get:function(){return z.BlockTNT}}),e(162)),X=(Object.defineProperty(t,"BlockIce",{enumerable:!0,get:function(){return N.BlockIce}}),e(163)),W=(Object.defineProperty(t,"BlockGlass",{enumerable:!0,get:function(){return X.BlockGlass}}),e(14)),U=(Object.defineProperty(t,"ObstacleBase",{enumerable:!0,get:function(){return W.ObstacleBase}}),e(23)),Y=(Object.defineProperty(t,"ObstacleBuzzsaw",{enumerable:!0,get:function(){return U.ObstacleBuzzsaw}}),e(164)),j=(Object.defineProperty(t,"ObstacleBuzzsawEnlarging",{enumerable:!0,get:function(){return Y.ObstacleBuzzsawEnlarging}}),e(165)),J=(Object.defineProperty(t,"ObstacleBuzzsawBouncing",{enumerable:!0,get:function(){return j.ObstacleBuzzsawBouncing}}),e(166)),H=(Object.defineProperty(t,"ObstacleBuzzsawHorizontal",{enumerable:!0,get:function(){return J.ObstacleBuzzsawHorizontal}}),e(167)),q=(Object.defineProperty(t,"ObstacleBuzzsawVertical",{enumerable:!0,get:function(){return H.ObstacleBuzzsawVertical}}),e(168)),K=(Object.defineProperty(t,"ObstacleBuzzsawMoving",{enumerable:!0,get:function(){return q.ObstacleBuzzsawMoving}}),e(69)),Z=(Object.defineProperty(t,"ObstacleBuzzsawOnStick",{enumerable:!0,get:function(){return K.ObstacleBuzzsawOnStick}}),e(169)),Q=(Object.defineProperty(t,"ObstacleBuzzsawOnStickHard",{enumerable:!0,get:function(){return Z.ObstacleBuzzsawOnStickHard}}),e(70)),$=(Object.defineProperty(t,"ObstacleClassicLaserStatic",{enumerable:!0,get:function(){return Q.ObstacleClassicLaserStatic}}),e(71)),tt=(Object.defineProperty(t,"ObstacleClassicLaser",{enumerable:!0,get:function(){return $.ObstacleClassicLaser}}),e(72)),et=(Object.defineProperty(t,"ObstacleQuadrant",{enumerable:!0,get:function(){return tt.ObstacleQuadrant}}),e(170)),it=(Object.defineProperty(t,"ObstacleReaper",{enumerable:!0,get:function(){return et.ObstacleReaper}}),e(171)),ot=(Object.defineProperty(t,"ObstacleSwingingSpikes",{enumerable:!0,get:function(){return it.ObstacleSwingingSpikes}}),e(172)),st=(Object.defineProperty(t,"ObstacleSpikes",{enumerable:!0,get:function(){return ot.ObstacleSpikes}}),e(44)),nt=(Object.defineProperty(t,"ObstacleFallingSpike",{enumerable:!0,get:function(){return st.ObstacleFallingSpike}}),e(173)),rt=(Object.defineProperty(t,"ObstacleFallingSpikeFactory",{enumerable:!0,get:function(){return nt.ObstacleFallingSpikeFactory}}),e(174)),at=(Object.defineProperty(t,"ObstacleShurikanDispenser",{enumerable:!0,get:function(){return rt.ObstacleShurikanDispenser}}),e(175)),ht=(Object.defineProperty(t,"ObstacleLaserPoint",{enumerable:!0,get:function(){return at.ObstacleLaserPoint}}),e(68)),lt=(Object.defineProperty(t,"ObstacleHighSpikes",{enumerable:!0,get:function(){return ht.ObstacleHighSpikes}}),e(176)),ct=(Object.defineProperty(t,"ObstacleMissileLauncher",{enumerable:!0,get:function(){return lt.ObstacleMissileLauncher}}),e(177)),ut=(Object.defineProperty(t,"ObstacleArcSpike",{enumerable:!0,get:function(){return ct.ObstacleArcSpike}}),e(17)),dt=(Object.defineProperty(t,"ItemBase",{enumerable:!0,get:function(){return ut.ItemBase}}),e(178)),pt=(Object.defineProperty(t,"ItemTrigger",{enumerable:!0,get:function(){return dt.ItemTrigger}}),e(179)),ft=(Object.defineProperty(t,"ItemFadeText",{enumerable:!0,get:function(){return pt.ItemFadeText}}),e(180)),bt=(Object.defineProperty(t,"ItemFadeArrow",{enumerable:!0,get:function(){return ft.ItemFadeArrow}}),e(181)),yt=(Object.defineProperty(t,"ItemCheckPoint",{enumerable:!0,get:function(){return bt.ItemCheckPoint}}),e(182)),mt=(Object.defineProperty(t,"ItemZoomZone",{enumerable:!0,get:function(){return yt.ItemZoomZone}}),e(183)),xt=(Object.defineProperty(t,"ItemFinish",{enumerable:!0,get:function(){return mt.ItemFinish}}),e(184)),gt=(Object.defineProperty(t,"ItemWindBlaster",{enumerable:!0,get:function(){return xt.ItemWindBlaster}}),e(185)),vt=(Object.defineProperty(t,"ItemSign",{enumerable:!0,get:function(){return gt.ItemSign}}),e(45)),_t=(Object.defineProperty(t,"MiscBase",{enumerable:!0,get:function(){return vt.MiscBase}}),e(74)),wt=(Object.defineProperty(t,"MiscClassicLaserBullet",{enumerable:!0,get:function(){return _t.MiscClassicLaserBullet}}),e(186)),St=(Object.defineProperty(t,"MiscMissileLauncherBullet",{enumerable:!0,get:function(){return wt.MiscMissileLauncherBullet}}),e(187)),At=(Object.defineProperty(t,"MiscHazardStrips",{enumerable:!0,get:function(){return St.MiscHazardStrips}}),e(188)),Ct=(Object.defineProperty(t,"MiscBarrel",{enumerable:!0,get:function(){return At.MiscBarrel}}),e(189)),Tt=(Object.defineProperty(t,"MiscWoodPlank",{enumerable:!0,get:function(){return Ct.MiscWoodPlank}}),e(190)),Pt=(Object.defineProperty(t,"World",{enumerable:!0,get:function(){return Tt.World}}),e(59)),Bt=(Object.defineProperty(t,"ButtonControl",{enumerable:!0,get:function(){return Pt.ButtonControl}}),e(58)),Et=(Object.defineProperty(t,"InputManager",{enumerable:!0,get:function(){return Bt.InputManager}}),e(8)),Mt=(Object.defineProperty(t,"BodyCollisionFilter",{enumerable:!0,get:function(){return Et.BodyCollisionFilter}}),e(76)),Dt=(Object.defineProperty(t,"ParticleManager",{enumerable:!0,get:function(){return Mt.ParticleManager}}),e(195)),Ot=(Object.defineProperty(t,"Timer",{enumerable:!0,get:function(){return Dt.Timer}}),e(196)),Rt=(Object.defineProperty(t,"StartTimer",{enumerable:!0,get:function(){return Ot.StartTimer}}),e(197)),Lt=(Object.defineProperty(t,"DeathCounter",{enumerable:!0,get:function(){return Rt.DeathCounter}}),e(198)),Ft=(Object.defineProperty(t,"FlipText",{enumerable:!0,get:function(){return Lt.FlipText}}),e(199)),It=(Object.defineProperty(t,"ParticleConfetti",{enumerable:!0,get:function(){return Ft.ParticleConfetti}}),e(200));Object.defineProperty(t,"PanelLevel",{enumerable:!0,get:function(){return It.PanelLevel}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Medals=e.GamePlay=e.LevelSelect=e.Skins=e.Menu=e.Preloader=e.Boot=e.BasicScene=void 0;var o=i(27),s=(Object.defineProperty(e,"BasicScene",{enumerable:!0,get:function(){return o.BasicScene}}),i(90)),n=(Object.defineProperty(e,"Boot",{enumerable:!0,get:function(){return s.Boot}}),i(48)),r=(Object.defineProperty(e,"Preloader",{enumerable:!0,get:function(){return n.Preloader}}),i(33)),a=(Object.defineProperty(e,"Menu",{enumerable:!0,get:function(){return r.Menu}}),i(62)),h=(Object.defineProperty(e,"Skins",{enumerable:!0,get:function(){return a.Skins}}),i(63)),l=(Object.defineProperty(e,"LevelSelect",{enumerable:!0,get:function(){return h.LevelSelect}}),i(64)),c=(Object.defineProperty(e,"GamePlay",{enumerable:!0,get:function(){return l.GamePlay}}),i(202));Object.defineProperty(e,"Medals",{enumerable:!0,get:function(){return c.Medals}})},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BasicScene=void 0,i(9)),a=i(2),i=(s=Phaser.Scene,n(h,s),h.prototype.init=function(){this.events.once(Phaser.Scenes.Events.SHUTDOWN,this.destroy,this)},h.prototype.create=function(){this.initResize()},h.prototype.initResize=function(){this.scale.on(Phaser.Scale.Events.RESIZE,this.resize,this),this.resize()},h.prototype.resize=function(){r.CustomResize.resizeCamera(this.cameras.main)},h.prototype.destroy=function(){this.scale.off(Phaser.Scale.Events.RESIZE,this.resize,this),a.SoundManager.reset()},h);function h(){return null!==s&&s.apply(this,arguments)||this}e.BasicScene=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Localization=void 0;var o=i(0),s=i(19),n=i(4),r=i(16);function a(){}a.init=function(e){o.Constants.AVAILABLE_LANGUAGES.forEach(function(t){a.add(t,o.Jsons.getJson(e,"locale_"+t))});var t=n.Tools.getURLParam("lang");t?this.setLng(this.checkLangExist(t)):(this.language=s.SaveData.getItem(r.SaveTypes.languange),this.language&&!1!==o.Constants.SHOW_BUTTON_LANGUAGES||(this.language=this.checkLangExist((navigator.language||navigator.userLanguage).substr(0,2))),this.setLng(this.language))},a.checkLangExist=function(t){return-1===o.Constants.AVAILABLE_LANGUAGES.indexOf(t)?"en":t},a.getLng=function(){return this.language},a.setLng=function(t){this.language=t,s.SaveData.setItem(r.SaveTypes.languange,this.language)},a.add=function(t,e){this.data[t]=e},a.getData=function(){return this.data[this.language]},a.getText=function(t){return this.data[this.language][t]||t},a.getLngText=function(t,e){t=this.data[t][e];return t||""===e?t:e},a.setTestLang=function(t){void 0===t&&(t=!0),this.setLng("en");for(var e=0,i=Object.keys(this.data);e<i.length;e++){var o=i[e];if("en"!==o)for(var s=0,n=Object.keys(this.data[o]);s<n.length;s++){var r=n[s];(!0===t&&this.data.en[r].length<this.data[o][r].length||!1===t&&this.data.en[r].length>this.data[o][r].length)&&(this.data.en[r]=this.data[o][r])}}},a.EVENT_LANGUAGES_CHANGED="event_languages_changed",a.data={},e.Localization=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AchievementPanel=e.CurrencyPanel=void 0;var o=i(91),s=(Object.defineProperty(e,"CurrencyPanel",{enumerable:!0,get:function(){return o.CurrencyPanel}}),i(127));Object.defineProperty(e,"AchievementPanel",{enumerable:!0,get:function(){return s.AchievementPanel}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaseButton=void 0;var o=i(0),s=i(2);function n(t){this.isOver=!1,this.currPointerID=-1,this.soundDown=o.Constants.SFX_BTN_ON_DOWN,this.soundUp=o.Constants.SFX_BTN_ON_UP,this.soundOver=o.Constants.SFX_BTN_ON_OVER,this.tintOut=16777215,this.tintOver=11914226,this.scaleOut=1,this.scaleOver=1,this.scene=t}n.prototype.createView=function(t){this.view=t,this.view.once(Phaser.GameObjects.Events.DESTROY,this.destroy,this)},n.prototype.initEvents=function(t,e,i,o){t.setInteractive(e,i,o),t.input.cursor="pointer",t.on(Phaser.Input.Events.POINTER_DOWN,this.inputDown,this),this.scene.input.on(Phaser.Input.Events.POINTER_UP,this.inputUp,this),t.on(Phaser.Input.Events.POINTER_OUT,this.inputOut,this),t.on(Phaser.Input.Events.POINTER_OVER,this.inputOver,this),this.interactiveElement=t},n.prototype.setTintInteractive=function(t,e){this.tintOut=t,this.tintOver=e,this.inputOut()},n.prototype.setScaleInteractive=function(t,e){this.scaleOut=t,this.scaleOver=e,this.inputOut()},n.prototype.inputOut=function(){this.isOver=!1,this.outState()},n.prototype.outState=function(){!0===this.interactiveElement.input.enabled&&(this.interactiveElement.tint=this.tintOut),this.view.scale=this.scaleOut},n.prototype.overState=function(){!0===this.interactiveElement.input.enabled&&(this.interactiveElement.tint=this.tintOver),this.view.scale=this.scaleOver,this.soundOver&&s.SoundManager.playSFX(this.soundOver)},n.prototype.inputOver=function(){this.isOver=!0,this.overState(),0<=this.currPointerID&&this.downState()},n.prototype.inputDown=function(t){this.currPointerID=t.id,this.downState(),this.downComplete()},n.prototype.downState=function(){},n.prototype.upState=function(){},n.prototype.inputUp=function(t){0<=this.currPointerID&&this.upState(),!1!==this.isOver&&this.currPointerID===t.id?(this.currPointerID=-1,this.upComplete(),this.soundUp&&s.SoundManager.playSFX(this.soundUp)):this.currPointerID=-1},n.prototype.downComplete=function(){this.onDown&&this.onDown(),this.soundDown&&s.SoundManager.playSFX(this.soundDown)},n.prototype.upComplete=function(){this.onUp&&this.onUp()},n.prototype.setXY=function(t,e){this.view.x=t,this.view.y=e},n.prototype.getInteraction=function(){return this.interactiveElement.input.enabled},n.prototype.setInteraction=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1),!1===t&&(!0===i&&this.scene.input.setDefaultCursor(""),!0===e)&&this.outState(),this.interactiveElement.input.enabled=t},Object.defineProperty(n.prototype,"x",{get:function(){return this.view.x},set:function(t){this.view.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this.view.y},set:function(t){this.view.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"scaleX",{get:function(){return this.view.scaleX},set:function(t){this.view.scaleX=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"scale",{get:function(){return this.view.scale},set:function(t){this.view.scale=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"scaleY",{get:function(){return this.view.scaleY},set:function(t){this.view.scaleY=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"visible",{get:function(){return this.view.visible},set:function(t){this.view.visible=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"alpha",{get:function(){return this.view.alpha},set:function(t){this.view.alpha=t},enumerable:!1,configurable:!0}),n.prototype.getView=function(){return this.view},n.prototype.getInteractiveElement=function(){return this.interactiveElement},n.prototype.destroy=function(){this.scene.input.off(Phaser.Input.Events.POINTER_UP,this.inputUp,this),this.view=null,this.interactiveElement=null,this.scene=null,this.onDown=null,this.onUp=null},e.BaseButton=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Helpers=void 0;var o=i(4),s=i(2),n=i(41);function r(){}r.timeDecoratorLevel=function(t){var e=Math.floor(t/6e3),i=Math.floor((t-60*e*100)/100),t=t-100*Math.floor(t/100);return this.formatNumberZeroLess10(e)+":"+this.formatNumberZeroLess10(i)+":"+this.formatNumberZeroLess10(t)},r.timeDecorator=function(t){var e=Math.floor(t/6e3),t=Math.floor((t-60*e*100)/100);return this.formatNumberZeroLess10(e)+":"+this.formatNumberZeroLess10(t)},r.moneyDecorator=function(t){return t<1e3?""+t:t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},r.getDeathText=function(t){var e=1;return t===n.DeathType.spike||t===n.DeathType.hardLanding||t===n.DeathType.fall||t===n.DeathType.dead_15?e=2:t===n.DeathType.buzzsaw||t===n.DeathType.squashed||t===n.DeathType.drowned||t===n.DeathType.dead_7||t===n.DeathType.shurikan||t===n.DeathType.sparkElectric||t===n.DeathType.poolElectric||t===n.DeathType.dead_13||t===n.DeathType.laser?e=3:t===n.DeathType.noEntry||t===n.DeathType.quadrant?e=1:t===n.DeathType.reaper?e=4:t===n.DeathType.head&&(e=17),"death"+t+"_"+o.Tools.random(1,e)},r.formatNumberZeroLess10=function(t){return t<10?"0"+t:""+t},r.getLevelTargetText=function(t,e){return 1===t?s.Localization.getText("lvlTarget1"):2===t?s.Localization.getText("lvlTarget2").replace("<x>",""+e):3===t?e<=1?s.Localization.getText("lvlTarget3"):s.Localization.getText("lvlTarget3less").replace("<x>",""+e):void 0},r.isAnHour=function(t){return!!t&&1<=Math.floor(t/1e3/60/60)},e.Helpers=r},function(t,e,i){"use strict";function o(){}Object.defineProperty(e,"__esModule",{value:!0}),e.Tools=void 0,o.getRandomColor=function(t,e){return void 0===e&&(e=255),(t=void 0===t?0:t)+Math.floor(Math.random()*e)<<16|t+Math.floor(Math.random()*e)<<8|t+Math.floor(Math.random()*e)},o.useArrayFunction=function(t,e){for(var i=0;i<t.length;i++)t[i][e]()},o.arrayMove=function(t,e,i){t.splice(i,0,t.splice(e,1)[0])},o.removeFromArray=function(t,e){e=t.indexOf(e);return-1!==e&&(t.splice(e,1),!0)},o.random=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},o.randomNum=function(t,e){return Math.random()*(e-t)+t},o.simpleRandom=function(){return 100*Math.random()},o.randomOne=function(t){return void 0===t&&(t=.5),Math.random()<t?1:-1},o.randomBool=function(t){return void 0===t&&(t=.5),Math.random()<t},o.sign=function(t){return t<0?-1:0<t?1:0},o.roundDec=function(t,e){void 0===e&&(e=0);e=Math.pow(10,e);return Math.round(t*e)/e},o.clamp=function(t,e,i){return Math.max(e,Math.min(i,t))},o.lerp=function(t,e,i){return t+(e-t)*o.clamp(i,0,1)},o.lerpUnity=function(t,e,i){return t+(e-t)*o.clamp01Unity(i)},o.clamp01Unity=function(t){return t<0?0:1<t?1:t},o.magnitudeUnity=function(t,e){return Math.sqrt(t*t+e*e)},o.sqrtMagnitudeUnity=function(t,e){return t*t+e*e},o.toDeg=function(t){return t*this.radToDeg},o.toRad=function(t){return t*this.degToRad},o.rotatePointByAngle=function(t,e,i,o,s){var n=Math.cos(s),s=Math.sin(s);return{x:t+(i-t)*n-(o-e)*s,y:e+(i-t)*s+(o-e)*n}},o.distance=function(t,e,i,o){return Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))},o.angleOfPoints=function(t,e,i,o){return Math.atan2(o-e,i-t)},o.getObjectRandomProperty=function(t){var e=Object.keys(t);return t[e[e.length*Math.random()<<0]]},o.abs=function(t){return t=t<0?-t:t},o.getSlideSide=function(t,e,i,o){t=this.toDeg(this.angleOfPoints(t,e,i,o));return t<-45&&-135<t?"down":135<t&&t<=180||-180<=t&&t<-135?"right":45<t&&t<135?"up":-45<t&&t<45?"left":"none"},o.toPercent=function(t,e){return t/e*100},o.fromPercent=function(t,e){return t*e/100},o.damping=function(t,e,i){return void 0===e&&(e=.05),void 0===i&&(i=.95),t=0!==t&&o.abs(t*=i)<e?0:t},o.intersectsRectangles=function(t,e,i,o,s,n,r,a){return!(t+i<s||e+o<n||s+r<t||n+a<e)},o.intersectCircleRectange=function(t,e,i,o,s,n,r){n/=2,r/=2,t=Math.abs(t-o-n),o=Math.abs(e-s-r);return!(n+i<t||r+i<o||!(t<=n||o<=r||(e=t-n)*e+(s=o-r)*s<=i*i))},o.containsRectPoint=function(t,e,i,o,s,n){return t<=s&&s<t+i&&e<=n&&n<e+o},o.angleDifference=function(t,e){e=e<t?t-e:e-t;return e<180?e:360-e},o.vec2Length=function(t,e){return Math.sqrt(t*t+e*e)},o.getRandomCellID=function(t){return Math.floor(Math.random()*t)},o.getAndDelRandomCell=function(t){var e=o.getRandomCellID(t.length),i=t[e];return t.splice(e,1),i},o.getRandomCell=function(t){return t[o.getRandomCellID(t.length)]},o.shuffle=function(t){for(var e=t.length;1<e;){e--;var i=Math.floor(Math.random()*(e+1)),o=t[i];t[i]=t[e],t[e]=o}},o.getFrom1Dto2DIndex=function(t,e){return{x:t%e,y:Math.floor(t/e)}},o.containsPointInPoly=function(t,e,i){for(var o=!1,s=t.length-1,n=0;n<t.length;s=n++){var r=t[n].x,a=t[n].y,h=t[s].x,l=t[s].y;!0==(i<a!=i<l&&e<(h-r)*(i-a)/(l-a)+r)&&(o=!o)}return o},o.interpolateColor=function(t,e,i,o){return this.getHexColorFromRBG255(this.interpolateColorRGB(this.getRGB255(t),this.getRGB255(e),i,o))},o.interpolateColorRGB=function(t,e,i,o){return{r:(e.r-t.r)*i/o+t.r,g:(e.g-t.g)*i/o+t.g,b:(e.b-t.b)*i/o+t.b}},o.getRGB=function(t){return{r:(t>>16&255)/255,g:(t>>8&255)/255,b:(255&t)/255}},o.getRGBFromString=function(t){t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return t?{r:parseInt(t[1],16)/255,g:parseInt(t[2],16)/255,b:parseInt(t[3],16)/255}:null},o.getRGB255=function(t){return{r:t>>16&255,g:t>>8&255,b:255&t}},o.getHexColorFromRBG255=function(t){return this.getHexColorFrom255(t.r,t.g,t.b)},o.getHexColorFrom255=function(t,e,i){return t<<16|e<<8|i},o.rgbToHexString=function(t,e,i,o){return(o=void 0===o?"#":o)+((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1)},o.formatNumber=function(t){return t.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},o.sortArrayObectsByKey=function(t,i,e){var o=-1,s=1;!1===(e=void 0===e?!0:e)&&(s=-(o=1)),t.sort(function(t,e){t=t[i],e=e[i];return t<e?o:e<t?s:0})},o.checkSkewValue=function(t){return t>Math.PI?t=-(Math.PI-(t-Math.PI)):t<-Math.PI&&(t=Math.PI+(t+Math.PI)),t},o.smartRotation=function(t){return(t%=o.PI2)>Math.PI?t-=o.PI2:t<-Math.PI&&(t+=o.PI2),t},o.convertNumToStr=function(t,e){void 0===e&&(e=2);var i=String(Math.floor(t));for("NaN"===i&&(i="0");i.length<e;)i="0"+i;return i},o.formatNum=function(t,e,i){void 0===i&&(i=-1);var o=t<0;t=Math.abs(t);for(var s=""+Math.floor(t);s.length<e;)s="0"+s;if(0<=i){var n=""+t,t=n.indexOf(".");for(-1===t&&(t=n.length-1),n=n.substr(t+1,i);n.length<i;)n+="0";s+="."+n}return s=!0==o?"-"+s:s},o.getVolumeFromVelocity=function(t,e,i){return(i=void 0===i?1:i)<t/(e=void 0===e?10:e)?i:t/e},o.calcCurrentTime=function(t){var e=new Date(Date.now()),t=new Date(t);return t.setTime(t.getTime()),e-t},o.isAnHour=function(t){return 1<=Math.floor(t/1e3/60/60)},o.getFollowRotationSpeed=function(t,e,i,o,s,n){return void 0===n&&(n=1),this.getFollowRotationSpeedR(i,this.angleOfPoints(t,e,o,s),n)},o.getFollowRotationSpeedR=function(t,e,i){e=(e-t)%this.PI2;return.001<e||e<-.001?(e>Math.PI?e-=this.PI2:e<-Math.PI&&(e+=this.PI2),e*i):0},o.getURLParam=function(t){return new Proxy(new URLSearchParams(window.location.search),{get:function(t,e){return t.get(e)}})[t]},o.getStringSize=function(t){return(2*t.length/1024).toFixed(2)+" KB"},o.PI2=2*Math.PI,o.PI075=.75*Math.PI,o.PI05=.5*Math.PI,o.PI025=.25*Math.PI,o.degToRad=Math.PI/180,o.radToDeg=180/Math.PI,e.Tools=o},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.Menu=void 0,i(24)),a=i(4),h=i(13),l=i(2),c=i(26),u=i(0),d=i(20),p=i(9),f=i(1),b=i(29),y=i(128),i=(s=r.BasicView,n(m,s),m.prototype.init=function(){var t=this,e=(s.prototype.init.call(this),!1===m.soundStarted&&(m.soundStarted=!0,l.SoundManager.playRandomMusic()),new f.JDImage(this,p.CustomResize.GHW,p.CustomResize.GHH,"whitePixel"));e.setDisplaySize(p.CustomResize.GMW,p.CustomResize.GMH),e.setTint(16645629,15790320,16645629,15790320),this.add.existing(e),this.tabPanel=new f.JDImage(this,a.AlignTo.getCenterX(),0,u.Atlases.ui,"tab-panel"),this.tabPanel.setOrigin(.5,1),this.tabPanel.displayWidth=p.CustomResize.GMW+200,this.add.existing(this.tabPanel),this.btnSettings=new h.ButtonScaleImage(this,0,0,u.Atlases.ui,"settings-button"),this.btnSettings.onUp=function(){return t.popUpManager.open(d.PopUpList.Settings)},this.add.existing(this.btnSettings.getView()),this.btnPlay=new h.ButtonScale(this,0,0),this.btnPlay.addImageEvents(u.Atlases.ui,"orange-button"),this.btnPlay.addTxtStroke("play",u.Fonts.Main,112,16777215,3421236),this.btnPlay.onUp=function(){return t.scene.start(c.LevelSelect.Name)},this.add.existing(this.btnPlay.getView()),this.btnSkins=new h.ButtonScale(this,0,0),this.btnSkins.addImageEvents(u.Atlases.ui,"menu-small-button"),this.btnSkins.addIcon(u.Atlases.ui,"skin-icon"),this.btnSkins.onUp=function(){return t.scene.start(c.Skins.Name,{prev:m.Name})},this.add.existing(this.btnSkins.getView()),this.btnAchievements=new h.ButtonScale(this,0,0),this.btnAchievements.addImageEvents(u.Atlases.ui,"menu-small-button"),this.btnAchievements.addIcon(u.Atlases.ui,"achievements-icon"),this.btnAchievements.onUp=function(){return t.scene.start(c.Medals.Name)},this.add.existing(this.btnAchievements.getView()),this.currency=new b.CurrencyPanel(this),this.add.existing(this.currency),this.logo=new y.Logo(this),this.add.existing(this.logo)},m.prototype.update=function(){s.prototype.update.call(this),this.logo.update()},m.prototype.resize=function(){s.prototype.resize.call(this),a.AlignTo.leftTop(this.btnSettings,100,100),a.AlignTo.bot(this.tabPanel),a.AlignTo.rightBot(this.btnPlay,350,145),a.AlignTo.left(this.btnSkins,200),this.btnSkins.y=this.btnPlay.y,this.btnAchievements.x=this.btnSkins.x+250,this.btnAchievements.y=this.btnSkins.y,this.currency.resize()},m.prototype.destroy=function(){s.prototype.destroy.call(this),this.btnSettings=null,this.tabPanel=null,this.btnPlay=null,this.btnSkins=null,this.btnAchievements=null,this.currency=null,this.logo=null},m.Name="menu",m.soundStarted=!1,m);function m(){return null!==s&&s.apply(this,arguments)||this}e.Menu=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),h=(Object.defineProperty(e,"__esModule",{value:!0}),e.ButtonContainer=void 0,i(1)),i=(s=i(30).BaseButton,n(r,s),r.prototype.addImageEvents=function(t,e,i,o,s,n){void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=1),void 0===n&&(n=1),this.image=new Phaser.GameObjects.Image(this.scene,i,o,t,e),this.image.setScale(s,n),this.view.add(this.image),this.initEvents(this.image)},r.prototype.addIcon=function(t,e,i,o,s,n){void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=1),void 0===n&&(n=1),this.icon=new Phaser.GameObjects.Image(this.scene,i,o,t,e),this.icon.setScale(s,n),this.view.add(this.icon)},r.prototype.addIcon2=function(t,e,i,o,s,n){void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=1),void 0===n&&(n=1),this.icon2=new Phaser.GameObjects.Image(this.scene,i,o,t,e),this.icon2.setScale(s,n),this.view.add(this.icon2)},r.prototype.addTxt=function(t,e,i,o,s,n,r){this.txt=new h.JDBmpdText(this.scene,n=void 0===n?0:n,r=void 0===r?0:r,e,t,i,o=void 0===o?16777215:o,s=void 0===s?1:s),this.view.add(this.txt)},r.prototype.addTxtFit=function(t,e,i,o,s,n,r){this.txtFit=new h.JDBmpdTextFit(this.scene,n=void 0===n?0:n,r=void 0===r?0:r,e,t,i,o=void 0===o?16777215:o,s=void 0===s?1:s),this.view.add(this.txtFit)},r.prototype.addTxtTranslated=function(t,e,i,o,s,n,r){this.txtTranslated=new h.JDBmpdTextTranslated(this.scene,n=void 0===n?0:n,r=void 0===r?0:r,e,t,i,o=void 0===o?16777215:o,s=void 0===s?1:s),this.view.add(this.txtTranslated)},r.prototype.addTxtStroke=function(t,e,i,o,s,n,r,a){this.txtStroke=new h.JDBmpdTextStroke(this.scene,r=void 0===r?0:r,a=void 0===a?0:a,e,t,i,o=void 0===o?16777215:o,s=void 0===s?16777215:s,n=void 0===n?1:n),this.view.add(this.txtStroke)},r.prototype.add=function(t){this.view.add(t)},r.prototype.destroy=function(){s.prototype.destroy.call(this),this.image=null,this.icon=null,this.icon2=null,this.txt=null,this.txtFit=null,this.txtTranslated=null,this.txtStroke=null},r);function r(t,e,i){var o=s.call(this,t)||this;return o.createView(new Phaser.GameObjects.Container(t,e,i)),o}e.ButtonContainer=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=(Object.defineProperty(e,"__esModule",{value:!0}),e.JDImage=void 0,s=Phaser.GameObjects.Image,n(r,s),r);function r(){return null!==s&&s.apply(this,arguments)||this}e.JDImage=n},function(t,e,i){"use strict";var o,r,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.JDImageAnim=void 0,r=i(35).JDImage,s(n,r),n.prototype.changeAnimation=function(t,e){void 0===e&&(e=0),this.frameStart=t,this.setFrameNum(e)},n.prototype.setFrameNum=function(t){void 0===t&&(t=0),this.currFrame=-1,this.setAnimFrame(t)},n.prototype.stop=function(){this.isPlaying=!1},n.prototype.gotoAndPlay=function(t,e,i,o,s){this.playFrames(t,e,o=void 0===o?0:o,s=void 0===s?60:s),this.counterAnim=i,this.setAnimFrame(this.counterAnim)},n.prototype.gotoAndStop=function(t){this.stop(),this.counterAnim=t,this.setAnimFrame(this.counterAnim)},n.prototype.playFrames=function(t,e,i,o){void 0===i&&(i=0),void 0===o&&(o=60),this.isPlaying=!0,t<e?this.dir=o/60:e<t?this.dir=-o/60:t===e&&(this.isPlaying=!1),this.startFrame=t,this.endFrame=e,this.loop=i,this.counterAnim=this.startFrame,this.setAnimFrame(this.counterAnim)},n.prototype.reverse=function(){var t;this.dir=-this.dir,(0<this.dir&&this.endFrame<this.startFrame||this.dir<0&&this.endFrame>this.startFrame)&&(t=this.startFrame,this.startFrame=this.endFrame,this.endFrame=t),!1===this.isPlaying&&this.playFrames(this.startFrame,this.endFrame,this.loop,Math.abs(this.dir))},n.prototype.setAnimFrame=function(t){t=Math.floor(t);this.currFrame!==t&&(this.currFrame=t,this.applyFrame(this.frameStart,this.currFrame))},n.prototype.applyFrame=function(t,e){this.textureID?this.setFrame(t+e):this.setTexture(t+e)},n.prototype.update=function(){!0===this.isPlaying&&this.updateAnimation()},n.prototype.updateAnimation=function(){0<this.dir&&this.counterAnim>=this.endFrame+1||this.dir<0&&this.counterAnim<=this.endFrame-1?(0===this.loop?(this.isPlaying=!1,this.counterAnim=this.endFrame,this.visible=!this.hideOnComplete):0<this.loop?(this.counterAnim=this.startFrame,--this.loop):this.loop<0&&(this.counterAnim=this.startFrame),this.setAnimFrame(this.counterAnim),this.onCompleted()):(this.setAnimFrame(this.counterAnim),this.counterAnim+=this.dir)},n.prototype.onCompleted=function(){this.onComplete&&this.onComplete()},n.prototype.destroy=function(){r.prototype.destroy.call(this),this.onComplete=null},n);function n(t,e,i,o,s,n){void 0===n&&(n=0);t=r.call(this,t,e,i,o)||this;return t.isPlaying=!1,t.currFrame=-1,t.loop=0,t.hideOnComplete=!1,t.textureID=o,t.changeAnimation(s,n),t.setFrameNum(n),t}e.JDImageAnim=i},function(t,e,i){"use strict";var o,h,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=(Object.defineProperty(e,"__esModule",{value:!0}),e.JDBmpdText=void 0,h=Phaser.GameObjects.BitmapText,s(n,h),n.prototype.setText=function(t){return this.refreshDrawTint=!0,h.prototype.setText.call(this,t),this},n.prototype.setColor=function(t){this.tint=t},n.prototype.destroy=function(){Phaser.GameObjects.GameObject.prototype.destroy.call(this)},n);function n(t,e,i,o,s,n,r,a){void 0===r&&(r=16777215);t=h.call(this,t,e,i,o,s,n,a=void 0===a?1:a)||this;return t.refreshDrawTint=!1,t.setOrigin(.5*a,.5),t.setColor(r),t}e.JDBmpdText=s},function(t,e,i){"use strict";var o,h,l,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=(Object.defineProperty(e,"__esModule",{value:!0}),e.JDText=e.JDTextAlign=void 0,(n=h=e.JDTextAlign||(e.JDTextAlign={})).left="left",n.right="right",n.center="center",l=Phaser.GameObjects.Text,s(r,l),r);function r(t,e,i,o,s,n,r,a){void 0===a&&(a=h.center);t=l.call(this,t,e,i,s,{fontFamily:o,fontSize:n+"px",color:r=void 0===r?"#ffffff":r,align:a})||this;return t.setOrigin(.5,.5),t}e.JDText=n},function(t,e,i){"use strict";var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.JDTextInput=e.JDTextInputType=void 0;var n,r,a=i(55),h=i(38),i=((i=n=e.JDTextInputType||(e.JDTextInputType={})).text="text",i.password="password",i.number="number",r=Phaser.GameObjects.Container,s(l,r),l.prototype.createInput=function(){this.add(this.inputText),this.updateText(this.realText)},l.prototype.renderWebGL=function(t,e,i,o){r.prototype.renderWebGL.call(this,t,e,i,o),!1===this.inputText.visible&&a.InputField.render(i,o)},l.prototype.renderCanvas=function(t,e,i,o){r.prototype.renderCanvas.call(this,t,e,i,o),!1===this.inputText.visible&&a.InputField.render(i,o)},l.prototype.inputDown=function(){this.inputText.visible=!1,a.InputField.onTxtIn(this),this.emit(l.EVENT_FOCUS_IN,this)},l.prototype.inputUp=function(t,e){!1===this.inputText.visible&&this.inputBox!==e[0]&&a.InputField.onFocusOut()},l.prototype.onFocusOut=function(t){this.inputText.visible=!0,this.updateText(t),this.emit(l.EVENT_FOCUS_OUT,this)},l.prototype.updateText=function(t){this.realText=t;var e=this.options.bgWidth-2*this.options.textBorderOffX;if(this.options.type===n.password){this.inputText.text=this.checkPlaceHolder("");for(var i=0;i<this.realText.length&&(this.inputText.text+="•",!(this.inputText.width>e));i++);}else for(t=this.checkPlaceHolder(t),this.inputText.text=t;this.inputText.width>e;)this.inputText.text=this.inputText.text.slice(0,-1)},l.prototype.checkPlaceHolder=function(t){return 0===this.realText.length&&this.options.placeHolder?(t=this.options.placeHolder,this.options.placeHolderColor&&this.inputText.setColor(this.options.placeHolderColor)):this.inputText.style.color!==this.options.fontColor&&this.inputText.setColor(this.options.fontColor),t},Object.defineProperty(l.prototype,"text",{get:function(){return this.realText},set:function(t){this.updateText(t)},enumerable:!1,configurable:!0}),l.prototype.getInput=function(){return this.inputBox.input},l.prototype.destroy=function(){this.scene.input.off(Phaser.Input.Events.POINTER_DOWN,this.inputUp,this),r.prototype.destroy.call(this),this.options=null,this.inputBox=null,this.inputText=null},l.EVENT_FOCUS_IN="EVENT_FOCUS_IN",l.EVENT_FOCUS_OUT="EVENT_FOCUS_OUT",l);function l(t,e,i,o){void 0===o&&(o={});t=r.call(this,t,e,i)||this;return t.options=o,t.options.text=void 0===o.text?"":o.text,t.options.fontFamily=void 0===o.fontFamily?"Arial":o.fontFamily,t.options.fontSize=void 0===o.fontSize?30:o.fontSize,t.options.fontColor=void 0===o.fontColor?"#000000":o.fontColor,t.options.textAlign=void 0===o.textAlign?h.JDTextAlign.left:o.textAlign,t.options.textAlignVertical=void 0===o.textAlignVertical?.5:o.textAlignVertical,t.options.textBorderOffX=void 0===o.textBorderOffX?0:o.textBorderOffX,t.options.textBorderOffY=void 0===o.textBorderOffY?0:o.textBorderOffY,t.options.maxLength=void 0===o.maxLength?100:o.maxLength,t.options.type=o.type||n.text,t.options.inputTextColor=void 0===o.inputTextColor?t.options.fontColor:o.inputTextColor,t.realText=t.options.text,t.inputText=new Phaser.GameObjects.Text(t.scene,0,t.options.textBorderOffY,"",{fontFamily:t.options.fontFamily,fontSize:t.options.fontSize,color:t.options.fontColor,align:t.options.textAlign}),t.options.textAlign===h.JDTextAlign.left?(t.inputText.setOrigin(0,t.options.textAlignVertical),t.inputText.x=t.options.textBorderOffX):t.options.textAlign===h.JDTextAlign.center?t.inputText.setOrigin(.5,t.options.textAlignVertical):t.options.textAlign===h.JDTextAlign.right&&(t.inputText.setOrigin(1,t.options.textAlignVertical),t.inputText.x=-t.options.textBorderOffX),t.scene.input.on(Phaser.Input.Events.POINTER_DOWN,t.inputUp,t),t}e.JDTextInput=i},function(t,e,i){"use strict";var o,n,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.ButtonImage=void 0,n=i(30).BaseButton,s(r,n),Object.defineProperty(r.prototype,"flipX",{get:function(){return this.view.flipX},set:function(t){this.view.flipX=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"flipY",{get:function(){return this.view.flipY},set:function(t){this.view.flipY=t},enumerable:!1,configurable:!0}),r);function r(t,e,i,o,s){t=n.call(this,t)||this;return t.createView(new Phaser.GameObjects.Image(t.scene,e,i,o,s)),t.initEvents(t.view),t}e.ButtonImage=i},function(t,e,i){"use strict";var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.Player=e.DeathType=void 0;var n,r,a=i(3),h=i(58),l=i(118),c=i(126),u=i(31),d=i(2),p=i(18),f=i(4),b=i(15),i=((i=n=e.DeathType||(e.DeathType={})).spike="0",i.hardLanding="1",i.buzzsaw="2",i.squashed="3",i.drowned="4",i.fall="5",i.noEntry="6",i.dead_7="7",i.reaper="8",i.shurikan="9",i.quadrant="10",i.sparkElectric="11",i.poolElectric="12",i.dead_13="13",i.laser="14",i.dead_15="15",i.head="17",r=l.Bike,s(y,r),y.prototype.initView=function(t){this.appearText=new c.AppearingText(this.world.scene,t),this.brakeCoef=a.GameData.getConfigParam(a.GameConfig.playerBrakeCoef),r.prototype.initView.call(this,t)},y.prototype.spawn=function(t){this.checkpoint=null,r.prototype.spawn.call(this,t),this.currSpeed=0},y.prototype.start=function(){this.checkpoint=null,r.prototype.start.call(this)},y.prototype.restartLevel=function(){this.checkpoint=null,r.prototype.restartLevel.call(this)},y.prototype.reset=function(){r.prototype.reset.call(this),this.checkpoint?this.spawnOn(this.checkpoint.spawnData.x,this.checkpoint.spawnData.y-52):this.spawnOn(this.spawnData.x,this.spawnData.y),this.wheelBack.body.angularDamping=0,this.wheelFront.body.angularDamping=0,this.chassis.linearDamping=0,this.appearText.hide(),this.active=!0,this.countDefeat=-10,this.isFinished=!1,this.sndEngine?this.firstStart():this.sndEngine=d.SoundManager.getSfxLoop("bike_engine_loop"),this.maxFlyAngle=this.minFlyAngle=this.startFlyAngle=this.chassis.rotation,this.flyTime=0},y.prototype.firstStart=function(){this.sndEngine.play("bike_engine_loop",{volume:0,loop:!0})},y.prototype.finish=function(){var t=this;!0!==this.isFinished&&(this.isFinished=!0,d.SoundManager.playSFX("Finish"),this.world.levelEnd(!1),this.appearText.show(this.getX(),this.getY()-20,"finish"),this.disable(),this.jointWheelBack)&&setTimeout(function(){t.countDefeat=1},300)},y.prototype.defeat=function(t,e){void 0===e&&(e=!0),!1!==this.active&&0===this.countDefeat&&!0!==this.isFinished&&(t===n.head&&(d.AchievementManager.saveAchive(b.AchievesType.landOnHead),d.SoundManager.playSFX("death"+f.Tools.random(1,2))),this.countDefeat=1,this.appearText.show(this.chassis.img.x,this.chassis.img.y-30,u.Helpers.getDeathText(t)),!0===e)&&(this.world.levelEnd(!0),this.disable())},y.prototype.applyDefeat=function(){d.SoundManager.playSFX("explosion"),this.driver.defeat(),this.world.particleManager.showExplosion(this.chassis.img.x,this.chassis.img.y,2),r.prototype.applyDefeat.call(this)},y.prototype.disable=function(){this.sndEngine.stop(),this.active=!1,this.inputManager.resetKeys(!0),this.wheelBack.body.angularDamping=5,this.wheelFront.body.angularDamping=5,this.chassis.linearDamping=1,this.driver.tilt(1)},y.prototype.updateEngineSound=function(){var t;!1===this.world.scene.paused&&!0===d.SoundManager.getEnabled(p.SoundType.SFX)?(t=.3*this.currSpeedY,t=Math.sqrt(this.currSpeedX*this.currSpeedX+t*t)/this.maxSpeed,this.sndEngine.volume=.5+.6*t,this.sndEngine.setRate(.2+t)):this.sndEngine.volume=0},y.prototype.update=function(){var t,e;!0===this.active&&(this.currSpeedX=this.chassis.velocity.x,this.currSpeedY=this.chassis.velocity.y,this.currSpeed=this.getSpeedlength(),this.updateEngineSound(),this.hasGround=0<this.wheelBack.onGround||0<this.wheelFront.onGround,!(t=0)===this.inputManager.isDown(h.KeyPressed.up)?t=1:!0===this.inputManager.isDown(h.KeyPressed.down)&&(t=-1),this.smoke.update(this.chassis.img.x,this.chassis.img.y,this.chassis.img.rotation,t),this.applyDrive(t),!0===this.hasGround?(1<this.flyTime&&(this.processLand(),this.driver.tilt(0)),this.countFalling=0,this.flyTime=0):(0===this.flyTime&&(this.maxFlyAngle=this.minFlyAngle=this.startFlyAngle=this.chassis.rotation),this.chassis.rotation>this.maxFlyAngle?this.maxFlyAngle=this.chassis.rotation:this.chassis.rotation<this.minFlyAngle&&(this.minFlyAngle=this.chassis.rotation),this.flyTime+=1,(1100<this.currSpeedY||this.getY()>d.LevelManager.minLevelY)&&(this.countFalling+=1,50===this.countFalling?d.SoundManager.playSFX("fall"):80<=this.countFalling&&(this.world.reset(),this.defeat(n.fall,!1)))),!(e=0)===this.inputManager.isDown(h.KeyPressed.left)?e=-1:!0===this.inputManager.isDown(h.KeyPressed.right)&&(e=1),this.applyTilt(e,t),this.applyTilt(e,t)),this.countDefeat<0?(this.countDefeat+=1,0===this.countDefeat&&(this.active=!0)):1===this.countDefeat&&(this.countDefeat=2,this.applyDefeat()),r.prototype.update.call(this),this.appearText.update()},y.prototype.calcFlip=function(t,e){return t-e>=Math.PI},y.prototype.processLand=function(){!0===this.calcFlip(this.startFlyAngle,this.minFlyAngle)?this.world.scene.showFlip(!0):!0===this.calcFlip(this.maxFlyAngle,this.startFlyAngle)&&this.world.scene.showFlip(!1),d.SoundManager.playSFX("bike_land"),this.startFlyAngle=this.maxFlyAngle=this.minFlyAngle=this.chassis.rotation},y.prototype.applyTilt=function(t,e){var i=t*this.speedTilt,o=(0!==i&&(o=i-i*this.getSpeedPercent()*.3,this.chassis.angularVelocity+=o/15),(o=this.chassis.angularVelocity)<0&&o<-this.speedTilt?(i=0,this.chassis.angularVelocity=-this.speedTilt,this.driver.setAngularVelocity(-this.speedTilt)):0<o&&o>this.speedTilt&&(i=0,this.chassis.angularVelocity=this.speedTilt,this.driver.setAngularVelocity(this.speedTilt)),t);0===o&&(i=this.currSpeedY,!0===this.hasGround?0<e?o=-1:e<0&&(o=1):i<-20?o=1:20<i&&(o=-1)),this.driver.tilt(o)},y.prototype.applyDrive=function(t){var e,i=1,o=(t<0&&(this.currSpeedX<0?i=.5:!0===this.hasGround&&(this.chassis.velocity.x*=this.brakeCoef)),this.wheelAccelTorque),i=this.wheelMaxAngularVel*i;0<this.wheelDeltaTorque&&(e=this.currSpeed/this.wheelBack.radius)<i&&(o+=(1/((e=.5+2.5*e/i)*e)-1/9)/(4-1/9)*this.wheelDeltaTorque),this.wheelBack.drive(t,o,i),this.wheelFront.drive(t,o,i)},y.prototype.onContact=function(t,e,i,o,s,n){!1!==s&&this.checkOnBodyContact(e,i.GetUserData())},y.prototype.checkOnBodyContact=function(t,e){void 0===e&&(e=null);var i,t=t.data.GetUserData();t&&(i=t.id,this.checkContactIdWithHead(i,e),i===a.ITEM_ID.itemFinish?this.finish():i===a.ITEM_ID.itemCheckPoint&&!0===this.active&&(this.checkpoint&&this.checkpoint.deactivate(),this.checkpoint=t.link,this.checkpoint.activate(),this.appearText.show(this.checkpoint.spawnData.x,this.checkpoint.spawnData.y-200,"checkpoint")))},y.prototype.checkContactIdWithHead=function(t,e){void 0===e&&(e=null),t===a.ITEM_ID.obstacleBuzzsaw?this.defeat(n.buzzsaw):t===a.ITEM_ID.obstacleReaper?this.defeat(n.reaper):t===a.ITEM_ID.obstacleQuadrant?this.defeat(n.quadrant):!(t!==a.ITEM_ID.obstacleLaserPoint||e&&"playerBody"!==e)||"bullet"===t?this.defeat(n.laser):t!==a.ITEM_ID.obstacleSpikes&&t!==a.ITEM_ID.obstacleFallingSpike&&t!==a.ITEM_ID.obstacleSwingingSpikes||this.defeat(n.spike)},y.prototype.destroy=function(){r.prototype.destroy.call(this),this.appearText=null,this.checkpoint=null,this.sndEngine.destroy(),this.sndEngine=null},y);function y(){var t=null!==r&&r.apply(this,arguments)||this;return t.maxFlyAngle=0,t.minFlyAngle=0,t.startFlyAngle=0,t.flyTime=0,t}e.Player=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ScrollDots=void 0,i(0)),a=i(11),h=i(9),i=(s=Phaser.GameObjects.Container,n(l,s),l.prototype.moveWorld=function(t){this.currentWorld+=t,this.currentWorld<0?this.currentWorld=0:this.currentWorld===this.maxWorld&&(this.currentWorld=this.maxWorld-1),this.updatable=a.Bool3.true,this.newX=-this.currentWorld*this.offsetWorldX,this.isWorldMoved=!0,this.checkWorldBorders()},l.prototype.checkWorldBorders=function(){0===this.currentWorld?this.onCheckWorldBorders(-1):this.currentWorld===this.maxWorld-1?this.onCheckWorldBorders(1):this.onCheckWorldBorders(0)},l.prototype.update=function(){var t,e;this.updatable===a.Bool3.true?(t=(this.newX-this.x)*this.DUMPING_SPEED,(e=Math.abs(t))<.5&&(e<.1&&(this.x=this.newX,this.updatable=a.Bool3.none),this.isWorldMoved=!1),this.x+=t):this.updatable===a.Bool3.false&&(e=this.scene.input.activePointer.x,this.mouseOffset=(this.startPressedX-e)*this.DUMPING_DRAG,(0<this.mouseOffset&&this.currentWorld===this.maxWorld-1||this.mouseOffset<0&&0===this.currentWorld)&&(this.mouseOffset*=this.DUMPING_BORDER),this.x=this.lastWorldX-this.mouseOffset,this.mouseOffsetSwipe=this.currentPressedX-e,this.currentPressedX=e);for(var i=0;i<this.length;i++)this.getAt(i).update()},l.prototype.canPressDown=function(t){return!(!t[0]||!0===this.isWorldMoved)},l.prototype.pressDown=function(t,e){this.updatable=a.Bool3.false,this.startPressedX=this.scene.input.activePointer.x,this.currentPressedX=this.startPressedX,this.lastWorldX=this.x,this.mouseOffset=0},l.prototype.canPressUp=function(){return this.updatable===a.Bool3.false},l.prototype.isWordNotChanged=function(){return Math.abs(this.mouseOffset)<=this.notChangeWorld},l.prototype.pressUp=function(t,e){0<this.currentWorld&&this.mouseOffsetSwipe<-this.notChangeWorld?--this.currentWorld:this.currentWorld<this.maxWorld-1&&this.mouseOffsetSwipe>this.notChangeWorld?this.currentWorld+=1:this.currentWorld=Math.abs(Math.round(this.x/this.offsetWorldX)),this.updatable=a.Bool3.true,this.newX=-this.currentWorld*this.offsetWorldX,this.checkWorldBorders()},Object.defineProperty(l.prototype,"currentWorld",{get:function(){return this._currentWorld},set:function(t){this._currentWorld!==t&&(this._currentWorld=t,this.setWorldDots())},enumerable:!1,configurable:!0}),l.prototype.setCurrentWorld=function(t,e){this.currentWorld=Math.floor(t/e),this.x=this.startWorldX-this.offsetWorldX*this.currentWorld},l.prototype.createDots=function(){var t,e=h.CustomResize.GH-250;this.dots=new Array(this.maxWorld);for(var i=0;i<this.maxWorld;i++)t=new Phaser.GameObjects.Image(this.scene,0,e,r.Atlases.ui,"pagination-icon-passive"),this.scene.add.existing(t),this.dots[i]=t;t=null,this.currentDot=new Phaser.GameObjects.Image(this.scene,0,e,r.Atlases.ui,"pagination-icon-active"),this.currentDot.visible=!1,this.scene.add.existing(this.currentDot)},l.prototype.setWorldDots=function(){this.currentDot.x=this.startDotX+this.stepDotX*this.currentWorld},l.prototype.resize=function(t,e){this.currentDot.y=e;var i=Math.floor(this.maxWorld/2),o=0;this.maxWorld%2==0&&(o=this.stepDotX/2),this.startDotX=t+(o-this.stepDotX*i);for(var s=0;s<this.dots.length;s++)this.dots[s].x=this.startDotX+this.stepDotX*s,this.dots[s].y=e;!1===this.currentDot.visible&&(this.currentDot.visible=!0,this.setWorldDots())},l.prototype.destroy=function(){s.prototype.destroy.call(this),this.currentDot=null,this.dots=null,this.scene=null},l);function l(t,e,i){t=s.call(this,t)||this;return t.DUMPING_BORDER=.25,t.DUMPING_DRAG=.65,t.DUMPING_SPEED=.15,t._currentWorld=-1,t.notChangeWorld=14,t.startWorldX=0,t.updatable=a.Bool3.none,t.newX=0,t.isWorldMoved=!1,t.stepDotX=60,t.offsetWorldX=i,t.maxWorld=e,t.createDots(),t}e.ScrollDots=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.SlotBase=void 0,i(0)),a=i(1),h=i(2),i=(s=a.JDContainer,n(l,s),l.prototype.initBg=function(t,e){void 0===e&&(e=!0),this.bg=new Phaser.GameObjects.Image(this.scene,0,0,r.Atlases.ui,t),this.bg.name="slotBase",!0===e&&(this.bg.setInteractive(),this.bg.input.cursor="pointer",this.bg.on(Phaser.Input.Events.POINTER_OVER,this.over,this),this.bg.on(Phaser.Input.Events.POINTER_OUT,this.out,this)),this.add(this.bg)},l.prototype.over=function(){this.sizeDir=1,r.Constants.SFX_SLOT_OVER&&h.SoundManager.playSFX(r.Constants.SFX_SLOT_OVER)},l.prototype.out=function(){this.sizeDir=-1},l.prototype.setTargetSize=function(t){this.scale=.9+.2*t},l.prototype.update=function(){0!==this.sizeDir&&(this.sizeCounter+=this.sizeDir,this.sizeCounter<=0?(this.sizeCounter=0,this.sizeDir=0):this.sizeCounter>=this.sizeDuration&&(this.sizeCounter=this.sizeDuration,this.sizeDir=0),this.setTargetSize(this.sizeCounter/this.sizeDuration))},l.prototype.destroy=function(){s.prototype.destroy.call(this),this.bg=null},l);function l(t,e,i,o){t=s.call(this,t,e,i)||this;return t.sizeDir=0,t.sizeCounter=0,t.sizeDuration=6,t.id=o,t.setTargetSize(0),t}e.SlotBase=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObstacleFallingSpike=void 0;var o=i(0),s=i(1),n=i(5),r=i(6),a=i(3),h=i(8);function l(t,e,i){void 0===i&&(i=!1),this.height=18,this.cos=Math.cos(e),this.sin=Math.sin(e),this.isDispencer=i,this.velocity=a.GameData.getConfigParam(a.GameConfig.fallingSpikeSpeed),this.fallMaxDis=a.GameData.getConfigParam(a.GameConfig.fallingSpikeMaxDis),this.view=new s.JDImage(t.scene,0,0,o.Atlases.gameplay,"obstacleFallingSpike"),this.view.setOrigin(0,.5),t.add(this.view),this.view.rotation=e,this.body=n.Box2DWorld.getBody(0,0,r.Box2DBodyType.dynamic),this.body.setRectangle(14,8,10).SetSensor(!0),this.body.rotation=e,this.body.gravityScale=0,this.body.data.SetUserData({id:a.ITEM_ID.obstacleFallingSpike}),this.body.setCollisionCategory(h.BodyCollisionFilter.DEFAULT),this.body.data.SetActive(!1),this.body.setContactCallback(null,this.onContact,this),this.body.data.SetSleepingAllowed(!1)}l.prototype.onContact=function(t,e,i,o,s,n){!1!==s&&(s=e.data.GetUserData())&&"block"===s.id&&(this.state=2)},l.prototype.spawn=function(t,e){this.startX=t,this.startY=e},l.prototype.defState=function(){this.currDis=0,this.body.x=this.startX,this.body.y=this.startY,this.body.active=!1,this.velX=this.velY=0,this.speed=0},l.prototype.reset=function(){!0===this.isDispencer&&(this.view.visible=!1),this.state=0,this.view.x=this.startX,this.view.y=this.startY,this.defState()},l.prototype.shoot=function(){this.state=1,this.body.setZeroVelocity(),this.body.active=!0,this.view.visible=!0},l.prototype.reSpawn=function(){!0===this.isDispencer?(this.state=0,this.view.visible=!1):(this.state=3,this.view.x=this.startX-this.cos*this.height,this.view.y=this.startY-this.sin*this.height),this.defState()},l.prototype.update=function(){1===this.state?(this.velX+=this.cos*this.velocity,this.velY+=this.sin*this.velocity,this.body.x+=this.velX,this.body.y+=this.velY,this.view.x=this.body.x,this.view.y=this.body.y,this.speed+=this.velocity,this.currDis+=this.speed,this.currDis>this.fallMaxDis&&this.reSpawn()):2===this.state?this.reSpawn():3===this.state&&(this.view.y+=(this.startY-this.view.y)/10,this.view.y>=this.startY)&&(this.view.y=this.startY,this.state=0)},l.prototype.remove=function(){n.Box2DWorld.destroyBody(this.body),this.view.destroy()},l.prototype.destroy=function(){this.body=null,this.view=null},e.ObstacleFallingSpike=l},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.MiscBase=void 0,s=i(25).Entity,n(r,s),r);function r(){return null!==s&&s.apply(this,arguments)||this}e.MiscBase=i},function(t,e,i){"use strict";function o(){}Object.defineProperty(e,"__esModule",{value:!0}),e.Atlases=void 0,o.ui="ui",o.bike="bike",o.gameplay="gameplay",o.gameplayAnims="gameplayAnims",o.editor="editor",o.preloadList=[],o.list=[o.ui,o.bike,o.gameplay,o.gameplayAnims],e.Atlases=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LevelManager=void 0;var o=i(0),r=i(16),a=i(15),h=i(19);function s(){}s.getEmptyLevelSaveData=function(){return{time:0,stars:0,death:1e8}},s.init=function(t){this.levelsData=t,this.saveData=h.SaveData.getItem(r.SaveTypes.levels),this.saveData||(this.saveData={strue:[this.getEmptyLevelSaveData()],sfalse:[this.getEmptyLevelSaveData()]},h.SaveData.setItem(r.SaveTypes.levels,this.saveData)),!1===o.Constants.IS_EDITOR&&(this.currLevelID=this.getOpenLevels())},s.switchMode=function(){this.currModeHard=!this.currModeHard},s.getOpenLevels=function(){return this.saveData["s"+this.currModeHard].length},s.getLevel=function(t){t=this.levelsData["l"+this.currModeHard][this.levelsData.order[t]];return!t||t.times&&0!==t.times[0]||(t.times=[50,30,15]),t},s.getLevels=function(){return this.levelsData},s.getLevelsLength=function(){return this.levelsData.lfalse.length},s.getLevelSaveData=function(t){return this.getLevelsData()[t]||this.getEmptyLevelSaveData()},s.getLevelsData=function(){return this.saveData["s"+this.currModeHard]},s.levelComplete=function(t,e,i,o){var s=this.getLevelsData(),s=(this.currLevelID+1===s.length&&(this.saveData.sfalse.push(this.getEmptyLevelSaveData()),this.saveData.strue.push(this.getEmptyLevelSaveData()),a.AchievementManager.saveAchive("level"+this.currModeHard)),s[this.currLevelID]),n=e-s.stars;0<n&&a.AchievementManager.saveAchive(a.AchievesType.starsfalse,n),(0===s.time||t<s.time)&&(0!==s.time&&a.AchievementManager.saveAchive(a.AchievesType.beatRecord),s.time=t,s.stars=e),s.death>o&&0===(s.death=o)&&a.AchievementManager.saveAchive(a.AchievesType.finishLevelsWithoutDying),h.SaveData.setItemNoSave(r.SaveTypes.levels,this.saveData),h.SaveData.setItemAddToNumber(r.SaveTypes.coins,i)},s.pressNextLevel=function(){this.currLevelID+2===this.getOpenLevels()&&(this.currLevelID+=1)},s.currLevelID=0,s.currModeHard=!1,e.LevelManager=s},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.Preloader=void 0,i(26)),a=i(12),h=i(0),l=i(2),i=(s=i(27).BasicScene,n(c,s),c.prototype.preload=function(){var e=this;this.load.on(Phaser.Loader.Events.PROGRESS,this.onLoadProgress,this),h.Constants.AVAILABLE_LANGUAGES.forEach(function(t){h.Jsons.list.push("locale_"+t)}),h.Jsons.list.forEach(function(t){e.load.json(t,"assets/jsons/"+t+".json")}),h.Fonts.list.forEach(function(t){e.load.bitmapFont(t,"assets/fonts/"+t+".png","assets/fonts/"+t+".fnt")}),h.Images.list.forEach(function(t){e.load.image(t,"assets/images/"+t+".png")}),h.Images.listJpg.forEach(function(t){e.load.image(t,"assets/images/jpg/"+t+".jpg")}),h.Atlases.list.forEach(function(t){e.load.atlas(t,"assets/atlases/"+t+".png","assets/atlases/"+t+".json")}),this.game.device.os.iOS?this.load.audioSprite(h.Sounds.SFX,"assets/sounds/"+h.Sounds.SFX+".json",["assets/sounds/"+h.Sounds.SFX+".m4a"]):this.load.audioSprite(h.Sounds.SFX,"assets/sounds/"+h.Sounds.SFX+".json",["assets/sounds/"+h.Sounds.SFX+".ogg","assets/sounds/"+h.Sounds.SFX+".mp3"]),h.Sounds.list.forEach(function(t){e.game.device.os.iOS?e.load.audio(t,["assets/sounds/"+t+".m4a"]):e.load.audio(t,["assets/sounds/"+t+".ogg","assets/sounds/"+t+".mp3"])})},c.prototype.create=function(){var t=this;l.SaveData.init(function(){l.Localization.init(t),l.SoundManager.init(t.game),l.TexturesEdit.init(t),l.AchievementManager.init(t.game),l.GameData.initData(h.Jsons.getJson(t,l.GameData.GAME_DATA_NAME)),l.GameData.initBalance(h.Jsons.getJson(t,"balance")),a.AzerionSDK.onLoadComplete(function(){return t.loadComplete()})})},c.prototype.onLoadProgress=function(t){a.AzerionSDK.onLoadProgress(t)},c.prototype.loadComplete=function(){this.scene.start(r.Menu.Name)},c.prototype.destroy=function(){s.prototype.destroy.call(this)},c.Name="preloader",c);function c(){return null!==s&&s.apply(this,arguments)||this}e.Preloader=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=(Object.defineProperty(e,"__esModule",{value:!0}),e.JDGraphics=void 0,s=Phaser.GameObjects.Graphics,n(r,s),r);function r(){return null!==s&&s.apply(this,arguments)||this}e.JDGraphics=n},function(t,e,i){"use strict";var o,h,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=(Object.defineProperty(e,"__esModule",{value:!0}),e.JDBmpdTextFit=void 0,i(11)),i=(h=i(37).JDBmpdText,s(r,h),r.prototype.setFitSize=function(t,e,i){void 0===e&&(e=n.JDTextFitParam.size),void 0===i&&(i=0),this.maxSWidth=t,this.maxSHeight=i,this.fitParam=e,this.maxSWidth<=0?(this.setMaxWidth(this.maxSWidth),this.fontSize!==this.createFontSize&&(this.fontSize=this.createFontSize)):this.calcFitSize()},r.prototype.setText=function(t,e){return void 0===e&&(e=!0),h.prototype.setText.call(this,t),!0===e&&(this.maxSWidth||this.maxSHeight)&&this.calcFitSize(),this},r.prototype.calcFitSize=function(){if(this.fontSize!==this.createFontSize&&(this.fontSize=this.createFontSize),this.fitParam!==n.JDTextFitParam.wordWrap){this.fitParam===n.JDTextFitParam.both&&this.setMaxWidth(this.maxSWidth);var t=this.scaleX,e=this.scaleY;for(this.setScale(1,1);this.width>this.maxSWidth||0<this.maxSHeight&&this.height>this.maxSHeight;)--this.fontSize;this.setScale(t,e)}else this.setMaxWidth(this.maxSWidth)},r);function r(t,e,i,o,s,n,r,a){t=h.call(this,t,e,i,o,s,n,r=void 0===r?16777215:r,a=void 0===a?1:a)||this;return t.createFontSize=n,t}e.JDBmpdTextFit=i},function(t,e,i){"use strict";var o,n,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.JDImagePivot=void 0,i(52)),i=(n=i(35).JDImage,s(a,n),a.prototype.setPivot=function(t,e){this.pivotX=t,this.pivotY=e},a);function a(t,e,i,o,s){t=n.call(this,t,e,i,o,s)||this;return t.pivotX=0,t.pivotY=0,t.setPipeline(r.PipelineManager.getPipeline(r.PipelineList.PivotSkew)),t}e.JDImagePivot=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PipelineManager=e.PostFXPipelineList=e.PipelineList=void 0;var o,s,n=i(53),i=((i=o=e.PipelineList||(e.PipelineList={})).PivotSkew="PivotSkew",i.Blur="Blur",i.ColorMatrix="ColorMatrix",(s=e.PostFXPipelineList||(e.PostFXPipelineList={})).Outline="Outline",r.init=function(t){this.game=t},r.getPipeline=function(t){var e;if(this.game)return!1===(e=this.game.renderer.pipelines).has(t)&&(t===o.PivotSkew?e.add(t,new n.PLPivotSkew(this.game)):t===o.Blur?e.add(t,new n.PLBlur(this.game)):t===o.ColorMatrix&&e.add(t,new n.PLColorMatrix(this.game))),t},r.startPostFXPipeline=function(t){t===s.Outline&&this.game.renderer.pipelines.addPostPipeline(t,n.PLOutline)},r.addPostFX=function(t,e,i,o){void 0===o&&(o=""),e===s.Outline&&t.setPostPipeline(n.PLOutline);t=t.postPipelines[t.postPipelines.length-1];t.name=e+o,t.setData(i)},r.removePostFX=function(t,e,i){void 0===i&&(i="");for(var o=t.postPipelines,s=o.length-1;0<=s;s--){var n=o[s];n.name===e+i&&(n.destroy(),Phaser.Utils.Array.SpliceOne(o,s))}},r);function r(){}e.PipelineManager=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PLOutline=e.PLColorMatrix=e.PLPivotSkew=e.PLBlur=e.PipelineManager=e.JDRender=void 0;var o=i(98),s=(Object.defineProperty(e,"JDRender",{enumerable:!0,get:function(){return o.JDRender}}),i(52)),n=(Object.defineProperty(e,"PipelineManager",{enumerable:!0,get:function(){return s.PipelineManager}}),i(99)),r=(Object.defineProperty(e,"PLBlur",{enumerable:!0,get:function(){return n.PLBlur}}),i(100)),a=(Object.defineProperty(e,"PLPivotSkew",{enumerable:!0,get:function(){return r.PLPivotSkew}}),i(101)),h=(Object.defineProperty(e,"PLColorMatrix",{enumerable:!0,get:function(){return a.PLColorMatrix}}),i(102));Object.defineProperty(e,"PLOutline",{enumerable:!0,get:function(){return h.PLOutline}})},function(t,e,i){"use strict";var o,h,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=(Object.defineProperty(e,"__esModule",{value:!0}),e.JDTextFit=void 0,i(11)),c=i(38),i=(h=c.JDText,s(n,h),n.prototype.setText=function(t){return h.prototype.setText.call(this,t),(this.maxWidth||this.maxHeight)&&this.calcFitSize(),this},n.prototype.setFitSize=function(t,e,i){void 0===e&&(e=l.JDTextFitParam.size),void 0===i&&(i=0),this.maxWidth=t,this.maxHeight=i,this.fitParam=e,this.maxWidth<=0?this.style.setFontSize(this.fontSize):this.calcFitSize()},n.prototype.calcFitSize=function(){var t=this.fontSize,e=(this.style.setFontSize(t),this.text);if(this.fitParam!==l.JDTextFitParam.wordWrap)for(;this.width>this.maxWidth||0<this.maxHeight&&this.height>this.maxHeight;)this.style.setFontSize(--t),this.fitParam===l.JDTextFitParam.both&&h.prototype.setText.call(this,this.customBasicWordWrap(e,this.context,this.maxWidth));else h.prototype.setText.call(this,this.customBasicWordWrap(e,this.context,this.maxWidth))},n.prototype.customBasicWordWrap=function(t,e,i){for(var o="",s=t.split(this.splitRegExp),n=s.length-1,r=e.measureText(" ").width,a=0;a<=n;a++){for(var h=i,l=s[a].split(" "),c=l.length-1,u=0;u<=c;u++){var d=l[u],p=e.measureText(d).width,f=p;u<c&&(f+=r),h<f&&0<u&&(o=o.slice(0,-1),o+="\n",h=i),o+=d,u<c?(o+=" ",h-=f):h-=p}a<n&&(o+="\n")}return o},n);function n(t,e,i,o,s,n,r,a){void 0===a&&(a=c.JDTextAlign.center);t=h.call(this,t,e,i,o,s,n,r=void 0===r?"#ffffff":r,a)||this;return t.fontSize=n,t.fitParam=l.JDTextFitParam.size,t}e.JDTextFit=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InputField=void 0;var o=i(105);function s(){}s.init=function(t){var e=this;this.game=t,this.dom=new o.InputDom(t),this.dom.domInput.addEventListener("blur",function(){e.onFocusOut()})},s.onFocusOut=function(){this.txt&&this.endFocus()},s.onTxtIn=function(t){this.txt!==t&&(this.onTxtOut(),this.txt=t,this.dom.focus(this.txt.options,this.txt.text),!1===this.game.device.os.desktop)&&(s.KeyboardOpen=!0,this.game.events.emit(s.EVENT_KEYBOARD_OPEN))},s.onTxtOut=function(){this.txt&&this.txt.onFocusOut(this.dom.getValue()),this.txt=null},s.endFocus=function(){!1===this.game.device.os.desktop&&(s.KeyboardOpen=!1,this.game.events.emit(s.EVENT_KEYBOARD_CLOSED)),this.onTxtOut(),this.dom.blur()},s.render=function(t,e){this.dom.render(this.txt,t,e)},s.EVENT_KEYBOARD_OPEN="EVENT_KEYBOARD_OPEN",s.EVENT_KEYBOARD_CLOSED="EVENT_KEYBOARD_CLOSED",s.KeyboardOpen=!1,s.blockInput=!0,e.InputField=s},function(t,e,i){"use strict";var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.JDTextInputGraphics=e.JDTextInputBg=void 0;var n,r,a=i(106),i=i(39),h=((h=n=e.JDTextInputBg||(e.JDTextInputBg={}))[h.none=0]="none",h[h.both=1]="both",h[h.bg=2]="bg",h[h.border=3]="border",r=i.JDTextInput,s(l,r),l);function l(t,e,i,o){e=r.call(this,t,e,i,o=void 0===o?{}:o)||this;return e.options.bgShow=void 0===o.bgShow?n.both:o.bgShow,e.options.bgWidth=void 0===o.bgWidth?e.inputText.width:o.bgWidth,e.options.bgHeight=void 0===o.bgHeight?e.inputText.height:o.bgHeight,e.options.bgRadius=void 0===o.bgRadius?0:o.bgRadius,e.options.bgColor=void 0===o.bgColor?16777215:o.bgColor,e.options.bgBorderThickness=void 0===o.bgBorderThickness?2:o.bgBorderThickness,e.options.bgBorderColor=void 0===o.bgBorderColor?0:o.bgBorderColor,e.inputBox=new a.InputBox(t,e.options,e.inputText.originX,e.inputText.originY),e.add(e.inputBox),e.inputBox.on(Phaser.Input.Events.POINTER_DOWN,e.inputDown,e),e.createInput(),e}e.JDTextInputGraphics=h},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.ButtonScaleImage=void 0,s=i(40).ButtonImage,n(r,s),r.prototype.setScalePressState=function(t,e){this.scaleDown=t,this.scaleUp=e,this.upState()},r.prototype.downState=function(){this.view.scale=this.scaleDown},r.prototype.upState=function(){!0!==this.isOver?this.view.scale=this.scaleUp:this.view.scale=this.scaleOver},r);function r(){var t=null!==s&&s.apply(this,arguments)||this;return t.scaleDown=.9,t.scaleUp=1,t}e.ButtonScaleImage=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InputManager=e.KeyPressed=void 0;var o,s=i(0),n=i(4),r=i(59),i=((i=o=e.KeyPressed||(e.KeyPressed={})).left="l",i.right="r",i.up="u",i.down="d",a.prototype.onKeyDown=function(t){!0!==this.disable&&((t=t.keyCode)===Phaser.Input.Keyboard.KeyCodes.A||t===Phaser.Input.Keyboard.KeyCodes.LEFT?this.setPressed(o.left,!0):t===Phaser.Input.Keyboard.KeyCodes.D||t===Phaser.Input.Keyboard.KeyCodes.RIGHT?this.setPressed(o.right,!0):t===Phaser.Input.Keyboard.KeyCodes.W||t===Phaser.Input.Keyboard.KeyCodes.UP?this.setPressed(o.up,!0):t!==Phaser.Input.Keyboard.KeyCodes.S&&t!==Phaser.Input.Keyboard.KeyCodes.DOWN||this.setPressed(o.down,!0))},a.prototype.onKeyUp=function(t){!0!==this.disable&&((t=t.keyCode)===Phaser.Input.Keyboard.KeyCodes.A||t===Phaser.Input.Keyboard.KeyCodes.LEFT?this.setPressed(o.left,!1):t===Phaser.Input.Keyboard.KeyCodes.D||t===Phaser.Input.Keyboard.KeyCodes.RIGHT?this.setPressed(o.right,!1):t===Phaser.Input.Keyboard.KeyCodes.W||t===Phaser.Input.Keyboard.KeyCodes.UP?this.setPressed(o.up,!1):t!==Phaser.Input.Keyboard.KeyCodes.S&&t!==Phaser.Input.Keyboard.KeyCodes.DOWN||this.setPressed(o.down,!1))},a.prototype.setPressed=function(t,e){this.isPressed[t]=e},a.prototype.isDown=function(t){return this.isPressed[t]},a.prototype.resetKeys=function(t){this.disable=t=void 0===t?!1:t,this.setPressed(o.left,!1),this.setPressed(o.right,!1),this.setPressed(o.up,!1),this.setPressed(o.down,!1)},a.prototype.resize=function(){this.btnTiltLeft&&(n.AlignTo.leftBot(this.btnTiltRight,610,200),this.btnTiltLeft.x=this.btnTiltRight.x-400,this.btnTiltLeft.y=+this.btnTiltRight.y,this.btnBrake.x=n.AlignTo.getRight(610),this.btnBrake.y=this.btnTiltRight.y,this.btnAcceleration.x=this.btnBrake.x+400,this.btnAcceleration.y=this.btnTiltLeft.y)},a.prototype.destroy=function(){this.scene.input.keyboard.off("keydown",this.onKeyDown,this),this.scene.input.keyboard.off("keyup",this.onKeyUp,this),this.isPressed=null,this.scene=null,this.btnAcceleration=null,this.btnBrake=null,this.btnTiltLeft=null,this.btnTiltRight=null},a);function a(t){var e=this;this.scene=t,this.isPressed={},this.disable=!1,this.scene.input.keyboard.on("keydown",this.onKeyDown,this),this.scene.input.keyboard.on("keyup",this.onKeyUp,this),!1===this.scene.game.device.os.desktop&&(this.scene.input.addPointer(2),this.btnTiltLeft=new r.ButtonControl(t,0,0),this.btnTiltLeft.addImageEvents(s.Atlases.ui,"action-button",0,0,1.5,1.5),this.btnTiltLeft.addIcon(s.Atlases.ui,"tilt-icon",0,0,-1.5,1.5),this.btnTiltLeft.onDown=function(){return e.setPressed(o.left,!0)},this.btnTiltLeft.onUp=function(){return e.setPressed(o.left,!1)},this.scene.add.existing(this.btnTiltLeft.getView()),this.btnTiltLeft.soundOver=null,this.btnTiltRight=new r.ButtonControl(t,0,0),this.btnTiltRight.addImageEvents(s.Atlases.ui,"action-button",0,0,1.5,1.5),this.btnTiltRight.addIcon(s.Atlases.ui,"tilt-icon",0,0,1.5,1.5),this.btnTiltRight.onDown=function(){return e.setPressed(o.right,!0)},this.btnTiltRight.onUp=function(){return e.setPressed(o.right,!1)},this.scene.add.existing(this.btnTiltRight.getView()),this.btnTiltRight.soundOver=null,this.btnAcceleration=new r.ButtonControl(t,0,0),this.btnAcceleration.addImageEvents(s.Atlases.ui,"action-button",0,0,1.5,1.5),this.btnAcceleration.addIcon(s.Atlases.ui,"move-icon",0,0,1.5,1.5),this.btnAcceleration.onDown=function(){return e.setPressed(o.up,!0)},this.btnAcceleration.onUp=function(){return e.setPressed(o.up,!1)},this.scene.add.existing(this.btnAcceleration.getView()),this.btnAcceleration.soundOver=null,this.btnBrake=new r.ButtonControl(t,0,0),this.btnBrake.addImageEvents(s.Atlases.ui,"action-button",0,0,1.5,1.5),this.btnBrake.addIcon(s.Atlases.ui,"move-icon",0,0,-1.5,1.5),this.btnBrake.onDown=function(){return e.setPressed(o.down,!0)},this.btnBrake.onUp=function(){return e.setPressed(o.down,!1)},this.scene.add.existing(this.btnBrake.getView()),this.btnBrake.soundOver=null)}e.InputManager=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ButtonControl=void 0,i(13)),a=i(2),i=(s=r.ButtonScale,n(h,s),h.prototype.inputUp=function(t){this.currPointerID<0||this.currPointerID!==t.id||(this.upState(),this.currPointerID=-1,this.upComplete(),this.soundUp&&a.SoundManager.playSFX(this.soundUp))},h);function h(){return null!==s&&s.apply(this,arguments)||this}e.ButtonControl=i},function(t,e,i){"use strict";var o,n,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=(Object.defineProperty(e,"__esModule",{value:!0}),e.BodyObj=void 0,n=Box2DPhysics.Body,s(r,n),r.prototype.update=function(){n.prototype.update.call(this),this.obj.x=this.x,this.obj.y=this.y,this.obj.rotation=this.rotation},r.prototype.destroy=function(){n.prototype.destroy.call(this),this.obj.destroy(),this.obj=null},r);function r(t,e,i,o,s){t=n.call(this,t,i,o,s)||this;return t.obj=e,t}e.BodyObj=s},function(t,e,i){"use strict";var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.BikeEffectPart=e.BikeEffectBase=void 0,i(1));function n(t,e,i){this.offX=e,this.offY=i,this.parts=new Array(this.amount)}n.prototype.reset=function(){for(var t=0;t<this.amount;t++)this.parts[t].visible=!1},n.prototype.update=function(t,e,i,o){for(var s=0;s<this.amount;s++)this.parts[s].update()},n.prototype.destroy=function(){this.parts=null},e.BikeEffectBase=n;r=i.JDImage,s(a,r),a.prototype.start=function(t,e,i){},a.prototype.update=function(){};var r,i=a;function a(){return null!==r&&r.apply(this,arguments)||this}e.BikeEffectPart=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__awaiter||function(t,r,a,h){return new(a=a||Promise)(function(i,e){function o(t){try{n(h.next(t))}catch(t){e(t)}}function s(t){try{n(h.throw(t))}catch(t){e(t)}}function n(t){var e;t.done?i(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(o,s)}n((h=h.apply(t,r||[])).next())})},a=this&&this.__generator||function(o,s){var n,r,a,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},l={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function t(i){return function(t){var e=[i,t];if(n)throw new TypeError("Generator is already executing.");for(;h=l&&e[l=0]?0:h;)try{if(n=1,r&&(a=2&e[0]?r.return:e[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,e[1])).done)return a;switch(r=0,(e=a?[2&e[0],a.value]:e)[0]){case 0:case 1:a=e;break;case 4:return h.label++,{value:e[1],done:!1};case 5:h.label++,r=e[1],e=[0];continue;case 7:e=h.ops.pop(),h.trys.pop();continue;default:if(!((a=0<(a=h.trys).length&&a[a.length-1])||6!==e[0]&&2!==e[0])){h=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3]))h.label=e[1];else if(6===e[0]&&h.label<a[1])h.label=a[1],a=e;else{if(!(a&&h.label<a[2])){a[2]&&h.ops.pop(),h.trys.pop();continue}h.label=a[2],h.ops.push(e)}}e=s.call(o,h)}catch(t){e=[6,t],r=0}finally{n=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},h=(Object.defineProperty(e,"__esModule",{value:!0}),e.Skins=void 0,i(24)),l=i(4),c=i(13),u=i(2),d=i(0),p=i(9),f=i(1),b=i(29),y=i(42),m=i(129),x=i(130),g=i(16),v=i(20),_=i(12),i=(s=h.BasicView,n(w,s),w.prototype.init=function(e){var i=this,t=(s.prototype.init.call(this),this.bg=new f.JDImage(this,p.CustomResize.GHW,p.CustomResize.GHH,"background-seperator-2"),this.bg.setInteractive(),this.bg.name="scrollBG",this.add.existing(this.bg),this.scroll=new y.ScrollDots(this,Math.ceil(u.SkinsManager.getTotalSkins()/this.skinsOnPage),this.offsetWorldX),this.scroll.onCheckWorldBorders=function(t){return i.checkWorldBorders(t)},this.add.existing(this.scroll),this.currSelected=u.SkinsManager.currSkinID,this.garage=new x.Garage(this,l.AlignTo.getCenterX(650),l.AlignTo.getCenterY()),this.garage.btn.onUp=function(){return i.garageOnPress()},this.createStots(),this.input.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.pressDown,this),this.input.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.pressUp,this),this.input.on(Phaser.Input.Events.POINTER_UP_OUTSIDE,this.pressUp,this),new Phaser.GameObjects.Graphics(this));t.fillStyle(16711680,.5),t.moveTo(-p.CustomResize.OW,200),t.lineTo(1420,200),t.lineTo(1300,900),t.lineTo(-p.CustomResize.OW,900),t.strokePath(),t.fillPath(),this.scroll.mask=t.createGeometryMask(),this.txtTitle=new f.JDBmpdTextTranslated(this,0,0,d.Fonts.Main,"skins",112,4013373),this.add.existing(this.txtTitle),this.btnExit=new c.ButtonScaleImage(this,0,0,d.Atlases.ui,"back-button"),this.btnExit.onUp=function(){return r(i,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,_.AzerionSDK.showInterstitialAd()];case 1:return t.sent(),this.scene.start(e.prev),[2]}})})},this.add.existing(this.btnExit.getView()),this.currency=new b.CurrencyPanel(this),this.add.existing(this.currency),this.btnLeft=new c.ButtonScaleImage(this,100,0,d.Atlases.ui,"pagination-left-button"),this.btnLeft.onUp=function(){return i.scroll.moveWorld(-1)},this.add.existing(this.btnLeft.getView()),this.btnRight=new c.ButtonScaleImage(this,1130,0,d.Atlases.ui,"pagination-right-button"),this.btnRight.onUp=function(){return i.scroll.moveWorld(1)},this.add.existing(this.btnRight.getView()),this.scroll.checkWorldBorders()},w.prototype.createStots=function(){for(var t,e=this.skinsOnPage/2,i=p.CustomResize.GHW-e/2*300+150-10-10-300,o=p.CustomResize.GHH+150-260-30,s=40+i,n=o,r=0,a=0,h=0;h<u.SkinsManager.getTotalSkins();h++)t=new m.SkinSlot(this,s+a,n,r),this.scroll.addAt(t,0),r===this.currSelected&&(this.garage.show(t),t.select(),this.lastPressedItem=t),r+=1,s+=310,(h+1)%e==0&&(s=i,n+=290,(h+1)%this.skinsOnPage==0)&&(s=40+i,a+=this.offsetWorldX,n=o);t=null,this.scroll.setCurrentWorld(this.currSelected,this.skinsOnPage)},w.prototype.pressDown=function(t,e){var i,o;!1!==this.scroll.canPressDown(e)&&(i=!1,(o=e[0].parentContainer)instanceof m.SkinSlot&&(this.currPressedItem=o,i=!0),"scrollBG"!==e[0].name&&!1===i&&o!==this||this.scroll.pressDown(t,e))},w.prototype.pressUp=function(t,e){!1!==this.scroll.canPressUp()&&(this.currPressedItem&&(e&&e[0]&&e[0].parentContainer===this.currPressedItem&&!0===this.scroll.isWordNotChanged()&&this.selectSlot(this.currPressedItem,!0),this.currPressedItem=null),this.scroll.pressUp(t,e))},w.prototype.selectSlot=function(t,e){void 0===e&&(e=!1),this.currSelected!==t.id&&(this.currSelected=t.id,this.garage.show(t))},w.prototype.garageOnPress=function(){var t=this;this.garage.onPressStatus===x.ShowStatus.select?this.lastPressedItem!==this.garage.skinSlot&&(this.select(),this.lastPressedItem.select(),this.garage.setButtonStatus()):this.garage.onPressStatus===x.ShowStatus.buy?(!0===this.currency.enouthMoney(this.garage.skinSlot.price)?(this.currency.addCurrency(-this.garage.skinSlot.price),this.select(),this.garage.skinSlot.open()):this.currency.getMoreCoins(),this.garage.setButtonStatus()):this.garage.onPressStatus===x.ShowStatus.watch&&this.popUpManager.open(v.PopUpList.RewardAD,{type:g.RewardType.ad,onComplete:function(){return t.rewardSkin()}})},w.prototype.rewardSkin=function(){this.garage.skinSlot.adWatched(),0<this.garage.skinSlot.status?(this.garage.onPressStatus=x.ShowStatus.select,this.garageOnPress()):this.garage.updateRewardAdStatus()},w.prototype.select=function(){this.lastPressedItem.unselect(),this.lastPressedItem=this.garage.skinSlot,u.SkinsManager.currSkinID=this.lastPressedItem.id,u.SaveData.setItem(g.SaveTypes.currSkin,u.SkinsManager.currSkinID)},w.prototype.checkWorldBorders=function(t){var e=this.btnLeft.getInteractiveElement(),i=this.btnRight.getInteractiveElement();t<0?(e.visible=!1,i.visible=!0):0<t?(e.visible=!0,i.visible=!1):(e.visible=!0,i.visible=!0)},w.prototype.update=function(){s.prototype.update.call(this),this.scroll.update()},w.prototype.resize=function(){s.prototype.resize.call(this),l.AlignTo.fitScreen(this.bg),l.AlignTo.leftTop(this.btnExit,100,100),this.currency.resize(),this.txtTitle.x=this.btnExit.x+(this.currency.getCoinIconX()-this.btnExit.x)/2,l.AlignTo.top(this.txtTitle,100),l.AlignTo.bot(this.btnLeft,100),this.btnRight.y=this.btnLeft.y,this.scroll.resize(this.btnLeft.x+(this.btnRight.x-this.btnLeft.x)/2,this.btnLeft.y)},w.prototype.destroy=function(){this.input.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.pressDown,this),this.input.off(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.pressUp,this),this.input.off(Phaser.Input.Events.POINTER_UP_OUTSIDE,this.pressUp,this),s.prototype.destroy.call(this),this.bg=null,this.btnExit=null,this.currency=null,this.txtTitle=null,this.scroll=null,this.btnLeft=null,this.btnRight=null,this.currPressedItem=null,this.lastPressedItem=null,this.garage.destroy(),this.garage=null},w.Name="skins",w);function w(){var t=null!==s&&s.apply(this,arguments)||this;return t.skinsOnPage=8,t.offsetWorldX=2650,t}e.Skins=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__awaiter||function(t,r,a,h){return new(a=a||Promise)(function(i,e){function o(t){try{n(h.next(t))}catch(t){e(t)}}function s(t){try{n(h.throw(t))}catch(t){e(t)}}function n(t){var e;t.done?i(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(o,s)}n((h=h.apply(t,r||[])).next())})},a=this&&this.__generator||function(o,s){var n,r,a,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},l={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function t(i){return function(t){var e=[i,t];if(n)throw new TypeError("Generator is already executing.");for(;h=l&&e[l=0]?0:h;)try{if(n=1,r&&(a=2&e[0]?r.return:e[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,e[1])).done)return a;switch(r=0,(e=a?[2&e[0],a.value]:e)[0]){case 0:case 1:a=e;break;case 4:return h.label++,{value:e[1],done:!1};case 5:h.label++,r=e[1],e=[0];continue;case 7:e=h.ops.pop(),h.trys.pop();continue;default:if(!((a=0<(a=h.trys).length&&a[a.length-1])||6!==e[0]&&2!==e[0])){h=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3]))h.label=e[1];else if(6===e[0]&&h.label<a[1])h.label=a[1],a=e;else{if(!(a&&h.label<a[2])){a[2]&&h.ops.pop(),h.trys.pop();continue}h.label=a[2],h.ops.push(e)}}e=s.call(o,h)}catch(t){e=[6,t],r=0}finally{n=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},h=(Object.defineProperty(e,"__esModule",{value:!0}),e.LevelSelect=void 0,i(24)),l=i(13),c=i(0),u=i(64),d=i(2),p=i(1),f=i(4),b=i(33),y=i(9),m=i(42),x=i(201),g=i(25),v=i(31),_=i(62),w=i(12),i=(s=h.BasicView,n(S,s),S.prototype.init=function(){var e=this,t=(s.prototype.init.call(this),this.bg=new p.JDImage(this,y.CustomResize.GHW,y.CustomResize.GHH,"background-seperator-2"),this.bg.setInteractive(),this.bg.name="scrollBG",this.add.existing(this.bg),d.LevelManager.getLevelsLength()),i=(this.scroll=new m.ScrollDots(this,Math.ceil(t/this.skinsOnPage),this.offsetWorldX),this.scroll.onCheckWorldBorders=function(t){return e.checkWorldBorders(t)},this.add.existing(this.scroll),this.currSelected=d.LevelManager.currLevelID,this.currSelected>=t&&(this.currSelected=t-1),this.add.polygon(0,0,[423,0,803,0,828,10,833,20,840,40,760,500,0,500,77,40,88,20,98,10,118,0,423,0],16777215,1));this.world=new g.World(this),this.world.init(),this.add.existing(this.world),this.world.mask=i.createGeometryMask(),this.preview=new l.ButtonImage(this,this.bg.x-470,this.bg.y+50,c.Atlases.ui,"level-show-hard-box"),this.preview.setScaleInteractive(1.3,1.3),this.preview.onUp=function(){return e.play(e.currSelected)},this.add.existing(this.preview.getView()),this.previewSkull=new p.JDImage(this,this.preview.x-290,this.preview.y-240,c.Atlases.ui,"death-icon-"+(!1===c.Constants.DISABLE_BLOOD?1:2)),this.add.existing(this.previewSkull),i.x=this.preview.x-4,i.y=this.preview.y-40,this.previewStars=new Array(3);for(var o=0;o<3;o++)this.previewStars[o]=this.add.image(this.preview.x-170+125*o,this.preview.y+200,c.Atlases.ui,"star-icon-empty");i=new p.JDBmpdTextTranslated(this,this.preview.x-315,this.preview.y+165,c.Fonts.Main,"best",52,4013373),i.setFitSize(180),this.add.existing(i),this.previewBestTime=new p.JDBmpdText(this,i.x-10,i.y+70,c.Fonts.Main,"00:00",52),this.add.existing(this.previewBestTime),(i=new p.JDBmpdTextTranslated(this,this.preview.x+245,i.y,c.Fonts.Main,"goal",52,4013373)).setFitSize(180),this.add.existing(i),this.previewGoalTime=new p.JDBmpdText(this,i.x-10,i.y+70,c.Fonts.Main,"00:00",52),this.add.existing(this.previewGoalTime),this.createStots(t,this.preview.y),this.input.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.pressDown,this),this.input.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.pressUp,this),this.input.on(Phaser.Input.Events.POINTER_UP_OUTSIDE,this.pressUp,this),i=new Phaser.GameObjects.Graphics(this);i.fillStyle(16711680,.5),i.moveTo(950,200),i.lineTo(y.CustomResize.GW+y.CustomResize.OW,200),i.lineTo(y.CustomResize.GW+y.CustomResize.OW,900),i.lineTo(830,900),i.strokePath(),i.fillPath(),this.scroll.mask=i.createGeometryMask(),this.txtTitle=new p.JDBmpdTextTranslated(this,0,0,c.Fonts.Main,"lvlSelect",112,4013373),this.txtTitle.setFitSize(1100),this.add.existing(this.txtTitle),this.btnSwitchMode=new l.ButtonScale(this,0,0),this.btnSwitchMode.addImageEvents(c.Atlases.ui,"switch-on-back"),this.btnSwitchMode.addIcon(c.Atlases.ui,"switch-button-hard-"+(!1===c.Constants.DISABLE_BLOOD?1:2)),this.btnSwitchMode.addTxtTranslated("",c.Fonts.Main,52),this.btnSwitchMode.txtTranslated.setFitSize(130),this.btnSwitchMode.onUp=function(){return e.switchMode()},this.add.existing(this.btnSwitchMode.getView()),w.AzerionSDK.isBloodFree()&&(this.btnSwitchMode.visible=!1),this.setFrameMode(),this.btnExit=new l.ButtonScaleImage(this,0,0,c.Atlases.ui,"back-button"),this.btnExit.onUp=function(){return r(e,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,w.AzerionSDK.showInterstitialAd()];case 1:return t.sent(),this.scene.start(b.Menu.Name),[2]}})})},this.add.existing(this.btnExit.getView()),this.btnRight=new l.ButtonScaleImage(this,y.CustomResize.GW-260,0,c.Atlases.ui,"pagination-right-button"),this.btnRight.onUp=function(){return e.scroll.moveWorld(1)},this.add.existing(this.btnRight.getView()),this.btnLeft=new l.ButtonScaleImage(this,this.btnRight.x-600,0,c.Atlases.ui,"pagination-left-button"),this.btnLeft.onUp=function(){return e.scroll.moveWorld(-1)},this.add.existing(this.btnLeft.getView()),this.btnSkins=new l.ButtonScale(this,0,0),this.btnSkins.addImageEvents(c.Atlases.ui,"menu-small-button"),this.btnSkins.addIcon(c.Atlases.ui,"skin-icon"),this.btnSkins.onUp=function(){return e.scene.start(_.Skins.Name,{prev:S.Name})},this.add.existing(this.btnSkins.getView()),this.scroll.checkWorldBorders()},S.prototype.switchMode=function(){d.LevelManager.switchMode(),this.setFrameMode(),this.showPreview()},S.prototype.setFrameMode=function(){!0===d.LevelManager.currModeHard?(this.btnSwitchMode.image.setFrame("switch-on-back-hard"),this.btnSwitchMode.txtTranslated.text="on",this.btnSwitchMode.txtTranslated.x=-70,this.btnSwitchMode.icon.x=77,this.preview.getView().setFrame("level-show-hard-box")):(this.btnSwitchMode.image.setFrame("switch-off-back"),this.btnSwitchMode.txtTranslated.text="off",this.btnSwitchMode.txtTranslated.x=70,this.btnSwitchMode.icon.x=-77,this.preview.getView().setFrame("level-show-box")),this.previewSkull.visible=d.LevelManager.currModeHard,this.updateSlotStars()},S.prototype.updateSlotStars=function(){var t=d.LevelManager.getLevelsData(),e=d.LevelManager.getOpenLevels(),i=(this.currSelected=e-1,d.LevelManager.getLevelsLength());this.currSelected>=i&&(this.currSelected=i-1),this.lastPressedItem=this.scroll.getAt(this.currSelected);for(var o=0;o<this.scroll.length;o++){var s=0;t[o]&&(s=t[o].stars),this.scroll.getAt(o).updateStars(s,this.currSelected,e)}this.scroll.setCurrentWorld(this.currSelected,this.skinsOnPage)},S.prototype.play=function(t){d.LevelManager.currLevelID=t,this.scene.start(u.GamePlay.Name)},S.prototype.createStots=function(t,e){for(var i,o=this.skinsOnPage/3,s=y.CustomResize.GHW+470-o/2*170+85-10-10,n=e-170-10,r=0,a=s,h=n,l=0,c=0,u=0;u<t;u++)i=new x.LevelSlot(this,a+c,h,l),this.scroll.add(i),l===this.currSelected&&(this.selectSlot(i,!1),this.lastPressedItem=i),l+=1,a+=180,(u+1)%o==0&&(a=s-35*(r+=1),h+=180,(u+1)%this.skinsOnPage==0)&&(a=s,c+=this.offsetWorldX,h=n,r=0);i=null,this.scroll.setCurrentWorld(this.currSelected,this.skinsOnPage)},S.prototype.pressDown=function(t,e){var i,o;!1!==this.scroll.canPressDown(e)&&(i=!1,(o=e[0].parentContainer)instanceof x.LevelSlot&&(this.currPressedItem=o,i=!0),"scrollBG"!==e[0].name&&!1===i&&o!==this||this.scroll.pressDown(t,e))},S.prototype.pressUp=function(t,e){!1!==this.scroll.canPressUp()&&(this.currPressedItem&&(e&&e[0]&&e[0].parentContainer===this.currPressedItem&&!0===this.scroll.isWordNotChanged()&&this.selectSlot(this.currPressedItem,!0),this.currPressedItem=null),this.scroll.pressUp(t,e))},S.prototype.selectSlot=function(t,e){!0!==(e=void 0===e?!1:e)||this.currSelected!==t.id?(this.lastPressedItem&&t.id!==this.lastPressedItem.id&&this.lastPressedItem.unselect(),this.currSelected=t.id,t.select(),this.lastPressedItem=t,this.showPreview()):this.play(this.currSelected)},S.prototype.showPreview=function(){var t=d.LevelManager.getLevel(this.currSelected),e=(this.world.createMiniMap(t),this.updateCameraMiniMap(),"");!0===d.LevelManager.currModeHard&&(e="-hard");for(var i=d.LevelManager.getLevelSaveData(this.currSelected),o=0;o<this.previewStars.length;o++)o<i.stars?this.previewStars[o].setFrame("star-icon"+e):this.previewStars[o].setFrame("star-icon-empty"+e);this.previewBestTime.text=v.Helpers.timeDecorator(100*i.time),this.previewGoalTime.text=v.Helpers.timeDecorator(100*t.times[2])},S.prototype.checkWorldBorders=function(t){var e=this.btnLeft.getInteractiveElement(),i=this.btnRight.getInteractiveElement();t<0?(e.visible=!1,i.visible=!0):0<t?(e.visible=!0,i.visible=!1):(e.visible=!0,i.visible=!0)},S.prototype.update=function(){s.prototype.update.call(this),this.scroll.update()},S.prototype.resize=function(){s.prototype.resize.call(this),f.AlignTo.fitScreen(this.bg),f.AlignTo.leftTop(this.btnExit,100,100),this.btnSwitchMode.x=f.AlignTo.getRight(200),this.btnSwitchMode.y=this.btnExit.y,this.btnSkins.x=this.btnSwitchMode.x-260,this.btnSkins.y=this.btnSwitchMode.y,this.txtTitle.x=this.btnExit.x+(this.btnSkins.x-this.btnExit.x)/2,f.AlignTo.top(this.txtTitle,100),f.AlignTo.bot(this.btnLeft,100),this.btnRight.y=this.btnLeft.y,this.scroll.resize(this.btnLeft.x+(this.btnRight.x-this.btnLeft.x)/2,this.btnLeft.y)},S.prototype.updateCameraMiniMap=function(){this.world.x=0,this.world.y=0,this.world.scale=1;var t=this.preview.x,e=this.preview.y-50,i=this.preview.getView().width,o=this.preview.getView().height,s=this.getLevelBounds(this.world,new Phaser.Geom.Rectangle,{left:null,top:null,right:null,bot:null}),n=(d.LevelManager.minLevelY=s.bot,s.left-s.right),r=s.top-s.bot,r=o/Math.abs(r),a=(this.world.scale=r,s.left),s=s.top;this.world.x=-a*r+t-(i-50)/2,this.world.y=-s*r+e-o/2,this.tweens.killTweensOf(this.world),this.add.tween({targets:this.world,x:this.world.x+n*r+(i-50),duration:5e4*r,yoyo:!0,loop:-1,delay:500,hold:500})},S.prototype.getLevelBounds=function(t,e,i){for(var o=0;o<t.length;o++){var s=t.getAt(o);s.notUseAsLevelBounds||(s instanceof Phaser.GameObjects.Container?this.getLevelBounds(s,e,i):s.getBounds&&(s.getBounds(e),(null===i.left||i.left>e.x)&&(i.left=e.x),(null===i.top||i.top>e.y)&&(i.top=e.y),(null===i.right||i.right<e.right)&&(i.right=e.right),null===i.bot||i.bot<e.bottom)&&(i.bot=e.bottom))}return i},S.prototype.destroy=function(){s.prototype.destroy.call(this),this.bg=null,this.btnExit=null,this.txtTitle=null,this.scroll=null,this.btnLeft=null,this.btnRight=null,this.lastPressedItem=null,this.currPressedItem=null,this.btnSwitchMode=null,this.preview=null,this.previewSkull=null,this.world=null,this.btnSkins=null},S.Name="levelSelect",S);function S(){var t=null!==s&&s.apply(this,arguments)||this;return t.skinsOnPage=15,t.offsetWorldX=2650,t}e.LevelSelect=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.GamePlay=void 0,i(24)),a=i(20),h=i(0),l=i(4),c=i(13),u=i(5),d=i(25),p=i(11),f=i(2),b=i(15),y=i(63),i=(s=r.BasicView,n(m,s),m.prototype.init=function(){var t=this;s.prototype.init.call(this),f.SoundManager.playRandomMusic(),this.paused=!1,this.world=new d.World(this),this.add.existing(this.world),this.world.init(),this.world.createLevel(),this.flipText=new d.FlipText(this),this.add.existing(this.flipText),this.btnPause=new c.ButtonScaleImage(this,0,0,h.Atlases.ui,"settings-button"),this.btnPause.onUp=function(){return t.showPopUpPause()},this.add.existing(this.btnPause.getView()),this.panelLevel=new d.PanelLevel(this),this.add.existing(this.panelLevel),this.timer=new d.Timer(this),this.add.existing(this.timer),this.timer.start(),this.startTimer=new d.StartTimer(this),this.add.existing(this.startTimer),this.startTimer.show(p.Bool3.false),this.world.updateCameraAndBG(),this.deathPanel=new d.DeathCounter(this),this.add.existing(this.deathPanel),!0===h.Constants.IS_PRODUCTION?this.game.events.on(Phaser.Core.Events.PAUSE,this.showPopUpPause,this):(u.Box2DWorld.initDebug(this,this.world),this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.F).on("up",function(){t.levelEnd(),t.levelComplete()})),this.events.on(a.PopUpManager.EVENT_PANEL_OPENED,this.popUpOpen,this),this.events.on(a.PopUpManager.EVENT_PANEL_CLOSED,this.popUpClose,this),this.restartBtn=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.R)},m.prototype.popUpOpen=function(){(this.paused=!0)===this.popUpManager.isExist(a.PopUpList.Pause)&&f.SoundManager.pauseAll()},m.prototype.popUpClose=function(){!1===this.popUpManager.isPanelOpen()&&(this.paused=!1,f.SoundManager.resumeAll())},m.prototype.startTimerComplete=function(){this.world.player.firstStart()},m.prototype.restartLevel=function(){this.scene.start(m.Name)},m.prototype.reset=function(){this.timer&&this.timer.resume()},m.prototype.showFlip=function(t){var e,i;!0===t?(e=f.GameData.TIME_FOR_BACKFLIP,i="backflip",f.AchievementManager.saveAchive(b.AchievesType.backFlip)):(e=f.GameData.TIME_FOR_FRONTFLIP,i="frontflip",f.AchievementManager.saveAchive(b.AchievesType.frontFlip)),this.flipText.show(e,i),this.timer.minusTime(e)},m.prototype.nextLevel=function(){this.scene.start(m.Name)},m.prototype.exitFromPause=function(){this.scene.start(y.LevelSelect.Name),f.AchievementManager.saveAchive(b.AchievesType.playHour,this.timer.getCounter())},m.prototype.levelEnd=function(){this.timer.pause(),!0===this.world.isGameOver?(this.deathPanel.die(),f.AchievementManager.saveAchive(b.AchievesType.death)):(this.conffeti=new d.ParticleConfetti(this),this.conffeti.start(),this.conffeti.resize(),this.add.existing(this.conffeti),f.AchievementManager.saveAchive(b.AchievesType.playHour,this.timer.getCounter()))},m.prototype.levelComplete=function(){this.conffeti.stop(),this.world.visible=!1,this.popUpManager.open(a.PopUpList.Victory,{time:this.timer.getCounter(),death:this.deathPanel.getCounter()})},m.prototype.showPopUpPause=function(){!0!==this.popUpManager.isPanelOpen()&&this.popUpManager.open(a.PopUpList.Pause)},m.prototype.update=function(){s.prototype.update.call(this),!1===this.paused&&(!0===this.startTimer.visible?this.startTimer.update():(this.world.update(),this.flipText.update(),!0===Phaser.Input.Keyboard.JustDown(this.restartBtn)&&this.world.canRestart(),this.timer.update(),this.conffeti&&this.conffeti.update()))},m.prototype.resize=function(){s.prototype.resize.call(this),l.AlignTo.leftTop(this.btnPause,100,100),this.world.resize(),this.timer.resize(this.btnPause.y),this.panelLevel.resize(this.btnPause.x,this.btnPause.y),this.deathPanel.resize(this.timer.x,this.timer.y),this.flipText.resize(),this.conffeti&&this.conffeti.resize()},m.prototype.destroy=function(){this.game.events.off(Phaser.Core.Events.PAUSE,this.showPopUpPause,this),this.events.off(a.PopUpManager.EVENT_PANEL_OPENED,this.popUpOpen,this),this.events.off(a.PopUpManager.EVENT_PANEL_CLOSED,this.popUpClose,this),s.prototype.destroy.call(this),this.world=null,this.btnPause=null,this.restartBtn=null,this.timer=null,this.startTimer=null,this.deathPanel=null,this.flipText=null,this.conffeti=null,this.panelLevel=null},m.Name="gameplay",m);function m(){return null!==s&&s.apply(this,arguments)||this}e.GamePlay=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockVertical=void 0,i(0)),a=i(1),h=i(6),l=i(2),i=(s=i(7).BlockBase,n(c,s),c.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockVertical"),t.add(this.view)},c.prototype.initBody=function(){s.prototype.initBody.call(this,h.Box2DBodyType.kinematic),this.body.setContactCallback(null,this.onContact,this)},c.prototype.onContact=function(t,e,i,o,s,n){o.IsSensor()},c.prototype.spawn=function(t){t.scaleX=Math.abs(t.scaleX),t.scaleY=Math.abs(t.scaleY),s.prototype.spawn.call(this,t),this.view.setScale(t.scaleX,t.scaleY)},c.prototype.reset=function(){this.counterDelay=0,this.body.velocity.y=0,s.prototype.reset.call(this),this.startMoving()},c.prototype.startMoving=function(){this.counterDelay===this.spawnData.startDelay&&this.setVelocity(this.spawnData.speed)},c.prototype.setVelocity=function(t){this.body.velocity.y=t},c.prototype.update=function(){this.counterDelay<this.spawnData.startDelay?(this.counterDelay+=1,this.startMoving()):((this.body.velocity.y<0&&this.body.y<this.spawnData.y-this.spawnData.moveDist||0<this.body.velocity.y&&this.body.y>this.spawnData.y+this.spawnData.moveDist)&&this.setVelocity(-this.body.velocity.y),this.updateView(this.body.x,this.body.y))},c.prototype.updateBody=function(t,e){s.prototype.updateBody.call(this,t,this.spawnData.y-this.spawnData.moveDist+2*this.spawnData.moveDist*(this.spawnData.startPos/100))},c.prototype.createBodyFixture=function(){this.body.setRectangle(l.GameData.BASIC_BLOCK_WIDTH*this.spawnData.scaleX,l.GameData.BASIC_BLOCK_HEIGHT*this.spawnData.scaleY),s.prototype.createBodyFixture.call(this)},c.prototype.destroy=function(){s.prototype.destroy.call(this)},c);function c(){return null!==s&&s.apply(this,arguments)||this}e.BlockVertical=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockHorizontal=void 0,i(0)),a=i(1),h=i(5),l=i(6),c=i(2),i=(s=i(7).BlockBase,n(u,s),u.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockHorizontal"),t.add(this.view)},u.prototype.initBody=function(){this.body=h.Box2DWorld.getBody(0,0,l.Box2DBodyType.kinematic)},u.prototype.spawn=function(t){t.scaleX=Math.abs(t.scaleX),t.scaleY=Math.abs(t.scaleY),s.prototype.spawn.call(this,t),this.view.setScale(t.scaleX,t.scaleY)},u.prototype.reset=function(){this.counterDelay=0,this.body.velocity.x=0,s.prototype.reset.call(this),this.startMoving()},u.prototype.startMoving=function(){this.counterDelay===this.spawnData.startDelay&&this.setVelocity(this.spawnData.speed)},u.prototype.setVelocity=function(t){this.body.velocity.x=t},u.prototype.update=function(){this.counterDelay<this.spawnData.startDelay?(this.counterDelay+=1,this.startMoving()):((this.body.velocity.x<0&&this.body.x<this.spawnData.x-this.spawnData.moveDist||0<this.body.velocity.x&&this.body.x>this.spawnData.x+this.spawnData.moveDist)&&this.setVelocity(-this.body.velocity.x),this.updateView(this.body.x,this.body.y))},u.prototype.updateBody=function(t,e){s.prototype.updateBody.call(this,this.spawnData.x-this.spawnData.moveDist+2*this.spawnData.moveDist*(this.spawnData.startPos/100),e)},u.prototype.createBodyFixture=function(){this.body.setRectangle(c.GameData.BASIC_BLOCK_WIDTH*this.spawnData.scaleX,c.GameData.BASIC_BLOCK_HEIGHT*this.spawnData.scaleY),s.prototype.createBodyFixture.call(this)},u);function u(){return null!==s&&s.apply(this,arguments)||this}e.BlockHorizontal=i},function(t,e,i){"use strict";var o,n,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockMoving=void 0,i(0)),a=i(1),h=i(6),l=i(4),c=i(2),i=(n=i(7).BlockBase,s(u,n),u.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockHorizontal"),t.add(this.view)},u.prototype.initBody=function(){n.prototype.initBody.call(this,h.Box2DBodyType.kinematic)},u.prototype.spawn=function(t){t.scaleX=Math.abs(t.scaleX),t.scaleY=Math.abs(t.scaleY);var e=l.Tools.toRad(t.angleMove),i=Math.cos(e),e=Math.sin(e),o=Math.abs(t.speed);this.speedX=i*o,this.speedY=e*o,this.endX=i*t.moveDist,this.endY=e*t.moveDist,n.prototype.spawn.call(this,t),this.body.angle=t.angle,this.view.setScale(t.scaleX/2,t.scaleY/2),this.view.rotation=this.body.rotation},u.prototype.reset=function(){this.counterDelay=0,this.body.setZeroVelocity(),n.prototype.reset.call(this),0<this.spawnData.speed?this.dirMoving=1:this.dirMoving=-1,this.state="none",0===this.spawnData.currID&&this.startMoving()},u.prototype.startMoving=function(){(this.repeat=0)<this.spawnData.startDelay?this.state="startDelay":this.setVelocity()},u.prototype.trigger=function(){"none"===this.state&&this.startMoving()},u.prototype.setVelocity=function(){var t=this.speedX*this.dirMoving,e=this.speedY*this.dirMoving;this.body.velocity.x=t,this.body.velocity.y=e,this.state="changeDir"},u.prototype.update=function(){if("none"!==this.state)if("startDelay"===this.state)this.counterDelay+=1,this.counterDelay===this.spawnData.startDelay&&this.setVelocity();else if("update"===this.state){if(l.Tools.distance(this.spawnData.x,this.spawnData.y,this.view.x,this.view.y)>this.spawnData.moveDist){if(this.body.setZeroVelocity(),n.prototype.updateBody.call(this,this.spawnData.x+this.endX*this.dirMoving,this.spawnData.y+this.endY*this.dirMoving),this.spawnData.repeat>this.repeat&&(this.repeat+=1,this.spawnData.repeat===this.repeat))return void(this.state="none");this.dirMoving=-this.dirMoving,0===this.spawnData.changeDirDelay?this.setVelocity():(this.state="changeDirDelay",this.counterDelay=0)}this.updateView(this.body.x,this.body.y)}else"changeDir"===this.state?(this.state="update",this.updateView(this.body.x,this.body.y)):"changeDirDelay"===this.state&&(this.counterDelay+=1,this.counterDelay>=this.spawnData.changeDirDelay)&&this.setVelocity()},u.prototype.updateBody=function(t,e){var i=l.Tools.toRad(this.spawnData.angleMove),o=Math.cos(i),i=Math.sin(i),o=this.spawnData.moveDist*o,i=this.spawnData.moveDist*i,s=this.spawnData.startPos/100;n.prototype.updateBody.call(this,this.spawnData.x-o+2*o*s,this.spawnData.y-i+2*i*s)},u.prototype.createBodyFixture=function(){this.body.setRectangle(c.GameData.BASIC_BLOCK_WIDTH*this.spawnData.scaleX,c.GameData.BASIC_BLOCK_HEIGHT*this.spawnData.scaleY),n.prototype.createBodyFixture.call(this)},u);function u(){return null!==n&&n.apply(this,arguments)||this}e.BlockMoving=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ObstacleHighSpikes=void 0,i(46)),a=i(1),h=i(5),l=i(6),c=i(3),u=i(8),i=(s=i(14).ObstacleBase,n(d,s),d.prototype.initView=function(t){s.prototype.initView.call(this,t),this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"obstacleHighSpikes"),t.add(this.view),this.initBody(l.Box2DBodyType.kinematic)},d.prototype.initBody=function(t){void 0===t&&(t=l.Box2DBodyType.static),this.body=h.Box2DWorld.getBody(0,0,t),this.body.data.SetUserData({id:c.ITEM_ID.obstacleSpikes})},d.prototype.spawn=function(t){s.prototype.spawn.call(this,t),this.createBodyFixture(),this.view.x=this.spawnData.x,this.view.y=this.spawnData.y,this.body.x=this.spawnData.x,this.body.y=this.spawnData.y,this.body.angle=this.spawnData.angle,this.view.rotation=this.body.rotation},d.prototype.setX=function(t){this.body.x=t,this.view.x=t},d.prototype.setY=function(t){this.body.y=t,this.view.y=t},d.prototype.moveX=function(t){this.body.x+=t,this.view.x+=t},d.prototype.moveY=function(t){this.body.y+=t,this.view.y+=t},d.prototype.createBodyFixture=function(){this.body.setRectangle(84,36).SetSensor(!0),this.body.setCollisionCategory(u.BodyCollisionFilter.DEFAULT)},d.prototype.remove=function(){h.Box2DWorld.destroyBody(this.body),s.prototype.remove.call(this)},d.prototype.destroy=function(){s.prototype.destroy.call(this),this.body=null,this.view=null},d);function d(){return null!==s&&s.apply(this,arguments)||this}e.ObstacleHighSpikes=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ObstacleBuzzsawOnStick=void 0,i(0)),a=i(1),h=i(5),l=i(6),c=i(4),u=i(3),d=i(8),i=(s=i(14).ObstacleBase,n(p,s),p.prototype.initView=function(t){s.prototype.initView.call(this,t),this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"obstacleBuzzsawOnStick"),t.add(this.view),this.view.setOrigin(.1,.5),this.buzzsaw=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"obstacleBuzzsaw"),t.add(this.buzzsaw),this.initBody(),this.body.data.SetUserData({id:u.ITEM_ID.obstacleBuzzsaw})},p.prototype.initBody=function(){this.body=h.Box2DWorld.getBody(0,0,l.Box2DBodyType.kinematic)},p.prototype.spawn=function(t){s.prototype.spawn.call(this,t),this.startR=c.Tools.toRad(t.angle),this.startR>=Math.PI&&(this.startR-=c.Tools.PI2),0<this.spawnData.speedAngular?(this.end1=this.startR+c.Tools.PI2,this.end2=this.startR):(this.end1=this.startR,this.end2=this.startR-c.Tools.PI2),this.view.scale=t.scale/3,this.buzzsawScale=.5*t.scale,this.buzzsaw.scale=this.buzzsawScale/3,this.body.clearFixtures(),this.createBodyFixture(),this.body.setCollisionCategory(d.BodyCollisionFilter.DEFAULT)},p.prototype.reset=function(){s.prototype.reset.call(this),this.state="none",(this.body.angularVelocity=0)===this.spawnData.currID&&this.checkState(),this.body.angle=this.spawnData.angle,this.updateBody(this.spawnData.x,this.spawnData.y)},p.prototype.createBodyFixture=function(){this.addFixture(this.buzzsaw,135*this.spawnData.scale,this.buzzsawScale)},p.prototype.addFixture=function(t,e,i){this.body.addCircle(u.GameData.BUZZSAW_SIZE*i/2-2*i,e),t.setOrigin(-(e/(u.GameData.BUZZSAW_SIZE*i)-.5),.5)},p.prototype.updateBody=function(t,e){this.body.x=t,this.body.y=e,this.updateView(t,e)},p.prototype.updateView=function(t,e){s.prototype.updateView.call(this,t,e),this.view.rotation=this.body.rotation,this.buzzsaw.x=t,this.buzzsaw.y=e,this.buzzsaw.rotation=this.view.rotation},p.prototype.trigger=function(t){"none"===this.state&&this.checkState()},p.prototype.checkState=function(){this.counter=0,this.repeat=0,this.state="move",0<this.spawnData.startDelay?this.state="delay":this.startVelocity()},p.prototype.startVelocity=function(){this.body.angularVelocity=this.spawnData.speedAngular},p.prototype.update=function(){s.prototype.update.call(this),"delay"===this.state?(this.counter+=1,this.counter>=this.spawnData.startDelay&&this.startVelocity()):"move"===this.state?(0<this.body.angularVelocity&&this.body.rotation>=this.end1||this.body.angularVelocity<0&&this.body.rotation<=this.end2)&&(this.state="move",0<this.spawnData.changeDirDelay?(this.currVel=this.body.angularVelocity,this.state="changeDir",this.body.rotation=this.startR,this.body.angularVelocity=0):0===this.startR?this.body.rotation=0:this.body.rotation=this.startR+this.body.rotation%c.Tools.PI2%this.startR,0<this.spawnData.repeat)&&(this.repeat+=1,this.repeat>=this.spawnData.repeat)&&(this.body.angularVelocity=0,this.state="done"):"changeDir"===this.state&&(this.counter+=1,this.counter===this.spawnData.changeDirDelay)&&(this.counter=0,this.body.angularVelocity=-this.currVel,this.state="move"),this.view.rotation=this.body.rotation,this.buzzsaw.rotation=this.view.rotation,this.world.caclBuzzsawDis(this.view.x,this.view.y)},p.prototype.remove=function(){h.Box2DWorld.destroyBody(this.body),this.buzzsaw.destroy(),s.prototype.remove.call(this)},p.prototype.destroy=function(){s.prototype.destroy.call(this),this.body=null,this.view=null,this.buzzsaw=null},p);function p(){return null!==s&&s.apply(this,arguments)||this}e.ObstacleBuzzsawOnStick=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ObstacleClassicLaserStatic=void 0,i(0)),a=i(1),h=i(2),l=i(3),i=(s=i(14).ObstacleBase,n(c,s),c.prototype.initView=function(t){s.prototype.initView.call(this,t),this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"obstacleClassicLaser"),t.add(this.view),this.bulletSpeed=h.GameData.getConfigParam(l.GameConfig.classicLaserBulletSpeed)},c.prototype.spawn=function(t){s.prototype.spawn.call(this,t),this.view.scale=t.scale/3,this.fireTime=t.fireTime},c.prototype.reset=function(){this.view.angle=this.spawnData.angle,this.updateView(this.spawnData.x,this.spawnData.y),this.shootTimer=0,this.delay=this.spawnData.delay,this.active=!1,this.spawnData.currID<=0&&(this.active=!0)},c.prototype.trigger=function(t){0<this.spawnData.currID?(this.active=!0,this.shootTimer=this.fireTime):this.active=!1},c.prototype.update=function(){!1!==this.active&&(0<this.delay?--this.delay:(this.shootTimer+=1,this.shootTimer>=this.fireTime&&(this.shootTimer=0,this.shoot("bulletLaser"))))},c.prototype.shoot=function(t){var e=(e=this.spawnData.scale)||1;this.world.shootBullet(this.view.x,this.view.y,this.view.rotation,this.bulletSpeed,t,e)},c);function c(){return null!==s&&s.apply(this,arguments)||this}e.ObstacleClassicLaserStatic=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ObstacleClassicLaser=void 0,i(5)),a=i(4),h=i(2),l=i(3),i=(s=i(70).ObstacleClassicLaserStatic,n(c,s),c.prototype.init=function(){s.prototype.init.call(this),this.fireDistance=h.GameData.getConfigParam(l.GameConfig.classicLaserFireDistance)},c.prototype.spawn=function(t){t.angle=90,s.prototype.spawn.call(this,t)},c.prototype.reset=function(){s.prototype.reset.call(this),this.spinDest=a.Tools.PI05,this.count=10},c.prototype.update=function(){var t=this.world.player;!0===t.alive()&&this.lookAtHero(t,a.Tools.distance(this.view.x,this.view.y,t.getX(),t.getY())<=this.fireDistance)},c.prototype.lookAtHero=function(t,e){!0===e?0<(e=r.Box2DWorld.world.raycast(this.view.x,this.view.y,t.getX(),t.getY(),!0)).length&&((e=e[0].body.data.GetUserData())&&"block"===e.id?(this.spinDest=a.Tools.PI05,this.count=10):(this.count=0,this.spinDest=Math.atan2(t.getY()-this.view.y,t.getX()-this.view.x),s.prototype.update.call(this))):this.count<10?(this.count+=1,this.spinDest=Math.atan2(t.getY()-this.view.y,t.getX()-this.view.x)):(this.shootTimer=0,this.spinDest=a.Tools.PI05),this.view.rotation+=a.Tools.getFollowRotationSpeedR(this.view.rotation,this.spinDest,.125)},c);function c(){return null!==s&&s.apply(this,arguments)||this}e.ObstacleClassicLaser=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ObstacleQuadrant=void 0,i(0)),a=i(1),h=i(5),l=i(6),c=i(3),u=i(8),i=(s=i(14).ObstacleBase,n(d,s),d.prototype.init=function(){this.initBody()},d.prototype.initView=function(t){s.prototype.initView.call(this,t),this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"obstacleQuadrant"),t.add(this.view)},d.prototype.initBody=function(){this.body=h.Box2DWorld.getBody(0,0,l.Box2DBodyType.kinematic)},d.prototype.spawn=function(t){this.speed=t.speedAngular,this.body.data.SetUserData({id:c.ITEM_ID.obstacleQuadrant}),this.createBodyFixture(t.scale),this.view.scale=t.scale/2.86,s.prototype.spawn.call(this,t)},d.prototype.reset=function(){s.prototype.reset.call(this),this.body.angle=this.spawnData.angle,this.view.rotation=this.body.rotation,this.updateBody(this.spawnData.x,this.spawnData.y),(this.body.angularVelocity=0)===this.spawnData.currID&&this.startMoving()},d.prototype.startMoving=function(){this.body.angularVelocity=this.speed},d.prototype.trigger=function(){this.startMoving()},d.prototype.createBodyFixture=function(t){var e=14*t,t=81*t;this.body.setRectangle(e,e,0,-t).SetSensor(!0),this.body.addRectangle(e,e,t,0).SetSensor(!0),this.body.addRectangle(e,e,0,t).SetSensor(!0),this.body.addRectangle(e,e,-t,0).SetSensor(!0),this.body.setCollisionCategory(u.BodyCollisionFilter.DEFAULT)},d.prototype.updateBody=function(t,e){this.body.x=t,this.body.y=e,this.updateView(t,e)},d.prototype.update=function(){s.prototype.update.call(this),this.view.rotation=this.body.rotation},d.prototype.remove=function(){h.Box2DWorld.destroyBody(this.body),s.prototype.remove.call(this)},d.prototype.destroy=function(){s.prototype.destroy.call(this),this.body=null,this.view=null},d);function d(){return null!==s&&s.apply(this,arguments)||this}e.ObstacleQuadrant=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ItemFadeBase=void 0,i(32)),a=i(2),h=i(3),i=(s=i(17).ItemBase,n(l,s),l.prototype.init=function(){s.prototype.init.call(this),this.distance=a.GameData.getConfigParam(h.GameConfig.itemFadeDistance)},l.prototype.reset=function(){this.view.x=this.spawnData.x,this.view.y=this.spawnData.y,this.view.scale=this.startScale,this.view.alpha=0,this.reappear=0,this.canAppear=!0,this.canDisappear=!0},l.prototype.update=function(){var t,e=this.world.player,e=r.Tools.distance(e.getX(),e.getY(),this.view.x,this.view.y);e<this.distance?(this.canAppear=!0,this.canDisappear=!1):e>this.distance+100&&(this.canDisappear=!0),!0===this.canAppear?(this.view.alpha-=.25*(this.view.alpha-1),t=this.view.scaleX,(t-=.25*(t-this.startScale))>=this.startScale-.01&&(this.canAppear=!1,this.reappear=0),this.view.scale=t):!0===this.canDisappear&&(this.reappear>=this.reappearTime?(this.view.alpha-=.25*this.view.alpha,t=this.view.scaleX,(t-=.25*t)<=0&&(this.canDisappear=!1),this.view.scale=t):this.reappear+=1)},l);function l(){var t=null!==s&&s.apply(this,arguments)||this;return t.reappearTime=30,t.startScale=1,t}e.ItemFadeBase=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.MiscClassicLaserBullet=void 0,i(0)),a=i(1),h=i(5),l=i(2),c=i(3),i=(s=i(45).MiscBase,n(u,s),u.prototype.init=function(){this.lifeTime=l.GameData.getConfigParam(c.GameConfig.classicLaserBulletLifeTime)},u.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"miscClassicLaserBullet"),t.add(this.view),this.initBody()},u.prototype.initBody=function(){this.body=h.Box2DWorld.getBody(),this.createBodyFixture(),this.body.gravityScale=0,this.body.data.SetUserData({id:"bullet"}),this.body.setContactCallback(null,this.onContact,this)},u.prototype.createBodyFixture=function(){this.body.addRectangle(34,12).SetSensor(!0)},u.prototype.onContact=function(t,e,i,o,s,n){!1!==s&&!0!==o.IsSensor()&&this.collide()},u.prototype.collide=function(){this.view.visible=!1,this.body.data.SetActive(!1)},u.prototype.spawn=function(t){s.prototype.spawn.call(this,t),this.view.visible=!0,this.view.scale=t.scale/2,this.body.data.SetActive(!0),this.body.x=t.x,this.body.y=t.y,this.body.rotation=t.r,this.updateView(t.x,t.y),this.view.rotation=t.r,this.body.setZeroAngularVelocity(),this.body.setZeroVelocity(),this.shoot(),this.counter=this.lifeTime,this.playSound()},u.prototype.playSound=function(){!0===this.world.inCameraView(this.spawnData.x-50,this.spawnData.x+50,this.spawnData.y-50,this.spawnData.y+50)&&l.SoundManager.playSFX("laserFire")},u.prototype.shoot=function(){this.body.velocity.set(Math.cos(this.spawnData.r)*this.spawnData.speed,Math.sin(this.spawnData.r)*this.spawnData.speed)},u.prototype.reset=function(){this.view.visible=!1,this.body.data.SetActive(!1)},u.prototype.start=function(){this.reset()},u.prototype.update=function(){!1!==this.alive()&&(this.counter+=1,this.counter<=0?this.reset():this.updateView(this.body.x,this.body.y))},u.prototype.alive=function(){return this.view.visible},u.prototype.destroy=function(){s.prototype.destroy.call(this),this.view=null,this.body=null},u);function u(){return null!==s&&s.apply(this,arguments)||this}e.MiscClassicLaserBullet=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.MiscBody=void 0,i(6)),a=i(2),h=i(3),l=i(7),c=i(8),i=(s=l.BlockBase,n(u,s),u.prototype.initBody=function(t){s.prototype.initBody.call(this,r.Box2DBodyType.dynamic)},u.prototype.spawn=function(t){s.prototype.spawn.call(this,t),this.view.tint=16777215;t=this.body.data.GetFixtureList();t.SetFriction(a.GameData.getConfigParam(h.GameConfig.miscDynamicFricton)),t.m_filter.maskBits=65535,t.m_filter.categoryBits=c.BodyCollisionFilter.MISC_DYNAMIC,this.body.fixedRotation=!!this.spawnData.fixedRotation,0===this.spawnData.collide?(this.world.layerObstacles.add(this.view),this.view.tint=8947848,t.m_filter.categoryBits=c.BodyCollisionFilter.DEFAULT,t.m_filter.maskBits=c.BodyCollisionFilter.DEFAULT):this.world.layerTopObstacles.add(this.view)},u.prototype.createBodyFixture=function(){this.body.data.SetUserData({id:"miscDynamicBody",canTnt:!0,link:this})},u.prototype.reset=function(){s.prototype.reset.call(this),this.body.x=this.spawnData.x,this.body.y=this.spawnData.y,this.body.angle=this.spawnData.angle,this.body.setZeroAngularVelocity(),this.body.setZeroVelocity(),this.body.data.m_force.SetZero(),this.update()},u.prototype.update=function(){s.prototype.update.call(this),this.updateView(this.body.x,this.body.y),this.view.rotation=this.body.rotation},u.prototype.destroy=function(){s.prototype.destroy.call(this),this.view=null},u);function u(){return null!==s&&s.apply(this,arguments)||this}e.MiscBody=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParticleManager=e.ColorParticle=e.Particle=void 0;var o=i(77),s=(Object.defineProperty(e,"Particle",{enumerable:!0,get:function(){return o.Particle}}),i(193)),n=(Object.defineProperty(e,"ColorParticle",{enumerable:!0,get:function(){return s.ColorParticle}}),i(194));Object.defineProperty(e,"ParticleManager",{enumerable:!0,get:function(){return n.ParticleManager}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Particle=void 0;var o=i(5),s=i(8);function n(t){this.size=-1,this.fadeAfter=150,this.manager=t,this.body=o.Box2DWorld.getBody(),this.body.data.SetUserData({id:"particle"});t=this.body.setRectangle(8,8);t.m_filter.categoryBits=s.BodyCollisionFilter.DEFAULT,t.m_filter.maskBits=s.BodyCollisionFilter.ROAD,t.m_filter.groupIndex=-1,this.body.gravityScale=1.2,this.body.active=!1,this.alive=!1}n.prototype.spawnBase=function(t,e,i,o,s,n,r){this.xPos=t,this.yPos=e,this.collide=n,this.fadeAfter=r,this.size=s,!1===this.collide?(this.xVelocity=i/2,this.yVelocity=o/2,this.body.active=!1):(this.body.rotation=0,this.body.angularVelocity=0,this.body.velocity.set(30*i,30*o)),this.fadeTime=0,this.activeBody=!1,this.alive=!0},n.prototype.multAlpha=function(t){},n.prototype.update=function(){!1===this.collide?(this.xPos+=this.xVelocity,this.yPos+=this.yVelocity,this.xVelocity*=.95,Math.abs(this.xVelocity)<.1&&(this.xVelocity=0)):(!1===this.activeBody&&(this.activeBody=!0,this.body.active=!0,this.body.setXY(this.xPos,this.yPos)),this.body.velocity.x*=.98,this.xPos=this.body.x,this.yPos=this.body.y)},n.prototype.hide=function(){this.alive=!1,this.body.active=!1},n.prototype.destroy=function(){this.manager=null,this.body=null},e.Particle=n},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var s in e=arguments[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)},a=(Object.defineProperty(e,"__esModule",{value:!0}),e.Game=void 0,i(26)),h=i(0),l=i(9),c=i(204),u=i(12),i=(s=Phaser.Game,n(d,s),d.prototype.initScenes=function(){h.Constants.IS_MOBILE=!this.device.os.desktop,this.scene.add(a.Boot.Name,a.Boot),this.scene.add(a.Preloader.Name,a.Preloader),this.scene.add(a.Menu.Name,a.Menu),this.scene.add(a.LevelSelect.Name,a.LevelSelect),this.scene.add(a.Skins.Name,a.Skins),this.scene.add(a.Medals.Name,a.Medals),this.scene.add(a.GamePlay.Name,a.GamePlay),this.scene.start(a.Boot.Name)},d.prototype.createStats=function(){var t=new window.Stats;t.showPanel(0),!0===this.device.os.desktop?t.domElement.style.cssText="position:absolute;bottom:0px;right:0px;":t.domElement.style.cssText="position:absolute;bottom:50%;left:0px;",document.body.appendChild(t.dom),this.events.on(Phaser.Core.Events.PRE_STEP,function(){t.begin()}),this.events.on(Phaser.Core.Events.POST_STEP,function(){t.end()})},d);function d(t){var e=this,i=(c.NativeChanges.setFpsLimit(60),c.NativeChanges.setBitmapTextSize(),l.CustomResize.boot(),{type:Phaser.AUTO,parent:h.Constants.DIV_ID,title:h.Constants.GAME_TITLE,disableContextMenu:!0,scale:{mode:Phaser.Scale.NONE,autoCenter:Phaser.Scale.CENTER_BOTH},clearBeforeRender:!1,batchSize:512,powerPreference:"high-performance",roundPixels:!1}),i=r(r({},i),t),e=s.call(this,i)||this,t=(l.CustomResize.init(e),.8);return!1===e.device.os.desktop&&(t=.7,h.Constants.ADDITIONAL_PANEL_BUTTON_SCALE=1.2),l.CustomResize.setSize(h.Constants.GAME_WIDTH,h.Constants.GAME_HEIGHT,h.Constants.GAME_WIDTH*h.Constants.GAME_MAX_SIZE_COEF,h.Constants.GAME_HEIGHT*h.Constants.GAME_MAX_SIZE_COEF,t),l.CustomResize.refresh(),u.AzerionSDK.init(e,function(){return e.initScenes()},h.Constants.IS_PRODUCTION),!1===h.Constants.IS_PRODUCTION&&!0===h.Constants.SHOW_FPS&&e.createStats(),e}e.Game=i,window.Game=i},function(t,e,i){"use strict";function o(){}Object.defineProperty(e,"__esModule",{value:!0}),e.Images=void 0,o.preloadList=[],o.list=["logo"],o.listJpg=["background-seperator-1","background-seperator-2","background-victory"],e.Images=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Constants=void 0;i=i(12);function o(){}o.GAME_TITLE="Vex X3M",o.STORAGE_KEY="Vex X3M_sgk1",o.DIV_ID="content",o.DIV_ID_ORIENTATION="orientation",o.GAMEDISTRIBUTION_ID="0a3c55fe33ba415f9b761b5831e75b27",o.GAME_WIDTH=1920,o.GAME_HEIGHT=1080,o.GAME_MAX_SIZE_COEF=1.5,o.ADDITIONAL_PANEL_BUTTON_SCALE=1,o.AVAILABLE_LANGUAGES=["en","de","fr","it","es","nl"],o.SFX_BTN_ON_DOWN="click",o.PAUSE_POPUP=!1,o.SHOW_BUTTON_LANGUAGES=!0,o.IS_EDITOR=!1,o.SHOW_FPS=!0,o.DISABLE_BLOOD=i.AzerionSDK.isBloodFree(),o.IS_PRODUCTION=!0,o.IS_ENABLE_AD=!0,o.IS_ENABLE_REWARD_AD=!0,o.USE_SPLASH_LOADER=!0,e.Constants=o},function(t,e,i){"use strict";function o(){}Object.defineProperty(e,"__esModule",{value:!0}),e.LoaderHelper=void 0,o.show=function(){var t=document.getElementById("loader");t&&(t.style.display="block")},o.hide=function(){var t=document.getElementById("loader");t&&(t.style.display="none")},e.LoaderHelper=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PauseHandler=void 0;var o=i(0),s=i(12);function n(t){var e=this;this.game=t,this.focused=!0,this.game.events.off(Phaser.Core.Events.HIDDEN),this.game.events.off(Phaser.Core.Events.VISIBLE),h5branding.Utils.isOnDevice()&&(this.game.device.os.iOS?(window.addEventListener("blur",function(){return e.onBlur()}),window.addEventListener("focus",function(){return e.onFocus()})):(document.addEventListener("pause",function(){return e.onPause()}),document.addEventListener("resume",function(){return e.onResume()}))),this.game.events.on(Phaser.Core.Events.BLUR,this.onBlur,this),this.game.events.on(Phaser.Core.Events.FOCUS,this.onFocus,this),this.game.events.on(Phaser.Core.Events.PAUSE,this.onPause,this),this.game.events.on(Phaser.Core.Events.RESUME,this.onResume,this),document.addEventListener("visibilitychange",function(){document.visibilityState&&("hidden"===document.visibilityState&&e.pause(),"visible"===document.visibilityState)&&e.resume()}),this.audioContext=this.game.sound.context,Phaser.Sound.WebAudioSoundManager.prototype.onFocus=function(){!1!==s.AzerionSDK.isAdPlaying()||!1!==e.game.sound.locked||"suspended"!==e.audioContext.state&&"interrupted"!==e.audioContext.state||(e.audioContext.suspend(),e.audioContext.resume())},!0===this.game.device.os.iOS?this.game.sound.pauseOnBlur=!1:(this.game.sound.pauseOnBlur=!0,this.audioContext.onstatechange=function(t){!0!==s.AzerionSDK.isAdPlaying()&&!1!==e.focused||"running"!==e.audioContext.state||e.audioContext.suspend()})}n.getInstance=function(t){return n.instance=n.instance?n.instance:new n(t)},n.prototype.onBlur=function(){this.focused=!1,this.pause()},n.prototype.onFocus=function(){!(this.focused=!0)===s.AzerionSDK.isAdPlaying()&&this.resume()},n.prototype.onPause=function(){this.audioContext.suspend()},n.prototype.onResume=function(){!1===o.Constants.PAUSE_POPUP&&this.audioContext.resume()},n.prototype.pause=function(){this.game.input.enabled=!1,this.game.events.emit(Phaser.Core.Events.PAUSE)},n.prototype.resume=function(){!0===this.focused&&(this.game.input.enabled=!0,this.game.events.emit(Phaser.Core.Events.RESUME))},e.PauseHandler=n},function(t,e,i){"use strict";function o(){}Object.defineProperty(e,"__esModule",{value:!0}),e.Sounds=void 0,o.SFX="sfx",o.list=[],e.Sounds=o},function(t,e,i){"use strict";function o(){}Object.defineProperty(e,"__esModule",{value:!0}),e.Fonts=void 0,o.Main=o.font="main",o.list=[o.font,o.font+"Stroke",o.MainAppear="mainAppearTxt"],e.Fonts=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Jsons=void 0;i=i(2);function o(){}o.getJson=function(t,e,i){void 0===i&&(i=!0);var o=t.cache.json.get(e);return!0===i&&t.cache.json.remove(e),o},o.setJson=function(t,e,i){t.cache.json.add(e,i)},o.list=[i.GameData.GAME_DATA_NAME,"balance"],e.Jsons=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlignTo=void 0;var o=i(9),s=i(32);function n(){}n.getLeft=function(t){return(t=void 0===t?0:t)-o.CustomResize.SHIFT_X},n.getRight=function(t){return o.CustomResize.GW-(t=void 0===t?0:t)+o.CustomResize.SHIFT_X},n.getTop=function(t){return(t=void 0===t?0:t)-o.CustomResize.SHIFT_Y},n.getBot=function(t){return o.CustomResize.GH-(t=void 0===t?0:t)+o.CustomResize.SHIFT_Y},n.getCenterX=function(t){return o.CustomResize.GHW+(t=void 0===t?0:t)},n.getCenterY=function(t){return o.CustomResize.GHH+(t=void 0===t?0:t)},n.left=function(t,e){t.x=this.getLeft(e=void 0===e?0:e)},n.right=function(t,e){t.x=this.getRight(e=void 0===e?0:e)},n.top=function(t,e){t.y=this.getTop(e=void 0===e?0:e)},n.bot=function(t,e){t.y=this.getBot(e=void 0===e?0:e)},n.leftTop=function(t,e,i){void 0===i&&(i=0),this.left(t,e=void 0===e?0:e),this.top(t,i)},n.rightTop=function(t,e,i){void 0===i&&(i=0),this.right(t,e=void 0===e?0:e),this.top(t,i)},n.leftBot=function(t,e,i){void 0===i&&(i=0),this.left(t,e=void 0===e?0:e),this.bot(t,i)},n.rightBot=function(t,e,i){void 0===i&&(i=0),this.right(t,e=void 0===e?0:e),this.bot(t,i)},n.centerX=function(t,e){t.x=this.getCenterX(e=void 0===e?0:e)},n.centerY=function(t,e){t.y=this.getCenterY(e=void 0===e?0:e)},n.center=function(t,e,i){void 0===i&&(i=0),this.centerX(t,e=void 0===e?0:e),this.centerY(t,i)},n.centeredObjectsX=function(t,e,i){i=t.width+e.width+(i=void 0===i?20:i);t.x=-i/2+t.width/2,e.x=i/2-e.width/2},n.fitScreen=function(t,e){void 0===e&&(e=1),t.scale=Math.max(o.CustomResize.getCurrentWidth()/t.width,o.CustomResize.getCurrentHeight()/t.height)*e},n.fitScreenAndRotate=function(t){!0===o.CustomResize.IS_LANDSCAPE?(t.rotation=0,t.scale=Math.max(o.CustomResize.getCurrentWidth()/t.width,o.CustomResize.getCurrentHeight()/t.height)):(t.rotation=s.Tools.PI05,t.scale=Math.max(o.CustomResize.getCurrentWidth()/t.height,o.CustomResize.getCurrentHeight()/t.width))},n.centeredObjectsX2=function(t,e,i,o,s,n){n=e+o+(n=void 0===n?20:n);t.x=s-n/2+e/2,i.x=s+n/2-o/2},e.AlignTo=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetSymbolsForBMPDText=void 0;var l=i(2);function o(){}o.getDefaultSymbols=function(){return"!?+-*=()|%0123456789.,:;/'`–/[]{}_●"},o.getAllSymbols=function(t){void 0===t&&(t=!0)},o.getTexts=function(t){var e;t?(e={})[t]=l.Localization.data[t]:e=l.Localization.data;for(var i="",o=0,s=Object.keys(e);o<s.length;o++){var n=s[o];i+="\n"+n+"\n";for(var r=0,a=Object.keys(e[n]);r<a.length;r++){var h=a[r];i+=e[n][h].toLowerCase()}}return i+"\n"+i.toUpperCase()},e.GetSymbolsForBMPDText=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TexturesEdit=void 0;var o=i(0);function s(){}s.init=function(t){var e=new Phaser.GameObjects.Graphics(t);e.fillStyle(16777215),e.fillRect(0,0,100,100),e.generateTexture("whitePixel",100,100),e.destroy(),e=null,this.changeFrameSize(t.textures.getFrame(o.Atlases.gameplay,"bgPattern"),128,128,1,1),this.changeFrameSize(t.textures.getFrame(o.Atlases.gameplay,"blockBasic"),100,100,2,2),this.changeFrameSize(t.textures.getFrame(o.Atlases.gameplay,"blockIce"),252,252,2,2),this.changeFrameSize(t.textures.getFrame(o.Atlases.gameplay,"blockGlass"),252,252,2,2),this.changeFrameSize(t.textures.getFrame(o.Atlases.gameplay,"itemFinish"),100,100,2,2),this.changeFrameSize(t.textures.getFrame(o.Atlases.gameplay,"blockSlope"),100,100,2,2),this.changeFrameSize(t.textures.getFrame(o.Atlases.gameplay,"blockSlopeDouble"),200,100,2,2),this.changeFrameSize(t.textures.getFrame(o.Atlases.gameplay,"blockHill"),300,300,2,2),this.changeFrameSize(t.textures.getFrame(o.Atlases.gameplay,"blockCircular"),400,400,2,2),this.changeFrameSize(t.textures.getFrame(o.Atlases.gameplay,"blockHill2"),300,197,2,2),this.changeFrameSize(t.textures.getFrame(o.Atlases.gameplay,"blockBumps"),200,100,2,2),this.changeFrameSize(t.textures.getFrame(o.Atlases.gameplay,"blockRoad02"),400,300,2,2),this.changeFrameSize(t.textures.getFrame(o.Atlases.gameplay,"blockRoadPiece03"),200,200,2,2),this.changeFrameSize(t.textures.getFrame(o.Atlases.gameplay,"blockRoadPiece08"),400,200,2,2),this.changeFrameSize(t.textures.getFrame(o.Atlases.gameplay,"blockRoadPiece04"),400,200,2,2),this.changeFrameSize(t.textures.getFrame(o.Atlases.gameplay,"blockRoadPiece05"),200,200,2,2),this.changeFrameSize(t.textures.getFrame(o.Atlases.gameplay,"blockRoadPiece06"),400,400,2,2),this.changeFrameSize(t.textures.getFrame(o.Atlases.gameplay,"blockAngle"),310,196,2,2)},s.changeFrameSize=function(t,e,i,o,s){t.setSize(e,i,t.cutX+o,t.cutY+s)},s.initEditor=function(t){this.changeFrameSize(t.textures.getFrame(o.Atlases.editor,"blockDissapear"),100,100,2,2),this.changeFrameSize(t.textures.getFrame(o.Atlases.editor,"zoomZone"),100,100,2,2)},e.TexturesEdit=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SkinsManager=void 0;var s=i(16),n=i(19);function o(){}o.init=function(t){if(this.skinsData=t,this.currSkinID=n.SaveData.getItemNumber(s.SaveTypes.currSkin),!(e=n.SaveData.getItem(s.SaveTypes.skinsOpened))){for(var e=[1],i=1;i<this.getTotalSkins();i++){var o=this.getSkinPrice(i);e.push(o<0?o:0)}n.SaveData.setItem(s.SaveTypes.skinsOpened,e)}},o.getSkin=function(t){return this.skinsData[t][0]},o.getCurrentSkin=function(){return this.skinsData[this.currSkinID][0]},o.getNextSkin=function(){return this.currSkinID+=1,this.currSkinID===this.skinsData.length&&(this.currSkinID=0),this.getCurrentSkin()},o.getPrevSkin=function(){return--this.currSkinID,this.currSkinID<0&&(this.currSkinID=this.skinsData.length-1),this.getCurrentSkin()},o.getTotalSkins=function(){return this.skinsData.length},o.saveSkinStatus=function(t,e){var i=n.SaveData.getItem(s.SaveTypes.skinsOpened);i[t]=e,n.SaveData.setItem(s.SaveTypes.skinsOpened,i)},o.getSkinPrice=function(t){return this.skinsData[t][1]},o.getSkinStatus=function(t){return n.SaveData.getItem(s.SaveTypes.skinsOpened)[t]},o.currSkinID=0,e.SkinsManager=o},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.Boot=void 0,i(12)),a=i(27),h=i(48),i=(s=a.BasicScene,n(l,s),l.prototype.preload=function(){},l.prototype.create=function(){r.AzerionSDK.addListeners(),this.scene.start(h.Preloader.Name)},l.Name="boot",l);function l(){return null!==s&&s.apply(this,arguments)||this}e.Boot=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.CurrencyPanel=void 0,i(0)),a=i(16),h=i(13),l=i(1),c=i(4),u=i(2),d=i(20),p=i(31),i=(s=l.JDContainer,n(f,s),f.prototype.addCurrency=function(t,e){void 0===e&&(e=!1),this.coins+=t,this.updateCoins(this.coins),u.SaveData.setItem(a.SaveTypes.coins,this.coins)},f.prototype.getMoreCoins=function(){var t=this;this.scene.popUpManager.open(d.PopUpList.RewardAD,{type:a.RewardType.coins,onComplete:function(){return t.addCurrency(u.GameData.coinsForAD,!0)}})},f.prototype.enouthMoney=function(t){return this.coins>=t},f.prototype.needCurrency=function(){},f.prototype.updateCoins=function(t){this.txtCoins.text=p.Helpers.moneyDecorator(t)},f.prototype.getCoinIconX=function(){return this.x+this.icon.x},f.prototype.resize=function(){c.AlignTo.rightTop(this,100,100)},f.prototype.destroy=function(t){s.prototype.destroy.call(this,t),this.scene=null,this.bg=null,this.icon=null,this.btnAdd=null,this.txtCoins=null},f);function f(t){var e=s.call(this,t)||this;return e.coins=0,e.bg=new l.JDImage(t,0,0,r.Atlases.ui,"currency-panel"),e.bg.setOrigin(1,.5),e.add(e.bg),e.icon=new l.JDImage(t,-e.bg.displayWidth,0,r.Atlases.ui,"coin-icon"),e.add(e.icon),e.btnAdd=new h.ButtonScaleImage(t,0,0,r.Atlases.ui,"ads-icon"),e.btnAdd.onUp=function(){return e.getMoreCoins()},e.add(e.btnAdd.getView()),e.txtCoins=new l.JDBmpdTextFit(t,-e.bg.displayWidth/2,0,r.Fonts.Main,"",40),e.txtCoins.setFitSize(150),e.add(e.txtCoins),e.coins=u.SaveData.getItemNumber(a.SaveTypes.coins),e.updateCoins(e.coins),e}e.CurrencyPanel=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=(Object.defineProperty(e,"__esModule",{value:!0}),e.JDSprite=void 0,s=Phaser.GameObjects.Sprite,n(r,s),r);function r(){return null!==s&&s.apply(this,arguments)||this}e.JDSprite=n},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=(Object.defineProperty(e,"__esModule",{value:!0}),e.JDContainer=void 0,s=Phaser.GameObjects.Container,n(r,s),r);function r(){return null!==s&&s.apply(this,arguments)||this}e.JDContainer=n},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.JDImageAnimAdobe=void 0,s=i(36).JDImageAnim,n(r,s),r.prototype.applyFrame=function(t,e){e<10&&(t+="0"),s.prototype.applyFrame.call(this,t+"00",e)},r);function r(){return null!==s&&s.apply(this,arguments)||this}e.JDImageAnimAdobe=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.JDImageAnimDelay=void 0,s=i(36).JDImageAnim,n(r,s),r.prototype.setDelay=function(t){this.counterDelay=0,this.delay=t},r.prototype.updateAnimation=function(){this.counterDelay<this.delay?this.counterDelay+=1:s.prototype.updateAnimation.call(this)},r.prototype.onCompleted=function(){this.counterDelay=0,s.prototype.onCompleted.call(this)},r);function r(){var t=null!==s&&s.apply(this,arguments)||this;return t.counterDelay=0,t.delay=-1,t}e.JDImageAnimDelay=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.JDBmpdTextTranslated=void 0,i(2)),i=(s=i(50).JDBmpdTextFit,n(a,s),a.prototype.setText=function(t){return s.prototype.setText.call(this,r.Localization.getText(t)),this},a.prototype.setTextAfter=function(t,e){return s.prototype.setText.call(this,r.Localization.getText(t)+e),this},a);function a(){return null!==s&&s.apply(this,arguments)||this}e.JDBmpdTextTranslated=i},function(t,e,i){"use strict";var o,c,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),u=(Object.defineProperty(e,"__esModule",{value:!0}),e.JDBmpdTextStroke=void 0,i(1)),d=i(37),p=i(11),i=(c=Phaser.GameObjects.Container,s(n,c),n.prototype.setTextPos=function(t,e){this.txt.x=t,this.txt.y=e,this.txtStroke.x=t,this.txtStroke.y=e},n.prototype.setOrigin=function(t,e){this.txtStroke.setOrigin(t,e),this.txt.setOrigin(t,e)},n.prototype.setColor=function(t,e){this.txtStroke.setColor(e),this.txt.setColor(t)},Object.defineProperty(n.prototype,"text",{get:function(){return this.txtStroke.text},set:function(t){this.txtStroke.text=t,this.updateTxt()},enumerable:!1,configurable:!0}),n.prototype.setText=function(t){this.text=t},n.prototype.setFont=function(t){this.txtStroke.setFont(t+"Stroke"),this.txt.setFont(t)},n.prototype.setFontSize=function(t){this.txtStroke.setFontSize(t),this.txt.setFontSize(t)},n.prototype.setFitSize=function(t,e,i){void 0===e&&(e=p.JDTextFitParam.size),this.txtStroke.setFitSize(t,e,i=void 0===i?0:i),this.updateTxt()},n.prototype.updateTxt=function(){this.txt.fontSize=this.txtStroke.fontSize,""===this.txtStroke.getTextBounds().wrappedText?this.txt.text=this.txtStroke.text:this.txt.text=this.txtStroke.getTextBounds().wrappedText},n.prototype.destroy=function(t){c.prototype.destroy.call(this,t),this.txtStroke=null,this.txt=null},n);function n(t,e,i,o,s,n,r,a,h,l){void 0===r&&(r=16777215),void 0===a&&(a=0),void 0===h&&(h=1),void 0===l&&(l=p.JDTextType.translated);e=c.call(this,t,e,i)||this;return l===p.JDTextType.text?e.txtStroke=new d.JDBmpdText(t,0,0,o+"Stroke",s,n,a,h):l===p.JDTextType.fit?e.txtStroke=new u.JDBmpdTextFit(t,0,0,o+"Stroke",s,n,a,h):l===p.JDTextType.translated&&(e.txtStroke=new u.JDBmpdTextTranslated(t,0,0,o+"Stroke",s,n,a,h)),e.add(e.txtStroke),e.txt=new d.JDBmpdText(t,0,0,o,s,n,r,h),e.add(e.txt),e.txt.text=e.txtStroke.text,e}e.JDBmpdTextStroke=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JDRender=void 0;var o=i(53);function s(){}s.init=function(t,e){void 0===e&&(e=!1),t.renderer.type!==Phaser.CANVAS&&!0===e&&o.PipelineManager.init(t)},e.JDRender=s},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=(Object.defineProperty(e,"__esModule",{value:!0}),e.PLBlur=void 0,s=Phaser.Renderer.WebGL.Pipelines.SinglePipeline,n(r,s),r.prototype.onBoot=function(){this.set1f("blurX",0),this.set1f("blurY",0)},r.prototype.onBind=function(t){s.prototype.onBind.call(this);t=t.pipelineData;void 0!==t.blurX&&this.set1f("blurX",t.blurX),void 0!==t.blurY&&this.set1f("blurY",t.blurY)},r.prototype.onBatch=function(t){t&&this.flush()},r.setBlur=function(t,e,i){t.pipelineData.blurX=e*r.blurCoef,t.pipelineData.blurY=i*r.blurCoef},r.blurCoef=1/7e3,r);function r(t){return s.call(this,{game:t,fragShader:"precision mediump float;\n            varying vec2 outTexCoord;\n            varying vec4 vColor;\n            uniform float blurX;\n            uniform float blurY;\n            uniform sampler2D uSampler;\n\n            void main(void) {\n                vec4 sum = vec4(0.0);\n\n                sum += texture2D(uSampler, vec2(outTexCoord.x - 4.0*blurX, outTexCoord.y - 4.0*blurY)) * 0.05;\n                sum += texture2D(uSampler, vec2(outTexCoord.x - 3.0*blurX, outTexCoord.y - 3.0*blurY)) * 0.09;\n                sum += texture2D(uSampler, vec2(outTexCoord.x - 2.0*blurX, outTexCoord.y - 2.0*blurY)) * 0.12;\n                sum += texture2D(uSampler, vec2(outTexCoord.x - blurX, outTexCoord.y - blurY)) * 0.15;\n\n                sum += texture2D(uSampler, vec2(outTexCoord.x, outTexCoord.y)) * 0.16;\n\n                sum += texture2D(uSampler, vec2(outTexCoord.x + blurX, outTexCoord.y + blurY)) * 0.15;\n                sum += texture2D(uSampler, vec2(outTexCoord.x + 2.0*blurX, outTexCoord.y + 2.0*blurY)) * 0.12;\n                sum += texture2D(uSampler, vec2(outTexCoord.x + 3.0*blurX, outTexCoord.y + 3.0*blurY)) * 0.09;\n                sum += texture2D(uSampler, vec2(outTexCoord.x + 4.0*blurX, outTexCoord.y + 4.0*blurY)) * 0.05;\n\n                gl_FragColor = sum;\n            }",uniforms:["blurX","blurY"]})||this}e.PLBlur=n},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=(Object.defineProperty(e,"__esModule",{value:!0}),e.PLPivotSkew=void 0,s=Phaser.Renderer.WebGL.Pipelines.MultiPipeline,n(_,s),_.prototype.batchSprite=function(t,e,i){this.manager.set(this,t);var o=this._tempMatrix1,s=this._tempMatrix2,n=this._tempMatrix3,r=t.frame,a=r.glTexture,h=r.u0,l=r.v0,c=r.u1,u=r.v1,d=r.x,p=r.y,f=r.cutWidth,b=r.cutHeight,y=r.customPivot,m=t.displayOriginX,x=t.displayOriginY,d=-m+d,p=-x+p,g=(t.isCropped&&((g=t._crop).flipX===t.flipX&&g.flipY===t.flipY||r.updateCropUVs(g,t.flipX,t.flipY),h=g.u0,l=g.v0,c=g.u1,u=g.v1,f=g.width,b=g.height,d=-m+g.x,p=-x+g.y),1),v=1,m=(t.flipX&&(y||(d+=-r.realWidth+2*m),g=-1),(t.flipY||r.source.isGLTexture&&!a.flipY)&&(y||(p+=-r.realHeight+2*x),v=-1),_.calculateMatrix(t,g,v,o,s,n,e,i),d+f),y=p+b,x=e.roundPixels,g=n.getXRound(d,p,x),v=n.getYRound(d,p,x),o=n.getXRound(d,y,x),s=n.getYRound(d,y,x),i=n.getXRound(m,y,x),f=n.getYRound(m,y,x),b=n.getXRound(m,p,x),d=n.getYRound(m,p,x),y=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha,n=e.alpha,m=y(t.tintTopLeft,n*t._alphaTL),p=y(t.tintTopRight,n*t._alphaTR),x=y(t.tintBottomLeft,n*t._alphaBL),e=y(t.tintBottomRight,n*t._alphaBR),y=(this.shouldFlush(6)&&this.flush(),this.setGameObject(t,r));this.manager.preBatch(t),this.batchQuad(t,g,v,o,s,i,f,b,d,h,l,c,u,m,p,x,e,t.tintFill,a,y),this.manager.postBatch(t)},_.calculateMatrix=function(i,t,e,o,s,n,r,a){var h,l,c,u,d,p,f=i.scaleX*t,b=i.scaleY*e,t=i.x,e=i.y;function y(){var t,e;u=0!==i.rotation?(t=Math.cos(i.rotation),e=Math.sin(i.rotation),h=t*f,l=e*f,c=-e*b,t*b):(h=f,c=l=0,b)}(i.skewX||i.skewY)&&(d=i.rotation+i.skewX,(p=i.rotation+i.skewY)%_.PI2||d%_.PI2)?(d===i._cachedRotX&&p===i._cachedRotY||(i._cachedRotX=d,i._cachedRotY=p,i._crA=Math.cos(p),i._srB=Math.sin(p),i._srC=Math.sin(-d),i._crD=Math.cos(d)),h=i._crA*f,l=i._srB*f,c=i._srC*b,u=i._crD*b):y(),(i.pivotX||i.pivotY)&&(t+=i.pivotX*h+i.pivotY*c,e+=i.pivotX*l+i.pivotY*u),o.copyFrom(r.matrix),a?o.multiplyWithOffset(a,-r.scrollX*i.scrollFactorX,-r.scrollY*i.scrollFactorY):(t-=r.scrollX*i.scrollFactorX,e-=r.scrollY*i.scrollFactorY),s.setTransform(h,l,c,u,t,e),o.multiply(s,n)},_.PI2=2*Math.PI,_);function _(t){return s.call(this,{game:t})||this}e.PLPivotSkew=n},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=(Object.defineProperty(e,"__esModule",{value:!0}),e.PLColorMatrix=void 0,s=Phaser.Renderer.WebGL.Pipelines.SinglePipeline,n(r,s),r.prototype.onBoot=function(){this.set1fv("m",r._defaultColorMatrix)},r.prototype.onBind=function(t){s.prototype.onBind.call(this);t=t.pipelineData;t&&t.colorMatrix&&this.set1fv("m",t.colorMatrix)},r.prototype.onBatch=function(t){t&&this.flush()},r.brightness=function(t,e,i){this._loadMatrix(t,[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0],i=void 0===i?!1:i)},r.greyscale=function(t,e,i){this._loadMatrix(t,[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0],i=void 0===i?!1:i)},r.blackAndWhite=function(t,e){this._loadMatrix(t,[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e=void 0===e?!1:e)},r.hue=function(t,e,i){void 0===i&&(i=!1);var o=Math.cos(e),e=Math.sin(e),s=Math.sqrt(1/3);this._loadMatrix(t,[o+1/3*(1-o),1/3*(1-o)-s*e,1/3*(1-o)+s*e,0,0,1/3*(1-o)+s*e,o+1/3*(1-o),1/3*(1-o)-s*e,0,0,1/3*(1-o)-s*e,1/3*(1-o)+s*e,o+1/3*(1-o),0,0,0,0,0,1,0],i)},r.contrast=function(t,e,i){var e=(e=void 0===e?0:e)+1,o=-.5*(e-1);this._loadMatrix(t,[e,0,0,0,o,0,e,0,0,o,0,0,e,0,o,0,0,0,1,0],i=void 0===i?!1:i)},r.saturate=function(t,e,i){var e=2*(e=void 0===e?0:e)/3+1,o=-.5*(e-1);this._loadMatrix(t,[e,o,o,0,0,o,e,o,0,0,o,o,e,0,0,0,0,0,1,0],i=void 0===i?!1:i)},r.desaturate=function(t,e){this.saturate(t,-1,e=void 0===e?!1:e)},r.negative=function(t,e){this._loadMatrix(t,[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0],e=void 0===e?!1:e)},r.sepia=function(t,e){this._loadMatrix(t,[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e=void 0===e?!1:e)},r.technicolor=function(t,e){this._loadMatrix(t,[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e=void 0===e?!1:e)},r.polaroid=function(t,e){this._loadMatrix(t,[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e=void 0===e?!1:e)},r.toBGR=function(t,e){this._loadMatrix(t,[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e=void 0===e?!1:e)},r.kodachrome=function(t,e){this._loadMatrix(t,[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e=void 0===e?!1:e)},r.browni=function(t,e){this._loadMatrix(t,[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e=void 0===e?!1:e)},r.vintage=function(t,e){this._loadMatrix(t,[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e=void 0===e?!1:e)},r.colorTone=function(t,e,i,o,s,n){var r=((o=void 0===o?16770432:o)>>16&255)/255,a=(o>>8&255)/255,o=(255&o)/255,h=((s=void 0===s?3375104:s)>>16&255)/255,l=(s>>8&255)/255,s=(255&s)/255;this._loadMatrix(t,[.3,.59,.11,0,0,r,a,o,e=void 0===e?.2:e,0,h,l,s,i=void 0===i?.15:i,0,r-h,a-l,o-s,0,0],n=void 0===n?!1:n)},r.night=function(t,e,i){this._loadMatrix(t,[-2*(e=void 0===e?.1:e),-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0],i=void 0===i?!1:i)},r.predator=function(t,e,i){this._loadMatrix(t,[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0],i=void 0===i?!1:i)},r.lsd=function(t,e){this._loadMatrix(t,[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e=void 0===e?!1:e)},r.tint=function(t,e,i){this._loadMatrix(t,[(e>>16&255)/255,0,0,0,0,0,(e>>8&255)/255,0,0,0,0,0,(255&e)/255,0,0,0,0,0,1,0],i=void 0===i?!1:i)},r.reset=function(t){this._loadMatrix(t,r._defaultColorMatrix,!1)},r.kill=function(t,e,i){t.resetPipeline(e,i)},r._loadMatrix=function(t,e,i){!0===(i=void 0===i?!1:i)?(i=(i=t.pipelineData.colorMatrix)||r._defaultColorMatrix,this._multiply(e,i,e),t.pipelineData.colorMatrix=this._colorMatrix(e)):t.pipelineData.colorMatrix=e},r._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t},r._colorMatrix=function(t){return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t},r._defaultColorMatrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],r);function r(t){return s.call(this,{game:t,fragShader:"precision mediump float;\n        varying vec2 outTexCoord;\n        uniform sampler2D uSampler;\n        uniform float m[20];\n\n        void main(void)\n        {\n            vec4 c = texture2D(uSampler, outTexCoord);\n\n            // Un-premultiply alpha before applying the color matrix. See issue #3539.\n            if (c.a > 0.0) {\n              c.rgb /= c.a;\n            }\n\n            vec4 result;\n\n            result.r = (m[0] * c.r);\n                result.r += (m[1] * c.g);\n                result.r += (m[2] * c.b);\n                result.r += (m[3] * c.a);\n                result.r += m[4];\n\n            result.g = (m[5] * c.r);\n                result.g += (m[6] * c.g);\n                result.g += (m[7] * c.b);\n                result.g += (m[8] * c.a);\n                result.g += m[9];\n\n            result.b = (m[10] * c.r);\n               result.b += (m[11] * c.g);\n               result.b += (m[12] * c.b);\n               result.b += (m[13] * c.a);\n               result.b += m[14];\n\n            result.a = (m[15] * c.r);\n               result.a += (m[16] * c.g);\n               result.a += (m[17] * c.b);\n               result.a += (m[18] * c.a);\n               result.a += m[19];\n\n            vec3 rgb = mix(c.rgb, result.rgb, 1.0);\n\n            // Premultiply alpha again.\n            rgb *= result.a;\n\n            gl_FragColor = vec4(rgb, result.a);\n        }",uniforms:["m"]})||this}e.PLColorMatrix=n},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=(Object.defineProperty(e,"__esModule",{value:!0}),e.PLOutline=void 0,s=Phaser.Renderer.WebGL.Pipelines.PostFXPipeline,n(r,s),r.prototype.onBoot=function(){this.set2f("texSize",this.renderer.width,this.renderer.height)},r.prototype.onRender=function(t,e){s.prototype.onRender.call(this,t,e),this.set1f("thickness",this.thickness),this.set3f("outlineColor",this.color.redGL,this.color.greenGL,this.color.blueGL)},r.prototype.setData=function(t){this.thickness=t.thickness,this.color.setFromRGB(Phaser.Display.Color.IntegerToRGB(t.color))},r);function r(t){var e=this,i=Math.max(10,1),i=(2*Math.PI/i).toFixed(7),i="#ifdef GL_FRAGMENT_PRECISION_HIGH\n            #define highmedp highp\n            #else\n            #define highmedp mediump\n            #endif\n            precision highmedp float;\n            // Scene buffer\n            uniform sampler2D uMainSampler;\n            varying vec2 outTexCoord;\n            // Effect parameters\n            uniform vec2 texSize;\n            uniform float thickness;\n            uniform vec3 outlineColor;\n            const float DOUBLE_PI = 3.14159265358979323846264 * 2.0;\n            void main() {\n                vec4 front = texture2D(uMainSampler, outTexCoord);\n                if (thickness > 0.0) {\n                    vec2 mag = vec2(thickness/texSize.x, thickness/texSize.y);\n                    vec4 curColor;\n                    float maxAlpha = front.a;\n                    vec2 offset;\n                    for (float angle = 0.; angle < DOUBLE_PI; angle += #{angleStep}) {\n                        offset = vec2(mag.x * cos(angle), mag.y * sin(angle));\n                        curColor = texture2D(uMainSampler, outTexCoord + offset);\n                        maxAlpha = max(maxAlpha, curColor.a);\n                    }\n                    vec3 resultColor = front.rgb + (outlineColor.rgb * (1. - front.a)) * maxAlpha;\n                    gl_FragColor = vec4(resultColor, maxAlpha);\n                } else {\n                    gl_FragColor = front;\n                }\n            }".replace(/\#\{angleStep\}/,i);return(e=s.call(this,{game:t,renderTarget:!0,fragShader:i,uniforms:["thickness","outlineColor","texSize"]})||this).color=new Phaser.Display.Color,e.color.setFromRGB(Phaser.Display.Color.IntegerToRGB(16711680)),e.thickness=0,e}e.PLOutline=n},function(t,e,i){"use strict";var o,n,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.JDImageSkew=void 0,n=i(51).JDImagePivot,s(r,n),r.prototype.setSkew=function(t,e){this.skewX=t,this.skewY=e},Object.defineProperty(r.prototype,"skewX",{get:function(){return this._skewX},set:function(t){this._skewX=this.checkSkewValue(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"skewY",{get:function(){return this._skewY},set:function(t){this._skewY=this.checkSkewValue(t)},enumerable:!1,configurable:!0}),r.prototype.checkSkewValue=function(t){return t>Math.PI?t=-(Math.PI-(t-Math.PI)):t<-Math.PI&&(t=Math.PI+(t+Math.PI)),t},r);function r(t,e,i,o,s){t=n.call(this,t,e,i,o,s)||this;return t._skewX=0,t._skewY=0,t._srB=0,t._srC=0,t._crA=1,t._crD=1,t._cachedRotX=0,t._cachedRotY=0,t}e.JDImageSkew=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.JDTextTranslated=void 0,i(54)),a=i(28),i=(s=r.JDTextFit,n(h,s),h.prototype.setText=function(t){return this.setKey(t),this.updateTranslate(),this},h.prototype.setKey=function(t){this.key=t},h.prototype.getLocale=function(){return a.Localization.getText(this.key)},h.prototype.updateTranslate=function(){s.prototype.setText.call(this,this.getLocale())},h.prototype.setTextNoLocale=function(t){s.prototype.setText.call(this,t)},h);function h(){return null!==s&&s.apply(this,arguments)||this}e.JDTextTranslated=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InputDom=void 0;var o=i(55),s=i(39);function n(t){var e=this,t=(this.globalOffX=0,!(this.globalOffY=0)===t.device.os.iOS&&(this.globalOffX=-18,this.globalOffY=-8),this.srcMatrix=new Phaser.GameObjects.Components.TransformMatrix,this.camMatrix=new Phaser.GameObjects.Components.TransformMatrix,this.calcMatrix=new Phaser.GameObjects.Components.TransformMatrix,this.domInput=document.createElement("input"),t.domContainer.appendChild(this.domInput),this.domInput.addEventListener("input",function(t){var t=t.target,e=t.value;/^[a-zA-Z0-9\u00C0-\u024F\u0100-\u017F\u0180-\u024F\u0104\u0106\u0118\u0141\u0142\u0152\u0153\u0179\u017B\u017C\u017D\u00C0-\u00FF\u0101-\u017E\u0180-\u024F\u1E00-\u1EFF\u0152\u0153\u0160\u0161\u0178\u017D\u017E\u0202\u0203\u2018-\u201F\u00C0-\u00FF\u0100-\u017F\u0180-\u024F\u1E00-\u1EFF\u0152\u0153\u0160\u0161\u0178\u017D\u017E\u0202\u0203\u2018-\u201F\u0020!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~]*$/u.test(e)||(t.value=e.replace(/[^a-zA-Z0-9\u00C0-\u024F\u0100-\u017F\u0180-\u024F\u0104\u0106\u0118\u0141\u0142\u0152\u0153\u0179\u017B\u017C\u017D\u00C0-\u00FF\u0101-\u017E\u0180-\u024F\u1E00-\u1EFF\u0152\u0153\u0160\u0161\u0178\u017D\u017E\u0202\u0203\u2018-\u201F\u00C0-\u00FF\u0100-\u017F\u0180-\u024F\u1E00-\u1EFF\u0152\u0153\u0160\u0161\u0178\u017D\u017E\u0202\u0203\u2018-\u201F\u0020!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~]/gu,""))}),this.domInput.style);t.position="absolute",t.background="none",t.border="none",t.outline="none",t.display="none",t.pointerEvents="auto",t.zIndex="0",t.overflow="hidden",this.domInput.addEventListener("keydown",function(t){return e.onKeyDown(t)})}n.prototype.onKeyDown=function(t){"Enter"!==t.key&&"Escape"!==t.key||o.InputField.endFocus(),!0===o.InputField.blockInput&&t.stopPropagation&&t.stopPropagation(),!0===this.isNumber&&"Backspace"!==t.key&&"Delete"!==t.key&&!0===isNaN(Number(this.domInput.value+t.key))&&t.preventDefault()},n.prototype.focus=function(t,e){var i=this.domInput.style;i.fontSize=t.fontSize+"px",i.fontFamily=t.fontFamily,i.color=t.inputTextColor,i.textAlign=t.textAlign,this.domWidth=t.bgWidth-2*t.textBorderOffX,this.domHeight=t.bgHeight-2*t.textBorderOffY,i.width=this.domWidth+"px",i.height=this.domHeight+"px",i.display="block",t.type===s.JDTextInputType.number?(this.domInput.type=s.JDTextInputType.text,this.isNumber=!0):(this.domInput.type=t.type,this.isNumber=!1),this.domInput.maxLength=t.maxLength,this.domInput.value=e,this.domInput.focus()},n.prototype.blur=function(){this.domInput.style.display="none",this.domInput.blur(),this.domInput.value=""},n.prototype.getValue=function(){return this.domInput.value},n.prototype.render=function(t,e,i){var o=t.parentContainer,s=e.alpha*t.alpha,o=(o&&(s*=o.alpha),t.inputText),n=this.domInput.style,r=e.scrollX*t.scrollFactorX,a=e.scrollY*t.scrollFactorY,e=(this.camMatrix.copyFrom(e.matrix),this.domWidth*o.originX),h=this.domHeight*o.originY,e=t.x-e+o.x*t.scaleX+this.globalOffX,h=t.y-h+o.y*t.scaleY+this.globalOffY;this.srcMatrix.applyITRS(e,h,t.rotation,t.scaleX,t.scaleY),i?(this.camMatrix.multiplyWithOffset(i,-r,-a),n.transformOrigin="0% 0%"):(this.camMatrix.translate(-r,-a),n.transformOrigin=100*o.originX+"% "+100*o.originY+"%"),this.camMatrix.multiply(this.srcMatrix,this.calcMatrix),n.opacity=""+s,n.transform=this.calcMatrix.getCSSMatrix()},e.InputDom=n},function(t,e,i){"use strict";var o,a,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=(Object.defineProperty(e,"__esModule",{value:!0}),e.InputBox=void 0,i(49)),h=i(56),i=(a=n.JDGraphics,s(r,a),r.prototype.drawBg=function(t,e,i,o,s,n,r){this.fillStyle(t,r=void 0===r?1:r),0<n?this.fillRoundedRect(e,i,o,s,n):this.fillRect(e,i,o,s)},r.prototype.drawBorder=function(t,e,i,o,s,n,r){this.lineStyle(t,e,1),0<r?this.strokeRoundedRect(i,o,s,n,r):this.strokeRect(i,o,s,n)},r);function r(t,e,i,o){var t=a.call(this,t)||this,s=e.bgWidth,n=e.bgHeight,r=e.bgRadius,i=-s*i,o=-n*o;return e.bgShow===h.JDTextInputBg.none?t.drawBg(e.bgColor,i,o,s,n,r=0,0):e.bgShow===h.JDTextInputBg.both?(t.drawBg(e.bgColor,i,o,s,n,r),t.drawBorder(e.bgBorderThickness,e.bgBorderColor,i,o,s,n,r)):e.bgShow===h.JDTextInputBg.bg?t.drawBg(e.bgColor,i,o,s,n,r):e.bgShow===h.JDTextInputBg.border&&t.drawBorder(e.bgBorderThickness,e.bgBorderColor,i,o,s,n,r),t.setInteractive(new Phaser.Geom.Rectangle(i,o,s,n),Phaser.Geom.Rectangle.Contains),t.input.cursor="text",t}e.InputBox=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.ButtonScale=void 0,s=i(34).ButtonContainer,n(r,s),r.prototype.setScalePressState=function(t,e){this.scaleDown=t,this.scaleUp=e,this.upState()},r.prototype.downState=function(){this.view.scale=this.scaleDown},r.prototype.upState=function(){!0!==this.isOver?this.view.scale=this.scaleUp:this.view.scale=this.scaleOver},r);function r(){var t=null!==s&&s.apply(this,arguments)||this;return t.scaleDown=.9,t.scaleUp=1,t}e.ButtonScale=i},function(t,e,i){"use strict";var o,a,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),h=(Object.defineProperty(e,"__esModule",{value:!0}),e.ButtonSound=void 0,i(2)),n=i(18),i=(a=i(57).ButtonScaleImage,s(r,a),r.prototype.upState=function(){a.prototype.upState.call(this),!0===this.isEnable?this.interactiveElement.setFrame(this.frameOn):this.interactiveElement.setFrame(this.frameOff)},r.prototype.upComplete=function(){this.sType===n.SoundType.Music?h.SoundManager.changeEnabledMusic():this.sType===n.SoundType.SFX&&h.SoundManager.changeEnabledSFX(),this.isEnable=!this.isEnable,this.upState()},r);function r(t,e,i,o,s,n,r){t=a.call(this,t,e,i,o)||this;return t.sType=r,t.isEnable=h.SoundManager.getEnabled(t.sType),t.frameOn=s,t.frameOff=n,t.upState(),t}e.ButtonSound=i},function(t,e,i){"use strict";var o,r,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.ButtonFrame=void 0,r=i(40).ButtonImage,s(n,r),n.prototype.downState=function(){this.view.setFrame(this.frameDown)},n.prototype.upState=function(){this.view.setFrame(this.frameUp)},n);function n(t,e,i,o,s,n){t=r.call(this,t,e,i,o,s)||this;return t.frameUp=s,t.frameDown=n,t}e.ButtonFrame=i},function(t,e,i){"use strict";var o,r,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.ButtonContainerFrame=void 0,r=i(34).ButtonContainer,s(n,r),n.prototype.setFrames=function(t,e){this.frameUp=t,this.frameDown=e,this.upState()},n.prototype.downState=function(){this.image.setFrame(this.frameDown)},n.prototype.upState=function(){this.image.setFrame(this.frameUp)},n);function n(t,e,i,o,s,n){t=r.call(this,t,e,i)||this;return t.addImageEvents(o,s),t.frameUp=s,t.frameDown=n,t}e.ButtonContainerFrame=i},function(t,e,i){"use strict";var o,c,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),u=(Object.defineProperty(e,"__esModule",{value:!0}),e.ButtonText=void 0,i(11)),d=i(1),i=(c=i(30).BaseButton,s(n,c),n);function n(t,e,i,o,s,n,r,a,h){void 0===r&&(r=16777215),void 0===a&&(a=1),void 0===h&&(h=u.JDTextType.translated);var l=c.call(this,t)||this;return h===u.JDTextType.text?l.view=new d.JDBmpdText(t,e,i,o,s,n,r,a):h===u.JDTextType.fit?l.view=new d.JDBmpdTextFit(t,e,i,o,s,n,r,a):h===u.JDTextType.translated&&(l.view=new d.JDBmpdTextTranslated(t,e,i,o,s,n,r,a)),l.createView(l.view),l.initEvents(l.view),l}e.ButtonText=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PopUpVictory=e.PopUpRewardAD=e.PopUpLanguage=e.PopUpSettings=e.PopUpPause=e.PopUpBase=void 0;var o=i(21),s=(Object.defineProperty(e,"PopUpBase",{enumerable:!0,get:function(){return o.PopUpBase}}),i(113)),n=(Object.defineProperty(e,"PopUpPause",{enumerable:!0,get:function(){return s.PopUpPause}}),i(114)),r=(Object.defineProperty(e,"PopUpSettings",{enumerable:!0,get:function(){return n.PopUpSettings}}),i(115)),a=(Object.defineProperty(e,"PopUpLanguage",{enumerable:!0,get:function(){return r.PopUpLanguage}}),i(116)),h=(Object.defineProperty(e,"PopUpRewardAD",{enumerable:!0,get:function(){return a.PopUpRewardAD}}),i(117));Object.defineProperty(e,"PopUpVictory",{enumerable:!0,get:function(){return h.PopUpVictory}})},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__awaiter||function(t,r,a,h){return new(a=a||Promise)(function(i,e){function o(t){try{n(h.next(t))}catch(t){e(t)}}function s(t){try{n(h.throw(t))}catch(t){e(t)}}function n(t){var e;t.done?i(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(o,s)}n((h=h.apply(t,r||[])).next())})},a=this&&this.__generator||function(o,s){var n,r,a,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},l={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function t(i){return function(t){var e=[i,t];if(n)throw new TypeError("Generator is already executing.");for(;h=l&&e[l=0]?0:h;)try{if(n=1,r&&(a=2&e[0]?r.return:e[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,e[1])).done)return a;switch(r=0,(e=a?[2&e[0],a.value]:e)[0]){case 0:case 1:a=e;break;case 4:return h.label++,{value:e[1],done:!1};case 5:h.label++,r=e[1],e=[0];continue;case 7:e=h.ops.pop(),h.trys.pop();continue;default:if(!((a=0<(a=h.trys).length&&a[a.length-1])||6!==e[0]&&2!==e[0])){h=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3]))h.label=e[1];else if(6===e[0]&&h.label<a[1])h.label=a[1],a=e;else{if(!(a&&h.label<a[2])){a[2]&&h.ops.pop(),h.trys.pop();continue}h.label=a[2],h.ops.push(e)}}e=s.call(o,h)}catch(t){e=[6,t],r=0}finally{n=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},h=(Object.defineProperty(e,"__esModule",{value:!0}),e.PopUpPause=void 0,i(12)),l=i(0),c=i(13),u=i(9),d=i(1),p=i(4),f=i(2),b=i(18),i=(s=i(21).PopUpBase,n(y,s),y.prototype.init=function(){var t=this,e=(this.bg=new d.JDImage(this.scene,u.CustomResize.GHW,u.CustomResize.GHH,"background-seperator-1"),this.bg.setInteractive(),this.add(this.bg),this.txtTitle=new d.JDBmpdTextTranslated(this.scene,u.CustomResize.GHW,0,l.Fonts.Main,"pause",112),this.add(this.txtTitle),this.btnClose=new c.ButtonScaleImage(this.scene,0,0,l.Atlases.ui,"exit-button"),this.btnClose.onUp=function(){return t.closeAD()},this.add(this.btnClose.getView()),p.AlignTo.getCenterY(-170));this.txtMusic=new d.JDBmpdTextTranslated(this.scene,p.AlignTo.getCenterX(-470),e,l.Fonts.Main,"music",78,16777215,0),this.txtMusic.setFitSize(500),this.add(this.txtMusic),this.btnMusic=new c.ButtonScale(this.scene,p.AlignTo.getCenterX(330),this.txtMusic.y),this.btnMusic.addImageEvents(l.Atlases.ui,"switch-on-back"),this.btnMusic.addIcon(l.Atlases.ui,"switch-button"),this.btnMusic.addTxtTranslated("",l.Fonts.Main,52),this.btnMusic.txtTranslated.setFitSize(130),this.btnMusic.onUp=function(){return t.switchMusic()},this.add(this.btnMusic.getView()),this.txtSfx=new d.JDBmpdTextTranslated(this.scene,this.txtMusic.x,this.txtMusic.y+220,l.Fonts.Main,"sfx",78,16777215,0),this.txtSfx.setFitSize(500),this.add(this.txtSfx),this.btnSfx=new c.ButtonScale(this.scene,this.btnMusic.x,this.txtSfx.y),this.btnSfx.addImageEvents(l.Atlases.ui,"switch-on-back"),this.btnSfx.addIcon(l.Atlases.ui,"switch-button"),this.btnSfx.addTxtTranslated("",l.Fonts.Main,52),this.btnSfx.txtTranslated.setFitSize(130),this.btnSfx.onUp=function(){return t.switchSfx()},this.add(this.btnSfx.getView()),this.btnHome=new c.ButtonScale(this.scene,p.AlignTo.getCenterX(-280),0),this.btnHome.addImageEvents(l.Atlases.ui,"red-button"),this.btnHome.addIcon(l.Atlases.ui,"home-icon",0,-3),this.btnHome.addTxtStroke("home",l.Fonts.Main,52,16777215,3421236),this.btnHome.txtStroke.setFitSize(300),this.btnHome.onUp=function(){return r(t,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,h.AzerionSDK.showInterstitialAd()];case 1:return t.sent(),this.scene.exitFromPause(),[2]}})})},this.add(this.btnHome.getView()),this.btnRestart=new c.ButtonScale(this.scene,p.AlignTo.getCenterX(280),0),this.btnRestart.addImageEvents(l.Atlases.ui,"green-button"),this.btnRestart.addIcon(l.Atlases.ui,"restart-icon"),this.btnRestart.addTxtStroke("restart",l.Fonts.Main,52,16777215,3421236),this.btnRestart.txtStroke.setFitSize(300),this.btnRestart.onUp=function(){return r(t,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,h.AzerionSDK.showInterstitialAd()];case 1:return t.sent(),this.scene.restartLevel(),[2]}})})},this.add(this.btnRestart.getView()),this.btnHome.setScalePressState(.9*l.Constants.ADDITIONAL_PANEL_BUTTON_SCALE,l.Constants.ADDITIONAL_PANEL_BUTTON_SCALE),this.btnRestart.setScalePressState(.9*l.Constants.ADDITIONAL_PANEL_BUTTON_SCALE,l.Constants.ADDITIONAL_PANEL_BUTTON_SCALE),this.fit2obj(this.btnHome.icon,this.btnHome.txtStroke,25),this.fit2obj(this.btnRestart.icon,this.btnRestart.txtStroke,25)},y.prototype.fit2obj=function(t,e,i){i=t.width+e.txtStroke.width+i;t.x=-i/2+t.width/2,e.x=i/2-e.txtStroke.width/2},y.prototype.show=function(){s.prototype.show.call(this),this.setFrameSfx(),this.setFrameMusic()},y.prototype.switchSfx=function(){f.SoundManager.setEnabled(b.SoundType.SFX),this.setFrameSfx()},y.prototype.setFrameSfx=function(){!0===f.SoundManager.getEnabled(b.SoundType.SFX)?(this.btnSfx.image.setFrame("switch-on-back"),this.btnSfx.txtTranslated.text="on",this.btnSfx.txtTranslated.x=-70,this.btnSfx.icon.x=77):(this.btnSfx.image.setFrame("switch-off-back"),this.btnSfx.txtTranslated.text="off",this.btnSfx.txtTranslated.x=70,this.btnSfx.icon.x=-77)},y.prototype.switchMusic=function(){f.SoundManager.setEnabled(b.SoundType.Music),this.setFrameMusic()},y.prototype.setFrameMusic=function(){!0===f.SoundManager.getEnabled(b.SoundType.Music)?(this.btnMusic.image.setFrame("switch-on-back"),this.btnMusic.txtTranslated.text="on",this.btnMusic.txtTranslated.x=-70,this.btnMusic.icon.x=77):(this.btnMusic.image.setFrame("switch-off-back"),this.btnMusic.txtTranslated.text="off",this.btnMusic.txtTranslated.x=70,this.btnMusic.icon.x=-77)},y.prototype.resize=function(){p.AlignTo.fitScreen(this.bg),p.AlignTo.top(this.txtTitle,100),p.AlignTo.rightTop(this.btnClose,100,100),this.btnHome.y=p.AlignTo.getBot(150),this.btnRestart.y=this.btnHome.y},y.prototype.destroy=function(){s.prototype.destroy.call(this),this.bg=null,this.txtTitle=null,this.btnClose=null,this.btnHome=null,this.btnRestart=null},y);function y(){return null!==s&&s.apply(this,arguments)||this}e.PopUpPause=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.PopUpSettings=void 0,i(0)),a=i(13),h=i(9),l=i(1),c=i(4),u=i(2),d=i(18),p=i(21),f=i(20),i=(s=p.PopUpBase,n(b,s),b.prototype.init=function(){var t=this,e=(this.bg=new l.JDImage(this.scene,h.CustomResize.GHW,h.CustomResize.GHH,"background-seperator-1"),this.bg.setInteractive(),this.add(this.bg),this.txtTitle=new l.JDBmpdTextTranslated(this.scene,h.CustomResize.GHW,0,r.Fonts.Main,"settings",112),this.txtTitle.setFitSize(1200),this.add(this.txtTitle),this.btnClose=new a.ButtonScaleImage(this.scene,0,0,r.Atlases.ui,"exit-button"),this.btnClose.onUp=function(){return t.closeAD()},this.add(this.btnClose.getView()),c.AlignTo.getCenterY(-170));this.txtMusic=new l.JDBmpdTextTranslated(this.scene,c.AlignTo.getCenterX(-470),e,r.Fonts.Main,"music",78,16777215,0),this.txtMusic.setFitSize(500),this.add(this.txtMusic),this.btnMusic=new a.ButtonScale(this.scene,c.AlignTo.getCenterX(330),this.txtMusic.y),this.btnMusic.addImageEvents(r.Atlases.ui,"switch-on-back"),this.btnMusic.addIcon(r.Atlases.ui,"switch-button"),this.btnMusic.addTxtTranslated("",r.Fonts.Main,52),this.btnMusic.txtTranslated.setFitSize(130),this.btnMusic.onUp=function(){return t.switchMusic()},this.add(this.btnMusic.getView()),this.txtSfx=new l.JDBmpdTextTranslated(this.scene,this.txtMusic.x,this.txtMusic.y+220,r.Fonts.Main,"sfx",78,16777215,0),this.txtSfx.setFitSize(500),this.add(this.txtSfx),this.btnSfx=new a.ButtonScale(this.scene,this.btnMusic.x,this.txtSfx.y),this.btnSfx.addImageEvents(r.Atlases.ui,"switch-on-back"),this.btnSfx.addIcon(r.Atlases.ui,"switch-button"),this.btnSfx.addTxtTranslated("",r.Fonts.Main,52),this.btnSfx.txtTranslated.setFitSize(130),this.btnSfx.onUp=function(){return t.switchSfx()},this.add(this.btnSfx.getView()),!0===r.Constants.SHOW_BUTTON_LANGUAGES&&(this.txtLng=new l.JDBmpdTextTranslated(this.scene,this.txtMusic.x,this.txtSfx.y+220,r.Fonts.Main,"language",78,16777215,0),this.txtLng.setFitSize(500),this.add(this.txtLng),this.btnLng=new a.ButtonScale(this.scene,this.btnMusic.x+70,this.txtLng.y),this.btnLng.addImageEvents(r.Atlases.ui,"language-button"),this.btnLng.addIcon(r.Atlases.ui,"flag-en",-140,-3),this.btnLng.icon.scale=.87,this.btnLng.addTxtTranslated("",r.Fonts.Main,50,4013373,1,52),this.btnLng.txtTranslated.setFitSize(270),this.btnLng.onUp=function(){return t.panelManager.open(f.PopUpList.Language)},this.add(this.btnLng.getView()))},b.prototype.show=function(){s.prototype.show.call(this),this.setFrameSfx(),this.setFrameMusic(),this.txtLng&&(this.btnLng.txtTranslated.text="lng",this.btnLng.icon.setFrame("flag-"+u.Localization.getLng()))},b.prototype.switchSfx=function(){u.SoundManager.setEnabled(d.SoundType.SFX),this.setFrameSfx()},b.prototype.setFrameSfx=function(){!0===u.SoundManager.getEnabled(d.SoundType.SFX)?(this.btnSfx.image.setFrame("switch-on-back"),this.btnSfx.txtTranslated.text="on",this.btnSfx.txtTranslated.x=-70,this.btnSfx.icon.x=77):(this.btnSfx.image.setFrame("switch-off-back"),this.btnSfx.txtTranslated.text="off",this.btnSfx.txtTranslated.x=70,this.btnSfx.icon.x=-77)},b.prototype.switchMusic=function(){u.SoundManager.setEnabled(d.SoundType.Music),this.setFrameMusic()},b.prototype.setFrameMusic=function(){!0===u.SoundManager.getEnabled(d.SoundType.Music)?(this.btnMusic.image.setFrame("switch-on-back"),this.btnMusic.txtTranslated.text="on",this.btnMusic.txtTranslated.x=-70,this.btnMusic.icon.x=77):(this.btnMusic.image.setFrame("switch-off-back"),this.btnMusic.txtTranslated.text="off",this.btnMusic.txtTranslated.x=70,this.btnMusic.icon.x=-77)},b.prototype.resize=function(){c.AlignTo.fitScreen(this.bg),c.AlignTo.top(this.txtTitle,100),c.AlignTo.rightTop(this.btnClose,100,100)},b.prototype.destroy=function(){s.prototype.destroy.call(this),this.bg=null,this.txtTitle=null,this.btnClose=null},b);function b(){return null!==s&&s.apply(this,arguments)||this}e.PopUpSettings=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=(Object.defineProperty(e,"__esModule",{value:!0}),e.PopUpLanguage=void 0,i(0)),c=i(13),u=i(9),d=i(1),p=i(4),f=i(2),i=(s=i(21).PopUpBase,n(r,s),r.prototype.init=function(){var i=this;this.bg=new d.JDImage(this.scene,u.CustomResize.GHW,u.CustomResize.GHH,"background-seperator-1"),this.bg.setInteractive(),this.add(this.bg),this.txtTitle=new d.JDBmpdTextTranslated(this.scene,u.CustomResize.GHW,0,l.Fonts.Main,"selectLang",112),this.txtTitle.setFitSize(1200),this.add(this.txtTitle),this.btnClose=new c.ButtonScaleImage(this.scene,0,0,l.Atlases.ui,"exit-button"),this.btnClose.onUp=function(){return i.closeAD()},this.add(this.btnClose.getView());for(var o,s=p.AlignTo.getCenterX(-300),n=p.AlignTo.getCenterY(-100),r=s,a=l.Constants.AVAILABLE_LANGUAGES,h=this,t=0;t<a.length;t++)!function(t){var e=a[t];o=new c.ButtonScale(h.scene,r,n),f.Localization.getLng()===e?o.addImageEvents(l.Atlases.ui,"language-box-selected"):o.addImageEvents(l.Atlases.ui,"language-box-standard"),o.addIcon(l.Atlases.ui,"flag-"+e,-200,-3),o.addTxt(f.Localization.getLngText(e,"lng"),l.Fonts.Main,50,4013373,1,50),o.onUp=function(){return i.changeLang(e)},h.add(o.getView()),r+=620,(t+1)%2==0&&(r=s,n+=180)}(t);o=null},r.prototype.changeLang=function(t){f.Localization.getLng()!==t&&(f.Localization.setLng(t),this.scene.scene.restart()),this.close()},r.prototype.resize=function(){p.AlignTo.fitScreen(this.bg),p.AlignTo.top(this.txtTitle,100),p.AlignTo.rightTop(this.btnClose,100,100)},r.prototype.destroy=function(){s.prototype.destroy.call(this),this.bg=null,this.txtTitle=null,this.btnClose=null},r);function r(){return null!==s&&s.apply(this,arguments)||this}e.PopUpLanguage=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.PopUpRewardAD=void 0,i(12)),a=i(0),h=i(16),l=i(11),c=i(13),u=i(9),d=i(1),p=i(4),f=i(2),i=(s=i(21).PopUpBase,n(b,s),b.prototype.init=function(e){var i=this,t=(this.bg=new d.JDImage(this.scene,u.CustomResize.GHW,u.CustomResize.GHH,"background-seperator-1"),this.bg.setInteractive(),this.add(this.bg),e.type===h.RewardType.ad?this.icon=new d.JDImage(this.scene,u.CustomResize.GHW,u.CustomResize.GHH-160,a.Atlases.ui,"ads-image"):(this.txtTitle=new d.JDBmpdTextTranslated(this.scene,u.CustomResize.GHW,0,a.Fonts.Main,"extraCoins",112),this.txtTitle.setFitSize(1200),this.add(this.txtTitle),this.icon=new d.JDImage(this.scene,0,u.CustomResize.GHH-160,a.Atlases.ui,"coins-image"),this.txtIcon=new d.JDBmpdTextStroke(this.scene,0,this.icon.y,a.Fonts.Main,"+"+f.GameData.coinsForAD,180,16777215,4013373,1,l.JDTextType.text),this.add(this.txtIcon),t=this.icon.width+this.txtIcon.txtStroke.width+50,this.icon.x=u.CustomResize.GHW+t/2-this.icon.width/2,this.txtIcon.x=u.CustomResize.GHW-t/2+this.txtIcon.txtStroke.width/2),this.add(this.icon),new d.JDBmpdTextTranslated(this.scene,u.CustomResize.GHW,u.CustomResize.GHH+150,a.Fonts.Main,"watchAdDes",52));t.setFitSize(600,l.JDTextFitParam.both,200),this.add(t),this.btnNo=new c.ButtonScale(this.scene,p.AlignTo.getCenterX(-240),0),this.btnNo.addImageEvents(a.Atlases.ui,"red-button-small"),this.btnNo.addTxtStroke("no",a.Fonts.Main,64,16777215,3421236),this.btnNo.onUp=function(){return i.close()},this.add(this.btnNo.getView()),this.btnYes=new c.ButtonScale(this.scene,p.AlignTo.getCenterX(240),0),this.btnYes.addImageEvents(a.Atlases.ui,"orange-button-small"),this.btnYes.addTxtStroke("yes",a.Fonts.Main,64,16777215,3421236),this.btnYes.onUp=function(){return r.AzerionSDK.showRewardedAd("",function(t){i.close(),!0===t&&e.onComplete()})},this.add(this.btnYes.getView()),this.btnNo.setScalePressState(.9*a.Constants.ADDITIONAL_PANEL_BUTTON_SCALE,a.Constants.ADDITIONAL_PANEL_BUTTON_SCALE),this.btnYes.setScalePressState(.9*a.Constants.ADDITIONAL_PANEL_BUTTON_SCALE,a.Constants.ADDITIONAL_PANEL_BUTTON_SCALE)},b.prototype.resize=function(){p.AlignTo.fitScreen(this.bg),this.txtTitle&&p.AlignTo.top(this.txtTitle,100),this.btnNo.y=p.AlignTo.getBot(150),this.btnYes.y=this.btnNo.y},b.prototype.destroy=function(){s.prototype.destroy.call(this),this.bg=null,this.txtTitle=null,this.btnNo=null,this.btnYes=null,this.icon=null,this.txtIcon=null},b);function b(){return null!==s&&s.apply(this,arguments)||this}e.PopUpRewardAD=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),y=this&&this.__awaiter||function(t,r,a,h){return new(a=a||Promise)(function(i,e){function o(t){try{n(h.next(t))}catch(t){e(t)}}function s(t){try{n(h.throw(t))}catch(t){e(t)}}function n(t){var e;t.done?i(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(o,s)}n((h=h.apply(t,r||[])).next())})},m=this&&this.__generator||function(o,s){var n,r,a,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},l={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function t(i){return function(t){var e=[i,t];if(n)throw new TypeError("Generator is already executing.");for(;h=l&&e[l=0]?0:h;)try{if(n=1,r&&(a=2&e[0]?r.return:e[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,e[1])).done)return a;switch(r=0,(e=a?[2&e[0],a.value]:e)[0]){case 0:case 1:a=e;break;case 4:return h.label++,{value:e[1],done:!1};case 5:h.label++,r=e[1],e=[0];continue;case 7:e=h.ops.pop(),h.trys.pop();continue;default:if(!((a=0<(a=h.trys).length&&a[a.length-1])||6!==e[0]&&2!==e[0])){h=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3]))h.label=e[1];else if(6===e[0]&&h.label<a[1])h.label=a[1],a=e;else{if(!(a&&h.label<a[2])){a[2]&&h.ops.pop(),h.trys.pop();continue}h.label=a[2],h.ops.push(e)}}e=s.call(o,h)}catch(t){e=[6,t],r=0}finally{n=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},x=(Object.defineProperty(e,"__esModule",{value:!0}),e.PopUpVictory=void 0,i(12)),g=i(0),r=i(16),v=i(11),_=i(13),w=i(9),S=i(1),A=i(4),C=i(2),T=i(15),P=i(26),i=(s=i(21).PopUpBase,n(a,s),a.prototype.init=function(t){var e=this,i=(this.bg=new S.JDImage(this.scene,w.CustomResize.GHW,w.CustomResize.GHH,"background-victory"),this.bg.setInteractive(),this.add(this.bg),this.txtTitle=new S.JDBmpdTextStroke(this.scene,w.CustomResize.GHW,0,g.Fonts.Main,"lvlComplete",112,16777215,4013373),this.txtTitle.setFitSize(1200),this.add(this.txtTitle),A.AlignTo.getCenterX()),o=A.AlignTo.getCenterY(),s=new S.JDImage(this.scene,i,o-220,g.Atlases.ui,"points-progressbar-base"),n=(this.add(s),this.progressBar=new S.JDImage(this.scene,s.x,s.y,g.Atlases.ui,"points-progressbar"),this.add(this.progressBar),C.LevelManager.getLevel(C.LevelManager.currLevelID).times),s=Math.round(t.time/60),r=" "+C.Localization.getText("sec"),a=this.progressBar.width/2,h=new S.JDBmpdText(this.scene,this.progressBar.x+a,this.progressBar.y+75,g.Fonts.Main,n[2]+r,48,4013373,2);this.add(h),this.bike=new S.JDImage(this.scene,this.progressBar.x,this.progressBar.y-100,g.Atlases.ui,"skin-icon"),this.add(this.bike),this.bikeLine=new S.JDImage(this.scene,0,this.progressBar.y-43,"whitePixel"),this.bikeLine.tint=4013373,this.bikeLine.setDisplaySize(10,25),this.add(this.bikeLine),this.stars=new Array;var l,c=n[2],u=n[0],d=this.calculatePercentage(s,c,u);d<0?d=0:1<d&&(d=1);for(var p=this.coinsEarned=0;p<3;p++){var f=this.calculatePercentage(n[p],c,u),b=new B(this.scene,this.progressBar.x-a+this.progressBar.width*f,this.progressBar.y);this.add(b),this.stars.push(b),f<=d&&(this.coinsEarned+=this.coinsForStar[p],l=p)}C.AchievementManager.saveAchive(T.AchievesType.earnCoins,this.coinsEarned),C.LevelManager.levelComplete(s,l+1,this.coinsEarned,t.death),b=null,this.txtTime=new S.JDBmpdTextFit(this.scene,i,o-50,g.Fonts.Main,C.Localization.getText("youtTime")+" "+s+r,64,4013373),this.add(this.txtTime),this.setProgress(0),this.scene.tweens.addCounter({from:0,to:d,duration:1400,ease:"linear",onUpdate:function(t){e.setProgress(t.getValue())},onComplete:function(){return e.progressComplete()}}),this.txtCoin=new S.JDBmpdTextStroke(this.scene,this.txtTime.x,this.txtTime.y,g.Fonts.Main,"",64,16777215,4013373,1,v.JDTextType.text),this.add(this.txtCoin),this.txtCoin.visible=!1,this.iconCoin=new S.JDImage(this.scene,this.txtTime.x,this.txtTime.y,g.Atlases.ui,"coin-icon-small"),this.add(this.iconCoin),this.iconCoin.visible=!1,this.roulette=new E(this.scene,i,o+130),this.add(this.roulette),this.roulette.visible=!1,this.btnRestart=new _.ButtonScale(this.scene,A.AlignTo.getCenterX(-280),0),this.btnRestart.addImageEvents(g.Atlases.ui,"red-button"),this.btnRestart.addIcon(g.Atlases.ui,"restart-icon"),this.btnRestart.addTxtStroke("restart",g.Fonts.Main,52,16777215,3421236),this.btnRestart.txtStroke.setFitSize(300),this.btnRestart.onUp=function(){return y(e,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return[4,x.AzerionSDK.showInterstitialAd()];case 1:return t.sent(),this.scene.restartLevel(),[2]}})})},this.add(this.btnRestart.getView()),this.btnContinue=new _.ButtonScale(this.scene,A.AlignTo.getCenterX(280),0),this.btnContinue.addImageEvents(g.Atlases.ui,"green-button"),this.btnContinue.addTxtStroke("continue",g.Fonts.Main,52,16777215,3421236),this.btnContinue.txtStroke.setFitSize(300),this.btnContinue.onUp=function(){return y(e,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return[4,x.AzerionSDK.showInterstitialAd()];case 1:return t.sent(),C.LevelManager.pressNextLevel(),this.scene.scene.start(P.LevelSelect.Name),[2]}})})},this.add(this.btnContinue.getView()),this.btnRestart.setScalePressState(.9*g.Constants.ADDITIONAL_PANEL_BUTTON_SCALE,g.Constants.ADDITIONAL_PANEL_BUTTON_SCALE),this.btnContinue.setScalePressState(.9*g.Constants.ADDITIONAL_PANEL_BUTTON_SCALE,g.Constants.ADDITIONAL_PANEL_BUTTON_SCALE),A.AlignTo.centeredObjectsX2(this.btnRestart.icon,this.btnRestart.icon.width,this.btnRestart.txtStroke,this.btnRestart.txtStroke.txtStroke.width,0,25)},a.prototype.calculatePercentage=function(t,e,i){return(i-t)/(i-e)},a.prototype.progressComplete=function(){this.showEarned(this.coinsEarned),0!==this.coinsEarned&&this.roulette.show()},a.prototype.increaseCoins=function(t){var e,i,o=this;1!==t&&(e=this.coinsEarned,this.coinsEarned*=t,i=this.coinsEarned-e,this.showEarned(e,1.5*this.txtCoin.txtStroke.width),this.scene.add.tween({targets:this.txtCoin,scale:1.2,duration:200,yoyo:!0,onUpdate:function(t){o.txtCoin.text=""+(e+Math.round(i*t.progress))},onComplete:function(){return o.showEarned(o.coinsEarned)}}),C.AchievementManager.saveAchive(T.AchievesType.earnCoins,i),C.SaveData.setItemAddToNumber(r.SaveTypes.coins,i))},a.prototype.showEarned=function(t,e){void 0===e&&(e=0),this.txtTime.text=C.Localization.getText("youEarn"),this.txtCoin.visible=!0,this.txtCoin.text=""+t,this.iconCoin.visible=!0;var t=this.txtTime.width,e=0<e?e:this.txtCoin.txtStroke.width,i=this.iconCoin.width,o=t+e+i+40,o=A.AlignTo.getCenterX()-o/2;this.txtTime.x=o+t/2,this.txtCoin.x=o+t+20+e/2,this.iconCoin.x=o+t+20+e+20+i/2},a.prototype.setProgress=function(t){t=this.progressBar.width*t;this.progressBar.setCrop(0,0,t,this.progressBar.height),this.bike.x=this.progressBar.x-this.progressBar.width/2+t,this.bikeLine.x=this.bike.x;for(var e=0;e<this.stars.length;e++)this.stars[e].showCoin(e,this.bike.x,this.coinsForStar[e])},a.prototype.update=function(){this.roulette&&this.roulette.update()},a.prototype.resize=function(){A.AlignTo.fitScreen(this.bg),A.AlignTo.top(this.txtTitle,100),this.btnRestart.y=A.AlignTo.getBot(150),this.btnContinue.y=this.btnRestart.y},a.prototype.destroy=function(){s.prototype.destroy.call(this),this.bg=null,this.txtTitle=null,this.btnRestart=null,this.btnContinue=null,this.progressBar=null,this.roulette=null,this.stars=null,this.bike=null,this.txtTime=null,this.iconCoin=null,this.txtCoin=null,this.coinsForStar=null},a);function a(){var t=null!==s&&s.apply(this,arguments)||this;return t.coinsForStar=[30,60,90],t}e.PopUpVictory=i;l=S.JDContainer,n(d,l),d.prototype.showCoin=function(t,e,i){var o=this;!0===this.showed||e<this.x||(this.img.setFrame(!1===C.LevelManager.currModeHard?"star-icon":"star-icon-hard"),this.txt.text=""+i,this.showed=!0,this.scale=0,this.scene.add.tween({targets:this,scale:1,duration:500,ease:function(t){return Phaser.Math.Easing.Elastic.Out(t,.1,.4)},onComplete:function(){return o.showCoin2()}}),C.SoundManager.playSFX("star_"+(t+1)))},d.prototype.showCoin2=function(){this.img.setFrame("points-coin-icon"),this.txt.visible=!0},d.prototype.destroy=function(){l.prototype.destroy.call(this),this.txt=null,this.img=null};var h,l,B=d,E=(h=S.JDContainer,n(u,h),u.prototype.addXTime=function(t){this.xTimes.push(new c(this,this.xTimesNum.shift(),this.endX,t)),this.endX+=t},u.prototype.update=function(){!0===this.isActive&&(this.arrow.x+=this.arrowSpeed,this.arrow.x<=this.startX||this.arrow.x>=this.endX)&&(this.arrowSpeed=-this.arrowSpeed)},u.prototype.show=function(){C.SoundManager.playSFX("slider_loop",1,!0),this.visible=!0,this.scale=.5,this.scene.add.tween({targets:this,scale:1,duration:300,ease:Phaser.Math.Easing.Back.Out})},u.prototype.onButton=function(){var e=this;if(!0===this.isActive){C.SoundManager.stopSFXLoop("slider_loop"),this.result.visible=!0,this.result.x=this.arrow.x+10;for(var t=0;t<this.xTimes.length;t++)if(this.arrow.x>this.xTimes[t].leftX&&this.arrow.x<this.xTimes[t].rightX){this.xClaimed=this.xTimes[t].xTimes;break}this.isActive=!1,this.btnClaim.txtStroke.text="claim",this.btnClaim.icon.visible=!0,A.AlignTo.centeredObjectsX2(this.btnClaim.icon,this.btnClaim.icon.width,this.btnClaim.txtStroke,this.btnClaim.txtStroke.txtStroke.width,0,15),this.txtClaimAmount=new S.JDBmpdTextStroke(this.scene,0,this.btnClaim.y-110,g.Fonts.Main,""+this.parentContainer.coinsEarned*this.xClaimed,50,16777215,0,1,v.JDTextType.text),this.add(this.txtClaimAmount),this.imgClaimAmount=new S.JDImage(this.scene,0,this.txtClaimAmount.y,g.Atlases.ui,"coin-icon-small"),this.add(this.imgClaimAmount),A.AlignTo.centeredObjectsX2(this.txtClaimAmount,this.txtClaimAmount.txtStroke.width,this.imgClaimAmount,this.imgClaimAmount.width,this.btnClaim.x+10,15)}else x.AzerionSDK.showRewardedAd("",function(t){!0===t&&(e.txtClaimAmount.visible=!1,e.imgClaimAmount.visible=!1,e.btnClaim.visible=!1,e.x=A.AlignTo.getCenterX(),e.parentContainer.increaseCoins(e.xClaimed))})},u.prototype.destroy=function(t){h.prototype.destroy.call(this,t),this.bg=null,this.arrow=null,this.result=null,this.btnClaim=null,this.xTimes=null,this.xTimesNum=null,this.txtClaimAmount=null,this.imgClaimAmount=null},u),c=function(t,e,i,o){this.xTimes=e,this.leftX=i,this.rightX=this.leftX+o;i=new S.JDBmpdText(t.scene,i+o/2+14,0,g.Fonts.Main,"x"+e,48);t.add(i)};function u(t,e,i){var o=h.call(this,t,e,i)||this;return o.xTimesNum=[2,3,4,5,4,3,2],o.isActive=!0,o.bg=new S.JDImage(o.scene,0,0,g.Atlases.ui,"roulette-base"),o.add(o.bg),o.btnClaim=new _.ButtonScale(o.scene,0,0),o.btnClaim.addImageEvents(g.Atlases.ui,"roulette-green-button"),o.btnClaim.addIcon(g.Atlases.ui,"roulette-ads-icon"),o.btnClaim.addTxtStroke("stop",g.Fonts.Main,48,16777215,4013373),o.btnClaim.onUp=function(){return o.onButton()},o.add(o.btnClaim.getView()),o.btnClaim.icon.visible=!1,A.AlignTo.centeredObjectsX2(o,o.bg.width,o.btnClaim,o.btnClaim.image.width,e,50),o.btnClaim.x=e-o.btnClaim.image.width+100,o.xTimes=new Array,o.startX=o.bg.x-575,o.endX=o.startX,o.addXTime(187),o.addXTime(163),o.addXTime(144),o.addXTime(130),o.addXTime(144),o.addXTime(163),o.addXTime(193),o.result=new S.JDImage(o.scene,0,0,g.Atlases.ui,"roulette-result"),o.result.scaleY=.9,o.add(o.result),o.result.visible=!1,o.arrow=new S.JDImage(o.scene,o.bg.x,80,g.Atlases.ui,"roulette-arrow"),o.add(o.arrow),o.arrow.x=A.Tools.random(o.startX,o.endX),o.arrowSpeed=22*A.Tools.randomOne(),o}function d(t,e,i){t=l.call(this,t,e,i)||this;return t.showed=!1,t.img=new S.JDImage(t.scene,0,0,g.Atlases.ui,!1===C.LevelManager.currModeHard?"star-icon-empty":"star-icon-empty-hard"),t.add(t.img),t.txt=new S.JDBmpdText(t.scene,0,0,g.Fonts.Main,"",40,4013373),t.add(t.txt),t.txt.visible=!1,t}},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.Bike=void 0,i(0)),a=i(1),h=i(5),l=i(4),c=i(3),u=i(8),d=i(22),p=i(120),f=i(122),b=i(123),y=i(124),m=i(125),x=i(2),i=(s=d.Entity,n(g,s),g.prototype.initView=function(t){this.bodiesData=new Array;var e=c.GameData.getConfigParam(c.GameConfig.playerWheelFriction),i=c.GameData.getConfigParam(c.GameConfig.playerWheelMass),i=(this.wheelBack=new f.BikeWheel(this,t,-41,32,e,i,""),this.addBodyPos(this.wheelBack.body),this.wheelFront=new f.BikeWheel(this,t,43,32,.5*e,i,""),this.addBodyPos(this.wheelFront.body),this.imgAmortBack=new a.JDImage(this.world.scene,0,0,r.Atlases.bike,""),t.add(this.imgAmortBack),this.imgAmortBack.setOrigin(.1,.5),this.imgAmortFront=new a.JDImage(this.world.scene,0,0,r.Atlases.bike,""),t.add(this.imgAmortFront),this.imgAmortFront.setOrigin(.9,.5),this.chassis=new b.BikeChassis(t),(e=this.chassis.addPolygon([-60,20,-60,15,-50,-5,50,-5,60,15,60,20])).SetFriction(1e-12),e.m_filter.groupIndex=-1,e.m_filter.categoryBits=u.BodyCollisionFilter.PLAYER,e.SetUserData("playerBody"),e.SetDensity(c.GameData.getConfigParam(c.GameConfig.playerMass)+.4045715),this.chassis.data.ResetMassData(),this.chassis.data.SetUserData({id:c.ITEM_ID.player,link:this}),this.addBodyPos(this.chassis),this.chassis.setContactCallback(null,this.onContact,this),this.amortFrontOffR=l.Tools.toRad(68),this.amortBackOffR=l.Tools.toRad(35),this.driver=new p.Driver(this,t,10,4),x.SkinsManager.getCurrentSkin());this.smoke="vex"===i?new y.BikeEffectSmoke(t,i,-60,-10):"sport"===i?new y.BikeEffectSmoke(t,i,-55,-5):"lego"===i?new y.BikeEffectSmoke(t,i,-60,0):"kid"===i?new y.BikeEffectSmoke(t,i,-20,0,l.Tools.PI025):"valentines"===i?new y.BikeEffectSmoke(t,i,-70,10):"scooter"===i||"tron"===i?new y.BikeEffectSmoke(t,i,-60,0):"police"===i||"christmas"===i?new m.BikeEffectPolice(t,i,50,30):"halloween"===i?new y.BikeEffectSmoke(t,i,-55,5):"dino"===i?new y.BikeEffectSmoke(t,i,-70,-5,l.Tools.PI025):"gold-sport"===i?new y.BikeEffectSmoke(t,i,-55,-5):"white"===i||"future"===i?new y.BikeEffectSmoke(t,i,-40,-5):"mad"===i?new y.BikeEffectSmoke(t,i,-52,20,l.Tools.PI025):"christmas"===i?new y.BikeEffectSmoke(t,i,-55,-5):"dragon"===i?new y.BikeEffectSmoke(t,i,-70,0):new y.BikeEffectSmoke(t,i,-60,-10),this.setSkin(i)},g.prototype.setSkin=function(t){this.chassis.setSkin(t),this.imgAmortBack.setFrame(t+"_axles_left"),this.imgAmortFront.setFrame(t+"_axles_right"),"kid"===t?(this.wheelBack.setSkin(t+"_wheel_left"),this.wheelFront.setSkin(t+"_wheel_right")):(this.wheelBack.setSkin(t+"_wheel"),this.wheelFront.setSkin(t+"_wheel"))},g.prototype.addBodyPos=function(t){this.bodiesData.push({b:t,x:t.x,y:t.y,r:t.rotation})},g.prototype.connectWheels=function(){var t,e,i;this.jointWheelBack||(t=c.GameData.getConfigParam(c.GameConfig.playerAmortFrequency),e=c.GameData.getConfigParam(c.GameConfig.playerAmortDamping),i=l.Tools.toRad(-100),this.jointWheelBack=h.Box2DWorld.world.wheelJoint(this.chassis,this.wheelBack.body,-41,32,0,0,Math.cos(i),Math.sin(i),t,1.5*e,0,0,!1),this.jointWheelFront=h.Box2DWorld.world.wheelJoint(this.chassis,this.wheelFront.body,43,32,0,0,Math.cos(this.amortFrontOffR),Math.sin(this.amortFrontOffR),t,e,0,0,!1))},g.prototype.spawnOn=function(t,e){for(var i,o=0;o<this.bodiesData.length;o++)i=this.bodiesData[o],this.setBodyPos(i.b,t+i.x,e+i.y,i.r);this.driver.spawn(t,e),this.chassis.img.tint=16777215,this.wheelBack.body.obj.tint=this.wheelFront.body.obj.tint=16777215,this.connectWheels(),this.imgAmortBack.visible=this.imgAmortFront.visible=!0,this.smoke.reset(),this.update()},g.prototype.setBodyPos=function(t,e,i,o){void 0===o&&(o=0),t.setXY(e,i),t.rotation=o,t.data.SetAwake(!1),t.data.SetAwake(!0),t.update()},g.prototype.onContact=function(t,e,i,o,s,n){},g.prototype.applyDefeat=function(){h.Box2DWorld.world.world.DestroyJoint(this.jointWheelBack),h.Box2DWorld.world.world.DestroyJoint(this.jointWheelFront),this.jointWheelBack=null,this.jointWheelFront=null,this.imgAmortBack.visible=this.imgAmortFront.visible=!1,this.chassis.img.tint=4473924,this.wheelBack.body.obj.tint=this.wheelFront.body.obj.tint=4473924,this.wheelBack.body.applyForce(3*(this.wheelBack.body.obj.x-this.chassis.img.x),3*(this.wheelBack.body.obj.y-this.chassis.img.y)),this.wheelFront.body.applyForce(3*(this.wheelFront.body.obj.x-this.chassis.img.x),3*(this.wheelFront.body.obj.y-this.chassis.img.y))},g.prototype.update=function(){this.imgAmortBack.x=this.wheelBack.body.obj.x,this.imgAmortBack.y=this.wheelBack.body.obj.y,this.imgAmortBack.rotation=this.chassis.img.rotation-this.amortBackOffR,this.imgAmortFront.x=this.wheelFront.body.obj.x,this.imgAmortFront.y=this.wheelFront.body.obj.y,this.imgAmortFront.rotation=this.amortFrontOffR+this.chassis.img.rotation,this.wheelBack.update(),this.wheelFront.update(),this.driver.update()},g.prototype.getX=function(){return this.chassis.img.x},g.prototype.getY=function(){return this.chassis.img.y},g.prototype.getInteractive=function(){return this.chassis.img},g.prototype.getView=function(){return this.chassis.img},g.prototype.getBody=function(){return this.chassis},g.prototype.getWheelFront=function(){return this.wheelFront},g.prototype.getWheelBack=function(){return this.wheelBack},g.prototype.getDriverX=function(){return this.driver.getTorsX()},g.prototype.getDriverY=function(){return this.driver.getTorsY()},g.prototype.addVelocity=function(t,e){this.chassis.velocity.add(t,e),this.wheelBack.body.velocity.add(t,e),this.wheelFront.body.velocity.add(t,e),this.driver.addVelocity(t,e)},g.prototype.setVelocity=function(t,e){this.chassis.velocity.set(t,e),this.wheelBack.body.velocity.set(t,e),this.wheelFront.body.velocity.set(t,e),this.driver.setVelocity(t,e)},g.prototype.multiplyVelocity=function(t,e){this.chassis.velocity.multiply(t,e),this.wheelBack.body.velocity.multiply(t,e),this.wheelFront.body.velocity.multiply(t,e),this.driver.multiplyVelocity(t,e)},g.prototype.getSpeedPercent=function(){return this.currSpeed/this.maxSpeed},g.prototype.getSpeedlength=function(){return Math.sqrt(this.currSpeedX*this.currSpeedX+this.currSpeedY*this.currSpeedY)},g.prototype.destroy=function(){s.prototype.destroy.call(this),this.bodiesData=null,this.driver.destroy(),this.driver=null,this.inputManager=null,this.chassis=null,this.wheelBack=null,this.wheelFront=null,this.imgAmortFront=null,this.imgAmortBack=null,this.jointWheelBack=null,this.jointWheelFront=null,this.smoke.destroy(),this.smoke=null},g);function g(t,e,i){t=s.call(this,t,e)||this;return t.inputManager=i,t.speedTilt=c.GameData.getConfigParam(c.GameConfig.playerTilt),t.maxSpeed=c.GameData.getConfigParam(c.GameConfig.playerSpeed),t.wheelMaxAngularVel=t.maxSpeed/(l.Tools.PI2*t.wheelBack.radius)*l.Tools.PI2,t.wheelAccelTorque=c.GameData.getConfigParam(c.GameConfig.playerWheelAccelerationTorgue),t.wheelDeltaTorque=c.GameData.getConfigParam(c.GameConfig.playerWheelMaxTorgue)-t.wheelAccelTorque,t}e.Bike=i},function(t,e,i){"use strict";function o(){}Object.defineProperty(e,"__esModule",{value:!0}),e.Box2DTools=void 0,o.mouseDragStart=function(t,e,i,o,s,n){void 0===s&&(s=1e3),void 0===n&&(n=5),t.mouseDragEnd();i=t.pxm(-i),o=t.pxm(-o),i=new box2d.b2Vec2(i,o),o=new box2d.b2MouseJointDef;o.bodyA=t.mouseJointBody,o.bodyB=e,o.target.Copy(i),o.maxForce=s*o.bodyB.GetMass(),o.frequencyHz=n,t.mouseJoint=t.world.CreateJoint(o),o.bodyB.SetAwake(!0)},o.getContactPower=function(t){var e=t.GetManifold().localPoint,i=t.GetFixtureA().GetBody().GetLinearVelocityFromLocalPoint(e,new box2d.b2Vec2),t=t.GetFixtureB().GetBody().GetLinearVelocityFromLocalPoint(e,new box2d.b2Vec2);return i.SelfSub(t),i.Length()},o.getContactPoint=function(t,e,i,o){return void 0===o&&(o=0),e.GetWorldManifold(i),0<i.points.length?(e=i.points[o],{x:t.mpx(-e.x),y:t.mpx(-e.y)}):null},o.addDecompShapes=function(t,e,i,o,s,n,r,a,h,l,c,u){void 0===r&&(r=!1),void 0===a&&(a=0),void 0===h&&(h=0),void 0===l&&(l=0),void 0===c&&(c=1),void 0===u&&(u=65535);for(var d=null,p=0;p<n.length;p++){for(var f=n[p],b=new Array,y=0;y<f.length;y++){var m=f[y];b.push(new box2d.b2Vec2(e*(m[0]+a),-e*(m[1]+h)))}var x=new box2d.b2PolygonShape,g=(x.SetAsVector(b,b.length),new box2d.b2FixtureDef),x=(g.density=i,g.friction=o,g.restitution=s,g.isSensor=r,g.shape=x,d=t.CreateFixture(g),new box2d.b2Filter);x.groupIndex=l,x.categoryBits=c,x.maskBits=u,d.SetFilterData(x)}return d},e.Box2DTools=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Driver=void 0;var s=i(0),n=i(5),o=i(4),r=i(7),a=i(121),h=i(41);function l(t,e,i,o){void 0===i&&(i=0),void 0===o&&(o=0),this.player=t,this.bodiesData=new Array,this.x=i,this.y=o,this.currTiltDir=0,this.tors=new a.DriverPart(e,s.Atlases.bike,"d_tors",i-19,o-23,16,32,12),this.addBodyPos(this.tors),this.tors.body.setContactCallback(null,this.onContactTors,this),this.hand1=new a.DriverPart(e,s.Atlases.bike,"d_hand_1",i-11,o-28,16,10,33),this.addBodyPos(this.hand1),this.hand2=new a.DriverPart(e,s.Atlases.bike,"d_hand_2",i+3,o-20,18,6,20),this.addBodyPos(this.hand2),this.leg1=new a.DriverPart(e,s.Atlases.bike,"d_leg_1",i-16,o-8,18,10,28),this.addBodyPos(this.leg1),this.leg2=new a.DriverPart(e,s.Atlases.bike,"d_leg_2",i-11,o+4,4,26,4),this.addBodyPos(this.leg2),this.head=new a.DriverPart(e,s.Atlases.bike,"d_head",i-12,o-48,22,30,15,0,4),this.addBodyPos(this.head),this.head.body.setContactCallback(null,this.onContact,this),this.joints=[]}l.prototype.onContactTors=function(t,e,i,o,s,n){!1!==s&&!0!==o.IsSensor()&&(s=e.data.GetUserData())&&s.id&&this.player.checkContactIdWithHead(s.id)},l.prototype.onContact=function(t,e,i,o,s,n){!1!==s&&(!0!==o.IsSensor()?!(s=e.data.GetUserData())||!s.id||s.link instanceof r.BlockBase?this.player.defeat(h.DeathType.head):this.player.checkContactIdWithHead(s.id):this.player.checkOnBodyContact(e))},l.prototype.spawn=function(t,e){for(var i,o=0;o<this.bodiesData.length;o++)(i=this.bodiesData[o]).b.spawn(t+i.x,e+i.y,i.r);for(o=0;o<this.joints.length;o++)n.Box2DWorld.world.world.DestroyJoint(this.joints[o]);this.joints=[],this.joints.push(this.leg1.connect(this.leg2.body,6,0,-2,-12)),this.joints.push(this.tors.connect(this.leg1.body,-1,12,-7,0)),this.joints.push(this.hand1.connect(this.tors.body,-5,0,2,-9)),this.joints.push(this.hand2.connect(this.hand1.body,-9,0,5,0)),this.joints.push(this.head.connect(this.tors.body,0,11,0,-14)),this.joints.push(this.leg2.connect(this.player.getBody(),1,14,this.x-11,this.y+18)),this.joints.push(this.hand2.connect(this.player.getBody(),8,0,this.x+11,this.y-18)),this.joints.push(n.Box2DWorld.world.revoluteJoint(this.head.body,this.player.getBody(),0,0,-2,-44))},l.prototype.addBodyPos=function(t){this.bodiesData.push({b:t,x:t.body.x,y:t.body.y,r:t.body.rotation})},l.prototype.defeat=function(){n.Box2DWorld.world.world.DestroyJoint(this.leg2.joint),n.Box2DWorld.world.world.DestroyJoint(this.hand2.joint),n.Box2DWorld.world.world.DestroyJoint(this.joints[this.joints.length-1]);for(var t,e=0;e<this.joints.length;e++)n.Box2DWorld.world.world.DestroyJoint(this.joints[e]);for(e=0;e<this.bodiesData.length;e++){(t=this.bodiesData[e]).b.body.obj.visible=!s.Constants.DISABLE_BLOOD;var i=Math.random()*o.Tools.PI2;t.b.body.setZeroVelocity(),t.b.body.applyForce(5e-14*Math.cos(i),5e-14*Math.sin(i))}},l.prototype.tilt=function(t){this.currTiltDir!==t&&(this.currTiltDir=t,this.hand1.tilt(t,40),this.leg1.tilt(t,-30),this.tors.tilt(t,40),this.leg2.tilt(t,-15))},l.prototype.update=function(){this.hand1.update(),this.leg1.update(),this.tors.update(),this.leg2.update()},l.prototype.addAngularVelocity=function(t){this.tors.body.angularVelocity+=t,this.leg1.body.angularVelocity+=t,this.leg2.body.angularVelocity+=t,this.head.body.angularVelocity+=t,this.hand1.body.angularVelocity+=t,this.hand2.body.angularVelocity+=t},l.prototype.setAngularVelocity=function(t){this.tors.body.angularVelocity=t,this.leg1.body.angularVelocity=t,this.leg2.body.angularVelocity=t,this.head.body.angularVelocity=t,this.hand1.body.angularVelocity=t,this.hand2.body.angularVelocity=t},l.prototype.addVelocity=function(t,e){this.tors.body.velocity.add(t,e),this.hand1.body.velocity.add(t,e),this.hand2.body.velocity.add(t,e),this.leg1.body.velocity.add(t,e),this.leg2.body.velocity.add(t,e),this.head.body.velocity.add(t,e)},l.prototype.setVelocity=function(t,e){this.tors.body.velocity.set(t,e),this.hand1.body.velocity.set(t,e),this.hand2.body.velocity.set(t,e),this.leg1.body.velocity.set(t,e),this.leg2.body.velocity.set(t,e),this.head.body.velocity.set(t,e)},l.prototype.multiplyVelocity=function(t,e){this.tors.body.velocity.multiply(t,e),this.hand1.body.velocity.multiply(t,e),this.hand2.body.velocity.multiply(t,e),this.leg1.body.velocity.multiply(t,e),this.leg2.body.velocity.multiply(t,e),this.head.body.velocity.multiply(t,e)},l.prototype.getTorsX=function(){return this.tors.body.obj.x},l.prototype.getTorsY=function(){return this.tors.body.obj.y},l.prototype.destroy=function(){this.player=null,this.bodiesData=null,this.tors.destroy(),this.tors=null,this.hand1.destroy(),this.hand1=null,this.hand2.destroy(),this.hand2=null,this.leg1.destroy(),this.leg1=null,this.leg2.destroy(),this.leg2=null,this.head.destroy(),this.head=null},e.Driver=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DriverPart=void 0;var c=i(5),n=i(4),u=i(3),d=i(8);function o(t,e,i,o,s,n,r,a,h,l){void 0===h&&(h=0),void 0===l&&(l=0),this.body=c.Box2DWorld.getBodyImage(t,e,i,o,s);t=this.body.addRectangle(n,r,h,l);t.SetDensity(1e-15),t.m_filter.groupIndex=-1,this.body.bullet=!0,this.body.data.ResetMassData(),this.body.setCollisionCategory(d.BodyCollisionFilter.PLAYER),this.body.angle=a,this.body.data.SetUserData({id:u.ITEM_ID.player+i})}o.prototype.connect=function(t,e,i,o,s){return this.basePhase=t.angle-this.body.angle,this.joint=c.Box2DWorld.world.revoluteJoint(this.body,t,e,i,o,s,0,0,!1,this.basePhase,this.basePhase,!0),this.basePhase=n.Tools.toRad(this.basePhase),this.joint},o.prototype.spawn=function(t,e,i){this.body.obj.visible=!0,this.body.setXY(t,e),this.body.rotation=i,this.body.data.SetAwake(!1),this.body.data.SetAwake(!0),this.body.update(),this.joint&&this.tilt(0,0)},o.prototype.tilt=function(t,e){0===t?this.setJointLimits(this.basePhase,this.basePhase):(e=n.Tools.toRad(e)*t,this.setJointLimits(this.basePhase+e,this.basePhase+e))},o.prototype.update=function(){},o.prototype.setJointLimits=function(t,e){this.joint.m_impulse.SetZero(),this.joint.m_motorImpulse=0,this.joint.m_mass.SetZero(),this.joint.m_motorMass=0,this.joint.SetLimits(t,e)},o.prototype.destroy=function(){this.body=null,this.joint=null},e.DriverPart=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BikeWheel=void 0;var a=i(0),h=i(5),l=i(3),c=i(8);function o(t,e,i,o,s,n,r){this.onGround=0,this.player=t,this.radius=18,this.friction=s,this.body=h.Box2DWorld.getBodyImage(e,a.Atlases.bike,r,i,o),this.fixture=this.body.addCircle(this.radius),this.fixture.SetDensity(n),this.fixture.SetRestitution(0),this.fixture.SetFriction(s),this.fixture.m_filter.groupIndex=-1;t=this.body.addCircle(this.radius+4);t.SetDensity(0),t.SetSensor(!0),t.SetUserData({id:l.ITEM_ID.player+"wheel"}),t.m_filter.groupIndex=-1,this.body.data.ResetMassData(),this.body.setCollisionCategory(c.BodyCollisionFilter.PLAYER),this.body.data.SetUserData({id:l.ITEM_ID.player+"wheel",link:this}),this.body.setContactCallback(null,this.onContactWheel,this)}o.prototype.setSkin=function(t){this.body.obj.setFrame(t)},o.prototype.onContactWheel=function(t,e,i,o,s,n){i!==this.fixture&&(!0===s&&(i=e.data.GetUserData())&&i.id&&this.player.checkContactIdWithHead(i.id,this.body.data.GetUserData().id),!0!==o.IsSensor())&&(!0===s?this.onGround+=1:--this.onGround)},o.prototype.update=function(){},o.prototype.drive=function(t,e,i){0===t?this.body.angularVelocity*=.9:this.body.data.ApplyAngularImpulse(e*t),this.body.angularVelocity>i?this.body.angularVelocity=i:this.body.angularVelocity<-i&&(this.body.angularVelocity=-i)},o.prototype.destroy=function(){this.body=null,this.fixture=null,this.player=null},e.BikeWheel=o},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BikeChassis=void 0,i(0)),a=i(1),h=i(5),i=(s=Box2DPhysics.Body,n(l,s),l.prototype.setPixelOrigin=function(t,e){this.img.setOrigin(.5-t/this.img.width,.5-e/this.img.height)},l.prototype.setSkin=function(t){this.img.setFrame(t+"_base"),"valentines"===t?this.setPixelOrigin(-7,-5):"scooter"===t?this.setPixelOrigin(-6,6):"vex"===t?this.setPixelOrigin(-2,8):"tron"===t?this.setPixelOrigin(-8,10):"sport"===t||"gold-sport"===t?this.setPixelOrigin(0,9):"police"===t?this.setPixelOrigin(-4,10):"lego"===t?this.setPixelOrigin(-1,8):"kid"===t?this.setPixelOrigin(0,7):"halloween"===t?this.setPixelOrigin(2,8):"dino"===t?this.setPixelOrigin(-11,4):"white"===t||"future"===t?this.setPixelOrigin(0,8):"mad"===t?this.setPixelOrigin(-11,10):"christmas"===t?this.setPixelOrigin(0,7):"dragon"===t&&this.setPixelOrigin(-11,4)},l.prototype.update=function(){s.prototype.update.call(this),this.img.x=this.x,this.img.y=this.y,this.img.rotation=this.rotation},l.prototype.destroy=function(){s.prototype.destroy.call(this),this.img.destroy(),this.img=null},l);function l(t){var e=s.call(this,h.Box2DWorld.world)||this;return e.img=new a.JDImage(t.scene,0,0,r.Atlases.bike,""),t.add(e.img),e}e.BikeChassis=i},function(t,e,i){"use strict";var o,h,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=(Object.defineProperty(e,"__esModule",{value:!0}),e.BikeEffectSmoke=void 0,i(0)),l=i(4),i=i(61),r=(h=i.BikeEffectBase,s(a,h),a.prototype.reset=function(){this.counterSpawn=0,this.partShow=0,h.prototype.reset.call(this)},a.prototype.update=function(t,e,i,o){var s;0!==o&&(this.counterSpawn+=1,this.counterSpawn>=this.durationSpawn)&&(this.counterSpawn=0,s=l.Tools.rotatePointByAngle(t,e,t+this.offX,e+this.offY,i),this.parts[this.partShow].start(s.x,s.y,this.rotate),this.partShow+=1,this.partShow===this.amount&&(this.partShow=0)),h.prototype.update.call(this,t,e,i,o)},a.prototype.destroy=function(){h.prototype.destroy.call(this)},a);function a(t,e,i,o,s){void 0===s&&(s=0);var n,r=h.call(this,t,i,o)||this;r.durationSpawn=5,r.amount=10,r.rotate=s;for(var a=0;a<r.amount;a++)n=new u(t.scene,e+"_effect"+l.Tools.random(1,2)),t.add(n),r.parts[a]=n;return r}e.BikeEffectSmoke=r;c=i.BikeEffectPart,s(d,c),d.prototype.start=function(t,e,i){this.visible=!0,this.x=t,this.y=e,this.alpha=1,this.scale=.5+.5*Math.random(),this.rotation=i*(1-2*Math.random())},d.prototype.update=function(){--this.y,this.alpha-=.02,this.scale+=.01};var c,u=d;function d(t,e){t=c.call(this,t,0,0,n.Atlases.bike,e)||this;return t.visible=!1,t}},function(t,e,i){"use strict";var o,a,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=(Object.defineProperty(e,"__esModule",{value:!0}),e.BikeEffectPolice=void 0,i(0)),h=i(4),i=i(61),r=(a=i.BikeEffectBase,s(l,a),l.prototype.reset=function(){this.counterSpawn=0,this.partShow=0,a.prototype.reset.call(this)},l.prototype.update=function(t,e,i,o){0!==o&&(this.counterSpawn+=1,this.counterSpawn>=this.durationSpawn)&&(this.counterSpawn=0,this.parts[this.partShow].start(t-this.offX+Math.random()*(2*this.offX),e+10-this.offY+Math.random()*(2*this.offY),0),this.partShow+=1,this.partShow===this.amount)&&(this.partShow=0),a.prototype.update.call(this,t,e,i,o)},l.prototype.destroy=function(){a.prototype.destroy.call(this)},l);function l(t,e,i,o){var s,n=a.call(this,t,i,o)||this;n.durationSpawn=5,n.amount=6;for(var r=0;r<n.amount;r++)s=new u(t.scene,e+"_effect"+h.Tools.random(1,2)),t.add(s),n.parts[r]=s;return n}e.BikeEffectPolice=r;c=i.BikeEffectPart,s(d,c),d.prototype.start=function(t,e){this.visible=!0,this.x=t,this.y=e,this.alpha=1,this.scale=.5+.5*Math.random()},d.prototype.update=function(){this.alpha-=.03,this.scale+=.06};var c,u=d;function d(t,e){t=c.call(this,t,0,0,n.Atlases.bike,e)||this;return t.visible=!1,t}},function(t,e,i){"use strict";var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.AppearingText=void 0;var n,r,a=i(0),h=i(1),l=i(2),i=((i=n=n||{})[i.checkPoint=0]="checkPoint",i[i.finish=1]="finish",i[i.death=2]="death",r=h.JDBmpdTextStroke,s(c,r),c.prototype.show=function(t,e,i){this.xPos=t,this.yPos=e,this.x=t,this.y=e,this.currText=i,this.visible=!0,this.alpha=1,this.alive=!0,this.txtStroke.visible=!1,"checkpoint"===i?(this.setFitSize(0),this.txt.tint=56396,this.scale=1,this.currType=n.checkPoint,this.displayTime=120,this.moveDist=0):"finish"===i?(this.txt.tintTopLeft=this.txt.tintTopRight=16758784,this.txt.tintBottomLeft=this.txt.tintBottomRight=16747008,this.txtStroke.visible=!0,this.txtStroke.tint=16739072,this.displayTime=180,this.scale=1,this.currType=n.finish,this.moveDist=0):(this.setFitSize(0),this.txt.tint=16711680,this.scale=this.scaleXY=.75,this.currType=n.death),this.changeLang()},c.prototype.changeLang=function(){this.currText&&this.setText(l.Localization.getText(this.currText))},c.prototype.isPressDown=function(){return!0===this.alive},c.prototype.hide=function(){this.alive=!1,this.visible=!1},c.prototype.update=function(){!1!==this.alive&&(this.currType===n.checkPoint?(-40<this.moveDist&&--this.moveDist,this.y=this.yPos+this.moveDist,--this.displayTime,this.displayTime<=0&&this.hide()):this.currType===n.finish?(-100<this.moveDist&&--this.moveDist,this.y=this.yPos+this.moveDist,--this.displayTime,this.displayTime<=0&&this.hide()):this.currType===n.death&&(this.scaleXY<1.2?(this.scaleXY-=.03*(this.scaleXY-1.2),1.2-this.scaleXY<.01&&(this.scaleXY=1.2),this.scale=this.scaleXY):(this.alpha-=.075*this.alpha,this.alpha<=.02&&this.hide()),this.yPos-=.5,this.y=this.yPos))},c);function c(t,e){t=r.call(this,t,0,0,a.Fonts.Main,"",50,16711680)||this;return t.visible=!1,t.alive=!1,e.add(t),t}e.AppearingText=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.AchievementPanel=void 0,i(0)),a=i(11),h=i(1),l=i(4),c=i(2),i=(s=Phaser.GameObjects.Container,n(u,s),u.prototype.showAchievement=function(t,e){this.achiList.push({type:t,id:e}),1===this.achiList.length&&this.checkNext()},u.prototype.hide=function(){this.visible=!1,this.show=a.Bool3.false},u.prototype.update=function(){var t;!1!==this.visible&&(this.show===a.Bool3.true?(t=this.showY-this.y,this.y+=t/10,t<1&&(this.show=a.Bool3.none)):this.show===a.Bool3.none?(this.counterWait+=1,this.counterWait>=this.durationWait&&(this.show=a.Bool3.false)):this.show===a.Bool3.false&&(t=this.hideY-this.y,this.y+=t/10,-1<t)&&(this.achiList.shift(),0===this.achiList.length?this.hide():this.checkNext()))},u.prototype.checkNext=function(){this.counterWait=0,this.visible=!0,this.show=a.Bool3.true,this.txtNewAchive.text=c.AchievementManager.getDescription(this.achiList[0].id),c.SoundManager.playSFX("achievementUnlocked")},u.prototype.resize=function(){this.showY=l.AlignTo.getTop(120),this.hideY=this.showY-250,this.y=this.hideY},u.prototype.destroy=function(t){this.scene.game.events.off(c.AchievementManager.EVENT_ACHIEVEMENT_COMPLETE,this.showAchievement,this),s.prototype.destroy.call(this,t),this.achiList=null,this.txtNewAchive=null},u);function u(t){var t=s.call(this,t,l.AlignTo.getCenterX(),0)||this,e=(t.durationWait=240,t.achiList=new Array,new Phaser.GameObjects.Image(t.scene,0,0,r.Atlases.ui,"language-button"));return e.scale=1.2,t.add(e),t.add(new Phaser.GameObjects.Image(t.scene,-180,0,r.Atlases.ui,"medal-gold")),t.txtNewAchive=new h.JDBmpdTextTranslated(t.scene,60,0,r.Fonts.Main,"",30,3421236),t.txtNewAchive.setFitSize(300,a.JDTextFitParam.wordWrap),t.add(t.txtNewAchive),t.hide(),t.scene.game.events.on(c.AchievementManager.EVENT_ACHIEVEMENT_COMPLETE,t.showAchievement,t),t}e.AchievementPanel=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.Logo=void 0,i(1)),a=i(4),i=(s=r.JDImage,n(h,s),h.prototype.update=function(){},h);function h(t){return s.call(this,t,a.AlignTo.getCenterX(),a.AlignTo.getCenterY(-60),"logo")||this}e.Logo=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.SkinSlot=void 0,i(0)),a=i(1),h=i(2),l=i(15),i=(s=i(43).SlotBase,n(c,s),c.prototype.setCurrencyPos=function(){var t=this.txt.width+this.imgCurrency.displayWidth+15,e=this.txt.width/2;this.txt.x=this.txtX-(t/2-e),this.imgCurrency.x=this.txt.x+e+this.imgCurrency.displayWidth/2+15},c.prototype.open=function(){h.AchievementManager.saveAchive(l.AchievesType.skins),this.status=1,this.txt.x=this.txtX,this.imgSkin.visible=!0,this.imgCurrency&&this.imgCurrency.destroy(),h.SkinsManager.saveSkinStatus(this.id,this.status),this.select()},c.prototype.adWatched=function(){this.status+=1,0===this.status?this.open():h.SkinsManager.saveSkinStatus(this.id,this.status)},c.prototype.select=function(){this.bg.setFrame("skins-box-selected"),this.txt.text=h.Localization.getText("selected"),this.txt.setColor(16777215)},c.prototype.unselect=function(){this.bg.setFrame("skins-box"),this.txt.text=h.Localization.getText("take"),this.txt.setColor(5855577)},c.prototype.destroy=function(){s.prototype.destroy.call(this),this.bg=null,this.imgSkin=null,this.txt=null,this.imgCurrency=null},c);function c(t,e,i,o){t=s.call(this,t,e,i,o)||this,t.txtX=-20,t.price=h.SkinsManager.getSkinPrice(o),t.initBg("skins-box"),t.txt=new a.JDBmpdTextFit(t.scene,t.txtX,85,r.Fonts.Main,"",40,1388651),e=h.SkinsManager.getSkin(o);return t.imgSkin=new a.JDImage(t.scene,5,-30,r.Atlases.bike,"skin-"+e),t.imgSkin.scale=.75,"dragon"===e&&(t.imgSkin.x-=10,t.imgSkin.y-=5),t.status=h.SkinsManager.getSkinStatus(o),t.status<0?(t.bg.setFrame("skins-box-garage-lock"),t.imgSkin.visible=!1):0===t.status?(t.bg.setFrame("skins-box-locked"),t.txt.text=""+Math.abs(t.price),t.txt.setColor(16777215),t.imgCurrency=new a.JDImage(t.scene,30,t.txt.y,r.Atlases.ui,"coin-icon-small"),t.add(t.imgCurrency),t.setCurrencyPos()):(t.txt.text=h.Localization.getText("take"),t.txt.setColor(5855577)),t.txt.setFitSize(200),t.add(t.txt),t.add(t.imgSkin),t}e.SkinSlot=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Garage=e.ShowStatus=void 0;var o,s=i(0),n=i(13),r=i(1),a=i(4),h=i(2),i=((i=o=e.ShowStatus||(e.ShowStatus={}))[i.select=0]="select",i[i.buy=1]="buy",i[i.watch=2]="watch",l.prototype.show=function(t){this.skinSlot=t;t=h.SkinsManager.getSkin(this.skinSlot.id);this.skin.setFrame("skin-"+t),this.skin.x=this.imgBg.x+10,this.skin.y=this.imgBg.y-110,"dragon"===t&&(this.skin.x-=20,this.skin.y-=10),this.imgEffect.setFrame(t+"_effects_icon"),this.setButtonStatus()},l.prototype.setButtonStatus=function(){this.imgGate.visible=this.imgProgressBg.visible=this.imgProgress.visible=!1,this.txtDes.setColor(8691095),h.SkinsManager.currSkinID===this.skinSlot.id?(this.btn.image.setFrame("orange-button-small"),this.btn.image.scaleX=1.1,this.btn.txtStroke.text="selected",this.btn.icon.visible=!1,this.btn.txtStroke.x=0,this.onPressStatus=o.select,this.txtDes.text=h.Localization.getText("skinDes0")):this.skinSlot.status<0?(this.txtDes.setColor(16777215),this.btn.image.setFrame("garage-button-big"),this.btn.image.scaleX=1,this.btn.icon.visible=!0,this.btn.icon.setFrame("garage-ads-icon"),this.updateRewardAdStatus(),a.AlignTo.centeredObjectsX2(this.btn.txtStroke,this.btn.txtStroke.txtStroke.width,this.btn.icon,this.btn.icon.width,0,20),this.imgGate.visible=this.imgProgressBg.visible=this.imgProgress.visible=!0,this.onPressStatus=o.watch):0===this.skinSlot.status?(this.btn.txtStroke.text=""+this.skinSlot.price,this.btn.image.setFrame("garage-button-big"),this.btn.image.scaleX=1,this.btn.icon.visible=!0,this.btn.icon.setFrame("garage-coin-icon"),a.AlignTo.centeredObjectsX2(this.btn.txtStroke,this.btn.txtStroke.txtStroke.width,this.btn.icon,this.btn.icon.width,0,20),this.onPressStatus=o.buy,this.txtDes.text=h.Localization.getText("skinDes1")):1===this.skinSlot.status&&(this.btn.image.setFrame("garage-button-big"),this.btn.image.scaleX=1,this.btn.txtStroke.text="take",this.btn.icon.visible=!1,this.btn.txtStroke.x=0,this.onPressStatus=o.select,this.txtDes.text=h.Localization.getText("skinDes0"))},l.prototype.updateRewardAdStatus=function(){var t=Math.abs(h.SkinsManager.getSkinPrice(this.skinSlot.id)),e=(t-Math.abs(this.skinSlot.status))/t;this.txtDes.text=Math.round(100*e)+"%",this.imgProgress.setCrop(0,0,this.imgProgress.width*e,this.imgProgress.height),this.btn.txtStroke.text="+"+Math.round(1/t*100)+"%",e<.25?(this.imgGate.setFrame("garage-curtain-0per"),this.imgGate.x=this.imgBg.x+10):.25<=e&&e<.5?(this.imgGate.setFrame("garage-curtain-25per"),this.imgGate.x=this.imgBg.x+15):.5<=e&&e<.75?(this.imgGate.setFrame("garage-curtain-50per"),this.imgGate.x=this.imgBg.x+20):.75<=e&&(this.imgGate.setFrame("garage-curtain-75per"),this.imgGate.x=this.imgBg.x+25)},l.prototype.destroy=function(){this.imgBg=null,this.skin=null,this.txtDes=null,this.skinSlot=null,this.btn=null,this.imgGate=null,this.imgProgress=null,this.imgProgressBg=null,this.imgEffect=null},l);function l(t,e,i){this.imgBg=t.add.image(e,i,s.Atlases.ui,"garage-box"),this.imgBg.scale=1.2,t.add.image(e+10,i-110,s.Atlases.ui,"garage-back"),this.skin=new r.JDImage(t,e+10,i-110,s.Atlases.bike,""),t.add.existing(this.skin),this.imgEffect=new r.JDImage(t,e+170,i-190,s.Atlases.bike,""),t.add.existing(this.imgEffect),this.imgGate=t.add.image(this.skin.x,this.skin.y-120,s.Atlases.ui,"garage-curtain-0per"),this.imgGate.setOrigin(.5,0),this.imgProgressBg=t.add.image(e-10,i+53,s.Atlases.ui,"garage-progressbar-back"),this.imgProgress=t.add.image(e-10,i+53,s.Atlases.ui,"garage-progressbar"),this.txtDes=new r.JDBmpdTextFit(t,e-10,i+53,s.Fonts.Main,"",32,11322045),t.add.existing(this.txtDes),this.btn=new n.ButtonScale(t,e-30,i+160),this.btn.addImageEvents(s.Atlases.ui,"orange-button-small",0,0,1.1),this.btn.addIcon(s.Atlases.ui,"garage-coin-icon"),this.btn.addTxtStroke("selected",s.Fonts.Main,60,16777215,4013373),this.btn.txtStroke.setFitSize(320),t.add.existing(this.btn.getView())}e.Garage=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.FakePlayer=void 0,i(0)),a=i(1),i=(s=i(22).Entity,n(h,s),h.prototype.initView=function(t){s.prototype.initView.call(this,t),this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.bike,"vex_moto"),t.add(this.view)},h.prototype.spawn=function(t){s.prototype.spawn.call(this,t),this.view.x=t.x,this.view.y=t.y},h.prototype.getX=function(){return this.view.x},h.prototype.getY=function(){return this.view.y},h.prototype.destroy=function(){s.prototype.destroy.call(this),this.view=null},h);function h(){return null!==s&&s.apply(this,arguments)||this}e.FakePlayer=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockBasic=void 0,i(0)),a=i(1),h=i(2),i=(s=i(7).BlockBase,n(l,s),l.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockBasic"),t.add(this.view)},l.prototype.spawn=function(t){t.scaleX=Math.abs(t.scaleX),t.scaleY=Math.abs(t.scaleY),s.prototype.spawn.call(this,t),this.view.setScale(t.scaleX,t.scaleY),this.view.angle=t.angle,this.body.angle=this.spawnData.angle},l.prototype.createBodyFixture=function(){this.body.setRectangle(h.GameData.BASIC_BLOCK_WIDTH*this.spawnData.scaleX,h.GameData.BASIC_BLOCK_HEIGHT*this.spawnData.scaleY),s.prototype.createBodyFixture.call(this)},l);function l(){return null!==s&&s.apply(this,arguments)||this}e.BlockBasic=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockCircular=void 0,i(0)),a=i(1),i=(s=i(10).BlockPolygon,n(h,s),h.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockCircular"),t.add(this.view)},h.prototype.createBodyFixture=function(){this.createPolygon([-200,200,-200,100,-148,95,-86,76,-33,47,16,8,53,-40,79,-92,94,-145,100,-200,200,-200,200,200])},h);function h(){return null!==s&&s.apply(this,arguments)||this}e.BlockCircular=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockBumps=void 0,i(0)),a=i(1),i=(s=i(10).BlockPolygon,n(h,s),h.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockBumps"),t.add(this.view)},h.prototype.createBodyFixture=function(){this.createPolygon([-100,50,-100,-50,-70,-47,-38,-35,0,-29,38,-35,70,-47,100,-50,100,50])},h);function h(){return null!==s&&s.apply(this,arguments)||this}e.BlockBumps=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockSlope=void 0,i(0)),a=i(1),i=(s=i(10).BlockPolygon,n(h,s),h.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockSlope"),t.add(this.view)},h.prototype.createBodyFixture=function(){this.createPolygon([-50,50,50,-50,50,50])},h);function h(){return null!==s&&s.apply(this,arguments)||this}e.BlockSlope=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockSlopeDouble=void 0,i(0)),a=i(1),i=(s=i(10).BlockPolygon,n(h,s),h.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockSlopeDouble"),t.add(this.view)},h.prototype.createBodyFixture=function(){this.createPolygon([-100,50,0,-50,100,50])},h);function h(){return null!==s&&s.apply(this,arguments)||this}e.BlockSlopeDouble=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockHill=void 0,i(0)),a=i(1),i=(s=i(10).BlockPolygon,n(h,s),h.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockHill"),t.add(this.view)},h.prototype.createBodyFixture=function(){this.createPolygon([-150,150,-150,50,-112,34,-59,-3,-20,-37,13,-71,53,-112,79,-130,111,-145,150,-150,150,150])},h);function h(){return null!==s&&s.apply(this,arguments)||this}e.BlockHill=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockHill2=void 0,i(0)),a=i(1),i=(s=i(10).BlockPolygon,n(h,s),h.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockHill2"),t.add(this.view)},h.prototype.createBodyFixture=function(){this.createPolygon([-150,100,-150,0,-104,-17,-67,-37,-23,-73,-6,-89,16,-100,150,-100,150,100])},h);function h(){return null!==s&&s.apply(this,arguments)||this}e.BlockHill2=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockAngle=void 0,i(0)),a=i(1),i=(s=i(10).BlockPolygon,n(h,s),h.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockAngle"),t.add(this.view),this.view.setOrigin(0,1)},h.prototype.createBodyFixture=function(){this.createPolygon([0,0,0,-100,109,-100,135,-106,160,-120,181,-140,241,-199,311,-129,241,-59,209,-32,170,-12,121,0])},h);function h(){return null!==s&&s.apply(this,arguments)||this}e.BlockAngle=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockRoad02=void 0,i(0)),a=i(1),i=(s=i(10).BlockPolygon,n(h,s),h.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockRoad02"),t.add(this.view),this.view.setOrigin(0,1)},h.prototype.createBodyFixture=function(){this.createPolygon([0,0,0,-100,64,-100,130,-116,200,-150,258,-200,294,-252,318,-300,400,-300,400,-200,380,-200,356,-162,324,-124,276,-83,231,-54,183,-30,132,-12,84,0])},h);function h(){return null!==s&&s.apply(this,arguments)||this}e.BlockRoad02=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockRoadHalfCircle=void 0,i(0)),a=i(1),h=i(6),l=i(2),c=i(3),i=(s=i(10).BlockPolygon,n(u,s),u.prototype.initBody=function(t){s.prototype.initBody.call(this,h.Box2DBodyType.dynamic)},u.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockRoadHalfCircle"),t.add(this.view)},u.prototype.spawn=function(t){t.scaleX=t.scale,t.scaleY=t.scale,s.prototype.spawn.call(this,t),this.view.setOrigin(t.anchorX,t.anchorY),this.joint&&h.Box2DWorld.world.world.DestroyJoint(this.joint),this.joint=h.Box2DWorld.world.revoluteJoint(this.body,h.Box2DWorld.world.getGroundBody(),0,0,this.spawnData.x,this.spawnData.y)},u.prototype.reset=function(){s.prototype.reset.call(this),this.body.angle=this.spawnData.angle,this.view.rotation=this.body.rotation,this.body.setZeroAngularVelocity(),this.body.setZeroVelocity()},u.prototype.createBodyFixture=function(){for(var t=[0,0,200,0,196,24,182,57,161,77,132,94,100,100,68,94,39,77,18,57,4,24],e=0;e<t.length;e+=2)t[e]-=200*this.spawnData.anchorX,t[e+1]-=100*this.spawnData.anchorY;this.createPolygon(t),this.body.mass*=l.GameData.getConfigParam(c.GameConfig.blockHalfCircleMassCoef)},u.prototype.update=function(){s.prototype.update.call(this),this.view.rotation=this.body.rotation},u.prototype.remove=function(){this.joint&&h.Box2DWorld.world.world.DestroyJoint(this.joint),s.prototype.remove.call(this)},u.prototype.destroy=function(){s.prototype.destroy.call(this),this.joint=null},u);function u(){return null!==s&&s.apply(this,arguments)||this}e.BlockRoadHalfCircle=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockTilt=void 0,i(0)),a=i(1),h=i(6),l=i(2),c=i(3),i=(s=i(7).BlockBase,n(u,s),u.prototype.initBody=function(t){s.prototype.initBody.call(this,h.Box2DBodyType.dynamic),this.body.data.SetUserData({id:c.ITEM_ID.blockTilt,canTnt:!0,link:this})},u.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockTilt"),t.add(this.view),this.screw=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockTilt_screw"),this.screw.scale=.6,t.add(this.screw)},u.prototype.spawn=function(t){s.prototype.spawn.call(this,t),this.view.scaleX=t.scaleX/2,this.view.scaleY=t.scaleY/2,this.view.setOrigin(this.spawnData.anchorX,this.spawnData.anchorY),this.joint&&h.Box2DWorld.world.world.DestroyJoint(this.joint),this.joint=h.Box2DWorld.world.revoluteJoint(this.body,h.Box2DWorld.world.getGroundBody(),0,0,this.spawnData.x,this.spawnData.y)},u.prototype.reset=function(){s.prototype.reset.call(this),this.body.angle=this.spawnData.angle,this.view.rotation=this.body.rotation,this.body.setZeroAngularVelocity(),this.body.setZeroVelocity(),this.screw.x=this.view.x,this.screw.y=this.view.y},u.prototype.createBodyFixture=function(){var t=200*this.spawnData.scaleX,e=50*this.spawnData.scaleY,i=t/2-t*this.spawnData.anchorX,o=e/2-e*this.spawnData.anchorY;this.body.setRectangle(t,e,i,o),s.prototype.createBodyFixture.call(this),this.body.mass*=l.GameData.getConfigParam(c.GameConfig.blockTiltMassCoef)},u.prototype.update=function(){s.prototype.update.call(this),this.view.rotation=this.body.rotation},u.prototype.remove=function(){this.joint&&h.Box2DWorld.world.world.DestroyJoint(this.joint),this.screw.destroy(),s.prototype.remove.call(this)},u.prototype.destroy=function(){s.prototype.destroy.call(this),this.joint=null,this.screw=null},u);function u(){return null!==s&&s.apply(this,arguments)||this}e.BlockTilt=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockRoadPiece03=void 0,i(0)),a=i(1),i=(s=i(10).BlockPolygon,n(h,s),h.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockRoadPiece03"),t.add(this.view)},h.prototype.createBodyFixture=function(){this.createPolygon([-100,100,-100,-100,-53,-94,-8,-77,31,-49,59,-19,81,17,96,60,100,100])},h);function h(){return null!==s&&s.apply(this,arguments)||this}e.BlockRoadPiece03=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockRoadPiece04=void 0,i(0)),a=i(1),i=(s=i(10).BlockPolygon,n(h,s),h.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockRoadPiece04"),t.add(this.view)},h.prototype.createBodyFixture=function(){this.createPolygon([-200,0,-89,0,-50,-25,-9,-63,30,-85,82,-100,200,-100,200,0,91,0,48,21,4,61,-37,88,-79,100,-200,100])},h);function h(){return null!==s&&s.apply(this,arguments)||this}e.BlockRoadPiece04=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockRoadPiece05=void 0,i(0)),a=i(1),i=(s=i(10).BlockPolygon,n(h,s),h.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockRoadPiece05"),t.add(this.view)},h.prototype.createBodyFixture=function(){this.createPolygon([-100,0,-100,-100,-69,-98,-38,-90,-8,-77,19,-60,42,-42,60,-20,76,6,90,37,98,72,100,100,0,100,-4,72,-14,48,-34,24,-65,6])},h);function h(){return null!==s&&s.apply(this,arguments)||this}e.BlockRoadPiece05=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockRoadPiece06=void 0,i(0)),a=i(1),i=(s=i(10).BlockPolygon,n(h,s),h.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockRoadPiece06"),t.add(this.view)},h.prototype.createBodyFixture=function(){this.createPolygon([-200,-100,-200,-200,-137,-196,-83,-183,-22,-158,29,-128,72,-94,109,-54,137,-15,164,33,181,79,194,132,200,200,100,200,96,156,87,113,68,66,43,25,15,-9,-18,-39,-66,-69,-130,-92])},h);function h(){return null!==s&&s.apply(this,arguments)||this}e.BlockRoadPiece06=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockRoadPiece08=void 0,i(0)),a=i(1),i=(s=i(10).BlockPolygon,n(h,s),h.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockRoadPiece08"),t.add(this.view)},h.prototype.createBodyFixture=function(){this.createPolygon([-200,100,-200,0,-123,0,-82,-8,-46,-25,-12,-45,23,-72,37,-84,55,-94,76,-100,200,-100,200,0,92,0,51,32,12,56,-16,72,-46,84,-82,94,-115,100])},h);function h(){return null!==s&&s.apply(this,arguments)||this}e.BlockRoadPiece08=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockRoadPiece09=void 0,i(0)),a=i(1),i=(s=i(10).BlockPolygon,n(h,s),h.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockRoadPiece09"),t.add(this.view)},h.prototype.spawn=function(t){t.scaleX=t.scale,t.scaleY=t.scale,t.angle=0,s.prototype.spawn.call(this,t)},h.prototype.createBodyFixture=function(){this.body.setCircle(50*this.spawnData.scaleX)},h);function h(){return null!==s&&s.apply(this,arguments)||this}e.BlockRoadPiece09=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockRoadPiece10=void 0,i(0)),a=i(1),i=(s=i(10).BlockPolygon,n(h,s),h.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockRoadPiece10"),t.add(this.view)},h.prototype.spawn=function(t){t.scaleX=t.scale,t.scaleY=t.scale,t.angle=0,s.prototype.spawn.call(this,t)},h.prototype.createBodyFixture=function(){this.body.setCircle(200*this.spawnData.scaleX)},h);function h(){return null!==s&&s.apply(this,arguments)||this}e.BlockRoadPiece10=i},function(t,e,i){"use strict";var o,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.BlockFalling=void 0;var a,n,r=i(0),h=i(1),l=i(2),c=i(3),u=i(8),i=i(7),d=((d=a=a||{})[d.wait=0]="wait",d[d.shake=1]="shake",d[d.falling=2]="falling",d[d.checkRespawn=3]="checkRespawn",n=i.BlockBase,s(p,n),p.prototype.initView=function(t){this.view=new h.JDContainer(this.world.scene,0,0),t.add(this.view),this.image=new h.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockFalling"),this.image.scale=.5,this.view.add(this.image),this.arrowAnimation=new h.JDImageAnimAdobe(this.world.scene,0,0,r.Atlases.gameplayAnims,"blockFallingArrow",1),this.arrowAnimation.scale=.5,this.view.add(this.arrowAnimation),this.timeShaking=l.GameData.getConfigParam(c.GameConfig.blockFallingTimeShake),this.timeRespawn=l.GameData.getConfigParam(c.GameConfig.blockFallingRespawnTime)},p.prototype.initBody=function(){n.prototype.initBody.call(this),this.body.fixedRotation=!0},p.prototype.start=function(){n.prototype.start.call(this),this.body.setContactCallback(null,this.onContact,this)},p.prototype.spawn=function(t){n.prototype.spawn.call(this,t),this.isColliding=!1,this.view.setScale(t.scaleX,t.scaleY),this.hideY=this.spawnData.y+300},p.prototype.reset=function(){n.prototype.reset.call(this),this.body.setZeroVelocity(),this.body.sensor=!1,this.view.alpha=1,this.currState=a.wait,this.resetState(),this.body.setCollisionMask(u.BodyCollisionFilter.DELAULT_MASK)},p.prototype.resetState=function(){this.body.static=!0,this.arrowAnimation.playFrames(1,24,-1,30)},p.prototype.update=function(){n.prototype.update.call(this),this.arrowAnimation.update(),this.currState===a.wait?this.view.alpha<1&&(this.view.alpha+=.02):this.currState===a.shake?(this.view.x=this.spawnData.x-2+4*Math.random(),this.counter+=1,this.counter>this.timeShaking&&(this.body.dynamic=!0,this.body.setCollisionMask(u.BodyCollisionFilter.PLAYER),this.currState=a.falling,l.SoundManager.playSFX("fallingBlock"))):this.currState===a.falling?(this.view.alpha-=.02,this.body.x=this.spawnData.x,this.body.velocity.x=0,this.updateView(this.body.x,this.body.y),(this.view.y>this.hideY||this.view.alpha<=0)&&(l.SoundManager.playSFX("fallingBlockHide"),this.body.sensor=!0,this.currState=a.checkRespawn,this.resetState(),n.prototype.reset.call(this),this.counter=0)):this.currState===a.checkRespawn&&(this.counter+=1,this.counter>this.timeRespawn)&&!1===this.isColliding&&(this.body.sensor=!1,this.currState=a.wait,this.body.setCollisionMask(u.BodyCollisionFilter.DELAULT_MASK))},p.prototype.createBodyFixture=function(){var t=l.GameData.BASIC_BLOCK_HEIGHT*this.spawnData.scaleY;this.halfH=t/2,this.body.setRectangle(l.GameData.BASIC_BLOCK_WIDTH*this.spawnData.scaleX-2,t),n.prototype.createBodyFixture.call(this)},p.prototype.onContact=function(t,e,i,o,s,n){var r=e.data.GetUserData();!r||!0===s&&t.y-this.halfH<e.y||r.id===c.ITEM_ID.player+"wheel"&&(this.isColliding=s,!0===this.isColliding)&&this.currState===a.wait&&(this.currState=a.shake,this.counter=0)},p.prototype.getInteractive=function(){return this.image},p.prototype.destroy=function(){n.prototype.destroy.call(this),this.view=null,this.image=null,this.arrowAnimation=null},p);function p(){return null!==n&&n.apply(this,arguments)||this}e.BlockFalling=d},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockSpeed=void 0,i(0)),a=i(1),h=i(2),l=i(3),i=(s=i(7).BlockBase,n(c,s),c.prototype.init=function(){s.prototype.init.call(this)},c.prototype.initView=function(t){this.view=new a.JDContainer(this.world.scene,0,0),t.add(this.view),this.image=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockSpeed"),this.image.scale=.5,this.view.add(this.image),this.arrowAnimation=new a.JDImageAnimAdobe(this.world.scene,0,0,r.Atlases.gameplayAnims,"blockSpeedArrow",1),this.arrowAnimation.scale=.5,this.view.add(this.arrowAnimation)},c.prototype.initBody=function(){s.prototype.initBody.call(this),this.body.setContactCallback(null,this.onContact,this)},c.prototype.onContact=function(t,e,i,o,s,n){!0!==o.IsSensor()&&((e=(o=e).data.GetUserData())&&e.id&&e.id===l.ITEM_ID.player+"wheel"&&(o=this.world.player.getBody()),!0===s?this.arr.push(o):0<=(e=this.arr.indexOf(o))&&this.arr.splice(e,1))},c.prototype.createBodyFixture=function(){this.body.setRectangle(h.GameData.BASIC_BLOCK_WIDTH*Math.abs(this.spawnData.scaleX),h.GameData.BASIC_BLOCK_HEIGHT*Math.abs(this.spawnData.scaleY)).SetFriction(.2),s.prototype.createBodyFixture.call(this)},c.prototype.spawn=function(t){s.prototype.spawn.call(this,t),this.view.setScale(t.scaleX,t.scaleY),this.view.angle=t.angle,this.body.rotation=this.view.rotation;t=h.GameData.getConfigParam(l.GameConfig.blockSpeedSpeed)*(t.scaleX*t.scaleY);this.speedX=Math.cos(this.view.rotation)*t,this.speedY=Math.sin(this.view.rotation)*t},c.prototype.reset=function(){s.prototype.reset.call(this),this.arr=[],this.arrowAnimation.playFrames(1,24,-1,30)},c.prototype.update=function(){var t;s.prototype.update.call(this),this.arrowAnimation.update();for(var e=this.world.player.getBody(),i=!1,o=0;o<this.arr.length;o++){if((t=this.arr[o])===e){if(!0===i)continue;i=!0}t.applyForce(this.speedX,this.speedY)}},c.prototype.getInteractive=function(){return this.image},c.prototype.destroy=function(){s.prototype.destroy.call(this),this.arr=null,this.view=null,this.image=null,this.arrowAnimation=null},c);function c(){return null!==s&&s.apply(this,arguments)||this}e.BlockSpeed=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockBounce=void 0,i(0)),a=i(1),h=i(4),l=i(2),c=i(3),i=(s=i(7).BlockBase,n(u,s),u.prototype.initView=function(t){this.view=new a.JDContainer(this.world.scene,0,0),t.add(this.view),this.image=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockBounce"),this.view.add(this.image),this.image.scale=.5,this.image.setOrigin(.5,1),this.arrowAnimation=new a.JDImageAnimAdobe(this.world.scene,0,0,r.Atlases.gameplayAnims,"blockBounceArrow",1),this.arrowAnimation.scale=.5,this.view.add(this.arrowAnimation),this.arrowAnimation.setOrigin(.5,1),this.power=l.GameData.getConfigParam(c.GameConfig.blockBouncePower)},u.prototype.createBodyFixture=function(){var t=l.GameData.BASIC_BLOCK_WIDTH*this.spawnData.scaleX,e=l.GameData.BASIC_BLOCK_HEIGHT*this.spawnData.scaleY;this.body.setRectangle(t,e,0,-e/2),s.prototype.createBodyFixture.call(this),this.body.setContactCallback(null,this.onContact,this)},u.prototype.onContact=function(t,e,i,o,s,n){if(!1!==s&&!0!==o.IsSensor()){s=e.data.GetUserData();if(s){if("particle"===s.id)return;if(s.id===c.ITEM_ID.player&&"playerBody"===i.GetUserData()||s.id===c.ITEM_ID.player+"wheel")return void this.applyImpulse(this.world.player.getBody())}this.applyImpulse(e)}},u.prototype.applyImpulse=function(t){l.SoundManager.playSFX("bounce1"),t.angularVelocity=0;var e=this.view.rotation+h.Tools.PI05,e=new box2d.b2Vec2(Math.cos(e),Math.sin(e)),i=(e.Normalize(),t.data.GetLinearVelocity()),o=i.x*e.x+i.y*e.y,o=new box2d.b2Vec2(e.x*o,e.y*o),i=new box2d.b2Vec2(i.x-o.x,i.y-o.y),o=(t.data.SetLinearVelocity(i),this.power*this.view.scaleY*t.mass);e.SelfMul(o),t.data.ApplyLinearImpulse(e,t.data.GetWorldCenter()),this.world.scene.tweens.killTweensOf(this.view),this.view.scaleY=this.spawnData.scaleY-.25,this.world.scene.add.tween({targets:this.view,scaleY:this.spawnData.scaleY,duration:400,ease:function(t){return Phaser.Math.Easing.Elastic.Out(t,.1,.4)}})},u.prototype.spawn=function(t){s.prototype.spawn.call(this,t),this.view.setScale(t.scaleX,t.scaleY),this.body.angle=t.angle,this.view.rotation=this.body.rotation},u.prototype.reset=function(){s.prototype.reset.call(this),this.view.setScale(this.spawnData.scaleX,this.spawnData.scaleY),this.arrowAnimation.playFrames(1,24,-1,30)},u.prototype.update=function(){s.prototype.update.call(this),this.arrowAnimation.update()},u.prototype.getInteractive=function(){return this.image},u.prototype.destroy=function(){s.prototype.destroy.call(this),this.view=null,this.image=null,this.arrowAnimation=null},u);function u(){return null!==s&&s.apply(this,arguments)||this}e.BlockBounce=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockInvis=void 0,i(0)),a=i(1),h=i(4),l=i(2),c=i(3),i=(s=i(7).BlockBase,n(u,s),u.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockInvis"),t.add(this.view),this.range=l.GameData.getConfigParam(c.GameConfig.blockInvisibleRangeDissapears)},u.prototype.createBodyFixture=function(){this.body.setRectangle(l.GameData.BASIC_BLOCK_WIDTH*this.spawnData.scaleX,l.GameData.BASIC_BLOCK_HEIGHT*this.spawnData.scaleY),s.prototype.createBodyFixture.call(this)},u.prototype.start=function(){s.prototype.start.call(this)},u.prototype.spawn=function(t){s.prototype.spawn.call(this,t),this.view.setScale(t.scaleX/2,t.scaleY/2)},u.prototype.reset=function(){s.prototype.reset.call(this)},u.prototype.update=function(){s.prototype.update.call(this);var t=this.world.player,t=h.Tools.distance(this.view.x,this.view.y,t.getX(),t.getY());t>this.range?this.view.alpha=1:(t=t/this.range,this.view.alpha=t<.5?0:2*(t-.5))},u.prototype.setDebug=function(t){this.view.alpha=1},u.prototype.destroy=function(){s.prototype.destroy.call(this),this.view=null},u);function u(){return null!==s&&s.apply(this,arguments)||this}e.BlockInvis=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockInvisMoving=void 0,i(0)),a=i(1),h=i(4),l=i(2),c=i(3),i=(s=i(67).BlockMoving,n(u,s),u.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockInvis"),t.add(this.view),this.range=l.GameData.getConfigParam(c.GameConfig.blockInvisibleRangeDissapears)},u.prototype.update=function(){s.prototype.update.call(this);var t=this.world.player,t=h.Tools.distance(this.view.x,this.view.y,t.getX(),t.getY());t>this.range?this.view.alpha=1:(t=t/this.range,this.view.alpha=t<.5?0:2*(t-.5))},u.prototype.setDebug=function(t){this.view.alpha=1},u);function u(){return null!==s&&s.apply(this,arguments)||this}e.BlockInvisMoving=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockInvisVertical=void 0,i(0)),a=i(1),h=i(4),l=i(2),c=i(3),i=(s=i(65).BlockVertical,n(u,s),u.prototype.initView=function(t){this.view=new a.JDContainer(this.world.scene,0,0),t.add(this.view),this.image=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockInvis"),this.image.scale=.5,this.view.add(this.image),this.arrowAnimation=new a.JDImageAnimAdobe(this.world.scene,0,0,r.Atlases.gameplayAnims,"blockInvisArrowUp",1),this.arrowAnimation.scale=.5,this.view.add(this.arrowAnimation),this.range=l.GameData.getConfigParam(c.GameConfig.blockInvisibleRangeDissapears)},u.prototype.reset=function(){s.prototype.reset.call(this),this.arrowAnimation.playFrames(1,24,-1,30)},u.prototype.update=function(){s.prototype.update.call(this),this.arrowAnimation.update();var t=this.world.player,t=h.Tools.distance(this.view.x,this.view.y,t.getX(),t.getY());t>this.range?this.view.alpha=1:(t=t/this.range,this.view.alpha=t<.5?0:2*(t-.5))},u.prototype.getInteractive=function(){return this.image},u.prototype.setDebug=function(t){this.view.alpha=1},u.prototype.destroy=function(){s.prototype.destroy.call(this),this.view=null,this.image=null,this.arrowAnimation=null},u);function u(){return null!==s&&s.apply(this,arguments)||this}e.BlockInvisVertical=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockInvisHorizontal=void 0,i(0)),a=i(1),h=i(4),l=i(2),c=i(3),i=(s=i(66).BlockHorizontal,n(u,s),u.prototype.initView=function(t){this.view=new a.JDContainer(this.world.scene,0,0),t.add(this.view),this.image=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockInvis"),this.image.scale=.5,this.view.add(this.image),this.arrowAnimation=new a.JDImageAnimAdobe(this.world.scene,0,0,r.Atlases.gameplayAnims,"blockInvisArrowUp",1),this.arrowAnimation.rotation=h.Tools.PI05,this.arrowAnimation.scale=.5,this.view.add(this.arrowAnimation),this.range=l.GameData.getConfigParam(c.GameConfig.blockInvisibleRangeDissapears)},u.prototype.reset=function(){s.prototype.reset.call(this),this.arrowAnimation.playFrames(1,24,-1,30)},u.prototype.update=function(){s.prototype.update.call(this),this.arrowAnimation.update();var t=this.world.player,t=h.Tools.distance(this.view.x,this.view.y,t.getX(),t.getY());t>this.range?this.view.alpha=1:(t=t/this.range,this.view.alpha=t<.5?0:2*(t-.5))},u.prototype.getInteractive=function(){return this.image},u.prototype.setDebug=function(t){this.view.alpha=1},u.prototype.destroy=function(){s.prototype.destroy.call(this),this.view=null,this.image=null,this.arrowAnimation=null},u);function u(){return null!==s&&s.apply(this,arguments)||this}e.BlockInvisHorizontal=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockPush=void 0,i(0)),a=i(1),h=i(6),l=i(2),c=i(3),u=i(8),i=(s=i(7).BlockBase,n(d,s),d.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockPush"),t.add(this.view)},d.prototype.spawn=function(t){t.scaleX=Math.abs(t.scaleX),t.scaleY=Math.abs(t.scaleY),s.prototype.spawn.call(this,t),this.view.setScale(t.scaleX/2,t.scaleY/2),this.body.mass=l.GameData.getConfigParam(c.GameConfig.blockPushMass)*(t.scaleX*t.scaleY)},d.prototype.initBody=function(){s.prototype.initBody.call(this,h.Box2DBodyType.dynamic),this.body.data.SetUserData({canTnt:!0})},d.prototype.update=function(){this.updateView(this.body.x,this.body.y),this.view.rotation=this.body.rotation},d.prototype.reset=function(){this.body.setZeroVelocity(),this.body.setZeroAngularVelocity(),this.body.angle=this.spawnData.angle,this.view.rotation=this.body.rotation,s.prototype.reset.call(this)},d.prototype.createBodyFixture=function(){this.body.setRectangle(l.GameData.BASIC_BLOCK_WIDTH*this.spawnData.scaleX-2,l.GameData.BASIC_BLOCK_HEIGHT*this.spawnData.scaleY-2).SetFriction(.3),this.body.setCollisionCategory(u.BodyCollisionFilter.DEFAULT)},d);function d(){return null!==s&&s.apply(this,arguments)||this}e.BlockPush=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockAppearing=void 0,i(0)),a=i(1),h=i(2),l=i(3),i=(s=i(7).BlockBase,n(c,s),c.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockAppearing"),t.add(this.view),this.apper=1-h.GameData.getConfigParam(l.GameConfig.blockAppearingApper),this.disapper=1-h.GameData.getConfigParam(l.GameConfig.blockAppearingDisapper)},c.prototype.createBodyFixture=function(){this.body.setRectangle(h.GameData.BASIC_BLOCK_WIDTH*this.spawnData.scaleX,h.GameData.BASIC_BLOCK_HEIGHT*this.spawnData.scaleY),s.prototype.createBodyFixture.call(this)},c.prototype.spawn=function(t){s.prototype.spawn.call(this,t),this.body.angle=t.angle,this.view.setScale(t.scaleX,t.scaleY),this.view.rotation=this.body.rotation,this.timeShow=t.timeShow,this.timeHide=t.timeHide,this.initVisible=t.visible},c.prototype.reset=function(){s.prototype.reset.call(this),1===this.initVisible?this.show():this.hide()},c.prototype.update=function(){s.prototype.update.call(this),this.actTime+=1,!0===this.active?(this.view.alpha=1,this.actTime>=this.timeHide*this.disapper&&(this.view.tint=30583),this.actTime>=this.timeHide&&this.hide()):(this.view.alpha=0,this.actTime>=this.timeShow*this.apper&&(this.view.alpha=.2,this.view.tint=16777215),this.actTime>=this.timeShow&&this.show())},c.prototype.show=function(){this.actTime=0,this.active=!0,this.body.data.SetActive(!0),this.view.alpha=1},c.prototype.hide=function(){this.actTime=0,this.active=!1,this.body.data.SetActive(!1),this.view.alpha=0},c.prototype.setDebug=function(t){this.view.alpha=1},c.prototype.destroy=function(){s.prototype.destroy.call(this),this.view=null},c);function c(){return null!==s&&s.apply(this,arguments)||this}e.BlockAppearing=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockSpikes=void 0,i(0)),a=i(1),h=i(2),l=i(3),c=i(68),i=(s=i(7).BlockBase,n(u,s),u.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockBasic"),t.add(this.view),this.velocity=h.GameData.getConfigParam(l.GameConfig.blockSpikeVelocity)},u.prototype.spawn=function(t){s.prototype.spawn.call(this,t),this.view.x=this.spawnData.x,this.view.y=this.spawnData.y,this.timeDown=this.spawnData.timeDown,this.timeUp=this.spawnData.timeUp,t.upEnable&&this.enableSpike("up"),t.downEnable&&this.enableSpike("down"),t.leftEnable&&this.enableSpike("left"),t.rightEnable&&this.enableSpike("right");t=this.isSpikeUp?this.spikeBlockUp:this.spikeBlockDown;this.spikesUp&&this.spikesUp.spawn({x:this.spawnData.x,y:this.spawnData.y-this.offPos-t,angle:0}),this.spikesDown&&this.spikesDown.spawn({x:this.spawnData.x,y:this.spawnData.y+this.offPos+t,angle:180}),this.spikesLeft&&this.spikesLeft.spawn({x:this.spawnData.x-this.offPos-t,y:this.spawnData.y,angle:-90}),this.spikesRight&&this.spikesRight.spawn({x:this.spawnData.x+this.offPos+t,y:this.spawnData.y,angle:90})},u.prototype.createBodyFixture=function(){this.body.setRectangle(h.GameData.BASIC_BLOCK_WIDTH,h.GameData.BASIC_BLOCK_HEIGHT),s.prototype.createBodyFixture.call(this)},u.prototype.enableSpike=function(t){"up"===t?this.spikesUp||(this.spikesUp=new c.ObstacleHighSpikes(this.world,this.world.layerObstacles)):"down"===t?this.spikesDown||(this.spikesDown=new c.ObstacleHighSpikes(this.world,this.world.layerObstacles)):"left"===t?this.spikesLeft||(this.spikesLeft=new c.ObstacleHighSpikes(this.world,this.world.layerObstacles)):"right"!==t||this.spikesRight||(this.spikesRight=new c.ObstacleHighSpikes(this.world,this.world.layerObstacles))},u.prototype.update=function(){var t,e;!1!==this.active&&(!0===this.isDelay?(--this.actTime,this.actTime<=0&&(this.isDelay=!1)):(t=this.velocity,this.spikeMove=this.spikeMove+t,e=Math.abs(this.spikeBlockDown-this.spikeBlockUp),this.spikeMove>=e&&(t=e-(this.spikeMove-t),this.spikeMove=0),this.isSpikeUp&&(t*=-1),this.spikesUp&&this.spikesUp.moveY(-t),this.spikesDown&&this.spikesDown.moveY(t),this.spikesLeft&&this.spikesLeft.moveX(-t),this.spikesRight&&this.spikesRight.moveX(t),0===this.spikeMove&&(this.isSpikeUp=!this.isSpikeUp,this.isDelay=!0,this.actTime=this.isSpikeUp?this.timeUp:this.timeDown)))},u.prototype.trigger=function(t){this.active=!0},u.prototype.reset=function(){s.prototype.reset.call(this),this.active=!0,0<this.spawnData.currID&&(this.active=!1),this.spikeMove=0,this.isSpikeUp=this.spawnData.spikeUp,this.actTime=this.isSpikeUp?this.timeDown:this.timeUp,this.isDelay=!0;var t=this.isSpikeUp?this.spikeBlockUp:this.spikeBlockDown;this.spikesUp&&this.spikesUp.setY(this.spawnData.y-this.offPos-t),this.spikesDown&&this.spikesDown.setY(this.spawnData.y+this.offPos+t),this.spikesLeft&&this.spikesLeft.setX(this.spawnData.x-this.offPos-t),this.spikesRight&&this.spikesRight.setX(this.spawnData.x+this.offPos+t)},u.prototype.remove=function(){this.spikesUp&&this.spikesUp.remove(),this.spikesDown&&this.spikesDown.remove(),this.spikesLeft&&this.spikesLeft.remove(),this.spikesRight&&this.spikesRight.remove(),s.prototype.remove.call(this)},u.prototype.destroy=function(){this.spikesUp=null,this.spikesDown=null,this.spikesLeft=null,this.spikesRight=null,s.prototype.destroy.call(this)},u);function u(){var t=null!==s&&s.apply(this,arguments)||this;return t.spikeBlockUp=-10,t.spikeBlockDown=-70,t.offPos=74,t}e.BlockSpikes=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockDissapear=void 0,i(2)),i=(s=i(7).BlockBase,n(a,s),a.prototype.initView=function(t){},a.prototype.spawn=function(t){t.scaleX=Math.abs(t.scaleX),t.scaleY=Math.abs(t.scaleY),s.prototype.spawn.call(this,t),this.body.angle=this.spawnData.angle,this.delay=this.spawnData.delay},a.prototype.reset=function(){s.prototype.reset.call(this),this.counter=-1,0<=this.spawnData.currID?this.body.active=!0:this.body.active=!1},a.prototype.trigger=function(t){s.prototype.trigger.call(this,t),this.counter=0},a.prototype.update=function(){s.prototype.update.call(this),0<=this.counter&&(this.counter+=1,this.counter>=this.delay)&&(this.counter=-1,0<=this.spawnData.currID?this.body.active=!1:this.body.active=!0)},a.prototype.createBodyFixture=function(){this.body.setRectangle(r.GameData.BASIC_BLOCK_WIDTH*this.spawnData.scaleX,r.GameData.BASIC_BLOCK_HEIGHT*this.spawnData.scaleY),s.prototype.createBodyFixture.call(this)},a.prototype.updateView=function(t,e){},a);function a(){return null!==s&&s.apply(this,arguments)||this}e.BlockDissapear=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockTNT=void 0,i(0)),a=i(1),h=i(6),l=i(4),c=i(2),u=i(15),d=i(3),p=i(8),i=(s=i(7).BlockBase,n(f,s),f.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockTNT"),t.add(this.view)},f.prototype.spawn=function(t){t.scaleX=Math.abs(t.scaleX),t.scaleY=Math.abs(t.scaleY),this.view.setScale(t.scaleX/3,t.scaleY/3),s.prototype.spawn.call(this,t),this.delay=this.spawnData.delay;t=c.GameData.getConfigParam(d.GameConfig.blockTntExplosionPower);0!==this.spawnData.power&&(t=this.spawnData.power),this.power=t*this.view.scale*3},f.prototype.initBody=function(t){s.prototype.initBody.call(this,h.Box2DBodyType.dynamic)},f.prototype.createBodyFixture=function(){this.body.setRectangle(c.GameData.BASIC_BLOCK_WIDTH*this.spawnData.scaleX-4,c.GameData.BASIC_BLOCK_HEIGHT*this.spawnData.scaleY-4);var t=c.GameData.getConfigParam(d.GameConfig.blockTntExplosionRadius),t=(0!==this.spawnData.radius&&(t=this.spawnData.radius),this.body.addCircle(t*this.view.scale*3));t.SetSensor(!0),t.SetUserData("explosionRadius"),t.SetDensity(1e-11),this.body.data.ResetMassData(),this.body.setCollisionCategory(p.BodyCollisionFilter.DEFAULT)},f.prototype.reset=function(){s.prototype.reset.call(this),this.body.setZeroAngularVelocity(),this.body.setZeroVelocity(),this.body.angle=this.spawnData.angle,this.view.rotation=this.body.rotation,this.counter=-1,this.view.visible=!0,this.body.active=!0},f.prototype.trigger=function(t){!1!==this.view.visible&&(s.prototype.trigger.call(this,t),this.counter=0)},f.prototype.update=function(){if(s.prototype.update.call(this),0<=this.counter&&(this.counter+=1,this.counter>=this.delay)){!(this.counter=-1)===f.delaySound&&(c.SoundManager.playSFX("explosion"),f.delaySound=!0,setTimeout(function(){f.delaySound=!1},100)),c.AchievementManager.saveAchive(u.AchievesType.tntBlock),this.world.particleManager.showExplosion(this.view.x,this.view.y,1.2*this.spawnData.scaleX),this.world.shake();for(var t=this.body.data.GetContactList();t;){var e,i=t.contact;i.IsTouching()&&(e=void 0,"explosionRadius"===i.GetFixtureB().GetUserData()?(e=i.GetFixtureA().GetBody(),this.pushBody(e)):"explosionRadius"===i.GetFixtureA().GetUserData()&&(e=i.GetFixtureB().GetBody(),this.pushBody(e))),t=t.next}this.hide()}this.updateView(this.body.x,this.body.y),this.view.rotation=this.body.rotation},f.prototype.pushBody=function(t){var e,i,o,s,n=t.GetUserData();n&&n.canTnt&&(n.id===d.ITEM_ID.blockTilt?(o=0,e=t.parent,s=l.Tools.toRad(30),i=l.Tools.toRad(150),o=e.x>this.body.x?e.y>this.body.y||e.rotation>-s&&e.rotation<s?1:-1:e.y<this.body.y?e.rotation>s&&e.rotation<i?1:-1:e.rotation>s&&e.rotation<i||e.rotation<-s&&e.rotation>-i?-1:1,t.ApplyAngularImpulse(o*this.power*(t.parent.mass/2))):n.id!==d.ITEM_ID.blockGlass?((s=t.GetPosition()).SelfSub(this.body.data.GetPosition()),s.Normalize(),s.SelfMul(this.power),t.ApplyLinearImpulse(s,t.GetWorldCenter())):n.link.explode())},f.prototype.hide=function(){this.view.visible=!1,this.body.active=!1},f.prototype.destroy=function(){s.prototype.destroy.call(this)},f.delaySound=!1,f);function f(){return null!==s&&s.apply(this,arguments)||this}e.BlockTNT=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockIce=void 0,i(0)),a=i(2),h=i(3),i=(s=i(7).BlockBase,n(l,s),l.prototype.initView=function(t){this.view=new Phaser.GameObjects.TileSprite(this.world.scene,0,0,this.size,this.size,r.Atlases.gameplay,"blockIce"),t.add(this.view)},l.prototype.spawn=function(t){t.scaleX=Math.abs(t.scaleX),t.scaleY=Math.abs(t.scaleY),s.prototype.spawn.call(this,t),this.view.setSize(this.size*(t.scaleX/2.52),this.size),this.view.scaleY=t.scaleY/2.52,this.view.angle=t.angle,this.body.angle=this.spawnData.angle},l.prototype.createBodyFixture=function(){this.body.setRectangle(a.GameData.BASIC_BLOCK_WIDTH*this.spawnData.scaleX,a.GameData.BASIC_BLOCK_HEIGHT*this.spawnData.scaleY).SetFriction(a.GameData.getConfigParam(h.GameConfig.blockIceFriction)),s.prototype.createBodyFixture.call(this)},l.prototype.destroy=function(){s.prototype.destroy.call(this),this.view=null},l);function l(){var t=null!==s&&s.apply(this,arguments)||this;return t.size=252,t}e.BlockIce=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.BlockGlass=void 0,i(0)),a=i(1),h=i(2),l=i(15),c=i(3),i=(s=i(7).BlockBase,n(u,s),u.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"blockGlass"),t.add(this.view)},u.prototype.spawn=function(t){t.scaleX=Math.abs(t.scaleX),t.scaleY=Math.abs(t.scaleY),s.prototype.spawn.call(this,t),this.view.setScale(t.scaleX/2.52,t.scaleY/2.52),this.view.angle=t.angle,this.body.angle=this.spawnData.angle,this.body.data.SetUserData({id:c.ITEM_ID.blockGlass,link:this,canTnt:!0}),this.body.setContactCallback(null,this.onContact,this),this.glassBrokeDamping=(100-h.GameData.getConfigParam(c.GameConfig.blockGlassSpeedDamping)*t.scaleX)/100,this.glassBrokeDamping<0&&(this.glassBrokeDamping=0)},u.prototype.onContact=function(t,e,i,o,s,n){!1===s||0<this.contactDelay||(s=e.data.GetUserData())&&"particle"===s.id||e.velocity.length()>h.GameData.getConfigParam(c.GameConfig.blockGlassSpeedBroke)&&!0===this.broke(e.y,s,n)&&e.velocity.multiply(this.glassBrokeDamping,this.glassBrokeDamping)},u.prototype.reset=function(){s.prototype.reset.call(this),this.body.active=!0,this.view.visible=!0,this.delay=0,this.contactDelay=10},u.prototype.explode=function(t){void 0===t&&(t=null),this.deactivate(),t&&t.SetEnabled(!1)},u.prototype.broke=function(t,e,i){if(e&&"miscDynamicBody"===e.id)this.explode(i);else{if(t>=this.view.y-this.height/2)return this.explode(i),!(t>=this.view.y+this.height/2);0<this.delay||((e=.7*this.view.scaleX)<1&&(e=1),this.delay=Math.round(15*e))}return!1},u.prototype.deactivate=function(){!1===u.delaySound&&(h.SoundManager.playSFX("block_glass"),u.delaySound=!0,setTimeout(function(){u.delaySound=!1},100)),this.view.visible=!1,this.body.active=!1;for(var t=this.width/2,e=this.height/2,i=.25*this.width,o=0;o<i;o++){var s=this.spawnData.x-t+Math.random()*this.width,n=this.spawnData.y-e+Math.random()*this.height;this.world.particleManager.createColorParticle(s,n,5*Math.random()-2.5,5*Math.random()-2.5,12185594,8)}h.AchievementManager.saveAchive(l.AchievesType.glassBlock)},u.prototype.update=function(){s.prototype.update.call(this),!0===this.view.visible&&(0<this.contactDelay&&--this.contactDelay,0<this.delay)&&(--this.delay,0===this.delay)&&this.deactivate()},u.prototype.createBodyFixture=function(){this.width=h.GameData.BASIC_BLOCK_WIDTH*this.spawnData.scaleX,this.height=h.GameData.BASIC_BLOCK_HEIGHT*this.spawnData.scaleY,this.body.setRectangle(this.width,this.height),this.body.addRectangle(this.width+20,this.height+20).SetSensor(!0),s.prototype.createBodyFixture.call(this)},u.delaySound=!1,u);function u(){var t=null!==s&&s.apply(this,arguments)||this;return t.width=100,t.height=100,t}e.BlockGlass=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.ObstacleBuzzsawEnlarging=void 0,s=i(23).ObstacleBuzzsaw,n(r,s),r.prototype.spawn=function(t){t.scale>t.scaleMax?(this.scaleStart=t.scaleMax,this.scaleEnd=t.scale):(this.scaleStart=t.scale,this.scaleEnd=t.scaleMax),s.prototype.spawn.call(this,t)},r.prototype.reset=function(){s.prototype.reset.call(this),this.scale=this.spawnData.scale,this.spawnData.scale>this.spawnData.scaleMax?this.scaleSpeed=-this.scaleStart*(this.spawnData.speed/100):this.scaleSpeed=this.scaleStart*(this.spawnData.speed/100),this.updatePosition(),this.state="none",0===this.spawnData.currID&&this.checkState(),this.repeat=this.spawnData.repeat},r.prototype.trigger=function(t){"none"===this.state&&this.checkState()},r.prototype.checkState=function(){this.counter=0,this.repeat=0,this.state="move",0<this.spawnData.delay&&(this.state="delay")},r.prototype.createBodyFixture=function(t){},r.prototype.update=function(){s.prototype.update.call(this),"delay"===this.state?(this.counter+=1,this.counter>=this.spawnData.delay&&(this.state="move")):"move"===this.state?(this.scale+=this.scaleSpeed,(this.scale>this.scaleEnd||this.scale<this.scaleStart)&&(this.scaleSpeed=-this.scaleSpeed,this.state="changeDir")):"changeDir"===this.state&&(0<this.spawnData.changeDirDelay?(this.counter+=1,this.counter===this.spawnData.changeDirDelay&&(this.counter=0,this.changeDirComplete())):this.changeDirComplete()),this.updatePosition()},r.prototype.changeDirComplete=function(){this.state="move",0<this.repeat&&(--this.repeat,0===this.repeat)&&(this.state="done")},r.prototype.updatePosition=function(){this.view.scale=this.scale/3,s.prototype.createBodyFixture.call(this,this.scale)},r);function r(){return null!==s&&s.apply(this,arguments)||this}e.ObstacleBuzzsawEnlarging=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ObstacleBuzzsawBouncing=void 0,i(6)),i=(s=i(23).ObstacleBuzzsaw,n(a,s),a.prototype.initBody=function(t){s.prototype.initBody.call(this,r.Box2DBodyType.static),this.body.setContactCallback(null,this.onContact,this)},a.prototype.reset=function(){s.prototype.reset.call(this),this.speedUp=0,this.body.setZeroVelocity(),this.active=!1,this.delay=this.spawnData.delay,0===this.spawnData.currID?(0===this.delay&&(this.body.dynamic=!0),this.active=!0):this.body.static=!0,this.body.sensor=!0},a.prototype.trigger=function(t){0===this.delay?this.body.dynamic=!0:this.active=!0,this.body.sensor=!0},a.prototype.update=function(){s.prototype.update.call(this),!0===this.active&&(--this.delay,0===this.delay)&&(this.body.dynamic=!0,this.active=!1),this.body.x=this.spawnData.x,this.updateView(this.body.x,this.body.y)},a.prototype.onContact=function(t,e,i,o,s,n){!1!==s&&(s=e.data.GetUserData())&&"block"===s.id&&(0===this.speedUp&&(this.speedUp=Math.abs(this.body.velocity.y)),this.body.velocity.y=-this.speedUp)},a);function a(){return null!==s&&s.apply(this,arguments)||this}e.ObstacleBuzzsawBouncing=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ObstacleBuzzsawHorizontal=void 0,i(6)),i=(s=i(23).ObstacleBuzzsaw,n(a,s),a.prototype.initBody=function(){s.prototype.initBody.call(this,r.Box2DBodyType.kinematic)},a.prototype.reset=function(){this.counterDelay=0,this.body.velocity.x=0,s.prototype.reset.call(this),this.setVelocity()},a.prototype.setVelocity=function(){this.counterDelay===this.spawnData.startDelay&&(this.body.velocity.x=this.spawnData.speed)},a.prototype.update=function(){s.prototype.update.call(this),this.counterDelay<this.spawnData.startDelay?(this.counterDelay+=1,this.setVelocity()):((this.body.velocity.x<0&&this.body.x<this.spawnData.x-this.spawnData.moveDist||0<this.body.velocity.x&&this.body.x>this.spawnData.x+this.spawnData.moveDist)&&(this.body.velocity.x=-this.body.velocity.x),this.updateView(this.body.x,this.body.y))},a.prototype.updateBody=function(t,e){s.prototype.updateBody.call(this,this.spawnData.x-this.spawnData.moveDist+2*this.spawnData.moveDist*(this.spawnData.startPos/100),e)},a);function a(){return null!==s&&s.apply(this,arguments)||this}e.ObstacleBuzzsawHorizontal=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ObstacleBuzzsawVertical=void 0,i(6)),i=(s=i(23).ObstacleBuzzsaw,n(a,s),a.prototype.initBody=function(){s.prototype.initBody.call(this,r.Box2DBodyType.kinematic)},a.prototype.reset=function(){this.counterDelay=0,this.body.velocity.y=0,s.prototype.reset.call(this),this.setVelocity()},a.prototype.setVelocity=function(){this.counterDelay===this.spawnData.startDelay&&(this.body.velocity.y=this.spawnData.speed)},a.prototype.update=function(){s.prototype.update.call(this),this.counterDelay<this.spawnData.startDelay?(this.counterDelay+=1,this.setVelocity()):((this.body.velocity.y<0&&this.body.y<this.spawnData.y-this.spawnData.moveDist||0<this.body.velocity.y&&this.body.y>this.spawnData.y+this.spawnData.moveDist)&&(this.body.velocity.y=-this.body.velocity.y),this.updateView(this.body.x,this.body.y))},a.prototype.updateBody=function(t,e){s.prototype.updateBody.call(this,t,this.spawnData.y-this.spawnData.moveDist+2*this.spawnData.moveDist*(this.spawnData.startPos/100))},a);function a(){return null!==s&&s.apply(this,arguments)||this}e.ObstacleBuzzsawVertical=i},function(t,e,i){"use strict";var o,n,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ObstacleBuzzsawMoving=void 0,i(6)),a=i(4),i=(n=i(23).ObstacleBuzzsaw,s(h,n),h.prototype.initBody=function(){n.prototype.initBody.call(this,r.Box2DBodyType.kinematic)},h.prototype.spawn=function(t){var e=a.Tools.toRad(t.angleMove),i=Math.cos(e),e=Math.sin(e),o=Math.abs(t.speed);this.speedX=i*o,this.speedY=e*o,this.endX=i*t.moveDist,this.endY=e*t.moveDist,n.prototype.spawn.call(this,t)},h.prototype.reset=function(){this.counterDelay=0,this.body.setZeroVelocity(),n.prototype.reset.call(this),0<this.spawnData.speed?this.dirMoving=1:this.dirMoving=-1,this.state="none",0===this.spawnData.currID&&this.startMoving()},h.prototype.startMoving=function(){(this.repeat=0)<this.spawnData.startDelay?this.state="startDelay":this.setVelocity()},h.prototype.trigger=function(){"none"===this.state&&this.startMoving()},h.prototype.setVelocity=function(){this.body.velocity.x=this.speedX*this.dirMoving,this.body.velocity.y=this.speedY*this.dirMoving,this.state="changeDir"},h.prototype.update=function(){if(n.prototype.update.call(this),"none"!==this.state)if("startDelay"===this.state)this.counterDelay+=1,this.counterDelay===this.spawnData.startDelay&&this.setVelocity();else if("update"===this.state){if(a.Tools.distance(this.spawnData.x,this.spawnData.y,this.view.x,this.view.y)>this.spawnData.moveDist){if(this.body.setZeroVelocity(),n.prototype.updateBody.call(this,this.spawnData.x+this.endX*this.dirMoving,this.spawnData.y+this.endY*this.dirMoving),this.spawnData.repeat>this.repeat&&(this.repeat+=1,this.spawnData.repeat===this.repeat))return void(this.state="none");this.dirMoving=-this.dirMoving,0===this.spawnData.changeDirDelay?this.setVelocity():(this.state="changeDirDelay",this.counterDelay=0)}this.updateView(this.body.x,this.body.y)}else"changeDir"===this.state?(this.state="update",this.updateView(this.body.x,this.body.y)):"changeDirDelay"===this.state&&(this.counterDelay+=1,this.counterDelay>=this.spawnData.changeDirDelay)&&this.setVelocity()},h.prototype.updateBody=function(t,e){var i=a.Tools.toRad(this.spawnData.angleMove),o=Math.cos(i),i=Math.sin(i),o=this.spawnData.moveDist*o,i=this.spawnData.moveDist*i,s=this.spawnData.startPos/100;n.prototype.updateBody.call(this,this.spawnData.x-o+2*o*s,this.spawnData.y-i+2*i*s)},h);function h(){return null!==n&&n.apply(this,arguments)||this}e.ObstacleBuzzsawMoving=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ObstacleBuzzsawOnStickHard=void 0,i(0)),a=i(1),i=(s=i(69).ObstacleBuzzsawOnStick,n(h,s),h.prototype.initView=function(t){s.prototype.initView.call(this,t),this.buzzsaw2=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"obstacleBuzzsaw"),t.add(this.buzzsaw2),this.buzzsaw3=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"obstacleBuzzsaw"),t.add(this.buzzsaw3)},h.prototype.spawn=function(t){s.prototype.spawn.call(this,t),this.buzzsaw2.scale=this.buzzsawScale/3,this.buzzsaw3.scale=this.buzzsawScale/3},h.prototype.createBodyFixture=function(){this.addFixture(this.buzzsaw2,45*this.spawnData.scale,this.buzzsawScale),this.addFixture(this.buzzsaw3,90*this.spawnData.scale,this.buzzsawScale),s.prototype.createBodyFixture.call(this)},h.prototype.updateView=function(t,e){s.prototype.updateView.call(this,t,e),this.buzzsaw2.x=t,this.buzzsaw2.y=e,this.buzzsaw2.rotation=this.view.rotation,this.buzzsaw3.x=t,this.buzzsaw3.y=e,this.buzzsaw3.rotation=this.view.rotation},h.prototype.update=function(){s.prototype.update.call(this),this.buzzsaw2.rotation=this.view.rotation,this.buzzsaw3.rotation=this.view.rotation},h.prototype.remove=function(){this.buzzsaw2.destroy(),this.buzzsaw3.destroy(),s.prototype.remove.call(this)},h.prototype.destroy=function(){s.prototype.destroy.call(this),this.buzzsaw2=null,this.buzzsaw3=null},h);function h(){return null!==s&&s.apply(this,arguments)||this}e.ObstacleBuzzsawOnStickHard=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ObstacleReaper=void 0,i(0)),a=i(1),h=i(3),l=i(8),i=(s=i(72).ObstacleQuadrant,n(c,s),c.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"obstacleReaper"),t.add(this.view)},c.prototype.spawn=function(t){s.prototype.spawn.call(this,t),this.view.scale=t.scale/1.692,this.body.data.GetUserData().id=h.ITEM_ID.obstacleReaper},c.prototype.createBodyFixture=function(t){this.view.flipX=!1;var e=1;0<this.speed&&(this.view.flipX=!0,e=-1);for(var i=[-132,-12,-130,-58,-114,-99,-62,-134,8,-144,8,-110,-38,-110,-86,-90,-121,-42],o=0;o<i.length;o++)i[o]*=t,o%2==0&&(i[o]*=e);for(this.body.setPolygon(i),o=0;o<i.length;o++)i[o]*=-1;this.body.addPolygon(i),this.body.sensor=!0,this.body.setCollisionCategory(l.BodyCollisionFilter.DEFAULT)},c);function c(){return null!==s&&s.apply(this,arguments)||this}e.ObstacleReaper=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ObstacleSwingingSpikes=void 0,i(0)),a=i(1),h=i(5),l=i(6),c=i(4),u=i(3),d=i(8),i=(s=i(14).ObstacleBase,n(p,s),p.prototype.initView=function(t){s.prototype.initView.call(this,t),this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"obstacleSwingingSpikes"),t.add(this.view),this.view.setOrigin(.5,.1),this.initBody(),this.body.data.SetUserData({id:u.ITEM_ID.obstacleSwingingSpikes})},p.prototype.initBody=function(t){void 0===t&&(t=l.Box2DBodyType.kinematic),this.body=h.Box2DWorld.getBody(0,0,t)},p.prototype.spawn=function(t){s.prototype.spawn.call(this,t),this.view.scale=t.scale/2,this.createBodyFixture(),this.startAngle=c.Tools.toRad(this.spawnData.angle),this.minAngle=this.startAngle-c.Tools.toRad(this.spawnData.angleMin),this.maxAngle=this.startAngle-c.Tools.toRad(this.spawnData.angleMax)},p.prototype.reset=function(){s.prototype.reset.call(this),this.body.rotation=this.startAngle,this.view.rotation=this.body.rotation,this.speed=.03*this.spawnData.speedAngular,this.updateBody(this.spawnData.x,this.spawnData.y),this.active=!1,0===this.spawnData.currID&&(this.active=!0)},p.prototype.trigger=function(t){this.active=!0},p.prototype.createBodyFixture=function(){this.body.setRectangle(44*this.spawnData.scale,60*this.spawnData.scale,0,128*this.spawnData.scale).SetSensor(!0),this.body.setCollisionCategory(d.BodyCollisionFilter.DEFAULT)},p.prototype.updateBody=function(t,e){this.body.x=t,this.body.y=e,this.updateView(t,e),this.view.rotation=this.body.rotation},p.prototype.update=function(){s.prototype.update.call(this),!0===this.active&&(this.body.rotation+=this.speed,(this.body.rotation>this.minAngle||this.body.rotation<this.maxAngle)&&(this.speed=-this.speed),this.view.rotation=this.body.rotation)},p.prototype.remove=function(){h.Box2DWorld.destroyBody(this.body),s.prototype.remove.call(this)},p.prototype.destroy=function(){s.prototype.destroy.call(this),this.body=null,this.view=null},p);function p(){return null!==s&&s.apply(this,arguments)||this}e.ObstacleSwingingSpikes=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ObstacleSpikes=void 0,i(0)),a=i(1),h=i(5),l=i(6),c=i(3),u=i(8),i=(s=i(14).ObstacleBase,n(d,s),d.prototype.initView=function(t){s.prototype.initView.call(this,t),this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"obstacleSpikes"),this.view.setOrigin(0,1),t.add(this.view),this.initBody()},d.prototype.initBody=function(t){void 0===t&&(t=l.Box2DBodyType.static),this.body=h.Box2DWorld.getBody(0,0,t),this.body.data.SetUserData({id:c.ITEM_ID.obstacleSpikes})},d.prototype.spawn=function(t){s.prototype.spawn.call(this,t),this.width=10*this.spawnData.amount,this.createBodyFixture(this.width),this.body.angle=this.spawnData.angle,this.view.rotation=this.body.rotation,this.body.x=this.spawnData.x,this.body.y=this.spawnData.y,this.updateView(this.spawnData.x+0*Math.cos(this.view.rotation),this.spawnData.y+0*Math.sin(this.view.rotation))},d.prototype.createBodyFixture=function(t){this.view.setCrop(0,0,t,this.view.height),this.body.setRectangle(t,10,t/2,-5).SetSensor(!0),this.body.setCollisionCategory(u.BodyCollisionFilter.DEFAULT)},d.prototype.remove=function(){h.Box2DWorld.destroyBody(this.body),s.prototype.remove.call(this)},d.prototype.destroy=function(){s.prototype.destroy.call(this),this.body=null,this.view=null},d);function d(){var t=null!==s&&s.apply(this,arguments)||this;return t.width=0,t}e.ObstacleSpikes=i},function(t,e,i){"use strict";var o,n,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ObstacleFallingSpikeFactory=void 0,i(4)),a=i(2),h=i(3),l=i(14),c=i(44),i=(n=l.ObstacleBase,s(u,n),u.prototype.initView=function(t){n.prototype.initView.call(this,t),this.layer=t,this.spikes=[],this.delayFall=a.GameData.getConfigParam(h.GameConfig.fallingSpikeDelay)},u.prototype.spawn=function(t){this.spikeStep=t.space;for(var e,i=t.amount,o=i/2*this.spikeStep-this.spikeStep/2,s=0;s<i;s++)(e=new c.ObstacleFallingSpike(this.layer,r.Tools.PI05)).spawn(t.x-o+this.spikeStep*s,t.y),this.spikes.push(e);e=null,n.prototype.spawn.call(this,t)},u.prototype.trigger=function(t){!0!==this.isFalling&&(this.isFalling=!0,this.counter=0,this.fallID=0)},u.prototype.update=function(){!0===this.isFalling&&(this.counter+=1,this.counter>=this.delayFall)&&(this.counter=0,this.spikes[this.fallID].shoot(),this.fallID+=1,this.fallID===this.spawnData.amount)&&(this.fallID=0,this.isFalling=!1);for(var t=0;t<this.spawnData.amount;t++)this.spikes[t].update()},u.prototype.reset=function(){this.isFalling=!1;for(var t=0;t<this.spawnData.amount;t++)this.spikes[t].reset()},u.prototype.remove=function(){for(var t=0;t<this.spawnData.amount;t++)this.spikes[t].remove();n.prototype.remove.call(this)},u.prototype.destroy=function(){for(var t=0;t<this.spawnData.amount;t++)this.spikes[t].destroy();this.spikes=null,this.layer=null,n.prototype.destroy.call(this)},u);function u(){return null!==n&&n.apply(this,arguments)||this}e.ObstacleFallingSpikeFactory=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ObstacleShurikanDispenser=void 0,i(0)),a=i(1),h=i(5),l=i(4),c=i(2),u=i(3),d=i(14),p=i(44),i=(s=d.ObstacleBase,n(f,s),f.prototype.initView=function(t){this.distanceAttack=c.GameData.getConfigParam(u.GameConfig.shurikanDispenserDistanceAttack),this.chargeTime=c.GameData.getConfigParam(u.GameConfig.shurikanDispenserChargeTime),this.spikes=new Array(4);for(var e=0;e<4;e++)this.spikes[e]=new p.ObstacleFallingSpike(t,l.Tools.PI05*e,!0);this.view=new a.JDImageAnimAdobe(this.world.scene,0,0,r.Atlases.gameplayAnims,"obstacleShurikanDispenser",25),t.add(this.view)},f.prototype.spawn=function(t){s.prototype.spawn.call(this,t),this.view.x=t.x,this.view.y=t.y;for(var e=0;e<4;e++)this.spikes[e].spawn(this.view.x,this.view.y)},f.prototype.update=function(){this.view.update();var t=this.world.player;if(this.charge>=this.chargeTime&&!0===t.alive()&&l.Tools.distance(this.view.x,this.view.y,t.getX(),t.getY())<=this.distanceAttack){t=h.Box2DWorld.world.raycast(this.view.x,this.view.y,t.getX(),t.getY(),!0);if(0<t.length){t=t[0].body.data.GetUserData();if(!t||"block"!==t.id){for(var e=0;e<4;e++)this.spikes[e].shoot();this.view.playFrames(1,25,0,30),this.charge=0,this.view.rotation=0}}}for(this.charge<this.chargeTime&&(this.charge+=1,this.view.rotation+=Math.PI/this.chargeTime),e=0;e<4;e++)this.spikes[e].update()},f.prototype.reset=function(){for(var t=0;t<4;t++)this.spikes[t].reset();this.charge=this.chargeTime,this.view.rotation=0,this.view.gotoAndStop(25)},f.prototype.remove=function(){for(var t=0;t<4;t++)this.spikes[t].remove();s.prototype.remove.call(this)},f.prototype.destroy=function(){for(var t=0;t<4;t++)this.spikes[t].destroy();this.spikes=null,this.view=null,s.prototype.destroy.call(this)},f);function f(){return null!==s&&s.apply(this,arguments)||this}e.ObstacleShurikanDispenser=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ObstacleLaserPoint=void 0,i(0)),a=i(5),h=i(6),l=i(4),c=i(3),i=(s=i(14).ObstacleBase,n(u,s),u.prototype.initView=function(t){this.laserGraphic=new Phaser.GameObjects.Image(this.world.scene,0,0,r.Atlases.gameplay,"whiteLine"),this.laserGraphic.setOrigin(0,.5),this.laserGraphic.tint=16724787,t.add(this.laserGraphic),this.point1=new Phaser.GameObjects.Image(this.world.scene,0,0,r.Atlases.gameplay,"obstacleLaserPoint"),t.add(this.point1),this.point2=new Phaser.GameObjects.Image(this.world.scene,0,0,r.Atlases.gameplay,"obstacleLaserPoint"),t.add(this.point2),this.body=a.Box2DWorld.getBody(0,0,h.Box2DBodyType.static),this.body.data.SetUserData({id:c.ITEM_ID.obstacleLaserPoint})},u.prototype.spawn=function(t){s.prototype.spawn.call(this,t);var e=t.x,i=t.y,o=t.x2,t=t.y2;this.xLength=o-e,this.yLength=t-i,this.laserGraphic.x=e,this.laserGraphic.y=i,this.laserGraphic.displayWidth=l.Tools.distance(e,i,o,t),this.laserGraphic.rotation=l.Tools.angleOfPoints(e,i,o,t),this.body.setXY(e,i),this.body.setRectangle(this.laserGraphic.displayWidth,2,this.laserGraphic.displayWidth/2).SetSensor(!0),this.body.rotation=this.laserGraphic.rotation,this.point1.x=e,this.point1.y=i,this.point2.x=o,this.point2.y=t},u.prototype.trigger=function(t){0<this.spawnData.currID?this.laserGraphic.visible=!1:this.spawnData.currID<0&&(this.laserGraphic.visible=!0),this.body.active=this.laserGraphic.visible},u.prototype.reset=function(){s.prototype.reset.call(this),0<this.spawnData.currID?this.laserGraphic.visible=!0:this.spawnData.currID<0&&(this.laserGraphic.visible=!1),this.body.active=this.laserGraphic.visible},u.prototype.update=function(){var t,e;Math.random()<.05&&(e=Math.random(),t=this.laserGraphic.x+this.xLength*e,e=this.laserGraphic.y+this.yLength*e,this.world.particleManager.createColorParticle(t,e,10*Math.random()-5,-5*Math.random(),16711680,4,!1,!1,10,!0))},u.prototype.remove=function(){this.laserGraphic.destroy(),this.point1.destroy(),this.point2.destroy(),a.Box2DWorld.destroyBody(this.body),s.prototype.remove.call(this)},u.prototype.destroy=function(){this.laserGraphic=null,this.point1=null,this.point2=null,this.body=null,s.prototype.destroy.call(this)},u);function u(){return null!==s&&s.apply(this,arguments)||this}e.ObstacleLaserPoint=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ObstacleMissileLauncher=void 0,i(0)),a=i(1),h=i(2),l=i(3),i=(s=i(71).ObstacleClassicLaser,n(c,s),c.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"obstacleMissileLauncher"),this.view.setOrigin(.18,.5),t.add(this.view),this.bulletSpeed=h.GameData.getConfigParam(l.GameConfig.missileSpeed),this.fireDistance=h.GameData.getConfigParam(l.GameConfig.missileLauncherFireDistance)},c.prototype.shoot=function(t){s.prototype.shoot.call(this,"bulletMissile")},c.prototype.spawn=function(t){t.delay=0,t.scale=1,t.currID=0,s.prototype.spawn.call(this,t),this.view.scale=t.scale/2,this.fireTime=h.GameData.getConfigParam(l.GameConfig.missileLauncherFireTime)},c);function c(){return null!==s&&s.apply(this,arguments)||this}e.ObstacleMissileLauncher=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),d=(Object.defineProperty(e,"__esModule",{value:!0}),e.ObstacleArcSpike=void 0,i(0)),p=i(1),r=i(5),a=i(6),f=i(4),h=i(3),i=(s=i(14).ObstacleBase,n(l,s),l.prototype.initView=function(t){s.prototype.initView.call(this,t),this.layer=t,this.spikes=[],this.body=r.Box2DWorld.getBody(0,0,a.Box2DBodyType.static),this.body.data.SetUserData({id:h.ITEM_ID.obstacleSpikes})},l.prototype.spawn=function(t){s.prototype.spawn.call(this,t),this.body.x=t.x,this.body.y=t.y,this.create(t)},l.prototype.create=function(t){var e,i=t.space,o=t.amount,s=t.radius,n=[],r=i/2,a=100/s*.05,h=f.Tools.toRad(t.angle+r)-a,l=Math.cos(h)*s,c=Math.sin(h)*s;n.push(Math.cos(h)*s,Math.sin(h)*s);for(var u=0;u<o;u++)h=f.Tools.toRad(t.angle+r),l=Math.cos(h)*s,c=Math.sin(h)*s,(e=new p.JDImage(this.world.scene,t.x+l,t.y+c,d.Atlases.gameplay,"obstacleSpike")).setOrigin(.5,1),e.rotation=h-f.Tools.PI05,this.layer.add(e),this.spikes.push(e),u===o-1?(h+=a,n.push(Math.cos(h)*s,Math.sin(h)*s)):n.push(l,c),r+=i;for(s-=10,u=0;u<o;u++)h=f.Tools.toRad(t.angle+(r-=i)),l=Math.cos(h)*s,c=Math.sin(h)*s,n.push(l,c);this.createBodyFixture(n),e=null},l.prototype.createBodyFixture=function(t){try{this.body.setPolygon(t)}catch(t){alert("there is to much spikes")}this.body.sensor=!0},l.prototype.remove=function(){r.Box2DWorld.destroyBody(this.body),s.prototype.remove.call(this)},l.prototype.destroy=function(){for(var t=0;t<this.spawnData.amount;t++)this.spikes[t].destroy();this.spikes=null,this.layer=null,this.body=null,s.prototype.destroy.call(this)},l);function l(){return null!==s&&s.apply(this,arguments)||this}e.ObstacleArcSpike=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ItemTrigger=void 0,i(5)),a=i(6),h=i(3),i=(s=i(17).ItemBase,n(l,s),l.prototype.init=function(){s.prototype.init.call(this),this.body=r.Box2DWorld.getBody(0,0,a.Box2DBodyType.static)},l.prototype.spawn=function(t){t.scaleX=Math.abs(t.scaleX),t.scaleY=Math.abs(t.scaleY),s.prototype.spawn.call(this,t),this.body.setRectangle(this.width*t.scaleX,this.height*t.scaleY).SetSensor(!0),this.body.setContactCallback(null,this.onContact,this),this.body.angle=t.angle,this.updateBody(t.x,t.y)},l.prototype.reset=function(){s.prototype.reset.call(this),this.state=0,this.delay=this.spawnData.delay,this.body.active=!0},l.prototype.start=function(){s.prototype.start.call(this),0===this.spawnData.currID?this.elements=[]:this.elements=this.world.getEntintyWithID(this.spawnData.currID)},l.prototype.onContact=function(t,e,i,o,s,n){!1!==s&&(s=e.data.GetUserData())&&s.id===h.ITEM_ID.player&&0===this.state&&(this.state=1)},l.prototype.updateBody=function(t,e){this.body.x=t,this.body.y=e},l.prototype.update=function(){if(s.prototype.update.call(this),1===this.state&&(--this.delay,this.delay<=0)){this.body.active=!1,this.state=2;for(var t=0;t<this.elements.length;t++)this.elements[t].trigger()}},l.prototype.remove=function(){r.Box2DWorld.destroyBody(this.body),s.prototype.remove.call(this)},l.prototype.destroy=function(){s.prototype.destroy.call(this),this.body=null,this.elements=null},l);function l(){var t=null!==s&&s.apply(this,arguments)||this;return t.width=100,t.height=100,t}e.ItemTrigger=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ItemFadeText=void 0,i(0)),a=i(11),h=i(1),l=i(28),i=(s=i(73).ItemFadeBase,n(c,s),c.prototype.initView=function(t){s.prototype.initView.call(this,t),this.view=new h.JDBmpdTextFit(this.world.scene,0,0,r.Fonts.Main,"",30),t.add(this.view)},c.prototype.spawn=function(t){s.prototype.spawn.call(this,t),this.view.setColor(Number("0x"+t.color));var e=t.currID;this.text="tf"+e,!0!==r.Constants.IS_MOBILE||13!==e&&44!==e&&47!==e||(this.text+="Mob"),this.view.setText(l.Localization.getText(this.text)),this.view.setFitSize(t.width,a.JDTextFitParam.both,t.height)},c);function c(){return null!==s&&s.apply(this,arguments)||this}e.ItemFadeText=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ItemFadeArrow=void 0,i(73)),a=i(0),h=i(1),i=(s=r.ItemFadeBase,n(l,s),l.prototype.initView=function(t){s.prototype.initView.call(this,t),this.view=new h.JDImage(this.world.scene,0,0,a.Atlases.gameplay),t.add(this.view)},l.prototype.spawn=function(t){this.startScale=t.scale,s.prototype.spawn.call(this,t),this.view.angle=t.angle,this.view.setFrame("itemFadeArrow"+t.currID)},l);function l(){return null!==s&&s.apply(this,arguments)||this}e.ItemFadeArrow=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ItemCheckPoint=void 0,i(0)),a=i(1),h=i(5),l=i(6),c=i(3),i=(s=i(17).ItemBase,n(u,s),u.prototype.init=function(){s.prototype.init.call(this),this.body=h.Box2DWorld.getBody(0,0,l.Box2DBodyType.static),this.body.data.SetUserData({id:c.ITEM_ID.itemCheckPoint,link:this})},u.prototype.initView=function(t){s.prototype.initView.call(this,t),this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"itemCheckPoint_active"),this.view.setOrigin(.5,1),t.add(this.view)},u.prototype.spawn=function(t){s.prototype.spawn.call(this,t);var e=100*t.scaleY;this.body.setRectangle(100*t.scaleX,e,0,-e/2).SetSensor(!0),this.updateBody(t.x,t.y)},u.prototype.restartLevel=function(){s.prototype.restartLevel.call(this),this.view.setFrame("itemCheckPoint_active"),this.body.data.SetActive(!0)},u.prototype.activate=function(){this.view.setFrame("itemCheckPoint_taked"),this.body.data.SetActive(!1),this.world.checkpointTriggered(this.view.x,this.view.y-this.view.height/2)},u.prototype.deactivate=function(){this.view.setFrame("itemCheckPoint_deactive")},u.prototype.updateBody=function(t,e){this.body.x=t,this.body.y=e,this.view.x=t,this.view.y=e},u.prototype.remove=function(){h.Box2DWorld.destroyBody(this.body),s.prototype.remove.call(this)},u.prototype.destroy=function(){s.prototype.destroy.call(this),this.view=null,this.body=null},u);function u(){return null!==s&&s.apply(this,arguments)||this}e.ItemCheckPoint=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ItemZoomZone=void 0,i(5)),a=i(6),h=i(3),i=(s=i(17).ItemBase,n(l,s),l.prototype.init=function(){s.prototype.init.call(this),this.body=r.Box2DWorld.getBody(0,0,a.Box2DBodyType.static)},l.prototype.spawn=function(t){t.scaleX=Math.abs(t.scaleX),t.scaleY=Math.abs(t.scaleY),s.prototype.spawn.call(this,t),this.body.setRectangle(this.width*t.scaleX,this.height*t.scaleY).SetSensor(!0),this.body.setContactCallback(null,this.onContact,this),this.updateBody(t.x,t.y)},l.prototype.reset=function(){s.prototype.reset.call(this)},l.prototype.onContact=function(t,e,i,o,s,n){e=e.data.GetUserData();e&&e.id===h.ITEM_ID.player&&(!0===s?this.world.setCameraZoomOffset(this.spawnData.offsetZoom,this.spawnData.anchorX,this.spawnData.anchorY):this.world.setCameraZoomOffset())},l.prototype.updateBody=function(t,e){this.body.x=t,this.body.y=e},l.prototype.remove=function(){r.Box2DWorld.destroyBody(this.body),s.prototype.remove.call(this)},l.prototype.destroy=function(){s.prototype.destroy.call(this),this.body=null},l);function l(){var t=null!==s&&s.apply(this,arguments)||this;return t.width=100,t.height=100,t}e.ItemZoomZone=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ItemFinish=void 0,i(0)),a=i(5),h=i(6),l=i(3),i=(s=i(17).ItemBase,n(c,s),c.prototype.init=function(){s.prototype.init.call(this),this.body=a.Box2DWorld.getBody(0,0,h.Box2DBodyType.static),this.body.data.SetUserData({id:l.ITEM_ID.itemFinish})},c.prototype.initView=function(t){this.view=new Phaser.GameObjects.TileSprite(this.world.scene,0,0,100,100,r.Atlases.gameplay,"itemFinish"),t.add(this.view)},c.prototype.spawn=function(t){t.scaleX=Math.abs(t.scaleX),t.scaleY=Math.abs(t.scaleY),s.prototype.spawn.call(this,t),this.body.setRectangle(100*t.scaleX,100*t.scaleY).SetSensor(!0),this.view.setSize(100*t.scaleX,100*t.scaleY),this.body.x=t.x,this.body.y=t.y,this.body.angle=t.angle,this.view.x=t.x,this.view.y=t.y,this.view.angle=t.angle},c.prototype.remove=function(){a.Box2DWorld.destroyBody(this.body),s.prototype.remove.call(this)},c.prototype.destroy=function(){s.prototype.destroy.call(this),this.body=null,this.view=null},c);function c(){return null!==s&&s.apply(this,arguments)||this}e.ItemFinish=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ItemWindBlaster=void 0,i(0)),a=i(1),h=i(5),l=i(6),c=i(4),u=i(3),i=(s=i(17).ItemBase,n(d,s),d.prototype.init=function(){s.prototype.init.call(this),this.body=h.Box2DWorld.getBody(0,0,l.Box2DBodyType.static),this.body.setContactCallback(null,this.onContact,this)},d.prototype.onContact=function(t,e,i,o,s,n){if(!0!==o.IsSensor()){var o=e.data.GetUserData();if(o&&o.id){o=o.id;if(o!==u.ITEM_ID.player&&-1!==o.indexOf(u.ITEM_ID.player))return}!0===s?this.arr.push(e):0<=(o=this.arr.indexOf(e))&&this.arr.splice(o,1)}},d.prototype.initView=function(t){var e;this.view=new a.JDContainer(this.world.scene),t.add(this.view),this.windGraphics=[];for(var i=0;i<6;i++)e=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"windWind"),this.view.add(e),e.visible=!1,this.windGraphics.push(e);this.image=new Phaser.GameObjects.Image(this.world.scene,0,0,r.Atlases.gameplay,"itemWindBlaster"),this.image.setOrigin(.5,1),this.image.scale=.5,this.view.add(this.image),this.fanSprite=new a.JDImageAnimAdobe(this.world.scene,0,-6,r.Atlases.gameplayAnims,"windFan",1),this.fanSprite.setOrigin(.5,1),this.view.add(this.fanSprite)},d.prototype.spawn=function(t){s.prototype.spawn.call(this,t),this.body.setRectangle(100,this.spawnData.moveDist,0,-this.spawnData.moveDist/2).SetSensor(!0),this.body.x=t.x,this.body.y=t.y,this.body.angle=t.angle,this.view.x=t.x,this.view.y=t.y,this.view.angle=t.angle;var t=u.GameData.getConfigParam(u.GameConfig.windBlasterPower),e=this.view.rotation-c.Tools.PI05;this.speedX=Math.cos(e)*t,this.speedY=Math.sin(e)*t,this.arr=[]},d.prototype.reset=function(){s.prototype.reset.call(this),this.active=!1;for(var t=0;t<this.windGraphics.length;t++)this.windGraphics[t].visible=!1;this.spawnData.currID<=0&&this.startDelay()},d.prototype.trigger=function(t){0<this.spawnData.currID?!1===this.active?this.startDelay():this.deactivate():!0===this.active?this.deactivate():this.startDelay()},d.prototype.deactivate=function(){this.active=!1;for(var t=0;t<this.windGraphics.length;t++)this.windGraphics[t].visible=!1},d.prototype.startDelay=function(){this.active=!0,this.counter=this.spawnData.delay,this.activate()},d.prototype.activate=function(){if(!(0<this.counter)){var t;this.fanSprite.playFrames(1,6,-1,30);for(var e=0;e<this.windGraphics.length;e++)(t=this.windGraphics[e]).x=46*Math.random()-23,t.y=-130*Math.random(),t.visible=!0}},d.prototype.update=function(){if(s.prototype.update.call(this),!1!==this.active)if(0<this.counter)--this.counter,this.activate();else{var t,e;this.fanSprite.update();for(var i=0;i<this.windGraphics.length;i++)(t=this.windGraphics[i]).y-=3,t.alpha-=.02,t.y<-180&&(t.y=0,t.x=46*Math.random()-23,t.alpha=1);for(i=0;i<this.arr.length;i++){var o=(e=this.arr[i]).mass;e.applyForce(this.speedX*o,this.speedY*o)}}},d.prototype.remove=function(){h.Box2DWorld.destroyBody(this.body),s.prototype.remove.call(this)},d.prototype.getInteractive=function(){return this.image},d.prototype.destroy=function(){s.prototype.destroy.call(this),this.body=null,this.view=null,this.image=null,this.fanSprite=null,this.windGraphics=null,this.arr=null},d);function d(){return null!==s&&s.apply(this,arguments)||this}e.ItemWindBlaster=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ItemSign=void 0,i(0)),a=i(1),i=(s=i(17).ItemBase,n(h,s),h.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"itemSign_1"),this.view.setOrigin(.5,1),t.add(this.view)},h.prototype.spawn=function(t){s.prototype.spawn.call(this,t),this.view.scale=t.scale,this.view.x=t.x,this.view.y=t.y,this.view.angle=t.angle,this.view.setFrame("itemSign_"+t.currID)},h.prototype.destroy=function(){s.prototype.destroy.call(this),this.view=null},h);function h(){return null!==s&&s.apply(this,arguments)||this}e.ItemSign=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.MiscMissileLauncherBullet=void 0,i(0)),a=i(1),h=i(4),l=i(2),c=i(3),i=(s=i(74).MiscClassicLaserBullet,n(u,s),u.prototype.init=function(){this.lifeTime=l.GameData.getConfigParam(c.GameConfig.missileLifeTime),this.followSpeed=l.GameData.getConfigParam(c.GameConfig.missileFollowSpeed)},u.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"miscMissileLauncherBullet"),t.add(this.view),this.initBody()},u.prototype.createBodyFixture=function(){this.body.addRectangle(26,14)},u.prototype.spawn=function(t){s.prototype.spawn.call(this,t),this.active=!0},u.prototype.playSound=function(){l.SoundManager.playSFX("missileLauncher")},u.prototype.collide=function(){this.view.visible=!1,this.body.data.SetActive(!1),this.exploding=!0,this.world.particleManager.showExplosion(this.view.x,this.view.y),this.counter=0},u.prototype.update=function(){var t;!1!==this.alive()&&(t=this.world.player,!0===this.exploding?(this.counter+=1,16<this.counter&&this.restart()):(this.body.data.SetAngularVelocity(h.Tools.getFollowRotationSpeed(this.view.x,this.view.y,this.view.rotation,t.getX(),t.getY(),this.followSpeed)),this.body.velocity.set(Math.cos(this.body.rotation)*this.spawnData.speed,Math.sin(this.body.rotation)*this.spawnData.speed),this.updateView(this.body.x,this.body.y),this.view.rotation=this.body.rotation,--this.counter,this.counter<=0&&this.collide()))},u.prototype.reset=function(){!1===this.exploding&&(s.prototype.reset.call(this),this.restart())},u.prototype.restart=function(){this.active=!1,this.counter=this.lifeTime,this.exploding=!1},u.prototype.alive=function(){return this.active},u);function u(){return null!==s&&s.apply(this,arguments)||this}e.MiscMissileLauncherBullet=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.MiscHazardStrips=void 0,i(0)),i=(s=i(45).MiscBase,n(a,s),a.prototype.initView=function(t){this.view=new Phaser.GameObjects.TileSprite(this.world.scene,0,0,25,100,r.Atlases.gameplay,"miscHazardStrips"),t.add(this.view)},a.prototype.spawn=function(t){s.prototype.spawn.call(this,t),this.view.x=t.x,this.view.y=t.y,this.view.angle=t.angle,this.view.setSize(25,100*t.scaleY),this.view.scaleX=t.scaleX},a.prototype.destroy=function(){s.prototype.destroy.call(this),this.view=null},a);function a(){return null!==s&&s.apply(this,arguments)||this}e.MiscHazardStrips=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.MiscBarrel=void 0,i(0)),a=i(1),i=(s=i(75).MiscBody,n(h,s),h.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"miscBarrel"),t.add(this.view)},h.prototype.spawn=function(t){s.prototype.spawn.call(this,t),this.view.scale=t.scale/3},h.prototype.reset=function(){s.prototype.reset.call(this),this.counter=this.spawnData.time,this.active=!1,0===this.spawnData.currID&&(this.active=!0)},h.prototype.trigger=function(t){this.active=!0},h.prototype.createBodyFixture=function(){this.body.setCircle(50*this.spawnData.scale-1),s.prototype.createBodyFixture.call(this)},h.prototype.update=function(){s.prototype.update.call(this),!0===this.active&&0<this.counter&&(--this.counter,this.body.angularVelocity=this.spawnData.speedAngular)},h);function h(){return null!==s&&s.apply(this,arguments)||this}e.MiscBarrel=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.MiscWoodPlank=void 0,i(0)),a=i(1),i=(s=i(75).MiscBody,n(h,s),h.prototype.initView=function(t){this.view=new a.JDImage(this.world.scene,0,0,r.Atlases.gameplay,"miscWoodPlank"),t.add(this.view)},h.prototype.spawn=function(t){s.prototype.spawn.call(this,t),this.view.scaleX=t.scaleX/2,this.view.scaleY=t.scaleY/2},h.prototype.createBodyFixture=function(){this.body.setRectangle(200*this.spawnData.scaleX-2,50*this.spawnData.scaleY-2),s.prototype.createBodyFixture.call(this)},h);function h(){return null!==s&&s.apply(this,arguments)||this}e.MiscWoodPlank=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__awaiter||function(t,r,a,h){return new(a=a||Promise)(function(i,e){function o(t){try{n(h.next(t))}catch(t){e(t)}}function s(t){try{n(h.throw(t))}catch(t){e(t)}}function n(t){var e;t.done?i(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(o,s)}n((h=h.apply(t,r||[])).next())})},a=this&&this.__generator||function(o,s){var n,r,a,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},l={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function t(i){return function(t){var e=[i,t];if(n)throw new TypeError("Generator is already executing.");for(;h=l&&e[l=0]?0:h;)try{if(n=1,r&&(a=2&e[0]?r.return:e[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,e[1])).done)return a;switch(r=0,(e=a?[2&e[0],a.value]:e)[0]){case 0:case 1:a=e;break;case 4:return h.label++,{value:e[1],done:!1};case 5:h.label++,r=e[1],e=[0];continue;case 7:e=h.ops.pop(),h.trys.pop();continue;default:if(!((a=0<(a=h.trys).length&&a[a.length-1])||6!==e[0]&&2!==e[0])){h=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3]))h.label=e[1];else if(6===e[0]&&h.label<a[1])h.label=a[1],a=e;else{if(!(a&&h.label<a[2])){a[2]&&h.ops.pop(),h.trys.pop();continue}h.label=a[2],h.ops.push(e)}}e=s.call(o,h)}catch(t){e=[6,t],r=0}finally{n=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},h=(Object.defineProperty(e,"__esModule",{value:!0}),e.World=void 0,i(191)),l=i(0),c=i(9),u=i(2),d=i(4),p=i(5),f=i(15),b=i(18),y=i(12),i=(s=h.WorldCreator,n(m,s),m.prototype.init=function(){s.prototype.init.call(this),this.scene.cameras.main.setBackgroundColor(16777215),this.maxBuzzsawDis=600,this.sndBuzzsaw=u.SoundManager.getSfxLoop("saw")},m.prototype.createLevel=function(){this.background=new Phaser.GameObjects.TileSprite(this.scene,-c.CustomResize.OW,-c.CustomResize.OH,c.CustomResize.GMW,c.CustomResize.GMH,l.Atlases.gameplay,"bgPattern"),this.background.setOrigin(0,0),this.background.depth=-1,this.scene.add.existing(this.background),this.setBackgrounColor(),s.prototype.createLevel.call(this),this.startLevel()},m.prototype.startLevel=function(){this.resetDefeatTimer(),this.sndBuzzsaw.play("saw",{volume:0,loop:!0}),this.isLevelEnd=!1,this.isGameOver=!1,s.prototype.startLevel.call(this)},m.prototype.resetVars=function(){s.prototype.resetVars.call(this),this.isLevelEnd=!1,this.isGameOver=!1,p.Box2DWorld.world.frameRate=1/60,this.scene.reset()},m.prototype.levelEnd=function(t){this.isGameOver=t,this.scene.levelEnd(),this.isLevelEnd=!0,p.Box2DWorld.world.frameRate=1/180},m.prototype.canRestart=function(){!1===this.isLevelEnd&&!1===this.isGameOver?(this.isGameOver=!0,this.scene.levelEnd(),s.prototype.reset.call(this)):!1!==this.isLevelEnd&&!0!==this.isGameOver||s.prototype.reset.call(this)},m.prototype.update=function(){this.closestBuzzsaw=this.maxBuzzsawDis,s.prototype.update.call(this),this.updateCameraAndBG(),this.updateBuzzsawSound()},m.prototype.resetDefeatTimer=function(){this.defeatAdCounter=180*u.GameData.FRAME_SEC},m.prototype.resetAd=function(){return r(this,void 0,Promise,function(){return a(this,function(t){switch(t.label){case 0:return this.scene.paused=!0,[4,y.AzerionSDK.showInterstitialAd()];case 1:return t.sent(),this.resetDefeatTimer(),this.reset(),this.scene.paused=!1,[2]}})})},m.prototype.updateCameraAndBG=function(){!1===this.isLevelEnd?(--this.defeatAdCounter,this.updateCameraOnPlayer()):(this.updateCameraLevelEnd(3,80),2.9<this.cameraZoom&&(!0===this.isGameOver?this.defeatAdCounter<0?this.resetAd():this.reset():this.scene.levelComplete())),this.updateBackgroundParallax()},m.prototype.caclBuzzsawDis=function(t,e){t=d.Tools.distance(this.player.getX(),this.player.getY(),t,e);t<this.closestBuzzsaw&&(this.closestBuzzsaw=t)},m.prototype.updateBuzzsawSound=function(){!1===this.scene.paused&&!0===u.SoundManager.getEnabled(b.SoundType.SFX)?this.sndBuzzsaw.volume=1-this.closestBuzzsaw/this.maxBuzzsawDis:this.sndBuzzsaw.volume=0},m.prototype.updateBackgroundParallax=function(){!0===u.GameData.parallax?(this.background.tilePositionX=this.cameraX/10,this.background.tilePositionY=this.cameraY/10):(this.background.tilePositionX=0,this.background.tilePositionY=0)},m.prototype.moveBackground=function(t,e){this.background.tilePositionX+=t,this.background.tilePositionY+=e},m.prototype.setBackgrounColor=function(){this.background.tint=d.Tools.getRandomColor(0,200)},m.prototype.checkpointTriggered=function(t,e){u.AchievementManager.saveAchive(f.AchievesType.checkpoints),u.SoundManager.playSFX("checkpoint");for(var i=0;i<10;i++)this.particleManager.createColorParticle(t,e,10*Math.random()-5,-6-4*Math.random(),65280);for(i=0;i<this.arrayBullets.length;i++)this.arrayBullets[i].reset()},m.prototype.resize=function(){this.inputManager.resize()},m.prototype.destroy=function(){s.prototype.destroy.call(this),this.sndBuzzsaw=null},m);function m(){return null!==s&&s.apply(this,arguments)||this}e.World=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.WorldCreator=void 0,i(192)),l=i(25),a=i(3),h=i(5),c=i(4),u=i(2),i=(s=r.WorldLayers,n(d,s),d.prototype.init=function(){s.prototype.init.call(this),h.Box2DWorld.init(),h.Box2DWorld.world.friction=a.GameData.getConfigParam(a.GameConfig.groundFriction),this.arrayBlocks=new Array,this.arrayObstacles=new Array,this.arrayItems=new Array,this.arrayBullets=new Array},d.prototype.createLevel=function(){s.prototype.createLevel.call(this),this.inputManager=new l.InputManager(this.scene),this.player=new l.Player(this,this,this.inputManager);var t=u.LevelManager.getLevel(u.LevelManager.currLevelID);if(t)for(var e=0;e<t.data.length;e++)this.addEntity(t.data[e]);else this.addEntity({id:a.ITEM_ID.player,x:0,y:0})},d.prototype.createMiniMap=function(t){this.useArrayFunction("remove"),this.arrayBlocks=[],this.arrayObstacles=[],this.arrayItems=[],this.arrayBullets=[],h.Box2DWorld.world.clearWorld(),this.player||(this.player=new l.FakePlayer(this,this));for(var e=0;e<t.data.length;e++){var i=t.data[e];i.id!==a.ITEM_ID.itemFadeArrow&&i.id!==a.ITEM_ID.itemFadeText&&this.addEntity(i)}this.useArrayFunction("start")},d.prototype.addEntity=function(t){this.getEntity(t)},d.prototype.getEntity=function(t){switch(t.id){case a.ITEM_ID.player:return this.player.spawn(t),this.player;case a.ITEM_ID.blockBasic:return this.initEntity(new l.BlockBasic(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockCircular:return this.initEntity(new l.BlockCircular(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockBumps:return this.initEntity(new l.BlockBumps(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockSlope:return this.initEntity(new l.BlockSlope(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockSlopeDouble:return this.initEntity(new l.BlockSlopeDouble(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockHill:return this.initEntity(new l.BlockHill(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockHill2:return this.initEntity(new l.BlockHill2(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockAngle:return this.initEntity(new l.BlockAngle(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockRoad02:return this.initEntity(new l.BlockRoad02(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockRoadHalfCircle:return this.initEntity(new l.BlockRoadHalfCircle(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockTilt:return this.initEntity(new l.BlockTilt(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockRoadPiece03:return this.initEntity(new l.BlockRoadPiece03(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockRoadPiece04:return this.initEntity(new l.BlockRoadPiece04(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockRoadPiece05:return this.initEntity(new l.BlockRoadPiece05(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockRoadPiece06:return this.initEntity(new l.BlockRoadPiece06(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockRoadPiece09:return this.initEntity(new l.BlockRoadPiece09(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockRoadPiece08:return this.initEntity(new l.BlockRoadPiece08(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockRoadPiece10:return this.initEntity(new l.BlockRoadPiece10(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockFalling:return this.initEntity(new l.BlockFalling(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockVertical:return this.initEntity(new l.BlockVertical(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockHorizontal:return this.initEntity(new l.BlockHorizontal(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockSpeed:return this.initEntity(new l.BlockSpeed(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockBounce:return this.initEntity(new l.BlockBounce(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockInvis:return this.initEntity(new l.BlockInvis(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockInvisMoving:return this.initEntity(new l.BlockInvisMoving(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockInvisVertical:return this.initEntity(new l.BlockInvisVertical(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockInvisHorizontal:return this.initEntity(new l.BlockInvisHorizontal(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockMoving:return this.initEntity(new l.BlockMoving(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockPush:return this.initEntity(new l.BlockPush(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockAppearing:return this.initEntity(new l.BlockAppearing(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockSpikes:return this.initEntity(new l.BlockSpikes(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockDissapear:return this.initEntity(new l.BlockDissapear(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockTNT:return this.initEntity(new l.BlockTNT(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockIce:return this.initEntity(new l.BlockIce(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.blockGlass:return this.initEntity(new l.BlockGlass(this,this.layerBlocks),t,this.arrayBlocks);case a.ITEM_ID.obstacleBuzzsaw:return this.initEntity(new l.ObstacleBuzzsaw(this,this.layerObstacles),t,this.arrayObstacles);case a.ITEM_ID.obstacleBuzzsawEnlarging:return this.initEntity(new l.ObstacleBuzzsawEnlarging(this,this.layerObstacles),t,this.arrayObstacles);case a.ITEM_ID.obstacleBuzzsawBouncing:return this.initEntity(new l.ObstacleBuzzsawBouncing(this,this.layerObstacles),t,this.arrayObstacles);case a.ITEM_ID.obstacleBuzzsawHorizontal:return this.initEntity(new l.ObstacleBuzzsawHorizontal(this,this.layerObstacles),t,this.arrayObstacles);case a.ITEM_ID.obstacleBuzzsawVertical:return this.initEntity(new l.ObstacleBuzzsawVertical(this,this.layerObstacles),t,this.arrayObstacles);case a.ITEM_ID.obstacleBuzzsawMoving:return this.initEntity(new l.ObstacleBuzzsawMoving(this,this.layerObstacles),t,this.arrayObstacles);case a.ITEM_ID.obstacleBuzzsawOnStick:return this.initEntity(new l.ObstacleBuzzsawOnStick(this,this.layerObstacles),t,this.arrayObstacles);case a.ITEM_ID.obstacleBuzzsawOnStickHard:return this.initEntity(new l.ObstacleBuzzsawOnStickHard(this,this.layerObstacles),t,this.arrayObstacles);case a.ITEM_ID.obstacleClassicLaserStatic:return this.initEntity(new l.ObstacleClassicLaserStatic(this,this.layerTopObstacles),t,this.arrayObstacles);case a.ITEM_ID.obstacleClassicLaser:return this.initEntity(new l.ObstacleClassicLaser(this,this.layerTopObstacles),t,this.arrayObstacles);case a.ITEM_ID.obstacleQuadrant:return this.initEntity(new l.ObstacleQuadrant(this,this.layerObstacles),t,this.arrayObstacles);case a.ITEM_ID.obstacleReaper:return this.initEntity(new l.ObstacleReaper(this,this.layerObstacles),t,this.arrayObstacles);case a.ITEM_ID.obstacleSwingingSpikes:return this.initEntity(new l.ObstacleSwingingSpikes(this,this.layerObstacles),t,this.arrayObstacles);case a.ITEM_ID.obstacleSpikes:return this.initEntity(new l.ObstacleSpikes(this,this.layerObstacles),t,this.arrayObstacles);case a.ITEM_ID.obstacleFallingSpike:return this.initEntity(new l.ObstacleFallingSpikeFactory(this,this.layerObstacles),t,this.arrayObstacles);case a.ITEM_ID.obstacleShurikanDispenser:return this.initEntity(new l.ObstacleShurikanDispenser(this,this.layerObstacles),t,this.arrayObstacles);case a.ITEM_ID.obstacleLaserPoint:var e;return this.freeLaserPoint?(this.freeLaserPoint.x2=t.x,this.freeLaserPoint.y2=t.y,e=this.initEntity(new l.ObstacleLaserPoint(this,this.layerObstacles),this.freeLaserPoint,this.arrayObstacles),this.freeLaserPoint=null,e):(this.freeLaserPoint=t,null);case a.ITEM_ID.obstacleMissileLauncher:return this.initEntity(new l.ObstacleMissileLauncher(this,this.layerTopObstacles),t,this.arrayObstacles);case a.ITEM_ID.obstacleArcSpike:return this.initEntity(new l.ObstacleArcSpike(this,this.layerObstacles),t,this.arrayObstacles);case a.ITEM_ID.itemTrigger:return this.initEntity(new l.ItemTrigger(this,this.layerItems),t,this.arrayItems);case a.ITEM_ID.itemFadeText:return this.initEntity(new l.ItemFadeText(this,this.layerItems),t,this.arrayItems);case a.ITEM_ID.itemFadeArrow:return this.initEntity(new l.ItemFadeArrow(this,this.layerItems),t,this.arrayItems);case a.ITEM_ID.itemCheckPoint:return this.initEntity(new l.ItemCheckPoint(this,this.layerItems),t,this.arrayItems);case a.ITEM_ID.itemZoomZone:return this.initEntity(new l.ItemZoomZone(this,this.layerItems),t,this.arrayItems);case a.ITEM_ID.itemFinish:return this.initEntity(new l.ItemFinish(this,this.layerObstacles),t,this.arrayItems);case a.ITEM_ID.itemWindBlaster:return this.initEntity(new l.ItemWindBlaster(this,this.layerItems),t,this.arrayItems);case a.ITEM_ID.itemSign:return this.initEntity(new l.ItemSign(this,this.layerObstacles),t,this.arrayItems);case a.ITEM_ID.miscHazardStrips:return this.initEntity(new l.MiscHazardStrips(this,this.layerTopObstacles),t,this.arrayItems);case a.ITEM_ID.miscBarrel:return this.initEntity(new l.MiscBarrel(this,this.layerTopObstacles),t,this.arrayItems);case a.ITEM_ID.miscWoodPlank:return this.initEntity(new l.MiscWoodPlank(this,this.layerTopObstacles),t,this.arrayItems);default:return null}},d.prototype.initEntity=function(t,e,i){return t.spawn(e),i.push(t),t},d.prototype.getEntintyWithID=function(t){var e=[];return this.addEntityWithID(t,this.arrayBlocks,e),this.addEntityWithID(t,this.arrayObstacles,e),this.addEntityWithID(t,this.arrayItems,e,!0),e},d.prototype.addEntityWithID=function(t,e,i,o){var s;void 0===o&&(o=!1);for(var n=0;n<e.length;n++)s=e[n],(!0!==o||s.spawnData.id!==a.ITEM_ID.itemFadeArrow&&s.spawnData.id!==a.ITEM_ID.itemFadeText&&s.spawnData.id!==a.ITEM_ID.itemTrigger&&s.spawnData.id!==a.ITEM_ID.itemSign)&&Math.abs(s.spawnData.currID)===t&&i.push(s)},d.prototype.reset=function(){this.player.reset(),this.useArrayFunction("reset"),this.resetVars()},d.prototype.restartLevel=function(){this.player.restartLevel(),this.useArrayFunction("restartLevel"),this.resetVars()},d.prototype.resetVars=function(t){void 0===t&&(t=!0),this.inputManager.resetKeys(),!0===t&&(this.setCameraOnPlayer(),this.setCameraZoomOffset()),s.prototype.resetVars.call(this,t),this.particleManager.reset()},d.prototype.startLevel=function(){this.player.start(),this.useArrayFunction("start"),this.resetVars()},d.prototype.update=function(){h.Box2DWorld.update(),this.useArrayFunction("update"),this.player.update(),s.prototype.update.call(this)},d.prototype.shootBullet=function(t,e,i,o,s,n){for(var r,a=0;a<this.arrayBullets.length;a++){var h=this.arrayBullets[a];if(!1===h.alive()&&h.spawnData.id===s){r=h;break}}r||(r=new("bulletLaser"===s?l.MiscClassicLaserBullet:l.MiscMissileLauncherBullet)(this,this.layerObstacles),this.arrayBullets.push(r)),r.spawn({x:t,y:e,r:i,speed:o,id:s,scale:n})},d.prototype.useArrayFunction=function(t){c.Tools.useArrayFunction(this.arrayBlocks,t),c.Tools.useArrayFunction(this.arrayObstacles,t),c.Tools.useArrayFunction(this.arrayItems,t),c.Tools.useArrayFunction(this.arrayBullets,t)},d.prototype.destroy=function(){s.prototype.destroy.call(this),h.Box2DWorld.destroy(),this.useArrayFunction("destroy"),this.arrayBlocks=null,this.arrayObstacles=null,this.arrayItems=null,this.arrayBullets=null},d);function d(){return null!==s&&s.apply(this,arguments)||this}e.WorldCreator=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.WorldLayers=void 0,i(25)),a=i(9),h=i(1),l=i(2),c=i(3),i=(s=h.JDContainer,n(u,s),u.prototype.init=function(){this.setCameraZoomOffset(),this.zoomDifferent=l.GameData.cameraZoomMax-l.GameData.cameraZoomMin,this.cameraAnchorXValue=this.getNewCameraAnchorX(),this.cameraAnchorYValue=this.getNewCameraAnchorY(),this.layerObstacles=new h.JDContainer(this.scene),this.add(this.layerObstacles),this.layerBlocks=new h.JDContainer(this.scene),this.add(this.layerBlocks),this.layerItems=new h.JDContainer(this.scene),this.add(this.layerItems),this.layerTopObstacles=new h.JDContainer(this.scene),this.add(this.layerTopObstacles),this.shakeDuration=l.GameData.getConfigParam(c.GameConfig.blockTntShakeCameraTime),this.shakePower=l.GameData.getConfigParam(c.GameConfig.blockTntShakeCameraPower)},u.prototype.createLevel=function(){this.particleManager=new r.ParticleManager(this.scene),this.add(this.particleManager)},u.prototype.update=function(){this.particleManager.update()},u.prototype.setCameraZoomOffset=function(t,e,i){void 0===e&&(e=.5),void 0===i&&(i=.5),this.zoomOffset=t=void 0===t?0:t,this.cameraAnchorX=e,this.cameraAnchorY=i},u.prototype.calcNewZoom=function(){var t=0,t=(0===this.zoomOffset&&(t=this.zoomDifferent*this.player.getSpeedPercent()),l.GameData.cameraZoomMax+this.zoomOffset-t);return t=t<.2?.2:t},u.prototype.updateCameraOnPlayer=function(){this.updateCameraSmooth(this.player.getX(),this.player.getY(),this.calcNewZoom(),5)},u.prototype.updateCameraLevelEnd=function(t,e){this.updateCameraSmooth(this.player.getX(),this.player.getY(),t,5,e)},u.prototype.updateCameraSmooth=function(t,e,i,o,s){void 0===s&&(s=l.GameData.smoothCameraZoomCoef),this.cameraZoom+=(i-this.cameraZoom)/s,this.cameraX+=(t-this.cameraX)/o,this.cameraY+=(e-this.cameraY)/o,this.calculateCamera()},u.prototype.setCameraOnPlayer=function(){this.updateCamera(this.player.getX(),this.player.getY(),this.calcNewZoom())},u.prototype.updateCamera=function(t,e,i){this.cameraX=t,this.cameraY=e,this.cameraZoom=i,this.calculateCamera(1)},u.prototype.calculateCamera=function(t){var e;void 0===t&&(t=l.GameData.smoothCameraAnchorCoef),this.cameraAnchorXValue+=(this.getNewCameraAnchorX()-this.cameraAnchorXValue)/t,this.cameraAnchorYValue+=(this.getNewCameraAnchorY()-this.cameraAnchorYValue)/t,this.scale=this.cameraZoom,this.x=-this.cameraX*this.cameraZoom+this.cameraAnchorXValue,this.y=-this.cameraY*this.cameraZoom+this.cameraAnchorYValue,0<this.shakeCount&&(--this.shakeCount,t=this.shakePower*(2*Math.random()-1),e=this.shakePower*(2*Math.random()-1),this.x=this.x+t*this.cameraZoom,this.y=this.y+e*this.cameraZoom)},u.prototype.shake=function(){this.shakeCount=this.shakeDuration},u.prototype.resetVars=function(t){void 0===t&&(t=!0),this.shakeCount=0},u.prototype.getNewCameraAnchorX=function(){return a.CustomResize.GW*this.cameraAnchorX},u.prototype.getNewCameraAnchorY=function(){return a.CustomResize.GH*this.cameraAnchorY},u.prototype.getCameraZoom=function(){return this.cameraZoom},u.prototype.getCameraX=function(){return this.cameraX},u.prototype.getCameraY=function(){return this.cameraY},u.prototype.setCameraZero=function(){this.cameraX=0,this.cameraY=0,this.x=0,this.y=0},u.prototype.inCameraView=function(t,e,i,o){var s=this.getGameHalfWidth()/this.cameraZoom,n=this.getGameHalfHeight()/this.cameraZoom,r=this.cameraX-s,s=this.cameraX+s,a=this.cameraY-n,n=this.cameraY+n;return!(e<r||s<t||o<a||n<i)},u.prototype.getGameWidth=function(){return a.CustomResize.GW},u.prototype.getGameHeight=function(){return a.CustomResize.GH},u.prototype.getGameHalfWidth=function(){return a.CustomResize.GHW},u.prototype.getGameHalfHeight=function(){return a.CustomResize.GHH},u.prototype.destroy=function(){s.prototype.destroy.call(this),this.scene=null,this.player&&this.player.destroy(),this.player=null,this.layerBlocks=null,this.layerObstacles=null,this.layerItems=null,this.layerTopObstacles=null,this.particleManager=null},u);function u(){var t=null!==s&&s.apply(this,arguments)||this;return t.cameraZoom=1,t}e.WorldLayers=i},function(t,e,i){"use strict";var o,l,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=(Object.defineProperty(e,"__esModule",{value:!0}),e.ColorParticle=void 0,i(0)),r=i(1),i=(l=i(77).Particle,s(a,l),a.prototype.spawn=function(t,e,i,o,s,n,r,a,h){l.prototype.spawnBase.call(this,t,e,i,o,n,r,a),this.scaleOut=h,this.graphics.tint=s,this.graphics.x=t,this.graphics.y=e,this.fadeTime=0,this.graphics.scale=1,this.graphics.alpha=1,this.graphics.visible=!0},a.prototype.hide=function(){this.graphics.visible=!1,l.prototype.hide.call(this)},a.prototype.multAlpha=function(t){this.graphics.alpha*=t},a.prototype.update=function(){if(!1!==this.alive){if(this.fadeTime>=this.fadeAfter){if(this.graphics.alpha-=.05,this.scaleOut&&(this.graphics.scale*=.9),this.graphics.alpha<=0)return void this.hide()}else this.fadeTime+=1;l.prototype.update.call(this),this.graphics.x=this.xPos,this.graphics.y=this.yPos}},a.prototype.destroy=function(){this.graphics=null},a);function a(t){var e=l.call(this,t)||this;return e.graphics=new r.JDImage(t.scene,0,0,n.Atlases.gameplay,"particle8"),e.graphics.visible=!1,t.add(e.graphics),e}e.ColorParticle=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ParticleManager=void 0,i(76)),a=i(0),h=i(1),l=i(4),c=i(2),i=(s=Phaser.GameObjects.Container,n(u,s),u.prototype.createColorParticle=function(t,e,i,o,s,n,r,a,h,l){void 0===s&&(s=0),void 0===n&&(n=4),void 0===r&&(r=!0),void 0===a&&(a=!1),void 0===h&&(h=140),void 0===l&&(l=!1),0!==c.GameData.particleLimit&&(this.particleNum+=1,this.particleNum>=c.GameData.particleLimit&&(this.particleNum=0),this.particles[this.particleNum].spawn(t,e,i,o,s,8,r,2*h,l))},u.prototype.reset=function(){for(var t=0;t<c.GameData.particleLimit;t++)this.particles[t].hide()},u.prototype.update=function(){for(var t=0;t<c.GameData.particleLimit;t++)this.particles[t].update();for(var e=0,i=this.expolsions;e<i.length;e++)i[e].update()},u.prototype.magnetTo=function(t,e,i,o){for(var s=0,n=this.particles;s<n.length;s++){var r=n[s];if(!1===r.alive)return;var a=l.Tools.distance(t,e,r.xPos,r.yPos);a<i&&(a<o&&(r.fadeTime=150,r.multAlpha(.5)),r.yPos<e?r.yVelocity+=.3:r.yPos>e&&(r.yVelocity-=.3),r.xPos<t?r.xVelocity+=.3:r.xPos>t&&(r.xVelocity-=.3))}},u.prototype.showExplosion=function(t,e,i){var o;void 0===i&&(i=1);for(var s=0,n=this.expolsions;s<n.length;s++)if(!1===(o=n[s]).visible)return o.visible=!0,o.x=t,o.y=e,o.scale=i,void o.playFrames(1,16,0,48);(o=new h.JDImageAnimAdobe(this.scene,t,e,a.Atlases.gameplayAnims,"effectExpolison",1)).hideOnComplete=!0,this.parentContainer.add(o),o.playFrames(1,16,0,48),o.scale=i,this.expolsions.push(o)},u.prototype.destroy=function(){s.prototype.destroy.call(this);for(var t=0;t<this.particles.length;t++)this.particles[t].destroy();this.particles=null,this.expolsions=null},u);function u(t){var e=s.call(this,t)||this;e.gravity=.25,e.particles=new Array(c.GameData.particleLimit);for(var i=0;i<c.GameData.particleLimit;i++)e.particles[i]=new r.ColorParticle(e);return e.particleNum=0,e.expolsions=[],e}e.ParticleManager=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.Timer=void 0,i(0)),a=i(11),h=i(1),l=i(4),c=i(31),i=(s=h.JDBmpdTextStroke,n(u,s),u.prototype.start=function(){this.alive=!0,this.counter=0,this.updateCounter()},u.prototype.minusTime=function(t){this.counter-=t,this.updateCounter()},u.prototype.getCounter=function(){return this.counter},u.prototype.resume=function(){this.alive=!0},u.prototype.pause=function(){this.alive=!1},u.prototype.update=function(){!1!==this.alive&&(this.counter+=1,this.updateCounter())},u.prototype.updateCounter=function(){this.text=c.Helpers.timeDecoratorLevel(Math.floor(this.counter/60*100))},u.prototype.resize=function(t){this.x=l.AlignTo.getRight(170),this.y=t},u);function u(t){var e=s.call(this,t,0,0,r.Fonts.Main,"00:00:00",50,16777215,0,0,a.JDTextType.text)||this;return e.addAt(new h.JDImage(t,0,0,r.Atlases.ui,"timer-panel"),0),e.txt.x=e.txtStroke.x=-125,e}e.Timer=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.StartTimer=void 0,i(0)),a=i(11),h=i(9),l=i(1),c=i(2),i=(s=l.JDBmpdTextFit,n(u,s),u.prototype.show=function(t,e){void 0===e&&(e=!1),this.currState=t,this.counter=0,this.currState!==a.Bool3.none&&(this.showState=4,this.counter=-1,this.visible=!0)},u.prototype.hide=function(t){this.visible=!1,this.currState=t},u.prototype.pause=function(){this.visible=!1},u.prototype.resume=function(){this.currState===a.Bool3.false&&(this.visible=!0)},u.prototype.update=function(){if(this.counter+=1,this.alpha=1-this.counter/this.duration,this.scale=3-2*this.alpha,this.counter%this.duration==0){if(--this.showState,0<this.showState)this.text=""+this.showState,c.SoundManager.playSFX("count");else if(0===this.showState)this.text=c.Localization.getText("go"),c.SoundManager.playSFX("count");else if(this.showState<0)return this.scene.startTimerComplete(),void this.hide(a.Bool3.true);this.counter=0}},u);function u(t){t=s.call(this,t,h.CustomResize.GHW,h.CustomResize.GHH,r.Fonts.MainAppear,"",200)||this;return t.duration=40,t.tintTopLeft=t.tintTopRight=16758784,t.tintBottomLeft=t.tintBottomRight=16747008,t.setFitSize(1e3),t.hide(a.Bool3.none),t}e.StartTimer=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.DeathCounter=void 0,i(0)),a=i(11),h=i(1),i=(s=h.JDBmpdTextStroke,n(l,s),l.prototype.getCounter=function(){return this.counter},l.prototype.die=function(){this.counter+=1,this.text=""+this.counter},l.prototype.resize=function(t,e){this.x=t,this.y=e+80},l);function l(t){var e=s.call(this,t,0,0,r.Fonts.Main,"0",50,0,16777215,1,a.JDTextType.text)||this;return e.addAt(new h.JDImage(t,40,0,r.Atlases.ui,"death-icon-"+(!1===r.Constants.DISABLE_BLOOD?1:2)),0),e.counter=0,e.txt.x=e.txtStroke.x=-40,e}e.DeathCounter=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.FlipText=void 0,i(0)),a=i(1),h=i(4),l=i(2),i=(s=a.JDBmpdText,n(c,s),c.prototype.show=function(t,e){var i=this;this.y=this.startY,this.visible=!0,this.text=l.Localization.getText(e)+"\n-"+h.Tools.roundDec(t/60,1)+" "+l.Localization.getText("sec"),this.scene.tweens.killTweensOf(this),this.scale=.5,this.scene.add.tween({targets:this,scale:1,duration:300,completeDelay:1500,onComplete:function(){return i.hide()}}),l.SoundManager.playSFX("flip")},c.prototype.hide=function(){this.visible=!1},c.prototype.update=function(){!0===this.visible&&--this.y},c.prototype.resize=function(){this.startY=h.AlignTo.getCenterY(-200)},c);function c(t){t=s.call(this,t,h.AlignTo.getCenterX(),0,r.Fonts.Main,"",50,8304388)||this;return t.visible=!1,t}e.FlipText=i},function(t,e,i){"use strict";var o,n,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.ParticleConfetti=void 0,i(0)),a=i(9),h=i(4),i=(n=Phaser.GameObjects.Container,s(l,n),l.prototype.getRandomX=function(){return a.CustomResize.GMW*Math.random()-a.CustomResize.OW},l.prototype.getRandomY=function(){return a.CustomResize.GMH*Math.random()-a.CustomResize.OH},l.prototype.start=function(){this.visible=!0},l.prototype.stop=function(){this.visible=!1},l.prototype.update=function(){if(!1!==this.visible){this.currAngle+=.01;for(var t=0;t<this.particles.length;t++)this.stepParticle(this.particles[t],t),this.CheckForReposition(this.particles[t],t)}},l.prototype.stepParticle=function(t,e){t.rotation+=t.tiltAngleIncremental,t.y+=(Math.cos(this.currAngle+t.d)+3+t.r/2)/2,t.x+=Math.sin(this.currAngle),t.scaleY=Math.sin(t.rotation-e/3),0<t.scaleY&&16777215!==t.tint?t.tint=16777215:t.scaleY<0&&11184810!==t.tint&&(t.tint=11184810)},l.prototype.CheckForReposition=function(t,e){(t.x>this.borderRight||t.x<this.borderLeft||t.y>this.borderBot)&&(0<e%5||e%2==0?this.repositionParticle(t,this.getRandomX(),this.borderTop):0<Math.sin(this.currAngle)?this.repositionParticle(t,this.borderLeft,this.getRandomY()):this.repositionParticle(t,this.borderRight,this.getRandomY()))},l.prototype.resize=function(){this.borderLeft=-a.CustomResize.SHIFT_X-20,this.borderRight=a.CustomResize.GW+a.CustomResize.SHIFT_X+20,this.borderBot=a.CustomResize.GH+a.CustomResize.SHIFT_Y+30,this.borderTop=-a.CustomResize.SHIFT_Y-30},l.prototype.repositionParticle=function(t,e,i){t.x=e,t.y=i},l.prototype.destroy=function(){n.prototype.destroy.call(this),this.particles=[],this.particles=null},l);function l(t,e){void 0===e&&(e=20);var i,o=n.call(this,t)||this;o.currAngle=0,o.particles=new Array(e);for(var s=0;s<e;s++)(i=new u(t,o.getRandomX(),o.getRandomY(),r.Atlases.ui,"plParticle"+h.Tools.random(1,12))).r=h.Tools.random(10,30),i.d=Math.random()*e+8,i.tiltAngleIncremental=.07*Math.random()+.05,o.add(i),o.particles[s]=i;return i=null,o.visible=!1,o}e.ParticleConfetti=i;c=Phaser.GameObjects.Image,s(d,c);var c,u=d;function d(){return null!==c&&c.apply(this,arguments)||this}},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.PanelLevel=void 0,i(0)),a=i(11),h=i(1),l=i(2),i=(s=h.JDBmpdTextStroke,n(c,s),c.prototype.resize=function(t,e){this.x=t+250,this.y=e},c);function c(t){var e=s.call(this,t,0,0,r.Fonts.Main,l.Localization.getText("lvl")+": "+(l.LevelManager.currLevelID+1),50,16777215,0,1,a.JDTextType.fit)||this;return e.addAt(new h.JDImage(t,0,0,r.Atlases.ui,"timer-panel"),0),e.setFitSize(230),e}e.PanelLevel=i},function(t,e,i){"use strict";var o,a,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),h=(Object.defineProperty(e,"__esModule",{value:!0}),e.LevelSlot=void 0,i(0)),l=i(1),i=(a=i(43).SlotBase,s(n,a),n.prototype.select=function(){this.bg.setFrame("level-box-selected"),this.selected=0},n.prototype.unselect=function(){this.bg.setFrame("level-box"),this.selected=-1,this.scale=1},n.prototype.updateStars=function(t,e,i){this.selected=-1,this.starsOpen=t,this.id<i?(this.imgLock.visible=!1,this.bg.input.enabled=!0,this.id===e&&this.select(),this.visibleChilds(!0)):(this.bg.input.enabled=!1,this.imgLock.visible=!0,this.bg.setFrame("level-box"),this.visibleChilds(!1))},n.prototype.visibleChilds=function(t){this.txtId.visible=t;for(var e=0;e<this.stars.length;e++)!0===t&&e<this.starsOpen?this.stars[e].visible=!0:this.stars[e].visible=!1},n.prototype.update=function(){0<=this.selected?(this.selected+=.1,this.scale=1+.05*Math.cos(this.selected)):a.prototype.update.call(this)},n.prototype.destroy=function(){a.prototype.destroy.call(this),this.stars=null,this.txtId=null,this.imgLock=null},n);function n(t,e,i,o){var s,n=a.call(this,t,e,i,o)||this;n.starsOpen=0,n.selected=-1,n.initBg("level-box"),n.txtId=new l.JDBmpdText(t,-10,-25,h.Fonts.Main,""+(o+1),70,4013373),n.add(n.txtId),n.stars=new Array(3);for(var r=0;r<3;r++)s=new l.JDImage(t,41*r-55,35,h.Atlases.ui,"star-icon-small"),n.add(s),s.visible=!1,n.stars[r]=s;return n.imgLock=new l.JDImage(t,-6,-27,h.Atlases.ui,"level-lock-icon"),n.add(n.imgLock),n}e.LevelSlot=i},function(t,e,i){"use strict";var o,s,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__awaiter||function(t,r,a,h){return new(a=a||Promise)(function(i,e){function o(t){try{n(h.next(t))}catch(t){e(t)}}function s(t){try{n(h.throw(t))}catch(t){e(t)}}function n(t){var e;t.done?i(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(o,s)}n((h=h.apply(t,r||[])).next())})},a=this&&this.__generator||function(o,s){var n,r,a,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},l={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function t(i){return function(t){var e=[i,t];if(n)throw new TypeError("Generator is already executing.");for(;h=l&&e[l=0]?0:h;)try{if(n=1,r&&(a=2&e[0]?r.return:e[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,e[1])).done)return a;switch(r=0,(e=a?[2&e[0],a.value]:e)[0]){case 0:case 1:a=e;break;case 4:return h.label++,{value:e[1],done:!1};case 5:h.label++,r=e[1],e=[0];continue;case 7:e=h.ops.pop(),h.trys.pop();continue;default:if(!((a=0<(a=h.trys).length&&a[a.length-1])||6!==e[0]&&2!==e[0])){h=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3]))h.label=e[1];else if(6===e[0]&&h.label<a[1])h.label=a[1],a=e;else{if(!(a&&h.label<a[2])){a[2]&&h.ops.pop(),h.trys.pop();continue}h.label=a[2],h.ops.push(e)}}e=s.call(o,h)}catch(t){e=[6,t],r=0}finally{n=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},h=(Object.defineProperty(e,"__esModule",{value:!0}),e.Medals=void 0,i(24)),l=i(13),c=i(0),u=i(1),d=i(4),p=i(33),f=i(9),b=i(29),y=i(42),m=i(203),x=i(2),g=i(12),i=(s=h.BasicView,n(v,s),v.prototype.init=function(){var e=this;s.prototype.init.call(this),this.totalMedals=x.AchievementManager.getTotalAchieves(),this.bg=new u.JDImage(this,f.CustomResize.GHW,f.CustomResize.GHH,"background-seperator-2"),this.bg.setInteractive(),this.bg.name="scrollBG",this.add.existing(this.bg),this.txtTitle=new u.JDBmpdTextTranslated(this,0,0,c.Fonts.Main,"medals",112,4013373),this.add.existing(this.txtTitle),this.txtDescription=new u.JDBmpdTextFit(this,f.CustomResize.GHW,0,c.Fonts.Main,"",40,9544091),this.add.existing(this.txtDescription),this.hideDescription(),this.btnExit=new l.ButtonScaleImage(this,0,0,c.Atlases.ui,"back-button"),this.btnExit.onUp=function(){return r(e,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,g.AzerionSDK.showInterstitialAd()];case 1:return t.sent(),this.scene.start(p.Menu.Name),[2]}})})},this.add.existing(this.btnExit.getView()),this.currency=new b.CurrencyPanel(this),this.add.existing(this.currency),this.scroll=new y.ScrollDots(this,Math.ceil(this.totalMedals/this.skinsOnPage),this.offsetWorldX),this.scroll.onCheckWorldBorders=function(t){return e.checkWorldBorders(t)},this.add.existing(this.scroll),this.createStots(),this.input.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.pressDown,this),this.input.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.pressUp,this),this.input.on(Phaser.Input.Events.POINTER_UP_OUTSIDE,this.pressUp,this),this.btnLeft=new l.ButtonScaleImage(this,100,0,c.Atlases.ui,"pagination-left-button"),this.btnLeft.onUp=function(){return e.scroll.moveWorld(-1)},this.add.existing(this.btnLeft.getView()),this.btnRight=new l.ButtonScaleImage(this,f.CustomResize.GW-100,0,c.Atlases.ui,"pagination-right-button"),this.btnRight.onUp=function(){return e.scroll.moveWorld(1)},this.add.existing(this.btnRight.getView()),this.scroll.checkWorldBorders()},v.prototype.createStots=function(){for(var t,e=this.skinsOnPage/2,i=f.CustomResize.GHW-e/2*300+150-10-10,o=f.CustomResize.GHH+200-260-30,s=40+i,n=o,r=0,a=0,h=0;h<this.totalMedals;h++)t=new m.MedalSlot(this,s+a,n,r),this.scroll.addAt(t,0),r+=1,s+=310,(h+1)%e==0&&(s=i,n+=290,(h+1)%this.skinsOnPage==0)&&(s=40+i,a+=this.offsetWorldX,n=o);t=null,this.scroll.setCurrentWorld(0,this.skinsOnPage)},v.prototype.pressDown=function(t,e){var i,o;!1!==this.scroll.canPressDown(e)&&(i=!1,(o=e[0].parentContainer)instanceof m.MedalSlot&&(i=!0),"scrollBG"!==e[0].name&&!1===i&&o!==this||this.scroll.pressDown(t,e))},v.prototype.pressUp=function(t,e){!1!==this.scroll.canPressUp()&&this.scroll.pressUp(t,e)},v.prototype.showDesciption=function(t){this.txtDescription.setText(x.AchievementManager.getDescription(t)),this.txtDescription.visible=!0},v.prototype.hideDescription=function(){this.txtDescription.visible=!1},v.prototype.checkWorldBorders=function(t){var e=this.btnLeft.getInteractiveElement(),i=this.btnRight.getInteractiveElement();t<0?(e.visible=!1,i.visible=!0):0<t?(e.visible=!0,i.visible=!1):(e.visible=!0,i.visible=!0)},v.prototype.update=function(){s.prototype.update.call(this),this.scroll.update()},v.prototype.resize=function(){s.prototype.resize.call(this),d.AlignTo.fitScreen(this.bg),d.AlignTo.leftTop(this.btnExit,100,100),this.currency.resize(),this.txtTitle.x=this.btnExit.x+(this.currency.getCoinIconX()-this.btnExit.x)/2,d.AlignTo.top(this.txtTitle,100),this.txtDescription.x=this.txtTitle.x-30,this.txtDescription.y=this.txtTitle.y+130,d.AlignTo.bot(this.btnLeft,100),this.btnRight.y=this.btnLeft.y,this.scroll.resize(this.btnLeft.x+(this.btnRight.x-this.btnLeft.x)/2,this.btnLeft.y)},v.prototype.destroy=function(){s.prototype.destroy.call(this),this.bg=null,this.btnExit=null,this.txtTitle=null,this.currency=null,this.txtDescription=null,this.scroll=null,this.btnLeft=null,this.btnRight=null},v.Name="medals",v);function v(){var t=null!==s&&s.apply(this,arguments)||this;return t.skinsOnPage=10,t.offsetWorldX=2650,t}e.Medals=i},function(t,e,i){"use strict";var o,n,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.MedalSlot=void 0,i(0)),a=i(1),h=i(2),i=(n=i(43).SlotBase,s(l,n),l.prototype.over=function(){n.prototype.over.call(this),this.scene.showDesciption(this.id)},l.prototype.out=function(){n.prototype.out.call(this),this.scene.hideDescription()},l.prototype.destroy=function(){n.prototype.destroy.call(this),this.scene=null},l);function l(t,e,i,o){e=n.call(this,t,e,i,o)||this;e.initBg("skins-box");var s,i=h.AchievementManager.getAchieveProgress(o);return i<1?(s=new a.JDImage(t,-20,70,r.Atlases.ui,"achievements-brogressbar-empty"),e.add(s),s=new a.JDImage(t,s.x,s.y,r.Atlases.ui,"achievements-brogressbar"),e.add(s),s.setCrop(0,0,s.width*i,s.height),o=new a.JDBmpdText(t,s.x,s.y,r.Fonts.Main,Math.round(100*i)+"%",32),e.add(o),s=new a.JDImage(t,-5,-30,r.Atlases.ui,"medal-blank")):(s=new a.JDImage(t,-5,0,r.Atlases.ui,"medal-gold")).scale=1.3,e.add(s),e}e.MedalSlot=i},function(t,e,i){"use strict";function o(){}Object.defineProperty(e,"__esModule",{value:!0}),e.NativeChanges=void 0,o.setFpsLimit=function(t){var o=Phaser.Game.prototype.step,s=1e3/t,n=0;Phaser.Game.prototype.step=function(t,e){var i=t-(n=n+1e3<t?t:n);s<=i&&(o.call(this,t,e),n=t-(i-s))}},o.updateText=function(v,_){Phaser.GameObjects.Text.prototype.updateText=function(){var t=this.canvas,e=this.context,i=this.style,o=i.resolution,s=i.metrics,n=(i.syncFont(t,e),this._text),r=(n=i.wordWrapWidth||i.wordWrapCallback?this.runWordWrap(this._text):n).split(this.splitRegExp),a=Phaser.GameObjects.GetTextSize(this,s,r),n=i.fontSize;"string"==typeof n&&(n=Number(n.replace("px",""))),this.lineSpacing=v*(n/_);var h,n=this.padding;0===i.fixedWidth?(this.width=a.width+n.left+n.right,h=a.width):(this.width=i.fixedWidth,(h=this.width-n.left-n.right)<a.width&&(h=a.width)),0===i.fixedHeight?this.height=a.height+n.top+n.bottom:this.height=i.fixedHeight;var l,c,u=this.width,d=this.height;this.updateDisplayOrigin(),u*=o,d*=o,u=Math.max(u,1),d=Math.max(d,1),t.width!==u||t.height!==d?(t.width=u,t.height=d,this.frame.setSize(u,d),i.syncFont(t,e)):e.clearRect(0,0,u,d),e.save(),e.scale(o,o),i.backgroundColor&&(e.fillStyle=i.backgroundColor,e.fillRect(0,0,u,d)),i.syncStyle(t,e),e.textBaseline="alphabetic",e.translate(n.left,n.top);for(var p=0;p<a.lines;p++){if(l=i.strokeThickness/2,c=i.strokeThickness/2+p*a.lineHeight+s.ascent,0<p&&(c+=a.lineSpacing*p),i.rtl)l=u-l;else if("right"===i.align)l+=h-a.lineWidths[p];else if("center"===i.align)l+=(h-a.lineWidths[p])/2;else if("justify"===i.align&&.85<=a.lineWidths[p]/a.width){var f=a.width-a.lineWidths[p],b=e.measureText(" ").width,y=r[p].trim(),m=y.split(" ");f+=(r[p].length-y.length)*b;for(var x=Math.floor(f/b),g=0;0<x;)m[g]+=" ",g=(g+1)%(m.length-1||1),--x;r[p]=m.join(" ")}this.autoRound&&(l=Math.round(l),c=Math.round(c)),i.strokeThickness&&(this.style.syncShadow(e,i.shadowStroke),e.strokeText(r[p],l,c)),i.color&&(this.style.syncShadow(e,i.shadowFill),e.fillText(r[p],l,c))}e.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(t,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;o=this.input;return o&&!o.customHitArea&&(o.hitArea.width=this.width,o.hitArea.height=this.height),this}},o.strokePath=function(){Phaser.Renderer.WebGL.Pipelines.MultiPipeline.prototype.batchLine=function(t,e,i,o,s,n,r,a,h,l,c){this.renderer.pipelines.set(this);var u=this.calcMatrix,c=(c&&c.multiply(l,u),i-t),l=o-e,c=Math.sqrt(c*c+l*l),l=s*(o-e)/c,s=s*(t-i)/c,d=n*(o-e)/c,n=n*(t-i)/c,c=i-d,p=o-n,f=t-l,b=e-s,i=i+d,d=o+n,o=t+l,n=e+s,t=u.getX(c,p),l=u.getY(c,p),e=u.getX(f,b),s=u.getY(f,b),c=u.getX(i,d),p=u.getY(i,d),f=u.getX(o,n),b=u.getY(o,n),i=this.strokeTint,d=i.TL,u=i.TR,o=i.BL,n=i.BR;this.batchQuad(null,f,b,e,s,t,l,c,p,0,0,1,1,d,u,o,n,2)}},o.deleteFromAtlasJSON=function(c){void 0===c&&(c="instance "),Phaser.Textures.Parsers.JSONArray=function(t,e,i){if(i.frames||i.textures){var o=t.source[e];t.add("__BASE",e,0,0,o.width,o.height);for(var s,n=(Array.isArray(i.textures)?i.textures[e]:i).frames,r=0;r<n.length;r++){var a=n[r],h=t.add(a.filename.replace(c,""),e,a.frame.x,a.frame.y,a.frame.w,a.frame.h),l=(a.trimmed&&h.setTrim(a.sourceSize.w,a.sourceSize.h,a.spriteSourceSize.x,a.spriteSourceSize.y,a.spriteSourceSize.w,a.spriteSourceSize.h),a.rotated&&(h.rotated=!0,h.updateUVsInverted()),a.anchor||a.pivot);l&&(h.customPivot=!0,h.pivotX=l.x,h.pivotY=l.y),h.customData=Phaser.Utils.Objects.Clone(a)}for(s in i)"frames"!==s&&(Array.isArray(i[s])?t.customData[s]=i[s].slice(0):t.customData[s]=i[s]);return t}}},o.setBitmapTextSize=function(){function s(t,I,k,e){if(void 0===k&&(k=!1),!(e=void 0===e?null:e))return{local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0};var V,G,i,o=1.2*t.fontData.lineHeight,z=o,s=t.text,N=s.length,X=t.maxWidth*t.scaleX,W=t.wordWrapCharCode,n=Number.MAX_VALUE,r=Number.MAX_VALUE,a=0,h=0,U=t.fontData.chars,Y=t.letterSpacing,l=0,c=0,u=0,d=null,j=t._align,p=0,f=0,b=t.fontSize/t.fontData.size,y=b*t.scaleX,m=b*t.scaleY,x=null,J=0,g=[],v=Number.MAX_VALUE,_=0,H=0,w=0,S=[],q=[],A=null;if(0<X){for(B=0;B<N;B++)10!==(u=s.charCodeAt(B))?(d=U[u])&&(i=void 0,null!==x&&(i=d.kerning[J]),u===W?null!==A&&(S.push({word:A.word,i:A.i,x:A.x*y,y:A.y*m,w:A.w*y,h:A.h*m,cr:!1}),A=null):((A=null===A?{word:"",i:B,x:l,y:c,w:0,h:o,cr:!1}:A).word=A.word.concat(s[B]),A.w+=d.xOffset+d.xAdvance+(void 0!==i?i:0)),l+=d.xAdvance+Y,x=d,J=u):(null!==A&&(S.push({word:A.word,i:A.i,x:A.x*y,y:A.y*m,w:A.w*y,h:A.h*m,cr:!0}),A=null),l=0,c+=o,x=null);null!==A&&S.push({word:A.word,i:A.i,x:A.x*y,y:A.y*m,w:A.w*y,h:A.h*m,cr:!1});for(var l=0,c=0,x=null,J=0,C=void 0,T=0,P=[],B=0;B<S.length;B++){var E=S[B],K=E.x,Z=E.x+E.w;C&&(T=K-(K-(C.x+C.w)+C.w),C=null),X<K-T||X<Z-T?(P.push(E.i-1),C=E.cr?(P.push(E.i+E.word.length),T=0,null):E):E.cr&&(P.push(E.i+E.word.length),T=0,C=null)}for(B=P.length-1;0<=B;B--)0<=P[B]&&(s=(V=s).substr(0,G=P[B])+"\n"+V.substr(G+1));N=(e.wrappedText=s).length,S=[],A=null}var M,Q,$,tt=0;for(B=0;B<N;B++)10!==(u=s.charCodeAt(B))?(d=U[u])&&(p=l,f=c,M=void 0,null!==x&&(p+=void 0!==(M=d.kerning[J])?M:0),p<n&&(n=p),f<r&&(r=f),a<(Q=p+d.xAdvance)&&(a=Q),h<($=f+o)&&(h=$),$=d.xOffset+d.xAdvance+(void 0!==M?M:0),u===W?null!==A&&(S.push({word:A.word,i:A.i,x:A.x*y,y:A.y*m,w:A.w*y,h:A.h*m}),A=null):((A=null===A?{word:"",i:tt,x:l,y:c,w:0,h:o}:A).word=A.word.concat(s[B]),A.w+=$),q.push({i:tt,char:s[B],code:u,x:(d.xOffset+l)*b,y:(d.yOffset+c)*b,w:d.width*b,h:d.height*b,t:c*b,r:Q*b,b:o*b,line:H,glyph:d}),l+=d.xAdvance+Y,x=d,J=u,w=Q*b,tt++):(null!==A&&(S.push({word:A.word,i:A.i,x:A.x*y,y:A.y*m,w:A.w*y,h:A.h*m}),A=null),l=0,c+=z,x=null,_<(g[H]=w)&&(_=w),w<v&&(v=w),H++,w=0);if(null!==A&&S.push({word:A.word,i:A.i,x:A.x*y,y:A.y*m,w:A.w*y,h:A.h*m}),_<(g[H]=w)&&(_=w),w<v&&(v=w),0<j)for(var et=0;et<q.length;et++){var D,O=q[et];1===j?(D=(_-g[O.line])/2,O.x+=D,O.r+=D):2===j&&(D=_-g[O.line],O.x+=D,O.r+=D)}var R=e.local,L=e.global,F=e.lines;R.x=n*b,R.y=r*b,R.width=a*b,R.height=h*b,L.x=t.x-t._displayOriginX+n*y,L.y=t.y-t._displayOriginY+r*m,L.width=a*y,L.height=h*m,F.shortest=v,F.longest=_,F.lengths=g,I&&(R.x=Math.ceil(R.x),R.y=Math.ceil(R.y),R.width=Math.ceil(R.width),R.height=Math.ceil(R.height),L.x=Math.ceil(L.x),L.y=Math.ceil(L.y),L.width=Math.ceil(L.width),L.height=Math.ceil(L.height),F.shortest=Math.ceil(v),F.longest=Math.ceil(_)),k&&(t._displayOriginX=t.originX*R.width,t._displayOriginY=t.originY*R.height,L.x=t.x-t._displayOriginX*t.scaleX,L.y=t.y-t._displayOriginY*t.scaleY,I)&&(L.x=Math.ceil(L.x),L.y=Math.ceil(L.y)),e.words=S,e.characters=q,e.lines.height=o,e.scale=b,e.scaleX=t.scaleX,e.scaleY=t.scaleY}Phaser.GameObjects.BitmapText.prototype.getTextBounds=function(t){var e=this._bounds;return(this._dirty||t||this.scaleX!==e.scaleX||this.scaleY!==e.scaleY)&&(s(this,t,!0,e),this._dirty=!1),e},Phaser.GameObjects.BitmapText.prototype.setFont=function(t,e,i){var o;return void 0===e&&(e=this._fontSize),void 0===i&&(i=this._align),t!==this.font&&(o=this.scene.sys.cache.bitmapFont.get(t))&&(this.font=t,this.fontData=o.data,this._fontSize=e,this._align=i,this.fromAtlas=!0===o.fromAtlas,this.setTexture(o.texture,o.frame),s(this,!1,!0,this._bounds)),this}},e.NativeChanges=o}]);